function _getHiddenProp() {
    var t = ["webkit", "moz", "ms", "o"];
    if ("hidden" in document) return "hidden";
    for (var e = 0; e < t.length; e++) if (t[e] + "Hidden" in document) return t[e] + "Hidden";
    return null;
}
function FastClick(t, e) {
    "use strict";
    function n(t, e) {
        return function () {
            return t.apply(e, arguments);
        };
    }
    var i;
    if (
        ((e = e || {}),
        (this.trackingClick = !1),
        (this.trackingClickStart = 0),
        (this.targetElement = null),
        (this.touchStartX = 0),
        (this.touchStartY = 0),
        (this.lastTouchIdentifier = 0),
        (this.touchBoundary = e.touchBoundary || 10),
        (this.layer = t),
        (this.tapDelay = e.tapDelay || 200),
        !FastClick.notNeeded(t))
    ) {
        for (var r = ["onMouse", "onClick", "onTouchStart", "onTouchMove", "onTouchEnd", "onTouchCancel"], o = this, a = 0, s = r.length; s > a; a++) o[r[a]] = n(o[r[a]], o);
        deviceIsAndroid && (t.addEventListener("mouseover", this.onMouse, !0), t.addEventListener("mousedown", this.onMouse, !0), t.addEventListener("mouseup", this.onMouse, !0)),
            t.addEventListener("click", this.onClick, !0),
            t.addEventListener("touchstart", this.onTouchStart, !1),
            t.addEventListener("touchmove", this.onTouchMove, !1),
            t.addEventListener("touchend", this.onTouchEnd, !1),
            t.addEventListener("touchcancel", this.onTouchCancel, !1),
            Event.prototype.stopImmediatePropagation ||
                ((t.removeEventListener = function (e, n, i) {
                    var r = Node.prototype.removeEventListener;
                    "click" === e ? r.call(t, e, n.hijacked || n, i) : r.call(t, e, n, i);
                }),
                (t.addEventListener = function (e, n, i) {
                    var r = Node.prototype.addEventListener;
                    "click" === e
                        ? r.call(
                              t,
                              e,
                              n.hijacked ||
                                  (n.hijacked = function (t) {
                                      t.propagationStopped || n(t);
                                  }),
                              i
                          )
                        : r.call(t, e, n, i);
                })),
            "function" == typeof t.onclick &&
                ((i = t.onclick),
                t.addEventListener(
                    "click",
                    function (t) {
                        i(t);
                    },
                    !1
                ),
                (t.onclick = null));
    }
}
function flashMessage(t, e) {
    $(document).one("mousemove", function (e) {
        $("#jquery-notify-elem").remove();
        var n = $("<div />", { id: "jquery-notify-elem", class: "notification-message flashMessage ui-tooltip" });
        n.html('<div class="ui-tooltip-content"><div class="main-message">' + t + '</div><div class="dismiss-message">(Click on this box to dismiss)</div></div>'),
            n
                .css({ left: e.pageX, top: e.pageY })
                .click(function () {
                    n.remove();
                })
                .appendTo("body")
                .show();
    });
}
!(function (t, e) {
    "object" == typeof module && "object" == typeof module.exports
        ? (module.exports = t.document
              ? e(t, !0)
              : function (t) {
                    if (!t.document) throw new Error("jQuery requires a window with a document");
                    return e(t);
                })
        : e(t);
})("undefined" != typeof window ? window : this, function (t, e) {
    function n(t) {
        var e = !!t && "length" in t && t.length,
            n = ot.type(t);
        return "function" === n || ot.isWindow(t) ? !1 : "array" === n || 0 === e || ("number" == typeof e && e > 0 && e - 1 in t);
    }
    function i(t, e, n) {
        if (ot.isFunction(e))
            return ot.grep(t, function (t, i) {
                return !!e.call(t, i, t) !== n;
            });
        if (e.nodeType)
            return ot.grep(t, function (t) {
                return (t === e) !== n;
            });
        if ("string" == typeof e) {
            if (mt.test(e)) return ot.filter(e, t, n);
            e = ot.filter(e, t);
        }
        return ot.grep(t, function (t) {
            return Z.call(e, t) > -1 !== n;
        });
    }
    function r(t, e) {
        for (; (t = t[e]) && 1 !== t.nodeType; );
        return t;
    }
    function o(t) {
        var e = {};
        return (
            ot.each(t.match($t) || [], function (t, n) {
                e[n] = !0;
            }),
            e
        );
    }
    function a() {
        X.removeEventListener("DOMContentLoaded", a), t.removeEventListener("load", a), ot.ready();
    }
    function s() {
        this.expando = ot.expando + s.uid++;
    }
    function l(t, e, n) {
        var i;
        if (void 0 === n && 1 === t.nodeType)
            if (((i = "data-" + e.replace(Et, "-$&").toLowerCase()), (n = t.getAttribute(i)), "string" == typeof n)) {
                try {
                    n = "true" === n ? !0 : "false" === n ? !1 : "null" === n ? null : +n + "" === n ? +n : Tt.test(n) ? ot.parseJSON(n) : n;
                } catch (r) {}
                _t.set(t, e, n);
            } else n = void 0;
        return n;
    }
    function c(t, e, n, i) {
        var r,
            o = 1,
            a = 20,
            s = i
                ? function () {
                      return i.cur();
                  }
                : function () {
                      return ot.css(t, e, "");
                  },
            l = s(),
            c = (n && n[3]) || (ot.cssNumber[e] ? "" : "px"),
            u = (ot.cssNumber[e] || ("px" !== c && +l)) && It.exec(ot.css(t, e));
        if (u && u[3] !== c) {
            (c = c || u[3]), (n = n || []), (u = +l || 1);
            do (o = o || ".5"), (u /= o), ot.style(t, e, u + c);
            while (o !== (o = s() / l) && 1 !== o && --a);
        }
        return n && ((u = +u || +l || 0), (r = n[1] ? u + (n[1] + 1) * n[2] : +n[2]), i && ((i.unit = c), (i.start = u), (i.end = r))), r;
    }
    function u(t, e) {
        var n = "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName(e || "*") : "undefined" != typeof t.querySelectorAll ? t.querySelectorAll(e || "*") : [];
        return void 0 === e || (e && ot.nodeName(t, e)) ? ot.merge([t], n) : n;
    }
    function d(t, e) {
        for (var n = 0, i = t.length; i > n; n++) Ct.set(t[n], "globalEval", !e || Ct.get(e[n], "globalEval"));
    }
    function p(t, e, n, i, r) {
        for (var o, a, s, l, c, p, h = e.createDocumentFragment(), f = [], m = 0, v = t.length; v > m; m++)
            if (((o = t[m]), o || 0 === o))
                if ("object" === ot.type(o)) ot.merge(f, o.nodeType ? [o] : o);
                else if (Nt.test(o)) {
                    for (a = a || h.appendChild(e.createElement("div")), s = (Dt.exec(o) || ["", ""])[1].toLowerCase(), l = Lt[s] || Lt._default, a.innerHTML = l[1] + ot.htmlPrefilter(o) + l[2], p = l[0]; p--; ) a = a.lastChild;
                    ot.merge(f, a.childNodes), (a = h.firstChild), (a.textContent = "");
                } else f.push(e.createTextNode(o));
        for (h.textContent = "", m = 0; (o = f[m++]); )
            if (i && ot.inArray(o, i) > -1) r && r.push(o);
            else if (((c = ot.contains(o.ownerDocument, o)), (a = u(h.appendChild(o), "script")), c && d(a), n)) for (p = 0; (o = a[p++]); ) Ot.test(o.type || "") && n.push(o);
        return h;
    }
    function h() {
        return !0;
    }
    function f() {
        return !1;
    }
    function m() {
        try {
            return X.activeElement;
        } catch (t) {}
    }
    function v(t, e, n, i, r, o) {
        var a, s;
        if ("object" == typeof e) {
            "string" != typeof n && ((i = i || n), (n = void 0));
            for (s in e) v(t, s, n, i, e[s], o);
            return t;
        }
        if ((null == i && null == r ? ((r = n), (i = n = void 0)) : null == r && ("string" == typeof n ? ((r = i), (i = void 0)) : ((r = i), (i = n), (n = void 0))), r === !1)) r = f;
        else if (!r) return t;
        return (
            1 === o &&
                ((a = r),
                (r = function (t) {
                    return ot().off(t), a.apply(this, arguments);
                }),
                (r.guid = a.guid || (a.guid = ot.guid++))),
            t.each(function () {
                ot.event.add(this, e, r, i, n);
            })
        );
    }
    function g(t, e) {
        return ot.nodeName(t, "table") && ot.nodeName(11 !== e.nodeType ? e : e.firstChild, "tr") ? t.getElementsByTagName("tbody")[0] || t.appendChild(t.ownerDocument.createElement("tbody")) : t;
    }
    function y(t) {
        return (t.type = (null !== t.getAttribute("type")) + "/" + t.type), t;
    }
    function b(t) {
        var e = Vt.exec(t.type);
        return e ? (t.type = e[1]) : t.removeAttribute("type"), t;
    }
    function w(t, e) {
        var n, i, r, o, a, s, l, c;
        if (1 === e.nodeType) {
            if (Ct.hasData(t) && ((o = Ct.access(t)), (a = Ct.set(e, o)), (c = o.events))) {
                delete a.handle, (a.events = {});
                for (r in c) for (n = 0, i = c[r].length; i > n; n++) ot.event.add(e, r, c[r][n]);
            }
            _t.hasData(t) && ((s = _t.access(t)), (l = ot.extend({}, s)), _t.set(e, l));
        }
    }
    function $(t, e) {
        var n = e.nodeName.toLowerCase();
        "input" === n && jt.test(t.type) ? (e.checked = t.checked) : ("input" === n || "textarea" === n) && (e.defaultValue = t.defaultValue);
    }
    function x(t, e, n, i) {
        e = K.apply([], e);
        var r,
            o,
            a,
            s,
            l,
            c,
            d = 0,
            h = t.length,
            f = h - 1,
            m = e[0],
            v = ot.isFunction(m);
        if (v || (h > 1 && "string" == typeof m && !it.checkClone && Ht.test(m)))
            return t.each(function (r) {
                var o = t.eq(r);
                v && (e[0] = m.call(this, r, o.html())), x(o, e, n, i);
            });
        if (h && ((r = p(e, t[0].ownerDocument, !1, t, i)), (o = r.firstChild), 1 === r.childNodes.length && (r = o), o || i)) {
            for (a = ot.map(u(r, "script"), y), s = a.length; h > d; d++) (l = r), d !== f && ((l = ot.clone(l, !0, !0)), s && ot.merge(a, u(l, "script"))), n.call(t[d], l, d);
            if (s)
                for (c = a[a.length - 1].ownerDocument, ot.map(a, b), d = 0; s > d; d++)
                    (l = a[d]), Ot.test(l.type || "") && !Ct.access(l, "globalEval") && ot.contains(c, l) && (l.src ? ot._evalUrl && ot._evalUrl(l.src) : ot.globalEval(l.textContent.replace(zt, "")));
        }
        return t;
    }
    function k(t, e, n) {
        for (var i, r = e ? ot.filter(e, t) : t, o = 0; null != (i = r[o]); o++) n || 1 !== i.nodeType || ot.cleanData(u(i)), i.parentNode && (n && ot.contains(i.ownerDocument, i) && d(u(i, "script")), i.parentNode.removeChild(i));
        return t;
    }
    function S(t, e) {
        var n = ot(e.createElement(t)).appendTo(e.body),
            i = ot.css(n[0], "display");
        return n.detach(), i;
    }
    function C(t) {
        var e = X,
            n = Yt[t];
        return (
            n ||
                ((n = S(t, e)),
                ("none" !== n && n) || ((Wt = (Wt || ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement)), (e = Wt[0].contentDocument), e.write(), e.close(), (n = S(t, e)), Wt.detach()),
                (Yt[t] = n)),
            n
        );
    }
    function _(t, e, n) {
        var i,
            r,
            o,
            a,
            s = t.style;
        return (
            (n = n || Jt(t)),
            (a = n ? n.getPropertyValue(e) || n[e] : void 0),
            ("" !== a && void 0 !== a) || ot.contains(t.ownerDocument, t) || (a = ot.style(t, e)),
            n && !it.pixelMarginRight() && Xt.test(a) && Gt.test(e) && ((i = s.width), (r = s.minWidth), (o = s.maxWidth), (s.minWidth = s.maxWidth = s.width = a), (a = n.width), (s.width = i), (s.minWidth = r), (s.maxWidth = o)),
            void 0 !== a ? a + "" : a
        );
    }
    function T(t, e) {
        return {
            get: function () {
                return t() ? void delete this.get : (this.get = e).apply(this, arguments);
            },
        };
    }
    function E(t) {
        if (t in ie) return t;
        for (var e = t[0].toUpperCase() + t.slice(1), n = ne.length; n--; ) if (((t = ne[n] + e), t in ie)) return t;
    }
    function A(t, e, n) {
        var i = It.exec(e);
        return i ? Math.max(0, i[2] - (n || 0)) + (i[3] || "px") : e;
    }
    function I(t, e, n, i, r) {
        for (var o = n === (i ? "border" : "content") ? 4 : "width" === e ? 1 : 0, a = 0; 4 > o; o += 2)
            "margin" === n && (a += ot.css(t, n + Rt[o], !0, r)),
                i
                    ? ("content" === n && (a -= ot.css(t, "padding" + Rt[o], !0, r)), "margin" !== n && (a -= ot.css(t, "border" + Rt[o] + "Width", !0, r)))
                    : ((a += ot.css(t, "padding" + Rt[o], !0, r)), "padding" !== n && (a += ot.css(t, "border" + Rt[o] + "Width", !0, r)));
        return a;
    }
    function R(t, e, n) {
        var i = !0,
            r = "width" === e ? t.offsetWidth : t.offsetHeight,
            o = Jt(t),
            a = "border-box" === ot.css(t, "boxSizing", !1, o);
        if (0 >= r || null == r) {
            if (((r = _(t, e, o)), (0 > r || null == r) && (r = t.style[e]), Xt.test(r))) return r;
            (i = a && (it.boxSizingReliable() || r === t.style[e])), (r = parseFloat(r) || 0);
        }
        return r + I(t, e, n || (a ? "border" : "content"), i, o) + "px";
    }
    function P(t, e) {
        for (var n, i, r, o = [], a = 0, s = t.length; s > a; a++)
            (i = t[a]),
                i.style &&
                    ((o[a] = Ct.get(i, "olddisplay")),
                    (n = i.style.display),
                    e
                        ? (o[a] || "none" !== n || (i.style.display = ""), "" === i.style.display && Pt(i) && (o[a] = Ct.access(i, "olddisplay", C(i.nodeName))))
                        : ((r = Pt(i)), ("none" === n && r) || Ct.set(i, "olddisplay", r ? n : ot.css(i, "display"))));
        for (a = 0; s > a; a++) (i = t[a]), i.style && ((e && "none" !== i.style.display && "" !== i.style.display) || (i.style.display = e ? o[a] || "" : "none"));
        return t;
    }
    function j(t, e, n, i, r) {
        return new j.prototype.init(t, e, n, i, r);
    }
    function D() {
        return (
            t.setTimeout(function () {
                re = void 0;
            }),
            (re = ot.now())
        );
    }
    function O(t, e) {
        var n,
            i = 0,
            r = { height: t };
        for (e = e ? 1 : 0; 4 > i; i += 2 - e) (n = Rt[i]), (r["margin" + n] = r["padding" + n] = t);
        return e && (r.opacity = r.width = t), r;
    }
    function L(t, e, n) {
        for (var i, r = (U.tweeners[e] || []).concat(U.tweeners["*"]), o = 0, a = r.length; a > o; o++) if ((i = r[o].call(n, e, t))) return i;
    }
    function N(t, e, n) {
        var i,
            r,
            o,
            a,
            s,
            l,
            c,
            u,
            d = this,
            p = {},
            h = t.style,
            f = t.nodeType && Pt(t),
            m = Ct.get(t, "fxshow");
        n.queue ||
            ((s = ot._queueHooks(t, "fx")),
            null == s.unqueued &&
                ((s.unqueued = 0),
                (l = s.empty.fire),
                (s.empty.fire = function () {
                    s.unqueued || l();
                })),
            s.unqueued++,
            d.always(function () {
                d.always(function () {
                    s.unqueued--, ot.queue(t, "fx").length || s.empty.fire();
                });
            })),
            1 === t.nodeType &&
                ("height" in e || "width" in e) &&
                ((n.overflow = [h.overflow, h.overflowX, h.overflowY]),
                (c = ot.css(t, "display")),
                (u = "none" === c ? Ct.get(t, "olddisplay") || C(t.nodeName) : c),
                "inline" === u && "none" === ot.css(t, "float") && (h.display = "inline-block")),
            n.overflow &&
                ((h.overflow = "hidden"),
                d.always(function () {
                    (h.overflow = n.overflow[0]), (h.overflowX = n.overflow[1]), (h.overflowY = n.overflow[2]);
                }));
        for (i in e)
            if (((r = e[i]), ae.exec(r))) {
                if ((delete e[i], (o = o || "toggle" === r), r === (f ? "hide" : "show"))) {
                    if ("show" !== r || !m || void 0 === m[i]) continue;
                    f = !0;
                }
                p[i] = (m && m[i]) || ot.style(t, i);
            } else c = void 0;
        if (ot.isEmptyObject(p)) "inline" === ("none" === c ? C(t.nodeName) : c) && (h.display = c);
        else {
            m ? "hidden" in m && (f = m.hidden) : (m = Ct.access(t, "fxshow", {})),
                o && (m.hidden = !f),
                f
                    ? ot(t).show()
                    : d.done(function () {
                          ot(t).hide();
                      }),
                d.done(function () {
                    var e;
                    Ct.remove(t, "fxshow");
                    for (e in p) ot.style(t, e, p[e]);
                });
            for (i in p) (a = L(f ? m[i] : 0, i, d)), i in m || ((m[i] = a.start), f && ((a.end = a.start), (a.start = "width" === i || "height" === i ? 1 : 0)));
        }
    }
    function q(t, e) {
        var n, i, r, o, a;
        for (n in t)
            if (((i = ot.camelCase(n)), (r = e[i]), (o = t[n]), ot.isArray(o) && ((r = o[1]), (o = t[n] = o[0])), n !== i && ((t[i] = o), delete t[n]), (a = ot.cssHooks[i]), a && "expand" in a)) {
                (o = a.expand(o)), delete t[i];
                for (n in o) n in t || ((t[n] = o[n]), (e[n] = r));
            } else e[i] = r;
    }
    function U(t, e, n) {
        var i,
            r,
            o = 0,
            a = U.prefilters.length,
            s = ot.Deferred().always(function () {
                delete l.elem;
            }),
            l = function () {
                if (r) return !1;
                for (var e = re || D(), n = Math.max(0, c.startTime + c.duration - e), i = n / c.duration || 0, o = 1 - i, a = 0, l = c.tweens.length; l > a; a++) c.tweens[a].run(o);
                return s.notifyWith(t, [c, o, n]), 1 > o && l ? n : (s.resolveWith(t, [c]), !1);
            },
            c = s.promise({
                elem: t,
                props: ot.extend({}, e),
                opts: ot.extend(!0, { specialEasing: {}, easing: ot.easing._default }, n),
                originalProperties: e,
                originalOptions: n,
                startTime: re || D(),
                duration: n.duration,
                tweens: [],
                createTween: function (e, n) {
                    var i = ot.Tween(t, c.opts, e, n, c.opts.specialEasing[e] || c.opts.easing);
                    return c.tweens.push(i), i;
                },
                stop: function (e) {
                    var n = 0,
                        i = e ? c.tweens.length : 0;
                    if (r) return this;
                    for (r = !0; i > n; n++) c.tweens[n].run(1);
                    return e ? (s.notifyWith(t, [c, 1, 0]), s.resolveWith(t, [c, e])) : s.rejectWith(t, [c, e]), this;
                },
            }),
            u = c.props;
        for (q(u, c.opts.specialEasing); a > o; o++) if ((i = U.prefilters[o].call(c, t, u, c.opts))) return ot.isFunction(i.stop) && (ot._queueHooks(c.elem, c.opts.queue).stop = ot.proxy(i.stop, i)), i;
        return (
            ot.map(u, L, c),
            ot.isFunction(c.opts.start) && c.opts.start.call(t, c),
            ot.fx.timer(ot.extend(l, { elem: t, anim: c, queue: c.opts.queue })),
            c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always)
        );
    }
    function M(t) {
        return (t.getAttribute && t.getAttribute("class")) || "";
    }
    function B(t) {
        return function (e, n) {
            "string" != typeof e && ((n = e), (e = "*"));
            var i,
                r = 0,
                o = e.toLowerCase().match($t) || [];
            if (ot.isFunction(n)) for (; (i = o[r++]); ) "+" === i[0] ? ((i = i.slice(1) || "*"), (t[i] = t[i] || []).unshift(n)) : (t[i] = t[i] || []).push(n);
        };
    }
    function F(t, e, n, i) {
        function r(s) {
            var l;
            return (
                (o[s] = !0),
                ot.each(t[s] || [], function (t, s) {
                    var c = s(e, n, i);
                    return "string" != typeof c || a || o[c] ? (a ? !(l = c) : void 0) : (e.dataTypes.unshift(c), r(c), !1);
                }),
                l
            );
        }
        var o = {},
            a = t === _e;
        return r(e.dataTypes[0]) || (!o["*"] && r("*"));
    }
    function H(t, e) {
        var n,
            i,
            r = ot.ajaxSettings.flatOptions || {};
        for (n in e) void 0 !== e[n] && ((r[n] ? t : i || (i = {}))[n] = e[n]);
        return i && ot.extend(!0, t, i), t;
    }
    function V(t, e, n) {
        for (var i, r, o, a, s = t.contents, l = t.dataTypes; "*" === l[0]; ) l.shift(), void 0 === i && (i = t.mimeType || e.getResponseHeader("Content-Type"));
        if (i)
            for (r in s)
                if (s[r] && s[r].test(i)) {
                    l.unshift(r);
                    break;
                }
        if (l[0] in n) o = l[0];
        else {
            for (r in n) {
                if (!l[0] || t.converters[r + " " + l[0]]) {
                    o = r;
                    break;
                }
                a || (a = r);
            }
            o = o || a;
        }
        return o ? (o !== l[0] && l.unshift(o), n[o]) : void 0;
    }
    function z(t, e, n, i) {
        var r,
            o,
            a,
            s,
            l,
            c = {},
            u = t.dataTypes.slice();
        if (u[1]) for (a in t.converters) c[a.toLowerCase()] = t.converters[a];
        for (o = u.shift(); o; )
            if ((t.responseFields[o] && (n[t.responseFields[o]] = e), !l && i && t.dataFilter && (e = t.dataFilter(e, t.dataType)), (l = o), (o = u.shift())))
                if ("*" === o) o = l;
                else if ("*" !== l && l !== o) {
                    if (((a = c[l + " " + o] || c["* " + o]), !a))
                        for (r in c)
                            if (((s = r.split(" ")), s[1] === o && (a = c[l + " " + s[0]] || c["* " + s[0]]))) {
                                a === !0 ? (a = c[r]) : c[r] !== !0 && ((o = s[0]), u.unshift(s[1]));
                                break;
                            }
                    if (a !== !0)
                        if (a && t["throws"]) e = a(e);
                        else
                            try {
                                e = a(e);
                            } catch (d) {
                                return { state: "parsererror", error: a ? d : "No conversion from " + l + " to " + o };
                            }
                }
        return { state: "success", data: e };
    }
    function W(t, e, n, i) {
        var r;
        if (ot.isArray(e))
            ot.each(e, function (e, r) {
                n || Ie.test(t) ? i(t, r) : W(t + "[" + ("object" == typeof r && null != r ? e : "") + "]", r, n, i);
            });
        else if (n || "object" !== ot.type(e)) i(t, e);
        else for (r in e) W(t + "[" + r + "]", e[r], n, i);
    }
    function Y(t) {
        return ot.isWindow(t) ? t : 9 === t.nodeType && t.defaultView;
    }
    var G = [],
        X = t.document,
        J = G.slice,
        K = G.concat,
        Q = G.push,
        Z = G.indexOf,
        tt = {},
        et = tt.toString,
        nt = tt.hasOwnProperty,
        it = {},
        rt = "2.2.4",
        ot = function (t, e) {
            return new ot.fn.init(t, e);
        },
        at = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        st = /^-ms-/,
        lt = /-([\da-z])/gi,
        ct = function (t, e) {
            return e.toUpperCase();
        };
    (ot.fn = ot.prototype = {
        jquery: rt,
        constructor: ot,
        selector: "",
        length: 0,
        toArray: function () {
            return J.call(this);
        },
        get: function (t) {
            return null != t ? (0 > t ? this[t + this.length] : this[t]) : J.call(this);
        },
        pushStack: function (t) {
            var e = ot.merge(this.constructor(), t);
            return (e.prevObject = this), (e.context = this.context), e;
        },
        each: function (t) {
            return ot.each(this, t);
        },
        map: function (t) {
            return this.pushStack(
                ot.map(this, function (e, n) {
                    return t.call(e, n, e);
                })
            );
        },
        slice: function () {
            return this.pushStack(J.apply(this, arguments));
        },
        first: function () {
            return this.eq(0);
        },
        last: function () {
            return this.eq(-1);
        },
        eq: function (t) {
            var e = this.length,
                n = +t + (0 > t ? e : 0);
            return this.pushStack(n >= 0 && e > n ? [this[n]] : []);
        },
        end: function () {
            return this.prevObject || this.constructor();
        },
        push: Q,
        sort: G.sort,
        splice: G.splice,
    }),
        (ot.extend = ot.fn.extend = function () {
            var t,
                e,
                n,
                i,
                r,
                o,
                a = arguments[0] || {},
                s = 1,
                l = arguments.length,
                c = !1;
            for ("boolean" == typeof a && ((c = a), (a = arguments[s] || {}), s++), "object" == typeof a || ot.isFunction(a) || (a = {}), s === l && ((a = this), s--); l > s; s++)
                if (null != (t = arguments[s]))
                    for (e in t)
                        (n = a[e]),
                            (i = t[e]),
                            a !== i &&
                                (c && i && (ot.isPlainObject(i) || (r = ot.isArray(i)))
                                    ? (r ? ((r = !1), (o = n && ot.isArray(n) ? n : [])) : (o = n && ot.isPlainObject(n) ? n : {}), (a[e] = ot.extend(c, o, i)))
                                    : void 0 !== i && (a[e] = i));
            return a;
        }),
        ot.extend({
            expando: "jQuery" + (rt + Math.random()).replace(/\D/g, ""),
            isReady: !0,
            error: function (t) {
                throw new Error(t);
            },
            noop: function () {},
            isFunction: function (t) {
                return "function" === ot.type(t);
            },
            isArray: Array.isArray,
            isWindow: function (t) {
                return null != t && t === t.window;
            },
            isNumeric: function (t) {
                var e = t && t.toString();
                return !ot.isArray(t) && e - parseFloat(e) + 1 >= 0;
            },
            isPlainObject: function (t) {
                var e;
                if ("object" !== ot.type(t) || t.nodeType || ot.isWindow(t)) return !1;
                if (t.constructor && !nt.call(t, "constructor") && !nt.call(t.constructor.prototype || {}, "isPrototypeOf")) return !1;
                for (e in t);
                return void 0 === e || nt.call(t, e);
            },
            isEmptyObject: function (t) {
                var e;
                for (e in t) return !1;
                return !0;
            },
            type: function (t) {
                return null == t ? t + "" : "object" == typeof t || "function" == typeof t ? tt[et.call(t)] || "object" : typeof t;
            },
            globalEval: function (t) {
                var e,
                    n = eval;
                (t = ot.trim(t)), t && (1 === t.indexOf("use strict") ? ((e = X.createElement("script")), (e.text = t), X.head.appendChild(e).parentNode.removeChild(e)) : n(t));
            },
            camelCase: function (t) {
                return t.replace(st, "ms-").replace(lt, ct);
            },
            nodeName: function (t, e) {
                return t.nodeName && t.nodeName.toLowerCase() === e.toLowerCase();
            },
            each: function (t, e) {
                var i,
                    r = 0;
                if (n(t)) for (i = t.length; i > r && e.call(t[r], r, t[r]) !== !1; r++);
                else for (r in t) if (e.call(t[r], r, t[r]) === !1) break;
                return t;
            },
            trim: function (t) {
                return null == t ? "" : (t + "").replace(at, "");
            },
            makeArray: function (t, e) {
                var i = e || [];
                return null != t && (n(Object(t)) ? ot.merge(i, "string" == typeof t ? [t] : t) : Q.call(i, t)), i;
            },
            inArray: function (t, e, n) {
                return null == e ? -1 : Z.call(e, t, n);
            },
            merge: function (t, e) {
                for (var n = +e.length, i = 0, r = t.length; n > i; i++) t[r++] = e[i];
                return (t.length = r), t;
            },
            grep: function (t, e, n) {
                for (var i, r = [], o = 0, a = t.length, s = !n; a > o; o++) (i = !e(t[o], o)), i !== s && r.push(t[o]);
                return r;
            },
            map: function (t, e, i) {
                var r,
                    o,
                    a = 0,
                    s = [];
                if (n(t)) for (r = t.length; r > a; a++) (o = e(t[a], a, i)), null != o && s.push(o);
                else for (a in t) (o = e(t[a], a, i)), null != o && s.push(o);
                return K.apply([], s);
            },
            guid: 1,
            proxy: function (t, e) {
                var n, i, r;
                return (
                    "string" == typeof e && ((n = t[e]), (e = t), (t = n)),
                    ot.isFunction(t)
                        ? ((i = J.call(arguments, 2)),
                          (r = function () {
                              return t.apply(e || this, i.concat(J.call(arguments)));
                          }),
                          (r.guid = t.guid = t.guid || ot.guid++),
                          r)
                        : void 0
                );
            },
            now: Date.now,
            support: it,
        }),
        "function" == typeof Symbol && (ot.fn[Symbol.iterator] = G[Symbol.iterator]),
        ot.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function (t, e) {
            tt["[object " + e + "]"] = e.toLowerCase();
        });
    var ut = (function (t) {
        function e(t, e, n, i) {
            var r,
                o,
                a,
                s,
                l,
                c,
                d,
                h,
                f = e && e.ownerDocument,
                m = e ? e.nodeType : 9;
            if (((n = n || []), "string" != typeof t || !t || (1 !== m && 9 !== m && 11 !== m))) return n;
            if (!i && ((e ? e.ownerDocument || e : M) !== P && R(e), (e = e || P), D)) {
                if (11 !== m && (c = gt.exec(t)))
                    if ((r = c[1])) {
                        if (9 === m) {
                            if (!(a = e.getElementById(r))) return n;
                            if (a.id === r) return n.push(a), n;
                        } else if (f && (a = f.getElementById(r)) && q(e, a) && a.id === r) return n.push(a), n;
                    } else {
                        if (c[2]) return Q.apply(n, e.getElementsByTagName(t)), n;
                        if ((r = c[3]) && $.getElementsByClassName && e.getElementsByClassName) return Q.apply(n, e.getElementsByClassName(r)), n;
                    }
                if ($.qsa && !z[t + " "] && (!O || !O.test(t))) {
                    if (1 !== m) (f = e), (h = t);
                    else if ("object" !== e.nodeName.toLowerCase()) {
                        for ((s = e.getAttribute("id")) ? (s = s.replace(bt, "\\$&")) : e.setAttribute("id", (s = U)), d = C(t), o = d.length, l = pt.test(s) ? "#" + s : "[id='" + s + "']"; o--; ) d[o] = l + " " + p(d[o]);
                        (h = d.join(",")), (f = (yt.test(t) && u(e.parentNode)) || e);
                    }
                    if (h)
                        try {
                            return Q.apply(n, f.querySelectorAll(h)), n;
                        } catch (v) {
                        } finally {
                            s === U && e.removeAttribute("id");
                        }
                }
            }
            return T(t.replace(st, "$1"), e, n, i);
        }
        function n() {
            function t(n, i) {
                return e.push(n + " ") > x.cacheLength && delete t[e.shift()], (t[n + " "] = i);
            }
            var e = [];
            return t;
        }
        function i(t) {
            return (t[U] = !0), t;
        }
        function r(t) {
            var e = P.createElement("div");
            try {
                return !!t(e);
            } catch (n) {
                return !1;
            } finally {
                e.parentNode && e.parentNode.removeChild(e), (e = null);
            }
        }
        function o(t, e) {
            for (var n = t.split("|"), i = n.length; i--; ) x.attrHandle[n[i]] = e;
        }
        function a(t, e) {
            var n = e && t,
                i = n && 1 === t.nodeType && 1 === e.nodeType && (~e.sourceIndex || Y) - (~t.sourceIndex || Y);
            if (i) return i;
            if (n) for (; (n = n.nextSibling); ) if (n === e) return -1;
            return t ? 1 : -1;
        }
        function s(t) {
            return function (e) {
                var n = e.nodeName.toLowerCase();
                return "input" === n && e.type === t;
            };
        }
        function l(t) {
            return function (e) {
                var n = e.nodeName.toLowerCase();
                return ("input" === n || "button" === n) && e.type === t;
            };
        }
        function c(t) {
            return i(function (e) {
                return (
                    (e = +e),
                    i(function (n, i) {
                        for (var r, o = t([], n.length, e), a = o.length; a--; ) n[(r = o[a])] && (n[r] = !(i[r] = n[r]));
                    })
                );
            });
        }
        function u(t) {
            return t && "undefined" != typeof t.getElementsByTagName && t;
        }
        function d() {}
        function p(t) {
            for (var e = 0, n = t.length, i = ""; n > e; e++) i += t[e].value;
            return i;
        }
        function h(t, e, n) {
            var i = e.dir,
                r = n && "parentNode" === i,
                o = F++;
            return e.first
                ? function (e, n, o) {
                      for (; (e = e[i]); ) if (1 === e.nodeType || r) return t(e, n, o);
                  }
                : function (e, n, a) {
                      var s,
                          l,
                          c,
                          u = [B, o];
                      if (a) {
                          for (; (e = e[i]); ) if ((1 === e.nodeType || r) && t(e, n, a)) return !0;
                      } else
                          for (; (e = e[i]); )
                              if (1 === e.nodeType || r) {
                                  if (((c = e[U] || (e[U] = {})), (l = c[e.uniqueID] || (c[e.uniqueID] = {})), (s = l[i]) && s[0] === B && s[1] === o)) return (u[2] = s[2]);
                                  if (((l[i] = u), (u[2] = t(e, n, a)))) return !0;
                              }
                  };
        }
        function f(t) {
            return t.length > 1
                ? function (e, n, i) {
                      for (var r = t.length; r--; ) if (!t[r](e, n, i)) return !1;
                      return !0;
                  }
                : t[0];
        }
        function m(t, n, i) {
            for (var r = 0, o = n.length; o > r; r++) e(t, n[r], i);
            return i;
        }
        function v(t, e, n, i, r) {
            for (var o, a = [], s = 0, l = t.length, c = null != e; l > s; s++) (o = t[s]) && (!n || n(o, i, r)) && (a.push(o), c && e.push(s));
            return a;
        }
        function g(t, e, n, r, o, a) {
            return (
                r && !r[U] && (r = g(r)),
                o && !o[U] && (o = g(o, a)),
                i(function (i, a, s, l) {
                    var c,
                        u,
                        d,
                        p = [],
                        h = [],
                        f = a.length,
                        g = i || m(e || "*", s.nodeType ? [s] : s, []),
                        y = !t || (!i && e) ? g : v(g, p, t, s, l),
                        b = n ? (o || (i ? t : f || r) ? [] : a) : y;
                    if ((n && n(y, b, s, l), r)) for (c = v(b, h), r(c, [], s, l), u = c.length; u--; ) (d = c[u]) && (b[h[u]] = !(y[h[u]] = d));
                    if (i) {
                        if (o || t) {
                            if (o) {
                                for (c = [], u = b.length; u--; ) (d = b[u]) && c.push((y[u] = d));
                                o(null, (b = []), c, l);
                            }
                            for (u = b.length; u--; ) (d = b[u]) && (c = o ? tt(i, d) : p[u]) > -1 && (i[c] = !(a[c] = d));
                        }
                    } else (b = v(b === a ? b.splice(f, b.length) : b)), o ? o(null, a, b, l) : Q.apply(a, b);
                })
            );
        }
        function y(t) {
            for (
                var e,
                    n,
                    i,
                    r = t.length,
                    o = x.relative[t[0].type],
                    a = o || x.relative[" "],
                    s = o ? 1 : 0,
                    l = h(
                        function (t) {
                            return t === e;
                        },
                        a,
                        !0
                    ),
                    c = h(
                        function (t) {
                            return tt(e, t) > -1;
                        },
                        a,
                        !0
                    ),
                    u = [
                        function (t, n, i) {
                            var r = (!o && (i || n !== E)) || ((e = n).nodeType ? l(t, n, i) : c(t, n, i));
                            return (e = null), r;
                        },
                    ];
                r > s;
                s++
            )
                if ((n = x.relative[t[s].type])) u = [h(f(u), n)];
                else {
                    if (((n = x.filter[t[s].type].apply(null, t[s].matches)), n[U])) {
                        for (i = ++s; r > i && !x.relative[t[i].type]; i++);
                        return g(s > 1 && f(u), s > 1 && p(t.slice(0, s - 1).concat({ value: " " === t[s - 2].type ? "*" : "" })).replace(st, "$1"), n, i > s && y(t.slice(s, i)), r > i && y((t = t.slice(i))), r > i && p(t));
                    }
                    u.push(n);
                }
            return f(u);
        }
        function b(t, n) {
            var r = n.length > 0,
                o = t.length > 0,
                a = function (i, a, s, l, c) {
                    var u,
                        d,
                        p,
                        h = 0,
                        f = "0",
                        m = i && [],
                        g = [],
                        y = E,
                        b = i || (o && x.find.TAG("*", c)),
                        w = (B += null == y ? 1 : Math.random() || 0.1),
                        $ = b.length;
                    for (c && (E = a === P || a || c); f !== $ && null != (u = b[f]); f++) {
                        if (o && u) {
                            for (d = 0, a || u.ownerDocument === P || (R(u), (s = !D)); (p = t[d++]); )
                                if (p(u, a || P, s)) {
                                    l.push(u);
                                    break;
                                }
                            c && (B = w);
                        }
                        r && ((u = !p && u) && h--, i && m.push(u));
                    }
                    if (((h += f), r && f !== h)) {
                        for (d = 0; (p = n[d++]); ) p(m, g, a, s);
                        if (i) {
                            if (h > 0) for (; f--; ) m[f] || g[f] || (g[f] = J.call(l));
                            g = v(g);
                        }
                        Q.apply(l, g), c && !i && g.length > 0 && h + n.length > 1 && e.uniqueSort(l);
                    }
                    return c && ((B = w), (E = y)), m;
                };
            return r ? i(a) : a;
        }
        var w,
            $,
            x,
            k,
            S,
            C,
            _,
            T,
            E,
            A,
            I,
            R,
            P,
            j,
            D,
            O,
            L,
            N,
            q,
            U = "sizzle" + 1 * new Date(),
            M = t.document,
            B = 0,
            F = 0,
            H = n(),
            V = n(),
            z = n(),
            W = function (t, e) {
                return t === e && (I = !0), 0;
            },
            Y = 1 << 31,
            G = {}.hasOwnProperty,
            X = [],
            J = X.pop,
            K = X.push,
            Q = X.push,
            Z = X.slice,
            tt = function (t, e) {
                for (var n = 0, i = t.length; i > n; n++) if (t[n] === e) return n;
                return -1;
            },
            et = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
            nt = "[\\x20\\t\\r\\n\\f]",
            it = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
            rt = "\\[" + nt + "*(" + it + ")(?:" + nt + "*([*^$|!~]?=)" + nt + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + it + "))|)" + nt + "*\\]",
            ot = ":(" + it + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + rt + ")*)|.*)\\)|)",
            at = new RegExp(nt + "+", "g"),
            st = new RegExp("^" + nt + "+|((?:^|[^\\\\])(?:\\\\.)*)" + nt + "+$", "g"),
            lt = new RegExp("^" + nt + "*," + nt + "*"),
            ct = new RegExp("^" + nt + "*([>+~]|" + nt + ")" + nt + "*"),
            ut = new RegExp("=" + nt + "*([^\\]'\"]*?)" + nt + "*\\]", "g"),
            dt = new RegExp(ot),
            pt = new RegExp("^" + it + "$"),
            ht = {
                ID: new RegExp("^#(" + it + ")"),
                CLASS: new RegExp("^\\.(" + it + ")"),
                TAG: new RegExp("^(" + it + "|[*])"),
                ATTR: new RegExp("^" + rt),
                PSEUDO: new RegExp("^" + ot),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + nt + "*(even|odd|(([+-]|)(\\d*)n|)" + nt + "*(?:([+-]|)" + nt + "*(\\d+)|))" + nt + "*\\)|)", "i"),
                bool: new RegExp("^(?:" + et + ")$", "i"),
                needsContext: new RegExp("^" + nt + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + nt + "*((?:-\\d)?\\d*)" + nt + "*\\)|)(?=[^-]|$)", "i"),
            },
            ft = /^(?:input|select|textarea|button)$/i,
            mt = /^h\d$/i,
            vt = /^[^{]+\{\s*\[native \w/,
            gt = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
            yt = /[+~]/,
            bt = /'|\\/g,
            wt = new RegExp("\\\\([\\da-f]{1,6}" + nt + "?|(" + nt + ")|.)", "ig"),
            $t = function (t, e, n) {
                var i = "0x" + e - 65536;
                return i !== i || n ? e : 0 > i ? String.fromCharCode(i + 65536) : String.fromCharCode((i >> 10) | 55296, (1023 & i) | 56320);
            },
            xt = function () {
                R();
            };
        try {
            Q.apply((X = Z.call(M.childNodes)), M.childNodes), X[M.childNodes.length].nodeType;
        } catch (kt) {
            Q = {
                apply: X.length
                    ? function (t, e) {
                          K.apply(t, Z.call(e));
                      }
                    : function (t, e) {
                          for (var n = t.length, i = 0; (t[n++] = e[i++]); );
                          t.length = n - 1;
                      },
            };
        }
        ($ = e.support = {}),
            (S = e.isXML = function (t) {
                var e = t && (t.ownerDocument || t).documentElement;
                return e ? "HTML" !== e.nodeName : !1;
            }),
            (R = e.setDocument = function (t) {
                var e,
                    n,
                    i = t ? t.ownerDocument || t : M;
                return i !== P && 9 === i.nodeType && i.documentElement
                    ? ((P = i),
                      (j = P.documentElement),
                      (D = !S(P)),
                      (n = P.defaultView) && n.top !== n && (n.addEventListener ? n.addEventListener("unload", xt, !1) : n.attachEvent && n.attachEvent("onunload", xt)),
                      ($.attributes = r(function (t) {
                          return (t.className = "i"), !t.getAttribute("className");
                      })),
                      ($.getElementsByTagName = r(function (t) {
                          return t.appendChild(P.createComment("")), !t.getElementsByTagName("*").length;
                      })),
                      ($.getElementsByClassName = vt.test(P.getElementsByClassName)),
                      ($.getById = r(function (t) {
                          return (j.appendChild(t).id = U), !P.getElementsByName || !P.getElementsByName(U).length;
                      })),
                      $.getById
                          ? ((x.find.ID = function (t, e) {
                                if ("undefined" != typeof e.getElementById && D) {
                                    var n = e.getElementById(t);
                                    return n ? [n] : [];
                                }
                            }),
                            (x.filter.ID = function (t) {
                                var e = t.replace(wt, $t);
                                return function (t) {
                                    return t.getAttribute("id") === e;
                                };
                            }))
                          : (delete x.find.ID,
                            (x.filter.ID = function (t) {
                                var e = t.replace(wt, $t);
                                return function (t) {
                                    var n = "undefined" != typeof t.getAttributeNode && t.getAttributeNode("id");
                                    return n && n.value === e;
                                };
                            })),
                      (x.find.TAG = $.getElementsByTagName
                          ? function (t, e) {
                                return "undefined" != typeof e.getElementsByTagName ? e.getElementsByTagName(t) : $.qsa ? e.querySelectorAll(t) : void 0;
                            }
                          : function (t, e) {
                                var n,
                                    i = [],
                                    r = 0,
                                    o = e.getElementsByTagName(t);
                                if ("*" === t) {
                                    for (; (n = o[r++]); ) 1 === n.nodeType && i.push(n);
                                    return i;
                                }
                                return o;
                            }),
                      (x.find.CLASS =
                          $.getElementsByClassName &&
                          function (t, e) {
                              return "undefined" != typeof e.getElementsByClassName && D ? e.getElementsByClassName(t) : void 0;
                          }),
                      (L = []),
                      (O = []),
                      ($.qsa = vt.test(P.querySelectorAll)) &&
                          (r(function (t) {
                              (j.appendChild(t).innerHTML = "<a id='" + U + "'></a><select id='" + U + "-\r\\' msallowcapture=''><option selected=''></option></select>"),
                                  t.querySelectorAll("[msallowcapture^='']").length && O.push("[*^$]=" + nt + "*(?:''|\"\")"),
                                  t.querySelectorAll("[selected]").length || O.push("\\[" + nt + "*(?:value|" + et + ")"),
                                  t.querySelectorAll("[id~=" + U + "-]").length || O.push("~="),
                                  t.querySelectorAll(":checked").length || O.push(":checked"),
                                  t.querySelectorAll("a#" + U + "+*").length || O.push(".#.+[+~]");
                          }),
                          r(function (t) {
                              var e = P.createElement("input");
                              e.setAttribute("type", "hidden"),
                                  t.appendChild(e).setAttribute("name", "D"),
                                  t.querySelectorAll("[name=d]").length && O.push("name" + nt + "*[*^$|!~]?="),
                                  t.querySelectorAll(":enabled").length || O.push(":enabled", ":disabled"),
                                  t.querySelectorAll("*,:x"),
                                  O.push(",.*:");
                          })),
                      ($.matchesSelector = vt.test((N = j.matches || j.webkitMatchesSelector || j.mozMatchesSelector || j.oMatchesSelector || j.msMatchesSelector))) &&
                          r(function (t) {
                              ($.disconnectedMatch = N.call(t, "div")), N.call(t, "[s!='']:x"), L.push("!=", ot);
                          }),
                      (O = O.length && new RegExp(O.join("|"))),
                      (L = L.length && new RegExp(L.join("|"))),
                      (e = vt.test(j.compareDocumentPosition)),
                      (q =
                          e || vt.test(j.contains)
                              ? function (t, e) {
                                    var n = 9 === t.nodeType ? t.documentElement : t,
                                        i = e && e.parentNode;
                                    return t === i || !(!i || 1 !== i.nodeType || !(n.contains ? n.contains(i) : t.compareDocumentPosition && 16 & t.compareDocumentPosition(i)));
                                }
                              : function (t, e) {
                                    if (e) for (; (e = e.parentNode); ) if (e === t) return !0;
                                    return !1;
                                }),
                      (W = e
                          ? function (t, e) {
                                if (t === e) return (I = !0), 0;
                                var n = !t.compareDocumentPosition - !e.compareDocumentPosition;
                                return n
                                    ? n
                                    : ((n = (t.ownerDocument || t) === (e.ownerDocument || e) ? t.compareDocumentPosition(e) : 1),
                                      1 & n || (!$.sortDetached && e.compareDocumentPosition(t) === n)
                                          ? t === P || (t.ownerDocument === M && q(M, t))
                                              ? -1
                                              : e === P || (e.ownerDocument === M && q(M, e))
                                              ? 1
                                              : A
                                              ? tt(A, t) - tt(A, e)
                                              : 0
                                          : 4 & n
                                          ? -1
                                          : 1);
                            }
                          : function (t, e) {
                                if (t === e) return (I = !0), 0;
                                var n,
                                    i = 0,
                                    r = t.parentNode,
                                    o = e.parentNode,
                                    s = [t],
                                    l = [e];
                                if (!r || !o) return t === P ? -1 : e === P ? 1 : r ? -1 : o ? 1 : A ? tt(A, t) - tt(A, e) : 0;
                                if (r === o) return a(t, e);
                                for (n = t; (n = n.parentNode); ) s.unshift(n);
                                for (n = e; (n = n.parentNode); ) l.unshift(n);
                                for (; s[i] === l[i]; ) i++;
                                return i ? a(s[i], l[i]) : s[i] === M ? -1 : l[i] === M ? 1 : 0;
                            }),
                      P)
                    : P;
            }),
            (e.matches = function (t, n) {
                return e(t, null, null, n);
            }),
            (e.matchesSelector = function (t, n) {
                if (((t.ownerDocument || t) !== P && R(t), (n = n.replace(ut, "='$1']")), $.matchesSelector && D && !z[n + " "] && (!L || !L.test(n)) && (!O || !O.test(n))))
                    try {
                        var i = N.call(t, n);
                        if (i || $.disconnectedMatch || (t.document && 11 !== t.document.nodeType)) return i;
                    } catch (r) {}
                return e(n, P, null, [t]).length > 0;
            }),
            (e.contains = function (t, e) {
                return (t.ownerDocument || t) !== P && R(t), q(t, e);
            }),
            (e.attr = function (t, e) {
                (t.ownerDocument || t) !== P && R(t);
                var n = x.attrHandle[e.toLowerCase()],
                    i = n && G.call(x.attrHandle, e.toLowerCase()) ? n(t, e, !D) : void 0;
                return void 0 !== i ? i : $.attributes || !D ? t.getAttribute(e) : (i = t.getAttributeNode(e)) && i.specified ? i.value : null;
            }),
            (e.error = function (t) {
                throw new Error("Syntax error, unrecognized expression: " + t);
            }),
            (e.uniqueSort = function (t) {
                var e,
                    n = [],
                    i = 0,
                    r = 0;
                if (((I = !$.detectDuplicates), (A = !$.sortStable && t.slice(0)), t.sort(W), I)) {
                    for (; (e = t[r++]); ) e === t[r] && (i = n.push(r));
                    for (; i--; ) t.splice(n[i], 1);
                }
                return (A = null), t;
            }),
            (k = e.getText = function (t) {
                var e,
                    n = "",
                    i = 0,
                    r = t.nodeType;
                if (r) {
                    if (1 === r || 9 === r || 11 === r) {
                        if ("string" == typeof t.textContent) return t.textContent;
                        for (t = t.firstChild; t; t = t.nextSibling) n += k(t);
                    } else if (3 === r || 4 === r) return t.nodeValue;
                } else for (; (e = t[i++]); ) n += k(e);
                return n;
            }),
            (x = e.selectors = {
                cacheLength: 50,
                createPseudo: i,
                match: ht,
                attrHandle: {},
                find: {},
                relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling" } },
                preFilter: {
                    ATTR: function (t) {
                        return (t[1] = t[1].replace(wt, $t)), (t[3] = (t[3] || t[4] || t[5] || "").replace(wt, $t)), "~=" === t[2] && (t[3] = " " + t[3] + " "), t.slice(0, 4);
                    },
                    CHILD: function (t) {
                        return (
                            (t[1] = t[1].toLowerCase()),
                            "nth" === t[1].slice(0, 3) ? (t[3] || e.error(t[0]), (t[4] = +(t[4] ? t[5] + (t[6] || 1) : 2 * ("even" === t[3] || "odd" === t[3]))), (t[5] = +(t[7] + t[8] || "odd" === t[3]))) : t[3] && e.error(t[0]),
                            t
                        );
                    },
                    PSEUDO: function (t) {
                        var e,
                            n = !t[6] && t[2];
                        return ht.CHILD.test(t[0])
                            ? null
                            : (t[3] ? (t[2] = t[4] || t[5] || "") : n && dt.test(n) && (e = C(n, !0)) && (e = n.indexOf(")", n.length - e) - n.length) && ((t[0] = t[0].slice(0, e)), (t[2] = n.slice(0, e))), t.slice(0, 3));
                    },
                },
                filter: {
                    TAG: function (t) {
                        var e = t.replace(wt, $t).toLowerCase();
                        return "*" === t
                            ? function () {
                                  return !0;
                              }
                            : function (t) {
                                  return t.nodeName && t.nodeName.toLowerCase() === e;
                              };
                    },
                    CLASS: function (t) {
                        var e = H[t + " "];
                        return (
                            e ||
                            ((e = new RegExp("(^|" + nt + ")" + t + "(" + nt + "|$)")) &&
                                H(t, function (t) {
                                    return e.test(("string" == typeof t.className && t.className) || ("undefined" != typeof t.getAttribute && t.getAttribute("class")) || "");
                                }))
                        );
                    },
                    ATTR: function (t, n, i) {
                        return function (r) {
                            var o = e.attr(r, t);
                            return null == o
                                ? "!=" === n
                                : n
                                ? ((o += ""),
                                  "=" === n
                                      ? o === i
                                      : "!=" === n
                                      ? o !== i
                                      : "^=" === n
                                      ? i && 0 === o.indexOf(i)
                                      : "*=" === n
                                      ? i && o.indexOf(i) > -1
                                      : "$=" === n
                                      ? i && o.slice(-i.length) === i
                                      : "~=" === n
                                      ? (" " + o.replace(at, " ") + " ").indexOf(i) > -1
                                      : "|=" === n
                                      ? o === i || o.slice(0, i.length + 1) === i + "-"
                                      : !1)
                                : !0;
                        };
                    },
                    CHILD: function (t, e, n, i, r) {
                        var o = "nth" !== t.slice(0, 3),
                            a = "last" !== t.slice(-4),
                            s = "of-type" === e;
                        return 1 === i && 0 === r
                            ? function (t) {
                                  return !!t.parentNode;
                              }
                            : function (e, n, l) {
                                  var c,
                                      u,
                                      d,
                                      p,
                                      h,
                                      f,
                                      m = o !== a ? "nextSibling" : "previousSibling",
                                      v = e.parentNode,
                                      g = s && e.nodeName.toLowerCase(),
                                      y = !l && !s,
                                      b = !1;
                                  if (v) {
                                      if (o) {
                                          for (; m; ) {
                                              for (p = e; (p = p[m]); ) if (s ? p.nodeName.toLowerCase() === g : 1 === p.nodeType) return !1;
                                              f = m = "only" === t && !f && "nextSibling";
                                          }
                                          return !0;
                                      }
                                      if (((f = [a ? v.firstChild : v.lastChild]), a && y)) {
                                          for (
                                              p = v, d = p[U] || (p[U] = {}), u = d[p.uniqueID] || (d[p.uniqueID] = {}), c = u[t] || [], h = c[0] === B && c[1], b = h && c[2], p = h && v.childNodes[h];
                                              (p = (++h && p && p[m]) || (b = h = 0) || f.pop());

                                          )
                                              if (1 === p.nodeType && ++b && p === e) {
                                                  u[t] = [B, h, b];
                                                  break;
                                              }
                                      } else if ((y && ((p = e), (d = p[U] || (p[U] = {})), (u = d[p.uniqueID] || (d[p.uniqueID] = {})), (c = u[t] || []), (h = c[0] === B && c[1]), (b = h)), b === !1))
                                          for (
                                              ;
                                              (p = (++h && p && p[m]) || (b = h = 0) || f.pop()) &&
                                              ((s ? p.nodeName.toLowerCase() !== g : 1 !== p.nodeType) || !++b || (y && ((d = p[U] || (p[U] = {})), (u = d[p.uniqueID] || (d[p.uniqueID] = {})), (u[t] = [B, b])), p !== e));

                                          );
                                      return (b -= r), b === i || (b % i === 0 && b / i >= 0);
                                  }
                              };
                    },
                    PSEUDO: function (t, n) {
                        var r,
                            o = x.pseudos[t] || x.setFilters[t.toLowerCase()] || e.error("unsupported pseudo: " + t);
                        return o[U]
                            ? o(n)
                            : o.length > 1
                            ? ((r = [t, t, "", n]),
                              x.setFilters.hasOwnProperty(t.toLowerCase())
                                  ? i(function (t, e) {
                                        for (var i, r = o(t, n), a = r.length; a--; ) (i = tt(t, r[a])), (t[i] = !(e[i] = r[a]));
                                    })
                                  : function (t) {
                                        return o(t, 0, r);
                                    })
                            : o;
                    },
                },
                pseudos: {
                    not: i(function (t) {
                        var e = [],
                            n = [],
                            r = _(t.replace(st, "$1"));
                        return r[U]
                            ? i(function (t, e, n, i) {
                                  for (var o, a = r(t, null, i, []), s = t.length; s--; ) (o = a[s]) && (t[s] = !(e[s] = o));
                              })
                            : function (t, i, o) {
                                  return (e[0] = t), r(e, null, o, n), (e[0] = null), !n.pop();
                              };
                    }),
                    has: i(function (t) {
                        return function (n) {
                            return e(t, n).length > 0;
                        };
                    }),
                    contains: i(function (t) {
                        return (
                            (t = t.replace(wt, $t)),
                            function (e) {
                                return (e.textContent || e.innerText || k(e)).indexOf(t) > -1;
                            }
                        );
                    }),
                    lang: i(function (t) {
                        return (
                            pt.test(t || "") || e.error("unsupported lang: " + t),
                            (t = t.replace(wt, $t).toLowerCase()),
                            function (e) {
                                var n;
                                do if ((n = D ? e.lang : e.getAttribute("xml:lang") || e.getAttribute("lang"))) return (n = n.toLowerCase()), n === t || 0 === n.indexOf(t + "-");
                                while ((e = e.parentNode) && 1 === e.nodeType);
                                return !1;
                            }
                        );
                    }),
                    target: function (e) {
                        var n = t.location && t.location.hash;
                        return n && n.slice(1) === e.id;
                    },
                    root: function (t) {
                        return t === j;
                    },
                    focus: function (t) {
                        return t === P.activeElement && (!P.hasFocus || P.hasFocus()) && !!(t.type || t.href || ~t.tabIndex);
                    },
                    enabled: function (t) {
                        return t.disabled === !1;
                    },
                    disabled: function (t) {
                        return t.disabled === !0;
                    },
                    checked: function (t) {
                        var e = t.nodeName.toLowerCase();
                        return ("input" === e && !!t.checked) || ("option" === e && !!t.selected);
                    },
                    selected: function (t) {
                        return t.parentNode && t.parentNode.selectedIndex, t.selected === !0;
                    },
                    empty: function (t) {
                        for (t = t.firstChild; t; t = t.nextSibling) if (t.nodeType < 6) return !1;
                        return !0;
                    },
                    parent: function (t) {
                        return !x.pseudos.empty(t);
                    },
                    header: function (t) {
                        return mt.test(t.nodeName);
                    },
                    input: function (t) {
                        return ft.test(t.nodeName);
                    },
                    button: function (t) {
                        var e = t.nodeName.toLowerCase();
                        return ("input" === e && "button" === t.type) || "button" === e;
                    },
                    text: function (t) {
                        var e;
                        return "input" === t.nodeName.toLowerCase() && "text" === t.type && (null == (e = t.getAttribute("type")) || "text" === e.toLowerCase());
                    },
                    first: c(function () {
                        return [0];
                    }),
                    last: c(function (t, e) {
                        return [e - 1];
                    }),
                    eq: c(function (t, e, n) {
                        return [0 > n ? n + e : n];
                    }),
                    even: c(function (t, e) {
                        for (var n = 0; e > n; n += 2) t.push(n);
                        return t;
                    }),
                    odd: c(function (t, e) {
                        for (var n = 1; e > n; n += 2) t.push(n);
                        return t;
                    }),
                    lt: c(function (t, e, n) {
                        for (var i = 0 > n ? n + e : n; --i >= 0; ) t.push(i);
                        return t;
                    }),
                    gt: c(function (t, e, n) {
                        for (var i = 0 > n ? n + e : n; ++i < e; ) t.push(i);
                        return t;
                    }),
                },
            }),
            (x.pseudos.nth = x.pseudos.eq);
        for (w in { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }) x.pseudos[w] = s(w);
        for (w in { submit: !0, reset: !0 }) x.pseudos[w] = l(w);
        return (
            (d.prototype = x.filters = x.pseudos),
            (x.setFilters = new d()),
            (C = e.tokenize = function (t, n) {
                var i,
                    r,
                    o,
                    a,
                    s,
                    l,
                    c,
                    u = V[t + " "];
                if (u) return n ? 0 : u.slice(0);
                for (s = t, l = [], c = x.preFilter; s; ) {
                    (!i || (r = lt.exec(s))) && (r && (s = s.slice(r[0].length) || s), l.push((o = []))), (i = !1), (r = ct.exec(s)) && ((i = r.shift()), o.push({ value: i, type: r[0].replace(st, " ") }), (s = s.slice(i.length)));
                    for (a in x.filter) !(r = ht[a].exec(s)) || (c[a] && !(r = c[a](r))) || ((i = r.shift()), o.push({ value: i, type: a, matches: r }), (s = s.slice(i.length)));
                    if (!i) break;
                }
                return n ? s.length : s ? e.error(t) : V(t, l).slice(0);
            }),
            (_ = e.compile = function (t, e) {
                var n,
                    i = [],
                    r = [],
                    o = z[t + " "];
                if (!o) {
                    for (e || (e = C(t)), n = e.length; n--; ) (o = y(e[n])), o[U] ? i.push(o) : r.push(o);
                    (o = z(t, b(r, i))), (o.selector = t);
                }
                return o;
            }),
            (T = e.select = function (t, e, n, i) {
                var r,
                    o,
                    a,
                    s,
                    l,
                    c = "function" == typeof t && t,
                    d = !i && C((t = c.selector || t));
                if (((n = n || []), 1 === d.length)) {
                    if (((o = d[0] = d[0].slice(0)), o.length > 2 && "ID" === (a = o[0]).type && $.getById && 9 === e.nodeType && D && x.relative[o[1].type])) {
                        if (((e = (x.find.ID(a.matches[0].replace(wt, $t), e) || [])[0]), !e)) return n;
                        c && (e = e.parentNode), (t = t.slice(o.shift().value.length));
                    }
                    for (r = ht.needsContext.test(t) ? 0 : o.length; r-- && ((a = o[r]), !x.relative[(s = a.type)]); )
                        if ((l = x.find[s]) && (i = l(a.matches[0].replace(wt, $t), (yt.test(o[0].type) && u(e.parentNode)) || e))) {
                            if ((o.splice(r, 1), (t = i.length && p(o)), !t)) return Q.apply(n, i), n;
                            break;
                        }
                }
                return (c || _(t, d))(i, e, !D, n, !e || (yt.test(t) && u(e.parentNode)) || e), n;
            }),
            ($.sortStable = U.split("").sort(W).join("") === U),
            ($.detectDuplicates = !!I),
            R(),
            ($.sortDetached = r(function (t) {
                return 1 & t.compareDocumentPosition(P.createElement("div"));
            })),
            r(function (t) {
                return (t.innerHTML = "<a href='#'></a>"), "#" === t.firstChild.getAttribute("href");
            }) ||
                o("type|href|height|width", function (t, e, n) {
                    return n ? void 0 : t.getAttribute(e, "type" === e.toLowerCase() ? 1 : 2);
                }),
            ($.attributes &&
                r(function (t) {
                    return (t.innerHTML = "<input/>"), t.firstChild.setAttribute("value", ""), "" === t.firstChild.getAttribute("value");
                })) ||
                o("value", function (t, e, n) {
                    return n || "input" !== t.nodeName.toLowerCase() ? void 0 : t.defaultValue;
                }),
            r(function (t) {
                return null == t.getAttribute("disabled");
            }) ||
                o(et, function (t, e, n) {
                    var i;
                    return n ? void 0 : t[e] === !0 ? e.toLowerCase() : (i = t.getAttributeNode(e)) && i.specified ? i.value : null;
                }),
            e
        );
    })(t);
    (ot.find = ut), (ot.expr = ut.selectors), (ot.expr[":"] = ot.expr.pseudos), (ot.uniqueSort = ot.unique = ut.uniqueSort), (ot.text = ut.getText), (ot.isXMLDoc = ut.isXML), (ot.contains = ut.contains);
    var dt = function (t, e, n) {
            for (var i = [], r = void 0 !== n; (t = t[e]) && 9 !== t.nodeType; )
                if (1 === t.nodeType) {
                    if (r && ot(t).is(n)) break;
                    i.push(t);
                }
            return i;
        },
        pt = function (t, e) {
            for (var n = []; t; t = t.nextSibling) 1 === t.nodeType && t !== e && n.push(t);
            return n;
        },
        ht = ot.expr.match.needsContext,
        ft = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,
        mt = /^.[^:#\[\.,]*$/;
    (ot.filter = function (t, e, n) {
        var i = e[0];
        return (
            n && (t = ":not(" + t + ")"),
            1 === e.length && 1 === i.nodeType
                ? ot.find.matchesSelector(i, t)
                    ? [i]
                    : []
                : ot.find.matches(
                      t,
                      ot.grep(e, function (t) {
                          return 1 === t.nodeType;
                      })
                  )
        );
    }),
        ot.fn.extend({
            find: function (t) {
                var e,
                    n = this.length,
                    i = [],
                    r = this;
                if ("string" != typeof t)
                    return this.pushStack(
                        ot(t).filter(function () {
                            for (e = 0; n > e; e++) if (ot.contains(r[e], this)) return !0;
                        })
                    );
                for (e = 0; n > e; e++) ot.find(t, r[e], i);
                return (i = this.pushStack(n > 1 ? ot.unique(i) : i)), (i.selector = this.selector ? this.selector + " " + t : t), i;
            },
            filter: function (t) {
                return this.pushStack(i(this, t || [], !1));
            },
            not: function (t) {
                return this.pushStack(i(this, t || [], !0));
            },
            is: function (t) {
                return !!i(this, "string" == typeof t && ht.test(t) ? ot(t) : t || [], !1).length;
            },
        });
    var vt,
        gt = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
        yt = (ot.fn.init = function (t, e, n) {
            var i, r;
            if (!t) return this;
            if (((n = n || vt), "string" == typeof t)) {
                if (((i = "<" === t[0] && ">" === t[t.length - 1] && t.length >= 3 ? [null, t, null] : gt.exec(t)), !i || (!i[1] && e))) return !e || e.jquery ? (e || n).find(t) : this.constructor(e).find(t);
                if (i[1]) {
                    if (((e = e instanceof ot ? e[0] : e), ot.merge(this, ot.parseHTML(i[1], e && e.nodeType ? e.ownerDocument || e : X, !0)), ft.test(i[1]) && ot.isPlainObject(e)))
                        for (i in e) ot.isFunction(this[i]) ? this[i](e[i]) : this.attr(i, e[i]);
                    return this;
                }
                return (r = X.getElementById(i[2])), r && r.parentNode && ((this.length = 1), (this[0] = r)), (this.context = X), (this.selector = t), this;
            }
            return t.nodeType
                ? ((this.context = this[0] = t), (this.length = 1), this)
                : ot.isFunction(t)
                ? void 0 !== n.ready
                    ? n.ready(t)
                    : t(ot)
                : (void 0 !== t.selector && ((this.selector = t.selector), (this.context = t.context)), ot.makeArray(t, this));
        });
    (yt.prototype = ot.fn), (vt = ot(X));
    var bt = /^(?:parents|prev(?:Until|All))/,
        wt = { children: !0, contents: !0, next: !0, prev: !0 };
    ot.fn.extend({
        has: function (t) {
            var e = ot(t, this),
                n = e.length;
            return this.filter(function () {
                for (var t = 0; n > t; t++) if (ot.contains(this, e[t])) return !0;
            });
        },
        closest: function (t, e) {
            for (var n, i = 0, r = this.length, o = [], a = ht.test(t) || "string" != typeof t ? ot(t, e || this.context) : 0; r > i; i++)
                for (n = this[i]; n && n !== e; n = n.parentNode)
                    if (n.nodeType < 11 && (a ? a.index(n) > -1 : 1 === n.nodeType && ot.find.matchesSelector(n, t))) {
                        o.push(n);
                        break;
                    }
            return this.pushStack(o.length > 1 ? ot.uniqueSort(o) : o);
        },
        index: function (t) {
            return t ? ("string" == typeof t ? Z.call(ot(t), this[0]) : Z.call(this, t.jquery ? t[0] : t)) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
        },
        add: function (t, e) {
            return this.pushStack(ot.uniqueSort(ot.merge(this.get(), ot(t, e))));
        },
        addBack: function (t) {
            return this.add(null == t ? this.prevObject : this.prevObject.filter(t));
        },
    }),
        ot.each(
            {
                parent: function (t) {
                    var e = t.parentNode;
                    return e && 11 !== e.nodeType ? e : null;
                },
                parents: function (t) {
                    return dt(t, "parentNode");
                },
                parentsUntil: function (t, e, n) {
                    return dt(t, "parentNode", n);
                },
                next: function (t) {
                    return r(t, "nextSibling");
                },
                prev: function (t) {
                    return r(t, "previousSibling");
                },
                nextAll: function (t) {
                    return dt(t, "nextSibling");
                },
                prevAll: function (t) {
                    return dt(t, "previousSibling");
                },
                nextUntil: function (t, e, n) {
                    return dt(t, "nextSibling", n);
                },
                prevUntil: function (t, e, n) {
                    return dt(t, "previousSibling", n);
                },
                siblings: function (t) {
                    return pt((t.parentNode || {}).firstChild, t);
                },
                children: function (t) {
                    return pt(t.firstChild);
                },
                contents: function (t) {
                    return t.contentDocument || ot.merge([], t.childNodes);
                },
            },
            function (t, e) {
                ot.fn[t] = function (n, i) {
                    var r = ot.map(this, e, n);
                    return "Until" !== t.slice(-5) && (i = n), i && "string" == typeof i && (r = ot.filter(i, r)), this.length > 1 && (wt[t] || ot.uniqueSort(r), bt.test(t) && r.reverse()), this.pushStack(r);
                };
            }
        );
    var $t = /\S+/g;
    (ot.Callbacks = function (t) {
        t = "string" == typeof t ? o(t) : ot.extend({}, t);
        var e,
            n,
            i,
            r,
            a = [],
            s = [],
            l = -1,
            c = function () {
                for (r = t.once, i = e = !0; s.length; l = -1) for (n = s.shift(); ++l < a.length; ) a[l].apply(n[0], n[1]) === !1 && t.stopOnFalse && ((l = a.length), (n = !1));
                t.memory || (n = !1), (e = !1), r && (a = n ? [] : "");
            },
            u = {
                add: function () {
                    return (
                        a &&
                            (n && !e && ((l = a.length - 1), s.push(n)),
                            (function i(e) {
                                ot.each(e, function (e, n) {
                                    ot.isFunction(n) ? (t.unique && u.has(n)) || a.push(n) : n && n.length && "string" !== ot.type(n) && i(n);
                                });
                            })(arguments),
                            n && !e && c()),
                        this
                    );
                },
                remove: function () {
                    return (
                        ot.each(arguments, function (t, e) {
                            for (var n; (n = ot.inArray(e, a, n)) > -1; ) a.splice(n, 1), l >= n && l--;
                        }),
                        this
                    );
                },
                has: function (t) {
                    return t ? ot.inArray(t, a) > -1 : a.length > 0;
                },
                empty: function () {
                    return a && (a = []), this;
                },
                disable: function () {
                    return (r = s = []), (a = n = ""), this;
                },
                disabled: function () {
                    return !a;
                },
                lock: function () {
                    return (r = s = []), n || (a = n = ""), this;
                },
                locked: function () {
                    return !!r;
                },
                fireWith: function (t, n) {
                    return r || ((n = n || []), (n = [t, n.slice ? n.slice() : n]), s.push(n), e || c()), this;
                },
                fire: function () {
                    return u.fireWith(this, arguments), this;
                },
                fired: function () {
                    return !!i;
                },
            };
        return u;
    }),
        ot.extend({
            Deferred: function (t) {
                var e = [
                        ["resolve", "done", ot.Callbacks("once memory"), "resolved"],
                        ["reject", "fail", ot.Callbacks("once memory"), "rejected"],
                        ["notify", "progress", ot.Callbacks("memory")],
                    ],
                    n = "pending",
                    i = {
                        state: function () {
                            return n;
                        },
                        always: function () {
                            return r.done(arguments).fail(arguments), this;
                        },
                        then: function () {
                            var t = arguments;
                            return ot
                                .Deferred(function (n) {
                                    ot.each(e, function (e, o) {
                                        var a = ot.isFunction(t[e]) && t[e];
                                        r[o[1]](function () {
                                            var t = a && a.apply(this, arguments);
                                            t && ot.isFunction(t.promise) ? t.promise().progress(n.notify).done(n.resolve).fail(n.reject) : n[o[0] + "With"](this === i ? n.promise() : this, a ? [t] : arguments);
                                        });
                                    }),
                                        (t = null);
                                })
                                .promise();
                        },
                        promise: function (t) {
                            return null != t ? ot.extend(t, i) : i;
                        },
                    },
                    r = {};
                return (
                    (i.pipe = i.then),
                    ot.each(e, function (t, o) {
                        var a = o[2],
                            s = o[3];
                        (i[o[1]] = a.add),
                            s &&
                                a.add(
                                    function () {
                                        n = s;
                                    },
                                    e[1 ^ t][2].disable,
                                    e[2][2].lock
                                ),
                            (r[o[0]] = function () {
                                return r[o[0] + "With"](this === r ? i : this, arguments), this;
                            }),
                            (r[o[0] + "With"] = a.fireWith);
                    }),
                    i.promise(r),
                    t && t.call(r, r),
                    r
                );
            },
            when: function (t) {
                var e,
                    n,
                    i,
                    r = 0,
                    o = J.call(arguments),
                    a = o.length,
                    s = 1 !== a || (t && ot.isFunction(t.promise)) ? a : 0,
                    l = 1 === s ? t : ot.Deferred(),
                    c = function (t, n, i) {
                        return function (r) {
                            (n[t] = this), (i[t] = arguments.length > 1 ? J.call(arguments) : r), i === e ? l.notifyWith(n, i) : --s || l.resolveWith(n, i);
                        };
                    };
                if (a > 1) for (e = new Array(a), n = new Array(a), i = new Array(a); a > r; r++) o[r] && ot.isFunction(o[r].promise) ? o[r].promise().progress(c(r, n, e)).done(c(r, i, o)).fail(l.reject) : --s;
                return s || l.resolveWith(i, o), l.promise();
            },
        });
    var xt;
    (ot.fn.ready = function (t) {
        return ot.ready.promise().done(t), this;
    }),
        ot.extend({
            isReady: !1,
            readyWait: 1,
            holdReady: function (t) {
                t ? ot.readyWait++ : ot.ready(!0);
            },
            ready: function (t) {
                (t === !0 ? --ot.readyWait : ot.isReady) || ((ot.isReady = !0), (t !== !0 && --ot.readyWait > 0) || (xt.resolveWith(X, [ot]), ot.fn.triggerHandler && (ot(X).triggerHandler("ready"), ot(X).off("ready"))));
            },
        }),
        (ot.ready.promise = function (e) {
            return (
                xt || ((xt = ot.Deferred()), "complete" === X.readyState || ("loading" !== X.readyState && !X.documentElement.doScroll) ? t.setTimeout(ot.ready) : (X.addEventListener("DOMContentLoaded", a), t.addEventListener("load", a))),
                xt.promise(e)
            );
        }),
        ot.ready.promise();
    var kt = function (t, e, n, i, r, o, a) {
            var s = 0,
                l = t.length,
                c = null == n;
            if ("object" === ot.type(n)) {
                r = !0;
                for (s in n) kt(t, e, s, n[s], !0, o, a);
            } else if (
                void 0 !== i &&
                ((r = !0),
                ot.isFunction(i) || (a = !0),
                c &&
                    (a
                        ? (e.call(t, i), (e = null))
                        : ((c = e),
                          (e = function (t, e, n) {
                              return c.call(ot(t), n);
                          }))),
                e)
            )
                for (; l > s; s++) e(t[s], n, a ? i : i.call(t[s], s, e(t[s], n)));
            return r ? t : c ? e.call(t) : l ? e(t[0], n) : o;
        },
        St = function (t) {
            return 1 === t.nodeType || 9 === t.nodeType || !+t.nodeType;
        };
    (s.uid = 1),
        (s.prototype = {
            register: function (t, e) {
                var n = e || {};
                return t.nodeType ? (t[this.expando] = n) : Object.defineProperty(t, this.expando, { value: n, writable: !0, configurable: !0 }), t[this.expando];
            },
            cache: function (t) {
                if (!St(t)) return {};
                var e = t[this.expando];
                return e || ((e = {}), St(t) && (t.nodeType ? (t[this.expando] = e) : Object.defineProperty(t, this.expando, { value: e, configurable: !0 }))), e;
            },
            set: function (t, e, n) {
                var i,
                    r = this.cache(t);
                if ("string" == typeof e) r[e] = n;
                else for (i in e) r[i] = e[i];
                return r;
            },
            get: function (t, e) {
                return void 0 === e ? this.cache(t) : t[this.expando] && t[this.expando][e];
            },
            access: function (t, e, n) {
                var i;
                return void 0 === e || (e && "string" == typeof e && void 0 === n) ? ((i = this.get(t, e)), void 0 !== i ? i : this.get(t, ot.camelCase(e))) : (this.set(t, e, n), void 0 !== n ? n : e);
            },
            remove: function (t, e) {
                var n,
                    i,
                    r,
                    o = t[this.expando];
                if (void 0 !== o) {
                    if (void 0 === e) this.register(t);
                    else {
                        ot.isArray(e) ? (i = e.concat(e.map(ot.camelCase))) : ((r = ot.camelCase(e)), e in o ? (i = [e, r]) : ((i = r), (i = i in o ? [i] : i.match($t) || []))), (n = i.length);
                        for (; n--; ) delete o[i[n]];
                    }
                    (void 0 === e || ot.isEmptyObject(o)) && (t.nodeType ? (t[this.expando] = void 0) : delete t[this.expando]);
                }
            },
            hasData: function (t) {
                var e = t[this.expando];
                return void 0 !== e && !ot.isEmptyObject(e);
            },
        });
    var Ct = new s(),
        _t = new s(),
        Tt = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        Et = /[A-Z]/g;
    ot.extend({
        hasData: function (t) {
            return _t.hasData(t) || Ct.hasData(t);
        },
        data: function (t, e, n) {
            return _t.access(t, e, n);
        },
        removeData: function (t, e) {
            _t.remove(t, e);
        },
        _data: function (t, e, n) {
            return Ct.access(t, e, n);
        },
        _removeData: function (t, e) {
            Ct.remove(t, e);
        },
    }),
        ot.fn.extend({
            data: function (t, e) {
                var n,
                    i,
                    r,
                    o = this[0],
                    a = o && o.attributes;
                if (void 0 === t) {
                    if (this.length && ((r = _t.get(o)), 1 === o.nodeType && !Ct.get(o, "hasDataAttrs"))) {
                        for (n = a.length; n--; ) a[n] && ((i = a[n].name), 0 === i.indexOf("data-") && ((i = ot.camelCase(i.slice(5))), l(o, i, r[i])));
                        Ct.set(o, "hasDataAttrs", !0);
                    }
                    return r;
                }
                return "object" == typeof t
                    ? this.each(function () {
                          _t.set(this, t);
                      })
                    : kt(
                          this,
                          function (e) {
                              var n, i;
                              if (o && void 0 === e) {
                                  if (((n = _t.get(o, t) || _t.get(o, t.replace(Et, "-$&").toLowerCase())), void 0 !== n)) return n;
                                  if (((i = ot.camelCase(t)), (n = _t.get(o, i)), void 0 !== n)) return n;
                                  if (((n = l(o, i, void 0)), void 0 !== n)) return n;
                              } else
                                  (i = ot.camelCase(t)),
                                      this.each(function () {
                                          var n = _t.get(this, i);
                                          _t.set(this, i, e), t.indexOf("-") > -1 && void 0 !== n && _t.set(this, t, e);
                                      });
                          },
                          null,
                          e,
                          arguments.length > 1,
                          null,
                          !0
                      );
            },
            removeData: function (t) {
                return this.each(function () {
                    _t.remove(this, t);
                });
            },
        }),
        ot.extend({
            queue: function (t, e, n) {
                var i;
                return t ? ((e = (e || "fx") + "queue"), (i = Ct.get(t, e)), n && (!i || ot.isArray(n) ? (i = Ct.access(t, e, ot.makeArray(n))) : i.push(n)), i || []) : void 0;
            },
            dequeue: function (t, e) {
                e = e || "fx";
                var n = ot.queue(t, e),
                    i = n.length,
                    r = n.shift(),
                    o = ot._queueHooks(t, e),
                    a = function () {
                        ot.dequeue(t, e);
                    };
                "inprogress" === r && ((r = n.shift()), i--), r && ("fx" === e && n.unshift("inprogress"), delete o.stop, r.call(t, a, o)), !i && o && o.empty.fire();
            },
            _queueHooks: function (t, e) {
                var n = e + "queueHooks";
                return (
                    Ct.get(t, n) ||
                    Ct.access(t, n, {
                        empty: ot.Callbacks("once memory").add(function () {
                            Ct.remove(t, [e + "queue", n]);
                        }),
                    })
                );
            },
        }),
        ot.fn.extend({
            queue: function (t, e) {
                var n = 2;
                return (
                    "string" != typeof t && ((e = t), (t = "fx"), n--),
                    arguments.length < n
                        ? ot.queue(this[0], t)
                        : void 0 === e
                        ? this
                        : this.each(function () {
                              var n = ot.queue(this, t, e);
                              ot._queueHooks(this, t), "fx" === t && "inprogress" !== n[0] && ot.dequeue(this, t);
                          })
                );
            },
            dequeue: function (t) {
                return this.each(function () {
                    ot.dequeue(this, t);
                });
            },
            clearQueue: function (t) {
                return this.queue(t || "fx", []);
            },
            promise: function (t, e) {
                var n,
                    i = 1,
                    r = ot.Deferred(),
                    o = this,
                    a = this.length,
                    s = function () {
                        --i || r.resolveWith(o, [o]);
                    };
                for ("string" != typeof t && ((e = t), (t = void 0)), t = t || "fx"; a--; ) (n = Ct.get(o[a], t + "queueHooks")), n && n.empty && (i++, n.empty.add(s));
                return s(), r.promise(e);
            },
        });
    var At = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        It = new RegExp("^(?:([+-])=|)(" + At + ")([a-z%]*)$", "i"),
        Rt = ["Top", "Right", "Bottom", "Left"],
        Pt = function (t, e) {
            return (t = e || t), "none" === ot.css(t, "display") || !ot.contains(t.ownerDocument, t);
        },
        jt = /^(?:checkbox|radio)$/i,
        Dt = /<([\w:-]+)/,
        Ot = /^$|\/(?:java|ecma)script/i,
        Lt = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""],
        };
    (Lt.optgroup = Lt.option), (Lt.tbody = Lt.tfoot = Lt.colgroup = Lt.caption = Lt.thead), (Lt.th = Lt.td);
    var Nt = /<|&#?\w+;/;
    !(function () {
        var t = X.createDocumentFragment(),
            e = t.appendChild(X.createElement("div")),
            n = X.createElement("input");
        n.setAttribute("type", "radio"),
            n.setAttribute("checked", "checked"),
            n.setAttribute("name", "t"),
            e.appendChild(n),
            (it.checkClone = e.cloneNode(!0).cloneNode(!0).lastChild.checked),
            (e.innerHTML = "<textarea>x</textarea>"),
            (it.noCloneChecked = !!e.cloneNode(!0).lastChild.defaultValue);
    })();
    var qt = /^key/,
        Ut = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
        Mt = /^([^.]*)(?:\.(.+)|)/;
    (ot.event = {
        global: {},
        add: function (t, e, n, i, r) {
            var o,
                a,
                s,
                l,
                c,
                u,
                d,
                p,
                h,
                f,
                m,
                v = Ct.get(t);
            if (v)
                for (
                    n.handler && ((o = n), (n = o.handler), (r = o.selector)),
                        n.guid || (n.guid = ot.guid++),
                        (l = v.events) || (l = v.events = {}),
                        (a = v.handle) ||
                            (a = v.handle = function (e) {
                                return "undefined" != typeof ot && ot.event.triggered !== e.type ? ot.event.dispatch.apply(t, arguments) : void 0;
                            }),
                        e = (e || "").match($t) || [""],
                        c = e.length;
                    c--;

                )
                    (s = Mt.exec(e[c]) || []),
                        (h = m = s[1]),
                        (f = (s[2] || "").split(".").sort()),
                        h &&
                            ((d = ot.event.special[h] || {}),
                            (h = (r ? d.delegateType : d.bindType) || h),
                            (d = ot.event.special[h] || {}),
                            (u = ot.extend({ type: h, origType: m, data: i, handler: n, guid: n.guid, selector: r, needsContext: r && ot.expr.match.needsContext.test(r), namespace: f.join(".") }, o)),
                            (p = l[h]) || ((p = l[h] = []), (p.delegateCount = 0), (d.setup && d.setup.call(t, i, f, a) !== !1) || (t.addEventListener && t.addEventListener(h, a))),
                            d.add && (d.add.call(t, u), u.handler.guid || (u.handler.guid = n.guid)),
                            r ? p.splice(p.delegateCount++, 0, u) : p.push(u),
                            (ot.event.global[h] = !0));
        },
        remove: function (t, e, n, i, r) {
            var o,
                a,
                s,
                l,
                c,
                u,
                d,
                p,
                h,
                f,
                m,
                v = Ct.hasData(t) && Ct.get(t);
            if (v && (l = v.events)) {
                for (e = (e || "").match($t) || [""], c = e.length; c--; )
                    if (((s = Mt.exec(e[c]) || []), (h = m = s[1]), (f = (s[2] || "").split(".").sort()), h)) {
                        for (d = ot.event.special[h] || {}, h = (i ? d.delegateType : d.bindType) || h, p = l[h] || [], s = s[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = o = p.length; o--; )
                            (u = p[o]),
                                (!r && m !== u.origType) ||
                                    (n && n.guid !== u.guid) ||
                                    (s && !s.test(u.namespace)) ||
                                    (i && i !== u.selector && ("**" !== i || !u.selector)) ||
                                    (p.splice(o, 1), u.selector && p.delegateCount--, d.remove && d.remove.call(t, u));
                        a && !p.length && ((d.teardown && d.teardown.call(t, f, v.handle) !== !1) || ot.removeEvent(t, h, v.handle), delete l[h]);
                    } else for (h in l) ot.event.remove(t, h + e[c], n, i, !0);
                ot.isEmptyObject(l) && Ct.remove(t, "handle events");
            }
        },
        dispatch: function (t) {
            t = ot.event.fix(t);
            var e,
                n,
                i,
                r,
                o,
                a = [],
                s = J.call(arguments),
                l = (Ct.get(this, "events") || {})[t.type] || [],
                c = ot.event.special[t.type] || {};
            if (((s[0] = t), (t.delegateTarget = this), !c.preDispatch || c.preDispatch.call(this, t) !== !1)) {
                for (a = ot.event.handlers.call(this, t, l), e = 0; (r = a[e++]) && !t.isPropagationStopped(); )
                    for (t.currentTarget = r.elem, n = 0; (o = r.handlers[n++]) && !t.isImmediatePropagationStopped(); )
                        (!t.rnamespace || t.rnamespace.test(o.namespace)) &&
                            ((t.handleObj = o), (t.data = o.data), (i = ((ot.event.special[o.origType] || {}).handle || o.handler).apply(r.elem, s)), void 0 !== i && (t.result = i) === !1 && (t.preventDefault(), t.stopPropagation()));
                return c.postDispatch && c.postDispatch.call(this, t), t.result;
            }
        },
        handlers: function (t, e) {
            var n,
                i,
                r,
                o,
                a = [],
                s = e.delegateCount,
                l = t.target;
            if (s && l.nodeType && ("click" !== t.type || isNaN(t.button) || t.button < 1))
                for (; l !== this; l = l.parentNode || this)
                    if (1 === l.nodeType && (l.disabled !== !0 || "click" !== t.type)) {
                        for (i = [], n = 0; s > n; n++) (o = e[n]), (r = o.selector + " "), void 0 === i[r] && (i[r] = o.needsContext ? ot(r, this).index(l) > -1 : ot.find(r, this, null, [l]).length), i[r] && i.push(o);
                        i.length && a.push({ elem: l, handlers: i });
                    }
            return s < e.length && a.push({ elem: this, handlers: e.slice(s) }), a;
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function (t, e) {
                return null == t.which && (t.which = null != e.charCode ? e.charCode : e.keyCode), t;
            },
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function (t, e) {
                var n,
                    i,
                    r,
                    o = e.button;
                return (
                    null == t.pageX &&
                        null != e.clientX &&
                        ((n = t.target.ownerDocument || X),
                        (i = n.documentElement),
                        (r = n.body),
                        (t.pageX = e.clientX + ((i && i.scrollLeft) || (r && r.scrollLeft) || 0) - ((i && i.clientLeft) || (r && r.clientLeft) || 0)),
                        (t.pageY = e.clientY + ((i && i.scrollTop) || (r && r.scrollTop) || 0) - ((i && i.clientTop) || (r && r.clientTop) || 0))),
                    t.which || void 0 === o || (t.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0),
                    t
                );
            },
        },
        fix: function (t) {
            if (t[ot.expando]) return t;
            var e,
                n,
                i,
                r = t.type,
                o = t,
                a = this.fixHooks[r];
            for (a || (this.fixHooks[r] = a = Ut.test(r) ? this.mouseHooks : qt.test(r) ? this.keyHooks : {}), i = a.props ? this.props.concat(a.props) : this.props, t = new ot.Event(o), e = i.length; e--; ) (n = i[e]), (t[n] = o[n]);
            return t.target || (t.target = X), 3 === t.target.nodeType && (t.target = t.target.parentNode), a.filter ? a.filter(t, o) : t;
        },
        special: {
            load: { noBubble: !0 },
            focus: {
                trigger: function () {
                    return this !== m() && this.focus ? (this.focus(), !1) : void 0;
                },
                delegateType: "focusin",
            },
            blur: {
                trigger: function () {
                    return this === m() && this.blur ? (this.blur(), !1) : void 0;
                },
                delegateType: "focusout",
            },
            click: {
                trigger: function () {
                    return "checkbox" === this.type && this.click && ot.nodeName(this, "input") ? (this.click(), !1) : void 0;
                },
                _default: function (t) {
                    return ot.nodeName(t.target, "a");
                },
            },
            beforeunload: {
                postDispatch: function (t) {
                    void 0 !== t.result && t.originalEvent && (t.originalEvent.returnValue = t.result);
                },
            },
        },
    }),
        (ot.removeEvent = function (t, e, n) {
            t.removeEventListener && t.removeEventListener(e, n);
        }),
        (ot.Event = function (t, e) {
            return this instanceof ot.Event
                ? (t && t.type ? ((this.originalEvent = t), (this.type = t.type), (this.isDefaultPrevented = t.defaultPrevented || (void 0 === t.defaultPrevented && t.returnValue === !1) ? h : f)) : (this.type = t),
                  e && ot.extend(this, e),
                  (this.timeStamp = (t && t.timeStamp) || ot.now()),
                  void (this[ot.expando] = !0))
                : new ot.Event(t, e);
        }),
        (ot.Event.prototype = {
            constructor: ot.Event,
            isDefaultPrevented: f,
            isPropagationStopped: f,
            isImmediatePropagationStopped: f,
            isSimulated: !1,
            preventDefault: function () {
                var t = this.originalEvent;
                (this.isDefaultPrevented = h), t && !this.isSimulated && t.preventDefault();
            },
            stopPropagation: function () {
                var t = this.originalEvent;
                (this.isPropagationStopped = h), t && !this.isSimulated && t.stopPropagation();
            },
            stopImmediatePropagation: function () {
                var t = this.originalEvent;
                (this.isImmediatePropagationStopped = h), t && !this.isSimulated && t.stopImmediatePropagation(), this.stopPropagation();
            },
        }),
        ot.each({ mouseenter: "mouseover", mouseleave: "mouseout", pointerenter: "pointerover", pointerleave: "pointerout" }, function (t, e) {
            ot.event.special[t] = {
                delegateType: e,
                bindType: e,
                handle: function (t) {
                    var n,
                        i = this,
                        r = t.relatedTarget,
                        o = t.handleObj;
                    return (!r || (r !== i && !ot.contains(i, r))) && ((t.type = o.origType), (n = o.handler.apply(this, arguments)), (t.type = e)), n;
                },
            };
        }),
        ot.fn.extend({
            on: function (t, e, n, i) {
                return v(this, t, e, n, i);
            },
            one: function (t, e, n, i) {
                return v(this, t, e, n, i, 1);
            },
            off: function (t, e, n) {
                var i, r;
                if (t && t.preventDefault && t.handleObj) return (i = t.handleObj), ot(t.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), this;
                if ("object" == typeof t) {
                    for (r in t) this.off(r, e, t[r]);
                    return this;
                }
                return (
                    (e === !1 || "function" == typeof e) && ((n = e), (e = void 0)),
                    n === !1 && (n = f),
                    this.each(function () {
                        ot.event.remove(this, t, n, e);
                    })
                );
            },
        });
    var Bt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,
        Ft = /<script|<style|<link/i,
        Ht = /checked\s*(?:[^=]|=\s*.checked.)/i,
        Vt = /^true\/(.*)/,
        zt = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
    ot.extend({
        htmlPrefilter: function (t) {
            return t.replace(Bt, "<$1></$2>");
        },
        clone: function (t, e, n) {
            var i,
                r,
                o,
                a,
                s = t.cloneNode(!0),
                l = ot.contains(t.ownerDocument, t);
            if (!(it.noCloneChecked || (1 !== t.nodeType && 11 !== t.nodeType) || ot.isXMLDoc(t))) for (a = u(s), o = u(t), i = 0, r = o.length; r > i; i++) $(o[i], a[i]);
            if (e)
                if (n) for (o = o || u(t), a = a || u(s), i = 0, r = o.length; r > i; i++) w(o[i], a[i]);
                else w(t, s);
            return (a = u(s, "script")), a.length > 0 && d(a, !l && u(t, "script")), s;
        },
        cleanData: function (t) {
            for (var e, n, i, r = ot.event.special, o = 0; void 0 !== (n = t[o]); o++)
                if (St(n)) {
                    if ((e = n[Ct.expando])) {
                        if (e.events) for (i in e.events) r[i] ? ot.event.remove(n, i) : ot.removeEvent(n, i, e.handle);
                        n[Ct.expando] = void 0;
                    }
                    n[_t.expando] && (n[_t.expando] = void 0);
                }
        },
    }),
        ot.fn.extend({
            domManip: x,
            detach: function (t) {
                return k(this, t, !0);
            },
            remove: function (t) {
                return k(this, t);
            },
            text: function (t) {
                return kt(
                    this,
                    function (t) {
                        return void 0 === t
                            ? ot.text(this)
                            : this.empty().each(function () {
                                  (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = t);
                              });
                    },
                    null,
                    t,
                    arguments.length
                );
            },
            append: function () {
                return x(this, arguments, function (t) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var e = g(this, t);
                        e.appendChild(t);
                    }
                });
            },
            prepend: function () {
                return x(this, arguments, function (t) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var e = g(this, t);
                        e.insertBefore(t, e.firstChild);
                    }
                });
            },
            before: function () {
                return x(this, arguments, function (t) {
                    this.parentNode && this.parentNode.insertBefore(t, this);
                });
            },
            after: function () {
                return x(this, arguments, function (t) {
                    this.parentNode && this.parentNode.insertBefore(t, this.nextSibling);
                });
            },
            empty: function () {
                for (var t, e = 0; null != (t = this[e]); e++) 1 === t.nodeType && (ot.cleanData(u(t, !1)), (t.textContent = ""));
                return this;
            },
            clone: function (t, e) {
                return (
                    (t = null == t ? !1 : t),
                    (e = null == e ? t : e),
                    this.map(function () {
                        return ot.clone(this, t, e);
                    })
                );
            },
            html: function (t) {
                return kt(
                    this,
                    function (t) {
                        var e = this[0] || {},
                            n = 0,
                            i = this.length;
                        if (void 0 === t && 1 === e.nodeType) return e.innerHTML;
                        if ("string" == typeof t && !Ft.test(t) && !Lt[(Dt.exec(t) || ["", ""])[1].toLowerCase()]) {
                            t = ot.htmlPrefilter(t);
                            try {
                                for (; i > n; n++) (e = this[n] || {}), 1 === e.nodeType && (ot.cleanData(u(e, !1)), (e.innerHTML = t));
                                e = 0;
                            } catch (r) {}
                        }
                        e && this.empty().append(t);
                    },
                    null,
                    t,
                    arguments.length
                );
            },
            replaceWith: function () {
                var t = [];
                return x(
                    this,
                    arguments,
                    function (e) {
                        var n = this.parentNode;
                        ot.inArray(this, t) < 0 && (ot.cleanData(u(this)), n && n.replaceChild(e, this));
                    },
                    t
                );
            },
        }),
        ot.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (t, e) {
            ot.fn[t] = function (t) {
                for (var n, i = [], r = ot(t), o = r.length - 1, a = 0; o >= a; a++) (n = a === o ? this : this.clone(!0)), ot(r[a])[e](n), Q.apply(i, n.get());
                return this.pushStack(i);
            };
        });
    var Wt,
        Yt = { HTML: "block", BODY: "block" },
        Gt = /^margin/,
        Xt = new RegExp("^(" + At + ")(?!px)[a-z%]+$", "i"),
        Jt = function (e) {
            var n = e.ownerDocument.defaultView;
            return (n && n.opener) || (n = t), n.getComputedStyle(e);
        },
        Kt = function (t, e, n, i) {
            var r,
                o,
                a = {};
            for (o in e) (a[o] = t.style[o]), (t.style[o] = e[o]);
            r = n.apply(t, i || []);
            for (o in e) t.style[o] = a[o];
            return r;
        },
        Qt = X.documentElement;
    !(function () {
        function e() {
            (s.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%"), (s.innerHTML = ""), Qt.appendChild(a);
            var e = t.getComputedStyle(s);
            (n = "1%" !== e.top), (o = "2px" === e.marginLeft), (i = "4px" === e.width), (s.style.marginRight = "50%"), (r = "4px" === e.marginRight), Qt.removeChild(a);
        }
        var n,
            i,
            r,
            o,
            a = X.createElement("div"),
            s = X.createElement("div");
        s.style &&
            ((s.style.backgroundClip = "content-box"),
            (s.cloneNode(!0).style.backgroundClip = ""),
            (it.clearCloneStyle = "content-box" === s.style.backgroundClip),
            (a.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute"),
            a.appendChild(s),
            ot.extend(it, {
                pixelPosition: function () {
                    return e(), n;
                },
                boxSizingReliable: function () {
                    return null == i && e(), i;
                },
                pixelMarginRight: function () {
                    return null == i && e(), r;
                },
                reliableMarginLeft: function () {
                    return null == i && e(), o;
                },
                reliableMarginRight: function () {
                    var e,
                        n = s.appendChild(X.createElement("div"));
                    return (
                        (n.style.cssText = s.style.cssText = "-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0"),
                        (n.style.marginRight = n.style.width = "0"),
                        (s.style.width = "1px"),
                        Qt.appendChild(a),
                        (e = !parseFloat(t.getComputedStyle(n).marginRight)),
                        Qt.removeChild(a),
                        s.removeChild(n),
                        e
                    );
                },
            }));
    })();
    var Zt = /^(none|table(?!-c[ea]).+)/,
        te = { position: "absolute", visibility: "hidden", display: "block" },
        ee = { letterSpacing: "0", fontWeight: "400" },
        ne = ["Webkit", "O", "Moz", "ms"],
        ie = X.createElement("div").style;
    ot.extend({
        cssHooks: {
            opacity: {
                get: function (t, e) {
                    if (e) {
                        var n = _(t, "opacity");
                        return "" === n ? "1" : n;
                    }
                },
            },
        },
        cssNumber: { animationIterationCount: !0, columnCount: !0, fillOpacity: !0, flexGrow: !0, flexShrink: !0, fontWeight: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 },
        cssProps: { float: "cssFloat" },
        style: function (t, e, n, i) {
            if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) {
                var r,
                    o,
                    a,
                    s = ot.camelCase(e),
                    l = t.style;
                return (
                    (e = ot.cssProps[s] || (ot.cssProps[s] = E(s) || s)),
                    (a = ot.cssHooks[e] || ot.cssHooks[s]),
                    void 0 === n
                        ? a && "get" in a && void 0 !== (r = a.get(t, !1, i))
                            ? r
                            : l[e]
                        : ((o = typeof n),
                          "string" === o && (r = It.exec(n)) && r[1] && ((n = c(t, e, r)), (o = "number")),
                          null != n &&
                              n === n &&
                              ("number" === o && (n += (r && r[3]) || (ot.cssNumber[s] ? "" : "px")),
                              it.clearCloneStyle || "" !== n || 0 !== e.indexOf("background") || (l[e] = "inherit"),
                              (a && "set" in a && void 0 === (n = a.set(t, n, i))) || (l[e] = n)),
                          void 0)
                );
            }
        },
        css: function (t, e, n, i) {
            var r,
                o,
                a,
                s = ot.camelCase(e);
            return (
                (e = ot.cssProps[s] || (ot.cssProps[s] = E(s) || s)),
                (a = ot.cssHooks[e] || ot.cssHooks[s]),
                a && "get" in a && (r = a.get(t, !0, n)),
                void 0 === r && (r = _(t, e, i)),
                "normal" === r && e in ee && (r = ee[e]),
                "" === n || n ? ((o = parseFloat(r)), n === !0 || isFinite(o) ? o || 0 : r) : r
            );
        },
    }),
        ot.each(["height", "width"], function (t, e) {
            ot.cssHooks[e] = {
                get: function (t, n, i) {
                    return n
                        ? Zt.test(ot.css(t, "display")) && 0 === t.offsetWidth
                            ? Kt(t, te, function () {
                                  return R(t, e, i);
                              })
                            : R(t, e, i)
                        : void 0;
                },
                set: function (t, n, i) {
                    var r,
                        o = i && Jt(t),
                        a = i && I(t, e, i, "border-box" === ot.css(t, "boxSizing", !1, o), o);
                    return a && (r = It.exec(n)) && "px" !== (r[3] || "px") && ((t.style[e] = n), (n = ot.css(t, e))), A(t, n, a);
                },
            };
        }),
        (ot.cssHooks.marginLeft = T(it.reliableMarginLeft, function (t, e) {
            return e
                ? (parseFloat(_(t, "marginLeft")) ||
                      t.getBoundingClientRect().left -
                          Kt(t, { marginLeft: 0 }, function () {
                              return t.getBoundingClientRect().left;
                          })) + "px"
                : void 0;
        })),
        (ot.cssHooks.marginRight = T(it.reliableMarginRight, function (t, e) {
            return e ? Kt(t, { display: "inline-block" }, _, [t, "marginRight"]) : void 0;
        })),
        ot.each({ margin: "", padding: "", border: "Width" }, function (t, e) {
            (ot.cssHooks[t + e] = {
                expand: function (n) {
                    for (var i = 0, r = {}, o = "string" == typeof n ? n.split(" ") : [n]; 4 > i; i++) r[t + Rt[i] + e] = o[i] || o[i - 2] || o[0];
                    return r;
                },
            }),
                Gt.test(t) || (ot.cssHooks[t + e].set = A);
        }),
        ot.fn.extend({
            css: function (t, e) {
                return kt(
                    this,
                    function (t, e, n) {
                        var i,
                            r,
                            o = {},
                            a = 0;
                        if (ot.isArray(e)) {
                            for (i = Jt(t), r = e.length; r > a; a++) o[e[a]] = ot.css(t, e[a], !1, i);
                            return o;
                        }
                        return void 0 !== n ? ot.style(t, e, n) : ot.css(t, e);
                    },
                    t,
                    e,
                    arguments.length > 1
                );
            },
            show: function () {
                return P(this, !0);
            },
            hide: function () {
                return P(this);
            },
            toggle: function (t) {
                return "boolean" == typeof t
                    ? t
                        ? this.show()
                        : this.hide()
                    : this.each(function () {
                          Pt(this) ? ot(this).show() : ot(this).hide();
                      });
            },
        }),
        (ot.Tween = j),
        (j.prototype = {
            constructor: j,
            init: function (t, e, n, i, r, o) {
                (this.elem = t), (this.prop = n), (this.easing = r || ot.easing._default), (this.options = e), (this.start = this.now = this.cur()), (this.end = i), (this.unit = o || (ot.cssNumber[n] ? "" : "px"));
            },
            cur: function () {
                var t = j.propHooks[this.prop];
                return t && t.get ? t.get(this) : j.propHooks._default.get(this);
            },
            run: function (t) {
                var e,
                    n = j.propHooks[this.prop];
                return (
                    this.options.duration ? (this.pos = e = ot.easing[this.easing](t, this.options.duration * t, 0, 1, this.options.duration)) : (this.pos = e = t),
                    (this.now = (this.end - this.start) * e + this.start),
                    this.options.step && this.options.step.call(this.elem, this.now, this),
                    n && n.set ? n.set(this) : j.propHooks._default.set(this),
                    this
                );
            },
        }),
        (j.prototype.init.prototype = j.prototype),
        (j.propHooks = {
            _default: {
                get: function (t) {
                    var e;
                    return 1 !== t.elem.nodeType || (null != t.elem[t.prop] && null == t.elem.style[t.prop]) ? t.elem[t.prop] : ((e = ot.css(t.elem, t.prop, "")), e && "auto" !== e ? e : 0);
                },
                set: function (t) {
                    ot.fx.step[t.prop] ? ot.fx.step[t.prop](t) : 1 !== t.elem.nodeType || (null == t.elem.style[ot.cssProps[t.prop]] && !ot.cssHooks[t.prop]) ? (t.elem[t.prop] = t.now) : ot.style(t.elem, t.prop, t.now + t.unit);
                },
            },
        }),
        (j.propHooks.scrollTop = j.propHooks.scrollLeft = {
            set: function (t) {
                t.elem.nodeType && t.elem.parentNode && (t.elem[t.prop] = t.now);
            },
        }),
        (ot.easing = {
            linear: function (t) {
                return t;
            },
            swing: function (t) {
                return 0.5 - Math.cos(t * Math.PI) / 2;
            },
            _default: "swing",
        }),
        (ot.fx = j.prototype.init),
        (ot.fx.step = {});
    var re,
        oe,
        ae = /^(?:toggle|show|hide)$/,
        se = /queueHooks$/;
    (ot.Animation = ot.extend(U, {
        tweeners: {
            "*": [
                function (t, e) {
                    var n = this.createTween(t, e);
                    return c(n.elem, t, It.exec(e), n), n;
                },
            ],
        },
        tweener: function (t, e) {
            ot.isFunction(t) ? ((e = t), (t = ["*"])) : (t = t.match($t));
            for (var n, i = 0, r = t.length; r > i; i++) (n = t[i]), (U.tweeners[n] = U.tweeners[n] || []), U.tweeners[n].unshift(e);
        },
        prefilters: [N],
        prefilter: function (t, e) {
            e ? U.prefilters.unshift(t) : U.prefilters.push(t);
        },
    })),
        (ot.speed = function (t, e, n) {
            var i = t && "object" == typeof t ? ot.extend({}, t) : { complete: n || (!n && e) || (ot.isFunction(t) && t), duration: t, easing: (n && e) || (e && !ot.isFunction(e) && e) };
            return (
                (i.duration = ot.fx.off ? 0 : "number" == typeof i.duration ? i.duration : i.duration in ot.fx.speeds ? ot.fx.speeds[i.duration] : ot.fx.speeds._default),
                (null == i.queue || i.queue === !0) && (i.queue = "fx"),
                (i.old = i.complete),
                (i.complete = function () {
                    ot.isFunction(i.old) && i.old.call(this), i.queue && ot.dequeue(this, i.queue);
                }),
                i
            );
        }),
        ot.fn.extend({
            fadeTo: function (t, e, n, i) {
                return this.filter(Pt).css("opacity", 0).show().end().animate({ opacity: e }, t, n, i);
            },
            animate: function (t, e, n, i) {
                var r = ot.isEmptyObject(t),
                    o = ot.speed(e, n, i),
                    a = function () {
                        var e = U(this, ot.extend({}, t), o);
                        (r || Ct.get(this, "finish")) && e.stop(!0);
                    };
                return (a.finish = a), r || o.queue === !1 ? this.each(a) : this.queue(o.queue, a);
            },
            stop: function (t, e, n) {
                var i = function (t) {
                    var e = t.stop;
                    delete t.stop, e(n);
                };
                return (
                    "string" != typeof t && ((n = e), (e = t), (t = void 0)),
                    e && t !== !1 && this.queue(t || "fx", []),
                    this.each(function () {
                        var e = !0,
                            r = null != t && t + "queueHooks",
                            o = ot.timers,
                            a = Ct.get(this);
                        if (r) a[r] && a[r].stop && i(a[r]);
                        else for (r in a) a[r] && a[r].stop && se.test(r) && i(a[r]);
                        for (r = o.length; r--; ) o[r].elem !== this || (null != t && o[r].queue !== t) || (o[r].anim.stop(n), (e = !1), o.splice(r, 1));
                        (e || !n) && ot.dequeue(this, t);
                    })
                );
            },
            finish: function (t) {
                return (
                    t !== !1 && (t = t || "fx"),
                    this.each(function () {
                        var e,
                            n = Ct.get(this),
                            i = n[t + "queue"],
                            r = n[t + "queueHooks"],
                            o = ot.timers,
                            a = i ? i.length : 0;
                        for (n.finish = !0, ot.queue(this, t, []), r && r.stop && r.stop.call(this, !0), e = o.length; e--; ) o[e].elem === this && o[e].queue === t && (o[e].anim.stop(!0), o.splice(e, 1));
                        for (e = 0; a > e; e++) i[e] && i[e].finish && i[e].finish.call(this);
                        delete n.finish;
                    })
                );
            },
        }),
        ot.each(["toggle", "show", "hide"], function (t, e) {
            var n = ot.fn[e];
            ot.fn[e] = function (t, i, r) {
                return null == t || "boolean" == typeof t ? n.apply(this, arguments) : this.animate(O(e, !0), t, i, r);
            };
        }),
        ot.each({ slideDown: O("show"), slideUp: O("hide"), slideToggle: O("toggle"), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide" }, fadeToggle: { opacity: "toggle" } }, function (t, e) {
            ot.fn[t] = function (t, n, i) {
                return this.animate(e, t, n, i);
            };
        }),
        (ot.timers = []),
        (ot.fx.tick = function () {
            var t,
                e = 0,
                n = ot.timers;
            for (re = ot.now(); e < n.length; e++) (t = n[e]), t() || n[e] !== t || n.splice(e--, 1);
            n.length || ot.fx.stop(), (re = void 0);
        }),
        (ot.fx.timer = function (t) {
            ot.timers.push(t), t() ? ot.fx.start() : ot.timers.pop();
        }),
        (ot.fx.interval = 13),
        (ot.fx.start = function () {
            oe || (oe = t.setInterval(ot.fx.tick, ot.fx.interval));
        }),
        (ot.fx.stop = function () {
            t.clearInterval(oe), (oe = null);
        }),
        (ot.fx.speeds = { slow: 600, fast: 200, _default: 400 }),
        (ot.fn.delay = function (e, n) {
            return (
                (e = ot.fx ? ot.fx.speeds[e] || e : e),
                (n = n || "fx"),
                this.queue(n, function (n, i) {
                    var r = t.setTimeout(n, e);
                    i.stop = function () {
                        t.clearTimeout(r);
                    };
                })
            );
        }),
        (function () {
            var t = X.createElement("input"),
                e = X.createElement("select"),
                n = e.appendChild(X.createElement("option"));
            (t.type = "checkbox"),
                (it.checkOn = "" !== t.value),
                (it.optSelected = n.selected),
                (e.disabled = !0),
                (it.optDisabled = !n.disabled),
                (t = X.createElement("input")),
                (t.value = "t"),
                (t.type = "radio"),
                (it.radioValue = "t" === t.value);
        })();
    var le,
        ce = ot.expr.attrHandle;
    ot.fn.extend({
        attr: function (t, e) {
            return kt(this, ot.attr, t, e, arguments.length > 1);
        },
        removeAttr: function (t) {
            return this.each(function () {
                ot.removeAttr(this, t);
            });
        },
    }),
        ot.extend({
            attr: function (t, e, n) {
                var i,
                    r,
                    o = t.nodeType;
                if (3 !== o && 8 !== o && 2 !== o)
                    return "undefined" == typeof t.getAttribute
                        ? ot.prop(t, e, n)
                        : ((1 === o && ot.isXMLDoc(t)) || ((e = e.toLowerCase()), (r = ot.attrHooks[e] || (ot.expr.match.bool.test(e) ? le : void 0))),
                          void 0 !== n
                              ? null === n
                                  ? void ot.removeAttr(t, e)
                                  : r && "set" in r && void 0 !== (i = r.set(t, n, e))
                                  ? i
                                  : (t.setAttribute(e, n + ""), n)
                              : r && "get" in r && null !== (i = r.get(t, e))
                              ? i
                              : ((i = ot.find.attr(t, e)), null == i ? void 0 : i));
            },
            attrHooks: {
                type: {
                    set: function (t, e) {
                        if (!it.radioValue && "radio" === e && ot.nodeName(t, "input")) {
                            var n = t.value;
                            return t.setAttribute("type", e), n && (t.value = n), e;
                        }
                    },
                },
            },
            removeAttr: function (t, e) {
                var n,
                    i,
                    r = 0,
                    o = e && e.match($t);
                if (o && 1 === t.nodeType) for (; (n = o[r++]); ) (i = ot.propFix[n] || n), ot.expr.match.bool.test(n) && (t[i] = !1), t.removeAttribute(n);
            },
        }),
        (le = {
            set: function (t, e, n) {
                return e === !1 ? ot.removeAttr(t, n) : t.setAttribute(n, n), n;
            },
        }),
        ot.each(ot.expr.match.bool.source.match(/\w+/g), function (t, e) {
            var n = ce[e] || ot.find.attr;
            ce[e] = function (t, e, i) {
                var r, o;
                return i || ((o = ce[e]), (ce[e] = r), (r = null != n(t, e, i) ? e.toLowerCase() : null), (ce[e] = o)), r;
            };
        });
    var ue = /^(?:input|select|textarea|button)$/i,
        de = /^(?:a|area)$/i;
    ot.fn.extend({
        prop: function (t, e) {
            return kt(this, ot.prop, t, e, arguments.length > 1);
        },
        removeProp: function (t) {
            return this.each(function () {
                delete this[ot.propFix[t] || t];
            });
        },
    }),
        ot.extend({
            prop: function (t, e, n) {
                var i,
                    r,
                    o = t.nodeType;
                if (3 !== o && 8 !== o && 2 !== o)
                    return (
                        (1 === o && ot.isXMLDoc(t)) || ((e = ot.propFix[e] || e), (r = ot.propHooks[e])),
                        void 0 !== n ? (r && "set" in r && void 0 !== (i = r.set(t, n, e)) ? i : (t[e] = n)) : r && "get" in r && null !== (i = r.get(t, e)) ? i : t[e]
                    );
            },
            propHooks: {
                tabIndex: {
                    get: function (t) {
                        var e = ot.find.attr(t, "tabindex");
                        return e ? parseInt(e, 10) : ue.test(t.nodeName) || (de.test(t.nodeName) && t.href) ? 0 : -1;
                    },
                },
            },
            propFix: { for: "htmlFor", class: "className" },
        }),
        it.optSelected ||
            (ot.propHooks.selected = {
                get: function (t) {
                    var e = t.parentNode;
                    return e && e.parentNode && e.parentNode.selectedIndex, null;
                },
                set: function (t) {
                    var e = t.parentNode;
                    e && (e.selectedIndex, e.parentNode && e.parentNode.selectedIndex);
                },
            }),
        ot.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () {
            ot.propFix[this.toLowerCase()] = this;
        });
    var pe = /[\t\r\n\f]/g;
    ot.fn.extend({
        addClass: function (t) {
            var e,
                n,
                i,
                r,
                o,
                a,
                s,
                l = 0;
            if (ot.isFunction(t))
                return this.each(function (e) {
                    ot(this).addClass(t.call(this, e, M(this)));
                });
            if ("string" == typeof t && t)
                for (e = t.match($t) || []; (n = this[l++]); )
                    if (((r = M(n)), (i = 1 === n.nodeType && (" " + r + " ").replace(pe, " ")))) {
                        for (a = 0; (o = e[a++]); ) i.indexOf(" " + o + " ") < 0 && (i += o + " ");
                        (s = ot.trim(i)), r !== s && n.setAttribute("class", s);
                    }
            return this;
        },
        removeClass: function (t) {
            var e,
                n,
                i,
                r,
                o,
                a,
                s,
                l = 0;
            if (ot.isFunction(t))
                return this.each(function (e) {
                    ot(this).removeClass(t.call(this, e, M(this)));
                });
            if (!arguments.length) return this.attr("class", "");
            if ("string" == typeof t && t)
                for (e = t.match($t) || []; (n = this[l++]); )
                    if (((r = M(n)), (i = 1 === n.nodeType && (" " + r + " ").replace(pe, " ")))) {
                        for (a = 0; (o = e[a++]); ) for (; i.indexOf(" " + o + " ") > -1; ) i = i.replace(" " + o + " ", " ");
                        (s = ot.trim(i)), r !== s && n.setAttribute("class", s);
                    }
            return this;
        },
        toggleClass: function (t, e) {
            var n = typeof t;
            return "boolean" == typeof e && "string" === n
                ? e
                    ? this.addClass(t)
                    : this.removeClass(t)
                : ot.isFunction(t)
                ? this.each(function (n) {
                      ot(this).toggleClass(t.call(this, n, M(this), e), e);
                  })
                : this.each(function () {
                      var e, i, r, o;
                      if ("string" === n) for (i = 0, r = ot(this), o = t.match($t) || []; (e = o[i++]); ) r.hasClass(e) ? r.removeClass(e) : r.addClass(e);
                      else (void 0 === t || "boolean" === n) && ((e = M(this)), e && Ct.set(this, "__className__", e), this.setAttribute && this.setAttribute("class", e || t === !1 ? "" : Ct.get(this, "__className__") || ""));
                  });
        },
        hasClass: function (t) {
            var e,
                n,
                i = 0;
            for (e = " " + t + " "; (n = this[i++]); ) if (1 === n.nodeType && (" " + M(n) + " ").replace(pe, " ").indexOf(e) > -1) return !0;
            return !1;
        },
    });
    var he = /\r/g,
        fe = /[\x20\t\r\n\f]+/g;
    ot.fn.extend({
        val: function (t) {
            var e,
                n,
                i,
                r = this[0];
            {
                if (arguments.length)
                    return (
                        (i = ot.isFunction(t)),
                        this.each(function (n) {
                            var r;
                            1 === this.nodeType &&
                                ((r = i ? t.call(this, n, ot(this).val()) : t),
                                null == r
                                    ? (r = "")
                                    : "number" == typeof r
                                    ? (r += "")
                                    : ot.isArray(r) &&
                                      (r = ot.map(r, function (t) {
                                          return null == t ? "" : t + "";
                                      })),
                                (e = ot.valHooks[this.type] || ot.valHooks[this.nodeName.toLowerCase()]),
                                (e && "set" in e && void 0 !== e.set(this, r, "value")) || (this.value = r));
                        })
                    );
                if (r) return (e = ot.valHooks[r.type] || ot.valHooks[r.nodeName.toLowerCase()]), e && "get" in e && void 0 !== (n = e.get(r, "value")) ? n : ((n = r.value), "string" == typeof n ? n.replace(he, "") : null == n ? "" : n);
            }
        },
    }),
        ot.extend({
            valHooks: {
                option: {
                    get: function (t) {
                        var e = ot.find.attr(t, "value");
                        return null != e ? e : ot.trim(ot.text(t)).replace(fe, " ");
                    },
                },
                select: {
                    get: function (t) {
                        for (var e, n, i = t.options, r = t.selectedIndex, o = "select-one" === t.type || 0 > r, a = o ? null : [], s = o ? r + 1 : i.length, l = 0 > r ? s : o ? r : 0; s > l; l++)
                            if (((n = i[l]), (n.selected || l === r) && (it.optDisabled ? !n.disabled : null === n.getAttribute("disabled")) && (!n.parentNode.disabled || !ot.nodeName(n.parentNode, "optgroup")))) {
                                if (((e = ot(n).val()), o)) return e;
                                a.push(e);
                            }
                        return a;
                    },
                    set: function (t, e) {
                        for (var n, i, r = t.options, o = ot.makeArray(e), a = r.length; a--; ) (i = r[a]), (i.selected = ot.inArray(ot.valHooks.option.get(i), o) > -1) && (n = !0);
                        return n || (t.selectedIndex = -1), o;
                    },
                },
            },
        }),
        ot.each(["radio", "checkbox"], function () {
            (ot.valHooks[this] = {
                set: function (t, e) {
                    return ot.isArray(e) ? (t.checked = ot.inArray(ot(t).val(), e) > -1) : void 0;
                },
            }),
                it.checkOn ||
                    (ot.valHooks[this].get = function (t) {
                        return null === t.getAttribute("value") ? "on" : t.value;
                    });
        });
    var me = /^(?:focusinfocus|focusoutblur)$/;
    ot.extend(ot.event, {
        trigger: function (e, n, i, r) {
            var o,
                a,
                s,
                l,
                c,
                u,
                d,
                p = [i || X],
                h = nt.call(e, "type") ? e.type : e,
                f = nt.call(e, "namespace") ? e.namespace.split(".") : [];
            if (
                ((a = s = i = i || X),
                3 !== i.nodeType &&
                    8 !== i.nodeType &&
                    !me.test(h + ot.event.triggered) &&
                    (h.indexOf(".") > -1 && ((f = h.split(".")), (h = f.shift()), f.sort()),
                    (c = h.indexOf(":") < 0 && "on" + h),
                    (e = e[ot.expando] ? e : new ot.Event(h, "object" == typeof e && e)),
                    (e.isTrigger = r ? 2 : 3),
                    (e.namespace = f.join(".")),
                    (e.rnamespace = e.namespace ? new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)") : null),
                    (e.result = void 0),
                    e.target || (e.target = i),
                    (n = null == n ? [e] : ot.makeArray(n, [e])),
                    (d = ot.event.special[h] || {}),
                    r || !d.trigger || d.trigger.apply(i, n) !== !1))
            ) {
                if (!r && !d.noBubble && !ot.isWindow(i)) {
                    for (l = d.delegateType || h, me.test(l + h) || (a = a.parentNode); a; a = a.parentNode) p.push(a), (s = a);
                    s === (i.ownerDocument || X) && p.push(s.defaultView || s.parentWindow || t);
                }
                for (o = 0; (a = p[o++]) && !e.isPropagationStopped(); )
                    (e.type = o > 1 ? l : d.bindType || h),
                        (u = (Ct.get(a, "events") || {})[e.type] && Ct.get(a, "handle")),
                        u && u.apply(a, n),
                        (u = c && a[c]),
                        u && u.apply && St(a) && ((e.result = u.apply(a, n)), e.result === !1 && e.preventDefault());
                return (
                    (e.type = h),
                    r ||
                        e.isDefaultPrevented() ||
                        (d._default && d._default.apply(p.pop(), n) !== !1) ||
                        !St(i) ||
                        (c && ot.isFunction(i[h]) && !ot.isWindow(i) && ((s = i[c]), s && (i[c] = null), (ot.event.triggered = h), i[h](), (ot.event.triggered = void 0), s && (i[c] = s))),
                    e.result
                );
            }
        },
        simulate: function (t, e, n) {
            var i = ot.extend(new ot.Event(), n, { type: t, isSimulated: !0 });
            ot.event.trigger(i, null, e);
        },
    }),
        ot.fn.extend({
            trigger: function (t, e) {
                return this.each(function () {
                    ot.event.trigger(t, e, this);
                });
            },
            triggerHandler: function (t, e) {
                var n = this[0];
                return n ? ot.event.trigger(t, e, n, !0) : void 0;
            },
        }),
        ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (
            t,
            e
        ) {
            ot.fn[e] = function (t, n) {
                return arguments.length > 0 ? this.on(e, null, t, n) : this.trigger(e);
            };
        }),
        ot.fn.extend({
            hover: function (t, e) {
                return this.mouseenter(t).mouseleave(e || t);
            },
        }),
        (it.focusin = "onfocusin" in t),
        it.focusin ||
            ot.each({ focus: "focusin", blur: "focusout" }, function (t, e) {
                var n = function (t) {
                    ot.event.simulate(e, t.target, ot.event.fix(t));
                };
                ot.event.special[e] = {
                    setup: function () {
                        var i = this.ownerDocument || this,
                            r = Ct.access(i, e);
                        r || i.addEventListener(t, n, !0), Ct.access(i, e, (r || 0) + 1);
                    },
                    teardown: function () {
                        var i = this.ownerDocument || this,
                            r = Ct.access(i, e) - 1;
                        r ? Ct.access(i, e, r) : (i.removeEventListener(t, n, !0), Ct.remove(i, e));
                    },
                };
            });
    var ve = t.location,
        ge = ot.now(),
        ye = /\?/;
    (ot.parseJSON = function (t) {
        return JSON.parse(t + "");
    }),
        (ot.parseXML = function (e) {
            var n;
            if (!e || "string" != typeof e) return null;
            try {
                n = new t.DOMParser().parseFromString(e, "text/xml");
            } catch (i) {
                n = void 0;
            }
            return (!n || n.getElementsByTagName("parsererror").length) && ot.error("Invalid XML: " + e), n;
        });
    var be = /#.*$/,
        we = /([?&])_=[^&]*/,
        $e = /^(.*?):[ \t]*([^\r\n]*)$/gm,
        xe = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
        ke = /^(?:GET|HEAD)$/,
        Se = /^\/\//,
        Ce = {},
        _e = {},
        Te = "*/".concat("*"),
        Ee = X.createElement("a");
    (Ee.href = ve.href),
        ot.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: ve.href,
                type: "GET",
                isLocal: xe.test(ve.protocol),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: { "*": Te, text: "text/plain", html: "text/html", xml: "application/xml, text/xml", json: "application/json, text/javascript" },
                contents: { xml: /\bxml\b/, html: /\bhtml/, json: /\bjson\b/ },
                responseFields: { xml: "responseXML", text: "responseText", json: "responseJSON" },
                converters: { "* text": String, "text html": !0, "text json": ot.parseJSON, "text xml": ot.parseXML },
                flatOptions: { url: !0, context: !0 },
            },
            ajaxSetup: function (t, e) {
                return e ? H(H(t, ot.ajaxSettings), e) : H(ot.ajaxSettings, t);
            },
            ajaxPrefilter: B(Ce),
            ajaxTransport: B(_e),
            ajax: function (e, n) {
                function i(e, n, i, s) {
                    var c,
                        d,
                        y,
                        b,
                        $,
                        k = n;
                    2 !== w &&
                        ((w = 2),
                        l && t.clearTimeout(l),
                        (r = void 0),
                        (a = s || ""),
                        (x.readyState = e > 0 ? 4 : 0),
                        (c = (e >= 200 && 300 > e) || 304 === e),
                        i && (b = V(p, x, i)),
                        (b = z(p, b, x, c)),
                        c
                            ? (p.ifModified && (($ = x.getResponseHeader("Last-Modified")), $ && (ot.lastModified[o] = $), ($ = x.getResponseHeader("etag")), $ && (ot.etag[o] = $)),
                              204 === e || "HEAD" === p.type ? (k = "nocontent") : 304 === e ? (k = "notmodified") : ((k = b.state), (d = b.data), (y = b.error), (c = !y)))
                            : ((y = k), (e || !k) && ((k = "error"), 0 > e && (e = 0))),
                        (x.status = e),
                        (x.statusText = (n || k) + ""),
                        c ? m.resolveWith(h, [d, k, x]) : m.rejectWith(h, [x, k, y]),
                        x.statusCode(g),
                        (g = void 0),
                        u && f.trigger(c ? "ajaxSuccess" : "ajaxError", [x, p, c ? d : y]),
                        v.fireWith(h, [x, k]),
                        u && (f.trigger("ajaxComplete", [x, p]), --ot.active || ot.event.trigger("ajaxStop")));
                }
                "object" == typeof e && ((n = e), (e = void 0)), (n = n || {});
                var r,
                    o,
                    a,
                    s,
                    l,
                    c,
                    u,
                    d,
                    p = ot.ajaxSetup({}, n),
                    h = p.context || p,
                    f = p.context && (h.nodeType || h.jquery) ? ot(h) : ot.event,
                    m = ot.Deferred(),
                    v = ot.Callbacks("once memory"),
                    g = p.statusCode || {},
                    y = {},
                    b = {},
                    w = 0,
                    $ = "canceled",
                    x = {
                        readyState: 0,
                        getResponseHeader: function (t) {
                            var e;
                            if (2 === w) {
                                if (!s) for (s = {}; (e = $e.exec(a)); ) s[e[1].toLowerCase()] = e[2];
                                e = s[t.toLowerCase()];
                            }
                            return null == e ? null : e;
                        },
                        getAllResponseHeaders: function () {
                            return 2 === w ? a : null;
                        },
                        setRequestHeader: function (t, e) {
                            var n = t.toLowerCase();
                            return w || ((t = b[n] = b[n] || t), (y[t] = e)), this;
                        },
                        overrideMimeType: function (t) {
                            return w || (p.mimeType = t), this;
                        },
                        statusCode: function (t) {
                            var e;
                            if (t)
                                if (2 > w) for (e in t) g[e] = [g[e], t[e]];
                                else x.always(t[x.status]);
                            return this;
                        },
                        abort: function (t) {
                            var e = t || $;
                            return r && r.abort(e), i(0, e), this;
                        },
                    };
                if (
                    ((m.promise(x).complete = v.add),
                    (x.success = x.done),
                    (x.error = x.fail),
                    (p.url = ((e || p.url || ve.href) + "").replace(be, "").replace(Se, ve.protocol + "//")),
                    (p.type = n.method || n.type || p.method || p.type),
                    (p.dataTypes = ot
                        .trim(p.dataType || "*")
                        .toLowerCase()
                        .match($t) || [""]),
                    null == p.crossDomain)
                ) {
                    c = X.createElement("a");
                    try {
                        (c.href = p.url), (c.href = c.href), (p.crossDomain = Ee.protocol + "//" + Ee.host != c.protocol + "//" + c.host);
                    } catch (k) {
                        p.crossDomain = !0;
                    }
                }
                if ((p.data && p.processData && "string" != typeof p.data && (p.data = ot.param(p.data, p.traditional)), F(Ce, p, n, x), 2 === w)) return x;
                (u = ot.event && p.global),
                    u && 0 === ot.active++ && ot.event.trigger("ajaxStart"),
                    (p.type = p.type.toUpperCase()),
                    (p.hasContent = !ke.test(p.type)),
                    (o = p.url),
                    p.hasContent || (p.data && ((o = p.url += (ye.test(o) ? "&" : "?") + p.data), delete p.data), p.cache === !1 && (p.url = we.test(o) ? o.replace(we, "$1_=" + ge++) : o + (ye.test(o) ? "&" : "?") + "_=" + ge++)),
                    p.ifModified && (ot.lastModified[o] && x.setRequestHeader("If-Modified-Since", ot.lastModified[o]), ot.etag[o] && x.setRequestHeader("If-None-Match", ot.etag[o])),
                    ((p.data && p.hasContent && p.contentType !== !1) || n.contentType) && x.setRequestHeader("Content-Type", p.contentType),
                    x.setRequestHeader("Accept", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + ("*" !== p.dataTypes[0] ? ", " + Te + "; q=0.01" : "") : p.accepts["*"]);
                for (d in p.headers) x.setRequestHeader(d, p.headers[d]);
                if (p.beforeSend && (p.beforeSend.call(h, x, p) === !1 || 2 === w)) return x.abort();
                $ = "abort";
                for (d in { success: 1, error: 1, complete: 1 }) x[d](p[d]);
                if ((r = F(_e, p, n, x))) {
                    if (((x.readyState = 1), u && f.trigger("ajaxSend", [x, p]), 2 === w)) return x;
                    p.async &&
                        p.timeout > 0 &&
                        (l = t.setTimeout(function () {
                            x.abort("timeout");
                        }, p.timeout));
                    try {
                        (w = 1), r.send(y, i);
                    } catch (k) {
                        if (!(2 > w)) throw k;
                        i(-1, k);
                    }
                } else i(-1, "No Transport");
                return x;
            },
            getJSON: function (t, e, n) {
                return ot.get(t, e, n, "json");
            },
            getScript: function (t, e) {
                return ot.get(t, void 0, e, "script");
            },
        }),
        ot.each(["get", "post"], function (t, e) {
            ot[e] = function (t, n, i, r) {
                return ot.isFunction(n) && ((r = r || i), (i = n), (n = void 0)), ot.ajax(ot.extend({ url: t, type: e, dataType: r, data: n, success: i }, ot.isPlainObject(t) && t));
            };
        }),
        (ot._evalUrl = function (t) {
            return ot.ajax({ url: t, type: "GET", dataType: "script", async: !1, global: !1, throws: !0 });
        }),
        ot.fn.extend({
            wrapAll: function (t) {
                var e;
                return ot.isFunction(t)
                    ? this.each(function (e) {
                          ot(this).wrapAll(t.call(this, e));
                      })
                    : (this[0] &&
                          ((e = ot(t, this[0].ownerDocument).eq(0).clone(!0)),
                          this[0].parentNode && e.insertBefore(this[0]),
                          e
                              .map(function () {
                                  for (var t = this; t.firstElementChild; ) t = t.firstElementChild;
                                  return t;
                              })
                              .append(this)),
                      this);
            },
            wrapInner: function (t) {
                return ot.isFunction(t)
                    ? this.each(function (e) {
                          ot(this).wrapInner(t.call(this, e));
                      })
                    : this.each(function () {
                          var e = ot(this),
                              n = e.contents();
                          n.length ? n.wrapAll(t) : e.append(t);
                      });
            },
            wrap: function (t) {
                var e = ot.isFunction(t);
                return this.each(function (n) {
                    ot(this).wrapAll(e ? t.call(this, n) : t);
                });
            },
            unwrap: function () {
                return this.parent()
                    .each(function () {
                        ot.nodeName(this, "body") || ot(this).replaceWith(this.childNodes);
                    })
                    .end();
            },
        }),
        (ot.expr.filters.hidden = function (t) {
            return !ot.expr.filters.visible(t);
        }),
        (ot.expr.filters.visible = function (t) {
            return t.offsetWidth > 0 || t.offsetHeight > 0 || t.getClientRects().length > 0;
        });
    var Ae = /%20/g,
        Ie = /\[\]$/,
        Re = /\r?\n/g,
        Pe = /^(?:submit|button|image|reset|file)$/i,
        je = /^(?:input|select|textarea|keygen)/i;
    (ot.param = function (t, e) {
        var n,
            i = [],
            r = function (t, e) {
                (e = ot.isFunction(e) ? e() : null == e ? "" : e), (i[i.length] = encodeURIComponent(t) + "=" + encodeURIComponent(e));
            };
        if ((void 0 === e && (e = ot.ajaxSettings && ot.ajaxSettings.traditional), ot.isArray(t) || (t.jquery && !ot.isPlainObject(t))))
            ot.each(t, function () {
                r(this.name, this.value);
            });
        else for (n in t) W(n, t[n], e, r);
        return i.join("&").replace(Ae, "+");
    }),
        ot.fn.extend({
            serialize: function () {
                return ot.param(this.serializeArray());
            },
            serializeArray: function () {
                return this.map(function () {
                    var t = ot.prop(this, "elements");
                    return t ? ot.makeArray(t) : this;
                })
                    .filter(function () {
                        var t = this.type;
                        return this.name && !ot(this).is(":disabled") && je.test(this.nodeName) && !Pe.test(t) && (this.checked || !jt.test(t));
                    })
                    .map(function (t, e) {
                        var n = ot(this).val();
                        return null == n
                            ? null
                            : ot.isArray(n)
                            ? ot.map(n, function (t) {
                                  return { name: e.name, value: t.replace(Re, "\r\n") };
                              })
                            : { name: e.name, value: n.replace(Re, "\r\n") };
                    })
                    .get();
            },
        }),
        (ot.ajaxSettings.xhr = function () {
            try {
                return new t.XMLHttpRequest();
            } catch (e) {}
        });
    var De = { 0: 200, 1223: 204 },
        Oe = ot.ajaxSettings.xhr();
    (it.cors = !!Oe && "withCredentials" in Oe),
        (it.ajax = Oe = !!Oe),
        ot.ajaxTransport(function (e) {
            var n, i;
            return it.cors || (Oe && !e.crossDomain)
                ? {
                      send: function (r, o) {
                          var a,
                              s = e.xhr();
                          if ((s.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields)) for (a in e.xhrFields) s[a] = e.xhrFields[a];
                          e.mimeType && s.overrideMimeType && s.overrideMimeType(e.mimeType), e.crossDomain || r["X-Requested-With"] || (r["X-Requested-With"] = "XMLHttpRequest");
                          for (a in r) s.setRequestHeader(a, r[a]);
                          (n = function (t) {
                              return function () {
                                  n &&
                                      ((n = i = s.onload = s.onerror = s.onabort = s.onreadystatechange = null),
                                      "abort" === t
                                          ? s.abort()
                                          : "error" === t
                                          ? "number" != typeof s.status
                                              ? o(0, "error")
                                              : o(s.status, s.statusText)
                                          : o(
                                                De[s.status] || s.status,
                                                s.statusText,
                                                "text" !== (s.responseType || "text") || "string" != typeof s.responseText ? { binary: s.response } : { text: s.responseText },
                                                s.getAllResponseHeaders()
                                            ));
                              };
                          }),
                              (s.onload = n()),
                              (i = s.onerror = n("error")),
                              void 0 !== s.onabort
                                  ? (s.onabort = i)
                                  : (s.onreadystatechange = function () {
                                        4 === s.readyState &&
                                            t.setTimeout(function () {
                                                n && i();
                                            });
                                    }),
                              (n = n("abort"));
                          try {
                              s.send((e.hasContent && e.data) || null);
                          } catch (l) {
                              if (n) throw l;
                          }
                      },
                      abort: function () {
                          n && n();
                      },
                  }
                : void 0;
        }),
        ot.ajaxSetup({
            accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" },
            contents: { script: /\b(?:java|ecma)script\b/ },
            converters: {
                "text script": function (t) {
                    return ot.globalEval(t), t;
                },
            },
        }),
        ot.ajaxPrefilter("script", function (t) {
            void 0 === t.cache && (t.cache = !1), t.crossDomain && (t.type = "GET");
        }),
        ot.ajaxTransport("script", function (t) {
            if (t.crossDomain) {
                var e, n;
                return {
                    send: function (i, r) {
                        (e = ot("<script>")
                            .prop({ charset: t.scriptCharset, src: t.url })
                            .on(
                                "load error",
                                (n = function (t) {
                                    e.remove(), (n = null), t && r("error" === t.type ? 404 : 200, t.type);
                                })
                            )),
                            X.head.appendChild(e[0]);
                    },
                    abort: function () {
                        n && n();
                    },
                };
            }
        });
    var Le = [],
        Ne = /(=)\?(?=&|$)|\?\?/;
    ot.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function () {
            var t = Le.pop() || ot.expando + "_" + ge++;
            return (this[t] = !0), t;
        },
    }),
        ot.ajaxPrefilter("json jsonp", function (e, n, i) {
            var r,
                o,
                a,
                s = e.jsonp !== !1 && (Ne.test(e.url) ? "url" : "string" == typeof e.data && 0 === (e.contentType || "").indexOf("application/x-www-form-urlencoded") && Ne.test(e.data) && "data");
            return s || "jsonp" === e.dataTypes[0]
                ? ((r = e.jsonpCallback = ot.isFunction(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback),
                  s ? (e[s] = e[s].replace(Ne, "$1" + r)) : e.jsonp !== !1 && (e.url += (ye.test(e.url) ? "&" : "?") + e.jsonp + "=" + r),
                  (e.converters["script json"] = function () {
                      return a || ot.error(r + " was not called"), a[0];
                  }),
                  (e.dataTypes[0] = "json"),
                  (o = t[r]),
                  (t[r] = function () {
                      a = arguments;
                  }),
                  i.always(function () {
                      void 0 === o ? ot(t).removeProp(r) : (t[r] = o), e[r] && ((e.jsonpCallback = n.jsonpCallback), Le.push(r)), a && ot.isFunction(o) && o(a[0]), (a = o = void 0);
                  }),
                  "script")
                : void 0;
        }),
        (ot.parseHTML = function (t, e, n) {
            if (!t || "string" != typeof t) return null;
            "boolean" == typeof e && ((n = e), (e = !1)), (e = e || X);
            var i = ft.exec(t),
                r = !n && [];
            return i ? [e.createElement(i[1])] : ((i = p([t], e, r)), r && r.length && ot(r).remove(), ot.merge([], i.childNodes));
        });
    var qe = ot.fn.load;
    (ot.fn.load = function (t, e, n) {
        if ("string" != typeof t && qe) return qe.apply(this, arguments);
        var i,
            r,
            o,
            a = this,
            s = t.indexOf(" ");
        return (
            s > -1 && ((i = ot.trim(t.slice(s))), (t = t.slice(0, s))),
            ot.isFunction(e) ? ((n = e), (e = void 0)) : e && "object" == typeof e && (r = "POST"),
            a.length > 0 &&
                ot
                    .ajax({ url: t, type: r || "GET", dataType: "html", data: e })
                    .done(function (t) {
                        (o = arguments), a.html(i ? ot("<div>").append(ot.parseHTML(t)).find(i) : t);
                    })
                    .always(
                        n &&
                            function (t, e) {
                                a.each(function () {
                                    n.apply(this, o || [t.responseText, e, t]);
                                });
                            }
                    ),
            this
        );
    }),
        ot.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (t, e) {
            ot.fn[e] = function (t) {
                return this.on(e, t);
            };
        }),
        (ot.expr.filters.animated = function (t) {
            return ot.grep(ot.timers, function (e) {
                return t === e.elem;
            }).length;
        }),
        (ot.offset = {
            setOffset: function (t, e, n) {
                var i,
                    r,
                    o,
                    a,
                    s,
                    l,
                    c,
                    u = ot.css(t, "position"),
                    d = ot(t),
                    p = {};
                "static" === u && (t.style.position = "relative"),
                    (s = d.offset()),
                    (o = ot.css(t, "top")),
                    (l = ot.css(t, "left")),
                    (c = ("absolute" === u || "fixed" === u) && (o + l).indexOf("auto") > -1),
                    c ? ((i = d.position()), (a = i.top), (r = i.left)) : ((a = parseFloat(o) || 0), (r = parseFloat(l) || 0)),
                    ot.isFunction(e) && (e = e.call(t, n, ot.extend({}, s))),
                    null != e.top && (p.top = e.top - s.top + a),
                    null != e.left && (p.left = e.left - s.left + r),
                    "using" in e ? e.using.call(t, p) : d.css(p);
            },
        }),
        ot.fn.extend({
            offset: function (t) {
                if (arguments.length)
                    return void 0 === t
                        ? this
                        : this.each(function (e) {
                              ot.offset.setOffset(this, t, e);
                          });
                var e,
                    n,
                    i = this[0],
                    r = { top: 0, left: 0 },
                    o = i && i.ownerDocument;
                if (o) return (e = o.documentElement), ot.contains(e, i) ? ((r = i.getBoundingClientRect()), (n = Y(o)), { top: r.top + n.pageYOffset - e.clientTop, left: r.left + n.pageXOffset - e.clientLeft }) : r;
            },
            position: function () {
                if (this[0]) {
                    var t,
                        e,
                        n = this[0],
                        i = { top: 0, left: 0 };
                    return (
                        "fixed" === ot.css(n, "position")
                            ? (e = n.getBoundingClientRect())
                            : ((t = this.offsetParent()), (e = this.offset()), ot.nodeName(t[0], "html") || (i = t.offset()), (i.top += ot.css(t[0], "borderTopWidth", !0)), (i.left += ot.css(t[0], "borderLeftWidth", !0))),
                        { top: e.top - i.top - ot.css(n, "marginTop", !0), left: e.left - i.left - ot.css(n, "marginLeft", !0) }
                    );
                }
            },
            offsetParent: function () {
                return this.map(function () {
                    for (var t = this.offsetParent; t && "static" === ot.css(t, "position"); ) t = t.offsetParent;
                    return t || Qt;
                });
            },
        }),
        ot.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (t, e) {
            var n = "pageYOffset" === e;
            ot.fn[t] = function (i) {
                return kt(
                    this,
                    function (t, i, r) {
                        var o = Y(t);
                        return void 0 === r ? (o ? o[e] : t[i]) : void (o ? o.scrollTo(n ? o.pageXOffset : r, n ? r : o.pageYOffset) : (t[i] = r));
                    },
                    t,
                    i,
                    arguments.length
                );
            };
        }),
        ot.each(["top", "left"], function (t, e) {
            ot.cssHooks[e] = T(it.pixelPosition, function (t, n) {
                return n ? ((n = _(t, e)), Xt.test(n) ? ot(t).position()[e] + "px" : n) : void 0;
            });
        }),
        ot.each({ Height: "height", Width: "width" }, function (t, e) {
            ot.each({ padding: "inner" + t, content: e, "": "outer" + t }, function (n, i) {
                ot.fn[i] = function (i, r) {
                    var o = arguments.length && (n || "boolean" != typeof i),
                        a = n || (i === !0 || r === !0 ? "margin" : "border");
                    return kt(
                        this,
                        function (e, n, i) {
                            var r;
                            return ot.isWindow(e)
                                ? e.document.documentElement["client" + t]
                                : 9 === e.nodeType
                                ? ((r = e.documentElement), Math.max(e.body["scroll" + t], r["scroll" + t], e.body["offset" + t], r["offset" + t], r["client" + t]))
                                : void 0 === i
                                ? ot.css(e, n, a)
                                : ot.style(e, n, i, a);
                        },
                        e,
                        o ? i : void 0,
                        o,
                        null
                    );
                };
            });
        }),
        ot.fn.extend({
            bind: function (t, e, n) {
                return this.on(t, null, e, n);
            },
            unbind: function (t, e) {
                return this.off(t, null, e);
            },
            delegate: function (t, e, n, i) {
                return this.on(e, t, n, i);
            },
            undelegate: function (t, e, n) {
                return 1 === arguments.length ? this.off(t, "**") : this.off(e, t || "**", n);
            },
            size: function () {
                return this.length;
            },
        }),
        (ot.fn.andSelf = ot.fn.addBack),
        "function" == typeof define &&
            define.amd &&
            define("jquery", [], function () {
                return ot;
            });
    var Ue = t.jQuery,
        Me = t.$;
    return (
        (ot.noConflict = function (e) {
            return t.$ === ot && (t.$ = Me), e && t.jQuery === ot && (t.jQuery = Ue), ot;
        }),
        e || (t.jQuery = t.$ = ot),
        ot
    );
}),
    (function (t) {
        "function" == typeof define && define.amd ? define(["jquery"], t) : t(jQuery);
    })(function (t) {
        function e(t) {
            return t;
        }
        function n(t) {
            return decodeURIComponent(t.replace(r, " "));
        }
        function i(t) {
            0 === t.indexOf('"') && (t = t.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\"));
            try {
                return o.json ? JSON.parse(t) : t;
            } catch (e) {}
        }
        var r = /\+/g,
            o = (t.cookie = function (r, a, s) {
                if (void 0 !== a) {
                    if (((s = t.extend({}, o.defaults, s)), "number" == typeof s.expires)) {
                        var l = s.expires,
                            c = (s.expires = new Date());
                        c.setDate(c.getDate() + l);
                    }
                    return (
                        (a = o.json ? JSON.stringify(a) : String(a)),
                        (document.cookie = [
                            o.raw ? r : encodeURIComponent(r),
                            "=",
                            o.raw ? a : encodeURIComponent(a),
                            s.expires ? "; expires=" + s.expires.toUTCString() : "",
                            s.path ? "; path=" + s.path : "",
                            s.domain ? "; domain=" + s.domain : "",
                            s.secure ? "; secure" : "",
                        ].join(""))
                    );
                }
                for (var u = o.raw ? e : n, d = document.cookie.split("; "), p = r ? void 0 : {}, h = 0, f = d.length; f > h; h++) {
                    var m = d[h].split("="),
                        v = u(m.shift()),
                        g = u(m.join("="));
                    if (r && r === v) {
                        p = i(g);
                        break;
                    }
                    r || (p[v] = i(g));
                }
                return p;
            });
        (o.defaults = {}),
            (t.removeCookie = function (e, n) {
                return void 0 !== t.cookie(e) ? (t.cookie(e, "", t.extend({}, n, { expires: -1 })), !0) : !1;
            });
    }),
    function () {
        function t(t, e) {
            if (t !== e) {
                var n = t === t,
                    i = e === e;
                if (t > e || !n || ("undefined" == typeof t && i)) return 1;
                if (e > t || !i || ("undefined" == typeof e && n)) return -1;
            }
            return 0;
        }
        function e(t, e, n) {
            if (e !== e) return p(t, n);
            for (var i = (n || 0) - 1, r = t.length; ++i < r; ) if (t[i] === e) return i;
            return -1;
        }
        function n(t, e) {
            var n = t.length;
            for (t.sort(e); n--; ) t[n] = t[n].value;
            return t;
        }
        function i(t) {
            return "string" == typeof t ? t : null == t ? "" : t + "";
        }
        function r(t) {
            return t.charCodeAt(0);
        }
        function o(t, e) {
            for (var n = -1, i = t.length; ++n < i && e.indexOf(t.charAt(n)) > -1; );
            return n;
        }
        function a(t, e) {
            for (var n = t.length; n-- && e.indexOf(t.charAt(n)) > -1; );
            return n;
        }
        function s(e, n) {
            return t(e.criteria, n.criteria) || e.index - n.index;
        }
        function l(e, n) {
            for (var i = -1, r = e.criteria, o = n.criteria, a = r.length; ++i < a; ) {
                var s = t(r[i], o[i]);
                if (s) return s;
            }
            return e.index - n.index;
        }
        function c(t) {
            return qt[t];
        }
        function u(t) {
            return Ut[t];
        }
        function d(t) {
            return "\\" + Ft[t];
        }
        function p(t, e, n) {
            for (var i = t.length, r = n ? e || i : (e || 0) - 1; n ? r-- : ++r < i; ) {
                var o = t[r];
                if (o !== o) return r;
            }
            return -1;
        }
        function h(t) {
            return (t && "object" == typeof t) || !1;
        }
        function f(t) {
            return (160 >= t && t >= 9 && 13 >= t) || 32 == t || 160 == t || 5760 == t || 6158 == t || (t >= 8192 && (8202 >= t || 8232 == t || 8233 == t || 8239 == t || 8287 == t || 12288 == t || 65279 == t));
        }
        function m(t, e) {
            for (var n = -1, i = t.length, r = -1, o = []; ++n < i; ) t[n] === e && ((t[n] = M), (o[++r] = n));
            return o;
        }
        function v(t, e) {
            for (var n, i = -1, r = t.length, o = -1, a = []; ++i < r; ) {
                var s = t[i],
                    l = e ? e(s, i, t) : s;
                (i && n === l) || ((n = l), (a[++o] = s));
            }
            return a;
        }
        function g(t) {
            for (var e = -1, n = t.length; ++e < n && f(t.charCodeAt(e)); );
            return e;
        }
        function y(t) {
            for (var e = t.length; e-- && f(t.charCodeAt(e)); );
            return e;
        }
        function b(t) {
            return Mt[t];
        }
        function w(f) {
            function Y(t) {
                if (h(t) && !Fa(t)) {
                    if (t instanceof K) return t;
                    if (Wo.call(t, "__wrapped__")) return new K(t.__wrapped__, t.__chain__, Kt(t.__actions__));
                }
                return new K(t);
            }
            function K(t, e, n) {
                (this.__actions__ = n || []), (this.__chain__ = !!e), (this.__wrapped__ = t);
            }
            function Z(t) {
                (this.actions = null), (this.dir = 1), (this.dropCount = 0), (this.filtered = !1), (this.iteratees = null), (this.takeCount = xa), (this.views = null), (this.wrapped = t);
            }
            function qt() {
                var t = this.actions,
                    e = this.iteratees,
                    n = this.views,
                    i = new Z(this.wrapped);
                return (i.actions = t ? Kt(t) : null), (i.dir = this.dir), (i.dropCount = this.dropCount), (i.filtered = this.filtered), (i.iteratees = e ? Kt(e) : null), (i.takeCount = this.takeCount), (i.views = n ? Kt(n) : null), i;
            }
            function Ut() {
                var t = this.filtered,
                    e = t ? new Z(this) : this.clone();
                return (e.dir = -1 * this.dir), (e.filtered = t), e;
            }
            function Mt() {
                var t = this.wrapped.value();
                if (!Fa(t)) return We(t, this.actions);
                var e = this.dir,
                    n = 0 > e,
                    i = t.length,
                    r = vn(0, i, this.views),
                    o = r.start,
                    a = r.end,
                    s = this.dropCount,
                    l = va(a - o, this.takeCount - s),
                    c = n ? a : o - 1,
                    u = this.iteratees,
                    d = u ? u.length : 0,
                    p = 0,
                    h = [];
                t: for (; i-- && l > p; ) {
                    c += e;
                    for (var f = -1, m = t[c]; ++f < d; ) {
                        var v = u[f],
                            g = v.iteratee,
                            y = g(m, c, t),
                            b = v.type;
                        if (b == N) m = y;
                        else if (!y) {
                            if (b == L) continue t;
                            break t;
                        }
                    }
                    s ? s-- : (h[p++] = m);
                }
                return n ? h.reverse() : h;
            }
            function Bt() {
                this.__data__ = {};
            }
            function Ft(t) {
                return this.has(t) && delete this.__data__[t];
            }
            function Vt(t) {
                return "__proto__" == t ? $ : this.__data__[t];
            }
            function zt(t) {
                return "__proto__" != t && Wo.call(this.__data__, t);
            }
            function Wt(t, e) {
                return "__proto__" != t && (this.__data__[t] = e), this;
            }
            function Yt(t) {
                var e = t ? t.length : 0;
                for (this.data = { hash: pa(null), set: new oa() }; e--; ) this.push(t[e]);
            }
            function Xt(t, e) {
                var n = t.data,
                    i = "string" == typeof e || wr(e) ? n.set.has(e) : n.hash[e];
                return i ? 0 : -1;
            }
            function Jt(t) {
                var e = this.data;
                "string" == typeof t || wr(t) ? e.set.add(t) : (e.hash[t] = !0);
            }
            function Kt(t, e) {
                var n = -1,
                    i = t.length;
                for (e || (e = Ro(i)); ++n < i; ) e[n] = t[n];
                return e;
            }
            function Qt(t, e) {
                for (var n = -1, i = t.length; ++n < i && e(t[n], n, t) !== !1; );
                return t;
            }
            function Zt(t, e) {
                for (var n = t.length; n-- && e(t[n], n, t) !== !1; );
                return t;
            }
            function te(t, e) {
                for (var n = -1, i = t.length; ++n < i; ) if (!e(t[n], n, t)) return !1;
                return !0;
            }
            function ee(t, e) {
                for (var n = -1, i = t.length, r = -1, o = []; ++n < i; ) {
                    var a = t[n];
                    e(a, n, t) && (o[++r] = a);
                }
                return o;
            }
            function ne(t, e) {
                for (var n = -1, i = t.length, r = Ro(i); ++n < i; ) r[n] = e(t[n], n, t);
                return r;
            }
            function ie(t) {
                for (var e = -1, n = t.length, i = $a; ++e < n; ) {
                    var r = t[e];
                    r > i && (i = r);
                }
                return i;
            }
            function re(t) {
                for (var e = -1, n = t.length, i = xa; ++e < n; ) {
                    var r = t[e];
                    i > r && (i = r);
                }
                return i;
            }
            function oe(t, e, n, i) {
                var r = -1,
                    o = t.length;
                for (i && o && (n = t[++r]); ++r < o; ) n = e(n, t[r], r, t);
                return n;
            }
            function ae(t, e, n, i) {
                var r = t.length;
                for (i && r && (n = t[--r]); r--; ) n = e(n, t[r], r, t);
                return n;
            }
            function se(t, e) {
                for (var n = -1, i = t.length; ++n < i; ) if (e(t[n], n, t)) return !0;
                return !1;
            }
            function le(t, e) {
                return "undefined" == typeof t ? e : t;
            }
            function ce(t, e, n, i) {
                return "undefined" != typeof t && Wo.call(i, n) ? t : e;
            }
            function ue(t, e, n) {
                var i = Wa(e);
                if (!n) return pe(e, t, i);
                for (var r = -1, o = i.length; ++r < o; ) {
                    var a = i[r],
                        s = t[a],
                        l = n(s, e[a], a, t, e);
                    ((l === l ? l === s : s !== s) && ("undefined" != typeof s || a in t)) || (t[a] = l);
                }
                return t;
            }
            function de(t, e) {
                for (var n = -1, i = t.length, r = kn(i), o = e.length, a = Ro(o); ++n < o; ) {
                    var s = e[n];
                    r ? ((s = parseFloat(s)), (a[n] = $n(s, i) ? t[s] : $)) : (a[n] = t[s]);
                }
                return a;
            }
            function pe(t, e, n) {
                n || ((n = e), (e = {}));
                for (var i = -1, r = n.length; ++i < r; ) {
                    var o = n[i];
                    e[o] = t[o];
                }
                return e;
            }
            function he(t, e) {
                for (var n = -1, i = e.length; ++n < i; ) {
                    var r = e[n];
                    t[r] = cn(t[r], k, t);
                }
                return t;
            }
            function fe(t, e, n) {
                var r = typeof t;
                return "function" == r ? ("undefined" != typeof e && wn(t) ? Xe(t, e, n) : t) : null == t ? $o : "object" == r ? Oe(t, !n) : qe(n ? i(t) : t);
            }
            function me(t, e, n, i, r, o, a) {
                var s;
                if ((n && (s = r ? n(t, i, r) : n(t)), "undefined" != typeof s)) return s;
                if (!wr(t)) return t;
                var l = Fa(t);
                if (l) {
                    if (((s = gn(t)), !e)) return Kt(t, s);
                } else {
                    var c = Go.call(t),
                        u = c == W;
                    if (c != X && c != B && (!u || r)) return Lt[c] ? bn(t, c, e) : r ? t : {};
                    if (((s = yn(u ? {} : t)), !e)) return pe(t, s, Wa(t));
                }
                o || (o = []), a || (a = []);
                for (var d = o.length; d--; ) if (o[d] == t) return a[d];
                return (
                    o.push(t),
                    a.push(s),
                    (l ? Qt : Te)(t, function (i, r) {
                        s[r] = me(i, e, n, r, t, o, a);
                    }),
                    s
                );
            }
            function ve(t, e, n, i) {
                if (!br(t)) throw new Mo(U);
                return aa(function () {
                    t.apply($, Fe(n, i));
                }, e);
            }
            function ge(t, n) {
                var i = t ? t.length : 0,
                    r = [];
                if (!i) return r;
                var o = -1,
                    a = mn(),
                    s = a == e,
                    l = s && n.length >= 200 && Pa(n),
                    c = n.length;
                l && ((a = Xt), (s = !1), (n = l));
                t: for (; ++o < i; ) {
                    var u = t[o];
                    if (s && u === u) {
                        for (var d = c; d--; ) if (n[d] === u) continue t;
                        r.push(u);
                    } else a(n, u) < 0 && r.push(u);
                }
                return r;
            }
            function ye(t, e) {
                var n = t ? t.length : 0;
                if (!kn(n)) return Te(t, e);
                for (var i = -1, r = Pn(t); ++i < n && e(r[i], i, r) !== !1; );
                return t;
            }
            function be(t, e) {
                var n = t ? t.length : 0;
                if (!kn(n)) return Ee(t, e);
                for (var i = Pn(t); n-- && e(i[n], n, i) !== !1; );
                return t;
            }
            function we(t, e) {
                var n = !0;
                return (
                    ye(t, function (t, i, r) {
                        return (n = !!e(t, i, r));
                    }),
                    n
                );
            }
            function $e(t, e) {
                var n = [];
                return (
                    ye(t, function (t, i, r) {
                        e(t, i, r) && n.push(t);
                    }),
                    n
                );
            }
            function xe(t, e, n, i) {
                var r;
                return (
                    n(t, function (t, n, o) {
                        return e(t, n, o) ? ((r = i ? n : t), !1) : void 0;
                    }),
                    r
                );
            }
            function ke(t, e, n, i) {
                for (var r = (i || 0) - 1, o = t.length, a = -1, s = []; ++r < o; ) {
                    var l = t[r];
                    if (h(l) && kn(l.length) && (Fa(l) || pr(l))) {
                        e && (l = ke(l, e, n));
                        var c = -1,
                            u = l.length;
                        for (s.length += u; ++c < u; ) s[++a] = l[c];
                    } else n || (s[++a] = l);
                }
                return s;
            }
            function Se(t, e, n) {
                for (var i = -1, r = Pn(t), o = n(t), a = o.length; ++i < a; ) {
                    var s = o[i];
                    if (e(r[s], s, r) === !1) break;
                }
                return t;
            }
            function Ce(t, e, n) {
                for (var i = Pn(t), r = n(t), o = r.length; o--; ) {
                    var a = r[o];
                    if (e(i[a], a, i) === !1) break;
                }
                return t;
            }
            function _e(t, e) {
                return Se(t, e, Hr);
            }
            function Te(t, e) {
                return Se(t, e, Wa);
            }
            function Ee(t, e) {
                return Ce(t, e, Wa);
            }
            function Ae(t, e) {
                for (var n = -1, i = e.length, r = -1, o = []; ++n < i; ) {
                    var a = e[n];
                    br(t[a]) && (o[++r] = a);
                }
                return o;
            }
            function Ie(t, e, n) {
                var i = -1,
                    r = "function" == typeof e,
                    o = t ? t.length : 0,
                    a = kn(o) ? Ro(o) : [];
                return (
                    ye(t, function (t) {
                        var o = r ? e : null != t && t[e];
                        a[++i] = o ? o.apply(t, n) : $;
                    }),
                    a
                );
            }
            function Re(t, e, n, i, r, o) {
                if (t === e) return 0 !== t || 1 / t == 1 / e;
                var a = typeof t,
                    s = typeof e;
                return ("function" != a && "object" != a && "function" != s && "object" != s) || null == t || null == e ? t !== t && e !== e : Pe(t, e, Re, n, i, r, o);
            }
            function Pe(t, e, n, i, r, o, a) {
                var s = Fa(t),
                    l = Fa(e),
                    c = F,
                    u = F;
                s || ((c = Go.call(t)), c == B ? (c = X) : c != X && (s = Er(t))), l || ((u = Go.call(e)), u == B ? (u = X) : u != X && (l = Er(e)));
                var d = c == X,
                    p = u == X,
                    h = c == u;
                if (h && !s && !d) return dn(t, e, c);
                var f = d && Wo.call(t, "__wrapped__"),
                    m = p && Wo.call(e, "__wrapped__");
                if (f || m) return n(f ? t.value() : t, m ? e.value() : e, i, r, o, a);
                if (!h) return !1;
                o || (o = []), a || (a = []);
                for (var v = o.length; v--; ) if (o[v] == t) return a[v] == e;
                o.push(t), a.push(e);
                var g = (s ? un : pn)(t, e, n, i, r, o, a);
                return o.pop(), a.pop(), g;
            }
            function je(t, e, n, i, r) {
                var o = e.length;
                if (null == t) return !o;
                for (var a = -1, s = !r; ++a < o; ) if (s && i[a] ? n[a] !== t[e[a]] : !Wo.call(t, e[a])) return !1;
                for (a = -1; ++a < o; ) {
                    var l = e[a];
                    if (s && i[a]) var c = Wo.call(t, l);
                    else {
                        var u = t[l],
                            d = n[a];
                        (c = r ? r(u, d, l) : $), "undefined" == typeof c && (c = Re(d, u, r, !0));
                    }
                    if (!c) return !1;
                }
                return !0;
            }
            function De(t, e) {
                var n = [];
                return (
                    ye(t, function (t, i, r) {
                        n.push(e(t, i, r));
                    }),
                    n
                );
            }
            function Oe(t, e) {
                var n = Wa(t),
                    i = n.length;
                if (1 == i) {
                    var r = n[0],
                        o = t[r];
                    if (Sn(o))
                        return function (t) {
                            return null != t && o === t[r] && Wo.call(t, r);
                        };
                }
                e && (t = me(t, !0));
                for (var a = Ro(i), s = Ro(i); i--; ) (o = t[n[i]]), (a[i] = o), (s[i] = Sn(o));
                return function (t) {
                    return je(t, n, a, s);
                };
            }
            function Le(t, e, n, i, r) {
                var o = kn(e.length) && (Fa(e) || Er(e));
                return (
                    (o ? Qt : Te)(e, function (e, a, s) {
                        if (h(e)) return i || (i = []), r || (r = []), Ne(t, s, a, Le, n, i, r);
                        var l = t[a],
                            c = n ? n(l, e, a, t, s) : $,
                            u = "undefined" == typeof c;
                        u && (c = e), (!o && "undefined" == typeof c) || (!u && (c === c ? c === l : l !== l)) || (t[a] = c);
                    }),
                    t
                );
            }
            function Ne(t, e, n, i, r, o, a) {
                for (var s = o.length, l = e[n]; s--; ) if (o[s] == l) return void (t[n] = a[s]);
                var c = t[n],
                    u = r ? r(c, l, n, t, e) : $,
                    d = "undefined" == typeof u;
                d && ((u = l), kn(l.length) && (Fa(l) || Er(l)) ? (u = Fa(c) ? c : c ? Kt(c) : []) : (Va(l) || pr(l)) && (u = pr(c) ? Rr(c) : Va(c) ? c : {})),
                    o.push(l),
                    a.push(u),
                    d ? (t[n] = i(u, l, r, o, a)) : (u === u ? u !== c : c === c) && (t[n] = u);
            }
            function qe(t) {
                return function (e) {
                    return null == e ? $ : e[t];
                };
            }
            function Ue(e, n) {
                var i = n.length,
                    r = de(e, n);
                for (n.sort(t); i--; ) {
                    var o = parseFloat(n[i]);
                    if (o != a && $n(o)) {
                        var a = o;
                        sa.call(e, o, 1);
                    }
                }
                return r;
            }
            function Me(t, e) {
                return t + ea(wa() * (e - t + 1));
            }
            function Be(t, e, n, i, r) {
                return (
                    r(t, function (t, r, o) {
                        n = i ? ((i = !1), t) : e(n, t, r, o);
                    }),
                    n
                );
            }
            function Fe(t, e, n) {
                var i = -1,
                    r = t.length;
                (e = null == e ? 0 : +e || 0), 0 > e && (e = -e > r ? 0 : r + e), (n = "undefined" == typeof n || n > r ? r : +n || 0), 0 > n && (n += r), (r = e > n ? 0 : n - e);
                for (var o = Ro(r); ++i < r; ) o[i] = t[i + e];
                return o;
            }
            function He(t, e) {
                var n;
                return (
                    ye(t, function (t, i, r) {
                        return (n = e(t, i, r)), !n;
                    }),
                    !!n
                );
            }
            function Ve(t, n) {
                var i = -1,
                    r = mn(),
                    o = t.length,
                    a = r == e,
                    s = a && o >= 200,
                    l = s && Pa(),
                    c = [];
                l ? ((r = Xt), (a = !1)) : ((s = !1), (l = n ? [] : c));
                t: for (; ++i < o; ) {
                    var u = t[i],
                        d = n ? n(u, i, t) : u;
                    if (a && u === u) {
                        for (var p = l.length; p--; ) if (l[p] === d) continue t;
                        n && l.push(d), c.push(u);
                    } else r(l, d) < 0 && ((n || s) && l.push(d), c.push(u));
                }
                return c;
            }
            function ze(t, e) {
                for (var n = -1, i = e.length, r = Ro(i); ++n < i; ) r[n] = t[e[n]];
                return r;
            }
            function We(t, e) {
                var n = t;
                n instanceof Z && (n = n.value());
                for (var i = -1, r = e.length; ++i < r; ) {
                    var o = [n],
                        a = e[i];
                    ia.apply(o, a.args), (n = a.func.apply(a.thisArg, o));
                }
                return n;
            }
            function Ye(t, e, n) {
                var i = 0,
                    r = t ? t.length : i;
                if ("number" == typeof e && e === e && Ca >= r) {
                    for (; r > i; ) {
                        var o = (i + r) >>> 1,
                            a = t[o];
                        (n ? e >= a : e > a) ? (i = o + 1) : (r = o);
                    }
                    return r;
                }
                return Ge(t, e, $o, n);
            }
            function Ge(t, e, n, i) {
                e = n(e);
                for (var r = 0, o = t ? t.length : 0, a = e !== e, s = "undefined" == typeof e; o > r; ) {
                    var l = ea((r + o) / 2),
                        c = n(t[l]),
                        u = c === c;
                    if (a) var d = u || i;
                    else d = s ? u && (i || "undefined" != typeof c) : i ? e >= c : e > c;
                    d ? (r = l + 1) : (o = l);
                }
                return va(o, Sa);
            }
            function Xe(t, e, n) {
                if ("function" != typeof t) return $o;
                if ("undefined" == typeof e) return t;
                switch (n) {
                    case 1:
                        return function (n) {
                            return t.call(e, n);
                        };
                    case 3:
                        return function (n, i, r) {
                            return t.call(e, n, i, r);
                        };
                    case 4:
                        return function (n, i, r, o) {
                            return t.call(e, n, i, r, o);
                        };
                    case 5:
                        return function (n, i, r, o, a) {
                            return t.call(e, n, i, r, o, a);
                        };
                }
                return function () {
                    return t.apply(e, arguments);
                };
            }
            function Je(t) {
                return Qo.call(t, 0);
            }
            function Ke(t, e, n) {
                for (var i = n.length, r = -1, o = ma(t.length - i, 0), a = -1, s = e.length, l = Ro(o + s); ++a < s; ) l[a] = e[a];
                for (; ++r < i; ) l[n[r]] = t[r];
                for (; o--; ) l[a++] = t[r++];
                return l;
            }
            function Qe(t, e, n) {
                for (var i = -1, r = n.length, o = -1, a = ma(t.length - r, 0), s = -1, l = e.length, c = Ro(a + l); ++o < a; ) c[o] = t[o];
                for (var u = o; ++s < l; ) c[u + s] = e[s];
                for (; ++i < r; ) c[u + n[i]] = t[o++];
                return c;
            }
            function Ze(t, e) {
                return function (n, i, r) {
                    var o = e ? e() : {};
                    if (((i = fn(i, r, 3)), Fa(n)))
                        for (var a = -1, s = n.length; ++a < s; ) {
                            var l = n[a];
                            t(o, l, i(l, a, n), n);
                        }
                    else
                        ye(n, function (e, n, r) {
                            t(o, e, i(e, n, r), r);
                        });
                    return o;
                };
            }
            function tn(t) {
                return function () {
                    var e = arguments.length,
                        n = arguments[0];
                    if (2 > e || null == n) return n;
                    if ((e > 3 && xn(arguments[1], arguments[2], arguments[3]) && (e = 2), e > 3 && "function" == typeof arguments[e - 2])) var i = Xe(arguments[--e - 1], arguments[e--], 5);
                    else e > 2 && "function" == typeof arguments[e - 1] && (i = arguments[--e]);
                    for (var r = 0; ++r < e; ) {
                        var o = arguments[r];
                        o && t(n, o, i);
                    }
                    return n;
                };
            }
            function en(t, e) {
                function n() {
                    return (this instanceof n ? i : t).apply(e, arguments);
                }
                var i = rn(t);
                return n;
            }
            function nn(t) {
                return function (e) {
                    for (var n = -1, i = go(to(e)), r = i.length, o = ""; ++n < r; ) o = t(o, i[n], n);
                    return o;
                };
            }
            function rn(t) {
                return function () {
                    var e = Ia(t.prototype),
                        n = t.apply(e, arguments);
                    return wr(n) ? n : e;
                };
            }
            function on(t, e) {
                return function (n, i, o) {
                    o && xn(n, i, o) && (i = null);
                    var a = fn(),
                        s = null == i;
                    if (((a === fe && s) || ((s = !1), (i = a(i, o, 3))), s)) {
                        var l = Fa(n);
                        if (l || !Tr(n)) return t(l ? n : Rn(n));
                        i = r;
                    }
                    return hn(n, i, e);
                };
            }
            function an(t, e, n, i, r, o, a, s, l, c) {
                function u() {
                    for (var w = arguments.length, $ = w, x = Ro(w); $--; ) x[$] = arguments[$];
                    if ((i && (x = Ke(x, i, r)), o && (x = Qe(x, o, a)), f || g)) {
                        var C = u.placeholder,
                            _ = m(x, C);
                        if (((w -= _.length), c > w)) {
                            var T = s ? Kt(s) : null,
                                I = ma(c - w, 0),
                                R = f ? _ : null,
                                P = f ? null : _,
                                j = f ? x : null,
                                D = f ? null : x;
                            (e |= f ? E : A), (e &= ~(f ? A : E)), v || (e &= ~(k | S));
                            var O = an(t, e, n, j, R, D, P, T, l, I);
                            return (O.placeholder = C), O;
                        }
                    }
                    var L = p ? n : this;
                    return h && (t = L[b]), s && (x = En(x, s)), d && l < x.length && (x.length = l), (this instanceof u ? y || rn(t) : t).apply(L, x);
                }
                var d = e & R,
                    p = e & k,
                    h = e & S,
                    f = e & _,
                    v = e & C,
                    g = e & T,
                    y = !h && rn(t),
                    b = t;
                return u;
            }
            function sn(t, e, n) {
                var r = t.length;
                if (((e = +e), r >= e || !ha(e))) return "";
                var o = e - r;
                return (n = null == n ? " " : i(n)), lo(n, Zo(o / n.length)).slice(0, o);
            }
            function ln(t, e, n, i) {
                function r() {
                    for (var e = -1, s = arguments.length, l = -1, c = i.length, u = Ro(s + c); ++l < c; ) u[l] = i[l];
                    for (; s--; ) u[l++] = arguments[++e];
                    return (this instanceof r ? a : t).apply(o ? n : this, u);
                }
                var o = e & k,
                    a = rn(t);
                return r;
            }
            function cn(t, e, n, i, r, o, a, s) {
                var l = e & S;
                if (!l && !br(t)) throw new Mo(U);
                var c = i ? i.length : 0;
                if ((c || ((e &= ~(E | A)), (i = r = null)), (c -= r ? r.length : 0), e & A)) {
                    var u = i,
                        d = r;
                    i = r = null;
                }
                var p = !l && ja(t),
                    h = [t, e, n, i, r, u, d, o, a, s];
                if ((p && p !== !0 && (Cn(h, p), (e = h[1]), (s = h[9])), (h[9] = null == s ? (l ? 0 : t.length) : ma(s - c, 0) || 0), e == k)) var f = en(h[0], h[2]);
                else f = (e != E && e != (k | E)) || h[4].length ? an.apply(null, h) : ln.apply(null, h);
                var m = p ? Ra : Da;
                return m(f, h);
            }
            function un(t, e, n, i, r, o, a) {
                var s = -1,
                    l = t.length,
                    c = e.length,
                    u = !0;
                if (l != c && !(r && c > l)) return !1;
                for (; u && ++s < l; ) {
                    var d = t[s],
                        p = e[s];
                    if (((u = $), i && (u = r ? i(p, d, s) : i(d, p, s)), "undefined" == typeof u))
                        if (r) for (var h = c; h-- && ((p = e[h]), !(u = (d && d === p) || n(d, p, i, r, o, a))); );
                        else u = (d && d === p) || n(d, p, i, r, o, a);
                }
                return !!u;
            }
            function dn(t, e, n) {
                switch (n) {
                    case H:
                    case V:
                        return +t == +e;
                    case z:
                        return t.name == e.name && t.message == e.message;
                    case G:
                        return t != +t ? e != +e : 0 == t ? 1 / t == 1 / e : t == +e;
                    case J:
                    case Q:
                        return t == i(e);
                }
                return !1;
            }
            function pn(t, e, n, i, r, o, a) {
                var s = Wa(t),
                    l = s.length,
                    c = Wa(e),
                    u = c.length;
                if (l != u && !r) return !1;
                for (var d, p = -1; ++p < l; ) {
                    var h = s[p],
                        f = Wo.call(e, h);
                    if (f) {
                        var m = t[h],
                            v = e[h];
                        (f = $), i && (f = r ? i(v, m, h) : i(m, v, h)), "undefined" == typeof f && (f = (m && m === v) || n(m, v, i, r, o, a));
                    }
                    if (!f) return !1;
                    d || (d = "constructor" == h);
                }
                if (!d) {
                    var g = t.constructor,
                        y = e.constructor;
                    if (g != y && "constructor" in t && "constructor" in e && !("function" == typeof g && g instanceof g && "function" == typeof y && y instanceof y)) return !1;
                }
                return !0;
            }
            function hn(t, e, n) {
                var i = n ? xa : $a,
                    r = i,
                    o = r;
                return (
                    ye(t, function (t, a, s) {
                        var l = e(t, a, s);
                        ((n ? r > l : l > r) || (l === i && l === o)) && ((r = l), (o = t));
                    }),
                    o
                );
            }
            function fn(t, e, n) {
                var i = Y.callback || bo;
                return (i = i === bo ? fe : i), n ? i(t, e, n) : i;
            }
            function mn(t, n, i) {
                var r = Y.indexOf || zn;
                return (r = r === zn ? e : r), t ? r(t, n, i) : r;
            }
            function vn(t, e, n) {
                for (var i = -1, r = n ? n.length : 0; ++i < r; ) {
                    var o = n[i],
                        a = o.size;
                    switch (o.type) {
                        case "drop":
                            t += a;
                            break;
                        case "dropRight":
                            e -= a;
                            break;
                        case "take":
                            e = va(e, t + a);
                            break;
                        case "takeRight":
                            t = ma(t, e - a);
                    }
                }
                return { start: t, end: e };
            }
            function gn(t) {
                var e = t.length,
                    n = new t.constructor(e);
                return e && "string" == typeof t[0] && Wo.call(t, "index") && ((n.index = t.index), (n.input = t.input)), n;
            }
            function yn(t) {
                var e = t.constructor;
                return ("function" == typeof e && e instanceof e) || (e = No), new e();
            }
            function bn(t, e, n) {
                var i = t.constructor;
                switch (e) {
                    case tt:
                        return Je(t);
                    case H:
                    case V:
                        return new i(+t);
                    case et:
                    case nt:
                    case it:
                    case rt:
                    case ot:
                    case at:
                    case st:
                    case lt:
                    case ct:
                        var r = t.buffer;
                        return new i(n ? Je(r) : r, t.byteOffset, t.length);
                    case G:
                    case Q:
                        return new i(t);
                    case J:
                        var o = new i(t.source, $t.exec(t));
                        o.lastIndex = t.lastIndex;
                }
                return o;
            }
            function wn(t) {
                var e = Y.support,
                    n = !(e.funcNames ? t.name : e.funcDecomp);
                if (!n) {
                    var i = Vo.call(t);
                    e.funcNames || (n = !xt.test(i)), n || ((n = At.test(i) || kr(t)), Ra(t, n));
                }
                return n;
            }
            function $n(t, e) {
                return (t = +t), (e = null == e ? Ta : e), t > -1 && t % 1 == 0 && e > t;
            }
            function xn(t, e, n) {
                if (!wr(n)) return !1;
                var i = typeof e;
                if ("number" == i)
                    var r = n.length,
                        o = kn(r) && $n(e, r);
                else o = "string" == i && e in t;
                return o && n[e] === t;
            }
            function kn(t) {
                return "number" == typeof t && t > -1 && t % 1 == 0 && Ta >= t;
            }
            function Sn(t) {
                return t === t && (0 === t ? 1 / t > 0 : !wr(t));
            }
            function Cn(t, e) {
                var n = t[1],
                    i = e[1],
                    r = n | i,
                    o = R | I,
                    a = k | S,
                    s = o | a | C | T,
                    l = n & R && !(i & R),
                    c = n & I && !(i & I),
                    u = (c ? t : e)[7],
                    d = (l ? t : e)[8],
                    p = !((n >= I && i > a) || (n > a && i >= I)),
                    h = r >= o && s >= r && (I > n || ((c || l) && u.length <= d));
                if (!p && !h) return t;
                i & k && ((t[2] = e[2]), (r |= n & k ? 0 : C));
                var f = e[3];
                if (f) {
                    var v = t[3];
                    (t[3] = v ? Ke(v, f, e[4]) : Kt(f)), (t[4] = v ? m(t[3], M) : Kt(e[4]));
                }
                return (
                    (f = e[5]),
                    f && ((v = t[5]), (t[5] = v ? Qe(v, f, e[6]) : Kt(f)), (t[6] = v ? m(t[5], M) : Kt(e[6]))),
                    (f = e[7]),
                    f && (t[7] = Kt(f)),
                    i & R && (t[8] = null == t[8] ? e[8] : va(t[8], e[8])),
                    null == t[9] && (t[9] = e[9]),
                    (t[0] = e[0]),
                    (t[1] = r),
                    t
                );
            }
            function _n(t, e) {
                t = Pn(t);
                for (var n = -1, i = e.length, r = {}; ++n < i; ) {
                    var o = e[n];
                    o in t && (r[o] = t[o]);
                }
                return r;
            }
            function Tn(t, e) {
                var n = {};
                return (
                    _e(t, function (t, i, r) {
                        e(t, i, r) && (n[i] = t);
                    }),
                    n
                );
            }
            function En(t, e) {
                for (var n = t.length, i = va(e.length, n), r = Kt(t); i--; ) {
                    var o = e[i];
                    t[i] = $n(o, n) ? r[o] : $;
                }
                return t;
            }
            function An(t) {
                var e;
                Y.support;
                if (!h(t) || Go.call(t) != X || (!Wo.call(t, "constructor") && ((e = t.constructor), "function" == typeof e && !(e instanceof e)))) return !1;
                var n;
                return (
                    _e(t, function (t, e) {
                        n = e;
                    }),
                    "undefined" == typeof n || Wo.call(t, n)
                );
            }
            function In(t) {
                for (var e = Hr(t), n = e.length, i = n && t.length, r = Y.support, o = i && kn(i) && (Fa(t) || (r.nonEnumArgs && pr(t))), a = -1, s = []; ++a < n; ) {
                    var l = e[a];
                    ((o && $n(l, i)) || Wo.call(t, l)) && s.push(l);
                }
                return s;
            }
            function Rn(t) {
                return null == t ? [] : kn(t.length) ? (wr(t) ? t : No(t)) : Jr(t);
            }
            function Pn(t) {
                return wr(t) ? t : No(t);
            }
            function jn(t, e, n) {
                e = (n ? xn(t, e, n) : null == e) ? 1 : ma(+e || 1, 1);
                for (var i = 0, r = t ? t.length : 0, o = -1, a = Ro(Zo(r / e)); r > i; ) a[++o] = Fe(t, i, (i += e));
                return a;
            }
            function Dn(t) {
                for (var e = -1, n = t ? t.length : 0, i = -1, r = []; ++e < n; ) {
                    var o = t[e];
                    o && (r[++i] = o);
                }
                return r;
            }
            function On() {
                for (var t = -1, e = arguments.length; ++t < e; ) {
                    var n = arguments[t];
                    if (Fa(n) || pr(n)) break;
                }
                return ge(n, ke(arguments, !1, !0, ++t));
            }
            function Ln(t, e, n) {
                var i = t ? t.length : 0;
                return i ? ((n ? xn(t, e, n) : null == e) && (e = 1), Fe(t, 0 > e ? 0 : e)) : [];
            }
            function Nn(t, e, n) {
                var i = t ? t.length : 0;
                return i ? ((n ? xn(t, e, n) : null == e) && (e = 1), (e = i - (+e || 0)), Fe(t, 0, 0 > e ? 0 : e)) : [];
            }
            function qn(t, e, n) {
                var i = t ? t.length : 0;
                if (!i) return [];
                for (e = fn(e, n, 3); i-- && e(t[i], i, t); );
                return Fe(t, 0, i + 1);
            }
            function Un(t, e, n) {
                var i = t ? t.length : 0;
                if (!i) return [];
                var r = -1;
                for (e = fn(e, n, 3); ++r < i && e(t[r], r, t); );
                return Fe(t, r);
            }
            function Mn(t, e, n) {
                var i = -1,
                    r = t ? t.length : 0;
                for (e = fn(e, n, 3); ++i < r; ) if (e(t[i], i, t)) return i;
                return -1;
            }
            function Bn(t, e, n) {
                var i = t ? t.length : 0;
                for (e = fn(e, n, 3); i--; ) if (e(t[i], i, t)) return i;
                return -1;
            }
            function Fn(t) {
                return t ? t[0] : $;
            }
            function Hn(t, e, n) {
                var i = t ? t.length : 0;
                return n && xn(t, e, n) && (e = !1), i ? ke(t, e) : [];
            }
            function Vn(t) {
                var e = t ? t.length : 0;
                return e ? ke(t, !0) : [];
            }
            function zn(t, n, i) {
                var r = t ? t.length : 0;
                if (!r) return -1;
                if ("number" == typeof i) i = 0 > i ? ma(r + i, 0) : i || 0;
                else if (i) {
                    var o = Ye(t, n),
                        a = t[o];
                    return (n === n ? n === a : a !== a) ? o : -1;
                }
                return e(t, n, i);
            }
            function Wn(t) {
                return Nn(t, 1);
            }
            function Yn() {
                for (var t = [], n = -1, i = arguments.length, r = [], o = mn(), a = o == e; ++n < i; ) {
                    var s = arguments[n];
                    (Fa(s) || pr(s)) && (t.push(s), r.push(a && s.length >= 120 && Pa(n && s)));
                }
                i = t.length;
                var l = t[0],
                    c = -1,
                    u = l ? l.length : 0,
                    d = [],
                    p = r[0];
                t: for (; ++c < u; )
                    if (((s = l[c]), (p ? Xt(p, s) : o(d, s)) < 0)) {
                        for (n = i; --n; ) {
                            var h = r[n];
                            if ((h ? Xt(h, s) : o(t[n], s)) < 0) continue t;
                        }
                        p && p.push(s), d.push(s);
                    }
                return d;
            }
            function Gn(t) {
                var e = t ? t.length : 0;
                return e ? t[e - 1] : $;
            }
            function Xn(t, e, n) {
                var i = t ? t.length : 0;
                if (!i) return -1;
                var r = i;
                if ("number" == typeof n) r = (0 > n ? ma(i + n, 0) : va(n || 0, i - 1)) + 1;
                else if (n) {
                    r = Ye(t, e, !0) - 1;
                    var o = t[r];
                    return (e === e ? e === o : o !== o) ? r : -1;
                }
                if (e !== e) return p(t, r, !0);
                for (; r--; ) if (t[r] === e) return r;
                return -1;
            }
            function Jn() {
                var t = arguments[0];
                if (!t || !t.length) return t;
                for (var e = 0, n = mn(), i = arguments.length; ++e < i; ) for (var r = 0, o = arguments[e]; (r = n(t, o, r)) > -1; ) sa.call(t, r, 1);
                return t;
            }
            function Kn(t) {
                return Ue(t || [], ke(arguments, !1, !1, 1));
            }
            function Qn(t, e, n) {
                var i = -1,
                    r = t ? t.length : 0,
                    o = [];
                for (e = fn(e, n, 3); ++i < r; ) {
                    var a = t[i];
                    e(a, i, t) && (o.push(a), sa.call(t, i--, 1), r--);
                }
                return o;
            }
            function Zn(t) {
                return Ln(t, 1);
            }
            function ti(t, e, n) {
                var i = t ? t.length : 0;
                return i ? (n && "number" != typeof n && xn(t, e, n) && ((e = 0), (n = i)), Fe(t, e, n)) : [];
            }
            function ei(t, e, n, i) {
                var r = fn(n);
                return r === fe && null == n ? Ye(t, e) : Ge(t, e, r(n, i, 1));
            }
            function ni(t, e, n, i) {
                var r = fn(n);
                return r === fe && null == n ? Ye(t, e, !0) : Ge(t, e, r(n, i, 1), !0);
            }
            function ii(t, e, n) {
                var i = t ? t.length : 0;
                return i ? ((n ? xn(t, e, n) : null == e) && (e = 1), Fe(t, 0, 0 > e ? 0 : e)) : [];
            }
            function ri(t, e, n) {
                var i = t ? t.length : 0;
                return i ? ((n ? xn(t, e, n) : null == e) && (e = 1), (e = i - (+e || 0)), Fe(t, 0 > e ? 0 : e)) : [];
            }
            function oi(t, e, n) {
                var i = t ? t.length : 0;
                if (!i) return [];
                for (e = fn(e, n, 3); i-- && e(t[i], i, t); );
                return Fe(t, i + 1);
            }
            function ai(t, e, n) {
                var i = t ? t.length : 0;
                if (!i) return [];
                var r = -1;
                for (e = fn(e, n, 3); ++r < i && e(t[r], r, t); );
                return Fe(t, 0, r);
            }
            function si() {
                return Ve(ke(arguments, !1, !0));
            }
            function li(t, n, i, r) {
                var o = t ? t.length : 0;
                if (!o) return [];
                "boolean" != typeof n && null != n && ((r = i), (i = xn(t, n, r) ? null : n), (n = !1));
                var a = fn();
                return (a !== fe || null != i) && (i = a(i, r, 3)), n && mn() == e ? v(t, i) : Ve(t, i);
            }
            function ci(t) {
                for (var e = -1, n = (t && t.length && ie(ne(t, zo))) >>> 0, i = Ro(n); ++e < n; ) i[e] = ne(t, qe(e));
                return i;
            }
            function ui(t) {
                return ge(t, Fe(arguments, 1));
            }
            function di() {
                for (var t = -1, e = arguments.length; ++t < e; ) {
                    var n = arguments[t];
                    if (Fa(n) || pr(n)) var i = i ? ge(i, n).concat(ge(n, i)) : n;
                }
                return i ? Ve(i) : [];
            }
            function pi() {
                for (var t = arguments.length, e = Ro(t); t--; ) e[t] = arguments[t];
                return ci(e);
            }
            function hi(t, e) {
                var n = -1,
                    i = t ? t.length : 0,
                    r = {};
                for (!i || e || Fa(t[0]) || (e = []); ++n < i; ) {
                    var o = t[n];
                    e ? (r[o] = e[n]) : o && (r[o[0]] = o[1]);
                }
                return r;
            }
            function fi(t) {
                var e = Y(t);
                return (e.__chain__ = !0), e;
            }
            function mi(t, e, n) {
                return e.call(n, t), t;
            }
            function vi(t, e, n) {
                return e.call(n, t);
            }
            function gi() {
                return fi(this);
            }
            function yi() {
                var t = this.__wrapped__;
                return t instanceof Z
                    ? new K(t.reverse())
                    : this.thru(function (t) {
                          return t.reverse();
                      });
            }
            function bi() {
                return this.value() + "";
            }
            function wi() {
                return We(this.__wrapped__, this.__actions__);
            }
            function $i(t) {
                var e = t ? t.length : 0;
                return kn(e) && (t = Rn(t)), de(t, ke(arguments, !1, !1, 1));
            }
            function xi(t, e, n) {
                var i = t ? t.length : 0;
                return kn(i) || ((t = Jr(t)), (i = t.length)), i ? ((n = "number" == typeof n ? (0 > n ? ma(i + n, 0) : n || 0) : 0), "string" == typeof t || (!Fa(t) && Tr(t)) ? i > n && t.indexOf(e, n) > -1 : mn(t, e, n) > -1) : !1;
            }
            function ki(t, e, n) {
                var i = Fa(t) ? te : we;
                return ("function" != typeof e || "undefined" != typeof n) && (e = fn(e, n, 3)), i(t, e);
            }
            function Si(t, e, n) {
                var i = Fa(t) ? ee : $e;
                return (e = fn(e, n, 3)), i(t, e);
            }
            function Ci(t, e, n) {
                if (Fa(t)) {
                    var i = Mn(t, e, n);
                    return i > -1 ? t[i] : $;
                }
                return (e = fn(e, n, 3)), xe(t, e, ye);
            }
            function _i(t, e, n) {
                return (e = fn(e, n, 3)), xe(t, e, be);
            }
            function Ti(t, e) {
                return Ci(t, xo(e));
            }
            function Ei(t, e, n) {
                return "function" == typeof e && "undefined" == typeof n && Fa(t) ? Qt(t, e) : ye(t, Xe(e, n, 3));
            }
            function Ai(t, e, n) {
                return "function" == typeof e && "undefined" == typeof n && Fa(t) ? Zt(t, e) : be(t, Xe(e, n, 3));
            }
            function Ii(t, e) {
                return Ie(t, e, Fe(arguments, 2));
            }
            function Ri(t, e, n) {
                var i = Fa(t) ? ne : De;
                return (e = fn(e, n, 3)), i(t, e);
            }
            function Pi(t, e) {
                return Ri(t, _o(e));
            }
            function ji(t, e, n, i) {
                var r = Fa(t) ? oe : Be;
                return r(t, fn(e, i, 4), n, arguments.length < 3, ye);
            }
            function Di(t, e, n, i) {
                var r = Fa(t) ? ae : Be;
                return r(t, fn(e, i, 4), n, arguments.length < 3, be);
            }
            function Oi(t, e, n) {
                var i = Fa(t) ? ee : $e;
                return (
                    (e = fn(e, n, 3)),
                    i(t, function (t, n, i) {
                        return !e(t, n, i);
                    })
                );
            }
            function Li(t, e, n) {
                if (n ? xn(t, e, n) : null == e) {
                    t = Rn(t);
                    var i = t.length;
                    return i > 0 ? t[Me(0, i - 1)] : $;
                }
                var r = Ni(t);
                return (r.length = va(0 > e ? 0 : +e || 0, r.length)), r;
            }
            function Ni(t) {
                t = Rn(t);
                for (var e = -1, n = t.length, i = Ro(n); ++e < n; ) {
                    var r = Me(0, e);
                    e != r && (i[e] = i[r]), (i[r] = t[e]);
                }
                return i;
            }
            function qi(t) {
                var e = t ? t.length : 0;
                return kn(e) ? e : Wa(t).length;
            }
            function Ui(t, e, n) {
                var i = Fa(t) ? se : He;
                return ("function" != typeof e || "undefined" != typeof n) && (e = fn(e, n, 3)), i(t, e);
            }
            function Mi(t, e, i) {
                var r = -1,
                    o = t ? t.length : 0,
                    a = kn(o) ? Ro(o) : [];
                return (
                    i && xn(t, e, i) && (e = null),
                    (e = fn(e, i, 3)),
                    ye(t, function (t, n, i) {
                        a[++r] = { criteria: e(t, n, i), index: r, value: t };
                    }),
                    n(a, s)
                );
            }
            function Bi(t) {
                var e = arguments;
                e.length > 3 && xn(e[1], e[2], e[3]) && (e = [t, e[1]]);
                var i = -1,
                    r = t ? t.length : 0,
                    o = ke(e, !1, !1, 1),
                    a = kn(r) ? Ro(r) : [];
                return (
                    ye(t, function (t, e, n) {
                        for (var r = o.length, s = Ro(r); r--; ) s[r] = null == t ? $ : t[o[r]];
                        a[++i] = { criteria: s, index: i, value: t };
                    }),
                    n(a, l)
                );
            }
            function Fi(t, e) {
                return Si(t, xo(e));
            }
            function Hi(t, e) {
                if (!br(e)) {
                    if (!br(t)) throw new Mo(U);
                    var n = t;
                    (t = e), (e = n);
                }
                return (
                    (t = ha((t = +t)) ? t : 0),
                    function () {
                        return --t < 1 ? e.apply(this, arguments) : void 0;
                    }
                );
            }
            function Vi(t, e, n) {
                return n && xn(t, e, n) && (e = null), (e = t && null == e ? t.length : ma(+e || 0, 0)), cn(t, R, null, null, null, null, e);
            }
            function zi(t, e) {
                var n;
                if (!br(e)) {
                    if (!br(t)) throw new Mo(U);
                    var i = t;
                    (t = e), (e = i);
                }
                return function () {
                    return --t > 0 ? (n = e.apply(this, arguments)) : (e = null), n;
                };
            }
            function Wi(t, e) {
                var n = k;
                if (arguments.length > 2) {
                    var i = Fe(arguments, 2),
                        r = m(i, Wi.placeholder);
                    n |= E;
                }
                return cn(t, n, e, i, r);
            }
            function Yi(t) {
                return he(t, arguments.length > 1 ? ke(arguments, !1, !1, 1) : Mr(t));
            }
            function Gi(t, e) {
                var n = k | S;
                if (arguments.length > 2) {
                    var i = Fe(arguments, 2),
                        r = m(i, Gi.placeholder);
                    n |= E;
                }
                return cn(e, n, t, i, r);
            }
            function Xi(t, e, n) {
                n && xn(t, e, n) && (e = null);
                var i = cn(t, _, null, null, null, null, null, e);
                return (i.placeholder = Xi.placeholder), i;
            }
            function Ji(t, e, n) {
                n && xn(t, e, n) && (e = null);
                var i = cn(t, T, null, null, null, null, null, e);
                return (i.placeholder = Ji.placeholder), i;
            }
            function Ki(t, e, n) {
                function i() {
                    p && ta(p), l && ta(l), (l = p = h = $);
                }
                function r() {
                    var n = e - (Ba() - u);
                    if (0 >= n || n > e) {
                        l && ta(l);
                        var i = h;
                        (l = p = h = $), i && ((f = Ba()), (c = t.apply(d, s)), p || l || (s = d = null));
                    } else p = aa(r, n);
                }
                function o() {
                    p && ta(p), (l = p = h = $), (v || m !== e) && ((f = Ba()), (c = t.apply(d, s)), p || l || (s = d = null));
                }
                function a() {
                    if (((s = arguments), (u = Ba()), (d = this), (h = v && (p || !g)), m === !1)) var n = g && !p;
                    else {
                        l || g || (f = u);
                        var i = m - (u - f),
                            a = 0 >= i || i > m;
                        a ? (l && (l = ta(l)), (f = u), (c = t.apply(d, s))) : l || (l = aa(o, i));
                    }
                    return a && p ? (p = ta(p)) : p || e === m || (p = aa(r, e)), n && ((a = !0), (c = t.apply(d, s))), !a || p || l || (s = d = null), c;
                }
                var s,
                    l,
                    c,
                    u,
                    d,
                    p,
                    h,
                    f = 0,
                    m = !1,
                    v = !0;
                if (!br(t)) throw new Mo(U);
                if (((e = 0 > e ? 0 : e), n === !0)) {
                    var g = !0;
                    v = !1;
                } else wr(n) && ((g = n.leading), (m = "maxWait" in n && ma(+n.maxWait || 0, e)), (v = "trailing" in n ? n.trailing : v));
                return (a.cancel = i), a;
            }
            function Qi(t) {
                return ve(t, 1, arguments, 1);
            }
            function Zi(t, e) {
                return ve(t, e, arguments, 2);
            }
            function tr() {
                var t = arguments,
                    e = t.length;
                if (!e) return function () {};
                if (!te(t, br)) throw new Mo(U);
                return function () {
                    for (var n = 0, i = t[n].apply(this, arguments); ++n < e; ) i = t[n].call(this, i);
                    return i;
                };
            }
            function er() {
                var t = arguments,
                    e = t.length - 1;
                if (0 > e) return function () {};
                if (!te(t, br)) throw new Mo(U);
                return function () {
                    for (var n = e, i = t[n].apply(this, arguments); n--; ) i = t[n].call(this, i);
                    return i;
                };
            }
            function nr(t, e) {
                if (!br(t) || (e && !br(e))) throw new Mo(U);
                var n = function () {
                    var i = n.cache,
                        r = e ? e.apply(this, arguments) : arguments[0];
                    if (i.has(r)) return i.get(r);
                    var o = t.apply(this, arguments);
                    return i.set(r, o), o;
                };
                return (n.cache = new nr.Cache()), n;
            }
            function ir(t) {
                if (!br(t)) throw new Mo(U);
                return function () {
                    return !t.apply(this, arguments);
                };
            }
            function rr(t) {
                return zi(t, 2);
            }
            function or(t) {
                var e = Fe(arguments, 1),
                    n = m(e, or.placeholder);
                return cn(t, E, null, e, n);
            }
            function ar(t) {
                var e = Fe(arguments, 1),
                    n = m(e, ar.placeholder);
                return cn(t, A, null, e, n);
            }
            function sr(t) {
                var e = ke(arguments, !1, !1, 1);
                return cn(t, I, null, null, null, e);
            }
            function lr(t, e, n) {
                var i = !0,
                    r = !0;
                if (!br(t)) throw new Mo(U);
                return n === !1 ? (i = !1) : wr(n) && ((i = "leading" in n ? !!n.leading : i), (r = "trailing" in n ? !!n.trailing : r)), (Nt.leading = i), (Nt.maxWait = +e), (Nt.trailing = r), Ki(t, e, Nt);
            }
            function cr(t, e) {
                return (e = null == e ? $o : e), cn(e, E, null, [t], []);
            }
            function ur(t, e, n, i) {
                return "boolean" != typeof e && null != e && ((i = n), (n = xn(t, e, i) ? null : e), (e = !1)), (n = "function" == typeof n && Xe(n, i, 1)), me(t, e, n);
            }
            function dr(t, e, n) {
                return (e = "function" == typeof e && Xe(e, n, 1)), me(t, !0, e);
            }
            function pr(t) {
                var e = h(t) ? t.length : $;
                return (kn(e) && Go.call(t) == B) || !1;
            }
            function hr(t) {
                return t === !0 || t === !1 || (h(t) && Go.call(t) == H) || !1;
            }
            function fr(t) {
                return (h(t) && Go.call(t) == V) || !1;
            }
            function mr(t) {
                return (t && 1 === t.nodeType && h(t) && Go.call(t).indexOf("Element") > -1) || !1;
            }
            function vr(t) {
                if (null == t) return !0;
                var e = t.length;
                return kn(e) && (Fa(t) || Tr(t) || pr(t) || (h(t) && br(t.splice))) ? !e : !Wa(t).length;
            }
            function gr(t, e, n, i) {
                if (((n = "function" == typeof n && Xe(n, i, 3)), !n && Sn(t) && Sn(e))) return t === e;
                var r = n ? n(t, e) : $;
                return "undefined" == typeof r ? Re(t, e, n) : !!r;
            }
            function yr(t) {
                return (h(t) && "string" == typeof t.message && Go.call(t) == z) || !1;
            }
            function br(t) {
                return "function" == typeof t || !1;
            }
            function wr(t) {
                var e = typeof t;
                return "function" == e || (t && "object" == e) || !1;
            }
            function $r(t, e, n, i) {
                var r = Wa(e),
                    o = r.length;
                if (((n = "function" == typeof n && Xe(n, i, 3)), !n && 1 == o)) {
                    var a = r[0],
                        s = e[a];
                    if (Sn(s)) return null != t && s === t[a] && Wo.call(t, a);
                }
                for (var l = Ro(o), c = Ro(o); o--; ) (s = l[o] = e[r[o]]), (c[o] = Sn(s));
                return je(t, r, l, c, n);
            }
            function xr(t) {
                return Cr(t) && t != +t;
            }
            function kr(t) {
                return null == t ? !1 : Go.call(t) == W ? Jo.test(Vo.call(t)) : (h(t) && St.test(t)) || !1;
            }
            function Sr(t) {
                return null === t;
            }
            function Cr(t) {
                return "number" == typeof t || (h(t) && Go.call(t) == G) || !1;
            }
            function _r(t) {
                return (h(t) && Go.call(t) == J) || !1;
            }
            function Tr(t) {
                return "string" == typeof t || (h(t) && Go.call(t) == Q) || !1;
            }
            function Er(t) {
                return (h(t) && kn(t.length) && Ot[Go.call(t)]) || !1;
            }
            function Ar(t) {
                return "undefined" == typeof t;
            }
            function Ir(t) {
                var e = t ? t.length : 0;
                return kn(e) ? (e ? Kt(t) : []) : Jr(t);
            }
            function Rr(t) {
                return pe(t, Hr(t));
            }
            function Pr(t, e, n) {
                var i = Ia(t);
                return n && xn(t, e, n) && (e = null), e ? pe(e, i, Wa(e)) : i;
            }
            function jr(t) {
                if (null == t) return t;
                var e = Kt(arguments);
                return e.push(le), za.apply($, e);
            }
            function Dr(t, e, n) {
                return (e = fn(e, n, 3)), xe(t, e, Te, !0);
            }
            function Or(t, e, n) {
                return (e = fn(e, n, 3)), xe(t, e, Ee, !0);
            }
            function Lr(t, e, n) {
                return ("function" != typeof e || "undefined" != typeof n) && (e = Xe(e, n, 3)), Se(t, e, Hr);
            }
            function Nr(t, e, n) {
                return (e = Xe(e, n, 3)), Ce(t, e, Hr);
            }
            function qr(t, e, n) {
                return ("function" != typeof e || "undefined" != typeof n) && (e = Xe(e, n, 3)), Te(t, e);
            }
            function Ur(t, e, n) {
                return (e = Xe(e, n, 3)), Ce(t, e, Wa);
            }
            function Mr(t) {
                return Ae(t, Hr(t));
            }
            function Br(t, e) {
                return t ? Wo.call(t, e) : !1;
            }
            function Fr(t, e, n) {
                n && xn(t, e, n) && (e = null);
                for (var i = -1, r = Wa(t), o = r.length, a = {}; ++i < o; ) {
                    var s = r[i],
                        l = t[s];
                    e ? (Wo.call(a, l) ? a[l].push(s) : (a[l] = [s])) : (a[l] = s);
                }
                return a;
            }
            function Hr(t) {
                if (null == t) return [];
                wr(t) || (t = No(t));
                var e = t.length;
                e = (e && kn(e) && (Fa(t) || (Aa.nonEnumArgs && pr(t))) && e) || 0;
                for (var n = t.constructor, i = -1, r = "function" == typeof n && n.prototype == t, o = Ro(e), a = e > 0; ++i < e; ) o[i] = i + "";
                for (var s in t) (a && $n(s, e)) || ("constructor" == s && (r || !Wo.call(t, s))) || o.push(s);
                return o;
            }
            function Vr(t, e, n) {
                var i = {};
                return (
                    (e = fn(e, n, 3)),
                    Te(t, function (t, n, r) {
                        i[n] = e(t, n, r);
                    }),
                    i
                );
            }
            function zr(t, e, n) {
                if (null == t) return {};
                if ("function" != typeof e) {
                    var i = ne(ke(arguments, !1, !1, 1), Uo);
                    return _n(t, ge(Hr(t), i));
                }
                return (
                    (e = Xe(e, n, 3)),
                    Tn(t, function (t, n, i) {
                        return !e(t, n, i);
                    })
                );
            }
            function Wr(t) {
                for (var e = -1, n = Wa(t), i = n.length, r = Ro(i); ++e < i; ) {
                    var o = n[e];
                    r[e] = [o, t[o]];
                }
                return r;
            }
            function Yr(t, e, n) {
                return null == t ? {} : "function" == typeof e ? Tn(t, Xe(e, n, 3)) : _n(t, ke(arguments, !1, !1, 1));
            }
            function Gr(t, e, n) {
                var i = null == t ? $ : t[e];
                return "undefined" == typeof i && (i = n), br(i) ? i.call(t) : i;
            }
            function Xr(t, e, n, i) {
                var r = Fa(t) || Er(t);
                if (((e = fn(e, i, 4)), null == n))
                    if (r || wr(t)) {
                        var o = t.constructor;
                        n = r ? (Fa(t) ? new o() : []) : Ia("function" == typeof o && o.prototype);
                    } else n = {};
                return (
                    (r ? Qt : Te)(t, function (t, i, r) {
                        return e(n, t, i, r);
                    }),
                    n
                );
            }
            function Jr(t) {
                return ze(t, Wa(t));
            }
            function Kr(t) {
                return ze(t, Hr(t));
            }
            function Qr(t, e, n) {
                n && xn(t, e, n) && (e = n = null);
                var i = null == t,
                    r = null == e;
                if (
                    (null == n && (r && "boolean" == typeof t ? ((n = t), (t = 1)) : "boolean" == typeof e && ((n = e), (r = !0))), i && r && ((e = 1), (r = !1)), (t = +t || 0), r ? ((e = t), (t = 0)) : (e = +e || 0), n || t % 1 || e % 1)
                ) {
                    var o = wa();
                    return va(t + o * (e - t + parseFloat("1e-" + ((o + "").length - 1))), e);
                }
                return Me(t, e);
            }
            function Zr(t) {
                return (t = i(t)), t && t.charAt(0).toUpperCase() + t.slice(1);
            }
            function to(t) {
                return (t = i(t)), t && t.replace(Ct, c);
            }
            function eo(t, e, n) {
                (t = i(t)), (e += "");
                var r = t.length;
                return (n = ("undefined" == typeof n ? r : va(0 > n ? 0 : +n || 0, r)) - e.length), n >= 0 && t.indexOf(e, n) == n;
            }
            function no(t) {
                return (t = i(t)), t && vt.test(t) ? t.replace(ft, u) : t;
            }
            function io(t) {
                return (t = i(t)), t && Et.test(t) ? t.replace(Tt, "\\$&") : t;
            }
            function ro(t, e, n) {
                (t = i(t)), (e = +e);
                var r = t.length;
                if (r >= e || !ha(e)) return t;
                var o = (e - r) / 2,
                    a = ea(o),
                    s = Zo(o);
                return (n = sn("", s, n)), n.slice(0, a) + t + n;
            }
            function oo(t, e, n) {
                return (t = i(t)), t && sn(t, e, n) + t;
            }
            function ao(t, e, n) {
                return (t = i(t)), t && t + sn(t, e, n);
            }
            function so(t, e, n) {
                return n && xn(t, e, n) && (e = 0), ba(t, e);
            }
            function lo(t, e) {
                var n = "";
                if (((t = i(t)), (e = +e), 1 > e || !t || !ha(e))) return n;
                do e % 2 && (n += t), (e = ea(e / 2)), (t += t);
                while (e);
                return n;
            }
            function co(t, e, n) {
                return (t = i(t)), (n = null == n ? 0 : va(0 > n ? 0 : +n || 0, t.length)), t.lastIndexOf(e, n) == n;
            }
            function uo(t, e, n) {
                var r = Y.templateSettings;
                n && xn(t, e, n) && (e = n = null), (t = i(t)), (e = ue(ue({}, n || e), r, ce));
                var o,
                    a,
                    s = ue(ue({}, e.imports), r.imports, ce),
                    l = Wa(s),
                    c = ze(s, l),
                    u = 0,
                    p = e.interpolate || _t,
                    h = "__p += '",
                    f = qo((e.escape || _t).source + "|" + p.source + "|" + (p === bt ? wt : _t).source + "|" + (e.evaluate || _t).source + "|$", "g"),
                    m = "//# sourceURL=" + ("sourceURL" in e ? e.sourceURL : "lodash.templateSources[" + ++Dt + "]") + "\n";
                t.replace(f, function (e, n, i, r, s, l) {
                    return (
                        i || (i = r),
                        (h += t.slice(u, l).replace(It, d)),
                        n && ((o = !0), (h += "' +\n__e(" + n + ") +\n'")),
                        s && ((a = !0), (h += "';\n" + s + ";\n__p += '")),
                        i && (h += "' +\n((__t = (" + i + ")) == null ? '' : __t) +\n'"),
                        (u = l + e.length),
                        e
                    );
                }),
                    (h += "';\n");
                var v = e.variable;
                v || (h = "with (obj) {\n" + h + "\n}\n"),
                    (h = (a ? h.replace(ut, "") : h).replace(dt, "$1").replace(pt, "$1;")),
                    (h =
                        "function(" +
                        (v || "obj") +
                        ") {\n" +
                        (v ? "" : "obj || (obj = {});\n") +
                        "var __t, __p = ''" +
                        (o ? ", __e = _.escape" : "") +
                        (a ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") +
                        h +
                        "return __p\n}");
                var g = yo(function () {
                    return Do(l, m + "return " + h).apply($, c);
                });
                if (((g.source = h), yr(g))) throw g;
                return g;
            }
            function po(t, e, n) {
                var r = t;
                return (t = i(t)) ? ((n ? xn(r, e, n) : null == e) ? t.slice(g(t), y(t) + 1) : ((e = i(e)), t.slice(o(t, e), a(t, e) + 1))) : t;
            }
            function ho(t, e, n) {
                var r = t;
                return (t = i(t)), t ? ((n ? xn(r, e, n) : null == e) ? t.slice(g(t)) : t.slice(o(t, i(e)))) : t;
            }
            function fo(t, e, n) {
                var r = t;
                return (t = i(t)), t ? ((n ? xn(r, e, n) : null == e) ? t.slice(0, y(t) + 1) : t.slice(0, a(t, i(e)) + 1)) : t;
            }
            function mo(t, e, n) {
                n && xn(t, e, n) && (e = null);
                var r = P,
                    o = j;
                if (null != e)
                    if (wr(e)) {
                        var a = "separator" in e ? e.separator : a;
                        (r = "length" in e ? +e.length || 0 : r), (o = "omission" in e ? i(e.omission) : o);
                    } else r = +e || 0;
                if (((t = i(t)), r >= t.length)) return t;
                var s = r - o.length;
                if (1 > s) return o;
                var l = t.slice(0, s);
                if (null == a) return l + o;
                if (_r(a)) {
                    if (t.slice(s).search(a)) {
                        var c,
                            u,
                            d = t.slice(0, s);
                        for (a.global || (a = qo(a.source, ($t.exec(a) || "") + "g")), a.lastIndex = 0; (c = a.exec(d)); ) u = c.index;
                        l = l.slice(0, null == u ? s : u);
                    }
                } else if (t.indexOf(a, s) != s) {
                    var p = l.lastIndexOf(a);
                    p > -1 && (l = l.slice(0, p));
                }
                return l + o;
            }
            function vo(t) {
                return (t = i(t)), t && mt.test(t) ? t.replace(ht, b) : t;
            }
            function go(t, e, n) {
                return n && xn(t, e, n) && (e = null), (t = i(t)), t.match(e || Rt) || [];
            }
            function yo(t) {
                try {
                    return t();
                } catch (e) {
                    return yr(e) ? e : jo(e);
                }
            }
            function bo(t, e, n) {
                return n && xn(t, e, n) && (e = null), fe(t, e);
            }
            function wo(t) {
                return function () {
                    return t;
                };
            }
            function $o(t) {
                return t;
            }
            function xo(t) {
                return Oe(t, !0);
            }
            function ko(t, e, n) {
                if (null == n) {
                    var i = wr(e),
                        r = i && Wa(e),
                        o = r && r.length && Ae(e, r);
                    (o ? o.length : i) || ((o = !1), (n = e), (e = t), (t = this));
                }
                o || (o = Ae(e, Wa(e)));
                var a = !0,
                    s = -1,
                    l = br(t),
                    c = o.length;
                n === !1 ? (a = !1) : wr(n) && "chain" in n && (a = n.chain);
                for (; ++s < c; ) {
                    var u = o[s],
                        d = e[u];
                    (t[u] = d),
                        l &&
                            (t.prototype[u] = (function (e) {
                                return function () {
                                    var n = this.__chain__;
                                    if (a || n) {
                                        var i = t(this.__wrapped__);
                                        return (i.__actions__ = Kt(this.__actions__)).push({ func: e, args: arguments, thisArg: t }), (i.__chain__ = n), i;
                                    }
                                    var r = [this.value()];
                                    return ia.apply(r, arguments), e.apply(t, r);
                                };
                            })(d));
                }
                return t;
            }
            function So() {
                return (f._ = Xo), this;
            }
            function Co() {}
            function _o(t) {
                return qe(t + "");
            }
            function To(t) {
                return function (e) {
                    return null == t ? $ : t[e];
                };
            }
            function Eo(t, e, n) {
                n && xn(t, e, n) && (e = n = null), (t = +t || 0), (n = null == n ? 1 : +n || 0), null == e ? ((e = t), (t = 0)) : (e = +e || 0);
                for (var i = -1, r = ma(Zo((e - t) / (n || 1)), 0), o = Ro(r); ++i < r; ) (o[i] = t), (t += n);
                return o;
            }
            function Ao(t, e, n) {
                if (((t = +t), 1 > t || !ha(t))) return [];
                var i = -1,
                    r = Ro(va(t, ka));
                for (e = Xe(e, n, 1); ++i < t; ) ka > i ? (r[i] = e(i)) : e(i);
                return r;
            }
            function Io(t) {
                var e = ++Yo;
                return i(t) + e;
            }
            f = f ? Gt.defaults(Ht.Object(), f, Gt.pick(Ht, jt)) : Ht;
            var Ro = f.Array,
                Po = f.Date,
                jo = f.Error,
                Do = f.Function,
                Oo = f.Math,
                Lo = f.Number,
                No = f.Object,
                qo = f.RegExp,
                Uo = f.String,
                Mo = f.TypeError,
                Bo = Ro.prototype,
                Fo = No.prototype,
                Ho = (Ho = f.window) && Ho.document,
                Vo = Do.prototype.toString,
                zo = qe("length"),
                Wo = Fo.hasOwnProperty,
                Yo = 0,
                Go = Fo.toString,
                Xo = f._,
                Jo = qo("^" + io(Go).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
                Ko = kr((Ko = f.ArrayBuffer)) && Ko,
                Qo = kr((Qo = Ko && new Ko(0).slice)) && Qo,
                Zo = Oo.ceil,
                ta = f.clearTimeout,
                ea = Oo.floor,
                na = kr((na = No.getPrototypeOf)) && na,
                ia = Bo.push,
                ra = Fo.propertyIsEnumerable,
                oa = kr((oa = f.Set)) && oa,
                aa = f.setTimeout,
                sa = Bo.splice,
                la = kr((la = f.Uint8Array)) && la,
                ca = (Bo.unshift, kr((ca = f.WeakMap)) && ca),
                ua = (function () {
                    try {
                        var t = kr((t = f.Float64Array)) && t,
                            e = new t(new Ko(10), 0, 1) && t;
                    } catch (n) {}
                    return e;
                })(),
                da = kr((da = Ro.isArray)) && da,
                pa = kr((pa = No.create)) && pa,
                ha = f.isFinite,
                fa = kr((fa = No.keys)) && fa,
                ma = Oo.max,
                va = Oo.min,
                ga = kr((ga = Po.now)) && ga,
                ya = kr((ya = Lo.isFinite)) && ya,
                ba = f.parseInt,
                wa = Oo.random,
                $a = Lo.NEGATIVE_INFINITY,
                xa = Lo.POSITIVE_INFINITY,
                ka = Oo.pow(2, 32) - 1,
                Sa = ka - 1,
                Ca = ka >>> 1,
                _a = ua ? ua.BYTES_PER_ELEMENT : 0,
                Ta = Oo.pow(2, 53) - 1,
                Ea = ca && new ca(),
                Aa = (Y.support = {});
            !(function (t) {
                (Aa.funcDecomp = !kr(f.WinRTError) && At.test(w)), (Aa.funcNames = "string" == typeof Do.name);
                try {
                    Aa.dom = 11 === Ho.createDocumentFragment().nodeType;
                } catch (e) {
                    Aa.dom = !1;
                }
                try {
                    Aa.nonEnumArgs = !ra.call(arguments, 1);
                } catch (e) {
                    Aa.nonEnumArgs = !0;
                }
            })(0, 0),
                (Y.templateSettings = { escape: gt, evaluate: yt, interpolate: bt, variable: "", imports: { _: Y } });
            var Ia = (function () {
                    function t() {}
                    return function (e) {
                        if (wr(e)) {
                            t.prototype = e;
                            var n = new t();
                            t.prototype = null;
                        }
                        return n || f.Object();
                    };
                })(),
                Ra = Ea
                    ? function (t, e) {
                          return Ea.set(t, e), t;
                      }
                    : $o;
            Qo ||
                (Je =
                    Ko && la
                        ? function (t) {
                              var e = t.byteLength,
                                  n = ua ? ea(e / _a) : 0,
                                  i = n * _a,
                                  r = new Ko(e);
                              if (n) {
                                  var o = new ua(r, 0, n);
                                  o.set(new ua(t, 0, n));
                              }
                              return e != i && ((o = new la(r, i)), o.set(new la(t, i))), r;
                          }
                        : wo(null));
            var Pa =
                    pa && oa
                        ? function (t) {
                              return new Yt(t);
                          }
                        : wo(null),
                ja = Ea
                    ? function (t) {
                          return Ea.get(t);
                      }
                    : Co,
                Da = (function () {
                    var t = 0,
                        e = 0;
                    return function (n, i) {
                        var r = Ba(),
                            o = O - (r - e);
                        if (((e = r), o > 0)) {
                            if (++t >= D) return n;
                        } else t = 0;
                        return Ra(n, i);
                    };
                })(),
                Oa = Ze(function (t, e, n) {
                    Wo.call(t, n) ? ++t[n] : (t[n] = 1);
                }),
                La = Ze(function (t, e, n) {
                    Wo.call(t, n) ? t[n].push(e) : (t[n] = [e]);
                }),
                Na = Ze(function (t, e, n) {
                    t[n] = e;
                }),
                qa = on(ie),
                Ua = on(re, !0),
                Ma = Ze(
                    function (t, e, n) {
                        t[n ? 0 : 1].push(e);
                    },
                    function () {
                        return [[], []];
                    }
                ),
                Ba =
                    ga ||
                    function () {
                        return new Po().getTime();
                    },
                Fa =
                    da ||
                    function (t) {
                        return (h(t) && kn(t.length) && Go.call(t) == F) || !1;
                    };
            Aa.dom ||
                (mr = function (t) {
                    return (t && 1 === t.nodeType && h(t) && !Va(t)) || !1;
                });
            var Ha =
                ya ||
                function (t) {
                    return "number" == typeof t && ha(t);
                };
            (br(/x/) || (la && !br(la))) &&
                (br = function (t) {
                    return Go.call(t) == W;
                });
            var Va = na
                    ? function (t) {
                          if (!t || Go.call(t) != X) return !1;
                          var e = t.valueOf,
                              n = kr(e) && (n = na(e)) && na(n);
                          return n ? t == n || na(t) == n : An(t);
                      }
                    : An,
                za = tn(ue),
                Wa = fa
                    ? function (t) {
                          if (t)
                              var e = t.constructor,
                                  n = t.length;
                          return ("function" == typeof e && e.prototype === t) || ("function" != typeof t && n && kn(n)) ? In(t) : wr(t) ? fa(t) : [];
                      }
                    : In,
                Ya = tn(Le),
                Ga = nn(function (t, e, n) {
                    return (e = e.toLowerCase()), n ? t + e.charAt(0).toUpperCase() + e.slice(1) : e;
                }),
                Xa = nn(function (t, e, n) {
                    return t + (n ? "-" : "") + e.toLowerCase();
                });
            8 != ba(Pt + "08") &&
                (so = function (t, e, n) {
                    return (n ? xn(t, e, n) : null == e) ? (e = 0) : e && (e = +e), (t = po(t)), ba(t, e || (kt.test(t) ? 16 : 10));
                });
            var Ja = nn(function (t, e, n) {
                return t + (n ? "_" : "") + e.toLowerCase();
            });
            return (
                (K.prototype = Y.prototype),
                (Bt.prototype["delete"] = Ft),
                (Bt.prototype.get = Vt),
                (Bt.prototype.has = zt),
                (Bt.prototype.set = Wt),
                (Yt.prototype.push = Jt),
                (nr.Cache = Bt),
                (Y.after = Hi),
                (Y.ary = Vi),
                (Y.assign = za),
                (Y.at = $i),
                (Y.before = zi),
                (Y.bind = Wi),
                (Y.bindAll = Yi),
                (Y.bindKey = Gi),
                (Y.callback = bo),
                (Y.chain = fi),
                (Y.chunk = jn),
                (Y.compact = Dn),
                (Y.constant = wo),
                (Y.countBy = Oa),
                (Y.create = Pr),
                (Y.curry = Xi),
                (Y.curryRight = Ji),
                (Y.debounce = Ki),
                (Y.defaults = jr),
                (Y.defer = Qi),
                (Y.delay = Zi),
                (Y.difference = On),
                (Y.drop = Ln),
                (Y.dropRight = Nn),
                (Y.dropRightWhile = qn),
                (Y.dropWhile = Un),
                (Y.filter = Si),
                (Y.flatten = Hn),
                (Y.flattenDeep = Vn),
                (Y.flow = tr),
                (Y.flowRight = er),
                (Y.forEach = Ei),
                (Y.forEachRight = Ai),
                (Y.forIn = Lr),
                (Y.forInRight = Nr),
                (Y.forOwn = qr),
                (Y.forOwnRight = Ur),
                (Y.functions = Mr),
                (Y.groupBy = La),
                (Y.indexBy = Na),
                (Y.initial = Wn),
                (Y.intersection = Yn),
                (Y.invert = Fr),
                (Y.invoke = Ii),
                (Y.keys = Wa),
                (Y.keysIn = Hr),
                (Y.map = Ri),
                (Y.mapValues = Vr),
                (Y.matches = xo),
                (Y.memoize = nr),
                (Y.merge = Ya),
                (Y.mixin = ko),
                (Y.negate = ir),
                (Y.omit = zr),
                (Y.once = rr),
                (Y.pairs = Wr),
                (Y.partial = or),
                (Y.partialRight = ar),
                (Y.partition = Ma),
                (Y.pick = Yr),
                (Y.pluck = Pi),
                (Y.property = _o),
                (Y.propertyOf = To),
                (Y.pull = Jn),
                (Y.pullAt = Kn),
                (Y.range = Eo),
                (Y.rearg = sr),
                (Y.reject = Oi),
                (Y.remove = Qn),
                (Y.rest = Zn),
                (Y.shuffle = Ni),
                (Y.slice = ti),
                (Y.sortBy = Mi),
                (Y.sortByAll = Bi),
                (Y.take = ii),
                (Y.takeRight = ri),
                (Y.takeRightWhile = oi),
                (Y.takeWhile = ai),
                (Y.tap = mi),
                (Y.throttle = lr),
                (Y.thru = vi),
                (Y.times = Ao),
                (Y.toArray = Ir),
                (Y.toPlainObject = Rr),
                (Y.transform = Xr),
                (Y.union = si),
                (Y.uniq = li),
                (Y.unzip = ci),
                (Y.values = Jr),
                (Y.valuesIn = Kr),
                (Y.where = Fi),
                (Y.without = ui),
                (Y.wrap = cr),
                (Y.xor = di),
                (Y.zip = pi),
                (Y.zipObject = hi),
                (Y.backflow = er),
                (Y.collect = Ri),
                (Y.compose = er),
                (Y.each = Ei),
                (Y.eachRight = Ai),
                (Y.extend = za),
                (Y.iteratee = bo),
                (Y.methods = Mr),
                (Y.object = hi),
                (Y.select = Si),
                (Y.tail = Zn),
                (Y.unique = li),
                ko(Y, Y),
                (Y.attempt = yo),
                (Y.camelCase = Ga),
                (Y.capitalize = Zr),
                (Y.clone = ur),
                (Y.cloneDeep = dr),
                (Y.deburr = to),
                (Y.endsWith = eo),
                (Y.escape = no),
                (Y.escapeRegExp = io),
                (Y.every = ki),
                (Y.find = Ci),
                (Y.findIndex = Mn),
                (Y.findKey = Dr),
                (Y.findLast = _i),
                (Y.findLastIndex = Bn),
                (Y.findLastKey = Or),
                (Y.findWhere = Ti),
                (Y.first = Fn),
                (Y.has = Br),
                (Y.identity = $o),
                (Y.includes = xi),
                (Y.indexOf = zn),
                (Y.isArguments = pr),
                (Y.isArray = Fa),
                (Y.isBoolean = hr),
                (Y.isDate = fr),
                (Y.isElement = mr),
                (Y.isEmpty = vr),
                (Y.isEqual = gr),
                (Y.isError = yr),
                (Y.isFinite = Ha),
                (Y.isFunction = br),
                (Y.isMatch = $r),
                (Y.isNaN = xr),
                (Y.isNative = kr),
                (Y.isNull = Sr),
                (Y.isNumber = Cr),
                (Y.isObject = wr),
                (Y.isPlainObject = Va),
                (Y.isRegExp = _r),
                (Y.isString = Tr),
                (Y.isTypedArray = Er),
                (Y.isUndefined = Ar),
                (Y.kebabCase = Xa),
                (Y.last = Gn),
                (Y.lastIndexOf = Xn),
                (Y.max = qa),
                (Y.min = Ua),
                (Y.noConflict = So),
                (Y.noop = Co),
                (Y.now = Ba),
                (Y.pad = ro),
                (Y.padLeft = oo),
                (Y.padRight = ao),
                (Y.parseInt = so),
                (Y.random = Qr),
                (Y.reduce = ji),
                (Y.reduceRight = Di),
                (Y.repeat = lo),
                (Y.result = Gr),
                (Y.runInContext = w),
                (Y.size = qi),
                (Y.snakeCase = Ja),
                (Y.some = Ui),
                (Y.sortedIndex = ei),
                (Y.sortedLastIndex = ni),
                (Y.startsWith = co),
                (Y.template = uo),
                (Y.trim = po),
                (Y.trimLeft = ho),
                (Y.trimRight = fo),
                (Y.trunc = mo),
                (Y.unescape = vo),
                (Y.uniqueId = Io),
                (Y.words = go),
                (Y.all = ki),
                (Y.any = Ui),
                (Y.contains = xi),
                (Y.detect = Ci),
                (Y.foldl = ji),
                (Y.foldr = Di),
                (Y.head = Fn),
                (Y.include = xi),
                (Y.inject = ji),
                ko(
                    Y,
                    (function () {
                        var t = {};
                        return (
                            Te(Y, function (e, n) {
                                Y.prototype[n] || (t[n] = e);
                            }),
                            t
                        );
                    })(),
                    !1
                ),
                (Y.sample = Li),
                (Y.prototype.sample = function (t) {
                    return this.__chain__ || null != t
                        ? this.thru(function (e) {
                              return Li(e, t);
                          })
                        : Li(this.value());
                }),
                (Y.VERSION = x),
                Qt(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function (t) {
                    Y[t].placeholder = Y;
                }),
                Qt(["filter", "map", "takeWhile"], function (t, e) {
                    var n = e == L;
                    Z.prototype[t] = function (t, i) {
                        var r = this.clone(),
                            o = r.filtered,
                            a = r.iteratees || (r.iteratees = []);
                        return (r.filtered = o || n || (e == q && r.dir < 0)), a.push({ iteratee: fn(t, i, 3), type: e }), r;
                    };
                }),
                Qt(["drop", "take"], function (t, e) {
                    var n = t + "Count",
                        i = t + "While";
                    (Z.prototype[t] = function (i) {
                        i = null == i ? 1 : ma(+i || 0, 0);
                        var r = this.clone();
                        if (r.filtered) {
                            var o = r[n];
                            r[n] = e ? va(o, i) : o + i;
                        } else {
                            var a = r.views || (r.views = []);
                            a.push({ size: i, type: t + (r.dir < 0 ? "Right" : "") });
                        }
                        return r;
                    }),
                        (Z.prototype[t + "Right"] = function (e) {
                            return this.reverse()[t](e).reverse();
                        }),
                        (Z.prototype[t + "RightWhile"] = function (t, e) {
                            return this.reverse()[i](t, e).reverse();
                        });
                }),
                Qt(["first", "last"], function (t, e) {
                    var n = "take" + (e ? "Right" : "");
                    Z.prototype[t] = function () {
                        return this[n](1).value()[0];
                    };
                }),
                Qt(["initial", "rest"], function (t, e) {
                    var n = "drop" + (e ? "" : "Right");
                    Z.prototype[t] = function () {
                        return this[n](1);
                    };
                }),
                Qt(["pluck", "where"], function (t, e) {
                    var n = e ? "filter" : "map",
                        i = e ? xo : _o;
                    Z.prototype[t] = function (t) {
                        return this[n](i(t));
                    };
                }),
                (Z.prototype.dropWhile = function (t, e) {
                    var n,
                        i,
                        r = this.dir < 0;
                    return (
                        (t = fn(t, e, 3)),
                        this.filter(function (e, o, a) {
                            return (n = n && (r ? i > o : o > i)), (i = o), n || (n = !t(e, o, a));
                        })
                    );
                }),
                (Z.prototype.reject = function (t, e) {
                    return (
                        (t = fn(t, e, 3)),
                        this.filter(function (e, n, i) {
                            return !t(e, n, i);
                        })
                    );
                }),
                (Z.prototype.slice = function (t, e) {
                    t = null == t ? 0 : +t || 0;
                    var n = 0 > t ? this.takeRight(-t) : this.drop(t);
                    return "undefined" != typeof e && ((e = +e || 0), (n = 0 > e ? n.dropRight(-e) : n.take(e - t))), n;
                }),
                Te(Z.prototype, function (t, e) {
                    var n = /^(?:first|last)$/.test(e);
                    Y.prototype[e] = function () {
                        var i = this.__wrapped__,
                            r = arguments,
                            o = this.__chain__,
                            a = !!this.__actions__.length,
                            s = i instanceof Z,
                            l = s && !a;
                        if (n && !o) return l ? t.call(i) : Y[e](this.value());
                        var c = function (t) {
                            var n = [t];
                            return ia.apply(n, r), Y[e].apply(Y, n);
                        };
                        if (s || Fa(i)) {
                            var u = l ? i : new Z(this),
                                d = t.apply(u, r);
                            if (!n && (a || d.actions)) {
                                var p = d.actions || (d.actions = []);
                                p.push({ func: vi, args: [c], thisArg: Y });
                            }
                            return new K(d, o);
                        }
                        return this.thru(c);
                    };
                }),
                Qt(["concat", "join", "pop", "push", "shift", "sort", "splice", "unshift"], function (t) {
                    var e = Bo[t],
                        n = /^(?:push|sort|unshift)$/.test(t) ? "tap" : "thru",
                        i = /^(?:join|pop|shift)$/.test(t);
                    Y.prototype[t] = function () {
                        var t = arguments;
                        return i && !this.__chain__
                            ? e.apply(this.value(), t)
                            : this[n](function (n) {
                                  return e.apply(n, t);
                              });
                    };
                }),
                (Z.prototype.clone = qt),
                (Z.prototype.reverse = Ut),
                (Z.prototype.value = Mt),
                (Y.prototype.chain = gi),
                (Y.prototype.reverse = yi),
                (Y.prototype.toString = bi),
                (Y.prototype.toJSON = Y.prototype.valueOf = Y.prototype.value = wi),
                (Y.prototype.collect = Y.prototype.map),
                (Y.prototype.head = Y.prototype.first),
                (Y.prototype.select = Y.prototype.filter),
                (Y.prototype.tail = Y.prototype.rest),
                Y
            );
        }
        var $,
            x = "3.0.0",
            k = 1,
            S = 2,
            C = 4,
            _ = 8,
            T = 16,
            E = 32,
            A = 64,
            I = 128,
            R = 256,
            P = 30,
            j = "...",
            D = 150,
            O = 16,
            L = 0,
            N = 1,
            q = 2,
            U = "Expected a function",
            M = "__lodash_placeholder__",
            B = "[object Arguments]",
            F = "[object Array]",
            H = "[object Boolean]",
            V = "[object Date]",
            z = "[object Error]",
            W = "[object Function]",
            Y = "[object Map]",
            G = "[object Number]",
            X = "[object Object]",
            J = "[object RegExp]",
            K = "[object Set]",
            Q = "[object String]",
            Z = "[object WeakMap]",
            tt = "[object ArrayBuffer]",
            et = "[object Float32Array]",
            nt = "[object Float64Array]",
            it = "[object Int8Array]",
            rt = "[object Int16Array]",
            ot = "[object Int32Array]",
            at = "[object Uint8Array]",
            st = "[object Uint8ClampedArray]",
            lt = "[object Uint16Array]",
            ct = "[object Uint32Array]",
            ut = /\b__p \+= '';/g,
            dt = /\b(__p \+=) '' \+/g,
            pt = /(__e\(.*?\)|\b__t\)) \+\n'';/g,
            ht = /&(?:amp|lt|gt|quot|#39|#96);/g,
            ft = /[&<>"'`]/g,
            mt = RegExp(ht.source),
            vt = RegExp(ft.source),
            gt = /<%-([\s\S]+?)%>/g,
            yt = /<%([\s\S]+?)%>/g,
            bt = /<%=([\s\S]+?)%>/g,
            wt = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
            $t = /\w*$/,
            xt = /^\s*function[ \n\r\t]+\w/,
            kt = /^0[xX]/,
            St = /^\[object .+?Constructor\]$/,
            Ct = /[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,
            _t = /($^)/,
            Tt = /[.*+?^${}()|[\]\/\\]/g,
            Et = RegExp(Tt.source),
            At = /\bthis\b/,
            It = /['\n\r\u2028\u2029\\]/g,
            Rt = (function () {
                var t = "[A-Z\\xc0-\\xd6\\xd8-\\xde]",
                    e = "[a-z\\xdf-\\xf6\\xf8-\\xff]+";
                return RegExp(t + "{2,}(?=" + t + e + ")|" + t + "?" + e + "|" + t + "+|[0-9]+", "g");
            })(),
            Pt = " 	\x0B\f \ufeff\n\r\u2028\u2029 ᠎             　",
            jt = [
                "Array",
                "ArrayBuffer",
                "Date",
                "Error",
                "Float32Array",
                "Float64Array",
                "Function",
                "Int8Array",
                "Int16Array",
                "Int32Array",
                "Math",
                "Number",
                "Object",
                "RegExp",
                "Set",
                "String",
                "_",
                "clearTimeout",
                "document",
                "isFinite",
                "parseInt",
                "setTimeout",
                "TypeError",
                "Uint8Array",
                "Uint8ClampedArray",
                "Uint16Array",
                "Uint32Array",
                "WeakMap",
                "window",
                "WinRTError",
            ],
            Dt = -1,
            Ot = {};
        (Ot[et] = Ot[nt] = Ot[it] = Ot[rt] = Ot[ot] = Ot[at] = Ot[st] = Ot[lt] = Ot[ct] = !0), (Ot[B] = Ot[F] = Ot[tt] = Ot[H] = Ot[V] = Ot[z] = Ot[W] = Ot[Y] = Ot[G] = Ot[X] = Ot[J] = Ot[K] = Ot[Q] = Ot[Z] = !1);
        var Lt = {};
        (Lt[B] = Lt[F] = Lt[tt] = Lt[H] = Lt[V] = Lt[et] = Lt[nt] = Lt[it] = Lt[rt] = Lt[ot] = Lt[G] = Lt[X] = Lt[J] = Lt[Q] = Lt[at] = Lt[st] = Lt[lt] = Lt[ct] = !0), (Lt[z] = Lt[W] = Lt[Y] = Lt[K] = Lt[Z] = !1);
        var Nt = { leading: !1, maxWait: 0, trailing: !1 },
            qt = {
                À: "A",
                Á: "A",
                Â: "A",
                Ã: "A",
                Ä: "A",
                Å: "A",
                à: "a",
                á: "a",
                â: "a",
                ã: "a",
                ä: "a",
                å: "a",
                Ç: "C",
                ç: "c",
                Ð: "D",
                ð: "d",
                È: "E",
                É: "E",
                Ê: "E",
                Ë: "E",
                è: "e",
                é: "e",
                ê: "e",
                ë: "e",
                Ì: "I",
                Í: "I",
                Î: "I",
                Ï: "I",
                ì: "i",
                í: "i",
                î: "i",
                ï: "i",
                Ñ: "N",
                ñ: "n",
                Ò: "O",
                Ó: "O",
                Ô: "O",
                Õ: "O",
                Ö: "O",
                Ø: "O",
                ò: "o",
                ó: "o",
                ô: "o",
                õ: "o",
                ö: "o",
                ø: "o",
                Ù: "U",
                Ú: "U",
                Û: "U",
                Ü: "U",
                ù: "u",
                ú: "u",
                û: "u",
                ü: "u",
                Ý: "Y",
                ý: "y",
                ÿ: "y",
                Æ: "Ae",
                æ: "ae",
                Þ: "Th",
                þ: "th",
                ß: "ss",
            },
            Ut = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;", "`": "&#96;" },
            Mt = { "&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'", "&#96;": "`" },
            Bt = { function: !0, object: !0 },
            Ft = { "\\": "\\", "'": "'", "\n": "n", "\r": "r", "\u2028": "u2028", "\u2029": "u2029" },
            Ht = Bt[typeof window] && window !== (this && this.window) ? window : this,
            Vt = Bt[typeof exports] && exports && !exports.nodeType && exports,
            zt = Bt[typeof module] && module && !module.nodeType && module,
            Wt = Vt && zt && "object" == typeof global && global;
        !Wt || (Wt.global !== Wt && Wt.window !== Wt && Wt.self !== Wt) || (Ht = Wt);
        var Yt = zt && zt.exports === Vt && Vt,
            Gt = w();
        "function" == typeof define && "object" == typeof define.amd && define.amd
            ? ((Ht._ = Gt),
              define(function () {
                  return Gt;
              }))
            : Vt && zt
            ? Yt
                ? ((zt.exports = Gt)._ = Gt)
                : (Vt._ = Gt)
            : (Ht._ = Gt);
    }.call(this),
    (function (t, e, n) {
        "use strict";
        function i(t) {
            return function () {
                var e,
                    n = arguments[0];
                for (e = "[" + (t ? t + ":" : "") + n + "] http://errors.angularjs.org/1.3.20/" + (t ? t + "/" : "") + n, n = 1; n < arguments.length; n++) {
                    e = e + (1 == n ? "?" : "&") + "p" + (n - 1) + "=";
                    var i,
                        r = encodeURIComponent;
                    (i = arguments[n]), (i = "function" == typeof i ? i.toString().replace(/ \{[\s\S]*$/, "") : "undefined" == typeof i ? "undefined" : "string" != typeof i ? JSON.stringify(i) : i), (e += r(i));
                }
                return Error(e);
            };
        }
        function r(t) {
            if (null == t || S(t)) return !1;
            var e = "length" in Object(t) && t.length;
            return t.nodeType === Fn && e ? !0 : b(t) || On(t) || 0 === e || ("number" == typeof e && e > 0 && e - 1 in t);
        }
        function o(t, e, n) {
            var i, a;
            if (t)
                if (x(t)) for (i in t) "prototype" == i || "length" == i || "name" == i || (t.hasOwnProperty && !t.hasOwnProperty(i)) || e.call(n, t[i], i, t);
                else if (On(t) || r(t)) {
                    var s = "object" != typeof t;
                    for (i = 0, a = t.length; a > i; i++) (s || i in t) && e.call(n, t[i], i, t);
                } else if (t.forEach && t.forEach !== o) t.forEach(e, n, t);
                else for (i in t) t.hasOwnProperty(i) && e.call(n, t[i], i, t);
            return t;
        }
        function a(t, e, n) {
            for (var i = Object.keys(t).sort(), r = 0; r < i.length; r++) e.call(n, t[i[r]], i[r]);
            return i;
        }
        function s(t) {
            return function (e, n) {
                t(n, e);
            };
        }
        function l() {
            return ++jn;
        }
        function c(t, e) {
            e ? (t.$$hashKey = e) : delete t.$$hashKey;
        }
        function u(t) {
            for (var e = t.$$hashKey, n = 1, i = arguments.length; i > n; n++) {
                var r = arguments[n];
                if (r)
                    for (var o = Object.keys(r), a = 0, s = o.length; s > a; a++) {
                        var l = o[a];
                        t[l] = r[l];
                    }
            }
            return c(t, e), t;
        }
        function d(t) {
            return parseInt(t, 10);
        }
        function p(t, e) {
            return u(Object.create(t), e);
        }
        function h() {}
        function f(t) {
            return t;
        }
        function m(t) {
            return function () {
                return t;
            };
        }
        function v(t) {
            return "undefined" == typeof t;
        }
        function g(t) {
            return "undefined" != typeof t;
        }
        function y(t) {
            return null !== t && "object" == typeof t;
        }
        function b(t) {
            return "string" == typeof t;
        }
        function w(t) {
            return "number" == typeof t;
        }
        function $(t) {
            return "[object Date]" === In.call(t);
        }
        function x(t) {
            return "function" == typeof t;
        }
        function k(t) {
            return "[object RegExp]" === In.call(t);
        }
        function S(t) {
            return t && t.window === t;
        }
        function C(t) {
            return t && t.$evalAsync && t.$watch;
        }
        function _(t) {
            return "boolean" == typeof t;
        }
        function T(t) {
            return !(!t || !(t.nodeName || (t.prop && t.attr && t.find)));
        }
        function E(t) {
            var e = {};
            t = t.split(",");
            var n;
            for (n = 0; n < t.length; n++) e[t[n]] = !0;
            return e;
        }
        function A(t) {
            return Sn(t.nodeName || (t[0] && t[0].nodeName));
        }
        function I(t, e) {
            var n = t.indexOf(e);
            return n >= 0 && t.splice(n, 1), e;
        }
        function R(t, e, n, i) {
            if (S(t) || C(t)) throw Rn("cpws");
            if (e) {
                if (t === e) throw Rn("cpi");
                if (((n = n || []), (i = i || []), y(t))) {
                    var r = n.indexOf(t);
                    if (-1 !== r) return i[r];
                    n.push(t), i.push(e);
                }
                if (On(t)) for (var a = (e.length = 0); a < t.length; a++) (r = R(t[a], null, n, i)), y(t[a]) && (n.push(t[a]), i.push(r)), e.push(r);
                else {
                    var s = e.$$hashKey;
                    On(e)
                        ? (e.length = 0)
                        : o(e, function (t, n) {
                              delete e[n];
                          });
                    for (a in t) t.hasOwnProperty(a) && ((r = R(t[a], null, n, i)), y(t[a]) && (n.push(t[a]), i.push(r)), (e[a] = r));
                    c(e, s);
                }
            } else
                (e = t) &&
                    (On(t)
                        ? (e = R(t, [], n, i))
                        : $(t)
                        ? (e = new Date(t.getTime()))
                        : k(t)
                        ? ((e = new RegExp(t.source, t.toString().match(/[^\/]*$/)[0])), (e.lastIndex = t.lastIndex))
                        : y(t) && ((r = Object.create(Object.getPrototypeOf(t))), (e = R(t, r, n, i))));
            return e;
        }
        function P(t, e) {
            if (On(t)) {
                e = e || [];
                for (var n = 0, i = t.length; i > n; n++) e[n] = t[n];
            } else if (y(t)) for (n in ((e = e || {}), t)) ("$" !== n.charAt(0) || "$" !== n.charAt(1)) && (e[n] = t[n]);
            return e || t;
        }
        function j(t, e) {
            if (t === e) return !0;
            if (null === t || null === e) return !1;
            if (t !== t && e !== e) return !0;
            var i,
                r = typeof t;
            if (r == typeof e && "object" == r) {
                if (!On(t)) {
                    if ($(t)) return $(e) ? j(t.getTime(), e.getTime()) : !1;
                    if (k(t)) return k(e) ? t.toString() == e.toString() : !1;
                    if (C(t) || C(e) || S(t) || S(e) || On(e) || $(e) || k(e)) return !1;
                    r = {};
                    for (i in t)
                        if ("$" !== i.charAt(0) && !x(t[i])) {
                            if (!j(t[i], e[i])) return !1;
                            r[i] = !0;
                        }
                    for (i in e) if (!r.hasOwnProperty(i) && "$" !== i.charAt(0) && e[i] !== n && !x(e[i])) return !1;
                    return !0;
                }
                if (!On(e)) return !1;
                if ((r = t.length) == e.length) {
                    for (i = 0; r > i; i++) if (!j(t[i], e[i])) return !1;
                    return !0;
                }
            }
            return !1;
        }
        function D(t, e, n) {
            return t.concat(Tn.call(e, n));
        }
        function O(t, e) {
            var n = 2 < arguments.length ? Tn.call(arguments, 2) : [];
            return !x(e) || e instanceof RegExp
                ? e
                : n.length
                ? function () {
                      return arguments.length ? e.apply(t, D(n, arguments, 0)) : e.apply(t, n);
                  }
                : function () {
                      return arguments.length ? e.apply(t, arguments) : e.call(t);
                  };
        }
        function L(t, i) {
            var r = i;
            return "string" == typeof t && "$" === t.charAt(0) && "$" === t.charAt(1) ? (r = n) : S(i) ? (r = "$WINDOW") : i && e === i ? (r = "$DOCUMENT") : C(i) && (r = "$SCOPE"), r;
        }
        function N(t, e) {
            return "undefined" == typeof t ? n : (w(e) || (e = e ? 2 : null), JSON.stringify(t, L, e));
        }
        function q(t) {
            return b(t) ? JSON.parse(t) : t;
        }
        function U(t) {
            t = wn(t).clone();
            try {
                t.empty();
            } catch (e) {}
            var n = wn("<div>").append(t).html();
            try {
                return t[0].nodeType === Hn
                    ? Sn(n)
                    : n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/, function (t, e) {
                          return "<" + Sn(e);
                      });
            } catch (i) {
                return Sn(n);
            }
        }
        function M(t) {
            try {
                return decodeURIComponent(t);
            } catch (e) {}
        }
        function B(t) {
            var e,
                n,
                i = {};
            return (
                o((t || "").split("&"), function (t) {
                    t && ((e = t.replace(/\+/g, "%20").split("=")), (n = M(e[0])), g(n) && ((t = g(e[1]) ? M(e[1]) : !0), Cn.call(i, n) ? (On(i[n]) ? i[n].push(t) : (i[n] = [i[n], t])) : (i[n] = t)));
                }),
                i
            );
        }
        function F(t) {
            var e = [];
            return (
                o(t, function (t, n) {
                    On(t)
                        ? o(t, function (t) {
                              e.push(V(n, !0) + (!0 === t ? "" : "=" + V(t, !0)));
                          })
                        : e.push(V(n, !0) + (!0 === t ? "" : "=" + V(t, !0)));
                }),
                e.length ? e.join("&") : ""
            );
        }
        function H(t) {
            return V(t, !0).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+");
        }
        function V(t, e) {
            return encodeURIComponent(t)
                .replace(/%40/gi, "@")
                .replace(/%3A/gi, ":")
                .replace(/%24/g, "$")
                .replace(/%2C/gi, ",")
                .replace(/%3B/gi, ";")
                .replace(/%20/g, e ? "%20" : "+");
        }
        function z(t, e) {
            var n,
                i,
                r = Un.length;
            for (t = wn(t), i = 0; r > i; ++i) if (((n = Un[i] + e), b((n = t.attr(n))))) return n;
            return null;
        }
        function W(t, e) {
            var n,
                i,
                r = {};
            o(Un, function (e) {
                (e += "app"), !n && t.hasAttribute && t.hasAttribute(e) && ((n = t), (i = t.getAttribute(e)));
            }),
                o(Un, function (e) {
                    e += "app";
                    var r;
                    !n && (r = t.querySelector("[" + e.replace(":", "\\:") + "]")) && ((n = r), (i = r.getAttribute(e)));
                }),
                n && ((r.strictDi = null !== z(n, "strict-di")), e(n, i ? [i] : [], r));
        }
        function Y(n, i, r) {
            y(r) || (r = {}), (r = u({ strictDi: !1 }, r));
            var a = function () {
                    if (((n = wn(n)), n.injector())) {
                        var t = n[0] === e ? "document" : U(n);
                        throw Rn("btstrpd", t.replace(/</, "&lt;").replace(/>/, "&gt;"));
                    }
                    return (
                        (i = i || []),
                        i.unshift([
                            "$provide",
                            function (t) {
                                t.value("$rootElement", n);
                            },
                        ]),
                        r.debugInfoEnabled &&
                            i.push([
                                "$compileProvider",
                                function (t) {
                                    t.debugInfoEnabled(!0);
                                },
                            ]),
                        i.unshift("ng"),
                        (t = Pt(i, r.strictDi)),
                        t.invoke([
                            "$rootScope",
                            "$rootElement",
                            "$compile",
                            "$injector",
                            function (t, e, n, i) {
                                t.$apply(function () {
                                    e.data("$injector", i), n(e)(t);
                                });
                            },
                        ]),
                        t
                    );
                },
                s = /^NG_ENABLE_DEBUG_INFO!/,
                l = /^NG_DEFER_BOOTSTRAP!/;
            return (
                t && s.test(t.name) && ((r.debugInfoEnabled = !0), (t.name = t.name.replace(s, ""))),
                t && !l.test(t.name)
                    ? a()
                    : ((t.name = t.name.replace(l, "")),
                      (Pn.resumeBootstrap = function (t) {
                          return (
                              o(t, function (t) {
                                  i.push(t);
                              }),
                              a()
                          );
                      }),
                      void (x(Pn.resumeDeferredBootstrap) && Pn.resumeDeferredBootstrap()))
            );
        }
        function G() {
            (t.name = "NG_ENABLE_DEBUG_INFO!" + t.name), t.location.reload();
        }
        function X(t) {
            if (((t = Pn.element(t).injector()), !t)) throw Rn("test");
            return t.get("$$testability");
        }
        function J(t, e) {
            return (
                (e = e || "_"),
                t.replace(Mn, function (t, n) {
                    return (n ? e : "") + t.toLowerCase();
                })
            );
        }
        function K() {
            var e;
            Bn ||
                (($n = t.jQuery) && $n.fn.on
                    ? ((wn = $n),
                      u($n.fn, { scope: ni.scope, isolateScope: ni.isolateScope, controller: ni.controller, injector: ni.injector, inheritedData: ni.inheritedData }),
                      (e = $n.cleanData),
                      ($n.cleanData = function (t) {
                          var n;
                          if (Dn) Dn = !1;
                          else for (var i, r = 0; null != (i = t[r]); r++) (n = $n._data(i, "events")) && n.$destroy && $n(i).triggerHandler("$destroy");
                          e(t);
                      }))
                    : (wn = ct),
                (Pn.element = wn),
                (Bn = !0));
        }
        function Q(t, e, n) {
            if (!t) throw Rn("areq", e || "?", n || "required");
            return t;
        }
        function Z(t, e, n) {
            return n && On(t) && (t = t[t.length - 1]), Q(x(t), e, "not a function, got " + (t && "object" == typeof t ? t.constructor.name || "Object" : typeof t)), t;
        }
        function tt(t, e) {
            if ("hasOwnProperty" === t) throw Rn("badname", e);
        }
        function et(t, e, n) {
            if (!e) return t;
            e = e.split(".");
            for (var i, r = t, o = e.length, a = 0; o > a; a++) (i = e[a]), t && (t = (r = t)[i]);
            return !n && x(t) ? O(r, t) : t;
        }
        function nt(t) {
            var e = t[0];
            t = t[t.length - 1];
            var n = [e];
            do {
                if (((e = e.nextSibling), !e)) break;
                n.push(e);
            } while (e !== t);
            return wn(n);
        }
        function it() {
            return Object.create(null);
        }
        function rt(t) {
            function e(t, e, n) {
                return t[e] || (t[e] = n());
            }
            var n = i("$injector"),
                r = i("ng");
            return (
                (t = e(t, "angular", Object)),
                (t.$$minErr = t.$$minErr || i),
                e(t, "module", function () {
                    var t = {};
                    return function (i, o, a) {
                        if ("hasOwnProperty" === i) throw r("badname", "module");
                        return (
                            o && t.hasOwnProperty(i) && (t[i] = null),
                            e(t, i, function () {
                                function t(t, n, i, r) {
                                    return (
                                        r || (r = e),
                                        function () {
                                            return r[i || "push"]([t, n, arguments]), c;
                                        }
                                    );
                                }
                                if (!o) throw n("nomod", i);
                                var e = [],
                                    r = [],
                                    s = [],
                                    l = t("$injector", "invoke", "push", r),
                                    c = {
                                        _invokeQueue: e,
                                        _configBlocks: r,
                                        _runBlocks: s,
                                        requires: o,
                                        name: i,
                                        provider: t("$provide", "provider"),
                                        factory: t("$provide", "factory"),
                                        service: t("$provide", "service"),
                                        value: t("$provide", "value"),
                                        constant: t("$provide", "constant", "unshift"),
                                        animation: t("$animateProvider", "register"),
                                        filter: t("$filterProvider", "register"),
                                        controller: t("$controllerProvider", "register"),
                                        directive: t("$compileProvider", "directive"),
                                        config: l,
                                        run: function (t) {
                                            return s.push(t), this;
                                        },
                                    };
                                return a && l(a), c;
                            })
                        );
                    };
                })
            );
        }
        function ot(e) {
            u(e, {
                bootstrap: Y,
                copy: R,
                extend: u,
                equals: j,
                element: wn,
                forEach: o,
                injector: Pt,
                noop: h,
                bind: O,
                toJson: N,
                fromJson: q,
                identity: f,
                isUndefined: v,
                isDefined: g,
                isString: b,
                isFunction: x,
                isObject: y,
                isNumber: w,
                isElement: T,
                isArray: On,
                version: Vn,
                isDate: $,
                lowercase: Sn,
                uppercase: _n,
                callbacks: { counter: 0 },
                getTestability: X,
                $$minErr: i,
                $$csp: qn,
                reloadWithDebugInfo: G,
            }),
                (xn = rt(t));
            try {
                xn("ngLocale");
            } catch (n) {
                xn("ngLocale", []).provider("$locale", ne);
            }
            xn(
                "ng",
                ["ngLocale"],
                [
                    "$provide",
                    function (t) {
                        t.provider({ $$sanitizeUri: Pe }),
                            t
                                .provider("$compile", Ut)
                                .directive({
                                    a: Gi,
                                    input: ur,
                                    textarea: ur,
                                    form: Qi,
                                    script: Xr,
                                    select: Qr,
                                    style: to,
                                    option: Zr,
                                    ngBind: hr,
                                    ngBindHtml: mr,
                                    ngBindTemplate: fr,
                                    ngClass: gr,
                                    ngClassEven: br,
                                    ngClassOdd: yr,
                                    ngCloak: wr,
                                    ngController: $r,
                                    ngForm: Zi,
                                    ngHide: Hr,
                                    ngIf: Sr,
                                    ngInclude: Cr,
                                    ngInit: Tr,
                                    ngNonBindable: Ur,
                                    ngPluralize: Mr,
                                    ngRepeat: Br,
                                    ngShow: Fr,
                                    ngStyle: Vr,
                                    ngSwitch: zr,
                                    ngSwitchWhen: Wr,
                                    ngSwitchDefault: Yr,
                                    ngOptions: Kr,
                                    ngTransclude: Gr,
                                    ngModel: Lr,
                                    ngList: Er,
                                    ngChange: vr,
                                    pattern: no,
                                    ngPattern: no,
                                    required: eo,
                                    ngRequired: eo,
                                    minlength: ro,
                                    ngMinlength: ro,
                                    maxlength: io,
                                    ngMaxlength: io,
                                    ngValue: pr,
                                    ngModelOptions: qr,
                                })
                                .directive({ ngInclude: _r })
                                .directive(Xi)
                                .directive(xr),
                            t.provider({
                                $anchorScroll: jt,
                                $animate: pi,
                                $browser: Lt,
                                $cacheFactory: Nt,
                                $controller: Ht,
                                $document: Vt,
                                $exceptionHandler: zt,
                                $filter: Ve,
                                $interpolate: te,
                                $interval: ee,
                                $http: Jt,
                                $httpBackend: Qt,
                                $location: fe,
                                $log: me,
                                $parse: _e,
                                $rootScope: Re,
                                $q: Te,
                                $$q: Ee,
                                $sce: Le,
                                $sceDelegate: Oe,
                                $sniffer: Ne,
                                $templateCache: qt,
                                $templateRequest: qe,
                                $$testability: Ue,
                                $timeout: Me,
                                $window: He,
                                $$rAF: Ie,
                                $$asyncCallback: Dt,
                                $$jqLite: Et,
                            });
                    },
                ]
            );
        }
        function at(t) {
            return t
                .replace(Yn, function (t, e, n, i) {
                    return i ? n.toUpperCase() : n;
                })
                .replace(Gn, "Moz$1");
        }
        function st(t) {
            return (t = t.nodeType), t === Fn || !t || 9 === t;
        }
        function lt(t, e) {
            var n,
                i,
                r = e.createDocumentFragment(),
                a = [];
            if (Qn.test(t)) {
                for (n = n || r.appendChild(e.createElement("div")), i = (Zn.exec(t) || ["", ""])[1].toLowerCase(), i = ei[i] || ei._default, n.innerHTML = i[1] + t.replace(ti, "<$1></$2>") + i[2], i = i[0]; i--; ) n = n.lastChild;
                (a = D(a, n.childNodes)), (n = r.firstChild), (n.textContent = "");
            } else a.push(e.createTextNode(t));
            return (
                (r.textContent = ""),
                (r.innerHTML = ""),
                o(a, function (t) {
                    r.appendChild(t);
                }),
                r
            );
        }
        function ct(t) {
            if (t instanceof ct) return t;
            var n;
            if ((b(t) && ((t = Ln(t)), (n = !0)), !(this instanceof ct))) {
                if (n && "<" != t.charAt(0)) throw Jn("nosel");
                return new ct(t);
            }
            if (n) {
                n = e;
                var i;
                t = (i = Kn.exec(t)) ? [n.createElement(i[1])] : (i = lt(t, n)) ? i.childNodes : [];
            }
            bt(this, t);
        }
        function ut(t) {
            return t.cloneNode(!0);
        }
        function dt(t, e) {
            if ((e || ht(t), t.querySelectorAll)) for (var n = t.querySelectorAll("*"), i = 0, r = n.length; r > i; i++) ht(n[i]);
        }
        function pt(t, e, n, i) {
            if (g(i)) throw Jn("offargs");
            var r = (i = ft(t)) && i.events,
                a = i && i.handle;
            if (a)
                if (e)
                    o(e.split(" "), function (e) {
                        if (g(n)) {
                            var i = r[e];
                            if ((I(i || [], n), i && 0 < i.length)) return;
                        }
                        t.removeEventListener(e, a, !1), delete r[e];
                    });
                else for (e in r) "$destroy" !== e && t.removeEventListener(e, a, !1), delete r[e];
        }
        function ht(t, e) {
            var i = t.ng339,
                r = i && zn[i];
            r && (e ? delete r.data[e] : (r.handle && (r.events.$destroy && r.handle({}, "$destroy"), pt(t)), delete zn[i], (t.ng339 = n)));
        }
        function ft(t, e) {
            var i = t.ng339,
                i = i && zn[i];
            return e && !i && ((t.ng339 = i = ++Wn), (i = zn[i] = { events: {}, data: {}, handle: n })), i;
        }
        function mt(t, e, n) {
            if (st(t)) {
                var i = g(n),
                    r = !i && e && !y(e),
                    o = !e;
                if (((t = (t = ft(t, !r)) && t.data), i)) t[e] = n;
                else {
                    if (o) return t;
                    if (r) return t && t[e];
                    u(t, e);
                }
            }
        }
        function vt(t, e) {
            return t.getAttribute ? -1 < (" " + (t.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").indexOf(" " + e + " ") : !1;
        }
        function gt(t, e) {
            e &&
                t.setAttribute &&
                o(e.split(" "), function (e) {
                    t.setAttribute("class", Ln((" " + (t.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + Ln(e) + " ", " ")));
                });
        }
        function yt(t, e) {
            if (e && t.setAttribute) {
                var n = (" " + (t.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ");
                o(e.split(" "), function (t) {
                    (t = Ln(t)), -1 === n.indexOf(" " + t + " ") && (n += t + " ");
                }),
                    t.setAttribute("class", Ln(n));
            }
        }
        function bt(t, e) {
            if (e)
                if (e.nodeType) t[t.length++] = e;
                else {
                    var n = e.length;
                    if ("number" == typeof n && e.window !== e) {
                        if (n) for (var i = 0; n > i; i++) t[t.length++] = e[i];
                    } else t[t.length++] = e;
                }
        }
        function wt(t, e) {
            return $t(t, "$" + (e || "ngController") + "Controller");
        }
        function $t(t, e, i) {
            for (9 == t.nodeType && (t = t.documentElement), e = On(e) ? e : [e]; t; ) {
                for (var r = 0, o = e.length; o > r; r++) if ((i = wn.data(t, e[r])) !== n) return i;
                t = t.parentNode || (11 === t.nodeType && t.host);
            }
        }
        function xt(t) {
            for (dt(t, !0); t.firstChild; ) t.removeChild(t.firstChild);
        }
        function kt(t, e) {
            e || dt(t);
            var n = t.parentNode;
            n && n.removeChild(t);
        }
        function St(e, n) {
            (n = n || t), "complete" === n.document.readyState ? n.setTimeout(e) : wn(n).on("load", e);
        }
        function Ct(t, e) {
            var n = ii[e.toLowerCase()];
            return n && ri[A(t)] && n;
        }
        function _t(t, e) {
            var n = t.nodeName;
            return ("INPUT" === n || "TEXTAREA" === n) && oi[e];
        }
        function Tt(t, e) {
            var n = function (n, i) {
                n.isDefaultPrevented = function () {
                    return n.defaultPrevented;
                };
                var r = e[i || n.type],
                    o = r ? r.length : 0;
                if (o) {
                    if (v(n.immediatePropagationStopped)) {
                        var a = n.stopImmediatePropagation;
                        n.stopImmediatePropagation = function () {
                            (n.immediatePropagationStopped = !0), n.stopPropagation && n.stopPropagation(), a && a.call(n);
                        };
                    }
                    (n.isImmediatePropagationStopped = function () {
                        return !0 === n.immediatePropagationStopped;
                    }),
                        o > 1 && (r = P(r));
                    for (var s = 0; o > s; s++) n.isImmediatePropagationStopped() || r[s].call(t, n);
                }
            };
            return (n.elem = t), n;
        }
        function Et() {
            this.$get = function () {
                return u(ct, {
                    hasClass: function (t, e) {
                        return t.attr && (t = t[0]), vt(t, e);
                    },
                    addClass: function (t, e) {
                        return t.attr && (t = t[0]), yt(t, e);
                    },
                    removeClass: function (t, e) {
                        return t.attr && (t = t[0]), gt(t, e);
                    },
                });
            };
        }
        function At(t, e) {
            var n = t && t.$$hashKey;
            return n ? ("function" == typeof n && (n = t.$$hashKey()), n) : ((n = typeof t), (n = "function" == n || ("object" == n && null !== t) ? (t.$$hashKey = n + ":" + (e || l)()) : n + ":" + t));
        }
        function It(t, e) {
            if (e) {
                var n = 0;
                this.nextUid = function () {
                    return ++n;
                };
            }
            o(t, this.put, this);
        }
        function Rt(t) {
            return (t = t.toString().replace(ci, "").match(ai)) ? "function(" + (t[1] || "").replace(/[\s\r\n]+/, " ") + ")" : "fn";
        }
        function Pt(t, e) {
            function i(t) {
                return function (e, n) {
                    return y(e) ? void o(e, s(t)) : t(e, n);
                };
            }
            function r(t, e) {
                if ((tt(t, "service"), (x(e) || On(e)) && (e = w.instantiate(e)), !e.$get)) throw ui("pget", t);
                return (g[t + "Provider"] = e);
            }
            function a(t, e) {
                return function () {
                    var n = k.invoke(e, this);
                    if (v(n)) throw ui("undef", t);
                    return n;
                };
            }
            function l(t, e, n) {
                return r(t, { $get: !1 !== n ? a(t, e) : e });
            }
            function c(t) {
                var e,
                    n = [];
                return (
                    o(t, function (t) {
                        function i(t) {
                            var e, n;
                            for (e = 0, n = t.length; n > e; e++) {
                                var i = t[e],
                                    r = w.get(i[0]);
                                r[i[1]].apply(r, i[2]);
                            }
                        }
                        if (!f.get(t)) {
                            f.put(t, !0);
                            try {
                                b(t) ? ((e = xn(t)), (n = n.concat(c(e.requires)).concat(e._runBlocks)), i(e._invokeQueue), i(e._configBlocks)) : x(t) ? n.push(w.invoke(t)) : On(t) ? n.push(w.invoke(t)) : Z(t, "module");
                            } catch (r) {
                                throw (On(t) && (t = t[t.length - 1]), r.message && r.stack && -1 == r.stack.indexOf(r.message) && (r = r.message + "\n" + r.stack), ui("modulerr", t, r.stack || r.message || r));
                            }
                        }
                    }),
                    n
                );
            }
            function u(t, n) {
                function i(e, i) {
                    if (t.hasOwnProperty(e)) {
                        if (t[e] === d) throw ui("cdep", e + " <- " + p.join(" <- "));
                        return t[e];
                    }
                    try {
                        return p.unshift(e), (t[e] = d), (t[e] = n(e, i));
                    } catch (r) {
                        throw (t[e] === d && delete t[e], r);
                    } finally {
                        p.shift();
                    }
                }
                function r(t, n, r, o) {
                    "string" == typeof r && ((o = r), (r = null));
                    var a,
                        s,
                        l,
                        c = [],
                        u = Pt.$$annotate(t, e, o);
                    for (s = 0, a = u.length; a > s; s++) {
                        if (((l = u[s]), "string" != typeof l)) throw ui("itkn", l);
                        c.push(r && r.hasOwnProperty(l) ? r[l] : i(l, o));
                    }
                    return On(t) && (t = t[a]), t.apply(n, c);
                }
                return {
                    invoke: r,
                    instantiate: function (t, e, n) {
                        var i = Object.create((On(t) ? t[t.length - 1] : t).prototype || null);
                        return (t = r(t, i, e, n)), y(t) || x(t) ? t : i;
                    },
                    get: i,
                    annotate: Pt.$$annotate,
                    has: function (e) {
                        return g.hasOwnProperty(e + "Provider") || t.hasOwnProperty(e);
                    },
                };
            }
            e = !0 === e;
            var d = {},
                p = [],
                f = new It([], !0),
                g = {
                    $provide: {
                        provider: i(r),
                        factory: i(l),
                        service: i(function (t, e) {
                            return l(t, [
                                "$injector",
                                function (t) {
                                    return t.instantiate(e);
                                },
                            ]);
                        }),
                        value: i(function (t, e) {
                            return l(t, m(e), !1);
                        }),
                        constant: i(function (t, e) {
                            tt(t, "constant"), (g[t] = e), ($[t] = e);
                        }),
                        decorator: function (t, e) {
                            var n = w.get(t + "Provider"),
                                i = n.$get;
                            n.$get = function () {
                                var t = k.invoke(i, n);
                                return k.invoke(e, null, { $delegate: t });
                            };
                        },
                    },
                },
                w = (g.$injector = u(g, function (t, e) {
                    throw (Pn.isString(e) && p.push(e), ui("unpr", p.join(" <- ")));
                })),
                $ = {},
                k = ($.$injector = u($, function (t, e) {
                    var i = w.get(t + "Provider", e);
                    return k.invoke(i.$get, i, n, t);
                }));
            return (
                o(c(t), function (t) {
                    k.invoke(t || h);
                }),
                k
            );
        }
        function jt() {
            var t = !0;
            (this.disableAutoScrolling = function () {
                t = !1;
            }),
                (this.$get = [
                    "$window",
                    "$location",
                    "$rootScope",
                    function (e, n, i) {
                        function r(t) {
                            var e = null;
                            return (
                                Array.prototype.some.call(t, function (t) {
                                    return "a" === A(t) ? ((e = t), !0) : void 0;
                                }),
                                e
                            );
                        }
                        function o(t) {
                            if (t) {
                                t.scrollIntoView();
                                var n;
                                (n = a.yOffset),
                                    x(n) ? (n = n()) : T(n) ? ((n = n[0]), (n = "fixed" !== e.getComputedStyle(n).position ? 0 : n.getBoundingClientRect().bottom)) : w(n) || (n = 0),
                                    n && ((t = t.getBoundingClientRect().top), e.scrollBy(0, t - n));
                            } else e.scrollTo(0, 0);
                        }
                        function a() {
                            var t,
                                e = n.hash();
                            e ? ((t = s.getElementById(e)) ? o(t) : (t = r(s.getElementsByName(e))) ? o(t) : "top" === e && o(null)) : o(null);
                        }
                        var s = e.document;
                        return (
                            t &&
                                i.$watch(
                                    function () {
                                        return n.hash();
                                    },
                                    function (t, e) {
                                        (t === e && "" === t) ||
                                            St(function () {
                                                i.$evalAsync(a);
                                            });
                                    }
                                ),
                            a
                        );
                    },
                ]);
        }
        function Dt() {
            this.$get = [
                "$$rAF",
                "$timeout",
                function (t, e) {
                    return t.supported
                        ? function (e) {
                              return t(e);
                          }
                        : function (t) {
                              return e(t, 0, !1);
                          };
                },
            ];
        }
        function Ot(t, e, i, r) {
            function a(t) {
                try {
                    t.apply(null, Tn.call(arguments, 1));
                } finally {
                    if ((x--, 0 === x))
                        for (; k.length; )
                            try {
                                k.pop()();
                            } catch (e) {
                                i.error(e);
                            }
                }
            }
            function s(t, e) {
                !(function n() {
                    o(C, function (t) {
                        t();
                    }),
                        (S = e(n, t));
                })();
            }
            function l() {
                c(), u();
            }
            function c() {
                t: {
                    try {
                        _ = g.state;
                        break t;
                    } catch (t) {}
                    _ = void 0;
                }
                (_ = v(_) ? null : _), j(_, D) && (_ = D), (D = _);
            }
            function u() {
                (E !== p.url() || T !== _) &&
                    ((E = p.url()),
                    (T = _),
                    o(R, function (t) {
                        t(p.url(), _);
                    }));
            }
            function d(t) {
                try {
                    return decodeURIComponent(t);
                } catch (e) {
                    return t;
                }
            }
            var p = this,
                f = e[0],
                m = t.location,
                g = t.history,
                y = t.setTimeout,
                w = t.clearTimeout,
                $ = {};
            p.isMock = !1;
            var x = 0,
                k = [];
            (p.$$completeOutstandingRequest = a),
                (p.$$incOutstandingRequestCount = function () {
                    x++;
                }),
                (p.notifyWhenNoOutstandingRequests = function (t) {
                    o(C, function (t) {
                        t();
                    }),
                        0 === x ? t() : k.push(t);
                });
            var S,
                C = [];
            p.addPollFn = function (t) {
                return v(S) && s(100, y), C.push(t), t;
            };
            var _,
                T,
                E = m.href,
                A = e.find("base"),
                I = null;
            c(),
                (T = _),
                (p.url = function (e, n, i) {
                    if ((v(i) && (i = null), m !== t.location && (m = t.location), g !== t.history && (g = t.history), e)) {
                        var o = T === i;
                        if (E === e && (!r.history || o)) return p;
                        var a = E && se(E) === se(e);
                        return (
                            (E = e),
                            (T = i),
                            !r.history || (a && o)
                                ? ((!a || I) && (I = e), n ? m.replace(e) : a ? ((n = m), (i = e.indexOf("#")), (e = -1 === i ? "" : e.substr(i)), (n.hash = e)) : (m.href = e))
                                : (g[n ? "replaceState" : "pushState"](i, "", e), c(), (T = _)),
                            p
                        );
                    }
                    return I || m.href.replace(/%27/g, "'");
                }),
                (p.state = function () {
                    return _;
                });
            var R = [],
                P = !1,
                D = null;
            (p.onUrlChange = function (e) {
                return P || (r.history && wn(t).on("popstate", l), wn(t).on("hashchange", l), (P = !0)), R.push(e), e;
            }),
                (p.$$checkUrlChange = u),
                (p.baseHref = function () {
                    var t = A.attr("href");
                    return t ? t.replace(/^(https?\:)?\/\/[^\/]*/, "") : "";
                });
            var O = {},
                L = "",
                N = p.baseHref();
            (p.cookies = function (t, e) {
                var r, o, a, s;
                if (!t) {
                    if (f.cookie !== L) for (L = f.cookie, r = L.split("; "), O = {}, a = 0; a < r.length; a++) (o = r[a]), (s = o.indexOf("=")), s > 0 && ((t = d(o.substring(0, s))), O[t] === n && (O[t] = d(o.substring(s + 1))));
                    return O;
                }
                e === n
                    ? (f.cookie = encodeURIComponent(t) + "=;path=" + N + ";expires=Thu, 01 Jan 1970 00:00:00 GMT")
                    : b(e) &&
                      ((r = (f.cookie = encodeURIComponent(t) + "=" + encodeURIComponent(e) + ";path=" + N).length + 1),
                      r > 4096 && i.warn("Cookie '" + t + "' possibly not set or overflowed because it was too large (" + r + " > 4096 bytes)!"));
            }),
                (p.defer = function (t, e) {
                    var n;
                    return (
                        x++,
                        (n = y(function () {
                            delete $[n], a(t);
                        }, e || 0)),
                        ($[n] = !0),
                        n
                    );
                }),
                (p.defer.cancel = function (t) {
                    return $[t] ? (delete $[t], w(t), a(h), !0) : !1;
                });
        }
        function Lt() {
            this.$get = [
                "$window",
                "$log",
                "$sniffer",
                "$document",
                function (t, e, n, i) {
                    return new Ot(t, i, e, n);
                },
            ];
        }
        function Nt() {
            this.$get = function () {
                function t(t, n) {
                    function r(t) {
                        t != p && (h ? h == t && (h = t.n) : (h = t), o(t.n, t.p), o(t, p), (p = t), (p.n = null));
                    }
                    function o(t, e) {
                        t != e && (t && (t.p = e), e && (e.n = t));
                    }
                    if (t in e) throw i("$cacheFactory")("iid", t);
                    var a = 0,
                        s = u({}, n, { id: t }),
                        l = {},
                        c = (n && n.capacity) || Number.MAX_VALUE,
                        d = {},
                        p = null,
                        h = null;
                    return (e[t] = {
                        put: function (t, e) {
                            if (c < Number.MAX_VALUE) {
                                var n = d[t] || (d[t] = { key: t });
                                r(n);
                            }
                            return v(e) ? void 0 : (t in l || a++, (l[t] = e), a > c && this.remove(h.key), e);
                        },
                        get: function (t) {
                            if (c < Number.MAX_VALUE) {
                                var e = d[t];
                                if (!e) return;
                                r(e);
                            }
                            return l[t];
                        },
                        remove: function (t) {
                            if (c < Number.MAX_VALUE) {
                                var e = d[t];
                                if (!e) return;
                                e == p && (p = e.p), e == h && (h = e.n), o(e.n, e.p), delete d[t];
                            }
                            delete l[t], a--;
                        },
                        removeAll: function () {
                            (l = {}), (a = 0), (d = {}), (p = h = null);
                        },
                        destroy: function () {
                            (d = s = l = null), delete e[t];
                        },
                        info: function () {
                            return u({}, s, { size: a });
                        },
                    });
                }
                var e = {};
                return (
                    (t.info = function () {
                        var t = {};
                        return (
                            o(e, function (e, n) {
                                t[n] = e.info();
                            }),
                            t
                        );
                    }),
                    (t.get = function (t) {
                        return e[t];
                    }),
                    t
                );
            };
        }
        function qt() {
            this.$get = [
                "$cacheFactory",
                function (t) {
                    return t("templates");
                },
            ];
        }
        function Ut(t, i) {
            function r(t, e) {
                var n = /^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,
                    i = {};
                return (
                    o(t, function (t, r) {
                        var o = t.match(n);
                        if (!o) throw hi("iscp", e, r, t);
                        i[r] = { mode: o[1][0], collection: "*" === o[2], optional: "?" === o[3], attrName: o[4] || r };
                    }),
                    i
                );
            }
            var a = {},
                l = /^\s*directive\:\s*([\w\-]+)\s+(.*)$/,
                c = /(([\w\-]+)(?:\:([^;]+))?;?)/,
                d = E("ngSrc,ngSrcset,src,srcset"),
                v = /^(?:(\^\^?)?(\?)?(\^\^?)?)?/,
                w = /^(on[a-z]+|formaction)$/;
            (this.directive = function k(e, n) {
                return (
                    tt(e, "directive"),
                    b(e)
                        ? (Q(n, "directiveFactory"),
                          a.hasOwnProperty(e) ||
                              ((a[e] = []),
                              t.factory(e + "Directive", [
                                  "$injector",
                                  "$exceptionHandler",
                                  function (t, n) {
                                      var i = [];
                                      return (
                                          o(a[e], function (o, a) {
                                              try {
                                                  var s = t.invoke(o);
                                                  x(s) ? (s = { compile: m(s) }) : !s.compile && s.link && (s.compile = m(s.link)),
                                                      (s.priority = s.priority || 0),
                                                      (s.index = a),
                                                      (s.name = s.name || e),
                                                      (s.require = s.require || (s.controller && s.name)),
                                                      (s.restrict = s.restrict || "EA"),
                                                      y(s.scope) && (s.$$isolateBindings = r(s.scope, s.name)),
                                                      i.push(s);
                                              } catch (l) {
                                                  n(l);
                                              }
                                          }),
                                          i
                                      );
                                  },
                              ])),
                          a[e].push(n))
                        : o(e, s(k)),
                    this
                );
            }),
                (this.aHrefSanitizationWhitelist = function (t) {
                    return g(t) ? (i.aHrefSanitizationWhitelist(t), this) : i.aHrefSanitizationWhitelist();
                }),
                (this.imgSrcSanitizationWhitelist = function (t) {
                    return g(t) ? (i.imgSrcSanitizationWhitelist(t), this) : i.imgSrcSanitizationWhitelist();
                });
            var $ = !0;
            (this.debugInfoEnabled = function (t) {
                return g(t) ? (($ = t), this) : $;
            }),
                (this.$get = [
                    "$injector",
                    "$interpolate",
                    "$exceptionHandler",
                    "$templateRequest",
                    "$parse",
                    "$controller",
                    "$rootScope",
                    "$document",
                    "$sce",
                    "$animate",
                    "$$sanitizeUri",
                    function (t, i, r, s, m, g, k, S, _, T, E) {
                        function R(t, e) {
                            try {
                                t.addClass(e);
                            } catch (n) {}
                        }
                        function P(t, e, n, i, r) {
                            t instanceof wn || (t = wn(t)),
                                o(t, function (e, n) {
                                    e.nodeType == Hn && e.nodeValue.match(/\S+/) && (t[n] = wn(e).wrap("<span></span>").parent()[0]);
                                });
                            var a = D(t, e, t, n, i, r);
                            P.$$addScopeClass(t);
                            var s = null;
                            return function (e, n, i) {
                                Q(e, "scope"), (i = i || {});
                                var r = i.parentBoundTranscludeFn,
                                    o = i.transcludeControllers;
                                if (
                                    ((i = i.futureParentElement),
                                    r && r.$$boundTransclude && (r = r.$$boundTransclude),
                                    s || (s = (i = i && i[0]) && "foreignobject" !== A(i) && i.toString().match(/SVG/) ? "svg" : "html"),
                                    (i = "html" !== s ? wn(X(s, wn("<div>").append(t).html())) : n ? ni.clone.call(t) : t),
                                    o)
                                )
                                    for (var l in o) i.data("$" + l + "Controller", o[l].instance);
                                return P.$$addScopeInfo(i, e), n && n(i, e), a && a(e, i, i, r), i;
                            };
                        }
                        function D(t, e, i, r, o, a) {
                            function s(t, i, r, o) {
                                var a, s, l, c, u, d, f;
                                if (p) for (f = Array(i.length), c = 0; c < h.length; c += 3) (a = h[c]), (f[a] = i[a]);
                                else f = i;
                                for (c = 0, u = h.length; u > c; )
                                    (s = f[h[c++]]),
                                        (i = h[c++]),
                                        (a = h[c++]),
                                        i
                                            ? (i.scope ? ((l = t.$new()), P.$$addScopeInfo(wn(s), l)) : (l = t),
                                              (d = i.transcludeOnThisElement ? O(t, i.transclude, o, i.elementTranscludeOnThisElement) : !i.templateOnThisElement && o ? o : !o && e ? O(t, e) : null),
                                              i(a, l, s, r, d))
                                            : a && a(t, s.childNodes, n, o);
                            }
                            for (var l, c, u, d, p, h = [], f = 0; f < t.length; f++)
                                (l = new rt()),
                                    (c = L(t[f], [], l, 0 === f ? r : n, o)),
                                    (a = c.length ? M(c, t[f], l, e, i, null, [], [], a) : null) && a.scope && P.$$addScopeClass(l.$$element),
                                    (l = (a && a.terminal) || !(u = t[f].childNodes) || !u.length ? null : D(u, a ? (a.transcludeOnThisElement || !a.templateOnThisElement) && a.transclude : e)),
                                    (a || l) && (h.push(f, a, l), (d = !0), (p = p || a)),
                                    (a = null);
                            return d ? s : null;
                        }
                        function O(t, e, n, i) {
                            return function (i, r, o, a, s) {
                                return i || ((i = t.$new(!1, s)), (i.$$transcluded = !0)), e(i, r, { parentBoundTranscludeFn: n, transcludeControllers: o, futureParentElement: a });
                            };
                        }
                        function L(t, e, n, i, r) {
                            var o,
                                a = n.$attr;
                            switch (t.nodeType) {
                                case Fn:
                                    F(e, Mt(A(t)), "E", i, r);
                                    for (var s, u, d, p = t.attributes, h = 0, f = p && p.length; f > h; h++) {
                                        var m = !1,
                                            v = !1;
                                        (s = p[h]),
                                            (o = s.name),
                                            (u = Ln(s.value)),
                                            (s = Mt(o)),
                                            (d = lt.test(s)) &&
                                                (o = o
                                                    .replace(fi, "")
                                                    .substr(8)
                                                    .replace(/_(.)/g, function (t, e) {
                                                        return e.toUpperCase();
                                                    }));
                                        var g = s.replace(/(Start|End)$/, "");
                                        H(g) && s === g + "Start" && ((m = o), (v = o.substr(0, o.length - 5) + "end"), (o = o.substr(0, o.length - 6))),
                                            (s = Mt(o.toLowerCase())),
                                            (a[s] = o),
                                            (d || !n.hasOwnProperty(s)) && ((n[s] = u), Ct(t, s) && (n[s] = !0)),
                                            Z(t, e, u, s, d),
                                            F(e, s, "A", i, r, m, v);
                                    }
                                    if (((t = t.className), y(t) && (t = t.animVal), b(t) && "" !== t)) for (; (o = c.exec(t)); ) (s = Mt(o[2])), F(e, s, "C", i, r) && (n[s] = Ln(o[3])), (t = t.substr(o.index + o[0].length));
                                    break;
                                case Hn:
                                    G(e, t.nodeValue);
                                    break;
                                case 8:
                                    try {
                                        (o = l.exec(t.nodeValue)) && ((s = Mt(o[1])), F(e, s, "M", i, r) && (n[s] = Ln(o[2])));
                                    } catch (w) {}
                            }
                            return e.sort(W), e;
                        }
                        function N(t, e, n) {
                            var i = [],
                                r = 0;
                            if (e && t.hasAttribute && t.hasAttribute(e)) {
                                do {
                                    if (!t) throw hi("uterdir", e, n);
                                    t.nodeType == Fn && (t.hasAttribute(e) && r++, t.hasAttribute(n) && r--), i.push(t), (t = t.nextSibling);
                                } while (r > 0);
                            } else i.push(t);
                            return wn(i);
                        }
                        function q(t, e, n) {
                            return function (i, r, o, a, s) {
                                return (r = N(r[0], e, n)), t(i, r, o, a, s);
                            };
                        }
                        function M(t, a, s, l, c, u, d, p, h) {
                            function f(t, e, n, i) {
                                t && (n && (t = q(t, n, i)), (t.require = _.require), (t.directiveName = T), (D === _ || _.$$isolateScope) && (t = et(t, { isolateScope: !0 })), d.push(t)),
                                    e && (n && (e = q(e, n, i)), (e.require = _.require), (e.directiveName = T), (D === _ || _.$$isolateScope) && (e = et(e, { isolateScope: !0 })), p.push(e));
                            }
                            function w(t, e, n, i) {
                                var r,
                                    a,
                                    s = "data",
                                    l = !1,
                                    c = n;
                                if (b(e)) {
                                    if (
                                        ((a = e.match(v)),
                                        (e = e.substring(a[0].length)),
                                        a[3] && (a[1] ? (a[3] = null) : (a[1] = a[3])),
                                        "^" === a[1] ? (s = "inheritedData") : "^^" === a[1] && ((s = "inheritedData"), (c = n.parent())),
                                        "?" === a[2] && (l = !0),
                                        (r = null),
                                        i && "data" === s && (r = i[e]) && (r = r.instance),
                                        (r = r || c[s]("$" + e + "Controller")),
                                        !r && !l)
                                    )
                                        throw hi("ctreq", e, t);
                                    return r || null;
                                }
                                return (
                                    On(e) &&
                                        ((r = []),
                                        o(e, function (e) {
                                            r.push(w(t, e, n, i));
                                        })),
                                    r
                                );
                            }
                            function $(t, e, r, l, c) {
                                function u(t, e, i) {
                                    var r;
                                    return C(t) || ((i = e), (e = t), (t = n)), W && (r = b), i || (i = W ? x.parent() : x), c(t, e, r, i, T);
                                }
                                var h, f, v, y, b, $, x, k;
                                if (
                                    (a === r ? ((k = s), (x = s.$$element)) : ((x = wn(r)), (k = new rt(x, s))),
                                    D && (y = e.$new(!0)),
                                    c && (($ = u), ($.$$boundTransclude = c)),
                                    R &&
                                        ((S = {}),
                                        (b = {}),
                                        o(R, function (t) {
                                            var n = { $scope: t === D || t.$$isolateScope ? y : e, $element: x, $attrs: k, $transclude: $ };
                                            (v = t.controller), "@" == v && (v = k[t.name]), (n = g(v, n, !0, t.controllerAs)), (b[t.name] = n), W || x.data("$" + t.name + "Controller", n.instance), (S[t.name] = n);
                                        })),
                                    D)
                                ) {
                                    P.$$addScopeInfo(x, y, !0, !(O && (O === D || O === D.$$originalDirective))), P.$$addScopeClass(x, !0), (l = S && S[D.name]);
                                    var _ = y;
                                    l && l.identifier && !0 === D.bindToController && (_ = l.instance),
                                        o((y.$$isolateBindings = D.$$isolateBindings), function (t, n) {
                                            var r,
                                                o,
                                                a,
                                                s,
                                                l = t.attrName,
                                                c = t.optional;
                                            switch (t.mode) {
                                                case "@":
                                                    k.$observe(l, function (t) {
                                                        _[n] = t;
                                                    }),
                                                        (k.$$observers[l].$$scope = e),
                                                        k[l] && (_[n] = i(k[l])(e));
                                                    break;
                                                case "=":
                                                    if (c && !k[l]) break;
                                                    (o = m(k[l])),
                                                        (s = o.literal
                                                            ? j
                                                            : function (t, e) {
                                                                  return t === e || (t !== t && e !== e);
                                                              }),
                                                        (a =
                                                            o.assign ||
                                                            function () {
                                                                throw ((r = _[n] = o(e)), hi("nonassign", k[l], D.name));
                                                            }),
                                                        (r = _[n] = o(e)),
                                                        (c = function (t) {
                                                            return s(t, _[n]) || (s(t, r) ? a(e, (t = _[n])) : (_[n] = t)), (r = t);
                                                        }),
                                                        (c.$stateful = !0),
                                                        (c = t.collection ? e.$watchCollection(k[l], c) : e.$watch(m(k[l], c), null, o.literal)),
                                                        y.$on("$destroy", c);
                                                    break;
                                                case "&":
                                                    (o = m(k[l])),
                                                        (_[n] = function (t) {
                                                            return o(e, t);
                                                        });
                                            }
                                        });
                                }
                                for (
                                    S &&
                                        (o(S, function (t) {
                                            t();
                                        }),
                                        (S = null)),
                                        l = 0,
                                        h = d.length;
                                    h > l;
                                    l++
                                )
                                    (f = d[l]), nt(f, f.isolateScope ? y : e, x, k, f.require && w(f.directiveName, f.require, x, b), $);
                                var T = e;
                                for (D && (D.template || null === D.templateUrl) && (T = y), t && t(T, r.childNodes, n, c), l = p.length - 1; l >= 0; l--)
                                    (f = p[l]), nt(f, f.isolateScope ? y : e, x, k, f.require && w(f.directiveName, f.require, x, b), $);
                            }
                            h = h || {};
                            for (
                                var k,
                                    S,
                                    _,
                                    T,
                                    E,
                                    A,
                                    I = -Number.MAX_VALUE,
                                    R = h.controllerDirectives,
                                    D = h.newIsolateScopeDirective,
                                    O = h.templateDirective,
                                    M = h.nonTlbTranscludeDirective,
                                    F = !1,
                                    H = !1,
                                    W = h.hasElementTranscludeDirective,
                                    G = (s.$$element = wn(a)),
                                    J = l,
                                    K = 0,
                                    Q = t.length;
                                Q > K;
                                K++
                            ) {
                                _ = t[K];
                                var Z = _.$$start,
                                    it = _.$$end;
                                if ((Z && (G = N(a, Z, it)), (E = n), I > _.priority)) break;
                                if (
                                    ((E = _.scope) && (_.templateUrl || (y(E) ? (Y("new/isolated scope", D || k, _, G), (D = _)) : Y("new/isolated scope", D, _, G)), (k = k || _)),
                                    (T = _.name),
                                    !_.templateUrl && _.controller && ((E = _.controller), (R = R || {}), Y("'" + T + "' controller", R[T], _, G), (R[T] = _)),
                                    (E = _.transclude) &&
                                        ((F = !0),
                                        _.$$tlb || (Y("transclusion", M, _, G), (M = _)),
                                        "element" == E
                                            ? ((W = !0),
                                              (I = _.priority),
                                              (E = G),
                                              (G = s.$$element = wn(e.createComment(" " + T + ": " + s[T] + " "))),
                                              (a = G[0]),
                                              tt(c, Tn.call(E, 0), a),
                                              (J = P(E, l, I, u && u.name, { nonTlbTranscludeDirective: M })))
                                            : ((E = wn(ut(a)).contents()), G.empty(), (J = P(E, l)))),
                                    _.template)
                                )
                                    if (((H = !0), Y("template", O, _, G), (O = _), (E = x(_.template) ? _.template(G, s) : _.template), (E = st(E)), _.replace)) {
                                        if (((u = _), (E = Qn.test(E) ? Ft(X(_.templateNamespace, Ln(E))) : []), (a = E[0]), 1 != E.length || a.nodeType !== Fn)) throw hi("tplrt", T, "");
                                        tt(c, G, a), (Q = { $attr: {} }), (E = L(a, [], Q));
                                        var ot = t.splice(K + 1, t.length - (K + 1));
                                        D && B(E), (t = t.concat(E).concat(ot)), V(s, Q), (Q = t.length);
                                    } else G.html(E);
                                if (_.templateUrl)
                                    (H = !0),
                                        Y("template", O, _, G),
                                        (O = _),
                                        _.replace && (u = _),
                                        ($ = z(t.splice(K, t.length - K), G, s, c, F && J, d, p, { controllerDirectives: R, newIsolateScopeDirective: D, templateDirective: O, nonTlbTranscludeDirective: M })),
                                        (Q = t.length);
                                else if (_.compile)
                                    try {
                                        (A = _.compile(G, s, J)), x(A) ? f(null, A, Z, it) : A && f(A.pre, A.post, Z, it);
                                    } catch (at) {
                                        r(at, U(G));
                                    }
                                _.terminal && (($.terminal = !0), (I = Math.max(I, _.priority)));
                            }
                            return ($.scope = k && !0 === k.scope), ($.transcludeOnThisElement = F), ($.elementTranscludeOnThisElement = W), ($.templateOnThisElement = H), ($.transclude = J), (h.hasElementTranscludeDirective = W), $;
                        }
                        function B(t) {
                            for (var e = 0, n = t.length; n > e; e++) t[e] = p(t[e], { $$isolateScope: !0 });
                        }
                        function F(e, i, o, s, l, c, u) {
                            if (i === l) return null;
                            if (((l = null), a.hasOwnProperty(i))) {
                                var d;
                                i = t.get(i + "Directive");
                                for (var h = 0, f = i.length; f > h; h++)
                                    try {
                                        (d = i[h]), (s === n || s > d.priority) && -1 != d.restrict.indexOf(o) && (c && (d = p(d, { $$start: c, $$end: u })), e.push(d), (l = d));
                                    } catch (m) {
                                        r(m);
                                    }
                            }
                            return l;
                        }
                        function H(e) {
                            if (a.hasOwnProperty(e)) for (var n = t.get(e + "Directive"), i = 0, r = n.length; r > i; i++) if (((e = n[i]), e.multiElement)) return !0;
                            return !1;
                        }
                        function V(t, e) {
                            var n = e.$attr,
                                i = t.$attr,
                                r = t.$$element;
                            o(t, function (i, r) {
                                "$" != r.charAt(0) && (e[r] && e[r] !== i && (i += ("style" === r ? ";" : " ") + e[r]), t.$set(r, i, !0, n[r]));
                            }),
                                o(e, function (e, o) {
                                    "class" == o
                                        ? (R(r, e), (t["class"] = (t["class"] ? t["class"] + " " : "") + e))
                                        : "style" == o
                                        ? (r.attr("style", r.attr("style") + ";" + e), (t.style = (t.style ? t.style + ";" : "") + e))
                                        : "$" == o.charAt(0) || t.hasOwnProperty(o) || ((t[o] = e), (i[o] = n[o]));
                                });
                        }
                        function z(t, e, n, i, r, a, l, c) {
                            var u,
                                d,
                                h = [],
                                f = e[0],
                                m = t.shift(),
                                v = p(m, { templateUrl: null, transclude: null, replace: null, $$originalDirective: m }),
                                g = x(m.templateUrl) ? m.templateUrl(e, n) : m.templateUrl,
                                b = m.templateNamespace;
                            return (
                                e.empty(),
                                s(g).then(function (s) {
                                    var p, w;
                                    if (((s = st(s)), m.replace)) {
                                        if (((s = Qn.test(s) ? Ft(X(b, Ln(s))) : []), (p = s[0]), 1 != s.length || p.nodeType !== Fn)) throw hi("tplrt", m.name, g);
                                        (s = { $attr: {} }), tt(i, e, p);
                                        var $ = L(p, [], s);
                                        y(m.scope) && B($), (t = $.concat(t)), V(n, s);
                                    } else (p = f), e.html(s);
                                    for (
                                        t.unshift(v),
                                            u = M(t, p, n, r, e, m, a, l, c),
                                            o(i, function (t, n) {
                                                t == p && (i[n] = e[0]);
                                            }),
                                            d = D(e[0].childNodes, r);
                                        h.length;

                                    ) {
                                        (s = h.shift()), (w = h.shift());
                                        var x = h.shift(),
                                            k = h.shift(),
                                            $ = e[0];
                                        if (!s.$$destroyed) {
                                            if (w !== f) {
                                                var S = w.className;
                                                (c.hasElementTranscludeDirective && m.replace) || ($ = ut(p)), tt(x, wn(w), $), R(wn($), S);
                                            }
                                            (w = u.transcludeOnThisElement ? O(s, u.transclude, k) : k), u(d, s, $, i, w);
                                        }
                                    }
                                    h = null;
                                }),
                                function (t, e, n, i, r) {
                                    (t = r), e.$$destroyed || (h ? h.push(e, n, i, t) : (u.transcludeOnThisElement && (t = O(e, u.transclude, r)), u(d, e, n, i, t)));
                                }
                            );
                        }
                        function W(t, e) {
                            var n = e.priority - t.priority;
                            return 0 !== n ? n : t.name !== e.name ? (t.name < e.name ? -1 : 1) : t.index - e.index;
                        }
                        function Y(t, e, n, i) {
                            if (e) throw hi("multidir", e.name, n.name, t, U(i));
                        }
                        function G(t, e) {
                            var n = i(e, !0);
                            n &&
                                t.push({
                                    priority: 0,
                                    compile: function (t) {
                                        t = t.parent();
                                        var e = !!t.length;
                                        return (
                                            e && P.$$addBindingClass(t),
                                            function (t, i) {
                                                var r = i.parent();
                                                e || P.$$addBindingClass(r),
                                                    P.$$addBindingInfo(r, n.expressions),
                                                    t.$watch(n, function (t) {
                                                        i[0].nodeValue = t;
                                                    });
                                            }
                                        );
                                    },
                                });
                        }
                        function X(t, n) {
                            switch ((t = Sn(t || "html"))) {
                                case "svg":
                                case "math":
                                    var i = e.createElement("div");
                                    return (i.innerHTML = "<" + t + ">" + n + "</" + t + ">"), i.childNodes[0].childNodes;
                                default:
                                    return n;
                            }
                        }
                        function K(t, e) {
                            if ("srcdoc" == e) return _.HTML;
                            var n = A(t);
                            return "xlinkHref" == e || ("form" == n && "action" == e) || ("img" != n && ("src" == e || "ngSrc" == e)) ? _.RESOURCE_URL : void 0;
                        }
                        function Z(t, e, n, r, o) {
                            var a = K(t, r);
                            o = d[r] || o;
                            var s = i(n, !0, a, o);
                            if (s) {
                                if ("multiple" === r && "select" === A(t)) throw hi("selmulti", U(t));
                                e.push({
                                    priority: 100,
                                    compile: function () {
                                        return {
                                            pre: function (t, e, l) {
                                                if (((e = l.$$observers || (l.$$observers = {})), w.test(r))) throw hi("nodomevents");
                                                var c = l[r];
                                                c !== n && ((s = c && i(c, !0, a, o)), (n = c)),
                                                    s &&
                                                        ((l[r] = s(t)),
                                                        ((e[r] || (e[r] = [])).$$inter = !0),
                                                        ((l.$$observers && l.$$observers[r].$$scope) || t).$watch(s, function (t, e) {
                                                            "class" === r && t != e ? l.$updateClass(t, e) : l.$set(r, t);
                                                        }));
                                            },
                                        };
                                    },
                                });
                            }
                        }
                        function tt(t, n, i) {
                            var r,
                                o,
                                a = n[0],
                                s = n.length,
                                l = a.parentNode;
                            if (t)
                                for (r = 0, o = t.length; o > r; r++)
                                    if (t[r] == a) {
                                        (t[r++] = i), (o = r + s - 1);
                                        for (var c = t.length; c > r; r++, o++) c > o ? (t[r] = t[o]) : delete t[r];
                                        (t.length -= s - 1), t.context === a && (t.context = i);
                                        break;
                                    }
                            for (l && l.replaceChild(i, a), t = e.createDocumentFragment(), t.appendChild(a), wn(i).data(wn(a).data()), $n ? ((Dn = !0), $n.cleanData([a])) : delete wn.cache[a[wn.expando]], a = 1, s = n.length; s > a; a++)
                                (l = n[a]), wn(l).remove(), t.appendChild(l), delete n[a];
                            (n[0] = i), (n.length = 1);
                        }
                        function et(t, e) {
                            return u(
                                function () {
                                    return t.apply(null, arguments);
                                },
                                t,
                                e
                            );
                        }
                        function nt(t, e, n, i, o, a) {
                            try {
                                t(e, n, i, o, a);
                            } catch (s) {
                                r(s, U(n));
                            }
                        }
                        var rt = function (t, e) {
                            if (e) {
                                var n,
                                    i,
                                    r,
                                    o = Object.keys(e);
                                for (n = 0, i = o.length; i > n; n++) (r = o[n]), (this[r] = e[r]);
                            } else this.$attr = {};
                            this.$$element = t;
                        };
                        rt.prototype = {
                            $normalize: Mt,
                            $addClass: function (t) {
                                t && 0 < t.length && T.addClass(this.$$element, t);
                            },
                            $removeClass: function (t) {
                                t && 0 < t.length && T.removeClass(this.$$element, t);
                            },
                            $updateClass: function (t, e) {
                                var n = Bt(t, e);
                                n && n.length && T.addClass(this.$$element, n), (n = Bt(e, t)) && n.length && T.removeClass(this.$$element, n);
                            },
                            $set: function (t, e, i, a) {
                                var s = this.$$element[0],
                                    l = Ct(s, t),
                                    c = _t(s, t),
                                    s = t;
                                if (
                                    (l ? (this.$$element.prop(t, e), (a = l)) : c && ((this[c] = e), (s = c)),
                                    (this[t] = e),
                                    a ? (this.$attr[t] = a) : (a = this.$attr[t]) || (this.$attr[t] = a = J(t, "-")),
                                    (l = A(this.$$element)),
                                    ("a" === l && "href" === t) || ("img" === l && "src" === t))
                                )
                                    this[t] = e = E(e, "src" === t);
                                else if ("img" === l && "srcset" === t) {
                                    for (var l = "", c = Ln(e), u = /(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/, u = /\s/.test(c) ? u : /(,)/, c = c.split(u), u = Math.floor(c.length / 2), d = 0; u > d; d++)
                                        var p = 2 * d, l = l + E(Ln(c[p]), !0), l = l + (" " + Ln(c[p + 1]));
                                    (c = Ln(c[2 * d]).split(/\s/)), (l += E(Ln(c[0]), !0)), 2 === c.length && (l += " " + Ln(c[1])), (this[t] = e = l);
                                }
                                !1 !== i && (null === e || e === n ? this.$$element.removeAttr(a) : this.$$element.attr(a, e)),
                                    (t = this.$$observers) &&
                                        o(t[s], function (t) {
                                            try {
                                                t(e);
                                            } catch (n) {
                                                r(n);
                                            }
                                        });
                            },
                            $observe: function (t, e) {
                                var n = this,
                                    i = n.$$observers || (n.$$observers = it()),
                                    r = i[t] || (i[t] = []);
                                return (
                                    r.push(e),
                                    k.$evalAsync(function () {
                                        !r.$$inter && n.hasOwnProperty(t) && e(n[t]);
                                    }),
                                    function () {
                                        I(r, e);
                                    }
                                );
                            },
                        };
                        var ot = i.startSymbol(),
                            at = i.endSymbol(),
                            st =
                                "{{" == ot || "}}" == at
                                    ? f
                                    : function (t) {
                                          return t.replace(/\{\{/g, ot).replace(/}}/g, at);
                                      },
                            lt = /^ngAttr[A-Z]/;
                        return (
                            (P.$$addBindingInfo = $
                                ? function (t, e) {
                                      var n = t.data("$binding") || [];
                                      On(e) ? (n = n.concat(e)) : n.push(e), t.data("$binding", n);
                                  }
                                : h),
                            (P.$$addBindingClass = $
                                ? function (t) {
                                      R(t, "ng-binding");
                                  }
                                : h),
                            (P.$$addScopeInfo = $
                                ? function (t, e, n, i) {
                                      t.data(n ? (i ? "$isolateScopeNoTemplate" : "$isolateScope") : "$scope", e);
                                  }
                                : h),
                            (P.$$addScopeClass = $
                                ? function (t, e) {
                                      R(t, e ? "ng-isolate-scope" : "ng-scope");
                                  }
                                : h),
                            P
                        );
                    },
                ]);
        }
        function Mt(t) {
            return at(t.replace(fi, ""));
        }
        function Bt(t, e) {
            var n = "",
                i = t.split(/\s+/),
                r = e.split(/\s+/),
                o = 0;
            t: for (; o < i.length; o++) {
                for (var a = i[o], s = 0; s < r.length; s++) if (a == r[s]) continue t;
                n += (0 < n.length ? " " : "") + a;
            }
            return n;
        }
        function Ft(t) {
            t = wn(t);
            var e = t.length;
            if (1 >= e) return t;
            for (; e--; ) 8 === t[e].nodeType && En.call(t, e, 1);
            return t;
        }
        function Ht() {
            var t = {},
                e = !1,
                r = /^(\S+)(\s+as\s+(\w+))?$/;
            (this.register = function (e, n) {
                tt(e, "controller"), y(e) ? u(t, e) : (t[e] = n);
            }),
                (this.allowGlobals = function () {
                    e = !0;
                }),
                (this.$get = [
                    "$injector",
                    "$window",
                    function (o, a) {
                        function s(t, e, n, r) {
                            if (!t || !y(t.$scope)) throw i("$controller")("noscp", r, e);
                            t.$scope[e] = n;
                        }
                        return function (i, l, c, d) {
                            var p, h, f;
                            if (((c = !0 === c), d && b(d) && (f = d), b(i))) {
                                if (((d = i.match(r)), !d)) throw mi("ctrlfmt", i);
                                (h = d[1]), (f = f || d[3]), (i = t.hasOwnProperty(h) ? t[h] : et(l.$scope, h, !0) || (e ? et(a, h, !0) : n)), Z(i, h, !0);
                            }
                            return c
                                ? ((c = (On(i) ? i[i.length - 1] : i).prototype),
                                  (p = Object.create(c || null)),
                                  f && s(l, f, p, h || i.name),
                                  u(
                                      function () {
                                          return o.invoke(i, p, l, h), p;
                                      },
                                      { instance: p, identifier: f }
                                  ))
                                : ((p = o.instantiate(i, l, h)), f && s(l, f, p, h || i.name), p);
                        };
                    },
                ]);
        }
        function Vt() {
            this.$get = [
                "$window",
                function (t) {
                    return wn(t.document);
                },
            ];
        }
        function zt() {
            this.$get = [
                "$log",
                function (t) {
                    return function (e, n) {
                        t.error.apply(t, arguments);
                    };
                },
            ];
        }
        function Wt(t, e) {
            if (b(t)) {
                var n = t.replace(wi, "").trim();
                if (n) {
                    var i = e("Content-Type");
                    (i = i && 0 === i.indexOf(vi)) || (i = (i = n.match(yi)) && bi[i[0]].test(n)), i && (t = q(n));
                }
            }
            return t;
        }
        function Yt(t) {
            var e,
                n,
                i,
                r = it();
            return t
                ? (o(t.split("\n"), function (t) {
                      (i = t.indexOf(":")), (e = Sn(Ln(t.substr(0, i)))), (n = Ln(t.substr(i + 1))), e && (r[e] = r[e] ? r[e] + ", " + n : n);
                  }),
                  r)
                : r;
        }
        function Gt(t) {
            var e = y(t) ? t : n;
            return function (n) {
                return e || (e = Yt(t)), n ? ((n = e[Sn(n)]), void 0 === n && (n = null), n) : e;
            };
        }
        function Xt(t, e, n, i) {
            return x(i)
                ? i(t, e, n)
                : (o(i, function (i) {
                      t = i(t, e, n);
                  }),
                  t);
        }
        function Jt() {
            var t = (this.defaults = {
                    transformResponse: [Wt],
                    transformRequest: [
                        function (t) {
                            return y(t) && "[object File]" !== In.call(t) && "[object Blob]" !== In.call(t) && "[object FormData]" !== In.call(t) ? N(t) : t;
                        },
                    ],
                    headers: { common: { Accept: "application/json, text/plain, */*" }, post: P(gi), put: P(gi), patch: P(gi) },
                    xsrfCookieName: "XSRF-TOKEN",
                    xsrfHeaderName: "X-XSRF-TOKEN",
                }),
                e = !1;
            this.useApplyAsync = function (t) {
                return g(t) ? ((e = !!t), this) : e;
            };
            var r = (this.interceptors = []);
            this.$get = [
                "$httpBackend",
                "$browser",
                "$cacheFactory",
                "$rootScope",
                "$q",
                "$injector",
                function (s, l, c, d, p, h) {
                    function f(e) {
                        function r(t) {
                            var e = u({}, t);
                            return (e.data = t.data ? Xt(t.data, t.headers, t.status, s.transformResponse) : t.data), (t = t.status), t >= 200 && 300 > t ? e : p.reject(e);
                        }
                        function a(t) {
                            var e,
                                n = {};
                            return (
                                o(t, function (t, i) {
                                    x(t) ? ((e = t()), null != e && (n[i] = e)) : (n[i] = t);
                                }),
                                n
                            );
                        }
                        if (!Pn.isObject(e)) throw i("$http")("badreq", e);
                        var s = u({ method: "get", transformRequest: t.transformRequest, transformResponse: t.transformResponse }, e);
                        (s.headers = (function (e) {
                            var n,
                                i,
                                r = t.headers,
                                o = u({}, e.headers),
                                r = u({}, r.common, r[Sn(e.method)]);
                            t: for (n in r) {
                                e = Sn(n);
                                for (i in o) if (Sn(i) === e) continue t;
                                o[n] = r[n];
                            }
                            return a(o);
                        })(e)),
                            (s.method = _n(s.method));
                        var l = [
                                function (e) {
                                    var i = e.headers,
                                        a = Xt(e.data, Gt(i), n, e.transformRequest);
                                    return (
                                        v(a) &&
                                            o(i, function (t, e) {
                                                "content-type" === Sn(e) && delete i[e];
                                            }),
                                        v(e.withCredentials) && !v(t.withCredentials) && (e.withCredentials = t.withCredentials),
                                        m(e, a).then(r, r)
                                    );
                                },
                                n,
                            ],
                            c = p.when(s);
                        for (
                            o(S, function (t) {
                                (t.request || t.requestError) && l.unshift(t.request, t.requestError), (t.response || t.responseError) && l.push(t.response, t.responseError);
                            });
                            l.length;

                        ) {
                            e = l.shift();
                            var d = l.shift(),
                                c = c.then(e, d);
                        }
                        return (
                            (c.success = function (t) {
                                return (
                                    Z(t, "fn"),
                                    c.then(function (e) {
                                        t(e.data, e.status, e.headers, s);
                                    }),
                                    c
                                );
                            }),
                            (c.error = function (t) {
                                return (
                                    Z(t, "fn"),
                                    c.then(null, function (e) {
                                        t(e.data, e.status, e.headers, s);
                                    }),
                                    c
                                );
                            }),
                            c
                        );
                    }
                    function m(i, r) {
                        function o(t, n, i, r) {
                            function o() {
                                a(n, t, i, r);
                            }
                            h && (t >= 200 && 300 > t ? h.put(C, [t, n, Yt(i), r]) : h.remove(C)), e ? d.$applyAsync(o) : (o(), d.$$phase || d.$apply());
                        }
                        function a(t, e, n, r) {
                            (e = e >= -1 ? e : 0), (e >= 200 && 300 > e ? b.resolve : b.reject)({ data: t, status: e, headers: Gt(n), config: i, statusText: r });
                        }
                        function c(t) {
                            a(t.data, t.status, P(t.headers()), t.statusText);
                        }
                        function u() {
                            var t = f.pendingRequests.indexOf(i);
                            -1 !== t && f.pendingRequests.splice(t, 1);
                        }
                        var h,
                            m,
                            b = p.defer(),
                            $ = b.promise,
                            S = i.headers,
                            C = w(i.url, i.params);
                        return (
                            f.pendingRequests.push(i),
                            $.then(u, u),
                            (!i.cache && !t.cache) || !1 === i.cache || ("GET" !== i.method && "JSONP" !== i.method) || (h = y(i.cache) ? i.cache : y(t.cache) ? t.cache : k),
                            h && ((m = h.get(C)), g(m) ? (m && x(m.then) ? m.then(c, c) : On(m) ? a(m[1], m[0], P(m[2]), m[3]) : a(m, 200, {}, "OK")) : h.put(C, $)),
                            v(m) && ((m = Fe(i.url) ? l.cookies()[i.xsrfCookieName || t.xsrfCookieName] : n) && (S[i.xsrfHeaderName || t.xsrfHeaderName] = m), s(i.method, C, r, o, S, i.timeout, i.withCredentials, i.responseType)),
                            $
                        );
                    }
                    function w(t, e) {
                        if (!e) return t;
                        var n = [];
                        return (
                            a(e, function (t, e) {
                                null === t ||
                                    v(t) ||
                                    (On(t) || (t = [t]),
                                    o(t, function (t) {
                                        y(t) && (t = $(t) ? t.toISOString() : N(t)), n.push(V(e) + "=" + V(t));
                                    }));
                            }),
                            0 < n.length && (t += (-1 == t.indexOf("?") ? "?" : "&") + n.join("&")),
                            t
                        );
                    }
                    var k = c("$http"),
                        S = [];
                    return (
                        o(r, function (t) {
                            S.unshift(b(t) ? h.get(t) : h.invoke(t));
                        }),
                        (f.pendingRequests = []),
                        (function (t) {
                            o(arguments, function (t) {
                                f[t] = function (e, n) {
                                    return f(u(n || {}, { method: t, url: e }));
                                };
                            });
                        })("get", "delete", "head", "jsonp"),
                        (function (t) {
                            o(arguments, function (t) {
                                f[t] = function (e, n, i) {
                                    return f(u(i || {}, { method: t, url: e, data: n }));
                                };
                            });
                        })("post", "put", "patch"),
                        (f.defaults = t),
                        f
                    );
                },
            ];
        }
        function Kt() {
            return new t.XMLHttpRequest();
        }
        function Qt() {
            this.$get = [
                "$browser",
                "$window",
                "$document",
                function (t, e, n) {
                    return Zt(t, Kt, t.defer, e.angular.callbacks, n[0]);
                },
            ];
        }
        function Zt(t, e, i, r, a) {
            function s(t, e, n) {
                var i = a.createElement("script"),
                    o = null;
                return (
                    (i.type = "text/javascript"),
                    (i.src = t),
                    (i.async = !0),
                    (o = function (t) {
                        i.removeEventListener("load", o, !1), i.removeEventListener("error", o, !1), a.body.removeChild(i), (i = null);
                        var s = -1,
                            l = "unknown";
                        t && ("load" !== t.type || r[e].called || (t = { type: "error" }), (l = t.type), (s = "error" === t.type ? 404 : 200)), n && n(s, l);
                    }),
                    i.addEventListener("load", o, !1),
                    i.addEventListener("error", o, !1),
                    a.body.appendChild(i),
                    o
                );
            }
            return function (a, l, c, u, d, p, f, m) {
                function v() {
                    w && w(), $ && $.abort();
                }
                function y(e, r, o, a, s) {
                    S !== n && i.cancel(S), (w = $ = null), e(r, o, a, s), t.$$completeOutstandingRequest(h);
                }
                if ((t.$$incOutstandingRequestCount(), (l = l || t.url()), "jsonp" == Sn(a))) {
                    var b = "_" + (r.counter++).toString(36);
                    r[b] = function (t) {
                        (r[b].data = t), (r[b].called = !0);
                    };
                    var w = s(l.replace("JSON_CALLBACK", "angular.callbacks." + b), b, function (t, e) {
                        y(u, t, r[b].data, "", e), (r[b] = h);
                    });
                } else {
                    var $ = e();
                    if (
                        ($.open(a, l, !0),
                        o(d, function (t, e) {
                            g(t) && $.setRequestHeader(e, t);
                        }),
                        ($.onload = function () {
                            var t = $.statusText || "",
                                e = "response" in $ ? $.response : $.responseText,
                                n = 1223 === $.status ? 204 : $.status;
                            0 === n && (n = e ? 200 : "file" == Be(l).protocol ? 404 : 0), y(u, n, e, $.getAllResponseHeaders(), t);
                        }),
                        (a = function () {
                            y(u, -1, null, null, "");
                        }),
                        ($.onerror = a),
                        ($.onabort = a),
                        f && ($.withCredentials = !0),
                        m)
                    )
                        try {
                            $.responseType = m;
                        } catch (k) {
                            if ("json" !== m) throw k;
                        }
                    $.send(c || null);
                }
                if (p > 0) var S = i(v, p);
                else p && x(p.then) && p.then(v);
            };
        }
        function te() {
            var t = "{{",
                e = "}}";
            (this.startSymbol = function (e) {
                return e ? ((t = e), this) : t;
            }),
                (this.endSymbol = function (t) {
                    return t ? ((e = t), this) : e;
                }),
                (this.$get = [
                    "$parse",
                    "$exceptionHandler",
                    "$sce",
                    function (n, i, r) {
                        function o(t) {
                            return "\\\\\\" + t;
                        }
                        function a(o, a, p, h) {
                            function f(n) {
                                return n.replace(c, t).replace(d, e);
                            }
                            function m(t) {
                                try {
                                    var e = t;
                                    t = p ? r.getTrusted(p, e) : r.valueOf(e);
                                    var n;
                                    if (h && !g(t)) n = t;
                                    else if (null == t) n = "";
                                    else {
                                        switch (typeof t) {
                                            case "string":
                                                break;
                                            case "number":
                                                t = "" + t;
                                                break;
                                            default:
                                                t = N(t);
                                        }
                                        n = t;
                                    }
                                    return n;
                                } catch (a) {
                                    (n = $i("interr", o, a.toString())), i(n);
                                }
                            }
                            h = !!h;
                            for (var y, b, w = 0, $ = [], k = [], S = o.length, C = [], _ = []; S > w; ) {
                                if (-1 == (y = o.indexOf(t, w)) || -1 == (b = o.indexOf(e, y + s))) {
                                    w !== S && C.push(f(o.substring(w)));
                                    break;
                                }
                                w !== y && C.push(f(o.substring(w, y))), (w = o.substring(y + s, b)), $.push(w), k.push(n(w, m)), (w = b + l), _.push(C.length), C.push("");
                            }
                            if (p && 1 < C.length) throw $i("noconcat", o);
                            if (!a || $.length) {
                                var T = function (t) {
                                    for (var e = 0, n = $.length; n > e; e++) {
                                        if (h && v(t[e])) return;
                                        C[_[e]] = t[e];
                                    }
                                    return C.join("");
                                };
                                return u(
                                    function (t) {
                                        var e = 0,
                                            n = $.length,
                                            r = Array(n);
                                        try {
                                            for (; n > e; e++) r[e] = k[e](t);
                                            return T(r);
                                        } catch (a) {
                                            (t = $i("interr", o, a.toString())), i(t);
                                        }
                                    },
                                    {
                                        exp: o,
                                        expressions: $,
                                        $$watchDelegate: function (t, e, n) {
                                            var i;
                                            return t.$watchGroup(
                                                k,
                                                function (n, r) {
                                                    var o = T(n);
                                                    x(e) && e.call(this, o, n !== r ? i : o, t), (i = o);
                                                },
                                                n
                                            );
                                        },
                                    }
                                );
                            }
                        }
                        var s = t.length,
                            l = e.length,
                            c = new RegExp(t.replace(/./g, o), "g"),
                            d = new RegExp(e.replace(/./g, o), "g");
                        return (
                            (a.startSymbol = function () {
                                return t;
                            }),
                            (a.endSymbol = function () {
                                return e;
                            }),
                            a
                        );
                    },
                ]);
        }
        function ee() {
            this.$get = [
                "$rootScope",
                "$window",
                "$q",
                "$$q",
                function (t, e, n, i) {
                    function r(r, a, s, l) {
                        var c = e.setInterval,
                            u = e.clearInterval,
                            d = 0,
                            p = g(l) && !l,
                            h = (p ? i : n).defer(),
                            f = h.promise;
                        return (
                            (s = g(s) ? s : 0),
                            f.then(null, null, r),
                            (f.$$intervalId = c(function () {
                                h.notify(d++), s > 0 && d >= s && (h.resolve(d), u(f.$$intervalId), delete o[f.$$intervalId]), p || t.$apply();
                            }, a)),
                            (o[f.$$intervalId] = h),
                            f
                        );
                    }
                    var o = {};
                    return (
                        (r.cancel = function (t) {
                            return t && t.$$intervalId in o ? (o[t.$$intervalId].reject("canceled"), e.clearInterval(t.$$intervalId), delete o[t.$$intervalId], !0) : !1;
                        }),
                        r
                    );
                },
            ];
        }
        function ne() {
            this.$get = function () {
                return {
                    id: "en-us",
                    NUMBER_FORMATS: {
                        DECIMAL_SEP: ".",
                        GROUP_SEP: ",",
                        PATTERNS: [
                            { minInt: 1, minFrac: 0, maxFrac: 3, posPre: "", posSuf: "", negPre: "-", negSuf: "", gSize: 3, lgSize: 3 },
                            { minInt: 1, minFrac: 2, maxFrac: 2, posPre: "¤", posSuf: "", negPre: "(¤", negSuf: ")", gSize: 3, lgSize: 3 },
                        ],
                        CURRENCY_SYM: "$",
                    },
                    DATETIME_FORMATS: {
                        MONTH: "January February March April May June July August September October November December".split(" "),
                        SHORTMONTH: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
                        DAY: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
                        SHORTDAY: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
                        AMPMS: ["AM", "PM"],
                        medium: "MMM d, y h:mm:ss a",
                        short: "M/d/yy h:mm a",
                        fullDate: "EEEE, MMMM d, y",
                        longDate: "MMMM d, y",
                        mediumDate: "MMM d, y",
                        shortDate: "M/d/yy",
                        mediumTime: "h:mm:ss a",
                        shortTime: "h:mm a",
                        ERANAMES: ["Before Christ", "Anno Domini"],
                        ERAS: ["BC", "AD"],
                    },
                    pluralCat: function (t) {
                        return 1 === t ? "one" : "other";
                    },
                };
            };
        }
        function ie(t) {
            t = t.split("/");
            for (var e = t.length; e--; ) t[e] = H(t[e]);
            return t.join("/");
        }
        function re(t, e) {
            var n = Be(t);
            (e.$$protocol = n.protocol), (e.$$host = n.hostname), (e.$$port = d(n.port) || ki[n.protocol] || null);
        }
        function oe(t, e) {
            var n = "/" !== t.charAt(0);
            n && (t = "/" + t);
            var i = Be(t);
            (e.$$path = decodeURIComponent(n && "/" === i.pathname.charAt(0) ? i.pathname.substring(1) : i.pathname)),
                (e.$$search = B(i.search)),
                (e.$$hash = decodeURIComponent(i.hash)),
                e.$$path && "/" != e.$$path.charAt(0) && (e.$$path = "/" + e.$$path);
        }
        function ae(t, e) {
            return 0 === e.indexOf(t) ? e.substr(t.length) : void 0;
        }
        function se(t) {
            var e = t.indexOf("#");
            return -1 == e ? t : t.substr(0, e);
        }
        function le(t) {
            return t.replace(/(#.+)|#$/, "$1");
        }
        function ce(t, e, i) {
            (this.$$html5 = !0),
                (i = i || ""),
                re(t, this),
                (this.$$parse = function (t) {
                    var n = ae(e, t);
                    if (!b(n)) throw Si("ipthprfx", t, e);
                    oe(n, this), this.$$path || (this.$$path = "/"), this.$$compose();
                }),
                (this.$$compose = function () {
                    var t = F(this.$$search),
                        n = this.$$hash ? "#" + H(this.$$hash) : "";
                    (this.$$url = ie(this.$$path) + (t ? "?" + t : "") + n), (this.$$absUrl = e + this.$$url.substr(1));
                }),
                (this.$$parseLinkUrl = function (r, o) {
                    if (o && "#" === o[0]) return this.hash(o.slice(1)), !0;
                    var a, s;
                    return (a = ae(t, r)) !== n ? ((s = a), (s = (a = ae(i, a)) !== n ? e + (ae("/", a) || a) : t + s)) : (a = ae(e, r)) !== n ? (s = e + a) : e == r + "/" && (s = e), s && this.$$parse(s), !!s;
                });
        }
        function ue(t, e, n) {
            re(t, this),
                (this.$$parse = function (i) {
                    var r,
                        o = ae(t, i) || ae(e, i);
                    v(o) || "#" !== o.charAt(0) ? (this.$$html5 ? (r = o) : ((r = ""), v(o) && ((t = i), this.replace()))) : ((r = ae(n, o)), v(r) && (r = o)), oe(r, this), (i = this.$$path);
                    var o = t,
                        a = /^\/[A-Z]:(\/.*)/;
                    0 === r.indexOf(o) && (r = r.replace(o, "")), a.exec(r) || (i = (r = a.exec(i)) ? r[1] : i), (this.$$path = i), this.$$compose();
                }),
                (this.$$compose = function () {
                    var e = F(this.$$search),
                        i = this.$$hash ? "#" + H(this.$$hash) : "";
                    (this.$$url = ie(this.$$path) + (e ? "?" + e : "") + i), (this.$$absUrl = t + (this.$$url ? n + this.$$url : ""));
                }),
                (this.$$parseLinkUrl = function (e, n) {
                    return se(t) == se(e) ? (this.$$parse(e), !0) : !1;
                });
        }
        function de(t, e, n) {
            (this.$$html5 = !0),
                ue.apply(this, arguments),
                (this.$$parseLinkUrl = function (i, r) {
                    if (r && "#" === r[0]) return this.hash(r.slice(1)), !0;
                    var o, a;
                    return t == se(i) ? (o = i) : (a = ae(e, i)) ? (o = t + n + a) : e === i + "/" && (o = e), o && this.$$parse(o), !!o;
                }),
                (this.$$compose = function () {
                    var e = F(this.$$search),
                        i = this.$$hash ? "#" + H(this.$$hash) : "";
                    (this.$$url = ie(this.$$path) + (e ? "?" + e : "") + i), (this.$$absUrl = t + n + this.$$url);
                });
        }
        function pe(t) {
            return function () {
                return this[t];
            };
        }
        function he(t, e) {
            return function (n) {
                return v(n) ? this[t] : ((this[t] = e(n)), this.$$compose(), this);
            };
        }
        function fe() {
            var t = "",
                e = { enabled: !1, requireBase: !0, rewriteLinks: !0 };
            (this.hashPrefix = function (e) {
                return g(e) ? ((t = e), this) : t;
            }),
                (this.html5Mode = function (t) {
                    return _(t) ? ((e.enabled = t), this) : y(t) ? (_(t.enabled) && (e.enabled = t.enabled), _(t.requireBase) && (e.requireBase = t.requireBase), _(t.rewriteLinks) && (e.rewriteLinks = t.rewriteLinks), this) : e;
                }),
                (this.$get = [
                    "$rootScope",
                    "$browser",
                    "$sniffer",
                    "$rootElement",
                    "$window",
                    function (n, i, r, o, a) {
                        function s(t, e, n) {
                            var r = c.url(),
                                o = c.$$state;
                            try {
                                i.url(t, e, n), (c.$$state = i.state());
                            } catch (a) {
                                throw (c.url(r), (c.$$state = o), a);
                            }
                        }
                        function l(t, e) {
                            n.$broadcast("$locationChangeSuccess", c.absUrl(), t, c.$$state, e);
                        }
                        var c, u;
                        u = i.baseHref();
                        var d,
                            p = i.url();
                        if (e.enabled) {
                            if (!u && e.requireBase) throw Si("nobase");
                            (d = p.substring(0, p.indexOf("/", p.indexOf("//") + 2)) + (u || "/")), (u = r.history ? ce : de);
                        } else (d = se(p)), (u = ue);
                        var h = d.substr(0, se(d).lastIndexOf("/") + 1);
                        (c = new u(d, h, "#" + t)), c.$$parseLinkUrl(p, p), (c.$$state = i.state());
                        var f = /^\s*(javascript|mailto):/i;
                        o.on("click", function (t) {
                            if (e.rewriteLinks && !t.ctrlKey && !t.metaKey && !t.shiftKey && 2 != t.which && 2 != t.button) {
                                for (var r = wn(t.target); "a" !== A(r[0]); ) if (r[0] === o[0] || !(r = r.parent())[0]) return;
                                var s = r.prop("href"),
                                    l = r.attr("href") || r.attr("xlink:href");
                                y(s) && "[object SVGAnimatedString]" === s.toString() && (s = Be(s.animVal).href),
                                    f.test(s) || !s || r.attr("target") || t.isDefaultPrevented() || !c.$$parseLinkUrl(s, l) || (t.preventDefault(), c.absUrl() != i.url() && (n.$apply(), (a.angular["ff-684208-preventDefault"] = !0)));
                            }
                        }),
                            le(c.absUrl()) != le(p) && i.url(c.absUrl(), !0);
                        var m = !0;
                        return (
                            i.onUrlChange(function (t, e) {
                                v(ae(h, t))
                                    ? (a.location.href = t)
                                    : (n.$evalAsync(function () {
                                          var i,
                                              r = c.absUrl(),
                                              o = c.$$state;
                                          c.$$parse(t), (c.$$state = e), (i = n.$broadcast("$locationChangeStart", t, r, e, o).defaultPrevented), c.absUrl() === t && (i ? (c.$$parse(r), (c.$$state = o), s(r, !1, o)) : ((m = !1), l(r, o)));
                                      }),
                                      n.$$phase || n.$digest());
                            }),
                            n.$watch(function () {
                                var t = le(i.url()),
                                    e = le(c.absUrl()),
                                    o = i.state(),
                                    a = c.$$replace,
                                    u = t !== e || (c.$$html5 && r.history && o !== c.$$state);
                                (m || u) &&
                                    ((m = !1),
                                    n.$evalAsync(function () {
                                        var e = c.absUrl(),
                                            i = n.$broadcast("$locationChangeStart", e, t, c.$$state, o).defaultPrevented;
                                        c.absUrl() === e && (i ? (c.$$parse(t), (c.$$state = o)) : (u && s(e, a, o === c.$$state ? null : c.$$state), l(t, o)));
                                    })),
                                    (c.$$replace = !1);
                            }),
                            c
                        );
                    },
                ]);
        }
        function me() {
            var t = !0,
                e = this;
            (this.debugEnabled = function (e) {
                return g(e) ? ((t = e), this) : t;
            }),
                (this.$get = [
                    "$window",
                    function (n) {
                        function i(t) {
                            return (
                                t instanceof Error && (t.stack ? (t = t.message && -1 === t.stack.indexOf(t.message) ? "Error: " + t.message + "\n" + t.stack : t.stack) : t.sourceURL && (t = t.message + "\n" + t.sourceURL + ":" + t.line)),
                                t
                            );
                        }
                        function r(t) {
                            var e = n.console || {},
                                r = e[t] || e.log || h;
                            t = !1;
                            try {
                                t = !!r.apply;
                            } catch (a) {}
                            return t
                                ? function () {
                                      var t = [];
                                      return (
                                          o(arguments, function (e) {
                                              t.push(i(e));
                                          }),
                                          r.apply(e, t)
                                      );
                                  }
                                : function (t, e) {
                                      r(t, null == e ? "" : e);
                                  };
                        }
                        return {
                            log: r("log"),
                            info: r("info"),
                            warn: r("warn"),
                            error: r("error"),
                            debug: (function () {
                                var n = r("debug");
                                return function () {
                                    t && n.apply(e, arguments);
                                };
                            })(),
                        };
                    },
                ]);
        }
        function ve(t, e) {
            if ("__defineGetter__" === t || "__defineSetter__" === t || "__lookupGetter__" === t || "__lookupSetter__" === t || "__proto__" === t) throw _i("isecfld", e);
            return t;
        }
        function ge(t, e) {
            if (((t += ""), !b(t))) throw _i("iseccst", e);
            return t;
        }
        function ye(t, e) {
            if (t) {
                if (t.constructor === t) throw _i("isecfn", e);
                if (t.window === t) throw _i("isecwindow", e);
                if (t.children && (t.nodeName || (t.prop && t.attr && t.find))) throw _i("isecdom", e);
                if (t === Object) throw _i("isecobj", e);
            }
            return t;
        }
        function be(t) {
            return t.constant;
        }
        function we(t, e, n, i, r) {
            ye(t, r), ye(e, r), (n = n.split("."));
            for (var o, a = 0; 1 < n.length; a++) {
                o = ve(n.shift(), r);
                var s = (0 === a && e && e[o]) || t[o];
                s || ((s = {}), (t[o] = s)), (t = ye(s, r));
            }
            return (o = ve(n.shift(), r)), ye(t[o], r), (t[o] = i);
        }
        function $e(t) {
            return "constructor" == t;
        }
        function xe(t, e, i, r, o, a, s) {
            ve(t, a), ve(e, a), ve(i, a), ve(r, a), ve(o, a);
            var l = function (t) {
                    return ye(t, a);
                },
                c = s || $e(t) ? l : f,
                u = s || $e(e) ? l : f,
                d = s || $e(i) ? l : f,
                p = s || $e(r) ? l : f,
                h = s || $e(o) ? l : f;
            return function (a, s) {
                var l = s && s.hasOwnProperty(t) ? s : a;
                return null == l ? l : ((l = c(l[t])), e ? (null == l ? n : ((l = u(l[e])), i ? (null == l ? n : ((l = d(l[i])), r ? (null == l ? n : ((l = p(l[r])), o ? (null == l ? n : (l = h(l[o]))) : l)) : l)) : l)) : l);
            };
        }
        function ke(t, e) {
            return function (n, i) {
                return t(n, i, ye, e);
            };
        }
        function Se(t, e, i) {
            var r = e.expensiveChecks,
                a = r ? Li : Oi,
                s = a[t];
            if (s) return s;
            var l = t.split("."),
                c = l.length;
            if (e.csp)
                s =
                    6 > c
                        ? xe(l[0], l[1], l[2], l[3], l[4], i, r)
                        : function (t, e) {
                              var o,
                                  a = 0;
                              do (o = xe(l[a++], l[a++], l[a++], l[a++], l[a++], i, r)(t, e)), (e = n), (t = o);
                              while (c > a);
                              return o;
                          };
            else {
                var u = "";
                r && (u += "s = eso(s, fe);\nl = eso(l, fe);\n");
                var d = r;
                o(l, function (t, e) {
                    ve(t, i);
                    var n = (e ? "s" : '((l&&l.hasOwnProperty("' + t + '"))?l:s)') + "." + t;
                    (r || $e(t)) && ((n = "eso(" + n + ", fe)"), (d = !0)), (u += "if(s == null) return undefined;\ns=" + n + ";\n");
                }),
                    (u += "return s;"),
                    (e = new Function("s", "l", "eso", "fe", u)),
                    (e.toString = m(u)),
                    d && (e = ke(e, i)),
                    (s = e);
            }
            return (
                (s.sharedGetter = !0),
                (s.assign = function (e, n, i) {
                    return we(e, i, t, n, t);
                }),
                (a[t] = s)
            );
        }
        function Ce(t) {
            return x(t.valueOf) ? t.valueOf() : Ni.call(t);
        }
        function _e() {
            var t = it(),
                e = it();
            this.$get = [
                "$filter",
                "$sniffer",
                function (n, i) {
                    function r(t) {
                        var e = t;
                        return (
                            t.sharedGetter &&
                                ((e = function (e, n) {
                                    return t(e, n);
                                }),
                                (e.literal = t.literal),
                                (e.constant = t.constant),
                                (e.assign = t.assign)),
                            e
                        );
                    }
                    function a(t, e) {
                        for (var n = 0, i = t.length; i > n; n++) {
                            var r = t[n];
                            r.constant || (r.inputs ? a(r.inputs, e) : -1 === e.indexOf(r) && e.push(r));
                        }
                        return e;
                    }
                    function s(t, e) {
                        return null == t || null == e ? t === e : "object" == typeof t && ((t = Ce(t)), "object" == typeof t) ? !1 : t === e || (t !== t && e !== e);
                    }
                    function l(t, e, n, i) {
                        var r,
                            o = i.$$inputs || (i.$$inputs = a(i.inputs, []));
                        if (1 === o.length) {
                            var l = s,
                                o = o[0];
                            return t.$watch(
                                function (t) {
                                    var e = o(t);
                                    return s(e, l) || ((r = i(t)), (l = e && Ce(e))), r;
                                },
                                e,
                                n
                            );
                        }
                        for (var c = [], u = 0, d = o.length; d > u; u++) c[u] = s;
                        return t.$watch(
                            function (t) {
                                for (var e = !1, n = 0, a = o.length; a > n; n++) {
                                    var l = o[n](t);
                                    (e || (e = !s(l, c[n]))) && (c[n] = l && Ce(l));
                                }
                                return e && (r = i(t)), r;
                            },
                            e,
                            n
                        );
                    }
                    function c(t, e, n, i) {
                        var r, o;
                        return (r = t.$watch(
                            function (t) {
                                return i(t);
                            },
                            function (t, n, i) {
                                (o = t),
                                    x(e) && e.apply(this, arguments),
                                    g(t) &&
                                        i.$$postDigest(function () {
                                            g(o) && r();
                                        });
                            },
                            n
                        ));
                    }
                    function u(t, e, n, i) {
                        function r(t) {
                            var e = !0;
                            return (
                                o(t, function (t) {
                                    g(t) || (e = !1);
                                }),
                                e
                            );
                        }
                        var a, s;
                        return (a = t.$watch(
                            function (t) {
                                return i(t);
                            },
                            function (t, n, i) {
                                (s = t),
                                    x(e) && e.call(this, t, n, i),
                                    r(t) &&
                                        i.$$postDigest(function () {
                                            r(s) && a();
                                        });
                            },
                            n
                        ));
                    }
                    function d(t, e, n, i) {
                        var r;
                        return (r = t.$watch(
                            function (t) {
                                return i(t);
                            },
                            function (t, n, i) {
                                x(e) && e.apply(this, arguments), r();
                            },
                            n
                        ));
                    }
                    function p(t, e) {
                        if (!e) return t;
                        var n = t.$$watchDelegate,
                            n =
                                n !== u && n !== c
                                    ? function (n, i) {
                                          var r = t(n, i);
                                          return e(r, n, i);
                                      }
                                    : function (n, i) {
                                          var r = t(n, i),
                                              o = e(r, n, i);
                                          return g(r) ? o : r;
                                      };
                        return t.$$watchDelegate && t.$$watchDelegate !== l ? (n.$$watchDelegate = t.$$watchDelegate) : e.$stateful || ((n.$$watchDelegate = l), (n.inputs = [t])), n;
                    }
                    var f = { csp: i.csp, expensiveChecks: !1 },
                        m = { csp: i.csp, expensiveChecks: !0 };
                    return function (i, o, a) {
                        var s, v, g;
                        switch (typeof i) {
                            case "string":
                                g = i = i.trim();
                                var y = a ? e : t;
                                return (
                                    (s = y[g]),
                                    s ||
                                        (":" === i.charAt(0) && ":" === i.charAt(1) && ((v = !0), (i = i.substring(2))),
                                        (a = a ? m : f),
                                        (s = new ji(a)),
                                        (s = new Di(s, n, a).parse(i)),
                                        s.constant ? (s.$$watchDelegate = d) : v ? ((s = r(s)), (s.$$watchDelegate = s.literal ? u : c)) : s.inputs && (s.$$watchDelegate = l),
                                        (y[g] = s)),
                                    p(s, o)
                                );
                            case "function":
                                return p(i, o);
                            default:
                                return p(h, o);
                        }
                    };
                },
            ];
        }
        function Te() {
            this.$get = [
                "$rootScope",
                "$exceptionHandler",
                function (t, e) {
                    return Ae(function (e) {
                        t.$evalAsync(e);
                    }, e);
                },
            ];
        }
        function Ee() {
            this.$get = [
                "$browser",
                "$exceptionHandler",
                function (t, e) {
                    return Ae(function (e) {
                        t.defer(e);
                    }, e);
                },
            ];
        }
        function Ae(t, e) {
            function r(t, e, n) {
                function i(e) {
                    return function (n) {
                        r || ((r = !0), e.call(t, n));
                    };
                }
                var r = !1;
                return [i(e), i(n)];
            }
            function a() {
                this.$$state = { status: 0 };
            }
            function s(t, e) {
                return function (n) {
                    e.call(t, n);
                };
            }
            function l(i) {
                !i.processScheduled &&
                    i.pending &&
                    ((i.processScheduled = !0),
                    t(function () {
                        var t, r, o;
                        (o = i.pending), (i.processScheduled = !1), (i.pending = n);
                        for (var a = 0, s = o.length; s > a; ++a) {
                            (r = o[a][0]), (t = o[a][i.status]);
                            try {
                                x(t) ? r.resolve(t(i.value)) : 1 === i.status ? r.resolve(i.value) : r.reject(i.value);
                            } catch (l) {
                                r.reject(l), e(l);
                            }
                        }
                    }));
            }
            function c() {
                (this.promise = new a()), (this.resolve = s(this, this.resolve)), (this.reject = s(this, this.reject)), (this.notify = s(this, this.notify));
            }
            var u = i("$q", TypeError);
            (a.prototype = {
                then: function (t, e, n) {
                    var i = new c();
                    return (this.$$state.pending = this.$$state.pending || []), this.$$state.pending.push([i, t, e, n]), 0 < this.$$state.status && l(this.$$state), i.promise;
                },
                catch: function (t) {
                    return this.then(null, t);
                },
                finally: function (t, e) {
                    return this.then(
                        function (e) {
                            return p(e, !0, t);
                        },
                        function (e) {
                            return p(e, !1, t);
                        },
                        e
                    );
                },
            }),
                (c.prototype = {
                    resolve: function (t) {
                        this.promise.$$state.status || (t === this.promise ? this.$$reject(u("qcycle", t)) : this.$$resolve(t));
                    },
                    $$resolve: function (t) {
                        var n, i;
                        i = r(this, this.$$resolve, this.$$reject);
                        try {
                            (y(t) || x(t)) && (n = t && t.then),
                                x(n) ? ((this.promise.$$state.status = -1), n.call(t, i[0], i[1], this.notify)) : ((this.promise.$$state.value = t), (this.promise.$$state.status = 1), l(this.promise.$$state));
                        } catch (o) {
                            i[1](o), e(o);
                        }
                    },
                    reject: function (t) {
                        this.promise.$$state.status || this.$$reject(t);
                    },
                    $$reject: function (t) {
                        (this.promise.$$state.value = t), (this.promise.$$state.status = 2), l(this.promise.$$state);
                    },
                    notify: function (n) {
                        var i = this.promise.$$state.pending;
                        0 >= this.promise.$$state.status &&
                            i &&
                            i.length &&
                            t(function () {
                                for (var t, r, o = 0, a = i.length; a > o; o++) {
                                    (r = i[o][0]), (t = i[o][3]);
                                    try {
                                        r.notify(x(t) ? t(n) : n);
                                    } catch (s) {
                                        e(s);
                                    }
                                }
                            });
                    },
                });
            var d = function (t, e) {
                    var n = new c();
                    return e ? n.resolve(t) : n.reject(t), n.promise;
                },
                p = function (t, e, n) {
                    var i = null;
                    try {
                        x(n) && (i = n());
                    } catch (r) {
                        return d(r, !1);
                    }
                    return i && x(i.then)
                        ? i.then(
                              function () {
                                  return d(t, e);
                              },
                              function (t) {
                                  return d(t, !1);
                              }
                          )
                        : d(t, e);
                },
                h = function (t, e, n, i) {
                    var r = new c();
                    return r.resolve(t), r.promise.then(e, n, i);
                },
                f = function m(t) {
                    if (!x(t)) throw u("norslvr", t);
                    if (!(this instanceof m)) return new m(t);
                    var e = new c();
                    return (
                        t(
                            function (t) {
                                e.resolve(t);
                            },
                            function (t) {
                                e.reject(t);
                            }
                        ),
                        e.promise
                    );
                };
            return (
                (f.defer = function () {
                    return new c();
                }),
                (f.reject = function (t) {
                    var e = new c();
                    return e.reject(t), e.promise;
                }),
                (f.when = h),
                (f.all = function (t) {
                    var e = new c(),
                        n = 0,
                        i = On(t) ? [] : {};
                    return (
                        o(t, function (t, r) {
                            n++,
                                h(t).then(
                                    function (t) {
                                        i.hasOwnProperty(r) || ((i[r] = t), --n || e.resolve(i));
                                    },
                                    function (t) {
                                        i.hasOwnProperty(r) || e.reject(t);
                                    }
                                );
                        }),
                        0 === n && e.resolve(i),
                        e.promise
                    );
                }),
                f
            );
        }
        function Ie() {
            this.$get = [
                "$window",
                "$timeout",
                function (t, e) {
                    function n() {
                        for (var t = 0; t < u.length; t++) {
                            var e = u[t];
                            e && ((u[t] = null), e());
                        }
                        c = u.length = 0;
                    }
                    function i(t) {
                        var e = u.length;
                        return (
                            c++,
                            u.push(t),
                            0 === e && (l = s(n)),
                            function () {
                                e >= 0 && ((e = u[e] = null), 0 === --c && l && (l(), (l = null), (u.length = 0)));
                            }
                        );
                    }
                    var r = t.requestAnimationFrame || t.webkitRequestAnimationFrame,
                        o = t.cancelAnimationFrame || t.webkitCancelAnimationFrame || t.webkitCancelRequestAnimationFrame,
                        a = !!r,
                        s = a
                            ? function (t) {
                                  var e = r(t);
                                  return function () {
                                      o(e);
                                  };
                              }
                            : function (t) {
                                  var n = e(t, 16.66, !1);
                                  return function () {
                                      e.cancel(n);
                                  };
                              };
                    i.supported = a;
                    var l,
                        c = 0,
                        u = [];
                    return i;
                },
            ];
        }
        function Re() {
            function t(t) {
                function e() {
                    (this.$$watchers = this.$$nextSibling = this.$$childHead = this.$$childTail = null), (this.$$listeners = {}), (this.$$listenerCount = {}), (this.$id = ++jn), (this.$$ChildScope = null);
                }
                return (e.prototype = t), e;
            }
            var e = 10,
                n = i("$rootScope"),
                a = null,
                s = null;
            (this.digestTtl = function (t) {
                return arguments.length && (e = t), e;
            }),
                (this.$get = [
                    "$injector",
                    "$exceptionHandler",
                    "$parse",
                    "$browser",
                    function (i, l, c, u) {
                        function d(t) {
                            t.currentScope.$$destroyed = !0;
                        }
                        function p() {
                            (this.$id = ++jn),
                                (this.$$phase = this.$parent = this.$$watchers = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = null),
                                (this.$root = this),
                                (this.$$destroyed = !1),
                                (this.$$listeners = {}),
                                (this.$$listenerCount = {}),
                                (this.$$isolateBindings = null);
                        }
                        function f(t) {
                            if ($.$$phase) throw n("inprog", $.$$phase);
                            $.$$phase = t;
                        }
                        function m(t, e, n) {
                            do (t.$$listenerCount[n] -= e), 0 === t.$$listenerCount[n] && delete t.$$listenerCount[n];
                            while ((t = t.$parent));
                        }
                        function g() {}
                        function b() {
                            for (; C.length; )
                                try {
                                    C.shift()();
                                } catch (t) {
                                    l(t);
                                }
                            s = null;
                        }
                        function w() {
                            null === s &&
                                (s = u.defer(function () {
                                    $.$apply(b);
                                }));
                        }
                        p.prototype = {
                            constructor: p,
                            $new: function (e, n) {
                                var i;
                                return (
                                    (n = n || this),
                                    e ? ((i = new p()), (i.$root = this.$root)) : (this.$$ChildScope || (this.$$ChildScope = t(this)), (i = new this.$$ChildScope())),
                                    (i.$parent = n),
                                    (i.$$prevSibling = n.$$childTail),
                                    n.$$childHead ? ((n.$$childTail.$$nextSibling = i), (n.$$childTail = i)) : (n.$$childHead = n.$$childTail = i),
                                    (e || n != this) && i.$on("$destroy", d),
                                    i
                                );
                            },
                            $watch: function (t, e, n) {
                                var i = c(t);
                                if (i.$$watchDelegate) return i.$$watchDelegate(this, e, n, i);
                                var r = this.$$watchers,
                                    o = { fn: e, last: g, get: i, exp: t, eq: !!n };
                                return (
                                    (a = null),
                                    x(e) || (o.fn = h),
                                    r || (r = this.$$watchers = []),
                                    r.unshift(o),
                                    function () {
                                        I(r, o), (a = null);
                                    }
                                );
                            },
                            $watchGroup: function (t, e) {
                                function n() {
                                    (l = !1), c ? ((c = !1), e(r, r, s)) : e(r, i, s);
                                }
                                var i = Array(t.length),
                                    r = Array(t.length),
                                    a = [],
                                    s = this,
                                    l = !1,
                                    c = !0;
                                if (!t.length) {
                                    var u = !0;
                                    return (
                                        s.$evalAsync(function () {
                                            u && e(r, r, s);
                                        }),
                                        function () {
                                            u = !1;
                                        }
                                    );
                                }
                                return 1 === t.length
                                    ? this.$watch(t[0], function (t, n, o) {
                                          (r[0] = t), (i[0] = n), e(r, t === n ? r : i, o);
                                      })
                                    : (o(t, function (t, e) {
                                          var o = s.$watch(t, function (t, o) {
                                              (r[e] = t), (i[e] = o), l || ((l = !0), s.$evalAsync(n));
                                          });
                                          a.push(o);
                                      }),
                                      function () {
                                          for (; a.length; ) a.shift()();
                                      });
                            },
                            $watchCollection: function (t, e) {
                                function n(t) {
                                    i = t;
                                    var e, n, a, s;
                                    if (!v(i)) {
                                        if (y(i))
                                            if (r(i))
                                                for (o !== p && ((o = p), (m = o.length = 0), u++), t = i.length, m !== t && (u++, (o.length = m = t)), e = 0; t > e; e++)
                                                    (s = o[e]), (a = i[e]), (n = s !== s && a !== a), n || s === a || (u++, (o[e] = a));
                                            else {
                                                o !== h && ((o = h = {}), (m = 0), u++), (t = 0);
                                                for (e in i) i.hasOwnProperty(e) && (t++, (a = i[e]), (s = o[e]), e in o ? ((n = s !== s && a !== a), n || s === a || (u++, (o[e] = a))) : (m++, (o[e] = a), u++));
                                                if (m > t) for (e in (u++, o)) i.hasOwnProperty(e) || (m--, delete o[e]);
                                            }
                                        else o !== i && ((o = i), u++);
                                        return u;
                                    }
                                }
                                n.$stateful = !0;
                                var i,
                                    o,
                                    a,
                                    s = this,
                                    l = 1 < e.length,
                                    u = 0,
                                    d = c(t, n),
                                    p = [],
                                    h = {},
                                    f = !0,
                                    m = 0;
                                return this.$watch(d, function () {
                                    if ((f ? ((f = !1), e(i, i, s)) : e(i, a, s), l))
                                        if (y(i))
                                            if (r(i)) {
                                                a = Array(i.length);
                                                for (var t = 0; t < i.length; t++) a[t] = i[t];
                                            } else for (t in ((a = {}), i)) Cn.call(i, t) && (a[t] = i[t]);
                                        else a = i;
                                });
                            },
                            $digest: function () {
                                var t,
                                    i,
                                    r,
                                    o,
                                    c,
                                    d,
                                    p,
                                    h,
                                    m,
                                    v = e,
                                    y = [];
                                f("$digest"), u.$$checkUrlChange(), this === $ && null !== s && (u.defer.cancel(s), b()), (a = null);
                                do {
                                    for (d = !1, p = this; k.length; ) {
                                        try {
                                            (m = k.shift()), m.scope.$eval(m.expression, m.locals);
                                        } catch (w) {
                                            l(w);
                                        }
                                        a = null;
                                    }
                                    t: do {
                                        if ((o = p.$$watchers))
                                            for (c = o.length; c--; )
                                                try {
                                                    if ((t = o[c]))
                                                        if ((i = t.get(p)) === (r = t.last) || (t.eq ? j(i, r) : "number" == typeof i && "number" == typeof r && isNaN(i) && isNaN(r))) {
                                                            if (t === a) {
                                                                d = !1;
                                                                break t;
                                                            }
                                                        } else
                                                            (d = !0),
                                                                (a = t),
                                                                (t.last = t.eq ? R(i, null) : i),
                                                                t.fn(i, r === g ? i : r, p),
                                                                5 > v && ((h = 4 - v), y[h] || (y[h] = []), y[h].push({ msg: x(t.exp) ? "fn: " + (t.exp.name || t.exp.toString()) : t.exp, newVal: i, oldVal: r }));
                                                } catch (C) {
                                                    l(C);
                                                }
                                        if (!(o = p.$$childHead || (p !== this && p.$$nextSibling))) for (; p !== this && !(o = p.$$nextSibling); ) p = p.$parent;
                                    } while ((p = o));
                                    if ((d || k.length) && !v--) throw (($.$$phase = null), n("infdig", e, y));
                                } while (d || k.length);
                                for ($.$$phase = null; S.length; )
                                    try {
                                        S.shift()();
                                    } catch (_) {
                                        l(_);
                                    }
                            },
                            $destroy: function () {
                                if (!this.$$destroyed) {
                                    var t = this.$parent;
                                    if ((this.$broadcast("$destroy"), (this.$$destroyed = !0), this !== $)) {
                                        for (var e in this.$$listenerCount) m(this, this.$$listenerCount[e], e);
                                        t.$$childHead == this && (t.$$childHead = this.$$nextSibling),
                                            t.$$childTail == this && (t.$$childTail = this.$$prevSibling),
                                            this.$$prevSibling && (this.$$prevSibling.$$nextSibling = this.$$nextSibling),
                                            this.$$nextSibling && (this.$$nextSibling.$$prevSibling = this.$$prevSibling),
                                            (this.$destroy = this.$digest = this.$apply = this.$evalAsync = this.$applyAsync = h),
                                            (this.$on = this.$watch = this.$watchGroup = function () {
                                                return h;
                                            }),
                                            (this.$$listeners = {}),
                                            (this.$parent = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = this.$root = this.$$watchers = null);
                                    }
                                }
                            },
                            $eval: function (t, e) {
                                return c(t)(this, e);
                            },
                            $evalAsync: function (t, e) {
                                $.$$phase ||
                                    k.length ||
                                    u.defer(function () {
                                        k.length && $.$digest();
                                    }),
                                    k.push({ scope: this, expression: t, locals: e });
                            },
                            $$postDigest: function (t) {
                                S.push(t);
                            },
                            $apply: function (t) {
                                try {
                                    return f("$apply"), this.$eval(t);
                                } catch (e) {
                                    l(e);
                                } finally {
                                    $.$$phase = null;
                                    try {
                                        $.$digest();
                                    } catch (n) {
                                        throw (l(n), n);
                                    }
                                }
                            },
                            $applyAsync: function (t) {
                                function e() {
                                    n.$eval(t);
                                }
                                var n = this;
                                t && C.push(e), w();
                            },
                            $on: function (t, e) {
                                var n = this.$$listeners[t];
                                n || (this.$$listeners[t] = n = []), n.push(e);
                                var i = this;
                                do i.$$listenerCount[t] || (i.$$listenerCount[t] = 0), i.$$listenerCount[t]++;
                                while ((i = i.$parent));
                                var r = this;
                                return function () {
                                    var i = n.indexOf(e);
                                    -1 !== i && ((n[i] = null), m(r, 1, t));
                                };
                            },
                            $emit: function (t, e) {
                                var n,
                                    i,
                                    r,
                                    o = [],
                                    a = this,
                                    s = !1,
                                    c = {
                                        name: t,
                                        targetScope: a,
                                        stopPropagation: function () {
                                            s = !0;
                                        },
                                        preventDefault: function () {
                                            c.defaultPrevented = !0;
                                        },
                                        defaultPrevented: !1,
                                    },
                                    u = D([c], arguments, 1);
                                do {
                                    for (n = a.$$listeners[t] || o, c.currentScope = a, i = 0, r = n.length; r > i; i++)
                                        if (n[i])
                                            try {
                                                n[i].apply(null, u);
                                            } catch (d) {
                                                l(d);
                                            }
                                        else n.splice(i, 1), i--, r--;
                                    if (s) return (c.currentScope = null), c;
                                    a = a.$parent;
                                } while (a);
                                return (c.currentScope = null), c;
                            },
                            $broadcast: function (t, e) {
                                var n = this,
                                    i = this,
                                    r = {
                                        name: t,
                                        targetScope: this,
                                        preventDefault: function () {
                                            r.defaultPrevented = !0;
                                        },
                                        defaultPrevented: !1,
                                    };
                                if (!this.$$listenerCount[t]) return r;
                                for (var o, a, s = D([r], arguments, 1); (n = i); ) {
                                    for (r.currentScope = n, i = n.$$listeners[t] || [], o = 0, a = i.length; a > o; o++)
                                        if (i[o])
                                            try {
                                                i[o].apply(null, s);
                                            } catch (c) {
                                                l(c);
                                            }
                                        else i.splice(o, 1), o--, a--;
                                    if (!(i = (n.$$listenerCount[t] && n.$$childHead) || (n !== this && n.$$nextSibling))) for (; n !== this && !(i = n.$$nextSibling); ) n = n.$parent;
                                }
                                return (r.currentScope = null), r;
                            },
                        };
                        var $ = new p(),
                            k = ($.$$asyncQueue = []),
                            S = ($.$$postDigestQueue = []),
                            C = ($.$$applyAsyncQueue = []);
                        return $;
                    },
                ]);
        }
        function Pe() {
            var t = /^\s*(https?|ftp|mailto|tel|file):/,
                e = /^\s*((https?|ftp|file|blob):|data:image\/)/;
            (this.aHrefSanitizationWhitelist = function (e) {
                return g(e) ? ((t = e), this) : t;
            }),
                (this.imgSrcSanitizationWhitelist = function (t) {
                    return g(t) ? ((e = t), this) : e;
                }),
                (this.$get = function () {
                    return function (n, i) {
                        var r,
                            o = i ? e : t;
                        return (r = Be(n).href), "" === r || r.match(o) ? n : "unsafe:" + r;
                    };
                });
        }
        function je(t) {
            if ("self" === t) return t;
            if (b(t)) {
                if (-1 < t.indexOf("***")) throw qi("iwcard", t);
                return (t = Nn(t).replace("\\*\\*", ".*").replace("\\*", "[^:/.?&;]*")), new RegExp("^" + t + "$");
            }
            if (k(t)) return new RegExp("^" + t.source + "$");
            throw qi("imatcher");
        }
        function De(t) {
            var e = [];
            return (
                g(t) &&
                    o(t, function (t) {
                        e.push(je(t));
                    }),
                e
            );
        }
        function Oe() {
            this.SCE_CONTEXTS = Ui;
            var t = ["self"],
                e = [];
            (this.resourceUrlWhitelist = function (e) {
                return arguments.length && (t = De(e)), t;
            }),
                (this.resourceUrlBlacklist = function (t) {
                    return arguments.length && (e = De(t)), e;
                }),
                (this.$get = [
                    "$injector",
                    function (i) {
                        function r(t, e) {
                            return "self" === t ? Fe(e) : !!t.exec(e.href);
                        }
                        function o(t) {
                            var e = function (t) {
                                this.$$unwrapTrustedValue = function () {
                                    return t;
                                };
                            };
                            return (
                                t && (e.prototype = new t()),
                                (e.prototype.valueOf = function () {
                                    return this.$$unwrapTrustedValue();
                                }),
                                (e.prototype.toString = function () {
                                    return this.$$unwrapTrustedValue().toString();
                                }),
                                e
                            );
                        }
                        var a = function (t) {
                            throw qi("unsafe");
                        };
                        i.has("$sanitize") && (a = i.get("$sanitize"));
                        var s = o(),
                            l = {};
                        return (
                            (l[Ui.HTML] = o(s)),
                            (l[Ui.CSS] = o(s)),
                            (l[Ui.URL] = o(s)),
                            (l[Ui.JS] = o(s)),
                            (l[Ui.RESOURCE_URL] = o(l[Ui.URL])),
                            {
                                trustAs: function (t, e) {
                                    var i = l.hasOwnProperty(t) ? l[t] : null;
                                    if (!i) throw qi("icontext", t, e);
                                    if (null === e || e === n || "" === e) return e;
                                    if ("string" != typeof e) throw qi("itype", t);
                                    return new i(e);
                                },
                                getTrusted: function (i, o) {
                                    if (null === o || o === n || "" === o) return o;
                                    var s = l.hasOwnProperty(i) ? l[i] : null;
                                    if (s && o instanceof s) return o.$$unwrapTrustedValue();
                                    if (i === Ui.RESOURCE_URL) {
                                        var c,
                                            u,
                                            s = Be(o.toString()),
                                            d = !1;
                                        for (c = 0, u = t.length; u > c; c++)
                                            if (r(t[c], s)) {
                                                d = !0;
                                                break;
                                            }
                                        if (d)
                                            for (c = 0, u = e.length; u > c; c++)
                                                if (r(e[c], s)) {
                                                    d = !1;
                                                    break;
                                                }
                                        if (d) return o;
                                        throw qi("insecurl", o.toString());
                                    }
                                    if (i === Ui.HTML) return a(o);
                                    throw qi("unsafe");
                                },
                                valueOf: function (t) {
                                    return t instanceof s ? t.$$unwrapTrustedValue() : t;
                                },
                            }
                        );
                    },
                ]);
        }
        function Le() {
            var t = !0;
            (this.enabled = function (e) {
                return arguments.length && (t = !!e), t;
            }),
                (this.$get = [
                    "$parse",
                    "$sceDelegate",
                    function (e, n) {
                        if (t && 8 > bn) throw qi("iequirks");
                        var i = P(Ui);
                        (i.isEnabled = function () {
                            return t;
                        }),
                            (i.trustAs = n.trustAs),
                            (i.getTrusted = n.getTrusted),
                            (i.valueOf = n.valueOf),
                            t ||
                                ((i.trustAs = i.getTrusted = function (t, e) {
                                    return e;
                                }),
                                (i.valueOf = f)),
                            (i.parseAs = function (t, n) {
                                var r = e(n);
                                return r.literal && r.constant
                                    ? r
                                    : e(n, function (e) {
                                          return i.getTrusted(t, e);
                                      });
                            });
                        var r = i.parseAs,
                            a = i.getTrusted,
                            s = i.trustAs;
                        return (
                            o(Ui, function (t, e) {
                                var n = Sn(e);
                                (i[at("parse_as_" + n)] = function (e) {
                                    return r(t, e);
                                }),
                                    (i[at("get_trusted_" + n)] = function (e) {
                                        return a(t, e);
                                    }),
                                    (i[at("trust_as_" + n)] = function (e) {
                                        return s(t, e);
                                    });
                            }),
                            i
                        );
                    },
                ]);
        }
        function Ne() {
            this.$get = [
                "$window",
                "$document",
                function (t, e) {
                    var n,
                        i = {},
                        r = d((/android (\d+)/.exec(Sn((t.navigator || {}).userAgent)) || [])[1]),
                        o = /Boxee/i.test((t.navigator || {}).userAgent),
                        a = e[0] || {},
                        s = /^(Moz|webkit|ms)(?=[A-Z])/,
                        l = a.body && a.body.style,
                        c = !1,
                        u = !1;
                    if (l) {
                        for (var p in l)
                            if ((c = s.exec(p))) {
                                (n = c[0]), (n = n.substr(0, 1).toUpperCase() + n.substr(1));
                                break;
                            }
                        n || (n = "WebkitOpacity" in l && "webkit"),
                            (c = !!("transition" in l || n + "Transition" in l)),
                            (u = !!("animation" in l || n + "Animation" in l)),
                            !r || (c && u) || ((c = b(a.body.style.webkitTransition)), (u = b(a.body.style.webkitAnimation)));
                    }
                    return {
                        history: !(!t.history || !t.history.pushState || 4 > r || o),
                        hasEvent: function (t) {
                            if ("input" === t && 11 >= bn) return !1;
                            if (v(i[t])) {
                                var e = a.createElement("div");
                                i[t] = "on" + t in e;
                            }
                            return i[t];
                        },
                        csp: qn(),
                        vendorPrefix: n,
                        transitions: c,
                        animations: u,
                        android: r,
                    };
                },
            ];
        }
        function qe() {
            this.$get = [
                "$templateCache",
                "$http",
                "$q",
                "$sce",
                function (t, e, n, i) {
                    function r(o, a) {
                        r.totalPendingRequests++, (b(o) && t.get(o)) || (o = i.getTrustedResourceUrl(o));
                        var s = e.defaults && e.defaults.transformResponse;
                        return (
                            On(s)
                                ? (s = s.filter(function (t) {
                                      return t !== Wt;
                                  }))
                                : s === Wt && (s = null),
                            e
                                .get(o, { cache: t, transformResponse: s })
                                ["finally"](function () {
                                    r.totalPendingRequests--;
                                })
                                .then(
                                    function (t) {
                                        return t.data;
                                    },
                                    function (t) {
                                        if (!a) throw hi("tpload", o);
                                        return n.reject(t);
                                    }
                                )
                        );
                    }
                    return (r.totalPendingRequests = 0), r;
                },
            ];
        }
        function Ue() {
            this.$get = [
                "$rootScope",
                "$browser",
                "$location",
                function (t, e, n) {
                    return {
                        findBindings: function (t, e, n) {
                            t = t.getElementsByClassName("ng-binding");
                            var i = [];
                            return (
                                o(t, function (t) {
                                    var r = Pn.element(t).data("$binding");
                                    r &&
                                        o(r, function (r) {
                                            n ? new RegExp("(^|\\s)" + Nn(e) + "(\\s|\\||$)").test(r) && i.push(t) : -1 != r.indexOf(e) && i.push(t);
                                        });
                                }),
                                i
                            );
                        },
                        findModels: function (t, e, n) {
                            for (var i = ["ng-", "data-ng-", "ng\\:"], r = 0; r < i.length; ++r) {
                                var o = t.querySelectorAll("[" + i[r] + "model" + (n ? "=" : "*=") + '"' + e + '"]');
                                if (o.length) return o;
                            }
                        },
                        getLocation: function () {
                            return n.url();
                        },
                        setLocation: function (e) {
                            e !== n.url() && (n.url(e), t.$digest());
                        },
                        whenStable: function (t) {
                            e.notifyWhenNoOutstandingRequests(t);
                        },
                    };
                },
            ];
        }
        function Me() {
            this.$get = [
                "$rootScope",
                "$browser",
                "$q",
                "$$q",
                "$exceptionHandler",
                function (t, e, n, i, r) {
                    function o(o, s, l) {
                        var c = g(l) && !l,
                            u = (c ? i : n).defer(),
                            d = u.promise;
                        return (
                            (s = e.defer(function () {
                                try {
                                    u.resolve(o());
                                } catch (e) {
                                    u.reject(e), r(e);
                                } finally {
                                    delete a[d.$$timeoutId];
                                }
                                c || t.$apply();
                            }, s)),
                            (d.$$timeoutId = s),
                            (a[s] = u),
                            d
                        );
                    }
                    var a = {};
                    return (
                        (o.cancel = function (t) {
                            return t && t.$$timeoutId in a ? (a[t.$$timeoutId].reject("canceled"), delete a[t.$$timeoutId], e.defer.cancel(t.$$timeoutId)) : !1;
                        }),
                        o
                    );
                },
            ];
        }
        function Be(t) {
            return (
                bn && (Mi.setAttribute("href", t), (t = Mi.href)),
                Mi.setAttribute("href", t),
                {
                    href: Mi.href,
                    protocol: Mi.protocol ? Mi.protocol.replace(/:$/, "") : "",
                    host: Mi.host,
                    search: Mi.search ? Mi.search.replace(/^\?/, "") : "",
                    hash: Mi.hash ? Mi.hash.replace(/^#/, "") : "",
                    hostname: Mi.hostname,
                    port: Mi.port,
                    pathname: "/" === Mi.pathname.charAt(0) ? Mi.pathname : "/" + Mi.pathname,
                }
            );
        }
        function Fe(t) {
            return (t = b(t) ? Be(t) : t), t.protocol === Bi.protocol && t.host === Bi.host;
        }
        function He() {
            this.$get = m(t);
        }
        function Ve(t) {
            function e(n, i) {
                if (y(n)) {
                    var r = {};
                    return (
                        o(n, function (t, n) {
                            r[n] = e(n, t);
                        }),
                        r
                    );
                }
                return t.factory(n + "Filter", i);
            }
            (this.register = e),
                (this.$get = [
                    "$injector",
                    function (t) {
                        return function (e) {
                            return t.get(e + "Filter");
                        };
                    },
                ]),
                e("currency", Ge),
                e("date", rn),
                e("filter", ze),
                e("json", on),
                e("limitTo", an),
                e("lowercase", Wi),
                e("number", Xe),
                e("orderBy", sn),
                e("uppercase", Yi);
        }
        function ze() {
            return function (t, e, n) {
                if (!On(t)) return t;
                var i;
                switch (null !== e ? typeof e : "null") {
                    case "function":
                        break;
                    case "boolean":
                    case "null":
                    case "number":
                    case "string":
                        i = !0;
                    case "object":
                        e = We(e, n, i);
                        break;
                    default:
                        return t;
                }
                return t.filter(e);
            };
        }
        function We(t, e, n) {
            var i = y(t) && "$" in t;
            return (
                !0 === e
                    ? (e = j)
                    : x(e) ||
                      (e = function (t, e) {
                          return v(t) ? !1 : null === t || null === e ? t === e : y(t) || y(e) ? !1 : ((t = Sn("" + t)), (e = Sn("" + e)), -1 !== t.indexOf(e));
                      }),
                function (r) {
                    return i && !y(r) ? Ye(r, t.$, e, !1) : Ye(r, t, e, n);
                }
            );
        }
        function Ye(t, e, n, i, r) {
            var o = null !== t ? typeof t : "null",
                a = null !== e ? typeof e : "null";
            if ("string" === a && "!" === e.charAt(0)) return !Ye(t, e.substring(1), n, i);
            if (On(t))
                return t.some(function (t) {
                    return Ye(t, e, n, i);
                });
            switch (o) {
                case "object":
                    var s;
                    if (i) {
                        for (s in t) if ("$" !== s.charAt(0) && Ye(t[s], e, n, !0)) return !0;
                        return r ? !1 : Ye(t, e, n, !1);
                    }
                    if ("object" === a) {
                        for (s in e) if (((r = e[s]), !x(r) && !v(r) && ((o = "$" === s), !Ye(o ? t : t[s], r, n, o, o)))) return !1;
                        return !0;
                    }
                    return n(t, e);
                case "function":
                    return !1;
                default:
                    return n(t, e);
            }
        }
        function Ge(t) {
            var e = t.NUMBER_FORMATS;
            return function (t, n, i) {
                return v(n) && (n = e.CURRENCY_SYM), v(i) && (i = e.PATTERNS[1].maxFrac), null == t ? t : Je(t, e.PATTERNS[1], e.GROUP_SEP, e.DECIMAL_SEP, i).replace(/\u00A4/g, n);
            };
        }
        function Xe(t) {
            var e = t.NUMBER_FORMATS;
            return function (t, n) {
                return null == t ? t : Je(t, e.PATTERNS[0], e.GROUP_SEP, e.DECIMAL_SEP, n);
            };
        }
        function Je(t, e, n, i, r) {
            if (!isFinite(t) || y(t)) return "";
            var o = 0 > t;
            t = Math.abs(t);
            var a = t + "",
                s = "",
                l = [],
                c = !1;
            if (-1 !== a.indexOf("e")) {
                var u = a.match(/([\d\.]+)e(-?)(\d+)/);
                u && "-" == u[2] && u[3] > r + 1 ? (t = 0) : ((s = a), (c = !0));
            }
            if (c) r > 0 && 1 > t && ((s = t.toFixed(r)), (t = parseFloat(s)));
            else {
                (a = (a.split(Fi)[1] || "").length), v(r) && (r = Math.min(Math.max(e.minFrac, a), e.maxFrac)), (t = +(Math.round(+(t.toString() + "e" + r)).toString() + "e" + -r));
                var a = ("" + t).split(Fi),
                    c = a[0],
                    a = a[1] || "",
                    d = 0,
                    p = e.lgSize,
                    h = e.gSize;
                if (c.length >= p + h) for (d = c.length - p, u = 0; d > u; u++) 0 === (d - u) % h && 0 !== u && (s += n), (s += c.charAt(u));
                for (u = d; u < c.length; u++) 0 === (c.length - u) % p && 0 !== u && (s += n), (s += c.charAt(u));
                for (; a.length < r; ) a += "0";
                r && "0" !== r && (s += i + a.substr(0, r));
            }
            return 0 === t && (o = !1), l.push(o ? e.negPre : e.posPre, s, o ? e.negSuf : e.posSuf), l.join("");
        }
        function Ke(t, e, n) {
            var i = "";
            for (0 > t && ((i = "-"), (t = -t)), t = "" + t; t.length < e; ) t = "0" + t;
            return n && (t = t.substr(t.length - e)), i + t;
        }
        function Qe(t, e, n, i) {
            return (
                (n = n || 0),
                function (r) {
                    return (r = r["get" + t]()), (n > 0 || r > -n) && (r += n), 0 === r && -12 == n && (r = 12), Ke(r, e, i);
                }
            );
        }
        function Ze(t, e) {
            return function (n, i) {
                var r = n["get" + t](),
                    o = _n(e ? "SHORT" + t : t);
                return i[o][r];
            };
        }
        function tn(t) {
            var e = new Date(t, 0, 1).getDay();
            return new Date(t, 0, (4 >= e ? 5 : 12) - e);
        }
        function en(t) {
            return function (e) {
                var n = tn(e.getFullYear());
                return (e = +new Date(e.getFullYear(), e.getMonth(), e.getDate() + (4 - e.getDay())) - +n), (e = 1 + Math.round(e / 6048e5)), Ke(e, t);
            };
        }
        function nn(t, e) {
            return 0 >= t.getFullYear() ? e.ERAS[0] : e.ERAS[1];
        }
        function rn(t) {
            function e(t) {
                var e;
                if ((e = t.match(n))) {
                    t = new Date(0);
                    var i = 0,
                        r = 0,
                        o = e[8] ? t.setUTCFullYear : t.setFullYear,
                        a = e[8] ? t.setUTCHours : t.setHours;
                    e[9] && ((i = d(e[9] + e[10])), (r = d(e[9] + e[11]))),
                        o.call(t, d(e[1]), d(e[2]) - 1, d(e[3])),
                        (i = d(e[4] || 0) - i),
                        (r = d(e[5] || 0) - r),
                        (o = d(e[6] || 0)),
                        (e = Math.round(1e3 * parseFloat("0." + (e[7] || 0)))),
                        a.call(t, i, r, o, e);
                }
                return t;
            }
            var n = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
            return function (n, i, r) {
                var a,
                    s,
                    l = "",
                    c = [];
                if (((i = i || "mediumDate"), (i = t.DATETIME_FORMATS[i] || i), b(n) && (n = zi.test(n) ? d(n) : e(n)), w(n) && (n = new Date(n)), !$(n))) return n;
                for (; i; ) (s = Vi.exec(i)) ? ((c = D(c, s, 1)), (i = c.pop())) : (c.push(i), (i = null));
                return (
                    r && "UTC" === r && ((n = new Date(n.getTime())), n.setMinutes(n.getMinutes() + n.getTimezoneOffset())),
                    o(c, function (e) {
                        (a = Hi[e]), (l += a ? a(n, t.DATETIME_FORMATS) : e.replace(/(^'|'$)/g, "").replace(/''/g, "'"));
                    }),
                    l
                );
            };
        }
        function on() {
            return function (t, e) {
                return v(e) && (e = 2), N(t, e);
            };
        }
        function an() {
            return function (t, e) {
                return w(t) && (t = t.toString()), On(t) || b(t) ? ((e = 1 / 0 === Math.abs(Number(e)) ? Number(e) : d(e)) ? (e > 0 ? t.slice(0, e) : t.slice(e)) : b(t) ? "" : []) : t;
            };
        }
        function sn(t) {
            return function (e, n, i) {
                function o(t, e) {
                    return e
                        ? function (e, n) {
                              return t(n, e);
                          }
                        : t;
                }
                function a(t) {
                    switch (typeof t) {
                        case "number":
                        case "boolean":
                        case "string":
                            return !0;
                        default:
                            return !1;
                    }
                }
                function s(t) {
                    return null === t ? "null" : ("function" == typeof t.valueOf && ((t = t.valueOf()), a(t))) || ("function" == typeof t.toString && ((t = t.toString()), a(t))) ? t : "";
                }
                function l(t, e) {
                    var n = typeof t,
                        i = typeof e;
                    return n === i && "object" === n && ((t = s(t)), (e = s(e))), n === i ? ("string" === n && ((t = t.toLowerCase()), (e = e.toLowerCase())), t === e ? 0 : e > t ? -1 : 1) : i > n ? -1 : 1;
                }
                return r(e)
                    ? ((n = On(n) ? n : [n]),
                      0 === n.length && (n = ["+"]),
                      (n = n.map(function (e) {
                          var n = !1,
                              i = e || f;
                          if (b(e)) {
                              if ((("+" == e.charAt(0) || "-" == e.charAt(0)) && ((n = "-" == e.charAt(0)), (e = e.substring(1))), "" === e)) return o(l, n);
                              if (((i = t(e)), i.constant)) {
                                  var r = i();
                                  return o(function (t, e) {
                                      return l(t[r], e[r]);
                                  }, n);
                              }
                          }
                          return o(function (t, e) {
                              return l(i(t), i(e));
                          }, n);
                      })),
                      Tn.call(e).sort(
                          o(function (t, e) {
                              for (var i = 0; i < n.length; i++) {
                                  var r = n[i](t, e);
                                  if (0 !== r) return r;
                              }
                              return 0;
                          }, i)
                      ))
                    : e;
            };
        }
        function ln(t) {
            return x(t) && (t = { link: t }), (t.restrict = t.restrict || "AC"), m(t);
        }
        function cn(t, e, i, r, a) {
            var s = this,
                l = [],
                c = (s.$$parentForm = t.parent().controller("form") || Ji);
            (s.$error = {}),
                (s.$$success = {}),
                (s.$pending = n),
                (s.$name = a(e.name || e.ngForm || "")(i)),
                (s.$dirty = !1),
                (s.$pristine = !0),
                (s.$valid = !0),
                (s.$invalid = !1),
                (s.$submitted = !1),
                c.$addControl(s),
                (s.$rollbackViewValue = function () {
                    o(l, function (t) {
                        t.$rollbackViewValue();
                    });
                }),
                (s.$commitViewValue = function () {
                    o(l, function (t) {
                        t.$commitViewValue();
                    });
                }),
                (s.$addControl = function (t) {
                    tt(t.$name, "input"), l.push(t), t.$name && (s[t.$name] = t);
                }),
                (s.$$renameControl = function (t, e) {
                    var n = t.$name;
                    s[n] === t && delete s[n], (s[e] = t), (t.$name = e);
                }),
                (s.$removeControl = function (t) {
                    t.$name && s[t.$name] === t && delete s[t.$name],
                        o(s.$pending, function (e, n) {
                            s.$setValidity(n, null, t);
                        }),
                        o(s.$error, function (e, n) {
                            s.$setValidity(n, null, t);
                        }),
                        o(s.$$success, function (e, n) {
                            s.$setValidity(n, null, t);
                        }),
                        I(l, t);
                }),
                gn({
                    ctrl: this,
                    $element: t,
                    set: function (t, e, n) {
                        var i = t[e];
                        i ? -1 === i.indexOf(n) && i.push(n) : (t[e] = [n]);
                    },
                    unset: function (t, e, n) {
                        var i = t[e];
                        i && (I(i, n), 0 === i.length && delete t[e]);
                    },
                    parentForm: c,
                    $animate: r,
                }),
                (s.$setDirty = function () {
                    r.removeClass(t, Rr), r.addClass(t, Pr), (s.$dirty = !0), (s.$pristine = !1), c.$setDirty();
                }),
                (s.$setPristine = function () {
                    r.setClass(t, Rr, Pr + " ng-submitted"),
                        (s.$dirty = !1),
                        (s.$pristine = !0),
                        (s.$submitted = !1),
                        o(l, function (t) {
                            t.$setPristine();
                        });
                }),
                (s.$setUntouched = function () {
                    o(l, function (t) {
                        t.$setUntouched();
                    });
                }),
                (s.$setSubmitted = function () {
                    r.addClass(t, "ng-submitted"), (s.$submitted = !0), c.$setSubmitted();
                });
        }
        function un(t) {
            t.$formatters.push(function (e) {
                return t.$isEmpty(e) ? e : e.toString();
            });
        }
        function dn(t, e, n, i, r, o) {
            var a = Sn(e[0].type);
            if (!r.android) {
                var s = !1;
                e.on("compositionstart", function (t) {
                    s = !0;
                }),
                    e.on("compositionend", function () {
                        (s = !1), l();
                    });
            }
            var l = function (t) {
                if ((c && (o.defer.cancel(c), (c = null)), !s)) {
                    var r = e.val();
                    (t = t && t.type), "password" === a || (n.ngTrim && "false" === n.ngTrim) || (r = Ln(r)), (i.$viewValue !== r || ("" === r && i.$$hasNativeValidators)) && i.$setViewValue(r, t);
                }
            };
            if (r.hasEvent("input")) e.on("input", l);
            else {
                var c,
                    u = function (t, e, n) {
                        c ||
                            (c = o.defer(function () {
                                (c = null), (e && e.value === n) || l(t);
                            }));
                    };
                e.on("keydown", function (t) {
                    var e = t.keyCode;
                    91 === e || (e > 15 && 19 > e) || (e >= 37 && 40 >= e) || u(t, this, this.value);
                }),
                    r.hasEvent("paste") && e.on("paste cut", u);
            }
            e.on("change", l),
                (i.$render = function () {
                    e.val(i.$isEmpty(i.$viewValue) ? "" : i.$viewValue);
                });
        }
        function pn(t, e) {
            return function (n, i) {
                var r, a;
                if ($(n)) return n;
                if (b(n)) {
                    if (('"' == n.charAt(0) && '"' == n.charAt(n.length - 1) && (n = n.substring(1, n.length - 1)), tr.test(n))) return new Date(n);
                    if (((t.lastIndex = 0), (r = t.exec(n))))
                        return (
                            r.shift(),
                            (a = i
                                ? { yyyy: i.getFullYear(), MM: i.getMonth() + 1, dd: i.getDate(), HH: i.getHours(), mm: i.getMinutes(), ss: i.getSeconds(), sss: i.getMilliseconds() / 1e3 }
                                : { yyyy: 1970, MM: 1, dd: 1, HH: 0, mm: 0, ss: 0, sss: 0 }),
                            o(r, function (t, n) {
                                n < e.length && (a[e[n]] = +t);
                            }),
                            new Date(a.yyyy, a.MM - 1, a.dd, a.HH, a.mm, a.ss || 0, 1e3 * a.sss || 0)
                        );
                }
                return NaN;
            };
        }
        function hn(t, e, i, r) {
            return function (o, a, s, l, c, u, d) {
                function p(t) {
                    return t && !(t.getTime && t.getTime() !== t.getTime());
                }
                function h(t) {
                    return g(t) ? ($(t) ? t : i(t)) : n;
                }
                fn(o, a, s, l), dn(o, a, s, l, c, u);
                var f,
                    m = l && l.$options && l.$options.timezone;
                if (
                    ((l.$$parserName = t),
                    l.$parsers.push(function (t) {
                        return l.$isEmpty(t) ? null : e.test(t) ? ((t = i(t, f)), "UTC" === m && t.setMinutes(t.getMinutes() - t.getTimezoneOffset()), t) : n;
                    }),
                    l.$formatters.push(function (t) {
                        if (t && !$(t)) throw Dr("datefmt", t);
                        if (p(t)) {
                            if ((f = t) && "UTC" === m) {
                                var e = 6e4 * f.getTimezoneOffset();
                                f = new Date(f.getTime() + e);
                            }
                            return d("date")(t, r, m);
                        }
                        return (f = null), "";
                    }),
                    g(s.min) || s.ngMin)
                ) {
                    var y;
                    (l.$validators.min = function (t) {
                        return !p(t) || v(y) || i(t) >= y;
                    }),
                        s.$observe("min", function (t) {
                            (y = h(t)), l.$validate();
                        });
                }
                if (g(s.max) || s.ngMax) {
                    var b;
                    (l.$validators.max = function (t) {
                        return !p(t) || v(b) || i(t) <= b;
                    }),
                        s.$observe("max", function (t) {
                            (b = h(t)), l.$validate();
                        });
                }
            };
        }
        function fn(t, e, i, r) {
            (r.$$hasNativeValidators = y(e[0].validity)) &&
                r.$parsers.push(function (t) {
                    var i = e.prop("validity") || {};
                    return i.badInput && !i.typeMismatch ? n : t;
                });
        }
        function mn(t, e, n, i, r) {
            if (g(i)) {
                if (((t = t(i)), !t.constant)) throw Dr("constexpr", n, i);
                return t(e);
            }
            return r;
        }
        function vn(t, e) {
            return (
                (t = "ngClass" + t),
                [
                    "$animate",
                    function (n) {
                        function i(t, e) {
                            var n = [],
                                i = 0;
                            t: for (; i < t.length; i++) {
                                for (var r = t[i], o = 0; o < e.length; o++) if (r == e[o]) continue t;
                                n.push(r);
                            }
                            return n;
                        }
                        function r(t) {
                            if (!On(t)) {
                                if (b(t)) return t.split(" ");
                                if (y(t)) {
                                    var e = [];
                                    return (
                                        o(t, function (t, n) {
                                            t && (e = e.concat(n.split(" ")));
                                        }),
                                        e
                                    );
                                }
                            }
                            return t;
                        }
                        return {
                            restrict: "AC",
                            link: function (a, s, l) {
                                function c(t, e) {
                                    var n = s.data("$classCounts") || {},
                                        i = [];
                                    return (
                                        o(t, function (t) {
                                            (e > 0 || n[t]) && ((n[t] = (n[t] || 0) + e), n[t] === +(e > 0) && i.push(t));
                                        }),
                                        s.data("$classCounts", n),
                                        i.join(" ")
                                    );
                                }
                                function u(t) {
                                    if (!0 === e || a.$index % 2 === e) {
                                        var o = r(t || []);
                                        if (d) {
                                            if (!j(t, d)) {
                                                var u = r(d),
                                                    p = i(o, u),
                                                    o = i(u, o),
                                                    p = c(p, 1),
                                                    o = c(o, -1);
                                                p && p.length && n.addClass(s, p), o && o.length && n.removeClass(s, o);
                                            }
                                        } else {
                                            var p = c(o, 1);
                                            l.$addClass(p);
                                        }
                                    }
                                    d = P(t);
                                }
                                var d;
                                a.$watch(l[t], u, !0),
                                    l.$observe("class", function (e) {
                                        u(a.$eval(l[t]));
                                    }),
                                    "ngClass" !== t &&
                                        a.$watch("$index", function (n, i) {
                                            var o = 1 & n;
                                            if (o !== (1 & i)) {
                                                var s = r(a.$eval(l[t]));
                                                o === e ? ((o = c(s, 1)), l.$addClass(o)) : ((o = c(s, -1)), l.$removeClass(o));
                                            }
                                        });
                            },
                        };
                    },
                ]
            );
        }
        function gn(t) {
            function e(t, e) {
                e && !a[t] ? (u.addClass(o, t), (a[t] = !0)) : !e && a[t] && (u.removeClass(o, t), (a[t] = !1));
            }
            function i(t, n) {
                (t = t ? "-" + J(t, "-") : ""), e(Ar + t, !0 === n), e(Ir + t, !1 === n);
            }
            var r = t.ctrl,
                o = t.$element,
                a = {},
                s = t.set,
                l = t.unset,
                c = t.parentForm,
                u = t.$animate;
            (a[Ir] = !(a[Ar] = o.hasClass(Ar))),
                (r.$setValidity = function (t, o, a) {
                    o === n ? (r.$pending || (r.$pending = {}), s(r.$pending, t, a)) : (r.$pending && l(r.$pending, t, a), yn(r.$pending) && (r.$pending = n)),
                        _(o) ? (o ? (l(r.$error, t, a), s(r.$$success, t, a)) : (s(r.$error, t, a), l(r.$$success, t, a))) : (l(r.$error, t, a), l(r.$$success, t, a)),
                        r.$pending ? (e(jr, !0), (r.$valid = r.$invalid = n), i("", null)) : (e(jr, !1), (r.$valid = yn(r.$error)), (r.$invalid = !r.$valid), i("", r.$valid)),
                        (o = r.$pending && r.$pending[t] ? n : r.$error[t] ? !1 : r.$$success[t] ? !0 : null),
                        i(t, o),
                        c.$setValidity(t, o, r);
                });
        }
        function yn(t) {
            if (t) for (var e in t) return !1;
            return !0;
        }
        var bn,
            wn,
            $n,
            xn,
            kn = /^\/(.+)\/([a-z]*)$/,
            Sn = function (t) {
                return b(t) ? t.toLowerCase() : t;
            },
            Cn = Object.prototype.hasOwnProperty,
            _n = function (t) {
                return b(t) ? t.toUpperCase() : t;
            },
            Tn = [].slice,
            En = [].splice,
            An = [].push,
            In = Object.prototype.toString,
            Rn = i("ng"),
            Pn = t.angular || (t.angular = {}),
            jn = 0;
        (bn = e.documentMode), (h.$inject = []), (f.$inject = []);
        var Dn,
            On = Array.isArray,
            Ln = function (t) {
                return b(t) ? t.trim() : t;
            },
            Nn = function (t) {
                return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08");
            },
            qn = function () {
                if (g(qn.isActive_)) return qn.isActive_;
                var t = !(!e.querySelector("[ng-csp]") && !e.querySelector("[data-ng-csp]"));
                if (!t)
                    try {
                        new Function("");
                    } catch (n) {
                        t = !0;
                    }
                return (qn.isActive_ = t);
            },
            Un = ["ng-", "data-ng-", "ng:", "x-ng-"],
            Mn = /[A-Z]/g,
            Bn = !1,
            Fn = 1,
            Hn = 3,
            Vn = { full: "1.3.20", major: 1, minor: 3, dot: 20, codeName: "shallow-translucence" };
        ct.expando = "ng339";
        var zn = (ct.cache = {}),
            Wn = 1;
        ct._data = function (t) {
            return this.cache[t[this.expando]] || {};
        };
        var Yn = /([\:\-\_]+(.))/g,
            Gn = /^moz([A-Z])/,
            Xn = { mouseleave: "mouseout", mouseenter: "mouseover" },
            Jn = i("jqLite"),
            Kn = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
            Qn = /<|&#?\w+;/,
            Zn = /<([\w:]+)/,
            ti = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
            ei = {
                option: [1, '<select multiple="multiple">', "</select>"],
                thead: [1, "<table>", "</table>"],
                col: [2, "<table><colgroup>", "</colgroup></table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: [0, "", ""],
            };
        (ei.optgroup = ei.option), (ei.tbody = ei.tfoot = ei.colgroup = ei.caption = ei.thead), (ei.th = ei.td);
        var ni = (ct.prototype = {
                ready: function (n) {
                    function i() {
                        r || ((r = !0), n());
                    }
                    var r = !1;
                    "complete" === e.readyState ? setTimeout(i) : (this.on("DOMContentLoaded", i), ct(t).on("load", i));
                },
                toString: function () {
                    var t = [];
                    return (
                        o(this, function (e) {
                            t.push("" + e);
                        }),
                        "[" + t.join(", ") + "]"
                    );
                },
                eq: function (t) {
                    return wn(t >= 0 ? this[t] : this[this.length + t]);
                },
                length: 0,
                push: An,
                sort: [].sort,
                splice: [].splice,
            }),
            ii = {};
        o("multiple selected checked disabled readOnly required open".split(" "), function (t) {
            ii[Sn(t)] = t;
        });
        var ri = {};
        o("input select option textarea button form details".split(" "), function (t) {
            ri[t] = !0;
        });
        var oi = { ngMinlength: "minlength", ngMaxlength: "maxlength", ngMin: "min", ngMax: "max", ngPattern: "pattern" };
        o({ data: mt, removeData: ht }, function (t, e) {
            ct[e] = t;
        }),
            o(
                {
                    data: mt,
                    inheritedData: $t,
                    scope: function (t) {
                        return wn.data(t, "$scope") || $t(t.parentNode || t, ["$isolateScope", "$scope"]);
                    },
                    isolateScope: function (t) {
                        return wn.data(t, "$isolateScope") || wn.data(t, "$isolateScopeNoTemplate");
                    },
                    controller: wt,
                    injector: function (t) {
                        return $t(t, "$injector");
                    },
                    removeAttr: function (t, e) {
                        t.removeAttribute(e);
                    },
                    hasClass: vt,
                    css: function (t, e, n) {
                        return (e = at(e)), g(n) ? void (t.style[e] = n) : t.style[e];
                    },
                    attr: function (t, e, i) {
                        var r = t.nodeType;
                        if (r !== Hn && 2 !== r && 8 !== r)
                            if (((r = Sn(e)), ii[r])) {
                                if (!g(i)) return t[e] || (t.attributes.getNamedItem(e) || h).specified ? r : n;
                                i ? ((t[e] = !0), t.setAttribute(e, r)) : ((t[e] = !1), t.removeAttribute(r));
                            } else if (g(i)) t.setAttribute(e, i);
                            else if (t.getAttribute) return (t = t.getAttribute(e, 2)), null === t ? n : t;
                    },
                    prop: function (t, e, n) {
                        return g(n) ? void (t[e] = n) : t[e];
                    },
                    text: (function () {
                        function t(t, e) {
                            if (v(e)) {
                                var n = t.nodeType;
                                return n === Fn || n === Hn ? t.textContent : "";
                            }
                            t.textContent = e;
                        }
                        return (t.$dv = ""), t;
                    })(),
                    val: function (t, e) {
                        if (v(e)) {
                            if (t.multiple && "select" === A(t)) {
                                var n = [];
                                return (
                                    o(t.options, function (t) {
                                        t.selected && n.push(t.value || t.text);
                                    }),
                                    0 === n.length ? null : n
                                );
                            }
                            return t.value;
                        }
                        t.value = e;
                    },
                    html: function (t, e) {
                        return v(e) ? t.innerHTML : (dt(t, !0), void (t.innerHTML = e));
                    },
                    empty: xt,
                },
                function (t, e) {
                    ct.prototype[e] = function (e, i) {
                        var r,
                            o,
                            a = this.length;
                        if (t !== xt && (2 == t.length && t !== vt && t !== wt ? e : i) === n) {
                            if (y(e)) {
                                for (r = 0; a > r; r++)
                                    if (t === mt) t(this[r], e);
                                    else for (o in e) t(this[r], o, e[o]);
                                return this;
                            }
                            for (r = t.$dv, a = r === n ? Math.min(a, 1) : a, o = 0; a > o; o++) {
                                var s = t(this[o], e, i);
                                r = r ? r + s : s;
                            }
                            return r;
                        }
                        for (r = 0; a > r; r++) t(this[r], e, i);
                        return this;
                    };
                }
            ),
            o(
                {
                    removeData: ht,
                    on: function oo(t, e, n, i) {
                        if (g(i)) throw Jn("onargs");
                        if (st(t)) {
                            var r = ft(t, !0);
                            i = r.events;
                            var o = r.handle;
                            o || (o = r.handle = Tt(t, i));
                            for (var r = 0 <= e.indexOf(" ") ? e.split(" ") : [e], a = r.length; a--; ) {
                                e = r[a];
                                var s = i[e];
                                s ||
                                    ((i[e] = []),
                                    "mouseenter" === e || "mouseleave" === e
                                        ? oo(t, Xn[e], function (t) {
                                              var n = t.relatedTarget;
                                              (n && (n === this || this.contains(n))) || o(t, e);
                                          })
                                        : "$destroy" !== e && t.addEventListener(e, o, !1),
                                    (s = i[e])),
                                    s.push(n);
                            }
                        }
                    },
                    off: pt,
                    one: function (t, e, n) {
                        (t = wn(t)),
                            t.on(e, function i() {
                                t.off(e, n), t.off(e, i);
                            }),
                            t.on(e, n);
                    },
                    replaceWith: function (t, e) {
                        var n,
                            i = t.parentNode;
                        dt(t),
                            o(new ct(e), function (e) {
                                n ? i.insertBefore(e, n.nextSibling) : i.replaceChild(e, t), (n = e);
                            });
                    },
                    children: function (t) {
                        var e = [];
                        return (
                            o(t.childNodes, function (t) {
                                t.nodeType === Fn && e.push(t);
                            }),
                            e
                        );
                    },
                    contents: function (t) {
                        return t.contentDocument || t.childNodes || [];
                    },
                    append: function (t, e) {
                        var n = t.nodeType;
                        if (n === Fn || 11 === n) {
                            e = new ct(e);
                            for (var n = 0, i = e.length; i > n; n++) t.appendChild(e[n]);
                        }
                    },
                    prepend: function (t, e) {
                        if (t.nodeType === Fn) {
                            var n = t.firstChild;
                            o(new ct(e), function (e) {
                                t.insertBefore(e, n);
                            });
                        }
                    },
                    wrap: function (t, e) {
                        e = wn(e).eq(0).clone()[0];
                        var n = t.parentNode;
                        n && n.replaceChild(e, t), e.appendChild(t);
                    },
                    remove: kt,
                    detach: function (t) {
                        kt(t, !0);
                    },
                    after: function (t, e) {
                        var n = t,
                            i = t.parentNode;
                        e = new ct(e);
                        for (var r = 0, o = e.length; o > r; r++) {
                            var a = e[r];
                            i.insertBefore(a, n.nextSibling), (n = a);
                        }
                    },
                    addClass: yt,
                    removeClass: gt,
                    toggleClass: function (t, e, n) {
                        e &&
                            o(e.split(" "), function (e) {
                                var i = n;
                                v(i) && (i = !vt(t, e)), (i ? yt : gt)(t, e);
                            });
                    },
                    parent: function (t) {
                        return (t = t.parentNode) && 11 !== t.nodeType ? t : null;
                    },
                    next: function (t) {
                        return t.nextElementSibling;
                    },
                    find: function (t, e) {
                        return t.getElementsByTagName ? t.getElementsByTagName(e) : [];
                    },
                    clone: ut,
                    triggerHandler: function (t, e, n) {
                        var i,
                            r,
                            a = e.type || e,
                            s = ft(t);
                        (s = (s = s && s.events) && s[a]) &&
                            ((i = {
                                preventDefault: function () {
                                    this.defaultPrevented = !0;
                                },
                                isDefaultPrevented: function () {
                                    return !0 === this.defaultPrevented;
                                },
                                stopImmediatePropagation: function () {
                                    this.immediatePropagationStopped = !0;
                                },
                                isImmediatePropagationStopped: function () {
                                    return !0 === this.immediatePropagationStopped;
                                },
                                stopPropagation: h,
                                type: a,
                                target: t,
                            }),
                            e.type && (i = u(i, e)),
                            (e = P(s)),
                            (r = n ? [i].concat(n) : [i]),
                            o(e, function (e) {
                                i.isImmediatePropagationStopped() || e.apply(t, r);
                            }));
                    },
                },
                function (t, e) {
                    (ct.prototype[e] = function (e, n, i) {
                        for (var r, o = 0, a = this.length; a > o; o++) v(r) ? ((r = t(this[o], e, n, i)), g(r) && (r = wn(r))) : bt(r, t(this[o], e, n, i));
                        return g(r) ? r : this;
                    }),
                        (ct.prototype.bind = ct.prototype.on),
                        (ct.prototype.unbind = ct.prototype.off);
                }
            ),
            (It.prototype = {
                put: function (t, e) {
                    this[At(t, this.nextUid)] = e;
                },
                get: function (t) {
                    return this[At(t, this.nextUid)];
                },
                remove: function (t) {
                    var e = this[(t = At(t, this.nextUid))];
                    return delete this[t], e;
                },
            });
        var ai = /^function\s*[^\(]*\(\s*([^\)]*)\)/m,
            si = /,/,
            li = /^\s*(_?)(\S+?)\1\s*$/,
            ci = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,
            ui = i("$injector");
        Pt.$$annotate = function (t, e, n) {
            var i;
            if ("function" == typeof t) {
                if (!(i = t.$inject)) {
                    if (((i = []), t.length)) {
                        if (e) throw ((b(n) && n) || (n = t.name || Rt(t)), ui("strictdi", n));
                        (e = t.toString().replace(ci, "")),
                            (e = e.match(ai)),
                            o(e[1].split(si), function (t) {
                                t.replace(li, function (t, e, n) {
                                    i.push(n);
                                });
                            });
                    }
                    t.$inject = i;
                }
            } else On(t) ? ((e = t.length - 1), Z(t[e], "fn"), (i = t.slice(0, e))) : Z(t, "fn", !0);
            return i;
        };
        var di = i("$animate"),
            pi = [
                "$provide",
                function (t) {
                    (this.$$selectors = {}),
                        (this.register = function (e, n) {
                            var i = e + "-animation";
                            if (e && "." != e.charAt(0)) throw di("notcsel", e);
                            (this.$$selectors[e.substr(1)] = i), t.factory(i, n);
                        }),
                        (this.classNameFilter = function (t) {
                            return 1 === arguments.length && (this.$$classNameFilter = t instanceof RegExp ? t : null), this.$$classNameFilter;
                        }),
                        (this.$get = [
                            "$$q",
                            "$$asyncCallback",
                            "$rootScope",
                            function (t, e, n) {
                                function i(e) {
                                    var i,
                                        r = t.defer();
                                    return (
                                        (r.promise.$$cancelFn = function () {
                                            i && i();
                                        }),
                                        n.$$postDigest(function () {
                                            i = e(function () {
                                                r.resolve();
                                            });
                                        }),
                                        r.promise
                                    );
                                }
                                function r(t, e) {
                                    var n = [],
                                        i = [],
                                        r = it();
                                    return (
                                        o((t.attr("class") || "").split(/\s+/), function (t) {
                                            r[t] = !0;
                                        }),
                                        o(e, function (t, e) {
                                            var o = r[e];
                                            !1 === t && o ? i.push(e) : !0 !== t || o || n.push(e);
                                        }),
                                        0 < n.length + i.length && [n.length ? n : null, i.length ? i : null]
                                    );
                                }
                                function a(t, e, n) {
                                    for (var i = 0, r = e.length; r > i; ++i) t[e[i]] = n;
                                }
                                function s() {
                                    return (
                                        c ||
                                            ((c = t.defer()),
                                            e(function () {
                                                c.resolve(), (c = null);
                                            })),
                                        c.promise
                                    );
                                }
                                function l(t, e) {
                                    if (Pn.isObject(e)) {
                                        var n = u(e.from || {}, e.to || {});
                                        t.css(n);
                                    }
                                }
                                var c;
                                return {
                                    animate: function (t, e, n) {
                                        return l(t, { from: e, to: n }), s();
                                    },
                                    enter: function (t, e, n, i) {
                                        return l(t, i), n ? n.after(t) : e.prepend(t), s();
                                    },
                                    leave: function (t, e) {
                                        return l(t, e), t.remove(), s();
                                    },
                                    move: function (t, e, n, i) {
                                        return this.enter(t, e, n, i);
                                    },
                                    addClass: function (t, e, n) {
                                        return this.setClass(t, e, [], n);
                                    },
                                    $$addClassImmediately: function (t, e, n) {
                                        return (
                                            (t = wn(t)),
                                            (e = b(e) ? e : On(e) ? e.join(" ") : ""),
                                            o(t, function (t) {
                                                yt(t, e);
                                            }),
                                            l(t, n),
                                            s()
                                        );
                                    },
                                    removeClass: function (t, e, n) {
                                        return this.setClass(t, [], e, n);
                                    },
                                    $$removeClassImmediately: function (t, e, n) {
                                        return (
                                            (t = wn(t)),
                                            (e = b(e) ? e : On(e) ? e.join(" ") : ""),
                                            o(t, function (t) {
                                                gt(t, e);
                                            }),
                                            l(t, n),
                                            s()
                                        );
                                    },
                                    setClass: function (t, e, n, o) {
                                        var s = this,
                                            l = !1;
                                        t = wn(t);
                                        var c = t.data("$$animateClasses");
                                        return (
                                            c ? o && c.options && (c.options = Pn.extend(c.options || {}, o)) : ((c = { classes: {}, options: o }), (l = !0)),
                                            (o = c.classes),
                                            (e = On(e) ? e : e.split(" ")),
                                            (n = On(n) ? n : n.split(" ")),
                                            a(o, e, !0),
                                            a(o, n, !1),
                                            l &&
                                                ((c.promise = i(function (e) {
                                                    var n = t.data("$$animateClasses");
                                                    if ((t.removeData("$$animateClasses"), n)) {
                                                        var i = r(t, n.classes);
                                                        i && s.$$setClassImmediately(t, i[0], i[1], n.options);
                                                    }
                                                    e();
                                                })),
                                                t.data("$$animateClasses", c)),
                                            c.promise
                                        );
                                    },
                                    $$setClassImmediately: function (t, e, n, i) {
                                        return e && this.$$addClassImmediately(t, e), n && this.$$removeClassImmediately(t, n), l(t, i), s();
                                    },
                                    enabled: h,
                                    cancel: h,
                                };
                            },
                        ]);
                },
            ],
            hi = i("$compile");
        Ut.$inject = ["$provide", "$$sanitizeUriProvider"];
        var fi = /^((?:x|data)[\:\-_])/i,
            mi = i("$controller"),
            vi = "application/json",
            gi = { "Content-Type": vi + ";charset=utf-8" },
            yi = /^\[|^\{(?!\{)/,
            bi = { "[": /]$/, "{": /}$/ },
            wi = /^\)\]\}',?\n/,
            $i = i("$interpolate"),
            xi = /^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
            ki = { http: 80, https: 443, ftp: 21 },
            Si = i("$location"),
            Ci = {
                $$html5: !1,
                $$replace: !1,
                absUrl: pe("$$absUrl"),
                url: function (t) {
                    if (v(t)) return this.$$url;
                    var e = xi.exec(t);
                    return (e[1] || "" === t) && this.path(decodeURIComponent(e[1])), (e[2] || e[1] || "" === t) && this.search(e[3] || ""), this.hash(e[5] || ""), this;
                },
                protocol: pe("$$protocol"),
                host: pe("$$host"),
                port: pe("$$port"),
                path: he("$$path", function (t) {
                    return (t = null !== t ? t.toString() : ""), "/" == t.charAt(0) ? t : "/" + t;
                }),
                search: function (t, e) {
                    switch (arguments.length) {
                        case 0:
                            return this.$$search;
                        case 1:
                            if (b(t) || w(t)) (t = t.toString()), (this.$$search = B(t));
                            else {
                                if (!y(t)) throw Si("isrcharg");
                                (t = R(t, {})),
                                    o(t, function (e, n) {
                                        null == e && delete t[n];
                                    }),
                                    (this.$$search = t);
                            }
                            break;
                        default:
                            v(e) || null === e ? delete this.$$search[t] : (this.$$search[t] = e);
                    }
                    return this.$$compose(), this;
                },
                hash: he("$$hash", function (t) {
                    return null !== t ? t.toString() : "";
                }),
                replace: function () {
                    return (this.$$replace = !0), this;
                },
            };
        o([de, ue, ce], function (t) {
            (t.prototype = Object.create(Ci)),
                (t.prototype.state = function (e) {
                    if (!arguments.length) return this.$$state;
                    if (t !== ce || !this.$$html5) throw Si("nostate");
                    return (this.$$state = v(e) ? null : e), this;
                });
        });
        var _i = i("$parse"),
            Ti = Function.prototype.call,
            Ei = Function.prototype.apply,
            Ai = Function.prototype.bind,
            Ii = it();
        o(
            {
                null: function () {
                    return null;
                },
                true: function () {
                    return !0;
                },
                false: function () {
                    return !1;
                },
                undefined: function () {},
            },
            function (t, e) {
                (t.constant = t.literal = t.sharedGetter = !0), (Ii[e] = t);
            }
        ),
            (Ii["this"] = function (t) {
                return t;
            }),
            (Ii["this"].sharedGetter = !0);
        var Ri = u(it(), {
                "+": function (t, e, i, r) {
                    return (i = i(t, e)), (r = r(t, e)), g(i) ? (g(r) ? i + r : i) : g(r) ? r : n;
                },
                "-": function (t, e, n, i) {
                    return (n = n(t, e)), (i = i(t, e)), (g(n) ? n : 0) - (g(i) ? i : 0);
                },
                "*": function (t, e, n, i) {
                    return n(t, e) * i(t, e);
                },
                "/": function (t, e, n, i) {
                    return n(t, e) / i(t, e);
                },
                "%": function (t, e, n, i) {
                    return n(t, e) % i(t, e);
                },
                "===": function (t, e, n, i) {
                    return n(t, e) === i(t, e);
                },
                "!==": function (t, e, n, i) {
                    return n(t, e) !== i(t, e);
                },
                "==": function (t, e, n, i) {
                    return n(t, e) == i(t, e);
                },
                "!=": function (t, e, n, i) {
                    return n(t, e) != i(t, e);
                },
                "<": function (t, e, n, i) {
                    return n(t, e) < i(t, e);
                },
                ">": function (t, e, n, i) {
                    return n(t, e) > i(t, e);
                },
                "<=": function (t, e, n, i) {
                    return n(t, e) <= i(t, e);
                },
                ">=": function (t, e, n, i) {
                    return n(t, e) >= i(t, e);
                },
                "&&": function (t, e, n, i) {
                    return n(t, e) && i(t, e);
                },
                "||": function (t, e, n, i) {
                    return n(t, e) || i(t, e);
                },
                "!": function (t, e, n) {
                    return !n(t, e);
                },
                "=": !0,
                "|": !0,
            }),
            Pi = { n: "\n", f: "\f", r: "\r", t: "	", v: "\x0B", "'": "'", '"': '"' },
            ji = function (t) {
                this.options = t;
            };
        ji.prototype = {
            constructor: ji,
            lex: function (t) {
                for (this.text = t, this.index = 0, this.tokens = []; this.index < this.text.length; )
                    if (((t = this.text.charAt(this.index)), '"' === t || "'" === t)) this.readString(t);
                    else if (this.isNumber(t) || ("." === t && this.isNumber(this.peek()))) this.readNumber();
                    else if (this.isIdent(t)) this.readIdent();
                    else if (this.is(t, "(){}[].,;:?")) this.tokens.push({ index: this.index, text: t }), this.index++;
                    else if (this.isWhitespace(t)) this.index++;
                    else {
                        var e = t + this.peek(),
                            n = e + this.peek(2),
                            i = Ri[e],
                            r = Ri[n];
                        Ri[t] || i || r ? ((t = r ? n : i ? e : t), this.tokens.push({ index: this.index, text: t, operator: !0 }), (this.index += t.length)) : this.throwError("Unexpected next character ", this.index, this.index + 1);
                    }
                return this.tokens;
            },
            is: function (t, e) {
                return -1 !== e.indexOf(t);
            },
            peek: function (t) {
                return (t = t || 1), this.index + t < this.text.length ? this.text.charAt(this.index + t) : !1;
            },
            isNumber: function (t) {
                return t >= "0" && "9" >= t && "string" == typeof t;
            },
            isWhitespace: function (t) {
                return " " === t || "\r" === t || "	" === t || "\n" === t || "\x0B" === t || " " === t;
            },
            isIdent: function (t) {
                return (t >= "a" && "z" >= t) || (t >= "A" && "Z" >= t) || "_" === t || "$" === t;
            },
            isExpOperator: function (t) {
                return "-" === t || "+" === t || this.isNumber(t);
            },
            throwError: function (t, e, n) {
                throw ((n = n || this.index), (e = g(e) ? "s " + e + "-" + this.index + " [" + this.text.substring(e, n) + "]" : " " + n), _i("lexerr", t, e, this.text));
            },
            readNumber: function () {
                for (var t = "", e = this.index; this.index < this.text.length; ) {
                    var n = Sn(this.text.charAt(this.index));
                    if ("." == n || this.isNumber(n)) t += n;
                    else {
                        var i = this.peek();
                        if ("e" == n && this.isExpOperator(i)) t += n;
                        else if (this.isExpOperator(n) && i && this.isNumber(i) && "e" == t.charAt(t.length - 1)) t += n;
                        else {
                            if (!this.isExpOperator(n) || (i && this.isNumber(i)) || "e" != t.charAt(t.length - 1)) break;
                            this.throwError("Invalid exponent");
                        }
                    }
                    this.index++;
                }
                this.tokens.push({ index: e, text: t, constant: !0, value: Number(t) });
            },
            readIdent: function () {
                for (var t = this.index; this.index < this.text.length; ) {
                    var e = this.text.charAt(this.index);
                    if (!this.isIdent(e) && !this.isNumber(e)) break;
                    this.index++;
                }
                this.tokens.push({ index: t, text: this.text.slice(t, this.index), identifier: !0 });
            },
            readString: function (t) {
                var e = this.index;
                this.index++;
                for (var n = "", i = t, r = !1; this.index < this.text.length; ) {
                    var o = this.text.charAt(this.index),
                        i = i + o;
                    if (r)
                        "u" === o
                            ? ((r = this.text.substring(this.index + 1, this.index + 5)), r.match(/[\da-f]{4}/i) || this.throwError("Invalid unicode escape [\\u" + r + "]"), (this.index += 4), (n += String.fromCharCode(parseInt(r, 16))))
                            : (n += Pi[o] || o),
                            (r = !1);
                    else if ("\\" === o) r = !0;
                    else {
                        if (o === t) return this.index++, void this.tokens.push({ index: e, text: i, constant: !0, value: n });
                        n += o;
                    }
                    this.index++;
                }
                this.throwError("Unterminated quote", e);
            },
        };
        var Di = function (t, e, n) {
            (this.lexer = t), (this.$filter = e), (this.options = n);
        };
        (Di.ZERO = u(
            function () {
                return 0;
            },
            { sharedGetter: !0, constant: !0 }
        )),
            (Di.prototype = {
                constructor: Di,
                parse: function (t) {
                    return (
                        (this.text = t),
                        (this.tokens = this.lexer.lex(t)),
                        (t = this.statements()),
                        0 !== this.tokens.length && this.throwError("is an unexpected token", this.tokens[0]),
                        (t.literal = !!t.literal),
                        (t.constant = !!t.constant),
                        t
                    );
                },
                primary: function () {
                    var t;
                    this.expect("(")
                        ? ((t = this.filterChain()), this.consume(")"))
                        : this.expect("[")
                        ? (t = this.arrayDeclaration())
                        : this.expect("{")
                        ? (t = this.object())
                        : this.peek().identifier && this.peek().text in Ii
                        ? (t = Ii[this.consume().text])
                        : this.peek().identifier
                        ? (t = this.identifier())
                        : this.peek().constant
                        ? (t = this.constant())
                        : this.throwError("not a primary expression", this.peek());
                    for (var e, n; (e = this.expect("(", "[", ".")); )
                        "(" === e.text ? ((t = this.functionCall(t, n)), (n = null)) : "[" === e.text ? ((n = t), (t = this.objectIndex(t))) : "." === e.text ? ((n = t), (t = this.fieldAccess(t))) : this.throwError("IMPOSSIBLE");
                    return t;
                },
                throwError: function (t, e) {
                    throw _i("syntax", e.text, t, e.index + 1, this.text, this.text.substring(e.index));
                },
                peekToken: function () {
                    if (0 === this.tokens.length) throw _i("ueoe", this.text);
                    return this.tokens[0];
                },
                peek: function (t, e, n, i) {
                    return this.peekAhead(0, t, e, n, i);
                },
                peekAhead: function (t, e, n, i, r) {
                    if (this.tokens.length > t) {
                        t = this.tokens[t];
                        var o = t.text;
                        if (o === e || o === n || o === i || o === r || !(e || n || i || r)) return t;
                    }
                    return !1;
                },
                expect: function (t, e, n, i) {
                    return (t = this.peek(t, e, n, i)) ? (this.tokens.shift(), t) : !1;
                },
                consume: function (t) {
                    if (0 === this.tokens.length) throw _i("ueoe", this.text);
                    var e = this.expect(t);
                    return e || this.throwError("is unexpected, expecting [" + t + "]", this.peek()), e;
                },
                unaryFn: function (t, e) {
                    var n = Ri[t];
                    return u(
                        function (t, i) {
                            return n(t, i, e);
                        },
                        { constant: e.constant, inputs: [e] }
                    );
                },
                binaryFn: function (t, e, n, i) {
                    var r = Ri[e];
                    return u(
                        function (e, i) {
                            return r(e, i, t, n);
                        },
                        { constant: t.constant && n.constant, inputs: !i && [t, n] }
                    );
                },
                identifier: function () {
                    for (var t = this.consume().text; this.peek(".") && this.peekAhead(1).identifier && !this.peekAhead(2, "("); ) t += this.consume().text + this.consume().text;
                    return Se(t, this.options, this.text);
                },
                constant: function () {
                    var t = this.consume().value;
                    return u(
                        function () {
                            return t;
                        },
                        { constant: !0, literal: !0 }
                    );
                },
                statements: function () {
                    for (var t = []; ; )
                        if ((0 < this.tokens.length && !this.peek("}", ")", ";", "]") && t.push(this.filterChain()), !this.expect(";")))
                            return 1 === t.length
                                ? t[0]
                                : function (e, n) {
                                      for (var i, r = 0, o = t.length; o > r; r++) i = t[r](e, n);
                                      return i;
                                  };
                },
                filterChain: function () {
                    for (var t = this.expression(); this.expect("|"); ) t = this.filter(t);
                    return t;
                },
                filter: function (t) {
                    var e,
                        i,
                        r = this.$filter(this.consume().text);
                    if (this.peek(":")) for (e = [], i = []; this.expect(":"); ) e.push(this.expression());
                    var o = [t].concat(e || []);
                    return u(
                        function (o, a) {
                            var s = t(o, a);
                            if (i) {
                                for (i[0] = s, s = e.length; s--; ) i[s + 1] = e[s](o, a);
                                return r.apply(n, i);
                            }
                            return r(s);
                        },
                        { constant: !r.$stateful && o.every(be), inputs: !r.$stateful && o }
                    );
                },
                expression: function () {
                    return this.assignment();
                },
                assignment: function () {
                    var t,
                        e,
                        n = this.ternary();
                    return (e = this.expect("="))
                        ? (n.assign || this.throwError("implies assignment but [" + this.text.substring(0, e.index) + "] can not be assigned to", e),
                          (t = this.ternary()),
                          u(
                              function (e, i) {
                                  return n.assign(e, t(e, i), i);
                              },
                              { inputs: [n, t] }
                          ))
                        : n;
                },
                ternary: function () {
                    var t,
                        e = this.logicalOR();
                    if (this.expect("?") && ((t = this.assignment()), this.consume(":"))) {
                        var n = this.assignment();
                        return u(
                            function (i, r) {
                                return e(i, r) ? t(i, r) : n(i, r);
                            },
                            { constant: e.constant && t.constant && n.constant }
                        );
                    }
                    return e;
                },
                logicalOR: function () {
                    for (var t, e = this.logicalAND(); (t = this.expect("||")); ) e = this.binaryFn(e, t.text, this.logicalAND(), !0);
                    return e;
                },
                logicalAND: function () {
                    for (var t, e = this.equality(); (t = this.expect("&&")); ) e = this.binaryFn(e, t.text, this.equality(), !0);
                    return e;
                },
                equality: function () {
                    for (var t, e = this.relational(); (t = this.expect("==", "!=", "===", "!==")); ) e = this.binaryFn(e, t.text, this.relational());
                    return e;
                },
                relational: function () {
                    for (var t, e = this.additive(); (t = this.expect("<", ">", "<=", ">=")); ) e = this.binaryFn(e, t.text, this.additive());
                    return e;
                },
                additive: function () {
                    for (var t, e = this.multiplicative(); (t = this.expect("+", "-")); ) e = this.binaryFn(e, t.text, this.multiplicative());
                    return e;
                },
                multiplicative: function () {
                    for (var t, e = this.unary(); (t = this.expect("*", "/", "%")); ) e = this.binaryFn(e, t.text, this.unary());
                    return e;
                },
                unary: function () {
                    var t;
                    return this.expect("+") ? this.primary() : (t = this.expect("-")) ? this.binaryFn(Di.ZERO, t.text, this.unary()) : (t = this.expect("!")) ? this.unaryFn(t.text, this.unary()) : this.primary();
                },
                fieldAccess: function (t) {
                    var e = this.identifier();
                    return u(
                        function (i, r, o) {
                            return (i = o || t(i, r)), null == i ? n : e(i);
                        },
                        {
                            assign: function (n, i, r) {
                                var o = t(n, r);
                                return o || t.assign(n, (o = {}), r), e.assign(o, i);
                            },
                        }
                    );
                },
                objectIndex: function (t) {
                    var e = this.text,
                        i = this.expression();
                    return (
                        this.consume("]"),
                        u(
                            function (r, o) {
                                var a = t(r, o),
                                    s = ge(i(r, o), e);
                                return ve(s, e), a ? ye(a[s], e) : n;
                            },
                            {
                                assign: function (n, r, o) {
                                    var a = ve(ge(i(n, o), e), e),
                                        s = ye(t(n, o), e);
                                    return s || t.assign(n, (s = {}), o), (s[a] = r);
                                },
                            }
                        )
                    );
                },
                functionCall: function (t, e) {
                    var i = [];
                    if (")" !== this.peekToken().text)
                        do i.push(this.expression());
                        while (this.expect(","));
                    this.consume(")");
                    var r = this.text,
                        o = i.length ? [] : null;
                    return function (a, s) {
                        var l = e ? e(a, s) : g(e) ? n : a,
                            c = t(a, s, l) || h;
                        if (o) for (var u = i.length; u--; ) o[u] = ye(i[u](a, s), r);
                        if ((ye(l, r), c)) {
                            if (c.constructor === c) throw _i("isecfn", r);
                            if (c === Ti || c === Ei || c === Ai) throw _i("isecff", r);
                        }
                        return (l = c.apply ? c.apply(l, o) : c(o[0], o[1], o[2], o[3], o[4])), o && (o.length = 0), ye(l, r);
                    };
                },
                arrayDeclaration: function () {
                    var t = [];
                    if ("]" !== this.peekToken().text)
                        do {
                            if (this.peek("]")) break;
                            t.push(this.expression());
                        } while (this.expect(","));
                    return (
                        this.consume("]"),
                        u(
                            function (e, n) {
                                for (var i = [], r = 0, o = t.length; o > r; r++) i.push(t[r](e, n));
                                return i;
                            },
                            { literal: !0, constant: t.every(be), inputs: t }
                        )
                    );
                },
                object: function () {
                    var t = [],
                        e = [];
                    if ("}" !== this.peekToken().text)
                        do {
                            if (this.peek("}")) break;
                            var n = this.consume();
                            n.constant ? t.push(n.value) : n.identifier ? t.push(n.text) : this.throwError("invalid key", n), this.consume(":"), e.push(this.expression());
                        } while (this.expect(","));
                    return (
                        this.consume("}"),
                        u(
                            function (n, i) {
                                for (var r = {}, o = 0, a = e.length; a > o; o++) r[t[o]] = e[o](n, i);
                                return r;
                            },
                            { literal: !0, constant: e.every(be), inputs: e }
                        )
                    );
                },
            });
        var Oi = it(),
            Li = it(),
            Ni = Object.prototype.valueOf,
            qi = i("$sce"),
            Ui = { HTML: "html", CSS: "css", URL: "url", RESOURCE_URL: "resourceUrl", JS: "js" },
            hi = i("$compile"),
            Mi = e.createElement("a"),
            Bi = Be(t.location.href);
        (Ve.$inject = ["$provide"]), (Ge.$inject = ["$locale"]), (Xe.$inject = ["$locale"]);
        var Fi = ".",
            Hi = {
                yyyy: Qe("FullYear", 4),
                yy: Qe("FullYear", 2, 0, !0),
                y: Qe("FullYear", 1),
                MMMM: Ze("Month"),
                MMM: Ze("Month", !0),
                MM: Qe("Month", 2, 1),
                M: Qe("Month", 1, 1),
                dd: Qe("Date", 2),
                d: Qe("Date", 1),
                HH: Qe("Hours", 2),
                H: Qe("Hours", 1),
                hh: Qe("Hours", 2, -12),
                h: Qe("Hours", 1, -12),
                mm: Qe("Minutes", 2),
                m: Qe("Minutes", 1),
                ss: Qe("Seconds", 2),
                s: Qe("Seconds", 1),
                sss: Qe("Milliseconds", 3),
                EEEE: Ze("Day"),
                EEE: Ze("Day", !0),
                a: function (t, e) {
                    return 12 > t.getHours() ? e.AMPMS[0] : e.AMPMS[1];
                },
                Z: function (t) {
                    return (t = -1 * t.getTimezoneOffset()), (t = (t >= 0 ? "+" : "") + (Ke(Math[t > 0 ? "floor" : "ceil"](t / 60), 2) + Ke(Math.abs(t % 60), 2)));
                },
                ww: en(2),
                w: en(1),
                G: nn,
                GG: nn,
                GGG: nn,
                GGGG: function (t, e) {
                    return 0 >= t.getFullYear() ? e.ERANAMES[0] : e.ERANAMES[1];
                },
            },
            Vi = /((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,
            zi = /^\-?\d+$/;
        rn.$inject = ["$locale"];
        var Wi = m(Sn),
            Yi = m(_n);
        sn.$inject = ["$parse"];
        var Gi = m({
                restrict: "E",
                compile: function (t, e) {
                    return e.href || e.xlinkHref || e.name
                        ? void 0
                        : function (t, e) {
                              if ("a" === e[0].nodeName.toLowerCase()) {
                                  var n = "[object SVGAnimatedString]" === In.call(e.prop("href")) ? "xlink:href" : "href";
                                  e.on("click", function (t) {
                                      e.attr(n) || t.preventDefault();
                                  });
                              }
                          };
                },
            }),
            Xi = {};
        o(ii, function (t, e) {
            if ("multiple" != t) {
                var n = Mt("ng-" + e);
                Xi[n] = function () {
                    return {
                        restrict: "A",
                        priority: 100,
                        link: function (t, i, r) {
                            t.$watch(r[n], function (t) {
                                r.$set(e, !!t);
                            });
                        },
                    };
                };
            }
        }),
            o(oi, function (t, e) {
                Xi[e] = function () {
                    return {
                        priority: 100,
                        link: function (t, n, i) {
                            return "ngPattern" === e && "/" == i.ngPattern.charAt(0) && (n = i.ngPattern.match(kn))
                                ? void i.$set("ngPattern", new RegExp(n[1], n[2]))
                                : void t.$watch(i[e], function (t) {
                                      i.$set(e, t);
                                  });
                        },
                    };
                };
            }),
            o(["src", "srcset", "href"], function (t) {
                var e = Mt("ng-" + t);
                Xi[e] = function () {
                    return {
                        priority: 99,
                        link: function (n, i, r) {
                            var o = t,
                                a = t;
                            "href" === t && "[object SVGAnimatedString]" === In.call(i.prop("href")) && ((a = "xlinkHref"), (r.$attr[a] = "xlink:href"), (o = null)),
                                r.$observe(e, function (e) {
                                    e ? (r.$set(a, e), bn && o && i.prop(o, r[a])) : "href" === t && r.$set(a, null);
                                });
                        },
                    };
                };
            });
        var Ji = {
            $addControl: h,
            $$renameControl: function (t, e) {
                t.$name = e;
            },
            $removeControl: h,
            $setValidity: h,
            $setDirty: h,
            $setPristine: h,
            $setSubmitted: h,
        };
        cn.$inject = ["$element", "$attrs", "$scope", "$animate", "$interpolate"];
        var Ki = function (t) {
                return [
                    "$timeout",
                    function (e) {
                        return {
                            name: "form",
                            restrict: t ? "EAC" : "E",
                            controller: cn,
                            compile: function (i, r) {
                                i.addClass(Rr).addClass(Ar);
                                var o = r.name ? "name" : t && r.ngForm ? "ngForm" : !1;
                                return {
                                    pre: function (t, i, r, a) {
                                        if (!("action" in r)) {
                                            var s = function (e) {
                                                t.$apply(function () {
                                                    a.$commitViewValue(), a.$setSubmitted();
                                                }),
                                                    e.preventDefault();
                                            };
                                            i[0].addEventListener("submit", s, !1),
                                                i.on("$destroy", function () {
                                                    e(
                                                        function () {
                                                            i[0].removeEventListener("submit", s, !1);
                                                        },
                                                        0,
                                                        !1
                                                    );
                                                });
                                        }
                                        var l = a.$$parentForm;
                                        o &&
                                            (we(t, null, a.$name, a, a.$name),
                                            r.$observe(o, function (e) {
                                                a.$name !== e && (we(t, null, a.$name, n, a.$name), l.$$renameControl(a, e), we(t, null, a.$name, a, a.$name));
                                            })),
                                            i.on("$destroy", function () {
                                                l.$removeControl(a), o && we(t, null, r[o], n, a.$name), u(a, Ji);
                                            });
                                    },
                                };
                            },
                        };
                    },
                ];
            },
            Qi = Ki(),
            Zi = Ki(!0),
            tr = /\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,
            er = /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,
            nr = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,
            ir = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,
            rr = /^(\d{4})-(\d{2})-(\d{2})$/,
            or = /^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,
            ar = /^(\d{4})-W(\d\d)$/,
            sr = /^(\d{4})-(\d\d)$/,
            lr = /^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,
            cr = {
                text: function (t, e, n, i, r, o) {
                    dn(t, e, n, i, r, o), un(i);
                },
                date: hn("date", rr, pn(rr, ["yyyy", "MM", "dd"]), "yyyy-MM-dd"),
                "datetime-local": hn("datetimelocal", or, pn(or, "yyyy MM dd HH mm ss sss".split(" ")), "yyyy-MM-ddTHH:mm:ss.sss"),
                time: hn("time", lr, pn(lr, ["HH", "mm", "ss", "sss"]), "HH:mm:ss.sss"),
                week: hn(
                    "week",
                    ar,
                    function (t, e) {
                        if ($(t)) return t;
                        if (b(t)) {
                            ar.lastIndex = 0;
                            var n = ar.exec(t);
                            if (n) {
                                var i = +n[1],
                                    r = +n[2],
                                    o = (n = 0),
                                    a = 0,
                                    s = 0,
                                    l = tn(i),
                                    r = 7 * (r - 1);
                                return e && ((n = e.getHours()), (o = e.getMinutes()), (a = e.getSeconds()), (s = e.getMilliseconds())), new Date(i, 0, l.getDate() + r, n, o, a, s);
                            }
                        }
                        return NaN;
                    },
                    "yyyy-Www"
                ),
                month: hn("month", sr, pn(sr, ["yyyy", "MM"]), "yyyy-MM"),
                number: function (t, e, i, r, o, a) {
                    if (
                        (fn(t, e, i, r),
                        dn(t, e, i, r, o, a),
                        (r.$$parserName = "number"),
                        r.$parsers.push(function (t) {
                            return r.$isEmpty(t) ? null : ir.test(t) ? parseFloat(t) : n;
                        }),
                        r.$formatters.push(function (t) {
                            if (!r.$isEmpty(t)) {
                                if (!w(t)) throw Dr("numfmt", t);
                                t = t.toString();
                            }
                            return t;
                        }),
                        g(i.min) || i.ngMin)
                    ) {
                        var s;
                        (r.$validators.min = function (t) {
                            return r.$isEmpty(t) || v(s) || t >= s;
                        }),
                            i.$observe("min", function (t) {
                                g(t) && !w(t) && (t = parseFloat(t, 10)), (s = w(t) && !isNaN(t) ? t : n), r.$validate();
                            });
                    }
                    if (g(i.max) || i.ngMax) {
                        var l;
                        (r.$validators.max = function (t) {
                            return r.$isEmpty(t) || v(l) || l >= t;
                        }),
                            i.$observe("max", function (t) {
                                g(t) && !w(t) && (t = parseFloat(t, 10)), (l = w(t) && !isNaN(t) ? t : n), r.$validate();
                            });
                    }
                },
                url: function (t, e, n, i, r, o) {
                    dn(t, e, n, i, r, o),
                        un(i),
                        (i.$$parserName = "url"),
                        (i.$validators.url = function (t, e) {
                            var n = t || e;
                            return i.$isEmpty(n) || er.test(n);
                        });
                },
                email: function (t, e, n, i, r, o) {
                    dn(t, e, n, i, r, o),
                        un(i),
                        (i.$$parserName = "email"),
                        (i.$validators.email = function (t, e) {
                            var n = t || e;
                            return i.$isEmpty(n) || nr.test(n);
                        });
                },
                radio: function (t, e, n, i) {
                    v(n.name) && e.attr("name", ++jn),
                        e.on("click", function (t) {
                            e[0].checked && i.$setViewValue(n.value, t && t.type);
                        }),
                        (i.$render = function () {
                            e[0].checked = n.value == i.$viewValue;
                        }),
                        n.$observe("value", i.$render);
                },
                checkbox: function (t, e, n, i, r, o, a, s) {
                    var l = mn(s, t, "ngTrueValue", n.ngTrueValue, !0),
                        c = mn(s, t, "ngFalseValue", n.ngFalseValue, !1);
                    e.on("click", function (t) {
                        i.$setViewValue(e[0].checked, t && t.type);
                    }),
                        (i.$render = function () {
                            e[0].checked = i.$viewValue;
                        }),
                        (i.$isEmpty = function (t) {
                            return !1 === t;
                        }),
                        i.$formatters.push(function (t) {
                            return j(t, l);
                        }),
                        i.$parsers.push(function (t) {
                            return t ? l : c;
                        });
                },
                hidden: h,
                button: h,
                submit: h,
                reset: h,
                file: h,
            },
            ur = [
                "$browser",
                "$sniffer",
                "$filter",
                "$parse",
                function (t, e, n, i) {
                    return {
                        restrict: "E",
                        require: ["?ngModel"],
                        link: {
                            pre: function (r, o, a, s) {
                                s[0] && (cr[Sn(a.type)] || cr.text)(r, o, a, s[0], e, t, n, i);
                            },
                        },
                    };
                },
            ],
            dr = /^(true|false|\d+)$/,
            pr = function () {
                return {
                    restrict: "A",
                    priority: 100,
                    compile: function (t, e) {
                        return dr.test(e.ngValue)
                            ? function (t, e, n) {
                                  n.$set("value", t.$eval(n.ngValue));
                              }
                            : function (t, e, n) {
                                  t.$watch(n.ngValue, function (t) {
                                      n.$set("value", t);
                                  });
                              };
                    },
                };
            },
            hr = [
                "$compile",
                function (t) {
                    return {
                        restrict: "AC",
                        compile: function (e) {
                            return (
                                t.$$addBindingClass(e),
                                function (e, i, r) {
                                    t.$$addBindingInfo(i, r.ngBind),
                                        (i = i[0]),
                                        e.$watch(r.ngBind, function (t) {
                                            i.textContent = t === n ? "" : t;
                                        });
                                }
                            );
                        },
                    };
                },
            ],
            fr = [
                "$interpolate",
                "$compile",
                function (t, e) {
                    return {
                        compile: function (i) {
                            return (
                                e.$$addBindingClass(i),
                                function (i, r, o) {
                                    (i = t(r.attr(o.$attr.ngBindTemplate))),
                                        e.$$addBindingInfo(r, i.expressions),
                                        (r = r[0]),
                                        o.$observe("ngBindTemplate", function (t) {
                                            r.textContent = t === n ? "" : t;
                                        });
                                }
                            );
                        },
                    };
                },
            ],
            mr = [
                "$sce",
                "$parse",
                "$compile",
                function (t, e, n) {
                    return {
                        restrict: "A",
                        compile: function (i, r) {
                            var o = e(r.ngBindHtml),
                                a = e(r.ngBindHtml, function (t) {
                                    return (t || "").toString();
                                });
                            return (
                                n.$$addBindingClass(i),
                                function (e, i, r) {
                                    n.$$addBindingInfo(i, r.ngBindHtml),
                                        e.$watch(a, function () {
                                            i.html(t.getTrustedHtml(o(e)) || "");
                                        });
                                }
                            );
                        },
                    };
                },
            ],
            vr = m({
                restrict: "A",
                require: "ngModel",
                link: function (t, e, n, i) {
                    i.$viewChangeListeners.push(function () {
                        t.$eval(n.ngChange);
                    });
                },
            }),
            gr = vn("", !0),
            yr = vn("Odd", 0),
            br = vn("Even", 1),
            wr = ln({
                compile: function (t, e) {
                    e.$set("ngCloak", n), t.removeClass("ng-cloak");
                },
            }),
            $r = [
                function () {
                    return { restrict: "A", scope: !0, controller: "@", priority: 500 };
                },
            ],
            xr = {},
            kr = { blur: !0, focus: !0 };
        o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "), function (t) {
            var e = Mt("ng-" + t);
            xr[e] = [
                "$parse",
                "$rootScope",
                function (n, i) {
                    return {
                        restrict: "A",
                        compile: function (r, o) {
                            var a = n(o[e], null, !0);
                            return function (e, n) {
                                n.on(t, function (n) {
                                    var r = function () {
                                        a(e, { $event: n });
                                    };
                                    kr[t] && i.$$phase ? e.$evalAsync(r) : e.$apply(r);
                                });
                            };
                        },
                    };
                },
            ];
        });
        var Sr = [
                "$animate",
                function (t) {
                    return {
                        multiElement: !0,
                        transclude: "element",
                        priority: 600,
                        terminal: !0,
                        restrict: "A",
                        $$tlb: !0,
                        link: function (n, i, r, o, a) {
                            var s, l, c;
                            n.$watch(r.ngIf, function (n) {
                                n
                                    ? l ||
                                      a(function (n, o) {
                                          (l = o), (n[n.length++] = e.createComment(" end ngIf: " + r.ngIf + " ")), (s = { clone: n }), t.enter(n, i.parent(), i);
                                      })
                                    : (c && (c.remove(), (c = null)),
                                      l && (l.$destroy(), (l = null)),
                                      s &&
                                          ((c = nt(s.clone)),
                                          t.leave(c).then(function () {
                                              c = null;
                                          }),
                                          (s = null)));
                            });
                        },
                    };
                },
            ],
            Cr = [
                "$templateRequest",
                "$anchorScroll",
                "$animate",
                function (t, e, n) {
                    return {
                        restrict: "ECA",
                        priority: 400,
                        terminal: !0,
                        transclude: "element",
                        controller: Pn.noop,
                        compile: function (i, r) {
                            var o = r.ngInclude || r.src,
                                a = r.onload || "",
                                s = r.autoscroll;
                            return function (i, r, l, c, u) {
                                var d,
                                    p,
                                    h,
                                    f = 0,
                                    m = function () {
                                        p && (p.remove(), (p = null)),
                                            d && (d.$destroy(), (d = null)),
                                            h &&
                                                (n.leave(h).then(function () {
                                                    p = null;
                                                }),
                                                (p = h),
                                                (h = null));
                                    };
                                i.$watch(o, function (o) {
                                    var l = function () {
                                            !g(s) || (s && !i.$eval(s)) || e();
                                        },
                                        p = ++f;
                                    o
                                        ? (t(o, !0).then(
                                              function (t) {
                                                  if (p === f) {
                                                      var e = i.$new();
                                                      (c.template = t),
                                                          (t = u(e, function (t) {
                                                              m(), n.enter(t, null, r).then(l);
                                                          })),
                                                          (d = e),
                                                          (h = t),
                                                          d.$emit("$includeContentLoaded", o),
                                                          i.$eval(a);
                                                  }
                                              },
                                              function () {
                                                  p === f && (m(), i.$emit("$includeContentError", o));
                                              }
                                          ),
                                          i.$emit("$includeContentRequested", o))
                                        : (m(), (c.template = null));
                                });
                            };
                        },
                    };
                },
            ],
            _r = [
                "$compile",
                function (t) {
                    return {
                        restrict: "ECA",
                        priority: -400,
                        require: "ngInclude",
                        link: function (n, i, r, o) {
                            /SVG/.test(i[0].toString())
                                ? (i.empty(),
                                  t(lt(o.template, e).childNodes)(
                                      n,
                                      function (t) {
                                          i.append(t);
                                      },
                                      { futureParentElement: i }
                                  ))
                                : (i.html(o.template), t(i.contents())(n));
                        },
                    };
                },
            ],
            Tr = ln({
                priority: 450,
                compile: function () {
                    return {
                        pre: function (t, e, n) {
                            t.$eval(n.ngInit);
                        },
                    };
                },
            }),
            Er = function () {
                return {
                    restrict: "A",
                    priority: 100,
                    require: "ngModel",
                    link: function (t, e, i, r) {
                        var a = e.attr(i.$attr.ngList) || ", ",
                            s = "false" !== i.ngTrim,
                            l = s ? Ln(a) : a;
                        r.$parsers.push(function (t) {
                            if (!v(t)) {
                                var e = [];
                                return (
                                    t &&
                                        o(t.split(l), function (t) {
                                            t && e.push(s ? Ln(t) : t);
                                        }),
                                    e
                                );
                            }
                        }),
                            r.$formatters.push(function (t) {
                                return On(t) ? t.join(a) : n;
                            }),
                            (r.$isEmpty = function (t) {
                                return !t || !t.length;
                            });
                    },
                };
            },
            Ar = "ng-valid",
            Ir = "ng-invalid",
            Rr = "ng-pristine",
            Pr = "ng-dirty",
            jr = "ng-pending",
            Dr = i("ngModel"),
            Or = [
                "$scope",
                "$exceptionHandler",
                "$attrs",
                "$element",
                "$parse",
                "$animate",
                "$timeout",
                "$rootScope",
                "$q",
                "$interpolate",
                function (t, e, i, r, a, s, l, c, u, d) {
                    (this.$modelValue = this.$viewValue = Number.NaN),
                        (this.$$rawModelValue = n),
                        (this.$validators = {}),
                        (this.$asyncValidators = {}),
                        (this.$parsers = []),
                        (this.$formatters = []),
                        (this.$viewChangeListeners = []),
                        (this.$untouched = !0),
                        (this.$touched = !1),
                        (this.$pristine = !0),
                        (this.$dirty = !1),
                        (this.$valid = !0),
                        (this.$invalid = !1),
                        (this.$error = {}),
                        (this.$$success = {}),
                        (this.$pending = n),
                        (this.$name = d(i.name || "", !1)(t));
                    var p,
                        f = a(i.ngModel),
                        m = f.assign,
                        y = f,
                        b = m,
                        $ = null,
                        k = this;
                    (this.$$setOptions = function (t) {
                        if ((k.$options = t) && t.getterSetter) {
                            var e = a(i.ngModel + "()"),
                                n = a(i.ngModel + "($$$p)");
                            (y = function (t) {
                                var n = f(t);
                                return x(n) && (n = e(t)), n;
                            }),
                                (b = function (t, e) {
                                    x(f(t)) ? n(t, { $$$p: k.$modelValue }) : m(t, k.$modelValue);
                                });
                        } else if (!f.assign) throw Dr("nonassign", i.ngModel, U(r));
                    }),
                        (this.$render = h),
                        (this.$isEmpty = function (t) {
                            return v(t) || "" === t || null === t || t !== t;
                        });
                    var S = r.inheritedData("$formController") || Ji,
                        C = 0;
                    gn({
                        ctrl: this,
                        $element: r,
                        set: function (t, e) {
                            t[e] = !0;
                        },
                        unset: function (t, e) {
                            delete t[e];
                        },
                        parentForm: S,
                        $animate: s,
                    }),
                        (this.$setPristine = function () {
                            (k.$dirty = !1), (k.$pristine = !0), s.removeClass(r, Pr), s.addClass(r, Rr);
                        }),
                        (this.$setDirty = function () {
                            (k.$dirty = !0), (k.$pristine = !1), s.removeClass(r, Rr), s.addClass(r, Pr), S.$setDirty();
                        }),
                        (this.$setUntouched = function () {
                            (k.$touched = !1), (k.$untouched = !0), s.setClass(r, "ng-untouched", "ng-touched");
                        }),
                        (this.$setTouched = function () {
                            (k.$touched = !0), (k.$untouched = !1), s.setClass(r, "ng-touched", "ng-untouched");
                        }),
                        (this.$rollbackViewValue = function () {
                            l.cancel($), (k.$viewValue = k.$$lastCommittedViewValue), k.$render();
                        }),
                        (this.$validate = function () {
                            if (!w(k.$modelValue) || !isNaN(k.$modelValue)) {
                                var t = k.$$rawModelValue,
                                    e = k.$valid,
                                    i = k.$modelValue,
                                    r = k.$options && k.$options.allowInvalid;
                                k.$$runValidators(t, k.$$lastCommittedViewValue, function (o) {
                                    r || e === o || ((k.$modelValue = o ? t : n), k.$modelValue !== i && k.$$writeModelToScope());
                                });
                            }
                        }),
                        (this.$$runValidators = function (t, e, i) {
                            function r() {
                                var n = !0;
                                return (
                                    o(k.$validators, function (i, r) {
                                        var o = i(t, e);
                                        (n = n && o), s(r, o);
                                    }),
                                    n
                                        ? !0
                                        : (o(k.$asyncValidators, function (t, e) {
                                              s(e, null);
                                          }),
                                          !1)
                                );
                            }
                            function a() {
                                var i = [],
                                    r = !0;
                                o(k.$asyncValidators, function (o, a) {
                                    var l = o(t, e);
                                    if (!l || !x(l.then)) throw Dr("$asyncValidators", l);
                                    s(a, n),
                                        i.push(
                                            l.then(
                                                function () {
                                                    s(a, !0);
                                                },
                                                function (t) {
                                                    (r = !1), s(a, !1);
                                                }
                                            )
                                        );
                                }),
                                    i.length
                                        ? u.all(i).then(function () {
                                              l(r);
                                          }, h)
                                        : l(!0);
                            }
                            function s(t, e) {
                                c === C && k.$setValidity(t, e);
                            }
                            function l(t) {
                                c === C && i(t);
                            }
                            C++;
                            var c = C;
                            (function () {
                                var t = k.$$parserName || "parse";
                                return p !== n
                                    ? (p ||
                                          (o(k.$validators, function (t, e) {
                                              s(e, null);
                                          }),
                                          o(k.$asyncValidators, function (t, e) {
                                              s(e, null);
                                          })),
                                      s(t, p),
                                      p)
                                    : (s(t, null), !0);
                            })() && r()
                                ? a()
                                : l(!1);
                        }),
                        (this.$commitViewValue = function () {
                            var t = k.$viewValue;
                            l.cancel($), (k.$$lastCommittedViewValue !== t || ("" === t && k.$$hasNativeValidators)) && ((k.$$lastCommittedViewValue = t), k.$pristine && this.$setDirty(), this.$$parseAndValidate());
                        }),
                        (this.$$parseAndValidate = function () {
                            var e = k.$$lastCommittedViewValue;
                            if ((p = v(e) ? n : !0))
                                for (var i = 0; i < k.$parsers.length; i++)
                                    if (((e = k.$parsers[i](e)), v(e))) {
                                        p = !1;
                                        break;
                                    }
                            w(k.$modelValue) && isNaN(k.$modelValue) && (k.$modelValue = y(t));
                            var r = k.$modelValue,
                                o = k.$options && k.$options.allowInvalid;
                            (k.$$rawModelValue = e),
                                o && ((k.$modelValue = e), k.$modelValue !== r && k.$$writeModelToScope()),
                                k.$$runValidators(e, k.$$lastCommittedViewValue, function (t) {
                                    o || ((k.$modelValue = t ? e : n), k.$modelValue !== r && k.$$writeModelToScope());
                                });
                        }),
                        (this.$$writeModelToScope = function () {
                            b(t, k.$modelValue),
                                o(k.$viewChangeListeners, function (t) {
                                    try {
                                        t();
                                    } catch (n) {
                                        e(n);
                                    }
                                });
                        }),
                        (this.$setViewValue = function (t, e) {
                            (k.$viewValue = t), (k.$options && !k.$options.updateOnDefault) || k.$$debounceViewValueCommit(e);
                        }),
                        (this.$$debounceViewValueCommit = function (e) {
                            var n = 0,
                                i = k.$options;
                            i && g(i.debounce) && ((i = i.debounce), w(i) ? (n = i) : w(i[e]) ? (n = i[e]) : w(i["default"]) && (n = i["default"])),
                                l.cancel($),
                                n
                                    ? ($ = l(function () {
                                          k.$commitViewValue();
                                      }, n))
                                    : c.$$phase
                                    ? k.$commitViewValue()
                                    : t.$apply(function () {
                                          k.$commitViewValue();
                                      });
                        }),
                        t.$watch(function () {
                            var e = y(t);
                            if (e !== k.$modelValue && (k.$modelValue === k.$modelValue || e === e)) {
                                (k.$modelValue = k.$$rawModelValue = e), (p = n);
                                for (var i = k.$formatters, r = i.length, o = e; r--; ) o = i[r](o);
                                k.$viewValue !== o && ((k.$viewValue = k.$$lastCommittedViewValue = o), k.$render(), k.$$runValidators(e, o, h));
                            }
                            return e;
                        });
                },
            ],
            Lr = [
                "$rootScope",
                function (t) {
                    return {
                        restrict: "A",
                        require: ["ngModel", "^?form", "^?ngModelOptions"],
                        controller: Or,
                        priority: 1,
                        compile: function (e) {
                            return (
                                e.addClass(Rr).addClass("ng-untouched").addClass(Ar),
                                {
                                    pre: function (t, e, n, i) {
                                        var r = i[0],
                                            o = i[1] || Ji;
                                        r.$$setOptions(i[2] && i[2].$options),
                                            o.$addControl(r),
                                            n.$observe("name", function (t) {
                                                r.$name !== t && o.$$renameControl(r, t);
                                            }),
                                            t.$on("$destroy", function () {
                                                o.$removeControl(r);
                                            });
                                    },
                                    post: function (e, n, i, r) {
                                        var o = r[0];
                                        o.$options &&
                                            o.$options.updateOn &&
                                            n.on(o.$options.updateOn, function (t) {
                                                o.$$debounceViewValueCommit(t && t.type);
                                            }),
                                            n.on("blur", function (n) {
                                                o.$touched || (t.$$phase ? e.$evalAsync(o.$setTouched) : e.$apply(o.$setTouched));
                                            });
                                    },
                                }
                            );
                        },
                    };
                },
            ],
            Nr = /(\s+|^)default(\s+|$)/,
            qr = function () {
                return {
                    restrict: "A",
                    controller: [
                        "$scope",
                        "$attrs",
                        function (t, e) {
                            var i = this;
                            (this.$options = t.$eval(e.ngModelOptions)),
                                this.$options.updateOn !== n
                                    ? ((this.$options.updateOnDefault = !1),
                                      (this.$options.updateOn = Ln(
                                          this.$options.updateOn.replace(Nr, function () {
                                              return (i.$options.updateOnDefault = !0), " ";
                                          })
                                      )))
                                    : (this.$options.updateOnDefault = !0);
                        },
                    ],
                };
            },
            Ur = ln({ terminal: !0, priority: 1e3 }),
            Mr = [
                "$locale",
                "$interpolate",
                function (t, e) {
                    var n = /{}/g,
                        i = /^when(Minus)?(.+)$/;
                    return {
                        restrict: "EA",
                        link: function (r, a, s) {
                            function l(t) {
                                a.text(t || "");
                            }
                            var c,
                                u = s.count,
                                d = s.$attr.when && a.attr(s.$attr.when),
                                p = s.offset || 0,
                                h = r.$eval(d) || {},
                                f = {},
                                d = e.startSymbol(),
                                m = e.endSymbol(),
                                v = d + u + "-" + p + m,
                                g = Pn.noop;
                            o(s, function (t, e) {
                                var n = i.exec(e);
                                n && ((n = (n[1] ? "-" : "") + Sn(n[2])), (h[n] = a.attr(s.$attr[e])));
                            }),
                                o(h, function (t, i) {
                                    f[i] = e(t.replace(n, v));
                                }),
                                r.$watch(u, function (e) {
                                    e = parseFloat(e);
                                    var n = isNaN(e);
                                    n || e in h || (e = t.pluralCat(e - p)), e === c || (n && isNaN(c)) || (g(), (g = r.$watch(f[e], l)), (c = e));
                                });
                        },
                    };
                },
            ],
            Br = [
                "$parse",
                "$animate",
                function (t, a) {
                    var s = i("ngRepeat"),
                        l = function (t, e, n, i, r, o, a) {
                            (t[n] = i), r && (t[r] = o), (t.$index = e), (t.$first = 0 === e), (t.$last = e === a - 1), (t.$middle = !(t.$first || t.$last)), (t.$odd = !(t.$even = 0 === (1 & e)));
                        };
                    return {
                        restrict: "A",
                        multiElement: !0,
                        transclude: "element",
                        priority: 1e3,
                        terminal: !0,
                        $$tlb: !0,
                        compile: function (i, c) {
                            var u = c.ngRepeat,
                                d = e.createComment(" end ngRepeat: " + u + " "),
                                p = u.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);
                            if (!p) throw s("iexp", u);
                            var h = p[1],
                                f = p[2],
                                m = p[3],
                                v = p[4],
                                p = h.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);
                            if (!p) throw s("iidexp", h);
                            var g = p[3] || p[1],
                                y = p[2];
                            if (m && (!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m) || /^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m))) throw s("badident", m);
                            var b,
                                w,
                                $,
                                x,
                                k = { $id: At };
                            return (
                                v
                                    ? (b = t(v))
                                    : (($ = function (t, e) {
                                          return At(e);
                                      }),
                                      (x = function (t) {
                                          return t;
                                      })),
                                function (t, e, i, c, p) {
                                    b &&
                                        (w = function (e, n, i) {
                                            return y && (k[y] = e), (k[g] = n), (k.$index = i), b(t, k);
                                        });
                                    var h = it();
                                    t.$watchCollection(f, function (i) {
                                        var c,
                                            f,
                                            v,
                                            b,
                                            k,
                                            S,
                                            C,
                                            _,
                                            T,
                                            E,
                                            A = e[0],
                                            I = it();
                                        if ((m && (t[m] = i), r(i))) (_ = i), (f = w || $);
                                        else {
                                            (f = w || x), (_ = []);
                                            for (E in i) i.hasOwnProperty(E) && "$" != E.charAt(0) && _.push(E);
                                            _.sort();
                                        }
                                        for (b = _.length, E = Array(b), c = 0; b > c; c++)
                                            if (((k = i === _ ? c : _[c]), (S = i[k]), (C = f(k, S, c)), h[C])) (T = h[C]), delete h[C], (I[C] = T), (E[c] = T);
                                            else {
                                                if (I[C])
                                                    throw (
                                                        (o(E, function (t) {
                                                            t && t.scope && (h[t.id] = t);
                                                        }),
                                                        s("dupes", u, C, S))
                                                    );
                                                (E[c] = { id: C, scope: n, clone: n }), (I[C] = !0);
                                            }
                                        for (v in h) {
                                            if (((T = h[v]), (C = nt(T.clone)), a.leave(C), C[0].parentNode)) for (c = 0, f = C.length; f > c; c++) C[c].$$NG_REMOVED = !0;
                                            T.scope.$destroy();
                                        }
                                        for (c = 0; b > c; c++)
                                            if (((k = i === _ ? c : _[c]), (S = i[k]), (T = E[c]), T.scope)) {
                                                v = A;
                                                do v = v.nextSibling;
                                                while (v && v.$$NG_REMOVED);
                                                T.clone[0] != v && a.move(nt(T.clone), null, wn(A)), (A = T.clone[T.clone.length - 1]), l(T.scope, c, g, S, y, k, b);
                                            } else
                                                p(function (t, e) {
                                                    T.scope = e;
                                                    var n = d.cloneNode(!1);
                                                    (t[t.length++] = n), a.enter(t, null, wn(A)), (A = n), (T.clone = t), (I[T.id] = T), l(T.scope, c, g, S, y, k, b);
                                                });
                                        h = I;
                                    });
                                }
                            );
                        },
                    };
                },
            ],
            Fr = [
                "$animate",
                function (t) {
                    return {
                        restrict: "A",
                        multiElement: !0,
                        link: function (e, n, i) {
                            e.$watch(i.ngShow, function (e) {
                                t[e ? "removeClass" : "addClass"](n, "ng-hide", { tempClasses: "ng-hide-animate" });
                            });
                        },
                    };
                },
            ],
            Hr = [
                "$animate",
                function (t) {
                    return {
                        restrict: "A",
                        multiElement: !0,
                        link: function (e, n, i) {
                            e.$watch(i.ngHide, function (e) {
                                t[e ? "addClass" : "removeClass"](n, "ng-hide", { tempClasses: "ng-hide-animate" });
                            });
                        },
                    };
                },
            ],
            Vr = ln(function (t, e, n) {
                t.$watch(
                    n.ngStyle,
                    function (t, n) {
                        n &&
                            t !== n &&
                            o(n, function (t, n) {
                                e.css(n, "");
                            }),
                            t && e.css(t);
                    },
                    !0
                );
            }),
            zr = [
                "$animate",
                function (t) {
                    return {
                        restrict: "EA",
                        require: "ngSwitch",
                        controller: [
                            "$scope",
                            function () {
                                this.cases = {};
                            },
                        ],
                        link: function (n, i, r, a) {
                            var s = [],
                                l = [],
                                c = [],
                                u = [],
                                d = function (t, e) {
                                    return function () {
                                        t.splice(e, 1);
                                    };
                                };
                            n.$watch(r.ngSwitch || r.on, function (n) {
                                var i, r;
                                for (i = 0, r = c.length; r > i; ++i) t.cancel(c[i]);
                                for (i = c.length = 0, r = u.length; r > i; ++i) {
                                    var p = nt(l[i].clone);
                                    u[i].$destroy(), (c[i] = t.leave(p)).then(d(c, i));
                                }
                                (l.length = 0),
                                    (u.length = 0),
                                    (s = a.cases["!" + n] || a.cases["?"]) &&
                                        o(s, function (n) {
                                            n.transclude(function (i, r) {
                                                u.push(r);
                                                var o = n.element;
                                                (i[i.length++] = e.createComment(" end ngSwitchWhen: ")), l.push({ clone: i }), t.enter(i, o.parent(), o);
                                            });
                                        });
                            });
                        },
                    };
                },
            ],
            Wr = ln({
                transclude: "element",
                priority: 1200,
                require: "^ngSwitch",
                multiElement: !0,
                link: function (t, e, n, i, r) {
                    (i.cases["!" + n.ngSwitchWhen] = i.cases["!" + n.ngSwitchWhen] || []), i.cases["!" + n.ngSwitchWhen].push({ transclude: r, element: e });
                },
            }),
            Yr = ln({
                transclude: "element",
                priority: 1200,
                require: "^ngSwitch",
                multiElement: !0,
                link: function (t, e, n, i, r) {
                    (i.cases["?"] = i.cases["?"] || []), i.cases["?"].push({ transclude: r, element: e });
                },
            }),
            Gr = ln({
                restrict: "EAC",
                link: function (t, e, n, r, o) {
                    if (!o) throw i("ngTransclude")("orphan", U(e));
                    o(function (t) {
                        e.empty(), e.append(t);
                    });
                },
            }),
            Xr = [
                "$templateCache",
                function (t) {
                    return {
                        restrict: "E",
                        terminal: !0,
                        compile: function (e, n) {
                            "text/ng-template" == n.type && t.put(n.id, e[0].text);
                        },
                    };
                },
            ],
            Jr = i("ngOptions"),
            Kr = m({ restrict: "A", terminal: !0 }),
            Qr = [
                "$compile",
                "$parse",
                function (t, i) {
                    var r = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
                        a = { $setViewValue: h };
                    return {
                        restrict: "E",
                        require: ["select", "?ngModel"],
                        controller: [
                            "$element",
                            "$scope",
                            "$attrs",
                            function (t, e, n) {
                                var i,
                                    r = this,
                                    o = {},
                                    s = a;
                                (r.databound = n.ngModel),
                                    (r.init = function (t, e, n) {
                                        (s = t), (i = n);
                                    }),
                                    (r.addOption = function (e, n) {
                                        tt(e, '"option value"'), (o[e] = !0), s.$viewValue == e && (t.val(e), i.parent() && i.remove()), n && n[0].hasAttribute("selected") && (n[0].selected = !0);
                                    }),
                                    (r.removeOption = function (t) {
                                        this.hasOption(t) && (delete o[t], s.$viewValue === t && this.renderUnknownOption(t));
                                    }),
                                    (r.renderUnknownOption = function (e) {
                                        (e = "? " + At(e) + " ?"), i.val(e), t.prepend(i), t.val(e), i.prop("selected", !0);
                                    }),
                                    (r.hasOption = function (t) {
                                        return o.hasOwnProperty(t);
                                    }),
                                    e.$on("$destroy", function () {
                                        r.renderUnknownOption = h;
                                    });
                            },
                        ],
                        link: function (a, s, l, c) {
                            function u(t, e, n, i) {
                                (n.$render = function () {
                                    var t = n.$viewValue;
                                    i.hasOption(t) ? (x.parent() && x.remove(), e.val(t), "" === t && f.prop("selected", !0)) : null == t && f ? e.val("") : i.renderUnknownOption(t);
                                }),
                                    e.on("change", function () {
                                        t.$apply(function () {
                                            x.parent() && x.remove(), n.$setViewValue(e.val());
                                        });
                                    });
                            }
                            function d(t, e, n) {
                                var i;
                                (n.$render = function () {
                                    var t = new It(n.$viewValue);
                                    o(e.find("option"), function (e) {
                                        e.selected = g(t.get(e.value));
                                    });
                                }),
                                    t.$watch(function () {
                                        j(i, n.$viewValue) || ((i = P(n.$viewValue)), n.$render());
                                    }),
                                    e.on("change", function () {
                                        t.$apply(function () {
                                            var t = [];
                                            o(e.find("option"), function (e) {
                                                e.selected && t.push(e.value);
                                            }),
                                                n.$setViewValue(t);
                                        });
                                    });
                            }
                            function p(e, a, s) {
                                function l(t, n, i) {
                                    return (j[k] = i), _ && (j[_] = n), t(e, j);
                                }
                                function c(t) {
                                    var e;
                                    if (m)
                                        if (I && On(t)) {
                                            e = new It([]);
                                            for (var n = 0; n < t.length; n++) e.put(l(I, null, t[n]), !0);
                                        } else e = new It(t);
                                    else I && (t = l(I, null, t));
                                    return function (n, i) {
                                        var r;
                                        return (r = I ? I : C ? C : E), m ? g(e.remove(l(r, n, i))) : t === l(r, n, i);
                                    };
                                }
                                function u() {
                                    b || (e.$$postDigest(p), (b = !0));
                                }
                                function d(t, e, n) {
                                    (t[e] = t[e] || 0), (t[e] += n ? 1 : -1);
                                }
                                function p() {
                                    b = !1;
                                    var t,
                                        n,
                                        i,
                                        r,
                                        u,
                                        p = { "": [] },
                                        f = [""];
                                    (i = s.$viewValue), (r = A(e) || []);
                                    var v,
                                        k,
                                        S,
                                        C,
                                        E = _ ? Object.keys(r).sort() : r,
                                        D = {};
                                    u = c(i);
                                    var O,
                                        L,
                                        N = !1;
                                    for (R = {}, C = 0; (S = E.length), S > C; C++)
                                        (v = C),
                                            (_ && ((v = E[C]), "$" === v.charAt(0))) ||
                                                ((k = r[v]),
                                                (t = l(T, v, k) || ""),
                                                (n = p[t]) || ((n = p[t] = []), f.push(t)),
                                                (t = u(v, k)),
                                                (N = N || t),
                                                (k = l(x, v, k)),
                                                (k = g(k) ? k : ""),
                                                (L = I ? I(e, j) : _ ? E[C] : C),
                                                I && (R[L] = v),
                                                n.push({ id: L, label: k, selected: t }));
                                    for (m || (y || null === i ? p[""].unshift({ id: "", label: "", selected: !N }) : N || p[""].unshift({ id: "?", label: "", selected: !0 })), v = 0, E = f.length; E > v; v++) {
                                        for (
                                            t = f[v],
                                                n = p[t],
                                                P.length <= v
                                                    ? ((i = { element: $.clone().attr("label", t), label: n.label }), (r = [i]), P.push(r), a.append(i.element))
                                                    : ((r = P[v]), (i = r[0]), i.label != t && i.element.attr("label", (i.label = t))),
                                                N = null,
                                                C = 0,
                                                S = n.length;
                                            S > C;
                                            C++
                                        )
                                            (t = n[C]),
                                                (u = r[C + 1])
                                                    ? ((N = u.element),
                                                      u.label !== t.label && (d(D, u.label, !1), d(D, t.label, !0), N.text((u.label = t.label)), N.prop("label", u.label)),
                                                      u.id !== t.id && N.val((u.id = t.id)),
                                                      N[0].selected !== t.selected && (N.prop("selected", (u.selected = t.selected)), bn && N.prop("selected", u.selected)))
                                                    : ("" === t.id && y ? (O = y) : (O = w.clone()).val(t.id).prop("selected", t.selected).attr("selected", t.selected).prop("label", t.label).text(t.label),
                                                      r.push((u = { element: O, label: t.label, id: t.id, selected: t.selected })),
                                                      d(D, t.label, !0),
                                                      N ? N.after(O) : i.element.append(O),
                                                      (N = O));
                                        for (C++; r.length > C; ) (t = r.pop()), d(D, t.label, !1), t.element.remove();
                                    }
                                    for (; P.length > v; ) {
                                        for (n = P.pop(), C = 1; C < n.length; ++C) d(D, n[C].label, !1);
                                        n[0].element.remove();
                                    }
                                    o(D, function (t, e) {
                                        t > 0 ? h.addOption(e) : 0 > t && h.removeOption(e);
                                    });
                                }
                                var f;
                                if (!(f = v.match(r))) throw Jr("iexp", v, U(a));
                                var x = i(f[2] || f[1]),
                                    k = f[4] || f[6],
                                    S = / as /.test(f[0]) && f[1],
                                    C = S ? i(S) : null,
                                    _ = f[5],
                                    T = i(f[3] || ""),
                                    E = i(f[2] ? f[1] : k),
                                    A = i(f[7]),
                                    I = f[8] ? i(f[8]) : null,
                                    R = {},
                                    P = [[{ element: a, label: "" }]],
                                    j = {};
                                y && (t(y)(e), y.removeClass("ng-scope"), y.remove()),
                                    a.empty(),
                                    a.on("change", function () {
                                        e.$apply(function () {
                                            var t,
                                                i = A(e) || [];
                                            if (m)
                                                (t = []),
                                                    o(a.val(), function (e) {
                                                        (e = I ? R[e] : e), t.push("?" === e ? n : "" === e ? null : l(C ? C : E, e, i[e]));
                                                    });
                                            else {
                                                var r = I ? R[a.val()] : a.val();
                                                t = "?" === r ? n : "" === r ? null : l(C ? C : E, r, i[r]);
                                            }
                                            s.$setViewValue(t), p();
                                        });
                                    }),
                                    (s.$render = p),
                                    e.$watchCollection(A, u),
                                    e.$watchCollection(function () {
                                        var t,
                                            n = A(e);
                                        if (n && On(n)) {
                                            t = Array(n.length);
                                            for (var i = 0, r = n.length; r > i; i++) t[i] = l(x, i, n[i]);
                                        } else if (n) for (i in ((t = {}), n)) n.hasOwnProperty(i) && (t[i] = l(x, i, n[i]));
                                        return t;
                                    }, u),
                                    m &&
                                        e.$watchCollection(function () {
                                            return s.$modelValue;
                                        }, u);
                            }
                            if (c[1]) {
                                var h = c[0];
                                c = c[1];
                                var f,
                                    m = l.multiple,
                                    v = l.ngOptions,
                                    y = !1,
                                    b = !1,
                                    w = wn(e.createElement("option")),
                                    $ = wn(e.createElement("optgroup")),
                                    x = w.clone();
                                l = 0;
                                for (var k = s.children(), S = k.length; S > l; l++)
                                    if ("" === k[l].value) {
                                        f = y = k.eq(l);
                                        break;
                                    }
                                h.init(c, y, x),
                                    m &&
                                        (c.$isEmpty = function (t) {
                                            return !t || 0 === t.length;
                                        }),
                                    v ? p(a, s, c) : m ? d(a, s, c) : u(a, s, c, h);
                            }
                        },
                    };
                },
            ],
            Zr = [
                "$interpolate",
                function (t) {
                    var e = { addOption: h, removeOption: h };
                    return {
                        restrict: "E",
                        priority: 100,
                        compile: function (n, i) {
                            if (v(i.value)) {
                                var r = t(n.text(), !0);
                                r || i.$set("value", n.text());
                            }
                            return function (t, n, i) {
                                var o = n.parent(),
                                    a = o.data("$selectController") || o.parent().data("$selectController");
                                (a && a.databound) || (a = e),
                                    r
                                        ? t.$watch(r, function (t, e) {
                                              i.$set("value", t), e !== t && a.removeOption(e), a.addOption(t, n);
                                          })
                                        : a.addOption(i.value, n),
                                    n.on("$destroy", function () {
                                        a.removeOption(i.value);
                                    });
                            };
                        },
                    };
                },
            ],
            to = m({ restrict: "E", terminal: !1 }),
            eo = function () {
                return {
                    restrict: "A",
                    require: "?ngModel",
                    link: function (t, e, n, i) {
                        i &&
                            ((n.required = !0),
                            (i.$validators.required = function (t, e) {
                                return !n.required || !i.$isEmpty(e);
                            }),
                            n.$observe("required", function () {
                                i.$validate();
                            }));
                    },
                };
            },
            no = function () {
                return {
                    restrict: "A",
                    require: "?ngModel",
                    link: function (t, e, r, o) {
                        if (o) {
                            var a,
                                s = r.ngPattern || r.pattern;
                            r.$observe("pattern", function (t) {
                                if ((b(t) && 0 < t.length && (t = new RegExp("^" + t + "$")), t && !t.test)) throw i("ngPattern")("noregexp", s, t, U(e));
                                (a = t || n), o.$validate();
                            }),
                                (o.$validators.pattern = function (t, e) {
                                    return o.$isEmpty(e) || v(a) || a.test(e);
                                });
                        }
                    },
                };
            },
            io = function () {
                return {
                    restrict: "A",
                    require: "?ngModel",
                    link: function (t, e, n, i) {
                        if (i) {
                            var r = -1;
                            n.$observe("maxlength", function (t) {
                                (t = d(t)), (r = isNaN(t) ? -1 : t), i.$validate();
                            }),
                                (i.$validators.maxlength = function (t, e) {
                                    return 0 > r || i.$isEmpty(e) || e.length <= r;
                                });
                        }
                    },
                };
            },
            ro = function () {
                return {
                    restrict: "A",
                    require: "?ngModel",
                    link: function (t, e, n, i) {
                        if (i) {
                            var r = 0;
                            n.$observe("minlength", function (t) {
                                (r = d(t) || 0), i.$validate();
                            }),
                                (i.$validators.minlength = function (t, e) {
                                    return i.$isEmpty(e) || e.length >= r;
                                });
                        }
                    },
                };
            };
        t.angular.bootstrap
            ? console.log("WARNING: Tried to load angular more than once.")
            : (K(),
              ot(Pn),
              wn(e).ready(function () {
                  W(e, Y);
              }));
    })(window, document),
    !window.angular.$$csp() &&
        window.angular
            .element(document.head)
            .prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),
    (function (t, e, n) {
        "use strict";
        e.module("ngAnimate", ["ng"])
            .directive("ngAnimateChildren", function () {
                return function (t, n, i) {
                    (i = i.ngAnimateChildren),
                        e.isString(i) && 0 === i.length
                            ? n.data("$$ngAnimateChildren", !0)
                            : t.$watch(i, function (t) {
                                  n.data("$$ngAnimateChildren", !!t);
                              });
                };
            })
            .factory("$$animateReflow", [
                "$$rAF",
                "$document",
                function (t, e) {
                    var n = e[0].body;
                    return function (e) {
                        return t(function () {
                            e(n.offsetWidth);
                        });
                    };
                },
            ])
            .config([
                "$provide",
                "$animateProvider",
                function (i, r) {
                    function o(t) {
                        for (var e = 0; e < t.length; e++) {
                            var n = t[e];
                            if (1 == n.nodeType) return n;
                        }
                    }
                    function a(t, e) {
                        return o(t) == o(e);
                    }
                    var s,
                        l = e.noop,
                        c = e.forEach,
                        u = r.$$selectors,
                        d = e.isArray,
                        p = e.isString,
                        h = e.isObject,
                        f = { running: !0 };
                    i.decorator("$animate", [
                        "$delegate",
                        "$$q",
                        "$injector",
                        "$sniffer",
                        "$rootElement",
                        "$$asyncCallback",
                        "$rootScope",
                        "$document",
                        "$templateRequest",
                        "$$jqLite",
                        function (t, n, i, m, v, g, y, b, w, $) {
                            function x(t, e) {
                                var n = t.data("$$ngAnimateState") || {};
                                return e && ((n.running = !0), (n.structural = !0), t.data("$$ngAnimateState", n)), n.disabled || (n.running && n.structural);
                            }
                            function k(t) {
                                var e,
                                    i = n.defer();
                                return (
                                    (i.promise.$$cancelFn = function () {
                                        e && e();
                                    }),
                                    y.$$postDigest(function () {
                                        e = t(function () {
                                            i.resolve();
                                        });
                                    }),
                                    i.promise
                                );
                            }
                            function S(t) {
                                return h(t) ? (t.tempClasses && p(t.tempClasses) && (t.tempClasses = t.tempClasses.split(/\s+/)), t) : void 0;
                            }
                            function C(t, e, n) {
                                n = n || {};
                                var i = {};
                                c(n, function (t, e) {
                                    c(e.split(" "), function (e) {
                                        i[e] = t;
                                    });
                                });
                                var r = Object.create(null);
                                c((t.attr("class") || "").split(/\s+/), function (t) {
                                    r[t] = !0;
                                });
                                var o = [],
                                    a = [];
                                return (
                                    c((e && e.classes) || [], function (t, e) {
                                        var n = r[e],
                                            s = i[e] || {};
                                        !1 === t ? (n || "addClass" == s.event) && a.push(e) : !0 === t && ((n && "removeClass" != s.event) || o.push(e));
                                    }),
                                    0 < o.length + a.length && [o.join(" "), a.join(" ")]
                                );
                            }
                            function _(t) {
                                if (t) {
                                    var e = [],
                                        n = {};
                                    (t = t.substr(1).split(".")), (m.transitions || m.animations) && e.push(i.get(u[""]));
                                    for (var r = 0; r < t.length; r++) {
                                        var o = t[r],
                                            a = u[o];
                                        a && !n[o] && (e.push(i.get(a)), (n[o] = !0));
                                    }
                                    return e;
                                }
                            }
                            function T(t, n, i, r) {
                                function o(t, e) {
                                    var n = t[e],
                                        i = t["before" + e.charAt(0).toUpperCase() + e.substr(1)];
                                    return n || i ? ("leave" == e && ((i = n), (n = null)), $.push({ event: e, fn: n }), y.push({ event: e, fn: i }), !0) : void 0;
                                }
                                function a(e, n, o) {
                                    var a = [];
                                    c(e, function (t) {
                                        t.fn && a.push(t);
                                    });
                                    var s = 0;
                                    c(a, function (e, c) {
                                        var d = function () {
                                            t: {
                                                if (n) {
                                                    if (((n[c] || l)(), ++s < a.length)) break t;
                                                    n = null;
                                                }
                                                o();
                                            }
                                        };
                                        switch (e.event) {
                                            case "setClass":
                                                n.push(e.fn(t, u, p, d, r));
                                                break;
                                            case "animate":
                                                n.push(e.fn(t, i, r.from, r.to, d));
                                                break;
                                            case "addClass":
                                                n.push(e.fn(t, u || i, d, r));
                                                break;
                                            case "removeClass":
                                                n.push(e.fn(t, p || i, d, r));
                                                break;
                                            default:
                                                n.push(e.fn(t, d, r));
                                        }
                                    }),
                                        n && 0 === n.length && o();
                                }
                                var s = t[0];
                                if (s) {
                                    r && ((r.to = r.to || {}), (r.from = r.from || {}));
                                    var u, p;
                                    d(i) && ((u = i[0]), (p = i[1]), u ? (p ? (i = u + " " + p) : ((i = u), (n = "addClass"))) : ((i = p), (n = "removeClass")));
                                    var h = "setClass" == n,
                                        f = h || "addClass" == n || "removeClass" == n || "animate" == n,
                                        m = t.attr("class") + " " + i;
                                    if (O(m)) {
                                        var v = l,
                                            g = [],
                                            y = [],
                                            b = l,
                                            w = [],
                                            $ = [],
                                            m = (" " + m).replace(/\s+/g, ".");
                                        return (
                                            c(_(m), function (t) {
                                                !o(t, n) && h && (o(t, "addClass"), o(t, "removeClass"));
                                            }),
                                            {
                                                node: s,
                                                event: n,
                                                className: i,
                                                isClassBased: f,
                                                isSetClassOperation: h,
                                                applyStyles: function () {
                                                    r && t.css(e.extend(r.from || {}, r.to || {}));
                                                },
                                                before: function (t) {
                                                    (v = t),
                                                        a(y, g, function () {
                                                            (v = l), t();
                                                        });
                                                },
                                                after: function (t) {
                                                    (b = t),
                                                        a($, w, function () {
                                                            (b = l), t();
                                                        });
                                                },
                                                cancel: function () {
                                                    g &&
                                                        (c(g, function (t) {
                                                            (t || l)(!0);
                                                        }),
                                                        v(!0)),
                                                        w &&
                                                            (c(w, function (t) {
                                                                (t || l)(!0);
                                                            }),
                                                            b(!0));
                                                },
                                            }
                                        );
                                    }
                                }
                            }
                            function E(t, n, i, r, o, a, u, d) {
                                function p(e) {
                                    var r = "$animate:" + e;
                                    b &&
                                        b[r] &&
                                        0 < b[r].length &&
                                        g(function () {
                                            i.triggerHandler(r, { event: t, className: n });
                                        });
                                }
                                function h() {
                                    p("before");
                                }
                                function f() {
                                    p("after");
                                }
                                function m() {
                                    m.hasBeenRun || ((m.hasBeenRun = !0), a());
                                }
                                function v() {
                                    if (!v.hasBeenRun) {
                                        y && y.applyStyles(),
                                            (v.hasBeenRun = !0),
                                            u &&
                                                u.tempClasses &&
                                                c(u.tempClasses, function (t) {
                                                    s.removeClass(i, t);
                                                });
                                        var e = i.data("$$ngAnimateState");
                                        e &&
                                            (y && y.isClassBased
                                                ? I(i, n)
                                                : (g(function () {
                                                      var e = i.data("$$ngAnimateState") || {};
                                                      S == e.index && I(i, n, t);
                                                  }),
                                                  i.data("$$ngAnimateState", e))),
                                            p("close"),
                                            d();
                                    }
                                }
                                var y = T(i, t, n, u);
                                if (!y) return m(), h(), f(), v(), l;
                                (t = y.event), (n = y.className);
                                var b = e.element._data(y.node),
                                    b = b && b.events;
                                if ((r || (r = o ? o.parent() : i.parent()), R(i, r))) return m(), h(), f(), v(), l;
                                r = i.data("$$ngAnimateState") || {};
                                var w = r.active || {},
                                    $ = r.totalActive || 0,
                                    x = r.last;
                                if (((o = !1), $ > 0)) {
                                    if ((($ = []), y.isClassBased)) "setClass" == x.event ? ($.push(x), I(i, n)) : w[n] && ((k = w[n]), k.event == t ? (o = !0) : ($.push(k), I(i, n)));
                                    else if ("leave" == t && w["ng-leave"]) o = !0;
                                    else {
                                        for (var k in w) $.push(w[k]);
                                        (r = {}), I(i, !0);
                                    }
                                    0 < $.length &&
                                        c($, function (t) {
                                            t.cancel();
                                        });
                                }
                                if ((!y.isClassBased || y.isSetClassOperation || "animate" == t || o || (o = ("addClass" == t) == i.hasClass(n)), o)) return m(), h(), f(), p("close"), d(), l;
                                (w = r.active || {}),
                                    ($ = r.totalActive || 0),
                                    "leave" == t &&
                                        i.one("$destroy", function (t) {
                                            t = e.element(this);
                                            var n = t.data("$$ngAnimateState");
                                            n && (n = n.active["ng-leave"]) && (n.cancel(), I(t, "ng-leave"));
                                        }),
                                    s.addClass(i, "ng-animate"),
                                    u &&
                                        u.tempClasses &&
                                        c(u.tempClasses, function (t) {
                                            s.addClass(i, t);
                                        });
                                var S = j++;
                                return (
                                    $++,
                                    (w[n] = y),
                                    i.data("$$ngAnimateState", { last: y, active: w, index: S, totalActive: $ }),
                                    h(),
                                    y.before(function (e) {
                                        var r = i.data("$$ngAnimateState");
                                        (e = e || !r || !r.active[n] || (y.isClassBased && r.active[n].event != t)), m(), !0 === e ? v() : (f(), y.after(v));
                                    }),
                                    y.cancel
                                );
                            }
                            function A(t) {
                                (t = o(t)) &&
                                    ((t = e.isFunction(t.getElementsByClassName) ? t.getElementsByClassName("ng-animate") : t.querySelectorAll(".ng-animate")),
                                    c(t, function (t) {
                                        (t = e.element(t)),
                                            (t = t.data("$$ngAnimateState")) &&
                                                t.active &&
                                                c(t.active, function (t) {
                                                    t.cancel();
                                                });
                                    }));
                            }
                            function I(t, e) {
                                if (a(t, v)) f.disabled || ((f.running = !1), (f.structural = !1));
                                else if (e) {
                                    var n = t.data("$$ngAnimateState") || {},
                                        i = !0 === e;
                                    !i && n.active && n.active[e] && (n.totalActive--, delete n.active[e]), (i || !n.totalActive) && (s.removeClass(t, "ng-animate"), t.removeData("$$ngAnimateState"));
                                }
                            }
                            function R(t, n) {
                                if (f.disabled) return !0;
                                if (a(t, v)) return f.running;
                                var i, r, o;
                                do {
                                    if (0 === n.length) break;
                                    var s = a(n, v),
                                        l = s ? f : n.data("$$ngAnimateState") || {};
                                    if (l.disabled) return !0;
                                    s && (o = !0), !1 !== i && ((s = n.data("$$ngAnimateChildren")), e.isDefined(s) && (i = s)), (r = r || l.running || (l.last && !l.last.isClassBased));
                                } while ((n = n.parent()));
                                return !o || (!i && r);
                            }
                            (s = $), v.data("$$ngAnimateState", f);
                            var P = y.$watch(
                                    function () {
                                        return w.totalPendingRequests;
                                    },
                                    function (t, e) {
                                        0 === t &&
                                            (P(),
                                            y.$$postDigest(function () {
                                                y.$$postDigest(function () {
                                                    f.running = !1;
                                                });
                                            }));
                                    }
                                ),
                                j = 0,
                                D = r.classNameFilter(),
                                O = D
                                    ? function (t) {
                                          return D.test(t);
                                      }
                                    : function () {
                                          return !0;
                                      };
                            return {
                                animate: function (t, n, i, r, a) {
                                    return (
                                        (r = r || "ng-inline-animate"),
                                        (a = S(a) || {}),
                                        (a.from = i ? n : null),
                                        (a.to = i ? i : n),
                                        k(function (n) {
                                            return E("animate", r, e.element(o(t)), null, null, l, a, n);
                                        })
                                    );
                                },
                                enter: function (n, i, r, a) {
                                    return (
                                        (a = S(a)),
                                        (n = e.element(n)),
                                        (i = i && e.element(i)),
                                        (r = r && e.element(r)),
                                        x(n, !0),
                                        t.enter(n, i, r),
                                        k(function (t) {
                                            return E("enter", "ng-enter", e.element(o(n)), i, r, l, a, t);
                                        })
                                    );
                                },
                                leave: function (n, i) {
                                    return (
                                        (i = S(i)),
                                        (n = e.element(n)),
                                        A(n),
                                        x(n, !0),
                                        k(function (r) {
                                            return E(
                                                "leave",
                                                "ng-leave",
                                                e.element(o(n)),
                                                null,
                                                null,
                                                function () {
                                                    t.leave(n);
                                                },
                                                i,
                                                r
                                            );
                                        })
                                    );
                                },
                                move: function (n, i, r, a) {
                                    return (
                                        (a = S(a)),
                                        (n = e.element(n)),
                                        (i = i && e.element(i)),
                                        (r = r && e.element(r)),
                                        A(n),
                                        x(n, !0),
                                        t.move(n, i, r),
                                        k(function (t) {
                                            return E("move", "ng-move", e.element(o(n)), i, r, l, a, t);
                                        })
                                    );
                                },
                                addClass: function (t, e, n) {
                                    return this.setClass(t, e, [], n);
                                },
                                removeClass: function (t, e, n) {
                                    return this.setClass(t, [], e, n);
                                },
                                setClass: function (n, i, r, a) {
                                    if (((a = S(a)), (n = e.element(n)), (n = e.element(o(n))), x(n))) return t.$$setClassImmediately(n, i, r, a);
                                    var s,
                                        l = n.data("$$animateClasses"),
                                        u = !!l;
                                    return (
                                        l || (l = { classes: {} }),
                                        (s = l.classes),
                                        (i = d(i) ? i : i.split(" ")),
                                        c(i, function (t) {
                                            t && t.length && (s[t] = !0);
                                        }),
                                        (r = d(r) ? r : r.split(" ")),
                                        c(r, function (t) {
                                            t && t.length && (s[t] = !1);
                                        }),
                                        u
                                            ? (a && l.options && (l.options = e.extend(l.options || {}, a)), l.promise)
                                            : (n.data("$$animateClasses", (l = { classes: s, options: a })),
                                              (l.promise = k(function (e) {
                                                  var i,
                                                      r,
                                                      a,
                                                      s = o(n);
                                                  if ((s && ((i = n.data("$$animateClasses")), n.removeData("$$animateClasses"), (a = n.parent()), (r = s.parentNode)), r && !r.$$NG_REMOVED && !s.$$NG_REMOVED)) {
                                                      r = n.data("$$ngAnimateState") || {};
                                                      var l = C(n, i, r.active);
                                                      return l
                                                          ? E(
                                                                "setClass",
                                                                l,
                                                                n,
                                                                a,
                                                                null,
                                                                function () {
                                                                    l[0] && t.$$addClassImmediately(n, l[0]), l[1] && t.$$removeClassImmediately(n, l[1]);
                                                                },
                                                                i.options,
                                                                e
                                                            )
                                                          : e();
                                                  }
                                                  e();
                                              })))
                                    );
                                },
                                cancel: function (t) {
                                    t.$$cancelFn();
                                },
                                enabled: function (t, e) {
                                    switch (arguments.length) {
                                        case 2:
                                            if (t) I(e);
                                            else {
                                                var n = e.data("$$ngAnimateState") || {};
                                                (n.disabled = !0), e.data("$$ngAnimateState", n);
                                            }
                                            break;
                                        case 1:
                                            f.disabled = !t;
                                            break;
                                        default:
                                            t = !f.disabled;
                                    }
                                    return !!t;
                                },
                            };
                        },
                    ]),
                        r.register("", [
                            "$window",
                            "$sniffer",
                            "$timeout",
                            "$$animateReflow",
                            function (i, r, a, u) {
                                function h() {
                                    P ||
                                        (P = u(function () {
                                            (O = []), (P = null), (j = {});
                                        }));
                                }
                                function f(t, e) {
                                    P && P(),
                                        O.push(e),
                                        (P = u(function () {
                                            c(O, function (t) {
                                                t();
                                            }),
                                                (O = []),
                                                (P = null),
                                                (j = {});
                                        }));
                                }
                                function m(t, n) {
                                    var i = o(t);
                                    (t = e.element(i)),
                                        q.push(t),
                                        (i = Date.now() + n),
                                        N >= i ||
                                            (a.cancel(L),
                                            (N = i),
                                            (L = a(
                                                function () {
                                                    v(q), (q = []);
                                                },
                                                n,
                                                !1
                                            )));
                                }
                                function v(t) {
                                    c(t, function (t) {
                                        (t = t.data("$$ngAnimateCSS3Data")) &&
                                            c(t.closeAnimationFns, function (t) {
                                                t();
                                            });
                                    });
                                }
                                function g(t, e) {
                                    var n = e ? j[e] : null;
                                    if (!n) {
                                        var r = 0,
                                            o = 0,
                                            a = 0,
                                            s = 0;
                                        c(t, function (t) {
                                            if (1 == t.nodeType) {
                                                (t = i.getComputedStyle(t) || {}), (r = Math.max(y(t[T + "Duration"]), r)), (o = Math.max(y(t[T + "Delay"]), o)), (s = Math.max(y(t[A + "Delay"]), s));
                                                var e = y(t[A + "Duration"]);
                                                e > 0 && (e *= parseInt(t[A + "IterationCount"], 10) || 1), (a = Math.max(e, a));
                                            }
                                        }),
                                            (n = { total: 0, transitionDelay: o, transitionDuration: r, animationDelay: s, animationDuration: a }),
                                            e && (j[e] = n);
                                    }
                                    return n;
                                }
                                function y(t) {
                                    var e = 0;
                                    return (
                                        (t = p(t) ? t.split(/\s*,\s*/) : []),
                                        c(t, function (t) {
                                            e = Math.max(parseFloat(t) || 0, e);
                                        }),
                                        e
                                    );
                                }
                                function b(t, e, n, i) {
                                    t = 0 <= ["ng-enter", "ng-leave", "ng-move"].indexOf(n);
                                    var r,
                                        a = e.parent(),
                                        l = a.data("$$ngAnimateKey");
                                    l || (a.data("$$ngAnimateKey", ++D), (l = D)), (r = l + "-" + o(e).getAttribute("class"));
                                    var a = r + " " + n,
                                        l = j[a] ? ++j[a].total : 0,
                                        c = {};
                                    if (l > 0) {
                                        var u = n + "-stagger",
                                            c = r + " " + u;
                                        (r = !j[c]) && s.addClass(e, u), (c = g(e, c)), r && s.removeClass(e, u);
                                    }
                                    s.addClass(e, n);
                                    var u = e.data("$$ngAnimateCSS3Data") || {},
                                        d = g(e, a);
                                    return (
                                        (r = d.transitionDuration),
                                        (d = d.animationDuration),
                                        t && 0 === r && 0 === d
                                            ? (s.removeClass(e, n), !1)
                                            : ((n = i || (t && r > 0)),
                                              (t = d > 0 && 0 < c.animationDelay && 0 === c.animationDuration),
                                              e.data("$$ngAnimateCSS3Data", { stagger: c, cacheKey: a, running: u.running || 0, itemIndex: l, blockTransition: n, closeAnimationFns: u.closeAnimationFns || [] }),
                                              (a = o(e)),
                                              n && ($(a, !0), i && e.css(i)),
                                              t && (a.style[A + "PlayState"] = "paused"),
                                              !0)
                                    );
                                }
                                function w(t, e, n, i, r) {
                                    function l() {
                                        e.off(P, u), s.removeClass(e, p), s.removeClass(e, h), _ && a.cancel(_), C(e, n);
                                        var t,
                                            i = o(e);
                                        for (t in f) i.style.removeProperty(f[t]);
                                    }
                                    function u(t) {
                                        t.stopPropagation();
                                        var e = t.originalEvent || t;
                                        (t = e.$manualTimeStamp || e.timeStamp || Date.now()), (e = parseFloat(e.elapsedTime.toFixed(3))), Math.max(t - T, 0) >= S && e >= k && i();
                                    }
                                    var d = o(e);
                                    if (((t = e.data("$$ngAnimateCSS3Data")), -1 != d.getAttribute("class").indexOf(n) && t)) {
                                        var p = "",
                                            h = "";
                                        c(n.split(" "), function (t, e) {
                                            var n = (e > 0 ? " " : "") + t;
                                            (p += n + "-active"), (h += n + "-pending");
                                        });
                                        var f = [],
                                            v = t.itemIndex,
                                            y = t.stagger,
                                            b = 0;
                                        if (v > 0) {
                                            (b = 0), 0 < y.transitionDelay && 0 === y.transitionDuration && (b = y.transitionDelay * v);
                                            var w = 0;
                                            0 < y.animationDelay && 0 === y.animationDuration && ((w = y.animationDelay * v), f.push(R + "animation-play-state")), (b = Math.round(100 * Math.max(b, w)) / 100);
                                        }
                                        b || (s.addClass(e, p), t.blockTransition && $(d, !1));
                                        var x = g(e, t.cacheKey + " " + p),
                                            k = Math.max(x.transitionDuration, x.animationDuration);
                                        if (0 !== k) {
                                            !b && r && 0 < Object.keys(r).length && (x.transitionDuration || (e.css("transition", x.animationDuration + "s linear all"), f.push("transition")), e.css(r));
                                            var v = Math.max(x.transitionDelay, x.animationDelay),
                                                S = 1e3 * v;
                                            0 < f.length && ((y = d.getAttribute("style") || ""), ";" !== y.charAt(y.length - 1) && (y += ";"), d.setAttribute("style", y + " "));
                                            var _,
                                                T = Date.now(),
                                                P = I + " " + E,
                                                v = 1e3 * (b + 1.5 * (v + k));
                                            return (
                                                b > 0 &&
                                                    (s.addClass(e, h),
                                                    (_ = a(
                                                        function () {
                                                            (_ = null),
                                                                0 < x.transitionDuration && $(d, !1),
                                                                0 < x.animationDuration && (d.style[A + "PlayState"] = ""),
                                                                s.addClass(e, p),
                                                                s.removeClass(e, h),
                                                                r && (0 === x.transitionDuration && e.css("transition", x.animationDuration + "s linear all"), e.css(r), f.push("transition"));
                                                        },
                                                        1e3 * b,
                                                        !1
                                                    ))),
                                                e.on(P, u),
                                                t.closeAnimationFns.push(function () {
                                                    l(), i();
                                                }),
                                                t.running++,
                                                m(e, v),
                                                l
                                            );
                                        }
                                        s.removeClass(e, p), C(e, n), i();
                                    } else i();
                                }
                                function $(t, e) {
                                    t.style[T + "Property"] = e ? "none" : "";
                                }
                                function x(t, e, n, i) {
                                    return b(t, e, n, i)
                                        ? function (t) {
                                              t && C(e, n);
                                          }
                                        : void 0;
                                }
                                function k(t, e, n, i, r) {
                                    return e.data("$$ngAnimateCSS3Data") ? w(t, e, n, i, r) : (C(e, n), void i());
                                }
                                function S(t, e, n, i, r) {
                                    var o = x(t, e, n, r.from);
                                    if (o) {
                                        var a = o;
                                        return (
                                            f(e, function () {
                                                a = k(t, e, n, i, r.to);
                                            }),
                                            function (t) {
                                                (a || l)(t);
                                            }
                                        );
                                    }
                                    h(), i();
                                }
                                function C(t, e) {
                                    s.removeClass(t, e);
                                    var n = t.data("$$ngAnimateCSS3Data");
                                    n && (n.running && n.running--, (n.running && 0 !== n.running) || t.removeData("$$ngAnimateCSS3Data"));
                                }
                                function _(t, e) {
                                    var n = "";
                                    return (
                                        (t = d(t) ? t : t.split(/\s+/)),
                                        c(t, function (t, i) {
                                            t && 0 < t.length && (n += (i > 0 ? " " : "") + t + e);
                                        }),
                                        n
                                    );
                                }
                                var T,
                                    E,
                                    A,
                                    I,
                                    R = "";
                                t.ontransitionend === n && t.onwebkittransitionend !== n ? ((R = "-webkit-"), (T = "WebkitTransition"), (E = "webkitTransitionEnd transitionend")) : ((T = "transition"), (E = "transitionend")),
                                    t.onanimationend === n && t.onwebkitanimationend !== n ? ((R = "-webkit-"), (A = "WebkitAnimation"), (I = "webkitAnimationEnd animationend")) : ((A = "animation"), (I = "animationend"));
                                var P,
                                    j = {},
                                    D = 0,
                                    O = [],
                                    L = null,
                                    N = 0,
                                    q = [];
                                return {
                                    animate: function (t, e, n, i, r, o) {
                                        return (o = o || {}), (o.from = n), (o.to = i), S("animate", t, e, r, o);
                                    },
                                    enter: function (t, e, n) {
                                        return (n = n || {}), S("enter", t, "ng-enter", e, n);
                                    },
                                    leave: function (t, e, n) {
                                        return (n = n || {}), S("leave", t, "ng-leave", e, n);
                                    },
                                    move: function (t, e, n) {
                                        return (n = n || {}), S("move", t, "ng-move", e, n);
                                    },
                                    beforeSetClass: function (t, e, n, i, r) {
                                        return (r = r || {}), (e = _(n, "-remove") + " " + _(e, "-add")), (r = x("setClass", t, e, r.from)) ? (f(t, i), r) : (h(), void i());
                                    },
                                    beforeAddClass: function (t, e, n, i) {
                                        return (i = i || {}), (e = x("addClass", t, _(e, "-add"), i.from)) ? (f(t, n), e) : (h(), void n());
                                    },
                                    beforeRemoveClass: function (t, e, n, i) {
                                        return (i = i || {}), (e = x("removeClass", t, _(e, "-remove"), i.from)) ? (f(t, n), e) : (h(), void n());
                                    },
                                    setClass: function (t, e, n, i, r) {
                                        return (r = r || {}), (n = _(n, "-remove")), (e = _(e, "-add")), k("setClass", t, n + " " + e, i, r.to);
                                    },
                                    addClass: function (t, e, n, i) {
                                        return (i = i || {}), k("addClass", t, _(e, "-add"), n, i.to);
                                    },
                                    removeClass: function (t, e, n, i) {
                                        return (i = i || {}), k("removeClass", t, _(e, "-remove"), n, i.to);
                                    },
                                };
                            },
                        ]);
                },
            ]);
    })(window, window.angular),
    "undefined" != typeof module && "undefined" != typeof exports && module.exports === exports && (module.exports = "ui.router"),
    (function (t, e, n) {
        "use strict";
        function i(t, e) {
            return D(new (D(function () {}, { prototype: t }))(), e);
        }
        function r(t) {
            return (
                j(arguments, function (e) {
                    e !== t &&
                        j(e, function (e, n) {
                            t.hasOwnProperty(n) || (t[n] = e);
                        });
                }),
                t
            );
        }
        function o(t, e) {
            var n = [];
            for (var i in t.path) {
                if (t.path[i] !== e.path[i]) break;
                n.push(t.path[i]);
            }
            return n;
        }
        function a(t, e) {
            if (Array.prototype.indexOf) return t.indexOf(e, Number(arguments[2]) || 0);
            var n = t.length >>> 0,
                i = Number(arguments[2]) || 0;
            for (i = 0 > i ? Math.ceil(i) : Math.floor(i), 0 > i && (i += n); n > i; i++) if (i in t && t[i] === e) return i;
            return -1;
        }
        function s(t, e, n, i) {
            var r,
                s = o(n, i),
                l = {},
                c = [];
            for (var u in s)
                if (s[u].params && s[u].params.length) {
                    r = s[u].params;
                    for (var d in r) a(c, r[d]) >= 0 || (c.push(r[d]), (l[r[d]] = t[r[d]]));
                }
            return D({}, l, e);
        }
        function l(t, e) {
            var n = {};
            return (
                j(t, function (t) {
                    var i = e[t];
                    n[t] = null != i ? String(i) : null;
                }),
                n
            );
        }
        function c(t, e, n) {
            if (!n) {
                n = [];
                for (var i in t) n.push(i);
            }
            for (var r = 0; r < n.length; r++) {
                var o = n[r];
                if (t[o] != e[o]) return !1;
            }
            return !0;
        }
        function u(t, e) {
            var n = {};
            return (
                j(t, function (t) {
                    n[t] = e[t];
                }),
                n
            );
        }
        function d(t, e) {
            var i = 1,
                o = 2,
                a = {},
                s = [],
                l = a,
                c = D(t.when(a), { $$promises: a, $$values: a });
            (this.study = function (a) {
                function u(t, n) {
                    if (f[n] !== o) {
                        if ((h.push(n), f[n] === i)) throw (h.splice(0, h.indexOf(n)), new Error("Cyclic dependency: " + h.join(" -> ")));
                        if (((f[n] = i), I(t)))
                            p.push(
                                n,
                                [
                                    function () {
                                        return e.get(t);
                                    },
                                ],
                                s
                            );
                        else {
                            var r = e.annotate(t);
                            j(r, function (t) {
                                t !== n && a.hasOwnProperty(t) && u(a[t], t);
                            }),
                                p.push(n, t, r);
                        }
                        h.pop(), (f[n] = o);
                    }
                }
                function d(t) {
                    return R(t) && t.then && t.$$promises;
                }
                if (!R(a)) throw new Error("'invocables' must be an object");
                var p = [],
                    h = [],
                    f = {};
                return (
                    j(a, u),
                    (a = h = f = null),
                    function (i, o, a) {
                        function s() {
                            --y || (b || r(g, o.$$values), (m.$$values = g), (m.$$promises = !0), f.resolve(g));
                        }
                        function u(t) {
                            (m.$$failure = t), f.reject(t);
                        }
                        function h(n, r, o) {
                            function l(t) {
                                d.reject(t), u(t);
                            }
                            function c() {
                                if (!E(m.$$failure))
                                    try {
                                        d.resolve(e.invoke(r, a, g)),
                                            d.promise.then(function (t) {
                                                (g[n] = t), s();
                                            }, l);
                                    } catch (t) {
                                        l(t);
                                    }
                            }
                            var d = t.defer(),
                                p = 0;
                            j(o, function (t) {
                                v.hasOwnProperty(t) &&
                                    !i.hasOwnProperty(t) &&
                                    (p++,
                                    v[t].then(function (e) {
                                        (g[t] = e), --p || c();
                                    }, l));
                            }),
                                p || c(),
                                (v[n] = d.promise);
                        }
                        if ((d(i) && a === n && ((a = o), (o = i), (i = null)), i)) {
                            if (!R(i)) throw new Error("'locals' must be an object");
                        } else i = l;
                        if (o) {
                            if (!d(o)) throw new Error("'parent' must be a promise returned by $resolve.resolve()");
                        } else o = c;
                        var f = t.defer(),
                            m = f.promise,
                            v = (m.$$promises = {}),
                            g = D({}, i),
                            y = 1 + p.length / 3,
                            b = !1;
                        if (E(o.$$failure)) return u(o.$$failure), m;
                        o.$$values ? ((b = r(g, o.$$values)), s()) : (D(v, o.$$promises), o.then(s, u));
                        for (var w = 0, $ = p.length; $ > w; w += 3) i.hasOwnProperty(p[w]) ? s() : h(p[w], p[w + 1], p[w + 2]);
                        return m;
                    }
                );
            }),
                (this.resolve = function (t, e, n, i) {
                    return this.study(t)(e, n, i);
                });
        }
        function p(t, e, n) {
            (this.fromConfig = function (t, e, n) {
                return E(t.template) ? this.fromString(t.template, e) : E(t.templateUrl) ? this.fromUrl(t.templateUrl, e) : E(t.templateProvider) ? this.fromProvider(t.templateProvider, e, n) : null;
            }),
                (this.fromString = function (t, e) {
                    return A(t) ? t(e) : t;
                }),
                (this.fromUrl = function (n, i) {
                    return (
                        A(n) && (n = n(i)),
                        null == n
                            ? null
                            : t.get(n, { cache: e }).then(function (t) {
                                  return t.data;
                              })
                    );
                }),
                (this.fromProvider = function (t, e, i) {
                    return n.invoke(t, null, i || { params: e });
                });
        }
        function h(t) {
            function e(e) {
                if (!/^\w+(-+\w+)*$/.test(e)) throw new Error("Invalid parameter name '" + e + "' in pattern '" + t + "'");
                if (o[e]) throw new Error("Duplicate parameter name '" + e + "' in pattern '" + t + "'");
                (o[e] = !0), c.push(e);
            }
            function n(t) {
                return t.replace(/[\\\[\]\^$*+?.()|{}]/g, "\\$&");
            }
            var i,
                r = /([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,
                o = {},
                a = "^",
                s = 0,
                l = (this.segments = []),
                c = (this.params = []);
            this.source = t;
            for (var u, d, p; (i = r.exec(t)) && ((u = i[2] || i[3]), (d = i[4] || ("*" == i[1] ? ".*" : "[^/]*")), (p = t.substring(s, i.index)), !(p.indexOf("?") >= 0)); ) (a += n(p) + "(" + d + ")"), e(u), l.push(p), (s = r.lastIndex);
            p = t.substring(s);
            var h = p.indexOf("?");
            if (h >= 0) {
                var f = (this.sourceSearch = p.substring(h));
                (p = p.substring(0, h)), (this.sourcePath = t.substring(0, s + h)), j(f.substring(1).split(/[&?]/), e);
            } else (this.sourcePath = t), (this.sourceSearch = "");
            (a += n(p) + "$"), l.push(p), (this.regexp = new RegExp(a)), (this.prefix = l[0]);
        }
        function f() {
            (this.compile = function (t) {
                return new h(t);
            }),
                (this.isMatcher = function (t) {
                    return R(t) && A(t.exec) && A(t.format) && A(t.concat);
                }),
                (this.$get = function () {
                    return this;
                });
        }
        function m(t) {
            function e(t) {
                var e = /^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(t.source);
                return null != e ? e[1].replace(/\\(.)/g, "$1") : "";
            }
            function n(t, e) {
                return t.replace(/\$(\$|\d{1,2})/, function (t, n) {
                    return e["$" === n ? 0 : Number(n)];
                });
            }
            function i(t, e, n) {
                if (!n) return !1;
                var i = t.invoke(e, e, { $match: n });
                return E(i) ? i : !0;
            }
            var r = [],
                o = null;
            (this.rule = function (t) {
                if (!A(t)) throw new Error("'rule' must be a function");
                return r.push(t), this;
            }),
                (this.otherwise = function (t) {
                    if (I(t)) {
                        var e = t;
                        t = function () {
                            return e;
                        };
                    } else if (!A(t)) throw new Error("'rule' must be a function");
                    return (o = t), this;
                }),
                (this.when = function (r, o) {
                    var a,
                        s = I(o);
                    if ((I(r) && (r = t.compile(r)), !s && !A(o) && !P(o))) throw new Error("invalid 'handler' in when()");
                    var l = {
                            matcher: function (e, n) {
                                return (
                                    s &&
                                        ((a = t.compile(n)),
                                        (n = [
                                            "$match",
                                            function (t) {
                                                return a.format(t);
                                            },
                                        ])),
                                    D(
                                        function (t, r) {
                                            return i(t, n, e.exec(r.path(), r.search()));
                                        },
                                        { prefix: I(e.prefix) ? e.prefix : "" }
                                    )
                                );
                            },
                            regex: function (t, r) {
                                if (t.global || t.sticky) throw new Error("when() RegExp must not be global or sticky");
                                return (
                                    s &&
                                        ((a = r),
                                        (r = [
                                            "$match",
                                            function (t) {
                                                return n(a, t);
                                            },
                                        ])),
                                    D(
                                        function (e, n) {
                                            return i(e, r, t.exec(n.path()));
                                        },
                                        { prefix: e(t) }
                                    )
                                );
                            },
                        },
                        c = { matcher: t.isMatcher(r), regex: r instanceof RegExp };
                    for (var u in c) if (c[u]) return this.rule(l[u](r, o));
                    throw new Error("invalid 'what' in when()");
                }),
                (this.$get = [
                    "$location",
                    "$rootScope",
                    "$injector",
                    function (t, e, n) {
                        function i(e) {
                            function i(e) {
                                var i = e(n, t);
                                return i ? (I(i) && t.replace().url(i), !0) : !1;
                            }
                            if (!e || !e.defaultPrevented) {
                                var a,
                                    s = r.length;
                                for (a = 0; s > a; a++) if (i(r[a])) return;
                                o && i(o);
                            }
                        }
                        return (
                            e.$on("$locationChangeSuccess", i),
                            {
                                sync: function () {
                                    i();
                                },
                            }
                        );
                    },
                ]);
        }
        function v(t, r, o) {
            function a(t) {
                return 0 === t.indexOf(".") || 0 === t.indexOf("^");
            }
            function d(t, e) {
                var i = I(t),
                    r = i ? t : t.name,
                    o = a(r);
                if (o) {
                    if (!e) throw new Error("No reference point given for path '" + r + "'");
                    for (var s = r.split("."), l = 0, c = s.length, u = e; c > l; l++)
                        if ("" !== s[l] || 0 !== l) {
                            if ("^" !== s[l]) break;
                            if (!u.parent) throw new Error("Path '" + r + "' not valid for state '" + e.name + "'");
                            u = u.parent;
                        } else u = e;
                    (s = s.slice(l).join(".")), (r = u.name + (u.name && s ? "." : "") + s);
                }
                var d = x[r];
                return !d || (!i && (i || (d !== t && d.self !== t))) ? n : d;
            }
            function p(t, e) {
                k[t] || (k[t] = []), k[t].push(e);
            }
            function h(e) {
                e = i(e, {
                    self: e,
                    resolve: e.resolve || {},
                    toString: function () {
                        return this.name;
                    },
                });
                var n = e.name;
                if (!I(n) || n.indexOf("@") >= 0) throw new Error("State must have a valid name");
                if (x.hasOwnProperty(n)) throw new Error("State '" + n + "'' is already defined");
                var r = -1 !== n.indexOf(".") ? n.substring(0, n.lastIndexOf(".")) : I(e.parent) ? e.parent : "";
                if (r && !x[r]) return p(r, e.self);
                for (var o in C) A(C[o]) && (e[o] = C[o](e, C.$delegates[o]));
                if (
                    ((x[n] = e),
                    !e[S] &&
                        e.url &&
                        t.when(e.url, [
                            "$match",
                            "$stateParams",
                            function (t, n) {
                                ($.$current.navigable == e && c(t, n)) || $.transitionTo(e, t, { location: !1 });
                            },
                        ]),
                    k[n])
                )
                    for (var a = 0; a < k[n].length; a++) h(k[n][a]);
                return e;
            }
            function f(t) {
                return t.indexOf("*") > -1;
            }
            function m(t) {
                var e = t.split("."),
                    n = $.$current.name.split(".");
                if (("**" === e[0] && ((n = n.slice(n.indexOf(e[1]))), n.unshift("**")), "**" === e[e.length - 1] && (n.splice(n.indexOf(e[e.length - 2]) + 1, Number.MAX_VALUE), n.push("**")), e.length != n.length)) return !1;
                for (var i = 0, r = e.length; r > i; i++) "*" === e[i] && (n[i] = "*");
                return n.join("") === e.join("");
            }
            function v(t, e) {
                return I(t) && !E(e) ? C[t] : A(e) && I(t) ? (C[t] && !C.$delegates[t] && (C.$delegates[t] = C[t]), (C[t] = e), this) : this;
            }
            function g(t, e) {
                return R(t) ? (e = t) : (e.name = t), h(e), this;
            }
            function y(t, r, a, p, h, v, g, y, k) {
                function C() {
                    g.url() !== q && (g.url(q), g.replace());
                }
                function _(t, n, i, o, s) {
                    var l = i ? n : u(t.params, n),
                        c = { $stateParams: l };
                    s.resolve = h.resolve(t.resolve, c, s.resolve, t);
                    var d = [
                        s.resolve.then(function (t) {
                            s.globals = t;
                        }),
                    ];
                    return (
                        o && d.push(o),
                        j(t.views, function (n, i) {
                            var r = n.resolve && n.resolve !== t.resolve ? n.resolve : {};
                            (r.$template = [
                                function () {
                                    return a.load(i, { view: n, locals: c, params: l, notify: !1 }) || "";
                                },
                            ]),
                                d.push(
                                    h.resolve(r, c, s.resolve, t).then(function (o) {
                                        if (A(n.controllerProvider) || P(n.controllerProvider)) {
                                            var a = e.extend({}, r, c);
                                            o.$$controller = p.invoke(n.controllerProvider, null, a);
                                        } else o.$$controller = n.controller;
                                        (o.$$state = t), (o.$$controllerAs = n.controllerAs), (s[i] = o);
                                    })
                                );
                        }),
                        r.all(d).then(function (t) {
                            return s;
                        })
                    );
                }
                var T = r.reject(new Error("transition superseded")),
                    R = r.reject(new Error("transition prevented")),
                    L = r.reject(new Error("transition aborted")),
                    N = r.reject(new Error("transition failed")),
                    q = g.url(),
                    U = k.baseHref();
                return (
                    (w.locals = { resolve: null, globals: { $stateParams: {} } }),
                    ($ = { params: {}, current: w.self, $current: w, transition: null }),
                    ($.reload = function () {
                        $.transitionTo($.current, v, { reload: !0, inherit: !1, notify: !1 });
                    }),
                    ($.go = function (t, e, n) {
                        return this.transitionTo(t, e, D({ inherit: !0, relative: $.$current }, n));
                    }),
                    ($.transitionTo = function (e, n, o) {
                        (n = n || {}), (o = D({ location: !0, inherit: !1, relative: null, notify: !0, reload: !1, $retry: !1 }, o || {}));
                        var a,
                            u = $.$current,
                            h = $.params,
                            f = u.path,
                            m = d(e, o.relative);
                        if (!E(m)) {
                            var y = { to: e, toParams: n, options: o };
                            if (((a = t.$broadcast("$stateNotFound", y, u.self, h)), a.defaultPrevented)) return C(), L;
                            if (a.retry) {
                                if (o.$retry) return C(), N;
                                var x = ($.transition = r.when(a.retry));
                                return (
                                    x.then(
                                        function () {
                                            return x !== $.transition ? T : ((y.options.$retry = !0), $.transitionTo(y.to, y.toParams, y.options));
                                        },
                                        function () {
                                            return L;
                                        }
                                    ),
                                    C(),
                                    x
                                );
                            }
                            if (((e = y.to), (n = y.toParams), (o = y.options), (m = d(e, o.relative)), !E(m))) {
                                if (o.relative) throw new Error("Could not resolve '" + e + "' from state '" + o.relative + "'");
                                throw new Error("No such state '" + e + "'");
                            }
                        }
                        if (m[S]) throw new Error("Cannot transition to abstract state '" + e + "'");
                        o.inherit && (n = s(v, n || {}, $.$current, m)), (e = m);
                        var k,
                            A,
                            I = e.path,
                            P = w.locals,
                            j = [];
                        for (k = 0, A = I[k]; A && A === f[k] && c(n, h, A.ownParams) && !o.reload; k++, A = I[k]) P = j[k] = A.locals;
                        if (b(e, u, P, o)) return e.self.reloadOnSearch !== !1 && C(), ($.transition = null), r.when($.current);
                        if (((n = l(e.params, n || {})), o.notify && ((a = t.$broadcast("$stateChangeStart", e.self, n, u.self, h)), a.defaultPrevented))) return C(), R;
                        for (var U = r.when(P), M = k; M < I.length; M++, A = I[M]) (P = j[M] = i(P)), (U = _(A, n, A === e, U, P));
                        var B = ($.transition = U.then(
                            function () {
                                var i, r, a;
                                if ($.transition !== B) return T;
                                for (i = f.length - 1; i >= k; i--) (a = f[i]), a.self.onExit && p.invoke(a.self.onExit, a.self, a.locals.globals), (a.locals = null);
                                for (i = k; i < I.length; i++) (r = I[i]), (r.locals = j[i]), r.self.onEnter && p.invoke(r.self.onEnter, r.self, r.locals.globals);
                                if ($.transition !== B) return T;
                                ($.$current = e), ($.current = e.self), ($.params = n), O($.params, v), ($.transition = null);
                                var s = e.navigable;
                                return (
                                    o.location && s && (g.url(s.url.format(s.locals.globals.$stateParams)), "replace" === o.location && g.replace()),
                                    o.notify && t.$broadcast("$stateChangeSuccess", e.self, n, u.self, h),
                                    (q = g.url()),
                                    $.current
                                );
                            },
                            function (i) {
                                return $.transition !== B ? T : (($.transition = null), t.$broadcast("$stateChangeError", e.self, n, u.self, h, i), C(), r.reject(i));
                            }
                        ));
                        return B;
                    }),
                    ($.is = function (t, i) {
                        var r = d(t);
                        return E(r) ? ($.$current !== r ? !1 : E(i) && null !== i ? e.equals(v, i) : !0) : n;
                    }),
                    ($.includes = function (t, i) {
                        if (I(t) && f(t)) {
                            if (!m(t)) return !1;
                            t = $.$current.name;
                        }
                        var r = d(t);
                        if (!E(r)) return n;
                        if (!E($.$current.includes[r.name])) return !1;
                        var o = !0;
                        return (
                            e.forEach(i, function (t, e) {
                                (E(v[e]) && v[e] === t) || (o = !1);
                            }),
                            o
                        );
                    }),
                    ($.href = function (t, e, n) {
                        n = D({ lossy: !0, inherit: !1, absolute: !1, relative: $.$current }, n || {});
                        var i = d(t, n.relative);
                        if (!E(i)) return null;
                        e = s(v, e || {}, $.$current, i);
                        var r = i && n.lossy ? i.navigable : i,
                            a = r && r.url ? r.url.format(l(i.params, e || {})) : null;
                        return (
                            !o.html5Mode() && a && (a = "#" + o.hashPrefix() + a),
                            "/" !== U && (o.html5Mode() ? (a = U.slice(0, -1) + a) : n.absolute && (a = U.slice(1) + a)),
                            n.absolute && a && (a = g.protocol() + "://" + g.host() + (80 == g.port() || 443 == g.port() ? "" : ":" + g.port()) + (!o.html5Mode() && a ? "/" : "") + a),
                            a
                        );
                    }),
                    ($.get = function (t, e) {
                        if (!E(t)) {
                            var n = [];
                            return (
                                j(x, function (t) {
                                    n.push(t.self);
                                }),
                                n
                            );
                        }
                        var i = d(t, e);
                        return i && i.self ? i.self : null;
                    }),
                    $
                );
            }
            function b(t, e, n, i) {
                return t !== e || ((n !== e.locals || i.reload) && t.self.reloadOnSearch !== !1) ? void 0 : !0;
            }
            var w,
                $,
                x = {},
                k = {},
                S = "abstract",
                C = {
                    parent: function (t) {
                        if (E(t.parent) && t.parent) return d(t.parent);
                        var e = /^(.+)\.[^.]+$/.exec(t.name);
                        return e ? d(e[1]) : w;
                    },
                    data: function (t) {
                        return t.parent && t.parent.data && (t.data = t.self.data = D({}, t.parent.data, t.data)), t.data;
                    },
                    url: function (t) {
                        var e = t.url;
                        if (I(e)) return "^" == e.charAt(0) ? r.compile(e.substring(1)) : (t.parent.navigable || w).url.concat(e);
                        if (r.isMatcher(e) || null == e) return e;
                        throw new Error("Invalid url '" + e + "' in state '" + t + "'");
                    },
                    navigable: function (t) {
                        return t.url ? t : t.parent ? t.parent.navigable : null;
                    },
                    params: function (t) {
                        if (!t.params) return t.url ? t.url.parameters() : t.parent.params;
                        if (!P(t.params)) throw new Error("Invalid params in state '" + t + "'");
                        if (t.url) throw new Error("Both params and url specicified in state '" + t + "'");
                        return t.params;
                    },
                    views: function (t) {
                        var e = {};
                        return (
                            j(E(t.views) ? t.views : { "": t }, function (n, i) {
                                i.indexOf("@") < 0 && (i += "@" + t.parent.name), (e[i] = n);
                            }),
                            e
                        );
                    },
                    ownParams: function (t) {
                        if (!t.parent) return t.params;
                        var e = {};
                        j(t.params, function (t) {
                            e[t] = !0;
                        }),
                            j(t.parent.params, function (n) {
                                if (!e[n]) throw new Error("Missing required parameter '" + n + "' in state '" + t.name + "'");
                                e[n] = !1;
                            });
                        var n = [];
                        return (
                            j(e, function (t, e) {
                                t && n.push(e);
                            }),
                            n
                        );
                    },
                    path: function (t) {
                        return t.parent ? t.parent.path.concat(t) : [];
                    },
                    includes: function (t) {
                        var e = t.parent ? D({}, t.parent.includes) : {};
                        return (e[t.name] = !0), e;
                    },
                    $delegates: {},
                };
            (w = h({ name: "", url: "^", views: null, abstract: !0 })),
                (w.navigable = null),
                (this.decorator = v),
                (this.state = g),
                (this.$get = y),
                (y.$inject = ["$rootScope", "$q", "$view", "$injector", "$resolve", "$stateParams", "$location", "$urlRouter", "$browser"]);
        }
        function g() {
            function t(t, e) {
                return {
                    load: function (n, i) {
                        var r,
                            o = { template: null, controller: null, view: null, locals: null, notify: !0, async: !0, params: {} };
                        return (i = D(o, i)), i.view && (r = e.fromConfig(i.view, i.params, i.locals)), r && i.notify && t.$broadcast("$viewContentLoading", i), r;
                    },
                };
            }
            (this.$get = t), (t.$inject = ["$rootScope", "$templateFactory"]);
        }
        function y() {
            var t = !1;
            (this.useAnchorScroll = function () {
                t = !0;
            }),
                (this.$get = [
                    "$anchorScroll",
                    "$timeout",
                    function (e, n) {
                        return t
                            ? e
                            : function (t) {
                                  n(
                                      function () {
                                          t[0].scrollIntoView();
                                      },
                                      0,
                                      !1
                                  );
                              };
                    },
                ]);
        }
        function b(t, n, i) {
            function r() {
                return n.has
                    ? function (t) {
                          return n.has(t) ? n.get(t) : null;
                      }
                    : function (t) {
                          try {
                              return n.get(t);
                          } catch (e) {
                              return null;
                          }
                      };
            }
            function o(t, e) {
                var n = function () {
                    return {
                        enter: function (t, e, n) {
                            e.after(t), n();
                        },
                        leave: function (t, e) {
                            t.remove(), e();
                        },
                    };
                };
                if (l)
                    return {
                        enter: function (t, e, n) {
                            l.enter(t, null, e, n);
                        },
                        leave: function (t, e) {
                            l.leave(t, e);
                        },
                    };
                if (s) {
                    var i = s && s(e, t);
                    return {
                        enter: function (t, e, n) {
                            i.enter(t, null, e), n();
                        },
                        leave: function (t, e) {
                            i.leave(t), e();
                        },
                    };
                }
                return n();
            }
            var a = r(),
                s = a("$animator"),
                l = a("$animate"),
                c = {
                    restrict: "ECA",
                    terminal: !0,
                    priority: 400,
                    transclude: "element",
                    compile: function (n, r, a) {
                        return function (n, r, s) {
                            function l() {
                                u && (u.remove(), (u = null)),
                                    p && (p.$destroy(), (p = null)),
                                    d &&
                                        (v.leave(d, function () {
                                            u = null;
                                        }),
                                        (u = d),
                                        (d = null));
                            }
                            function c(o) {
                                var s = n.$new(),
                                    c = d && d.data("$uiViewName"),
                                    u = c && t.$current && t.$current.locals[c];
                                if (o || u !== h) {
                                    var g = a(s, function (t) {
                                        v.enter(t, r, function () {
                                            ((e.isDefined(m) && !m) || n.$eval(m)) && i(t);
                                        }),
                                            l();
                                    });
                                    (h = t.$current.locals[g.data("$uiViewName")]), (d = g), (p = s), p.$emit("$viewContentLoaded"), p.$eval(f);
                                }
                            }
                            var u,
                                d,
                                p,
                                h,
                                f = s.onload || "",
                                m = s.autoscroll,
                                v = o(s, n);
                            n.$on("$stateChangeSuccess", function () {
                                c(!1);
                            }),
                                n.$on("$viewContentLoading", function () {
                                    c(!1);
                                }),
                                c(!0);
                        };
                    },
                };
            return c;
        }
        function w(t, e, n) {
            return {
                restrict: "ECA",
                priority: -400,
                compile: function (i) {
                    var r = i.html();
                    return function (i, o, a) {
                        var s = a.uiView || a.name || "",
                            l = o.inheritedData("$uiView");
                        s.indexOf("@") < 0 && (s = s + "@" + (l ? l.state.name : "")), o.data("$uiViewName", s);
                        var c = n.$current,
                            u = c && c.locals[s];
                        if (u) {
                            o.data("$uiView", { name: s, state: u.$$state }), o.html(u.$template ? u.$template : r);
                            var d = t(o.contents());
                            if (u.$$controller) {
                                u.$scope = i;
                                var p = e(u.$$controller, u);
                                u.$$controllerAs && (i[u.$$controllerAs] = p), o.data("$ngControllerController", p), o.children().data("$ngControllerController", p);
                            }
                            d(i);
                        }
                    };
                },
            };
        }
        function $(t) {
            var e = t.replace(/\n/g, " ").match(/^([^(]+?)\s*(\((.*)\))?$/);
            if (!e || 4 !== e.length) throw new Error("Invalid state ref '" + t + "'");
            return { state: e[1], paramExpr: e[3] || null };
        }
        function x(t) {
            var e = t.parent().inheritedData("$uiView");
            return e && e.state && e.state.name ? e.state : void 0;
        }
        function k(t, n) {
            var i = ["location", "inherit", "reload"];
            return {
                restrict: "A",
                require: "?^uiSrefActive",
                link: function (r, o, a, s) {
                    var l = $(a.uiSref),
                        c = null,
                        u = x(o) || t.$current,
                        d = "FORM" === o[0].nodeName,
                        p = d ? "action" : "href",
                        h = !0,
                        f = { relative: u },
                        m = r.$eval(a.uiSrefOpts) || {};
                    e.forEach(i, function (t) {
                        t in m && (f[t] = m[t]);
                    });
                    var v = function (e) {
                        if ((e && (c = e), h)) {
                            var n = t.href(l.state, c, f);
                            return s && s.$$setStateInfo(l.state, c), n ? void (o[0][p] = n) : ((h = !1), !1);
                        }
                    };
                    l.paramExpr &&
                        (r.$watch(
                            l.paramExpr,
                            function (t, e) {
                                t !== c && v(t);
                            },
                            !0
                        ),
                        (c = r.$eval(l.paramExpr))),
                        v(),
                        d ||
                            o.bind("click", function (e) {
                                var i = e.which || e.button;
                                i > 1 ||
                                    e.ctrlKey ||
                                    e.metaKey ||
                                    e.shiftKey ||
                                    o.attr("target") ||
                                    (n(function () {
                                        t.go(l.state, c, f);
                                    }),
                                    e.preventDefault());
                            });
                },
            };
        }
        function S(t, e, n) {
            return {
                restrict: "A",
                controller: [
                    "$scope",
                    "$element",
                    "$attrs",
                    function (i, r, o) {
                        function a() {
                            t.$current.self === l && s() ? r.addClass(d) : r.removeClass(d);
                        }
                        function s() {
                            return !u || c(u, e);
                        }
                        var l, u, d;
                        (d = n(o.uiSrefActive || "", !1)(i)),
                            (this.$$setStateInfo = function (e, n) {
                                (l = t.get(e, x(r))), (u = n), a();
                            }),
                            i.$on("$stateChangeSuccess", a);
                    },
                ],
            };
        }
        function C(t) {
            return function (e) {
                return t.is(e);
            };
        }
        function _(t) {
            return function (e) {
                return t.includes(e);
            };
        }
        function T(t, e) {
            function r(t) {
                (this.locals = t.locals.globals), (this.params = this.locals.$stateParams);
            }
            function o() {
                (this.locals = null), (this.params = null);
            }
            function a(n, a) {
                if (null != a.redirectTo) {
                    var s,
                        c = a.redirectTo;
                    if (I(c)) s = c;
                    else {
                        if (!A(c)) throw new Error("Invalid 'redirectTo' in when()");
                        s = function (t, e) {
                            return c(t, e.path(), e.search());
                        };
                    }
                    e.when(n, s);
                } else t.state(i(a, { parent: null, name: "route:" + encodeURIComponent(n), url: n, onEnter: r, onExit: o }));
                return l.push(a), this;
            }
            function s(t, e, i) {
                function r(t) {
                    return "" !== t.name ? t : n;
                }
                var o = { routes: l, params: i, current: n };
                return (
                    e.$on("$stateChangeStart", function (t, n, i, o, a) {
                        e.$broadcast("$routeChangeStart", r(n), r(o));
                    }),
                    e.$on("$stateChangeSuccess", function (t, n, i, a, s) {
                        (o.current = r(n)), e.$broadcast("$routeChangeSuccess", r(n), r(a)), O(i, o.params);
                    }),
                    e.$on("$stateChangeError", function (t, n, i, o, a, s) {
                        e.$broadcast("$routeChangeError", r(n), r(o), s);
                    }),
                    o
                );
            }
            var l = [];
            (r.$inject = ["$$state"]), (this.when = a), (this.$get = s), (s.$inject = ["$state", "$rootScope", "$routeParams"]);
        }
        var E = e.isDefined,
            A = e.isFunction,
            I = e.isString,
            R = e.isObject,
            P = e.isArray,
            j = e.forEach,
            D = e.extend,
            O = e.copy;
        e.module("ui.router.util", ["ng"]),
            e.module("ui.router.router", ["ui.router.util"]),
            e.module("ui.router.state", ["ui.router.router", "ui.router.util"]),
            e.module("ui.router", ["ui.router.state"]),
            e.module("ui.router.compat", ["ui.router"]),
            (d.$inject = ["$q", "$injector"]),
            e.module("ui.router.util").service("$resolve", d),
            (p.$inject = ["$http", "$templateCache", "$injector"]),
            e.module("ui.router.util").service("$templateFactory", p),
            (h.prototype.concat = function (t) {
                return new h(this.sourcePath + t + this.sourceSearch);
            }),
            (h.prototype.toString = function () {
                return this.source;
            }),
            (h.prototype.exec = function (t, e) {
                var n = this.regexp.exec(t);
                if (!n) return null;
                var i,
                    r = this.params,
                    o = r.length,
                    a = this.segments.length - 1,
                    s = {};
                if (a !== n.length - 1) throw new Error("Unbalanced capture group in route '" + this.source + "'");
                for (i = 0; a > i; i++) s[r[i]] = n[i + 1];
                for (; o > i; i++) s[r[i]] = e[r[i]];
                return s;
            }),
            (h.prototype.parameters = function () {
                return this.params;
            }),
            (h.prototype.format = function (t) {
                var e = this.segments,
                    n = this.params;
                if (!t) return e.join("");
                var i,
                    r,
                    o,
                    a = e.length - 1,
                    s = n.length,
                    l = e[0];
                for (i = 0; a > i; i++) (o = t[n[i]]), null != o && (l += encodeURIComponent(o)), (l += e[i + 1]);
                for (; s > i; i++) (o = t[n[i]]), null != o && ((l += (r ? "&" : "?") + n[i] + "=" + encodeURIComponent(o)), (r = !0));
                return l;
            }),
            e.module("ui.router.util").provider("$urlMatcherFactory", f),
            (m.$inject = ["$urlMatcherFactoryProvider"]),
            e.module("ui.router.router").provider("$urlRouter", m),
            (v.$inject = ["$urlRouterProvider", "$urlMatcherFactoryProvider", "$locationProvider"]),
            e.module("ui.router.state").value("$stateParams", {}).provider("$state", v),
            (g.$inject = []),
            e.module("ui.router.state").provider("$view", g),
            e.module("ui.router.state").provider("$uiViewScroll", y),
            (b.$inject = ["$state", "$injector", "$uiViewScroll"]),
            (w.$inject = ["$compile", "$controller", "$state"]),
            e.module("ui.router.state").directive("uiView", b),
            e.module("ui.router.state").directive("uiView", w),
            (k.$inject = ["$state", "$timeout"]),
            (S.$inject = ["$state", "$stateParams", "$interpolate"]),
            e.module("ui.router.state").directive("uiSref", k).directive("uiSrefActive", S),
            (C.$inject = ["$state"]),
            (_.$inject = ["$state"]),
            e.module("ui.router.state").filter("isState", C).filter("includedByState", _),
            (T.$inject = ["$stateProvider", "$urlRouterProvider"]),
            e.module("ui.router.compat").provider("$route", T).directive("ngView", b);
    })(window, window.angular),
    (ty.scripts = {}),
    (ty.scriptsLoading = {}),
    (ty.scripts.get = function (t, e) {
        ty.scripts[t] || ty.scriptsLoading[t]
            ? ty.scriptsLoading[t]
                ? $(document).on("scriptLoaded_" + t, function () {
                      e();
                  })
                : e()
            : ((ty.scriptsLoading[t] = !0),
              $.getScript("https://" + ty.settings.cdn + "/scripts/" + t + ".js?d=" + ty.version, function (n) {
                  (ty.scripts[t] = !0), e(), (ty.scriptsLoading[t] = !1), $(document).trigger("scriptLoaded_" + t);
              }));
    }),
    (ty.templates = {}),
    (ty.formatNumber = function (t, e) {
        var n,
            i = [
                { value: 1, symbol: "" },
                { value: 1e3, symbol: "k" },
                { value: 1e6, symbol: "M" },
                { value: 1e9, symbol: "G" },
                { value: 1e12, symbol: "T" },
                { value: 1e15, symbol: "P" },
                { value: 1e18, symbol: "E" },
            ],
            r = /\.0+$|(\.[0-9]*[1-9])0+$/;
        for (n = i.length - 1; n > 0 && !(t >= i[n].value); n--);
        return (e = e || 1), (t / i[n].value).toFixed(e).replace(r, "$1") + i[n].symbol;
    }),
    (ty.t = function (templateName, options, callback) {
        var reconstructName = templateName.split("/"),
            lastIndex = reconstructName.length - 1;
        reconstructName.splice(lastIndex, 0, "jade"),
            (reconstructName = reconstructName.join("/")),
            (reconstructName = "/tmpl/" + reconstructName),
            ty.templates[reconstructName]
                ? callback(ty.templates[reconstructName](options))
                : $.getScript(reconstructName, function (script) {
                      var newTemplate = "ty.templates['" + reconstructName + "'] = function (locals){" + script + "; return template(locals) };";
                      eval(newTemplate), callback(ty.templates[reconstructName](options));
                  });
    }),
    (ty.realtime = function () {
        $(document).trigger("pusher-activate");
    }),
    (ty.sanitize = function (t) {
        return sanitizeHtml(t, {
            allowedTags: [
                "h1",
                "h2",
                "h3",
                "h4",
                "h5",
                "h6",
                "u",
                "blockquote",
                "p",
                "a",
                "ul",
                "ol",
                "nl",
                "li",
                "b",
                "i",
                "strong",
                "em",
                "strike",
                "code",
                "hr",
                "br",
                "div",
                "table",
                "thead",
                "caption",
                "tbody",
                "tr",
                "th",
                "td",
                "pre",
                "img",
            ],
            allowedAttributes: { "*": ["href", "name", "class", "data-*", "src"] },
        });
    }),
    (ty.formatTime = function (t, e) {
        var n = new Date(t),
            i = n.getDate(),
            r = n.getHours(),
            o = n.getFullYear(),
            a = n.getMinutes(),
            s = "AM",
            l = [];
        return (
            (l[0] = "Jan"),
            (l[1] = "Feb"),
            (l[2] = "Mar"),
            (l[3] = "Apr"),
            (l[4] = "May"),
            (l[5] = "June"),
            (l[6] = "July"),
            (l[7] = "Aug"),
            (l[8] = "Sept"),
            (l[9] = "Oct"),
            (l[10] = "Nov"),
            (l[11] = "Dec"),
            r > 12 && ((r -= 12), (s = "PM")),
            10 > a && (a = "0" + a),
            e ? r + ":" + a + " " + s : l[n.getMonth()] + "  " + i + ",  " + o + " " + r + ":" + a + " " + s
        );
    }),
    jQuery.ajaxSetup({ timeout: 6e3 }),
    (ty.get = function (t, e) {
        $.get("/api/" + t, function (t) {
            e && e(t);
        });
    }),
    (ty.post = function (t, e) {
        var n = arguments[arguments.length - 1];
        $.post("/api/" + t, e, function (t) {
            "function" == typeof n && n(t);
        });
    }),
    (ty.put = function (t, e) {
        e = angular.toJson(e);
        var n = arguments[arguments.length - 1];
        $.ajax({
            url: "/api/" + t,
            type: "PUT",
            data: e,
            dataType: "JSON",
            contentType: "application/json",
            statusCode: {
                200: function (t) {
                    "function" == typeof n && n(arguments[0]);
                },
            },
            success: function () {
                "function" == typeof n && n(arguments);
            },
        });
    }),
    (ty.del = function (t, e) {
        var n = arguments[arguments.length - 1];
        $.ajax({
            url: "/api/" + t,
            type: "DELETE",
            data: e,
            dataType: "JSON",
            statusCode: {
                200: function (t) {
                    "function" == typeof n && n(arguments[0]);
                },
            },
            success: function () {
                "function" == typeof n && n(arguments[0]);
            },
        });
    }),
    (ty.handler = function (t, e, n, i) {
        i
            ? $(document).one(t, function () {
                  e && "function" == typeof e && e(arguments[1]);
              })
            : $(document).bind(t, function () {
                  e && "function" == typeof e && e(arguments[1]);
              }),
            n && e && "function" == typeof e && e();
    }),
    (ty.url = function (t) {
        return t ? (t = t.replace(/[\W|_]+/g, "-")) : "";
    }),
    (window.prerenderReady = !1),
    (ty.contentReady = function () {
        window.prerenderReady = !0;
    }),
    setTimeout(function () {
        ty.contentReady();
    }, 1e3),
    angular.module("analytics", []).run([
        "$rootScope",
        "$location",
        "$log",
        function (t, e, n) {
            t.$on("$stateChangeSuccess", function () {
                analytics.pageview();
            });
        },
    ]);
var analytics = analytics || [];
!(function () {
    for (
        var t = ["identify", "track", "trackLink", "trackForm", "trackClick", "trackSubmit", "page", "pageview", "ab", "alias", "ready", "group"],
            e = function (t) {
                return function () {
                    analytics.push([t].concat(Array.prototype.slice.call(arguments, 0)));
                };
            },
            n = 0;
        n < t.length;
        n++
    )
        analytics[t[n]] = e(t[n]);
})(),
    (analytics.load = function (t) {
        $.getScript("https://d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/" + t + "/analytics.min.js", function () {
            $.getScript("https://posthog-fl.herokuapp.com/static/array.js", function () {
                posthog.init("QPJwG5pBMykIP91Th4mtvMs3MHqnRGTsBjP4BjlxSdU", { api_host: "https://posthog-fl.herokuapp.com" });
                var t = analytics.track,
                    e = analytics.identify,
                    n = analytics.pageview;
                (analytics.track = function (e, n) {
                    posthog.capture(e, n), t(e, n);
                }),
                    (analytics.identify = function (t, n) {
                        e(t, n), posthog.identify(t), posthog.people.set(n);
                    }),
                    (analytics.pageview = function () {
                        n(), posthog.capture("$pageview");
                    });
            });
        });
    }),
    analytics.load(ty.settings.modules.analytics.account),
    angular.module("ui.config", []).value("ui.config", {}),
    angular.module("ui.filters", ["ui.config"]),
    angular.module("ui.directives", ["ui.config"]),
    angular.module("ui", ["ui.filters", "ui.directives", "ui.config"]),
    angular.module("ui.bootstrap", [
        "ui.bootstrap.tpls",
        "ui.bootstrap.transition",
        "ui.bootstrap.collapse",
        "ui.bootstrap.alert",
        "ui.bootstrap.bindHtml",
        "ui.bootstrap.buttons",
        "ui.bootstrap.position",
        "ui.bootstrap.datepicker",
        "ui.bootstrap.dropdownToggle",
        "ui.bootstrap.modal",
        "ui.bootstrap.tooltip",
        "ui.bootstrap.progressbar",
        "ui.bootstrap.rating",
        "ui.bootstrap.tabs",
        "ui.bootstrap.typeahead",
    ]),
    angular.module("ui.bootstrap.tpls", [
        "template/alert/alert.html",
        "template/datepicker/datepicker.html",
        "template/datepicker/popup.html",
        "template/modal/backdrop.html",
        "template/modal/window.html",
        "template/tooltip/tooltip-popup.html",
        "template/progressbar/bar.html",
        "template/progressbar/progress.html",
        "template/progressbar/progressbar.html",
        "template/rating/rating.html",
        "template/tabs/tab.html",
        "template/tabs/tabset.html",
        "template/typeahead/typeahead-match.html",
        "template/typeahead/typeahead-popup.html",
    ]),
    angular.module("ui.bootstrap.transition", []).factory("$transition", [
        "$q",
        "$timeout",
        "$rootScope",
        function (t, e, n) {
            function i(t) {
                for (var e in t) if (void 0 !== o.style[e]) return t[e];
            }
            var r = function (i, o, a) {
                    a = a || {};
                    var s = t.defer(),
                        l = r[a.animation ? "animationEndEventName" : "transitionEndEventName"],
                        c = function (t) {
                            n.$apply(function () {
                                i.unbind(l, c), s.resolve(i);
                            });
                        };
                    return (
                        l && i.bind(l, c),
                        e(function () {
                            angular.isString(o) ? i.addClass(o) : angular.isFunction(o) ? o(i) : angular.isObject(o) && i.css(o), l || s.resolve(i);
                        }),
                        (s.promise.cancel = function () {
                            l && i.unbind(l, c), s.reject("Transition cancelled");
                        }),
                        s.promise
                    );
                },
                o = document.createElement("trans"),
                a = { WebkitTransition: "webkitTransitionEnd", MozTransition: "transitionend", OTransition: "oTransitionEnd", transition: "transitionend" },
                s = { WebkitTransition: "webkitAnimationEnd", MozTransition: "animationend", OTransition: "oAnimationEnd", transition: "animationend" };
            return (r.transitionEndEventName = i(a)), (r.animationEndEventName = i(s)), r;
        },
    ]),
    angular.module("ui.bootstrap.collapse", ["ui.bootstrap.transition"]).directive("collapse", [
        "$transition",
        function (t) {
            var e = function (t, e, n) {
                e.removeClass("collapse"), e.css({ height: n });
                e[0].offsetWidth;
                e.addClass("collapse");
            };
            return {
                link: function (n, i, r) {
                    function o() {
                        a || (e(n, i, "auto"), i.addClass("in"));
                    }
                    var a,
                        s = !0;
                    n.$watch(r.collapse, function (t) {
                        t ? d() : u();
                    });
                    var l,
                        c = function (e) {
                            return (
                                l && l.cancel(),
                                (l = t(i, e)),
                                l.then(
                                    function () {
                                        l = void 0;
                                    },
                                    function () {
                                        l = void 0;
                                    }
                                ),
                                l
                            );
                        },
                        u = function () {
                            if (((a = !1), s)) (s = !1), o();
                            else {
                                var t = i[0].scrollHeight;
                                t ? c({ height: t + "px" }).then(o) : o();
                            }
                        },
                        d = function () {
                            (a = !0), i.removeClass("in"), s ? ((s = !1), e(n, i, 0)) : (e(n, i, i[0].scrollHeight + "px"), c({ height: "0" }));
                        };
                },
            };
        },
    ]),
    angular
        .module("ui.bootstrap.alert", [])
        .controller("AlertController", [
            "$scope",
            "$attrs",
            function (t, e) {
                t.closeable = "close" in e;
            },
        ])
        .directive("alert", function () {
            return { restrict: "EA", controller: "AlertController", templateUrl: "template/alert/alert.html", transclude: !0, replace: !0, scope: { type: "=", close: "&" } };
        }),
    angular.module("ui.bootstrap.bindHtml", []).directive("bindHtmlUnsafe", function () {
        return function (t, e, n) {
            e.addClass("ng-binding").data("$binding", n.bindHtmlUnsafe),
                t.$watch(n.bindHtmlUnsafe, function (t) {
                    e.html(t || "");
                });
        };
    }),
    angular
        .module("ui.bootstrap.buttons", [])
        .constant("buttonConfig", { activeClass: "active", toggleEvent: "click" })
        .controller("ButtonsController", [
            "buttonConfig",
            function (t) {
                (this.activeClass = t.activeClass || "active"), (this.toggleEvent = t.toggleEvent || "click");
            },
        ])
        .directive("btnRadio", function () {
            return {
                require: ["btnRadio", "ngModel"],
                controller: "ButtonsController",
                link: function (t, e, n, i) {
                    var r = i[0],
                        o = i[1];
                    (o.$render = function () {
                        e.toggleClass(r.activeClass, angular.equals(o.$modelValue, t.$eval(n.btnRadio)));
                    }),
                        e.bind(r.toggleEvent, function () {
                            e.hasClass(r.activeClass) ||
                                t.$apply(function () {
                                    o.$setViewValue(t.$eval(n.btnRadio)), o.$render();
                                });
                        });
                },
            };
        })
        .directive("btnCheckbox", function () {
            return {
                require: ["btnCheckbox", "ngModel"],
                controller: "ButtonsController",
                link: function (t, e, n, i) {
                    function r() {
                        return a(n.btnCheckboxTrue, !0);
                    }
                    function o() {
                        return a(n.btnCheckboxFalse, !1);
                    }
                    function a(e, n) {
                        var i = t.$eval(e);
                        return angular.isDefined(i) ? i : n;
                    }
                    var s = i[0],
                        l = i[1];
                    (l.$render = function () {
                        e.toggleClass(s.activeClass, angular.equals(l.$modelValue, r()));
                    }),
                        e.bind(s.toggleEvent, function () {
                            t.$apply(function () {
                                l.$setViewValue(e.hasClass(s.activeClass) ? o() : r()), l.$render();
                            });
                        });
                },
            };
        }),
    angular.module("ui.bootstrap.position", []).factory("$position", [
        "$document",
        "$window",
        function (t, e) {
            function n(t, n) {
                return t.currentStyle ? t.currentStyle[n] : e.getComputedStyle ? e.getComputedStyle(t)[n] : t.style[n];
            }
            function i(t) {
                return "static" === (n(t, "position") || "static");
            }
            var r = function (e) {
                for (var n = t[0], r = e.offsetParent || n; r && r !== n && i(r); ) r = r.offsetParent;
                return r || n;
            };
            return {
                position: function (e) {
                    var n = this.offset(e),
                        i = { top: 0, left: 0 },
                        o = r(e[0]);
                    o != t[0] && ((i = this.offset(angular.element(o))), (i.top += o.clientTop - o.scrollTop), (i.left += o.clientLeft - o.scrollLeft));
                    var a = e[0].getBoundingClientRect();
                    return { width: a.width || e.prop("offsetWidth"), height: a.height || e.prop("offsetHeight"), top: n.top - i.top, left: n.left - i.left };
                },
                offset: function (n) {
                    var i = n[0].getBoundingClientRect();
                    return {
                        width: i.width || n.prop("offsetWidth"),
                        height: i.height || n.prop("offsetHeight"),
                        top: i.top + (e.pageYOffset || t[0].documentElement.scrollTop),
                        left: i.left + (e.pageXOffset || t[0].documentElement.scrollLeft),
                    };
                },
                positionElements: function (t, e, n, i) {
                    var r,
                        o,
                        a,
                        s,
                        l = n.split("-"),
                        c = l[0],
                        u = l[1] || "center";
                    (r = i ? this.offset(t) : this.position(t)), (o = e.prop("offsetWidth")), (a = e.prop("offsetHeight"));
                    var d = {
                            center: function () {
                                return r.left + r.width / 2 - o / 2;
                            },
                            left: function () {
                                return r.left;
                            },
                            right: function () {
                                return r.left + r.width;
                            },
                        },
                        p = {
                            center: function () {
                                return r.top + r.height / 2 - a / 2;
                            },
                            top: function () {
                                return r.top;
                            },
                            bottom: function () {
                                return r.top + r.height;
                            },
                        };
                    switch (c) {
                        case "right":
                            s = { top: p[u](), left: d[c]() };
                            break;
                        case "left":
                            s = { top: p[u](), left: r.left - o };
                            break;
                        case "bottom":
                            s = { top: p[c](), left: d[u]() };
                            break;
                        default:
                            s = { top: r.top - a, left: d[u]() };
                    }
                    return s;
                },
            };
        },
    ]),
    angular
        .module("ui.bootstrap.datepicker", ["ui.bootstrap.position"])
        .constant("datepickerConfig", {
            dayFormat: "dd",
            monthFormat: "MMMM",
            yearFormat: "yyyy",
            dayHeaderFormat: "EEE",
            dayTitleFormat: "MMMM yyyy",
            monthTitleFormat: "yyyy",
            showWeeks: !0,
            startingDay: 0,
            yearRange: 20,
            minDate: null,
            maxDate: null,
        })
        .controller("DatepickerController", [
            "$scope",
            "$attrs",
            "dateFilter",
            "datepickerConfig",
            function (t, e, n, i) {
                function r(e, n) {
                    return angular.isDefined(e) ? t.$parent.$eval(e) : n;
                }
                function o(t, e) {
                    return new Date(t, e, 0).getDate();
                }
                function a(t, e) {
                    for (var n = new Array(e), i = t, r = 0; e > r; ) (n[r++] = new Date(i)), i.setDate(i.getDate() + 1);
                    return n;
                }
                function s(t, e, i, r) {
                    return { date: t, label: n(t, e), selected: !!i, secondary: !!r };
                }
                var l = {
                        day: r(e.dayFormat, i.dayFormat),
                        month: r(e.monthFormat, i.monthFormat),
                        year: r(e.yearFormat, i.yearFormat),
                        dayHeader: r(e.dayHeaderFormat, i.dayHeaderFormat),
                        dayTitle: r(e.dayTitleFormat, i.dayTitleFormat),
                        monthTitle: r(e.monthTitleFormat, i.monthTitleFormat),
                    },
                    c = r(e.startingDay, i.startingDay),
                    u = r(e.yearRange, i.yearRange);
                (this.minDate = i.minDate ? new Date(i.minDate) : null),
                    (this.maxDate = i.maxDate ? new Date(i.maxDate) : null),
                    (this.modes = [
                        {
                            name: "day",
                            getVisibleDates: function (t, e) {
                                var i = t.getFullYear(),
                                    r = t.getMonth(),
                                    u = new Date(i, r, 1),
                                    d = c - u.getDay(),
                                    p = d > 0 ? 7 - d : -d,
                                    h = new Date(u),
                                    f = 0;
                                p > 0 && (h.setDate(-p + 1), (f += p)), (f += o(i, r + 1)), (f += (7 - (f % 7)) % 7);
                                for (var m = a(h, f), v = new Array(7), g = 0; f > g; g++) {
                                    var y = new Date(m[g]);
                                    m[g] = s(y, l.day, e && e.getDate() === y.getDate() && e.getMonth() === y.getMonth() && e.getFullYear() === y.getFullYear(), y.getMonth() !== r);
                                }
                                for (var b = 0; 7 > b; b++) v[b] = n(m[b].date, l.dayHeader);
                                return { objects: m, title: n(t, l.dayTitle), labels: v };
                            },
                            compare: function (t, e) {
                                return new Date(t.getFullYear(), t.getMonth(), t.getDate()) - new Date(e.getFullYear(), e.getMonth(), e.getDate());
                            },
                            split: 7,
                            step: { months: 1 },
                        },
                        {
                            name: "month",
                            getVisibleDates: function (t, e) {
                                for (var i = new Array(12), r = t.getFullYear(), o = 0; 12 > o; o++) {
                                    var a = new Date(r, o, 1);
                                    i[o] = s(a, l.month, e && e.getMonth() === o && e.getFullYear() === r);
                                }
                                return { objects: i, title: n(t, l.monthTitle) };
                            },
                            compare: function (t, e) {
                                return new Date(t.getFullYear(), t.getMonth()) - new Date(e.getFullYear(), e.getMonth());
                            },
                            split: 3,
                            step: { years: 1 },
                        },
                        {
                            name: "year",
                            getVisibleDates: function (t, e) {
                                for (var n = new Array(u), i = t.getFullYear(), r = parseInt((i - 1) / u, 10) * u + 1, o = 0; u > o; o++) {
                                    var a = new Date(r + o, 0, 1);
                                    n[o] = s(a, l.year, e && e.getFullYear() === a.getFullYear());
                                }
                                return { objects: n, title: [n[0].label, n[u - 1].label].join(" - ") };
                            },
                            compare: function (t, e) {
                                return t.getFullYear() - e.getFullYear();
                            },
                            split: 5,
                            step: { years: u },
                        },
                    ]),
                    (this.isDisabled = function (e, n) {
                        var i = this.modes[n || 0];
                        return (this.minDate && i.compare(e, this.minDate) < 0) || (this.maxDate && i.compare(e, this.maxDate) > 0) || (t.dateDisabled && t.dateDisabled({ date: e, mode: i.name }));
                    });
            },
        ])
        .directive("datepicker", [
            "dateFilter",
            "$parse",
            "datepickerConfig",
            "$log",
            function (t, e, n, i) {
                return {
                    restrict: "EA",
                    replace: !0,
                    templateUrl: "template/datepicker/datepicker.html",
                    scope: { dateDisabled: "&" },
                    require: ["datepicker", "?^ngModel"],
                    controller: "DatepickerController",
                    link: function (t, r, o, a) {
                        function s() {
                            t.showWeekNumbers = 0 === f && v;
                        }
                        function l(t, e) {
                            for (var n = []; t.length > 0; ) n.push(t.splice(0, e));
                            return n;
                        }
                        function c(e) {
                            var n = null,
                                r = !0;
                            h.$modelValue &&
                                ((n = new Date(h.$modelValue)),
                                isNaN(n) ? ((r = !1), i.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')) : e && (m = n)),
                                h.$setValidity("date", r);
                            var o = p.modes[f],
                                a = o.getVisibleDates(m, n);
                            angular.forEach(a.objects, function (t) {
                                t.disabled = p.isDisabled(t.date, f);
                            }),
                                h.$setValidity("date-disabled", !n || !p.isDisabled(n)),
                                (t.rows = l(a.objects, o.split)),
                                (t.labels = a.labels || []),
                                (t.title = a.title);
                        }
                        function u(t) {
                            (f = t), s(), c();
                        }
                        function d(t) {
                            var e = new Date(t);
                            e.setDate(e.getDate() + 4 - (e.getDay() || 7));
                            var n = e.getTime();
                            return e.setMonth(0), e.setDate(1), Math.floor(Math.round((n - e) / 864e5) / 7) + 1;
                        }
                        var p = a[0],
                            h = a[1];
                        if (h) {
                            var f = 0,
                                m = new Date(),
                                v = n.showWeeks;
                            o.showWeeks
                                ? t.$parent.$watch(e(o.showWeeks), function (t) {
                                      (v = !!t), s();
                                  })
                                : s(),
                                o.min &&
                                    t.$parent.$watch(e(o.min), function (t) {
                                        (p.minDate = t ? new Date(t) : null), c();
                                    }),
                                o.max &&
                                    t.$parent.$watch(e(o.max), function (t) {
                                        (p.maxDate = t ? new Date(t) : null), c();
                                    }),
                                (h.$render = function () {
                                    c(!0);
                                }),
                                (t.select = function (t) {
                                    if (0 === f) {
                                        var e = h.$modelValue ? new Date(h.$modelValue) : new Date(0, 0, 0, 0, 0, 0, 0);
                                        e.setFullYear(t.getFullYear(), t.getMonth(), t.getDate()), h.$setViewValue(e), c(!0);
                                    } else (m = t), u(f - 1);
                                }),
                                (t.move = function (t) {
                                    var e = p.modes[f].step;
                                    m.setMonth(m.getMonth() + t * (e.months || 0)), m.setFullYear(m.getFullYear() + t * (e.years || 0)), c();
                                }),
                                (t.toggleMode = function () {
                                    u((f + 1) % p.modes.length);
                                }),
                                (t.getWeekNumber = function (e) {
                                    return 0 === f && t.showWeekNumbers && 7 === e.length ? d(e[0].date) : null;
                                });
                        }
                    },
                };
            },
        ])
        .constant("datepickerPopupConfig", { dateFormat: "yyyy-MM-dd", currentText: "Today", toggleWeeksText: "Weeks", clearText: "Clear", closeText: "Done", closeOnDateSelection: !0, appendToBody: !1, showButtonBar: !0 })
        .directive("datepickerPopup", [
            "$compile",
            "$parse",
            "$document",
            "$position",
            "dateFilter",
            "datepickerPopupConfig",
            "datepickerConfig",
            function (t, e, n, i, r, o, a) {
                return {
                    restrict: "EA",
                    require: "ngModel",
                    link: function (s, l, c, u) {
                        function d(t) {
                            w ? w(s, !!t) : (v.isOpen = !!t);
                        }
                        function p(t) {
                            if (t) {
                                if (angular.isDate(t)) return u.$setValidity("date", !0), t;
                                if (angular.isString(t)) {
                                    var e = new Date(t);
                                    return isNaN(e) ? void u.$setValidity("date", !1) : (u.$setValidity("date", !0), e);
                                }
                                return void u.$setValidity("date", !1);
                            }
                            return u.$setValidity("date", !0), null;
                        }
                        function h(t, n, i) {
                            t &&
                                (s.$watch(e(t), function (t) {
                                    v[n] = t;
                                }),
                                S.attr(i || n, n));
                        }
                        function f() {
                            (v.position = y ? i.offset(l) : i.position(l)), (v.position.top = v.position.top + l.prop("offsetHeight"));
                        }
                        var m,
                            v = s.$new(),
                            g = angular.isDefined(c.closeOnDateSelection) ? s.$eval(c.closeOnDateSelection) : o.closeOnDateSelection,
                            y = angular.isDefined(c.datepickerAppendToBody) ? s.$eval(c.datepickerAppendToBody) : o.appendToBody;
                        c.$observe("datepickerPopup", function (t) {
                            (m = t || o.dateFormat), u.$render();
                        }),
                            (v.showButtonBar = angular.isDefined(c.showButtonBar) ? s.$eval(c.showButtonBar) : o.showButtonBar),
                            s.$on("$destroy", function () {
                                T.remove(), v.$destroy();
                            }),
                            c.$observe("currentText", function (t) {
                                v.currentText = angular.isDefined(t) ? t : o.currentText;
                            }),
                            c.$observe("toggleWeeksText", function (t) {
                                v.toggleWeeksText = angular.isDefined(t) ? t : o.toggleWeeksText;
                            }),
                            c.$observe("clearText", function (t) {
                                v.clearText = angular.isDefined(t) ? t : o.clearText;
                            }),
                            c.$observe("closeText", function (t) {
                                v.closeText = angular.isDefined(t) ? t : o.closeText;
                            });
                        var b, w;
                        c.isOpen &&
                            ((b = e(c.isOpen)),
                            (w = b.assign),
                            s.$watch(b, function (t) {
                                v.isOpen = !!t;
                            })),
                            (v.isOpen = b ? b(s) : !1);
                        var $ = function (t) {
                                v.isOpen &&
                                    t.target !== l[0] &&
                                    v.$apply(function () {
                                        d(!1);
                                    });
                            },
                            x = function () {
                                v.$apply(function () {
                                    d(!0);
                                });
                            },
                            k = angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");
                        k.attr({ "ng-model": "date", "ng-change": "dateSelection()" });
                        var S = angular.element(k.children()[0]);
                        c.datepickerOptions && S.attr(angular.extend({}, s.$eval(c.datepickerOptions))),
                            u.$parsers.unshift(p),
                            (v.dateSelection = function (t) {
                                angular.isDefined(t) && (v.date = t), u.$setViewValue(v.date), u.$render(), g && d(!1);
                            }),
                            l.bind("input change keyup", function () {
                                v.$apply(function () {
                                    v.date = u.$modelValue;
                                });
                            }),
                            (u.$render = function () {
                                var t = u.$viewValue ? r(u.$viewValue, m) : "";
                                l.val(t), (v.date = u.$modelValue);
                            }),
                            h(c.min, "min"),
                            h(c.max, "max"),
                            c.showWeeks ? h(c.showWeeks, "showWeeks", "show-weeks") : ((v.showWeeks = a.showWeeks), S.attr("show-weeks", "showWeeks")),
                            c.dateDisabled && S.attr("date-disabled", c.dateDisabled);
                        var C = !1,
                            _ = !1;
                        v.$watch("isOpen", function (t) {
                            t ? (f(), n.bind("click", $), _ && l.unbind("focus", x), l[0].focus(), (C = !0)) : (C && n.unbind("click", $), l.bind("focus", x), (_ = !0)), w && w(s, t);
                        }),
                            (v.today = function () {
                                v.dateSelection(new Date());
                            }),
                            (v.clear = function () {
                                v.dateSelection(null);
                            });
                        var T = t(k)(v);
                        y ? n.find("body").append(T) : l.after(T);
                    },
                };
            },
        ])
        .directive("datepickerPopupWrap", function () {
            return {
                restrict: "EA",
                replace: !0,
                transclude: !0,
                templateUrl: "template/datepicker/popup.html",
                link: function (t, e, n) {
                    e.bind("click", function (t) {
                        t.preventDefault(), t.stopPropagation();
                    });
                },
            };
        }),
    angular
        .module("ui.bootstrap.dropdownToggle", [])
        .constant("dropdownConfig", { openClass: "open" })
        .service("dropdownService", [
            "$document",
            "$rootScope",
            function (t, e) {
                var n = null;
                (this.open = function (e) {
                    n || (t.bind("click", i), t.bind("keydown", r)), n && n !== e && (n.isOpen = !1), (n = e);
                }),
                    (this.close = function (e) {
                        n === e && ((n = null), t.unbind("click", i), t.unbind("keydown", r));
                    });
                var i = function (t) {
                        if (n && (!t || "disabled" !== n.getAutoClose())) {
                            var i = n.getToggleElement();
                            if (!(t && i && i[0].contains(t.target)) && "INPUT" !== t.target.nodeName) {
                                var r = n.getDropdownElement();
                                (t && "outsideClick" === n.getAutoClose() && r && r[0].contains(t.target)) || ((n.isOpen = !1), e.$$phase || n.$apply());
                            }
                        }
                    },
                    r = function (t) {
                        27 === t.which ? (n.focusToggleElement(), i()) : n.isKeynavEnabled() && /(38|40)/.test(t.which) && n.isOpen && (t.preventDefault(), t.stopPropagation(), n.focusDropdownEntry(t.which));
                    };
            },
        ])
        .controller("DropdownController", [
            "$scope",
            "$attrs",
            "$parse",
            "dropdownConfig",
            "dropdownService",
            "$animate",
            "$position",
            "$document",
            "$compile",
            "$templateRequest",
            function (t, e, n, i, r, o, a, s, l, c) {
                var u,
                    d,
                    p = this,
                    h = t.$new(),
                    f = i.openClass,
                    m = angular.noop,
                    v = e.onToggle ? n(e.onToggle) : angular.noop,
                    g = !1,
                    y = !1,
                    b = s.find("body");
                (this.init = function (i) {
                    (p.$element = i),
                        e.isOpen &&
                            ((d = n(e.isOpen)),
                            (m = d.assign),
                            t.$watch(d, function (t) {
                                h.isOpen = !!t;
                            })),
                        (g = angular.isDefined(e.dropdownAppendToBody)),
                        (y = angular.isDefined(e.keyboardNav)),
                        g &&
                            p.dropdownMenu &&
                            (b.append(p.dropdownMenu),
                            b.addClass("dropdown"),
                            i.on("$destroy", function () {
                                p.dropdownMenu.remove();
                            }));
                }),
                    (this.toggle = function (t) {
                        return (h.isOpen = arguments.length ? !!t : !h.isOpen);
                    }),
                    (this.isOpen = function () {
                        return h.isOpen;
                    }),
                    (h.getToggleElement = function () {
                        return p.toggleElement;
                    }),
                    (h.getAutoClose = function () {
                        return e.autoClose || "always";
                    }),
                    (h.getElement = function () {
                        return p.$element;
                    }),
                    (h.isKeynavEnabled = function () {
                        return y;
                    }),
                    (h.focusDropdownEntry = function (t) {
                        var e = p.dropdownMenu ? angular.element(p.dropdownMenu).find("a") : angular.element(p.$element).find("ul").eq(0).find("a");
                        switch (t) {
                            case 40:
                                angular.isNumber(p.selectedOption) ? (p.selectedOption = p.selectedOption === e.length - 1 ? p.selectedOption : p.selectedOption + 1) : (p.selectedOption = 0);
                                break;
                            case 38:
                                angular.isNumber(p.selectedOption) ? (p.selectedOption = 0 === p.selectedOption ? 0 : p.selectedOption - 1) : (p.selectedOption = e.length - 1);
                        }
                        e[p.selectedOption].focus();
                    }),
                    (h.getDropdownElement = function () {
                        return p.dropdownMenu;
                    }),
                    (h.focusToggleElement = function () {
                        p.toggleElement && p.toggleElement[0].focus();
                    }),
                    h.$watch("isOpen", function (e, n) {
                        if (g && p.dropdownMenu) {
                            var i = a.positionElements(p.$element, p.dropdownMenu, "bottom-left", !0),
                                s = { top: i.top + "px", display: e ? "block" : "none" },
                                d = p.dropdownMenu.hasClass("dropdown-menu-right");
                            d ? ((s.left = "auto"), (s.right = window.innerWidth - (i.left + p.$element.prop("offsetWidth")) + "px")) : ((s.left = i.left + "px"), (s.right = "auto")), p.dropdownMenu.css(s);
                        }
                        var y = g ? b : p.$element;
                        if (
                            (o[e ? "addClass" : "removeClass"](y, f).then(function () {
                                angular.isDefined(e) && e !== n && v(t, { open: !!e });
                            }),
                            e)
                        )
                            p.dropdownMenuTemplateUrl &&
                                c(p.dropdownMenuTemplateUrl).then(function (t) {
                                    (u = h.$new()),
                                        l(t.trim())(u, function (t) {
                                            var e = t;
                                            p.dropdownMenu.replaceWith(e), (p.dropdownMenu = e);
                                        });
                                }),
                                h.focusToggleElement(),
                                r.open(h);
                        else {
                            if (p.dropdownMenuTemplateUrl) {
                                u && u.$destroy();
                                var w = angular.element('<ul class="dropdown-menu"></ul>');
                                p.dropdownMenu.replaceWith(w), (p.dropdownMenu = w);
                            }
                            r.close(h), (p.selectedOption = null);
                        }
                        angular.isFunction(m) && m(t, e);
                    }),
                    t.$on("$locationChangeSuccess", function () {
                        "disabled" !== h.getAutoClose() && (h.isOpen = !1);
                    });
                var w = t.$on("$destroy", function () {
                    h.$destroy();
                });
                h.$on("$destroy", w);
            },
        ])
        .directive("dropdown", function () {
            return {
                controller: "DropdownController",
                link: function (t, e, n, i) {
                    i.init(e), e.addClass("dropdown");
                },
            };
        })
        .directive("dropdownMenu", function () {
            return {
                restrict: "AC",
                require: "?^dropdown",
                link: function (t, e, n, i) {
                    if (i) {
                        var r = n.templateUrl;
                        r && (i.dropdownMenuTemplateUrl = r), i.dropdownMenu || (i.dropdownMenu = e);
                    }
                },
            };
        })
        .directive("keyboardNav", function () {
            return {
                restrict: "A",
                require: "?^dropdown",
                link: function (t, e, n, i) {
                    e.bind("keydown", function (t) {
                        if (-1 !== [38, 40].indexOf(t.which)) {
                            t.preventDefault(), t.stopPropagation();
                            var e = i.dropdownMenu.find("a");
                            switch (t.which) {
                                case 40:
                                    angular.isNumber(i.selectedOption) ? (i.selectedOption = i.selectedOption === e.length - 1 ? i.selectedOption : i.selectedOption + 1) : (i.selectedOption = 0);
                                    break;
                                case 38:
                                    angular.isNumber(i.selectedOption) ? (i.selectedOption = 0 === i.selectedOption ? 0 : i.selectedOption - 1) : (i.selectedOption = e.length - 1);
                            }
                            e[i.selectedOption].focus();
                        }
                    });
                },
            };
        })
        .directive("dropdownToggle", function () {
            return {
                require: "?^dropdown",
                link: function (t, e, n, i) {
                    if (i) {
                        e.addClass("dropdown-toggle"), (i.toggleElement = e);
                        var r = function (r) {
                            r.preventDefault(),
                                e.hasClass("disabled") ||
                                    n.disabled ||
                                    t.$apply(function () {
                                        i.toggle();
                                    });
                        };
                        e.bind("click", r),
                            e.attr({ "aria-haspopup": !0, "aria-expanded": !1 }),
                            t.$watch(i.isOpen, function (t) {
                                e.attr("aria-expanded", !!t);
                            }),
                            t.$on("$destroy", function () {
                                e.unbind("click", r);
                            });
                    }
                },
            };
        }),
    angular
        .module("ui.bootstrap.modal", [])
        .factory("$$stackedMap", function () {
            return {
                createNew: function () {
                    var t = [];
                    return {
                        add: function (e, n) {
                            t.push({ key: e, value: n });
                        },
                        get: function (e) {
                            for (var n = 0; n < t.length; n++) if (e == t[n].key) return t[n];
                        },
                        keys: function () {
                            for (var e = [], n = 0; n < t.length; n++) e.push(t[n].key);
                            return e;
                        },
                        top: function () {
                            return t[t.length - 1];
                        },
                        remove: function (e) {
                            for (var n = -1, i = 0; i < t.length; i++)
                                if (e == t[i].key) {
                                    n = i;
                                    break;
                                }
                            return t.splice(n, 1)[0];
                        },
                        removeTop: function () {
                            return t.splice(t.length - 1, 1)[0];
                        },
                        length: function () {
                            return t.length;
                        },
                    };
                },
            };
        })
        .directive("modalBackdrop", [
            "$modalStack",
            "$timeout",
            function (t, e) {
                return {
                    restrict: "EA",
                    replace: !0,
                    templateUrl: "template/modal/backdrop.html",
                    link: function (n) {
                        (n.animate = !1),
                            e(function () {
                                n.animate = !0;
                            }),
                            (n.close = function (e) {
                                var n = t.getTop();
                                n && n.value.backdrop && "static" != n.value.backdrop && (e.preventDefault(), e.stopPropagation(), t.dismiss(n.key, "backdrop click"));
                            });
                    },
                };
            },
        ])
        .directive("modalWindow", [
            "$timeout",
            function (t) {
                return {
                    restrict: "EA",
                    scope: { index: "@" },
                    replace: !0,
                    transclude: !0,
                    templateUrl: "template/modal/window.html",
                    link: function (e, n, i) {
                        (e.windowClass = i.windowClass || ""),
                            n[0].focus(),
                            t(function () {
                                e.animate = !0;
                            });
                    },
                };
            },
        ])
        .factory("$modalStack", [
            "$document",
            "$compile",
            "$rootScope",
            "$$stackedMap",
            function (t, e, n, i) {
                function r() {
                    for (var t = -1, e = u.keys(), n = 0; n < e.length; n++) u.get(e[n]).value.backdrop && (t = n);
                    return t;
                }
                function o(e) {
                    var n = t.find("body").eq(0),
                        i = u.get(e).value;
                    u.remove(e), i.modalDomEl.remove(), n.toggleClass(l, u.length() > 0), s && -1 == r() && (s.remove(), (s = void 0)), i.modalScope.$destroy();
                }
                var a,
                    s,
                    l = "modal-open",
                    c = n.$new(!0),
                    u = i.createNew(),
                    d = {};
                return (
                    n.$watch(r, function (t) {
                        c.index = t;
                    }),
                    t.bind("keydown", function (t) {
                        var e;
                        27 === t.which &&
                            ((e = u.top()),
                            e &&
                                e.value.keyboard &&
                                n.$apply(function () {
                                    d.dismiss(e.key);
                                }));
                    }),
                    (d.open = function (n, i) {
                        u.add(n, { deferred: i.deferred, modalScope: i.scope, backdrop: i.backdrop, keyboard: i.keyboard });
                        var o = t.find("body").eq(0);
                        r() >= 0 && !s && ((a = angular.element("<div modal-backdrop></div>")), (s = e(a)(c)), o.append(s));
                        var d = angular.element("<div modal-window></div>");
                        d.attr("window-class", i.windowClass), d.attr("index", u.length() - 1), d.html(i.content);
                        var p = e(d)(i.scope);
                        (u.top().value.modalDomEl = p), o.append(p), o.addClass(l);
                    }),
                    (d.close = function (t, e) {
                        var n = u.get(t);
                        n && (n.value.deferred.resolve(e), o(t));
                    }),
                    (d.dismiss = function (t, e) {
                        var n = u.get(t).value;
                        n && (n.deferred.reject(e), o(t));
                    }),
                    (d.getTop = function () {
                        return u.top();
                    }),
                    d
                );
            },
        ])
        .provider("$modal", function () {
            var t = {
                options: { backdrop: !0, keyboard: !0 },
                $get: [
                    "$injector",
                    "$rootScope",
                    "$q",
                    "$http",
                    "$templateCache",
                    "$controller",
                    "$modalStack",
                    function (e, n, i, r, o, a, s) {
                        function l(t) {
                            return t.template
                                ? i.when(t.template)
                                : r.get(t.templateUrl, { cache: o }).then(function (t) {
                                      return t.data;
                                  });
                        }
                        function c(t) {
                            var n = [];
                            return (
                                angular.forEach(t, function (t, r) {
                                    (angular.isFunction(t) || angular.isArray(t)) && n.push(i.when(e.invoke(t)));
                                }),
                                n
                            );
                        }
                        var u = {};
                        return (
                            (u.open = function (e) {
                                var r = i.defer(),
                                    o = i.defer(),
                                    u = {
                                        result: r.promise,
                                        opened: o.promise,
                                        close: function (t) {
                                            s.close(u, t);
                                        },
                                        dismiss: function (t) {
                                            s.dismiss(u, t);
                                        },
                                    };
                                if (((e = angular.extend({}, t.options, e)), (e.resolve = e.resolve || {}), !e.template && !e.templateUrl)) throw new Error("One of template or templateUrl options is required.");
                                var d = i.all([l(e)].concat(c(e.resolve)));
                                return (
                                    d.then(
                                        function (t) {
                                            var i = (e.scope || n).$new();
                                            (i.$close = u.close), (i.$dismiss = u.dismiss);
                                            var o,
                                                l = {},
                                                c = 1;
                                            e.controller &&
                                                ((l.$scope = i),
                                                (l.$modalInstance = u),
                                                angular.forEach(e.resolve, function (e, n) {
                                                    l[n] = t[c++];
                                                }),
                                                (o = a(e.controller, l))),
                                                s.open(u, { scope: i, deferred: r, content: t[0], backdrop: e.backdrop, keyboard: e.keyboard, windowClass: e.windowClass });
                                        },
                                        function (t) {
                                            r.reject(t);
                                        }
                                    ),
                                    d.then(
                                        function () {
                                            o.resolve(!0);
                                        },
                                        function () {
                                            o.reject(!1);
                                        }
                                    ),
                                    u
                                );
                            }),
                            u
                        );
                    },
                ],
            };
            return t;
        }),
    angular
        .module("ui.bootstrap.tooltip", ["ui.bootstrap.position", "ui.bootstrap.bindHtml"])
        .provider("$tooltip", function () {
            function t(t) {
                var e = /[A-Z]/g,
                    n = "-";
                return t.replace(e, function (t, e) {
                    return (e ? n : "") + t.toLowerCase();
                });
            }
            var e = { placement: "top", animation: !0, popupDelay: 0, useContentExp: !1 },
                n = { mouseenter: "mouseleave", click: "click", focus: "blur", none: "" },
                i = {};
            (this.options = function (t) {
                angular.extend(i, t);
            }),
                (this.setTriggers = function (t) {
                    angular.extend(n, t);
                }),
                (this.$get = [
                    "$window",
                    "$compile",
                    "$timeout",
                    "$document",
                    "$position",
                    "$interpolate",
                    "$rootScope",
                    "$parse",
                    function (r, o, a, s, l, c, u, d) {
                        return function (r, p, h, f) {
                            function m(t) {
                                var e = (t || f.trigger || h).split(" "),
                                    i = e.map(function (t) {
                                        return n[t] || t;
                                    });
                                return { show: e, hide: i };
                            }
                            f = angular.extend({}, e, i, f);
                            var v = t(r),
                                g = c.startSymbol(),
                                y = c.endSymbol(),
                                b =
                                    "<div " +
                                    v +
                                    '-popup title="' +
                                    g +
                                    "title" +
                                    y +
                                    '" ' +
                                    (f.useContentExp ? 'content-exp="contentExp()" ' : 'content="' + g + "content" + y + '" ') +
                                    'placement="' +
                                    g +
                                    "placement" +
                                    y +
                                    '" popup-class="' +
                                    g +
                                    "popupClass" +
                                    y +
                                    '" animation="animation" is-open="isOpen"origin-scope="origScope" ></div>';
                            return {
                                restrict: "EA",
                                compile: function (t, e) {
                                    var n = o(b);
                                    return function (t, e, i, o) {
                                        function c() {
                                            D.isOpen ? v() : h();
                                        }
                                        function h() {
                                            (!j || t.$eval(i[p + "Enable"])) && ($(), D.popupDelay ? A || (A = a(g, D.popupDelay, !1)) : g());
                                        }
                                        function v() {
                                            y(), u.$$phase || u.$digest();
                                        }
                                        function g() {
                                            return (
                                                (A = null),
                                                E && (a.cancel(E), (E = null)),
                                                (f.useContentExp ? D.contentExp() : D.content) ? (b(), (D.isOpen = !0), L && L.assign(D.origScope, D.isOpen), u.$$phase || D.$apply(), _.css({ display: "block" }), void N()) : angular.noop
                                            );
                                        }
                                        function y() {
                                            (D.isOpen = !1), L && L.assign(D.origScope, D.isOpen), a.cancel(A), (A = null), a.cancel(I), (I = null), D.animation ? E || (E = a(w, 500)) : w();
                                        }
                                        function b() {
                                            _ && w(),
                                                (T = D.$new()),
                                                (_ = n(T, function (t) {
                                                    R ? s.find("body").append(t) : e.after(t);
                                                })),
                                                f.useContentExp &&
                                                    (T.$watch("contentExp()", function (t) {
                                                        !t && D.isOpen && y();
                                                    }),
                                                    T.$watch(function () {
                                                        O ||
                                                            ((O = !0),
                                                            T.$$postDigest(function () {
                                                                (O = !1), D.isOpen && N();
                                                            }));
                                                    }));
                                        }
                                        function w() {
                                            (E = null), _ && (_.remove(), (_ = null)), T && (T.$destroy(), (T = null));
                                        }
                                        function $() {
                                            x(), k(), S();
                                        }
                                        function x() {
                                            D.popupClass = i[p + "Class"];
                                        }
                                        function k() {
                                            var t = i[p + "Placement"];
                                            D.placement = angular.isDefined(t) ? t : f.placement;
                                        }
                                        function S() {
                                            var t = i[p + "PopupDelay"],
                                                e = parseInt(t, 10);
                                            D.popupDelay = isNaN(e) ? f.popupDelay : e;
                                        }
                                        function C() {
                                            var t = i[p + "Trigger"];
                                            q(),
                                                (P = m(t)),
                                                "none" !== P.show &&
                                                    P.show.forEach(function (t, n) {
                                                        t === P.hide[n] ? e[0].addEventListener(t, c) : t && (e[0].addEventListener(t, h), e[0].addEventListener(P.hide[n], v));
                                                    });
                                        }
                                        var _,
                                            T,
                                            E,
                                            A,
                                            I,
                                            R = angular.isDefined(f.appendToBody) ? f.appendToBody : !1,
                                            P = m(void 0),
                                            j = angular.isDefined(i[p + "Enable"]),
                                            D = t.$new(!0),
                                            O = !1,
                                            L = angular.isDefined(i[p + "IsOpen"]) ? d(i[p + "IsOpen"]) : !1,
                                            N = function () {
                                                _ &&
                                                    (I ||
                                                        (I = a(
                                                            function () {
                                                                _.css({ top: 0, left: 0, width: "auto", height: "auto" });
                                                                var t = l.position(_),
                                                                    n = l.positionElements(e, _, D.placement, R);
                                                                (n.top += "px"), (n.left += "px"), (n.width = t.width + "px"), (n.height = t.height + "px"), _.css(n), (I = null);
                                                            },
                                                            0,
                                                            !1
                                                        )));
                                            };
                                        (D.origScope = t),
                                            (D.isOpen = !1),
                                            (D.contentExp = function () {
                                                return t.$eval(i[r]);
                                            }),
                                            f.useContentExp ||
                                                i.$observe(r, function (t) {
                                                    (D.content = t), !t && D.isOpen ? y() : N();
                                                }),
                                            i.$observe("disabled", function (t) {
                                                A && t && (a.cancel(A), (A = null)), t && D.isOpen && y();
                                            }),
                                            i.$observe(p + "Title", function (t) {
                                                (D.title = t), N();
                                            }),
                                            i.$observe(p + "Placement", function () {
                                                D.isOpen && (k(), N());
                                            }),
                                            L &&
                                                t.$watch(L, function (t) {
                                                    t !== D.isOpen && c();
                                                });
                                        var q = function () {
                                            P.show.forEach(function (t) {
                                                e.unbind(t, h);
                                            }),
                                                P.hide.forEach(function (t) {
                                                    e.unbind(t, v);
                                                });
                                        };
                                        C();
                                        var U = t.$eval(i[p + "Animation"]);
                                        D.animation = angular.isDefined(U) ? !!U : f.animation;
                                        var M = t.$eval(i[p + "AppendToBody"]);
                                        (R = angular.isDefined(M) ? M : R),
                                            R &&
                                                t.$on("$locationChangeSuccess", function () {
                                                    D.isOpen && y();
                                                }),
                                            t.$on("$destroy", function () {
                                                a.cancel(E), a.cancel(A), a.cancel(I), q(), w(), (D = null);
                                            });
                                    };
                                },
                            };
                        };
                    },
                ]);
        })
        .directive("tooltipTemplateTransclude", [
            "$animate",
            "$sce",
            "$compile",
            "$templateRequest",
            function (t, e, n, i) {
                return {
                    link: function (r, o, a) {
                        var s,
                            l,
                            c,
                            u = r.$eval(a.tooltipTemplateTranscludeScope),
                            d = 0,
                            p = function () {
                                l && (l.remove(), (l = null)),
                                    s && (s.$destroy(), (s = null)),
                                    c &&
                                        (t.leave(c).then(function () {
                                            l = null;
                                        }),
                                        (l = c),
                                        (c = null));
                            };
                        r.$watch(e.parseAsResourceUrl(a.tooltipTemplateTransclude), function (e) {
                            var a = ++d;
                            e
                                ? (i(e, !0).then(
                                      function (i) {
                                          if (a === d) {
                                              var r = u.$new(),
                                                  l = i,
                                                  h = n(l)(r, function (e) {
                                                      p(), t.enter(e, o);
                                                  });
                                              (s = r), (c = h), s.$emit("$includeContentLoaded", e);
                                          }
                                      },
                                      function () {
                                          a === d && (p(), r.$emit("$includeContentError", e));
                                      }
                                  ),
                                  r.$emit("$includeContentRequested", e))
                                : p();
                        }),
                            r.$on("$destroy", p);
                    },
                };
            },
        ])
        .directive("tooltipClasses", function () {
            return {
                restrict: "A",
                link: function (t, e, n) {
                    t.placement && e.addClass(t.placement), t.popupClass && e.addClass(t.popupClass), t.animation() && e.addClass(n.tooltipAnimationClass);
                },
            };
        })
        .directive("tooltipPopup", function () {
            return { restrict: "EA", replace: !0, scope: { content: "@", placement: "@", popupClass: "@", animation: "&", isOpen: "&" }, templateUrl: "template/tooltip/tooltip-popup.html" };
        })
        .directive("tooltip", [
            "$tooltip",
            function (t) {
                return t("tooltip", "tooltip", "mouseenter");
            },
        ])
        .directive("tooltipTemplatePopup", function () {
            return { restrict: "EA", replace: !0, scope: { contentExp: "&", placement: "@", popupClass: "@", animation: "&", isOpen: "&", originScope: "&" }, templateUrl: "template/tooltip/tooltip-template-popup.html" };
        })
        .directive("tooltipTemplate", [
            "$tooltip",
            function (t) {
                return t("tooltipTemplate", "tooltip", "mouseenter", { useContentExp: !0 });
            },
        ])
        .directive("tooltipHtmlPopup", function () {
            return { restrict: "EA", replace: !0, scope: { contentExp: "&", placement: "@", popupClass: "@", animation: "&", isOpen: "&" }, templateUrl: "template/tooltip/tooltip-html-popup.html" };
        })
        .directive("tooltipHtml", [
            "$tooltip",
            function (t) {
                return t("tooltipHtml", "tooltip", "mouseenter", { useContentExp: !0 });
            },
        ]),
    angular
        .module("ui.bootstrap.progressbar", ["ui.bootstrap.transition"])
        .constant("progressConfig", { animate: !0, max: 100 })
        .controller("ProgressController", [
            "$scope",
            "$attrs",
            "progressConfig",
            "$transition",
            function (t, e, n, i) {
                var r = this,
                    o = [],
                    a = angular.isDefined(e.max) ? t.$parent.$eval(e.max) : n.max,
                    s = angular.isDefined(e.animate) ? t.$parent.$eval(e.animate) : n.animate;
                (this.addBar = function (t, e) {
                    var n = 0,
                        i = t.$parent.$index;
                    angular.isDefined(i) && o[i] && (n = o[i].value),
                        o.push(t),
                        this.update(e, t.value, n),
                        t.$watch("value", function (t, n) {
                            t !== n && r.update(e, t, n);
                        }),
                        t.$on("$destroy", function () {
                            r.removeBar(t);
                        });
                }),
                    (this.update = function (t, e, n) {
                        var r = this.getPercentage(e);
                        s ? (t.css("width", this.getPercentage(n) + "%"), i(t, { width: r + "%" })) : t.css({ transition: "none", width: r + "%" });
                    }),
                    (this.removeBar = function (t) {
                        o.splice(o.indexOf(t), 1);
                    }),
                    (this.getPercentage = function (t) {
                        return Math.round((100 * t) / a);
                    });
            },
        ])
        .directive("progress", function () {
            return { restrict: "EA", replace: !0, transclude: !0, controller: "ProgressController", require: "progress", scope: {}, template: '<div class="progress" ng-transclude></div>' };
        })
        .directive("bar", function () {
            return {
                restrict: "EA",
                replace: !0,
                transclude: !0,
                require: "^progress",
                scope: { value: "=", type: "@" },
                templateUrl: "template/progressbar/bar.html",
                link: function (t, e, n, i) {
                    i.addBar(t, e);
                },
            };
        })
        .directive("progressbar", function () {
            return {
                restrict: "EA",
                replace: !0,
                transclude: !0,
                controller: "ProgressController",
                scope: { value: "=", type: "@" },
                templateUrl: "template/progressbar/progressbar.html",
                link: function (t, e, n, i) {
                    i.addBar(t, angular.element(e.children()[0]));
                },
            };
        }),
    angular
        .module("ui.bootstrap.rating", [])
        .constant("ratingConfig", { max: 5, stateOn: null, stateOff: null })
        .controller("RatingController", [
            "$scope",
            "$attrs",
            "$parse",
            "ratingConfig",
            function (t, e, n, i) {
                (this.maxRange = angular.isDefined(e.max) ? t.$parent.$eval(e.max) : i.max),
                    (this.stateOn = angular.isDefined(e.stateOn) ? t.$parent.$eval(e.stateOn) : i.stateOn),
                    (this.stateOff = angular.isDefined(e.stateOff) ? t.$parent.$eval(e.stateOff) : i.stateOff),
                    (this.createRateObjects = function (t) {
                        for (var e = { stateOn: this.stateOn, stateOff: this.stateOff }, n = 0, i = t.length; i > n; n++) t[n] = angular.extend({ index: n }, e, t[n]);
                        return t;
                    }),
                    (t.range = angular.isDefined(e.ratingStates) ? this.createRateObjects(angular.copy(t.$parent.$eval(e.ratingStates))) : this.createRateObjects(new Array(this.maxRange))),
                    (t.rate = function (e) {
                        t.readonly || t.value === e || (t.value = e);
                    }),
                    (t.enter = function (e) {
                        t.readonly || (t.val = e), t.onHover({ value: e });
                    }),
                    (t.reset = function () {
                        (t.val = angular.copy(t.value)), t.onLeave();
                    }),
                    t.$watch("value", function (e) {
                        t.val = e;
                    }),
                    (t.readonly = !1),
                    e.readonly &&
                        t.$parent.$watch(n(e.readonly), function (e) {
                            t.readonly = !!e;
                        });
            },
        ])
        .directive("rating", function () {
            return { restrict: "EA", scope: { value: "=", onHover: "&", onLeave: "&" }, controller: "RatingController", templateUrl: "template/rating/rating.html", replace: !0 };
        }),
    angular
        .module("ui.bootstrap.tabs", [])
        .controller("TabsetController", [
            "$scope",
            function (t) {
                var e = this,
                    n = (e.tabs = t.tabs = []);
                (e.select = function (t) {
                    angular.forEach(n, function (t) {
                        t.active = !1;
                    }),
                        (t.active = !0);
                }),
                    (e.addTab = function (t) {
                        n.push(t), (1 === n.length || t.active) && e.select(t);
                    }),
                    (e.removeTab = function (t) {
                        var i = n.indexOf(t);
                        if (t.active && n.length > 1) {
                            var r = i == n.length - 1 ? i - 1 : i + 1;
                            e.select(n[r]);
                        }
                        n.splice(i, 1);
                    });
            },
        ])
        .directive("tabset", function () {
            return {
                restrict: "EA",
                transclude: !0,
                replace: !0,
                scope: {},
                controller: "TabsetController",
                templateUrl: "template/tabs/tabset.html",
                link: function (t, e, n) {
                    (t.vertical = angular.isDefined(n.vertical) ? t.$parent.$eval(n.vertical) : !1), (t.type = angular.isDefined(n.type) ? t.$parent.$eval(n.type) : "tabs");
                },
            };
        })
        .directive("tab", [
            "$parse",
            function (t) {
                return {
                    require: "^tabset",
                    restrict: "EA",
                    replace: !0,
                    templateUrl: "template/tabs/tab.html",
                    transclude: !0,
                    scope: { heading: "@", onSelect: "&select", onDeselect: "&deselect" },
                    controller: function () {},
                    compile: function (e, n, i) {
                        return function (e, n, r, o) {
                            var a, s;
                            r.active
                                ? ((a = t(r.active)),
                                  (s = a.assign),
                                  e.$parent.$watch(a, function (t, n) {
                                      t !== n && (e.active = !!t);
                                  }),
                                  (e.active = a(e.$parent)))
                                : (s = a = angular.noop),
                                e.$watch("active", function (t) {
                                    s(e.$parent, t), t ? (o.select(e), e.onSelect()) : e.onDeselect();
                                }),
                                (e.disabled = !1),
                                r.disabled &&
                                    e.$parent.$watch(t(r.disabled), function (t) {
                                        e.disabled = !!t;
                                    }),
                                (e.select = function () {
                                    e.disabled || (e.active = !0);
                                }),
                                o.addTab(e),
                                e.$on("$destroy", function () {
                                    o.removeTab(e);
                                }),
                                (e.$transcludeFn = i);
                        };
                    },
                };
            },
        ])
        .directive("tabHeadingTransclude", [
            function () {
                return {
                    restrict: "A",
                    require: "^tab",
                    link: function (t, e, n, i) {
                        t.$watch("headingElement", function (t) {
                            t && (e.html(""), e.append(t));
                        });
                    },
                };
            },
        ])
        .directive("tabContentTransclude", function () {
            function t(t) {
                return t.tagName && (t.hasAttribute("tab-heading") || t.hasAttribute("data-tab-heading") || "tab-heading" === t.tagName.toLowerCase() || "data-tab-heading" === t.tagName.toLowerCase());
            }
            return {
                restrict: "A",
                require: "^tabset",
                link: function (e, n, i) {
                    var r = e.$eval(i.tabContentTransclude);
                    r.$transcludeFn(r.$parent, function (e) {
                        angular.forEach(e, function (e) {
                            t(e) ? (r.headingElement = e) : n.append(e);
                        });
                    });
                },
            };
        }),
    angular
        .module("ui.bootstrap.typeahead", ["ui.bootstrap.position", "ui.bootstrap.bindHtml"])
        .factory("typeaheadParser", [
            "$parse",
            function (t) {
                var e = /^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;
                return {
                    parse: function (n) {
                        var i = n.match(e);
                        if (!i) throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '" + n + "'.");
                        return { itemName: i[3], source: t(i[4]), viewMapper: t(i[2] || i[1]), modelMapper: t(i[1]) };
                    },
                };
            },
        ])
        .directive("typeahead", [
            "$compile",
            "$parse",
            "$q",
            "$timeout",
            "$document",
            "$position",
            "typeaheadParser",
            function (t, e, n, i, r, o, a) {
                var s = [9, 13, 27, 38, 40];
                return {
                    require: "ngModel",
                    link: function (l, c, u, d) {
                        var p,
                            h = l.$eval(u.typeaheadMinLength) || 1,
                            f = l.$eval(u.typeaheadWaitMs) || 0,
                            m = l.$eval(u.typeaheadEditable) !== !1,
                            v = e(u.typeaheadLoading).assign || angular.noop,
                            g = e(u.typeaheadOnSelect),
                            y = u.typeaheadInputFormatter ? e(u.typeaheadInputFormatter) : void 0,
                            b = u.typeaheadAppendToBody ? e(u.typeaheadAppendToBody) : !1,
                            w = e(u.ngModel).assign,
                            $ = a.parse(u.typeahead),
                            x = angular.element("<div typeahead-popup></div>");
                        x.attr({ matches: "matches", active: "activeIdx", select: "select(activeIdx)", query: "query", position: "position" }), angular.isDefined(u.typeaheadTemplateUrl) && x.attr("template-url", u.typeaheadTemplateUrl);
                        var k = l.$new();
                        l.$on("$destroy", function () {
                            k.$destroy();
                        });
                        var S = function () {
                                (k.matches = []), (k.activeIdx = -1);
                            },
                            C = function (t) {
                                var e = { $viewValue: t };
                                v(l, !0),
                                    n.when($.source(l, e)).then(
                                        function (n) {
                                            if (t === d.$viewValue && p) {
                                                if (n.length > 0) {
                                                    (k.activeIdx = 0), (k.matches.length = 0);
                                                    for (var i = 0; i < n.length; i++) (e[$.itemName] = n[i]), k.matches.push({ label: $.viewMapper(k, e), model: n[i] });
                                                    (k.query = t), (k.position = b ? o.offset(c) : o.position(c)), (k.position.top = k.position.top + c.prop("offsetHeight"));
                                                } else S();
                                                v(l, !1);
                                            }
                                        },
                                        function () {
                                            S(), v(l, !1);
                                        }
                                    );
                            };
                        S(), (k.query = void 0);
                        var _;
                        d.$parsers.unshift(function (t) {
                            return (
                                (p = !0),
                                t && t.length >= h
                                    ? f > 0
                                        ? (_ && i.cancel(_),
                                          (_ = i(function () {
                                              C(t);
                                          }, f)))
                                        : C(t)
                                    : (v(l, !1), S()),
                                m ? t : t ? void d.$setValidity("editable", !1) : (d.$setValidity("editable", !0), t)
                            );
                        }),
                            d.$formatters.push(function (t) {
                                var e,
                                    n,
                                    i = {};
                                return y ? ((i.$model = t), y(l, i)) : ((i[$.itemName] = t), (e = $.viewMapper(l, i)), (i[$.itemName] = void 0), (n = $.viewMapper(l, i)), e !== n ? e : t);
                            }),
                            (k.select = function (t) {
                                var e,
                                    n,
                                    i = {};
                                (i[$.itemName] = n = k.matches[t].model), (e = $.modelMapper(l, i)), w(l, e), d.$setValidity("editable", !0), g(l, { $item: n, $model: e, $label: $.viewMapper(l, i) }), S(), c[0].focus();
                            }),
                            c.bind("keydown", function (t) {
                                0 !== k.matches.length &&
                                    -1 !== s.indexOf(t.which) &&
                                    (t.preventDefault(),
                                    40 === t.which
                                        ? ((k.activeIdx = (k.activeIdx + 1) % k.matches.length), k.$digest())
                                        : 38 === t.which
                                        ? ((k.activeIdx = (k.activeIdx ? k.activeIdx : k.matches.length) - 1), k.$digest())
                                        : 13 === t.which || 9 === t.which
                                        ? k.$apply(function () {
                                              k.select(k.activeIdx);
                                          })
                                        : 27 === t.which && (t.stopPropagation(), S(), k.$digest()));
                            }),
                            c.bind("blur", function (t) {
                                p = !1;
                            });
                        var T = function (t) {
                            c[0] !== t.target && (S(), k.$digest());
                        };
                        r.bind("click", T),
                            l.$on("$destroy", function () {
                                r.unbind("click", T);
                            });
                        var E = t(x)(k);
                        b ? r.find("body").append(E) : c.after(E);
                    },
                };
            },
        ])
        .directive("typeaheadPopup", function () {
            return {
                restrict: "EA",
                scope: { matches: "=", query: "=", active: "=", position: "=", select: "&" },
                replace: !0,
                templateUrl: "template/typeahead/typeahead-popup.html",
                link: function (t, e, n) {
                    (t.templateUrl = n.templateUrl),
                        (t.isOpen = function () {
                            return t.matches.length > 0;
                        }),
                        (t.isActive = function (e) {
                            return t.active == e;
                        }),
                        (t.selectActive = function (e) {
                            t.active = e;
                        }),
                        (t.selectMatch = function (e) {
                            t.select({ activeIdx: e });
                        });
                },
            };
        })
        .directive("typeaheadMatch", [
            "$http",
            "$templateCache",
            "$compile",
            "$parse",
            function (t, e, n, i) {
                return {
                    restrict: "EA",
                    scope: { index: "=", match: "=", query: "=" },
                    link: function (r, o, a) {
                        var s = i(a.templateUrl)(r.$parent) || "template/typeahead/typeahead-match.html";
                        t.get(s, { cache: e }).success(function (t) {
                            o.replaceWith(n(t.trim())(r));
                        });
                    },
                };
            },
        ])
        .filter("typeaheadHighlight", function () {
            function t(t) {
                return t.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1");
            }
            return function (e, n) {
                return n ? e.replace(new RegExp(t(n), "gi"), "<strong>$&</strong>") : e;
            };
        }),
    angular.module("template/alert/alert.html", []).run([
        "$templateCache",
        function (t) {
            t.put(
                "template/alert/alert.html",
                "<div class='alert' ng-class='type && \"alert-\" + type'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n"
            );
        },
    ]),
    angular.module("template/datepicker/datepicker.html", []).run([
        "$templateCache",
        function (t) {
            t.put(
                "template/datepicker/datepicker.html",
                '<table>\n  <thead>\n    <tr class="text-center">\n      <th><button type="button" class="btn pull-left" ng-click="move(-1)"><i class="icon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn pull-right" ng-click="move(1)"><i class="icon-chevron-right"></i></button></th>\n    </tr>\n    <tr class="text-center" ng-show="labels.length > 0">\n      <th ng-show="showWeekNumbers">#</th>\n      <th ng-repeat="label in labels">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button type="button" style="width:100%;" class="btn" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{muted: dt.secondary}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'
            );
        },
    ]),
    angular.module("template/datepicker/popup.html", []).run([
        "$templateCache",
        function (t) {
            t.put(
                "template/datepicker/popup.html",
                "<ul class=\"dropdown-menu\" ng-style=\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\">\n <li ng-transclude></li>\n" +
                    ' <li ng-show="showButtonBar" style="padding:10px 9px 2px">\n   <span class="btn-group">\n     <button type="button" class="btn btn-small btn-inverse" ng-click="today()">{{currentText}}</button>\n     <button type="button" class="btn btn-small btn-info" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">{{toggleWeeksText}}</button>\n     <button type="button" class="btn btn-small btn-danger" ng-click="clear()">{{clearText}}</button>\n   </span>\n   <button type="button" class="btn btn-small btn-success pull-right" ng-click="isOpen = false">{{closeText}}</button>\n </li>\n</ul>\n'
            );
        },
    ]),
    angular.module("template/modal/backdrop.html", []).run([
        "$templateCache",
        function (t) {
            t.put("template/modal/backdrop.html", '<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}" ng-click="close($event)"></div>');
        },
    ]),
    angular.module("template/modal/window.html", []).run([
        "$templateCache",
        function (t) {
            t.put("template/modal/window.html", '<div tabindex="-1" class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10}" ng-transclude></div>');
        },
    ]),
    angular.module("template/pagination/pager.html", []).run([
        "$templateCache",
        function (t) {
            t.put(
                "template/pagination/pager.html",
                '<div class="pager">\n  <ul>\n    <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n'
            );
        },
    ]),
    angular.module("template/pagination/pagination.html", []).run([
        "$templateCache",
        function (t) {
            t.put(
                "template/pagination/pagination.html",
                '<div class="pagination"><ul>\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n'
            );
        },
    ]),
    angular.module("template/tooltip/tooltip-popup.html", []).run([
        "$templateCache",
        function (t) {
            t.put(
                "template/tooltip/tooltip-html-unsafe-popup.html",
                '<div class="tooltip" tooltip-animation-class="fade" tooltip-classes ng-class="{in: isOpen()}"> <div class="tooltip-arrow"></div><div class="tooltip-inner" bind-html-unsafe="content"></div></div>'
            ),
                t.put(
                    "template/tooltip/tooltip-html-popup.html",
                    '<div class="tooltip" tooltip-animation-class="fade" tooltip-classes ng-class="{in: isOpen()}"> <div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind-html="contentExp()"></div></div>'
                ),
                t.put(
                    "template/tooltip/tooltip-popup.html",
                    '<div class="tooltip" tooltip-animation-class="fade" tooltip-classes ng-class="{in: isOpen()}"> <div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="content"></div></div>'
                ),
                t.put(
                    "template/tooltip/tooltip-template-popup.html",
                    '<div class="tooltip" tooltip-animation-class="fade" tooltip-classes ng-class="{in: isOpen()}"> <div class="tooltip-arrow"></div><div class="tooltip-inner" tooltip-template-transclude="contentExp()" tooltip-template-transclude-scope="originScope()"></div></div>'
                );
        },
    ]),
    angular.module("template/progressbar/bar.html", []).run([
        "$templateCache",
        function (t) {
            t.put("template/progressbar/bar.html", '<div class="bar" ng-class="type && \'bar-\' + type" ng-transclude></div>');
        },
    ]),
    angular.module("template/progressbar/progress.html", []).run([
        "$templateCache",
        function (t) {
            t.put("template/progressbar/progress.html", '<div class="progress" ng-transclude></div>');
        },
    ]),
    angular.module("template/progressbar/progressbar.html", []).run([
        "$templateCache",
        function (t) {
            t.put("template/progressbar/progressbar.html", '<div class="progress"><div class="bar" ng-class="type && \'bar-\' + type" ng-transclude></div></div>');
        },
    ]),
    angular.module("template/rating/rating.html", []).run([
        "$templateCache",
        function (t) {
            t.put(
                "template/rating/rating.html",
                '<span ng-mouseleave="reset()">\n <i ng-repeat="r in range" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" ng-class="$index < val && (r.stateOn || \'icon-star\') || (r.stateOff || \'icon-star-empty\')"></i>\n</span>'
            );
        },
    ]),
    angular.module("template/tabs/tab.html", []).run([
        "$templateCache",
        function (t) {
            t.put("template/tabs/tab.html", '<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n');
        },
    ]),
    angular.module("template/tabs/tabset-titles.html", []).run([
        "$templateCache",
        function (t) {
            t.put("template/tabs/tabset-titles.html", "<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n");
        },
    ]),
    angular.module("template/tabs/tabset.html", []).run([
        "$templateCache",
        function (t) {
            t.put(
                "template/tabs/tabset.html",
                '\n<div class="tabbable">\n  <ul class="nav {{type && \'nav-\' + type}}" ng-class="{\'nav-stacked\': vertical}" ng-transclude>\n  </ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n'
            );
        },
    ]),
    angular.module("template/typeahead/typeahead-match.html", []).run([
        "$templateCache",
        function (t) {
            t.put("template/typeahead/typeahead-match.html", '<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>');
        },
    ]),
    angular.module("template/typeahead/typeahead-popup.html", []).run([
        "$templateCache",
        function (t) {
            t.put(
                "template/typeahead/typeahead-popup.html",
                "<ul class=\"typeahead dropdown-menu\" ng-style=\"{display: isOpen()&&'block' || 'none', top: position.top+'px', left: position.left+'px'}\">\n" +
                    '    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>'
            );
        },
    ]),
    !(function (t, e, n, i) {
        "use strict";
        function r(t, e, n) {
            return setTimeout(c(t, n), e);
        }
        function o(t, e, n) {
            return Array.isArray(t) ? (a(t, n[e], n), !0) : !1;
        }
        function a(t, e, n) {
            var r;
            if (t)
                if (t.forEach) t.forEach(e, n);
                else if (t.length !== i) for (r = 0; r < t.length; ) e.call(n, t[r], r, t), r++;
                else for (r in t) t.hasOwnProperty(r) && e.call(n, t[r], r, t);
        }
        function s(e, n, i) {
            var r = "DEPRECATED METHOD: " + n + "\n" + i + " AT \n";
            return function () {
                var n = new Error("get-stack-trace"),
                    i =
                        n && n.stack
                            ? n.stack
                                  .replace(/^[^\(]+?[\n$]/gm, "")
                                  .replace(/^\s+at\s+/gm, "")
                                  .replace(/^Object.<anonymous>\s*\(/gm, "{anonymous}()@")
                            : "Unknown Stack Trace",
                    o = t.console && (t.console.warn || t.console.log);
                return o && o.call(t.console, r, i), e.apply(this, arguments);
            };
        }
        function l(t, e, n) {
            var i,
                r = e.prototype;
            (i = t.prototype = Object.create(r)), (i.constructor = t), (i._super = r), n && dt(i, n);
        }
        function c(t, e) {
            return function () {
                return t.apply(e, arguments);
            };
        }
        function u(t, e) {
            return typeof t == ft ? t.apply(e ? e[0] || i : i, e) : t;
        }
        function d(t, e) {
            return t === i ? e : t;
        }
        function p(t, e, n) {
            a(v(e), function (e) {
                t.addEventListener(e, n, !1);
            });
        }
        function h(t, e, n) {
            a(v(e), function (e) {
                t.removeEventListener(e, n, !1);
            });
        }
        function f(t, e) {
            for (; t; ) {
                if (t == e) return !0;
                t = t.parentNode;
            }
            return !1;
        }
        function m(t, e) {
            return t.indexOf(e) > -1;
        }
        function v(t) {
            return t.trim().split(/\s+/g);
        }
        function g(t, e, n) {
            if (t.indexOf && !n) return t.indexOf(e);
            for (var i = 0; i < t.length; ) {
                if ((n && t[i][n] == e) || (!n && t[i] === e)) return i;
                i++;
            }
            return -1;
        }
        function y(t) {
            return Array.prototype.slice.call(t, 0);
        }
        function b(t, e, n) {
            for (var i = [], r = [], o = 0; o < t.length; ) {
                var a = e ? t[o][e] : t[o];
                g(r, a) < 0 && i.push(t[o]), (r[o] = a), o++;
            }
            return (
                n &&
                    (i = e
                        ? i.sort(function (t, n) {
                              return t[e] > n[e];
                          })
                        : i.sort()),
                i
            );
        }
        function w(t, e) {
            for (var n, r, o = e[0].toUpperCase() + e.slice(1), a = 0; a < pt.length; ) {
                if (((n = pt[a]), (r = n ? n + o : e), r in t)) return r;
                a++;
            }
            return i;
        }
        function $() {
            return wt++;
        }
        function x(e) {
            var n = e.ownerDocument || e;
            return n.defaultView || n.parentWindow || t;
        }
        function k(t, e) {
            var n = this;
            (this.manager = t),
                (this.callback = e),
                (this.element = t.element),
                (this.target = t.options.inputTarget),
                (this.domHandler = function (e) {
                    u(t.options.enable, [t]) && n.handler(e);
                }),
                this.init();
        }
        function S(t) {
            var e,
                n = t.options.inputClass;
            return new (e = n ? n : kt ? q : St ? B : xt ? H : N)(t, C);
        }
        function C(t, e, n) {
            var i = n.pointers.length,
                r = n.changedPointers.length,
                o = e & It && i - r === 0,
                a = e & (Pt | jt) && i - r === 0;
            (n.isFirst = !!o), (n.isFinal = !!a), o && (t.session = {}), (n.eventType = e), _(t, n), t.emit("hammer.input", n), t.recognize(n), (t.session.prevInput = n);
        }
        function _(t, e) {
            var n = t.session,
                i = e.pointers,
                r = i.length;
            n.firstInput || (n.firstInput = A(e)), r > 1 && !n.firstMultiple ? (n.firstMultiple = A(e)) : 1 === r && (n.firstMultiple = !1);
            var o = n.firstInput,
                a = n.firstMultiple,
                s = a ? a.center : o.center,
                l = (e.center = I(i));
            (e.timeStamp = gt()), (e.deltaTime = e.timeStamp - o.timeStamp), (e.angle = D(s, l)), (e.distance = j(s, l)), T(n, e), (e.offsetDirection = P(e.deltaX, e.deltaY));
            var c = R(e.deltaTime, e.deltaX, e.deltaY);
            (e.overallVelocityX = c.x),
                (e.overallVelocityY = c.y),
                (e.overallVelocity = vt(c.x) > vt(c.y) ? c.x : c.y),
                (e.scale = a ? L(a.pointers, i) : 1),
                (e.rotation = a ? O(a.pointers, i) : 0),
                (e.maxPointers = n.prevInput ? (e.pointers.length > n.prevInput.maxPointers ? e.pointers.length : n.prevInput.maxPointers) : e.pointers.length),
                E(n, e);
            var u = t.element;
            f(e.srcEvent.target, u) && (u = e.srcEvent.target), (e.target = u);
        }
        function T(t, e) {
            var n = e.center,
                i = t.offsetDelta || {},
                r = t.prevDelta || {},
                o = t.prevInput || {};
            (e.eventType !== It && o.eventType !== Pt) || ((r = t.prevDelta = { x: o.deltaX || 0, y: o.deltaY || 0 }), (i = t.offsetDelta = { x: n.x, y: n.y })), (e.deltaX = r.x + (n.x - i.x)), (e.deltaY = r.y + (n.y - i.y));
        }
        function E(t, e) {
            var n,
                r,
                o,
                a,
                s = t.lastInterval || e,
                l = e.timeStamp - s.timeStamp;
            if (e.eventType != jt && (l > At || s.velocity === i)) {
                var c = e.deltaX - s.deltaX,
                    u = e.deltaY - s.deltaY,
                    d = R(l, c, u);
                (r = d.x), (o = d.y), (n = vt(d.x) > vt(d.y) ? d.x : d.y), (a = P(c, u)), (t.lastInterval = e);
            } else (n = s.velocity), (r = s.velocityX), (o = s.velocityY), (a = s.direction);
            (e.velocity = n), (e.velocityX = r), (e.velocityY = o), (e.direction = a);
        }
        function A(t) {
            for (var e = [], n = 0; n < t.pointers.length; ) (e[n] = { clientX: mt(t.pointers[n].clientX), clientY: mt(t.pointers[n].clientY) }), n++;
            return { timeStamp: gt(), pointers: e, center: I(e), deltaX: t.deltaX, deltaY: t.deltaY };
        }
        function I(t) {
            var e = t.length;
            if (1 === e) return { x: mt(t[0].clientX), y: mt(t[0].clientY) };
            for (var n = 0, i = 0, r = 0; e > r; ) (n += t[r].clientX), (i += t[r].clientY), r++;
            return { x: mt(n / e), y: mt(i / e) };
        }
        function R(t, e, n) {
            return { x: e / t || 0, y: n / t || 0 };
        }
        function P(t, e) {
            return t === e ? Dt : vt(t) >= vt(e) ? (0 > t ? Ot : Lt) : 0 > e ? Nt : qt;
        }
        function j(t, e, n) {
            n || (n = Ft);
            var i = e[n[0]] - t[n[0]],
                r = e[n[1]] - t[n[1]];
            return Math.sqrt(i * i + r * r);
        }
        function D(t, e, n) {
            n || (n = Ft);
            var i = e[n[0]] - t[n[0]],
                r = e[n[1]] - t[n[1]];
            return (180 * Math.atan2(r, i)) / Math.PI;
        }
        function O(t, e) {
            return D(e[1], e[0], Ht) + D(t[1], t[0], Ht);
        }
        function L(t, e) {
            return j(e[0], e[1], Ht) / j(t[0], t[1], Ht);
        }
        function N() {
            (this.evEl = zt), (this.evWin = Wt), (this.pressed = !1), k.apply(this, arguments);
        }
        function q() {
            (this.evEl = Xt), (this.evWin = Jt), k.apply(this, arguments), (this.store = this.manager.session.pointerEvents = []);
        }
        function U() {
            (this.evTarget = Qt), (this.evWin = Zt), (this.started = !1), k.apply(this, arguments);
        }
        function M(t, e) {
            var n = y(t.touches),
                i = y(t.changedTouches);
            return e & (Pt | jt) && (n = b(n.concat(i), "identifier", !0)), [n, i];
        }
        function B() {
            (this.evTarget = ee), (this.targetIds = {}), k.apply(this, arguments);
        }
        function F(t, e) {
            var n = y(t.touches),
                i = this.targetIds;
            if (e & (It | Rt) && 1 === n.length) return (i[n[0].identifier] = !0), [n, n];
            var r,
                o,
                a = y(t.changedTouches),
                s = [],
                l = this.target;
            if (
                ((o = n.filter(function (t) {
                    return f(t.target, l);
                })),
                e === It)
            )
                for (r = 0; r < o.length; ) (i[o[r].identifier] = !0), r++;
            for (r = 0; r < a.length; ) i[a[r].identifier] && s.push(a[r]), e & (Pt | jt) && delete i[a[r].identifier], r++;
            return s.length ? [b(o.concat(s), "identifier", !0), s] : void 0;
        }
        function H() {
            k.apply(this, arguments);
            var t = c(this.handler, this);
            (this.touch = new B(this.manager, t)), (this.mouse = new N(this.manager, t)), (this.primaryTouch = null), (this.lastTouches = []);
        }
        function V(t, e) {
            t & It ? ((this.primaryTouch = e.changedPointers[0].identifier), z.call(this, e)) : t & (Pt | jt) && z.call(this, e);
        }
        function z(t) {
            var e = t.changedPointers[0];
            if (e.identifier === this.primaryTouch) {
                var n = { x: e.clientX, y: e.clientY };
                this.lastTouches.push(n);
                var i = this.lastTouches,
                    r = function () {
                        var t = i.indexOf(n);
                        t > -1 && i.splice(t, 1);
                    };
                setTimeout(r, ne);
            }
        }
        function W(t) {
            for (var e = t.srcEvent.clientX, n = t.srcEvent.clientY, i = 0; i < this.lastTouches.length; i++) {
                var r = this.lastTouches[i],
                    o = Math.abs(e - r.x),
                    a = Math.abs(n - r.y);
                if (ie >= o && ie >= a) return !0;
            }
            return !1;
        }
        function Y(t, e) {
            (this.manager = t), this.set(e);
        }
        function G(t) {
            if (m(t, ce)) return ce;
            var e = m(t, ue),
                n = m(t, de);
            return e && n ? ce : e || n ? (e ? ue : de) : m(t, le) ? le : se;
        }
        function X() {
            if (!oe) return !1;
            var e = {},
                n = t.CSS && t.CSS.supports;
            return (
                ["auto", "manipulation", "pan-y", "pan-x", "pan-x pan-y", "none"].forEach(function (i) {
                    e[i] = n ? t.CSS.supports("touch-action", i) : !0;
                }),
                e
            );
        }
        function J(t) {
            (this.options = dt({}, this.defaults, t || {})), (this.id = $()), (this.manager = null), (this.options.enable = d(this.options.enable, !0)), (this.state = he), (this.simultaneous = {}), (this.requireFail = []);
        }
        function K(t) {
            return t & ye ? "cancel" : t & ve ? "end" : t & me ? "move" : t & fe ? "start" : "";
        }
        function Q(t) {
            return t == qt ? "down" : t == Nt ? "up" : t == Ot ? "left" : t == Lt ? "right" : "";
        }
        function Z(t, e) {
            var n = e.manager;
            return n ? n.get(t) : t;
        }
        function tt() {
            J.apply(this, arguments);
        }
        function et() {
            tt.apply(this, arguments), (this.pX = null), (this.pY = null);
        }
        function nt() {
            tt.apply(this, arguments);
        }
        function it() {
            J.apply(this, arguments), (this._timer = null), (this._input = null);
        }
        function rt() {
            tt.apply(this, arguments);
        }
        function ot() {
            tt.apply(this, arguments);
        }
        function at() {
            J.apply(this, arguments), (this.pTime = !1), (this.pCenter = !1), (this._timer = null), (this._input = null), (this.count = 0);
        }
        function st(t, e) {
            return (e = e || {}), (e.recognizers = d(e.recognizers, st.defaults.preset)), new lt(t, e);
        }
        function lt(t, e) {
            (this.options = dt({}, st.defaults, e || {})),
                (this.options.inputTarget = this.options.inputTarget || t),
                (this.handlers = {}),
                (this.session = {}),
                (this.recognizers = []),
                (this.oldCssProps = {}),
                (this.element = t),
                (this.input = S(this)),
                (this.touchAction = new Y(this, this.options.touchAction)),
                ct(this, !0),
                a(
                    this.options.recognizers,
                    function (t) {
                        var e = this.add(new t[0](t[1]));
                        t[2] && e.recognizeWith(t[2]), t[3] && e.requireFailure(t[3]);
                    },
                    this
                );
        }
        function ct(t, e) {
            var n = t.element;
            if (n.style) {
                var i;
                a(t.options.cssProps, function (r, o) {
                    (i = w(n.style, o)), e ? ((t.oldCssProps[i] = n.style[i]), (n.style[i] = r)) : (n.style[i] = t.oldCssProps[i] || "");
                }),
                    e || (t.oldCssProps = {});
            }
        }
        function ut(t, n) {
            var i = e.createEvent("Event");
            i.initEvent(t, !0, !0), (i.gesture = n), n.target.dispatchEvent(i);
        }
        var dt,
            pt = ["", "webkit", "Moz", "MS", "ms", "o"],
            ht = e.createElement("div"),
            ft = "function",
            mt = Math.round,
            vt = Math.abs,
            gt = Date.now;
        dt =
            "function" != typeof Object.assign
                ? function (t) {
                      if (t === i || null === t) throw new TypeError("Cannot convert undefined or null to object");
                      for (var e = Object(t), n = 1; n < arguments.length; n++) {
                          var r = arguments[n];
                          if (r !== i && null !== r) for (var o in r) r.hasOwnProperty(o) && (e[o] = r[o]);
                      }
                      return e;
                  }
                : Object.assign;
        var yt = s(
                function (t, e, n) {
                    for (var r = Object.keys(e), o = 0; o < r.length; ) (!n || (n && t[r[o]] === i)) && (t[r[o]] = e[r[o]]), o++;
                    return t;
                },
                "extend",
                "Use `assign`."
            ),
            bt = s(
                function (t, e) {
                    return yt(t, e, !0);
                },
                "merge",
                "Use `assign`."
            ),
            wt = 1,
            $t = /mobile|tablet|ip(ad|hone|od)|android/i,
            xt = "ontouchstart" in t,
            kt = w(t, "PointerEvent") !== i,
            St = xt && $t.test(navigator.userAgent),
            Ct = "touch",
            _t = "pen",
            Tt = "mouse",
            Et = "kinect",
            At = 25,
            It = 1,
            Rt = 2,
            Pt = 4,
            jt = 8,
            Dt = 1,
            Ot = 2,
            Lt = 4,
            Nt = 8,
            qt = 16,
            Ut = Ot | Lt,
            Mt = Nt | qt,
            Bt = Ut | Mt,
            Ft = ["x", "y"],
            Ht = ["clientX", "clientY"];
        k.prototype = {
            handler: function () {},
            init: function () {
                this.evEl && p(this.element, this.evEl, this.domHandler), this.evTarget && p(this.target, this.evTarget, this.domHandler), this.evWin && p(x(this.element), this.evWin, this.domHandler);
            },
            destroy: function () {
                this.evEl && h(this.element, this.evEl, this.domHandler), this.evTarget && h(this.target, this.evTarget, this.domHandler), this.evWin && h(x(this.element), this.evWin, this.domHandler);
            },
        };
        var Vt = { mousedown: It, mousemove: Rt, mouseup: Pt },
            zt = "mousedown",
            Wt = "mousemove mouseup";
        l(N, k, {
            handler: function (t) {
                var e = Vt[t.type];
                e & It && 0 === t.button && (this.pressed = !0),
                    e & Rt && 1 !== t.which && (e = Pt),
                    this.pressed && (e & Pt && (this.pressed = !1), this.callback(this.manager, e, { pointers: [t], changedPointers: [t], pointerType: Tt, srcEvent: t }));
            },
        });
        var Yt = { pointerdown: It, pointermove: Rt, pointerup: Pt, pointercancel: jt, pointerout: jt },
            Gt = { 2: Ct, 3: _t, 4: Tt, 5: Et },
            Xt = "pointerdown",
            Jt = "pointermove pointerup pointercancel";
        t.MSPointerEvent && !t.PointerEvent && ((Xt = "MSPointerDown"), (Jt = "MSPointerMove MSPointerUp MSPointerCancel")),
            l(q, k, {
                handler: function (t) {
                    var e = this.store,
                        n = !1,
                        i = t.type.toLowerCase().replace("ms", ""),
                        r = Yt[i],
                        o = Gt[t.pointerType] || t.pointerType,
                        a = o == Ct,
                        s = g(e, t.pointerId, "pointerId");
                    r & It && (0 === t.button || a) ? 0 > s && (e.push(t), (s = e.length - 1)) : r & (Pt | jt) && (n = !0),
                        0 > s || ((e[s] = t), this.callback(this.manager, r, { pointers: e, changedPointers: [t], pointerType: o, srcEvent: t }), n && e.splice(s, 1));
                },
            });
        var Kt = { touchstart: It, touchmove: Rt, touchend: Pt, touchcancel: jt },
            Qt = "touchstart",
            Zt = "touchstart touchmove touchend touchcancel";
        l(U, k, {
            handler: function (t) {
                var e = Kt[t.type];
                if ((e === It && (this.started = !0), this.started)) {
                    var n = M.call(this, t, e);
                    e & (Pt | jt) && n[0].length - n[1].length === 0 && (this.started = !1), this.callback(this.manager, e, { pointers: n[0], changedPointers: n[1], pointerType: Ct, srcEvent: t });
                }
            },
        });
        var te = { touchstart: It, touchmove: Rt, touchend: Pt, touchcancel: jt },
            ee = "touchstart touchmove touchend touchcancel";
        l(B, k, {
            handler: function (t) {
                var e = te[t.type],
                    n = F.call(this, t, e);
                n && this.callback(this.manager, e, { pointers: n[0], changedPointers: n[1], pointerType: Ct, srcEvent: t });
            },
        });
        var ne = 2500,
            ie = 25;
        l(H, k, {
            handler: function (t, e, n) {
                var i = n.pointerType == Ct,
                    r = n.pointerType == Tt;
                if (!(r && n.sourceCapabilities && n.sourceCapabilities.firesTouchEvents)) {
                    if (i) V.call(this, e, n);
                    else if (r && W.call(this, n)) return;
                    this.callback(t, e, n);
                }
            },
            destroy: function () {
                this.touch.destroy(), this.mouse.destroy();
            },
        });
        var re = w(ht.style, "touchAction"),
            oe = re !== i,
            ae = "compute",
            se = "auto",
            le = "manipulation",
            ce = "none",
            ue = "pan-x",
            de = "pan-y",
            pe = X();
        Y.prototype = {
            set: function (t) {
                t == ae && (t = this.compute()), oe && this.manager.element.style && pe[t] && (this.manager.element.style[re] = t), (this.actions = t.toLowerCase().trim());
            },
            update: function () {
                this.set(this.manager.options.touchAction);
            },
            compute: function () {
                var t = [];
                return (
                    a(this.manager.recognizers, function (e) {
                        u(e.options.enable, [e]) && (t = t.concat(e.getTouchAction()));
                    }),
                    G(t.join(" "))
                );
            },
            preventDefaults: function (t) {
                var e = t.srcEvent,
                    n = t.offsetDirection;
                if (this.manager.session.prevented) return void e.preventDefault();
                var i = this.actions,
                    r = m(i, ce) && !pe[ce],
                    o = m(i, de) && !pe[de],
                    a = m(i, ue) && !pe[ue];
                if (r) {
                    var s = 1 === t.pointers.length,
                        l = t.distance < 2,
                        c = t.deltaTime < 250;
                    if (s && l && c) return;
                }
                return a && o ? void 0 : r || (o && n & Ut) || (a && n & Mt) ? this.preventSrc(e) : void 0;
            },
            preventSrc: function (t) {
                (this.manager.session.prevented = !0), t.preventDefault();
            },
        };
        var he = 1,
            fe = 2,
            me = 4,
            ve = 8,
            ge = ve,
            ye = 16,
            be = 32;
        (J.prototype = {
            defaults: {},
            set: function (t) {
                return dt(this.options, t), this.manager && this.manager.touchAction.update(), this;
            },
            recognizeWith: function (t) {
                if (o(t, "recognizeWith", this)) return this;
                var e = this.simultaneous;
                return (t = Z(t, this)), e[t.id] || ((e[t.id] = t), t.recognizeWith(this)), this;
            },
            dropRecognizeWith: function (t) {
                return o(t, "dropRecognizeWith", this) ? this : ((t = Z(t, this)), delete this.simultaneous[t.id], this);
            },
            requireFailure: function (t) {
                if (o(t, "requireFailure", this)) return this;
                var e = this.requireFail;
                return (t = Z(t, this)), -1 === g(e, t) && (e.push(t), t.requireFailure(this)), this;
            },
            dropRequireFailure: function (t) {
                if (o(t, "dropRequireFailure", this)) return this;
                t = Z(t, this);
                var e = g(this.requireFail, t);
                return e > -1 && this.requireFail.splice(e, 1), this;
            },
            hasRequireFailures: function () {
                return this.requireFail.length > 0;
            },
            canRecognizeWith: function (t) {
                return !!this.simultaneous[t.id];
            },
            emit: function (t) {
                function e(e) {
                    n.manager.emit(e, t);
                }
                var n = this,
                    i = this.state;
                ve > i && e(n.options.event + K(i)), e(n.options.event), t.additionalEvent && e(t.additionalEvent), i >= ve && e(n.options.event + K(i));
            },
            tryEmit: function (t) {
                return this.canEmit() ? this.emit(t) : void (this.state = be);
            },
            canEmit: function () {
                for (var t = 0; t < this.requireFail.length; ) {
                    if (!(this.requireFail[t].state & (be | he))) return !1;
                    t++;
                }
                return !0;
            },
            recognize: function (t) {
                var e = dt({}, t);
                return u(this.options.enable, [this, e])
                    ? (this.state & (ge | ye | be) && (this.state = he), (this.state = this.process(e)), void (this.state & (fe | me | ve | ye) && this.tryEmit(e)))
                    : (this.reset(), void (this.state = be));
            },
            process: function (t) {},
            getTouchAction: function () {},
            reset: function () {},
        }),
            l(tt, J, {
                defaults: { pointers: 1 },
                attrTest: function (t) {
                    var e = this.options.pointers;
                    return 0 === e || t.pointers.length === e;
                },
                process: function (t) {
                    var e = this.state,
                        n = t.eventType,
                        i = e & (fe | me),
                        r = this.attrTest(t);
                    return i && (n & jt || !r) ? e | ye : i || r ? (n & Pt ? e | ve : e & fe ? e | me : fe) : be;
                },
            }),
            l(et, tt, {
                defaults: { event: "pan", threshold: 10, pointers: 1, direction: Bt },
                getTouchAction: function () {
                    var t = this.options.direction,
                        e = [];
                    return t & Ut && e.push(de), t & Mt && e.push(ue), e;
                },
                directionTest: function (t) {
                    var e = this.options,
                        n = !0,
                        i = t.distance,
                        r = t.direction,
                        o = t.deltaX,
                        a = t.deltaY;
                    return (
                        r & e.direction || (e.direction & Ut ? ((r = 0 === o ? Dt : 0 > o ? Ot : Lt), (n = o != this.pX), (i = Math.abs(t.deltaX))) : ((r = 0 === a ? Dt : 0 > a ? Nt : qt), (n = a != this.pY), (i = Math.abs(t.deltaY)))),
                        (t.direction = r),
                        n && i > e.threshold && r & e.direction
                    );
                },
                attrTest: function (t) {
                    return tt.prototype.attrTest.call(this, t) && (this.state & fe || (!(this.state & fe) && this.directionTest(t)));
                },
                emit: function (t) {
                    (this.pX = t.deltaX), (this.pY = t.deltaY);
                    var e = Q(t.direction);
                    e && (t.additionalEvent = this.options.event + e), this._super.emit.call(this, t);
                },
            }),
            l(nt, tt, {
                defaults: { event: "pinch", threshold: 0, pointers: 2 },
                getTouchAction: function () {
                    return [ce];
                },
                attrTest: function (t) {
                    return this._super.attrTest.call(this, t) && (Math.abs(t.scale - 1) > this.options.threshold || this.state & fe);
                },
                emit: function (t) {
                    if (1 !== t.scale) {
                        var e = t.scale < 1 ? "in" : "out";
                        t.additionalEvent = this.options.event + e;
                    }
                    this._super.emit.call(this, t);
                },
            }),
            l(it, J, {
                defaults: { event: "press", pointers: 1, time: 251, threshold: 9 },
                getTouchAction: function () {
                    return [se];
                },
                process: function (t) {
                    var e = this.options,
                        n = t.pointers.length === e.pointers,
                        i = t.distance < e.threshold,
                        o = t.deltaTime > e.time;
                    if (((this._input = t), !i || !n || (t.eventType & (Pt | jt) && !o))) this.reset();
                    else if (t.eventType & It)
                        this.reset(),
                            (this._timer = r(
                                function () {
                                    (this.state = ge), this.tryEmit();
                                },
                                e.time,
                                this
                            ));
                    else if (t.eventType & Pt) return ge;
                    return be;
                },
                reset: function () {
                    clearTimeout(this._timer);
                },
                emit: function (t) {
                    this.state === ge && (t && t.eventType & Pt ? this.manager.emit(this.options.event + "up", t) : ((this._input.timeStamp = gt()), this.manager.emit(this.options.event, this._input)));
                },
            }),
            l(rt, tt, {
                defaults: { event: "rotate", threshold: 0, pointers: 2 },
                getTouchAction: function () {
                    return [ce];
                },
                attrTest: function (t) {
                    return this._super.attrTest.call(this, t) && (Math.abs(t.rotation) > this.options.threshold || this.state & fe);
                },
            }),
            l(ot, tt, {
                defaults: { event: "swipe", threshold: 10, velocity: 0.3, direction: Ut | Mt, pointers: 1 },
                getTouchAction: function () {
                    return et.prototype.getTouchAction.call(this);
                },
                attrTest: function (t) {
                    var e,
                        n = this.options.direction;
                    return (
                        n & (Ut | Mt) ? (e = t.overallVelocity) : n & Ut ? (e = t.overallVelocityX) : n & Mt && (e = t.overallVelocityY),
                        this._super.attrTest.call(this, t) && n & t.offsetDirection && t.distance > this.options.threshold && t.maxPointers == this.options.pointers && vt(e) > this.options.velocity && t.eventType & Pt
                    );
                },
                emit: function (t) {
                    var e = Q(t.offsetDirection);
                    e && this.manager.emit(this.options.event + e, t), this.manager.emit(this.options.event, t);
                },
            }),
            l(at, J, {
                defaults: { event: "tap", pointers: 1, taps: 1, interval: 300, time: 250, threshold: 9, posThreshold: 10 },
                getTouchAction: function () {
                    return [le];
                },
                process: function (t) {
                    var e = this.options,
                        n = t.pointers.length === e.pointers,
                        i = t.distance < e.threshold,
                        o = t.deltaTime < e.time;
                    if ((this.reset(), t.eventType & It && 0 === this.count)) return this.failTimeout();
                    if (i && o && n) {
                        if (t.eventType != Pt) return this.failTimeout();
                        var a = this.pTime ? t.timeStamp - this.pTime < e.interval : !0,
                            s = !this.pCenter || j(this.pCenter, t.center) < e.posThreshold;
                        (this.pTime = t.timeStamp), (this.pCenter = t.center), s && a ? (this.count += 1) : (this.count = 1), (this._input = t);
                        var l = this.count % e.taps;
                        if (0 === l)
                            return this.hasRequireFailures()
                                ? ((this._timer = r(
                                      function () {
                                          (this.state = ge), this.tryEmit();
                                      },
                                      e.interval,
                                      this
                                  )),
                                  fe)
                                : ge;
                    }
                    return be;
                },
                failTimeout: function () {
                    return (
                        (this._timer = r(
                            function () {
                                this.state = be;
                            },
                            this.options.interval,
                            this
                        )),
                        be
                    );
                },
                reset: function () {
                    clearTimeout(this._timer);
                },
                emit: function () {
                    this.state == ge && ((this._input.tapCount = this.count), this.manager.emit(this.options.event, this._input));
                },
            }),
            (st.VERSION = "2.0.8"),
            (st.defaults = {
                domEvents: !1,
                touchAction: ae,
                enable: !0,
                inputTarget: null,
                inputClass: null,
                preset: [[rt, { enable: !1 }], [nt, { enable: !1 }, ["rotate"]], [ot, { direction: Ut }], [et, { direction: Ut }, ["swipe"]], [at], [at, { event: "doubletap", taps: 2 }, ["tap"]], [it]],
                cssProps: { userSelect: "none", touchSelect: "none", touchCallout: "none", contentZooming: "none", userDrag: "none", tapHighlightColor: "rgba(0,0,0,0)" },
            });
        var we = 1,
            $e = 2;
        (lt.prototype = {
            set: function (t) {
                return dt(this.options, t), t.touchAction && this.touchAction.update(), t.inputTarget && (this.input.destroy(), (this.input.target = t.inputTarget), this.input.init()), this;
            },
            stop: function (t) {
                this.session.stopped = t ? $e : we;
            },
            recognize: function (t) {
                var e = this.session;
                if (!e.stopped) {
                    this.touchAction.preventDefaults(t);
                    var n,
                        i = this.recognizers,
                        r = e.curRecognizer;
                    (!r || (r && r.state & ge)) && (r = e.curRecognizer = null);
                    for (var o = 0; o < i.length; ) (n = i[o]), e.stopped === $e || (r && n != r && !n.canRecognizeWith(r)) ? n.reset() : n.recognize(t), !r && n.state & (fe | me | ve) && (r = e.curRecognizer = n), o++;
                }
            },
            get: function (t) {
                if (t instanceof J) return t;
                for (var e = this.recognizers, n = 0; n < e.length; n++) if (e[n].options.event == t) return e[n];
                return null;
            },
            add: function (t) {
                if (o(t, "add", this)) return this;
                var e = this.get(t.options.event);
                return e && this.remove(e), this.recognizers.push(t), (t.manager = this), this.touchAction.update(), t;
            },
            remove: function (t) {
                if (o(t, "remove", this)) return this;
                if ((t = this.get(t))) {
                    var e = this.recognizers,
                        n = g(e, t);
                    -1 !== n && (e.splice(n, 1), this.touchAction.update());
                }
                return this;
            },
            on: function (t, e) {
                if (t !== i && e !== i) {
                    var n = this.handlers;
                    return (
                        a(v(t), function (t) {
                            (n[t] = n[t] || []), n[t].push(e);
                        }),
                        this
                    );
                }
            },
            off: function (t, e) {
                if (t !== i) {
                    var n = this.handlers;
                    return (
                        a(v(t), function (t) {
                            e ? n[t] && n[t].splice(g(n[t], e), 1) : delete n[t];
                        }),
                        this
                    );
                }
            },
            emit: function (t, e) {
                this.options.domEvents && ut(t, e);
                var n = this.handlers[t] && this.handlers[t].slice();
                if (n && n.length) {
                    (e.type = t),
                        (e.preventDefault = function () {
                            e.srcEvent.preventDefault();
                        });
                    for (var i = 0; i < n.length; ) n[i](e), i++;
                }
            },
            destroy: function () {
                this.element && ct(this, !1), (this.handlers = {}), (this.session = {}), this.input.destroy(), (this.element = null);
            },
        }),
            dt(st, {
                INPUT_START: It,
                INPUT_MOVE: Rt,
                INPUT_END: Pt,
                INPUT_CANCEL: jt,
                STATE_POSSIBLE: he,
                STATE_BEGAN: fe,
                STATE_CHANGED: me,
                STATE_ENDED: ve,
                STATE_RECOGNIZED: ge,
                STATE_CANCELLED: ye,
                STATE_FAILED: be,
                DIRECTION_NONE: Dt,
                DIRECTION_LEFT: Ot,
                DIRECTION_RIGHT: Lt,
                DIRECTION_UP: Nt,
                DIRECTION_DOWN: qt,
                DIRECTION_HORIZONTAL: Ut,
                DIRECTION_VERTICAL: Mt,
                DIRECTION_ALL: Bt,
                Manager: lt,
                Input: k,
                TouchAction: Y,
                TouchInput: B,
                MouseInput: N,
                PointerEventInput: q,
                TouchMouseInput: H,
                SingleTouchInput: U,
                Recognizer: J,
                AttrRecognizer: tt,
                Tap: at,
                Pan: et,
                Swipe: ot,
                Pinch: nt,
                Rotate: rt,
                Press: it,
                on: p,
                off: h,
                each: a,
                merge: bt,
                extend: yt,
                assign: dt,
                inherit: l,
                bindFn: c,
                prefixed: w,
            });
        var xe = "undefined" != typeof t ? t : "undefined" != typeof self ? self : {};
        (xe.Hammer = st),
            "function" == typeof define && define.amd
                ? define(function () {
                      return st;
                  })
                : "undefined" != typeof module && module.exports
                ? (module.exports = st)
                : (t[n] = st);
    })(window, document, "Hammer"),
    (function (t, e) {
        function n(e) {
            var n,
                i = t("<div></div>").css({ width: "100%" });
            return e.append(i), (n = e.width() - i.width()), i.remove(), n;
        }
        function i(r, o) {
            var a = r.getBoundingClientRect(),
                s = a.top,
                l = a.bottom,
                c = a.left,
                u = a.right,
                d = t.extend({ tolerance: 0, viewport: e }, o),
                p = !1,
                h = d.viewport.jquery ? d.viewport : t(d.viewport);
            h.length || (console.warn("isInViewport: The viewport selector you have provided matches no element on page."), console.warn("isInViewport: Defaulting to viewport as window"), (h = t(e)));
            var f = h.height(),
                m = h.width(),
                v = h.get(0).toString();
            if (h[0] !== e && "[object Window]" !== v && "[object DOMWindow]" !== v) {
                var g = h.get(0).getBoundingClientRect();
                (s -= g.top), (l -= g.top), (c -= g.left), (u = c + m), (i.scrollBarWidth = i.scrollBarWidth || n(h)), (m -= i.scrollBarWidth);
            }
            return (d.tolerance = ~~Math.round(parseFloat(d.tolerance))), d.tolerance < 0 && (d.tolerance = f + d.tolerance), Math.abs(c) >= m ? p : (p = d.tolerance ? !!(s <= d.tolerance && l >= d.tolerance) : !!(l > 0 && f >= s));
        }
        String.prototype.hasOwnProperty("trim") ||
            (String.prototype.trim = function () {
                return this.replace(/^\s*(.*?)\s*$/, "$1");
            });
        var r = function (e) {
            if ((1 === arguments.length && "function" == typeof e && (e = [e]), !(e instanceof Array))) throw new SyntaxError("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions");
            for (var n = 0; n < e.length; n++)
                if ("function" == typeof e[n]) for (var i = 0; i < this.length; i++) e[n].call(t(this[i]));
                else console.warn("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions"), console.warn("isInViewport: Ignoring non-function values in array and moving on");
            return this;
        };
        (t.fn["do"] = function (t) {
            return console.warn("isInViewport: .do causes issues in IE and some browsers since its a reserved. Use $.fn.run instead i.e., $(el).run(fn)."), r(t);
        }),
            (t.fn.run = r),
            t.extend(t.expr[":"], {
                "in-viewport": function (t, e, n) {
                    if (n[3]) {
                        var r = n[3].split(",");
                        return 1 === r.length && isNaN(r[0]) && ((r[1] = r[0]), (r[0] = void 0)), i(t, { tolerance: r[0] ? r[0].trim() : void 0, viewport: r[1] ? r[1].trim() : void 0 });
                    }
                    return i(t);
                },
            });
    })(window.jQuery, window),
    (ty.anonkun = {}),
    (ty.chat = angular.module("chat", [])),
    angular.module("metaTags", []).directive("metaTags", [
        "$rootScope",
        function (t) {
            return {
                restrict: "AE",
                priority: 100,
                link: function (t, e, n) {
                    var i = {
                            title: { property: "og:title", name: "twitter:title", itemprop: "name" },
                            description: { property: "og:description", name: "twitter:description", itemprop: "description" },
                            image: { property: "og:image", name: "twitter:image:src", itemprop: "name" },
                            type: { property: "og:type" },
                            twitterCreator: { name: "twitter:creator" },
                            twitterPublisherHandle: { name: "twitter:site" },
                            section: { property: "article:section" },
                            tag: { property: "article:tag" },
                            siteName: { property: "og:site_name" },
                            fbadmins: { property: "fb:admins" },
                        },
                        r = function () {
                            var e = $("head meta[name=description]"),
                                i = t.$eval(n.description);
                            e.length < 1 ? $('<meta name="description" content="' + i + '">').appendTo("head") : e.attr("content", i);
                        };
                    r(),
                        _.each(i, function (e, i) {
                            var r = n[i];
                            r &&
                                "undefined" != r &&
                                ((r = t.$eval(n[i])),
                                _.each(e, function (t, e) {
                                    var n = $("head link[" + e + '="' + t + '"]');
                                    n.length < 1 ? $("<link " + e + '="' + t + '" content="' + r + '">').appendTo("head") : n.attr("content", r);
                                }));
                        });
                },
            };
        },
    ]),
    (function () {
        var t = {},
            e = null,
            n = ty.settings.favicon,
            i = document.title,
            r = null,
            o = null,
            a = {},
            s = { width: 7, height: 9, font: "10px arial", colour: "#ffffff", background: "#F03D25", fallback: !0, abbreviate: !0 },
            l = (function () {
                var t = navigator.userAgent.toLowerCase();
                return function (e) {
                    return -1 !== t.indexOf(e);
                };
            })(),
            c = { ie: l("msie"), chrome: l("chrome"), webkit: l("chrome") || l("safari"), safari: l("safari") && !l("chrome"), mozilla: l("mozilla") && !l("chrome") && !l("safari") },
            u = function () {
                for (var t = document.getElementsByTagName("link"), e = document.getElementsByTagName("head")[0], n = 0, i = t.length; i > n; n++) {
                    var r = "undefined" != typeof t[n];
                    r && (t[n].getAttribute("rel") || "").match(/\bicon\b/) && e.removeChild(t[n]);
                }
            },
            d = function () {
                return o || ((o = document.createElement("canvas")), (o.width = 16), (o.height = 16)), o;
            },
            p = function (t) {
                u();
                var e = document.createElement("link");
                (e.type = "image/x-icon"), (e.rel = "icon"), (e.href = t), document.getElementsByTagName("head")[0].appendChild(e);
            },
            h = function (t, e) {
                if (!d().getContext || c.ie || c.safari || "force" === a.fallback) return f(t);
                var i = d().getContext("2d"),
                    e = e || "#000000",
                    o = n;
                (r = new Image()),
                    (r.onload = function () {
                        i.clearRect(0, 0, 16, 16), i.drawImage(r, 0, 0, r.width, r.height, 0, 0, 16, 16), (t + "").length > 0 && m(i, t, e), v();
                    }),
                    (r.src = o);
            },
            f = function (t) {
                a.fallback && ((t + "").length > 0 ? (document.title = "(" + t + ") " + i) : (document.title = i));
            },
            m = function (t, e, n) {
                "number" == typeof e && e > 99 && a.abbreviate && (e = g(e));
                var i = (e + "").length - 1,
                    r = a.width + 6 * i,
                    o = 16 - r,
                    s = 16 - a.height;
                (t.font = (c.webkit ? "bold " : "") + a.font),
                    (t.fillStyle = a.background),
                    (t.strokeStyle = a.background),
                    (t.lineWidth = 1),
                    t.fillRect(o, s, r - 1, a.height),
                    t.beginPath(),
                    t.moveTo(o - 0.5, s + 1),
                    t.lineTo(o - 0.5, 15),
                    t.stroke(),
                    t.beginPath(),
                    t.moveTo(15.5, s + 1),
                    t.lineTo(15.5, 15),
                    t.stroke(),
                    t.beginPath(),
                    (t.strokeStyle = "rgba(0,0,0,0.3)"),
                    t.moveTo(o, 16),
                    t.lineTo(15, 16),
                    t.stroke(),
                    (t.fillStyle = a.colour),
                    (t.textAlign = "right"),
                    (t.textBaseline = "top"),
                    t.fillText(e, 15, c.mozilla ? 7 : 6);
            },
            v = function () {
                d().getContext && p(d().toDataURL());
            },
            g = function (t) {
                for (
                    var e = [
                            ["G", 1e9],
                            ["M", 1e6],
                            ["k", 1e3],
                        ],
                        n = 0;
                    n < e.length;
                    ++n
                )
                    if (t >= e[n][1]) {
                        t = y(t / e[n][1]) + e[n][0];
                        break;
                    }
                return t;
            },
            y = function (t, e) {
                var n = new Number(t);
                return n.toFixed(e);
            };
        (t.setOptions = function (t) {
            a = {};
            for (var e in s) a[e] = t.hasOwnProperty(e) ? t[e] : s[e];
            return this;
        }),
            (t.setImage = function (t) {
                return (e = t), v(), this;
            }),
            (t.setBubble = function (t, e) {
                return (t = t || ""), h(t, e), this;
            }),
            (t.reset = function () {
                p(n);
            }),
            t.setOptions(s),
            (window.Tinycon = t);
    })();
var pageVisibility = _getHiddenProp();
!(function (t) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = t();
    else if ("function" == typeof define && define.amd) define([], t);
    else {
        var e;
        (e = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this), (e.socketCluster = t());
    }
})(function () {
    var define, module, exports;
    return (function t(e, n, i) {
        function r(a, s) {
            if (!n[a]) {
                if (!e[a]) {
                    var l = "function" == typeof require && require;
                    if (!s && l) return l(a, !0);
                    if (o) return o(a, !0);
                    var c = new Error("Cannot find module '" + a + "'");
                    throw ((c.code = "MODULE_NOT_FOUND"), c);
                }
                var u = (n[a] = { exports: {} });
                e[a][0].call(
                    u.exports,
                    function (t) {
                        var n = e[a][1][t];
                        return r(n ? n : t);
                    },
                    u,
                    u.exports,
                    t,
                    e,
                    n,
                    i
                );
            }
            return n[a].exports;
        }
        for (var o = "function" == typeof require && require, a = 0; a < i.length; a++) r(i[a]);
        return r;
    })(
        {
            1: [
                function (t, e, n) {
                    (function (t) {
                        var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
                            i = function (t) {
                                for (var e = new Uint8Array(t), i = e.length, r = "", o = 0; i > o; o += 3)
                                    (r += n[e[o] >> 2]), (r += n[((3 & e[o]) << 4) | (e[o + 1] >> 4)]), (r += n[((15 & e[o + 1]) << 2) | (e[o + 2] >> 6)]), (r += n[63 & e[o + 2]]);
                                return i % 3 === 2 ? (r = r.substring(0, r.length - 1) + "=") : i % 3 === 1 && (r = r.substring(0, r.length - 2) + "=="), r;
                            },
                            r = function (e, n) {
                                if (t.ArrayBuffer && n instanceof t.ArrayBuffer) return { base64: !0, data: i(n) };
                                if (t.Buffer) {
                                    if (n instanceof t.Buffer) return { base64: !0, data: n.toString("base64") };
                                    if (n && "Buffer" == n.type && n.data instanceof Array) {
                                        var r;
                                        return (r = t.Buffer.from ? t.Buffer.from(n.data) : new t.Buffer(n.data)), { base64: !0, data: r.toString("base64") };
                                    }
                                }
                                return n;
                            };
                        (e.exports.decode = function (t) {
                            if (null == t) return null;
                            var e = t.toString();
                            try {
                                return JSON.parse(e);
                            } catch (n) {}
                            return e;
                        }),
                            (e.exports.encode = function (t) {
                                return JSON.stringify(t, r);
                            });
                    }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
                },
                {},
            ],
            2: [
                function (t, e, n) {
                    var i = t("./lib/scsocket"),
                        r = t("./lib/scsocketcreator");
                    (e.exports.SCSocketCreator = r),
                        (e.exports.SCSocket = i),
                        (e.exports.SCEmitter = t("sc-emitter").SCEmitter),
                        (e.exports.connect = function (t) {
                            return r.connect(t);
                        }),
                        (e.exports.destroy = function (t) {
                            return r.destroy(t);
                        }),
                        (e.exports.version = "5.0.18");
                },
                { "./lib/scsocket": 5, "./lib/scsocketcreator": 6, "sc-emitter": 15 },
            ],
            3: [
                function (t, e, n) {
                    (function (t) {
                        var n = function () {
                            this._internalStorage = {};
                        };
                        (n.prototype._isLocalStorageEnabled = function () {
                            var e;
                            try {
                                t.localStorage, t.localStorage.setItem("__scLocalStorageTest", 1), t.localStorage.removeItem("__scLocalStorageTest");
                            } catch (n) {
                                e = n;
                            }
                            return !e;
                        }),
                            (n.prototype.saveToken = function (e, n, i, r) {
                                this._isLocalStorageEnabled() && t.localStorage ? t.localStorage.setItem(e, n) : (this._internalStorage[e] = n), r && r(null, n);
                            }),
                            (n.prototype.removeToken = function (e, n) {
                                var i;
                                this.loadToken(e, function (t, e) {
                                    i = e;
                                }),
                                    this._isLocalStorageEnabled() && t.localStorage && t.localStorage.removeItem(e),
                                    delete this._internalStorage[e],
                                    n && n(null, i);
                            }),
                            (n.prototype.loadToken = function (e, n) {
                                var i;
                                (i = this._isLocalStorageEnabled() && t.localStorage ? t.localStorage.getItem(e) : this._internalStorage[e] || null), n(null, i);
                            }),
                            (e.exports.AuthEngine = n);
                    }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
                },
                {},
            ],
            4: [
                function (t, e, n) {
                    var i = t("sc-errors"),
                        r = i.InvalidActionError,
                        o = function (t, e) {
                            (this.socket = t), (this.id = e), (this.sent = !1);
                        };
                    (o.prototype._respond = function (t) {
                        if (this.sent) throw new r("Response " + this.id + " has already been sent");
                        (this.sent = !0), this.socket.send(this.socket.encode(t));
                    }),
                        (o.prototype.end = function (t) {
                            if (this.id) {
                                var e = { rid: this.id };
                                void 0 !== t && (e.data = t), this._respond(e);
                            }
                        }),
                        (o.prototype.error = function (t, e) {
                            if (this.id) {
                                var n = i.dehydrateError(t),
                                    r = { rid: this.id, error: n };
                                void 0 !== e && (r.data = e), this._respond(r);
                            }
                        }),
                        (o.prototype.callback = function (t, e) {
                            t ? this.error(t, e) : this.end(e);
                        }),
                        (e.exports.Response = o);
                },
                { "sc-errors": 17 },
            ],
            5: [
                function (t, e, n) {
                    (function (n, i) {
                        var r = t("sc-emitter").SCEmitter,
                            o = t("sc-channel").SCChannel,
                            a = (t("./response").Response, t("./auth").AuthEngine),
                            s = t("sc-formatter"),
                            l = t("./sctransport").SCTransport,
                            c = t("querystring"),
                            u = t("linked-list"),
                            d = t("base-64"),
                            p = t("sc-errors"),
                            h = p.InvalidArgumentsError,
                            f = p.InvalidMessageError,
                            m = p.SocketProtocolError,
                            v = p.TimeoutError,
                            g = "undefined" != typeof window,
                            y = function (t) {
                                var e = this;
                                r.call(this),
                                    (this.id = null),
                                    (this.state = this.CLOSED),
                                    (this.authState = this.PENDING),
                                    (this.signedAuthToken = null),
                                    (this.authToken = null),
                                    (this.pendingReconnect = !1),
                                    (this.pendingReconnectTimeout = null),
                                    (this.pendingConnectCallback = !1),
                                    (this.connectTimeout = t.connectTimeout),
                                    (this.ackTimeout = t.ackTimeout),
                                    (this.channelPrefix = t.channelPrefix || null),
                                    (this.disconnectOnUnload = null == t.disconnectOnUnload ? !0 : t.disconnectOnUnload),
                                    (this.pingTimeout = this.ackTimeout);
                                var i = Math.pow(2, 31) - 1,
                                    o = function (t) {
                                        if (e[t] > i) throw new h("The " + t + " value provided exceeded the maximum amount allowed");
                                    };
                                if (
                                    (o("connectTimeout"),
                                    o("ackTimeout"),
                                    o("pingTimeout"),
                                    (this._localEvents = {
                                        connect: 1,
                                        connectAbort: 1,
                                        disconnect: 1,
                                        message: 1,
                                        error: 1,
                                        raw: 1,
                                        fail: 1,
                                        kickOut: 1,
                                        subscribe: 1,
                                        unsubscribe: 1,
                                        subscribeStateChange: 1,
                                        authStateChange: 1,
                                        authenticate: 1,
                                        deauthenticate: 1,
                                        removeAuthToken: 1,
                                        subscribeRequest: 1,
                                    }),
                                    (this.connectAttempts = 0),
                                    (this._emitBuffer = new u()),
                                    (this._channels = {}),
                                    (this.options = t),
                                    (this._cid = 1),
                                    (this.options.callIdGenerator = function () {
                                        return e._callIdGenerator();
                                    }),
                                    this.options.autoReconnect)
                                ) {
                                    null == this.options.autoReconnectOptions && (this.options.autoReconnectOptions = {});
                                    var l = this.options.autoReconnectOptions;
                                    null == l.initialDelay && (l.initialDelay = 1e4), null == l.randomness && (l.randomness = 1e4), null == l.multiplier && (l.multiplier = 1.5), null == l.maxDelay && (l.maxDelay = 6e4);
                                }
                                if (
                                    (null == this.options.subscriptionRetryOptions && (this.options.subscriptionRetryOptions = {}),
                                    this.options.authEngine ? (this.auth = this.options.authEngine) : (this.auth = new a()),
                                    this.options.codecEngine ? (this.codec = this.options.codecEngine) : (this.codec = s),
                                    (this.options.path = this.options.path.replace(/\/$/, "") + "/"),
                                    (this.options.query = t.query || {}),
                                    "string" == typeof this.options.query && (this.options.query = c.parse(this.options.query)),
                                    this.connect(),
                                    (this._channelEmitter = new r()),
                                    g && this.disconnectOnUnload)
                                ) {
                                    var d = function () {
                                        e.disconnect();
                                    };
                                    n.attachEvent ? n.attachEvent("onunload", d) : n.addEventListener && n.addEventListener("beforeunload", d, !1);
                                }
                            };
                        (y.prototype = Object.create(r.prototype)),
                            (y.CONNECTING = y.prototype.CONNECTING = l.prototype.CONNECTING),
                            (y.OPEN = y.prototype.OPEN = l.prototype.OPEN),
                            (y.CLOSED = y.prototype.CLOSED = l.prototype.CLOSED),
                            (y.AUTHENTICATED = y.prototype.AUTHENTICATED = "authenticated"),
                            (y.UNAUTHENTICATED = y.prototype.UNAUTHENTICATED = "unauthenticated"),
                            (y.PENDING = y.prototype.PENDING = "pending"),
                            (y.ignoreStatuses = p.socketProtocolIgnoreStatuses),
                            (y.errorStatuses = p.socketProtocolErrorStatuses),
                            (y.prototype._privateEventHandlerMap = {
                                "#publish": function (t) {
                                    var e = this._undecorateChannelName(t.channel),
                                        n = this.isSubscribed(e, !0);
                                    n && this._channelEmitter.emit(e, t.data);
                                },
                                "#kickOut": function (t) {
                                    var e = this._undecorateChannelName(t.channel),
                                        n = this._channels[e];
                                    n && (r.prototype.emit.call(this, "kickOut", t.message, e), n.emit("kickOut", t.message, e), this._triggerChannelUnsubscribe(n));
                                },
                                "#setAuthToken": function (t, e) {
                                    var n = this;
                                    if (t) {
                                        var i = function (i) {
                                            i ? (e.error(i), n._onSCError(i)) : (n._changeToAuthenticatedState(t.token), e.end());
                                        };
                                        this.auth.saveToken(this.options.authTokenName, t.token, {}, i);
                                    } else e.error(new f("No token data provided by #setAuthToken event"));
                                },
                                "#removeAuthToken": function (t, e) {
                                    var n = this;
                                    this.auth.removeToken(this.options.authTokenName, function (t, i) {
                                        t ? (e.error(t), n._onSCError(t)) : (r.prototype.emit.call(n, "removeAuthToken", i), n._changeToUnauthenticatedState(), e.end());
                                    });
                                },
                                "#disconnect": function (t) {
                                    this.transport.close(t.code, t.data);
                                },
                            }),
                            (y.prototype._callIdGenerator = function () {
                                return this._cid++;
                            }),
                            (y.prototype.getState = function () {
                                return this.state;
                            }),
                            (y.prototype.getBytesReceived = function () {
                                return this.transport.getBytesReceived();
                            }),
                            (y.prototype.deauthenticate = function (t) {
                                var e = this;
                                this.auth.removeToken(this.options.authTokenName, function (n, i) {
                                    n ? e._onSCError(n) : (e.emit("#removeAuthToken"), r.prototype.emit.call(e, "removeAuthToken", i), e._changeToUnauthenticatedState()), t && t(n);
                                });
                            }),
                            (y.prototype.connect = y.prototype.open = function () {
                                var t = this;
                                this.state == this.CLOSED &&
                                    ((this.pendingReconnect = !1),
                                    (this.pendingReconnectTimeout = null),
                                    clearTimeout(this._reconnectTimeoutRef),
                                    (this.state = this.CONNECTING),
                                    this._changeToPendingAuthState(),
                                    this.transport && this.transport.off(),
                                    (this.transport = new l(this.auth, this.codec, this.options)),
                                    this.transport.on("open", function (e) {
                                        (t.state = t.OPEN), t._onSCOpen(e);
                                    }),
                                    this.transport.on("error", function (e) {
                                        t._onSCError(e);
                                    }),
                                    this.transport.on("close", function (e, n) {
                                        (t.state = t.CLOSED), t._onSCClose(e, n);
                                    }),
                                    this.transport.on("openAbort", function (e, n) {
                                        (t.state = t.CLOSED), t._onSCClose(e, n, !0);
                                    }),
                                    this.transport.on("event", function (e, n, i) {
                                        t._onSCEvent(e, n, i);
                                    }));
                            }),
                            (y.prototype.reconnect = function () {
                                this.disconnect(), this.connect();
                            }),
                            (y.prototype.disconnect = function (t, e) {
                                if (((t = t || 1e3), this.state == this.OPEN)) {
                                    var n = { code: t, data: e };
                                    this.transport.emit("#disconnect", n), this.transport.close(t, e);
                                } else this.state == this.CONNECTING ? this.transport.close(t, e) : ((this.pendingReconnect = !1), (this.pendingReconnectTimeout = null), clearTimeout(this._reconnectTimeoutRef));
                            }),
                            (y.prototype._changeToPendingAuthState = function () {
                                if (this.authState != this.PENDING) {
                                    var t = this.authState;
                                    this.authState = this.PENDING;
                                    var e = { oldState: t, newState: this.authState };
                                    r.prototype.emit.call(this, "authStateChange", e);
                                }
                            }),
                            (y.prototype._changeToUnauthenticatedState = function () {
                                if (this.authState != this.UNAUTHENTICATED) {
                                    var t = this.authState;
                                    (this.authState = this.UNAUTHENTICATED), (this.signedAuthToken = null), (this.authToken = null);
                                    var e = { oldState: t, newState: this.authState };
                                    r.prototype.emit.call(this, "authStateChange", e), t == this.AUTHENTICATED && r.prototype.emit.call(this, "deauthenticate"), r.prototype.emit.call(this, "authTokenChange", this.signedAuthToken);
                                }
                            }),
                            (y.prototype._changeToAuthenticatedState = function (t) {
                                if (((this.signedAuthToken = t), (this.authToken = this._extractAuthTokenData(t)), this.authState != this.AUTHENTICATED)) {
                                    var e = this.authState;
                                    this.authState = this.AUTHENTICATED;
                                    var n = { oldState: e, newState: this.authState, signedAuthToken: t, authToken: this.authToken };
                                    this.processPendingSubscriptions(), r.prototype.emit.call(this, "authStateChange", n), r.prototype.emit.call(this, "authenticate", t);
                                }
                                r.prototype.emit.call(this, "authTokenChange", t);
                            }),
                            (y.prototype.decodeBase64 = function (t) {
                                var e;
                                if ("undefined" == typeof i) e = n.atob ? n.atob(t) : d.decode(t);
                                else {
                                    var r = new i(t, "base64");
                                    e = r.toString("utf8");
                                }
                                return e;
                            }),
                            (y.prototype.encodeBase64 = function (t) {
                                var e;
                                if ("undefined" == typeof i) e = n.btoa ? n.btoa(t) : d.encode(t);
                                else {
                                    var r = new i(t, "utf8");
                                    e = r.toString("base64");
                                }
                                return e;
                            }),
                            (y.prototype._extractAuthTokenData = function (t) {
                                var e = (t || "").split("."),
                                    n = e[1];
                                if (null != n) {
                                    var i = n;
                                    try {
                                        return (i = this.decodeBase64(i)), JSON.parse(i);
                                    } catch (r) {
                                        return i;
                                    }
                                }
                                return null;
                            }),
                            (y.prototype.getAuthToken = function () {
                                return this.authToken;
                            }),
                            (y.prototype.getSignedAuthToken = function () {
                                return this.signedAuthToken;
                            }),
                            (y.prototype.authenticate = function (t, e) {
                                var n = this;
                                this._changeToPendingAuthState(),
                                    this.emit("#authenticate", t, function (i, r) {
                                        r && r.authError && (r.authError = p.hydrateError(r.authError)),
                                            i
                                                ? (n._changeToUnauthenticatedState(), e && e(i, r))
                                                : n.auth.saveToken(n.options.authTokenName, t, {}, function (i) {
                                                      e && e(i, r), i ? (n._changeToUnauthenticatedState(), n._onSCError(i)) : r.isAuthenticated ? n._changeToAuthenticatedState(t) : n._changeToUnauthenticatedState();
                                                  });
                                    });
                            }),
                            (y.prototype._tryReconnect = function (t) {
                                var e,
                                    n = this,
                                    i = this.connectAttempts++,
                                    r = this.options.autoReconnectOptions;
                                if (null == t || i > 0) {
                                    var o = Math.round(r.initialDelay + (r.randomness || 0) * Math.random());
                                    e = Math.round(o * Math.pow(r.multiplier, i));
                                } else e = t;
                                e > r.maxDelay && (e = r.maxDelay),
                                    clearTimeout(this._reconnectTimeoutRef),
                                    (this.pendingReconnect = !0),
                                    (this.pendingReconnectTimeout = e),
                                    (this._reconnectTimeoutRef = setTimeout(function () {
                                        n.connect();
                                    }, e));
                            }),
                            (y.prototype._onSCOpen = function (t) {
                                var e = this;
                                t
                                    ? ((this.id = t.id),
                                      (this.pingTimeout = t.pingTimeout),
                                      (this.transport.pingTimeout = this.pingTimeout),
                                      t.isAuthenticated ? this._changeToAuthenticatedState(t.authToken) : this._changeToUnauthenticatedState())
                                    : this._changeToUnauthenticatedState(),
                                    (this.connectAttempts = 0),
                                    this.options.autoProcessSubscriptions ? this.processPendingSubscriptions() : (this.pendingConnectCallback = !0),
                                    r.prototype.emit.call(this, "connect", t, function () {
                                        e.processPendingSubscriptions();
                                    }),
                                    this._flushEmitBuffer();
                            }),
                            (y.prototype._onSCError = function (t) {
                                var e = this;
                                setTimeout(function () {
                                    if (e.listeners("error").length < 1) throw t;
                                    r.prototype.emit.call(e, "error", t);
                                }, 0);
                            }),
                            (y.prototype._suspendSubscriptions = function () {
                                var t, e;
                                for (var n in this._channels)
                                    this._channels.hasOwnProperty(n) && ((t = this._channels[n]), (e = t.state == t.SUBSCRIBED || t.state == t.PENDING ? t.PENDING : t.UNSUBSCRIBED), this._triggerChannelUnsubscribe(t, e));
                            }),
                            (y.prototype._onSCClose = function (t, e, n) {
                                var i = this;
                                if (
                                    ((this.id = null),
                                    this.transport && this.transport.off(),
                                    (this.pendingReconnect = !1),
                                    (this.pendingReconnectTimeout = null),
                                    clearTimeout(this._reconnectTimeoutRef),
                                    this._changeToPendingAuthState(),
                                    this._suspendSubscriptions(),
                                    this.options.autoReconnect && (4e3 == t || 4001 == t || 1005 == t ? this._tryReconnect(0) : 1e3 != t && 4500 > t && this._tryReconnect()),
                                    n ? r.prototype.emit.call(i, "connectAbort", t, e) : r.prototype.emit.call(i, "disconnect", t, e),
                                    !y.ignoreStatuses[t])
                                ) {
                                    var o;
                                    o = e ? "Socket connection failed: " + e : "Socket connection failed for unknown reasons";
                                    var a = new m(y.errorStatuses[t] || o, t);
                                    this._onSCError(a);
                                }
                            }),
                            (y.prototype._onSCEvent = function (t, e, n) {
                                var i = this._privateEventHandlerMap[t];
                                i
                                    ? i.call(this, e, n)
                                    : r.prototype.emit.call(this, t, e, function () {
                                          n && n.callback.apply(n, arguments);
                                      });
                            }),
                            (y.prototype.decode = function (t) {
                                return this.transport.decode(t);
                            }),
                            (y.prototype.encode = function (t) {
                                return this.transport.encode(t);
                            }),
                            (y.prototype._flushEmitBuffer = function () {
                                for (var t, e = this._emitBuffer.head; e; ) {
                                    t = e.next;
                                    var n = e.data;
                                    e.detach(), this.transport.emitRaw(n), (e = t);
                                }
                            }),
                            (y.prototype._handleEventAckTimeout = function (t, e) {
                                e && e.detach();
                                var n = new v("Event response for '" + t.event + "' timed out"),
                                    i = t.callback;
                                i && (delete t.callback, i.call(t, n, t));
                            }),
                            (y.prototype._emit = function (t, e, n) {
                                var i = this;
                                this.state == this.CLOSED && this.connect();
                                var r = { event: t, data: e, callback: n },
                                    o = new u.Item();
                                (o.data = r),
                                    (r.timeout = setTimeout(function () {
                                        i._handleEventAckTimeout(r, o);
                                    }, this.ackTimeout)),
                                    this._emitBuffer.append(o),
                                    this.state == this.OPEN && this._flushEmitBuffer();
                            }),
                            (y.prototype.send = function (t) {
                                this.transport.send(t);
                            }),
                            (y.prototype.emit = function (t, e, n) {
                                null == this._localEvents[t] ? this._emit(t, e, n) : r.prototype.emit.call(this, t, e);
                            }),
                            (y.prototype.publish = function (t, e, n) {
                                var i = { channel: this._decorateChannelName(t), data: e };
                                this.emit("#publish", i, n);
                            }),
                            (y.prototype._triggerChannelSubscribe = function (t, e) {
                                var n = t.name;
                                if (t.state != t.SUBSCRIBED) {
                                    var i = t.state;
                                    t.state = t.SUBSCRIBED;
                                    var o = { channel: n, oldState: i, newState: t.state, subscriptionOptions: e };
                                    t.emit("subscribeStateChange", o), t.emit("subscribe", n, e), r.prototype.emit.call(this, "subscribeStateChange", o), r.prototype.emit.call(this, "subscribe", n, e);
                                }
                            }),
                            (y.prototype._triggerChannelSubscribeFail = function (t, e, n) {
                                var i = e.name,
                                    o = !e.waitForAuth || this.authState == this.AUTHENTICATED;
                                e.state != e.UNSUBSCRIBED && o && ((e.state = e.UNSUBSCRIBED), e.emit("subscribeFail", t, i, n), r.prototype.emit.call(this, "subscribeFail", t, i, n));
                            }),
                            (y.prototype._cancelPendingSubscribeCallback = function (t) {
                                null != t._pendingSubscriptionCid && (this.transport.cancelPendingResponse(t._pendingSubscriptionCid), delete t._pendingSubscriptionCid);
                            }),
                            (y.prototype._decorateChannelName = function (t) {
                                return this.channelPrefix && (t = this.channelPrefix + t), t;
                            }),
                            (y.prototype._undecorateChannelName = function (t) {
                                return this.channelPrefix && 0 == t.indexOf(this.channelPrefix) ? t.replace(this.channelPrefix, "") : t;
                            }),
                            (y.prototype._trySubscribe = function (t) {
                                var e = this,
                                    n = !t.waitForAuth || this.authState == this.AUTHENTICATED;
                                if (this.state == this.OPEN && !this.pendingConnectCallback && null == t._pendingSubscriptionCid && n) {
                                    var i = { noTimeout: !0 },
                                        o = { channel: this._decorateChannelName(t.name) };
                                    t.waitForAuth && ((i.waitForAuth = !0), (o.waitForAuth = i.waitForAuth)),
                                        t.data && (o.data = t.data),
                                        (t._pendingSubscriptionCid = this.transport.emit("#subscribe", o, i, function (n) {
                                            delete t._pendingSubscriptionCid, n ? e._triggerChannelSubscribeFail(n, t, o) : e._triggerChannelSubscribe(t, o);
                                        })),
                                        r.prototype.emit.call(this, "subscribeRequest", t.name, o);
                                }
                            }),
                            (y.prototype.subscribe = function (t, e) {
                                var n = this._channels[t];
                                return n ? e && n.setOptions(e) : ((n = new o(t, this, e)), (this._channels[t] = n)), n.state == n.UNSUBSCRIBED && ((n.state = n.PENDING), this._trySubscribe(n)), n;
                            }),
                            (y.prototype._triggerChannelUnsubscribe = function (t, e) {
                                var n = t.name,
                                    i = t.state;
                                if ((e ? (t.state = e) : (t.state = t.UNSUBSCRIBED), this._cancelPendingSubscribeCallback(t), i == t.SUBSCRIBED)) {
                                    var o = { channel: n, oldState: i, newState: t.state };
                                    t.emit("subscribeStateChange", o), t.emit("unsubscribe", n), r.prototype.emit.call(this, "subscribeStateChange", o), r.prototype.emit.call(this, "unsubscribe", n);
                                }
                            }),
                            (y.prototype._tryUnsubscribe = function (t) {
                                if (this.state == this.OPEN) {
                                    var e = { noTimeout: !0 };
                                    this._cancelPendingSubscribeCallback(t);
                                    var n = this._decorateChannelName(t.name);
                                    this.transport.emit("#unsubscribe", n, e);
                                }
                            }),
                            (y.prototype.unsubscribe = function (t) {
                                var e = this._channels[t];
                                e && e.state != e.UNSUBSCRIBED && (this._triggerChannelUnsubscribe(e), this._tryUnsubscribe(e));
                            }),
                            (y.prototype.channel = function (t, e) {
                                var n = this._channels[t];
                                return n || ((n = new o(t, this, e)), (this._channels[t] = n)), n;
                            }),
                            (y.prototype.destroyChannel = function (t) {
                                var e = this._channels[t];
                                e.unwatch(), e.unsubscribe(), delete this._channels[t];
                            }),
                            (y.prototype.subscriptions = function (t) {
                                var e,
                                    n,
                                    i = [];
                                for (var r in this._channels) this._channels.hasOwnProperty(r) && ((e = this._channels[r]), (n = t ? e && (e.state == e.SUBSCRIBED || e.state == e.PENDING) : e && e.state == e.SUBSCRIBED), n && i.push(r));
                                return i;
                            }),
                            (y.prototype.isSubscribed = function (t, e) {
                                var n = this._channels[t];
                                return e ? !!n && (n.state == n.SUBSCRIBED || n.state == n.PENDING) : !!n && n.state == n.SUBSCRIBED;
                            }),
                            (y.prototype.processPendingSubscriptions = function () {
                                var t = this;
                                this.pendingConnectCallback = !1;
                                for (var e in this._channels)
                                    this._channels.hasOwnProperty(e) &&
                                        !(function (e) {
                                            e.state == e.PENDING && t._trySubscribe(e);
                                        })(this._channels[e]);
                            }),
                            (y.prototype.watch = function (t, e) {
                                if ("function" != typeof e) throw new h("No handler function was provided");
                                this._channelEmitter.on(t, e);
                            }),
                            (y.prototype.unwatch = function (t, e) {
                                e ? this._channelEmitter.removeListener(t, e) : this._channelEmitter.removeAllListeners(t);
                            }),
                            (y.prototype.watchers = function (t) {
                                return this._channelEmitter.listeners(t);
                            }),
                            (e.exports = y);
                    }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, t("buffer").Buffer));
                },
                { "./auth": 3, "./response": 4, "./sctransport": 7, "base-64": 9, buffer: 19, "linked-list": 13, querystring: 24, "sc-channel": 14, "sc-emitter": 15, "sc-errors": 17, "sc-formatter": 1 },
            ],
            6: [
                function (t, e, n) {
                    (function (n) {
                        function i(t) {
                            var e = t.secure ? "https://" : "http://",
                                n = "";
                            if (t.query)
                                if ("string" == typeof t.query) n = t.query;
                                else {
                                    var i = [],
                                        r = t.query;
                                    for (var o in r) r.hasOwnProperty(o) && i.push(o + "=" + r[o]);
                                    i.length && (n = "?" + i.join("&"));
                                }
                            return e + t.hostname + ":" + t.port + t.path + n;
                        }
                        function r() {
                            return n.location && "https:" == location.protocol;
                        }
                        function o(t, e) {
                            var i = null == t.secure ? e : t.secure;
                            return t.port || (n.location && location.port ? location.port : i ? 443 : 80);
                        }
                        function a(t) {
                            t = t || {};
                            var e = r(),
                                a = {
                                    port: o(t, e),
                                    hostname: n.location && location.hostname,
                                    path: "/socketcluster/",
                                    secure: e,
                                    autoReconnect: !0,
                                    autoProcessSubscriptions: !0,
                                    connectTimeout: 2e4,
                                    ackTimeout: 1e4,
                                    timestampRequests: !1,
                                    timestampParam: "t",
                                    authEngine: null,
                                    authTokenName: "socketCluster.authToken",
                                    binaryType: "arraybuffer",
                                    multiplex: !0,
                                };
                            for (var s in t) t.hasOwnProperty(s) && (a[s] = t[s]);
                            var u = i(a);
                            return a.multiplex === !1 ? new l(a) : (c[u] ? c[u].connect() : (c[u] = new l(a)), c[u]);
                        }
                        function s(t) {
                            t = t || {};
                            var e = r(),
                                a = { port: o(t, e), hostname: n.location && location.hostname, path: "/socketcluster/", secure: e };
                            for (var s in t) t.hasOwnProperty(s) && (a[s] = t[s]);
                            var l = i(a);
                            delete c[l];
                        }
                        var l = t("./scsocket"),
                            c = {};
                        e.exports = { connect: a, destroy: s };
                    }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
                },
                { "./scsocket": 5 },
            ],
            7: [
                function (t, e, n) {
                    (function (n) {
                        var i,
                            r,
                            o = t("sc-emitter").SCEmitter,
                            a = t("./response").Response,
                            s = t("querystring");
                        n.WebSocket
                            ? ((i = n.WebSocket),
                              (r = function (t, e) {
                                  return new i(t);
                              }))
                            : ((i = t("ws")),
                              (r = function (t, e) {
                                  return new i(t, null, e);
                              }));
                        var l = t("sc-errors"),
                            c = l.TimeoutError,
                            u = function (t, e, n) {
                                (this.state = this.CLOSED),
                                    (this.auth = t),
                                    (this.codec = e),
                                    (this.options = n),
                                    (this.connectTimeout = n.connectTimeout),
                                    (this.pingTimeout = n.ackTimeout),
                                    (this.callIdGenerator = n.callIdGenerator),
                                    (this._pingTimeoutTicker = null),
                                    (this._callbackMap = {}),
                                    this.open();
                            };
                        (u.prototype = Object.create(o.prototype)),
                            (u.CONNECTING = u.prototype.CONNECTING = "connecting"),
                            (u.OPEN = u.prototype.OPEN = "open"),
                            (u.CLOSED = u.prototype.CLOSED = "closed"),
                            (u.prototype.uri = function () {
                                var t = this.options.query || {},
                                    e = this.options.secure ? "wss" : "ws",
                                    n = "";
                                return (
                                    this.options.port && (("wss" == e && 443 != this.options.port) || ("ws" == e && 80 != this.options.port)) && (n = ":" + this.options.port),
                                    this.options.timestampRequests && (t[this.options.timestampParam] = new Date().getTime()),
                                    (t = s.encode(t)),
                                    t.length && (t = "?" + t),
                                    e + "://" + this.options.hostname + n + this.options.path + t
                                );
                            }),
                            (u.prototype.open = function () {
                                var t = this;
                                this.state = this.CONNECTING;
                                var e = this.uri(),
                                    n = r(e, this.options);
                                (n.binaryType = this.options.binaryType),
                                    (this.socket = n),
                                    (n.onopen = function () {
                                        t._onOpen();
                                    }),
                                    (n.onclose = function (e) {
                                        t._onClose(e.code, e.reason);
                                    }),
                                    (n.onmessage = function (e, n) {
                                        t._onMessage(e.data);
                                    }),
                                    (n.onerror = function (e) {
                                        t.state === t.CONNECTING && t._onClose(1006);
                                    }),
                                    (this._connectTimeoutRef = setTimeout(function () {
                                        t._onClose(4007), t.socket.close(4007);
                                    }, this.connectTimeout));
                            }),
                            (u.prototype._onOpen = function () {
                                var t = this;
                                clearTimeout(this._connectTimeoutRef),
                                    this._resetPingTimeout(),
                                    this._handshake(function (e, n) {
                                        e ? (t._onError(e), t._onClose(4003), t.socket.close(4003)) : ((t.state = t.OPEN), o.prototype.emit.call(t, "open", n), t._resetPingTimeout());
                                    });
                            }),
                            (u.prototype._handshake = function (t) {
                                var e = this;
                                this.auth.loadToken(this.options.authTokenName, function (n, i) {
                                    if (n) t(n);
                                    else {
                                        var r = { force: !0 };
                                        e.emit("#handshake", { authToken: i }, r, function (e, n) {
                                            n && ((n.authToken = i), n.authError && (n.authError = l.hydrateError(n.authError))), t(e, n);
                                        });
                                    }
                                });
                            }),
                            (u.prototype._onClose = function (t, e) {
                                delete this.socket.onopen,
                                    delete this.socket.onclose,
                                    delete this.socket.onmessage,
                                    delete this.socket.onerror,
                                    clearTimeout(this._connectTimeoutRef),
                                    this.state == this.OPEN
                                        ? ((this.state = this.CLOSED), o.prototype.emit.call(this, "close", t, e))
                                        : this.state == this.CONNECTING && ((this.state = this.CLOSED), o.prototype.emit.call(this, "openAbort", t, e));
                            }),
                            (u.prototype._onMessage = function (t) {
                                if ((o.prototype.emit.call(this, "event", "message", t), "#1" == t)) this._resetPingTimeout(), this.socket.readyState == this.socket.OPEN && this.socket.send("#2");
                                else {
                                    var e = this.decode(t),
                                        n = e.event;
                                    if (n) {
                                        var i = new a(this, e.cid);
                                        o.prototype.emit.call(this, "event", n, e.data, i);
                                    } else if (null != e.rid) {
                                        var r = this._callbackMap[e.rid];
                                        if (r && (clearTimeout(r.timeout), delete this._callbackMap[e.rid], r.callback)) {
                                            var s = l.hydrateError(e.error);
                                            r.callback(s, e.data);
                                        }
                                    } else o.prototype.emit.call(this, "event", "raw", e);
                                }
                            }),
                            (u.prototype._onError = function (t) {
                                o.prototype.emit.call(this, "error", t);
                            }),
                            (u.prototype._resetPingTimeout = function () {
                                var t = this;
                                new Date().getTime();
                                clearTimeout(this._pingTimeoutTicker),
                                    (this._pingTimeoutTicker = setTimeout(function () {
                                        t._onClose(4e3), t.socket.close(4e3);
                                    }, this.pingTimeout));
                            }),
                            (u.prototype.getBytesReceived = function () {
                                return this.socket.bytesReceived;
                            }),
                            (u.prototype.close = function (t, e) {
                                if (((t = t || 1e3), this.state == this.OPEN)) {
                                    var n = { code: t, data: e };
                                    this.emit("#disconnect", n), this._onClose(t, e), this.socket.close(t);
                                } else this.state == this.CONNECTING && (this._onClose(t, e), this.socket.close(t));
                            }),
                            (u.prototype.emitRaw = function (t) {
                                (t.cid = this.callIdGenerator()), t.callback && (this._callbackMap[t.cid] = t);
                                var e = { event: t.event, data: t.data, cid: t.cid };
                                return this.sendObject(e), t.cid;
                            }),
                            (u.prototype._handleEventAckTimeout = function (t) {
                                var e = "Event response for '" + t.event + "' timed out",
                                    n = new c(e);
                                t.cid && delete this._callbackMap[t.cid];
                                var i = t.callback;
                                delete t.callback, i.call(t, n, t);
                            }),
                            (u.prototype.emit = function (t, e, n, i) {
                                var r,
                                    o,
                                    a = this;
                                i ? ((o = n), (r = i)) : n instanceof Function ? ((o = {}), (r = n)) : (o = n);
                                var s = { event: t, data: e, callback: r };
                                r &&
                                    !o.noTimeout &&
                                    (s.timeout = setTimeout(function () {
                                        a._handleEventAckTimeout(s);
                                    }, this.options.ackTimeout));
                                var l = null;
                                return (this.state == this.OPEN || o.force) && (l = this.emitRaw(s)), l;
                            }),
                            (u.prototype.cancelPendingResponse = function (t) {
                                delete this._callbackMap[t];
                            }),
                            (u.prototype.decode = function (t) {
                                return this.codec.decode(t);
                            }),
                            (u.prototype.encode = function (t) {
                                return this.codec.encode(t);
                            }),
                            (u.prototype.send = function (t) {
                                this.socket.readyState != this.socket.OPEN ? this._onClose(1005) : this.socket.send(t);
                            }),
                            (u.prototype.sendObject = function (t) {
                                var e, n;
                                try {
                                    e = this.encode(t);
                                } catch (i) {
                                    (n = i), this._onError(n);
                                }
                                n || this.send(e);
                            }),
                            (e.exports.SCTransport = u);
                    }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
                },
                { "./response": 4, querystring: 24, "sc-emitter": 15, "sc-errors": 17, ws: 8 },
            ],
            8: [
                function (t, e, n) {
                    function i(t, e, n) {
                        var i;
                        return (i = e ? new o(t, e) : new o(t));
                    }
                    var r;
                    r =
                        "undefined" != typeof WorkerGlobalScope
                            ? self
                            : ("undefined" != typeof window && window) ||
                              (function () {
                                  return this;
                              })();
                    var o = r.WebSocket || r.MozWebSocket;
                    o && (i.prototype = o.prototype), (e.exports = o ? i : null);
                },
                {},
            ],
            9: [
                function (t, e, n) {
                    (function (t) {
                        !(function (i) {
                            var r = "object" == typeof n && n,
                                o = "object" == typeof e && e && e.exports == r && e,
                                a = "object" == typeof t && t;
                            (a.global === a || a.window === a) && (i = a);
                            var s = function (t) {
                                this.message = t;
                            };
                            (s.prototype = new Error()), (s.prototype.name = "InvalidCharacterError");
                            var l = function (t) {
                                    throw new s(t);
                                },
                                c = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
                                u = /[\t\n\f\r ]/g,
                                d = function (t) {
                                    t = String(t).replace(u, "");
                                    var e = t.length;
                                    e % 4 == 0 && ((t = t.replace(/==?$/, "")), (e = t.length)), (e % 4 == 1 || /[^+a-zA-Z0-9/]/.test(t)) && l("Invalid character: the string to be decoded is not correctly encoded.");
                                    for (var n, i, r = 0, o = "", a = -1; ++a < e; ) (i = c.indexOf(t.charAt(a))), (n = r % 4 ? 64 * n + i : i), r++ % 4 && (o += String.fromCharCode(255 & (n >> ((-2 * r) & 6))));
                                    return o;
                                },
                                p = function (t) {
                                    (t = String(t)), /[^\0-\xFF]/.test(t) && l("The string to be encoded contains characters outside of the Latin1 range.");
                                    for (var e, n, i, r, o = t.length % 3, a = "", s = -1, u = t.length - o; ++s < u; )
                                        (e = t.charCodeAt(s) << 16),
                                            (n = t.charCodeAt(++s) << 8),
                                            (i = t.charCodeAt(++s)),
                                            (r = e + n + i),
                                            (a += c.charAt((r >> 18) & 63) + c.charAt((r >> 12) & 63) + c.charAt((r >> 6) & 63) + c.charAt(63 & r));
                                    return (
                                        2 == o
                                            ? ((e = t.charCodeAt(s) << 8), (n = t.charCodeAt(++s)), (r = e + n), (a += c.charAt(r >> 10) + c.charAt((r >> 4) & 63) + c.charAt((r << 2) & 63) + "="))
                                            : 1 == o && ((r = t.charCodeAt(s)), (a += c.charAt(r >> 2) + c.charAt((r << 4) & 63) + "==")),
                                        a
                                    );
                                },
                                h = { encode: p, decode: d, version: "0.1.0" };
                            if ("function" == typeof define && "object" == typeof define.amd && define.amd)
                                define(function () {
                                    return h;
                                });
                            else if (r && !r.nodeType)
                                if (o) o.exports = h;
                                else for (var f in h) h.hasOwnProperty(f) && (r[f] = h[f]);
                            else i.base64 = h;
                        })(this);
                    }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
                },
                {},
            ],
            10: [
                function (t, e, n) {
                    function i(t) {
                        return t ? r(t) : void 0;
                    }
                    function r(t) {
                        for (var e in i.prototype) t[e] = i.prototype[e];
                        return t;
                    }
                    (e.exports = i),
                        (i.prototype.on = i.prototype.addEventListener = function (t, e) {
                            return (this._callbacks = this._callbacks || {}), (this._callbacks["$" + t] = this._callbacks["$" + t] || []).push(e), this;
                        }),
                        (i.prototype.once = function (t, e) {
                            function n() {
                                this.off(t, n), e.apply(this, arguments);
                            }
                            return (n.fn = e), this.on(t, n), this;
                        }),
                        (i.prototype.off = i.prototype.removeListener = i.prototype.removeAllListeners = i.prototype.removeEventListener = function (t, e) {
                            if (((this._callbacks = this._callbacks || {}), 0 == arguments.length)) return (this._callbacks = {}), this;
                            var n = this._callbacks["$" + t];
                            if (!n) return this;
                            if (1 == arguments.length) return delete this._callbacks["$" + t], this;
                            for (var i, r = 0; r < n.length; r++)
                                if (((i = n[r]), i === e || i.fn === e)) {
                                    n.splice(r, 1);
                                    break;
                                }
                            return this;
                        }),
                        (i.prototype.emit = function (t) {
                            this._callbacks = this._callbacks || {};
                            var e = [].slice.call(arguments, 1),
                                n = this._callbacks["$" + t];
                            if (n) {
                                n = n.slice(0);
                                for (var i = 0, r = n.length; r > i; ++i) n[i].apply(this, e);
                            }
                            return this;
                        }),
                        (i.prototype.listeners = function (t) {
                            return (this._callbacks = this._callbacks || {}), this._callbacks["$" + t] || [];
                        }),
                        (i.prototype.hasListeners = function (t) {
                            return !!this.listeners(t).length;
                        });
                },
                {},
            ],
            11: [
                function (require, module, exports) {
                    var cycle = exports;
                    (cycle.decycle = function (t) {
                        "use strict";
                        var e = [],
                            n = [];
                        return (function i(t, r) {
                            var o, a, s;
                            if (!("object" != typeof t || null === t || t instanceof Boolean || t instanceof Date || t instanceof Number || t instanceof RegExp || t instanceof String)) {
                                for (o = 0; o < e.length; o += 1) if (e[o] === t) return { $ref: n[o] };
                                if ((e.push(t), n.push(r), "[object Array]" === Object.prototype.toString.apply(t))) for (s = [], o = 0; o < t.length; o += 1) s[o] = i(t[o], r + "[" + o + "]");
                                else {
                                    s = {};
                                    for (a in t) Object.prototype.hasOwnProperty.call(t, a) && (s[a] = i(t[a], r + "[" + JSON.stringify(a) + "]"));
                                }
                                return s;
                            }
                            return t;
                        })(t, "$");
                    }),
                        (cycle.retrocycle = function retrocycle($) {
                            "use strict";
                            var px = /^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;
                            return (
                                (function rez(value) {
                                    var i, item, name, path;
                                    if (value && "object" == typeof value)
                                        if ("[object Array]" === Object.prototype.toString.apply(value))
                                            for (i = 0; i < value.length; i += 1) (item = value[i]), item && "object" == typeof item && ((path = item.$ref), "string" == typeof path && px.test(path) ? (value[i] = eval(path)) : rez(item));
                                        else for (name in value) "object" == typeof value[name] && ((item = value[name]), item && ((path = item.$ref), "string" == typeof path && px.test(path) ? (value[name] = eval(path)) : rez(item)));
                                })($),
                                $
                            );
                        });
                },
                {},
            ],
            12: [
                function (t, e, n) {
                    "use strict";
                    function i() {
                        return arguments.length ? i.from(arguments) : void 0;
                    }
                    function r() {}
                    var o;
                    o = "An argument without append, prepend, or detach methods was given to `List";
                    var a;
                    (a = i.prototype),
                        (i.of = function () {
                            return i.from.call(this, arguments);
                        }),
                        (i.from = function (t) {
                            var e,
                                n,
                                i,
                                r = new this();
                            if (t && (e = t.length)) for (n = -1; ++n < e; ) (i = t[n]), null !== i && void 0 !== i && r.append(i);
                            return r;
                        }),
                        (a.head = null),
                        (a.tail = null),
                        (a.toArray = function () {
                            for (var t = this.head, e = []; t; ) e.push(t), (t = t.next);
                            return e;
                        }),
                        (a.prepend = function (t) {
                            if (!t) return !1;
                            if (!t.append || !t.prepend || !t.detach) throw new Error(o + "#prepend`.");
                            var e, n;
                            return (e = this), (n = e.head) ? n.prepend(t) : (t.detach(), (t.list = e), (e.head = t), t);
                        }),
                        (a.append = function (t) {
                            if (!t) return !1;
                            if (!t.append || !t.prepend || !t.detach) throw new Error(o + "#append`.");
                            var e, n, i;
                            return (e = this), (i = e.tail) ? i.append(t) : (n = e.head) ? n.append(t) : (t.detach(), (t.list = e), (e.head = t), t);
                        }),
                        (i.Item = r);
                    var s = r.prototype;
                    (s.next = null),
                        (s.prev = null),
                        (s.list = null),
                        (s.detach = function () {
                            var t = this,
                                e = t.list,
                                n = t.prev,
                                i = t.next;
                            return e ? (e.tail === t && (e.tail = n), e.head === t && (e.head = i), e.tail === e.head && (e.tail = null), n && (n.next = i), i && (i.prev = n), (t.prev = t.next = t.list = null), t) : t;
                        }),
                        (s.prepend = function (t) {
                            if (!(t && t.append && t.prepend && t.detach)) throw new Error(o + "Item#prepend`.");
                            var e = this,
                                n = e.list,
                                i = e.prev;
                            return n ? (t.detach(), i && ((t.prev = i), (i.next = t)), (t.next = e), (t.list = n), (e.prev = t), e === n.head && (n.head = t), n.tail || (n.tail = e), t) : !1;
                        }),
                        (s.append = function (t) {
                            if (!(t && t.append && t.prepend && t.detach)) throw new Error(o + "Item#append`.");
                            var e = this,
                                n = e.list,
                                i = e.next;
                            return n ? (t.detach(), i && ((t.next = i), (i.prev = t)), (t.prev = e), (t.list = n), (e.next = t), (e !== n.tail && n.tail) || (n.tail = t), t) : !1;
                        }),
                        (e.exports = i);
                },
                {},
            ],
            13: [
                function (t, e, n) {
                    "use strict";
                    e.exports = t("./_source/linked-list.js");
                },
                { "./_source/linked-list.js": 12 },
            ],
            14: [
                function (t, e, n) {
                    var i = t("sc-emitter").SCEmitter,
                        r = function (t, e, n) {
                            i.call(this),
                                (this.PENDING = "pending"),
                                (this.SUBSCRIBED = "subscribed"),
                                (this.UNSUBSCRIBED = "unsubscribed"),
                                (this.name = t),
                                (this.state = this.UNSUBSCRIBED),
                                (this.client = e),
                                (this.options = n || {}),
                                this.setOptions(this.options);
                        };
                    (r.prototype = Object.create(i.prototype)),
                        (r.prototype.setOptions = function (t) {
                            t || (t = {}), (this.waitForAuth = t.waitForAuth || !1), void 0 !== t.data && (this.data = t.data);
                        }),
                        (r.prototype.getState = function () {
                            return this.state;
                        }),
                        (r.prototype.subscribe = function (t) {
                            this.client.subscribe(this.name, t);
                        }),
                        (r.prototype.unsubscribe = function () {
                            this.client.unsubscribe(this.name);
                        }),
                        (r.prototype.isSubscribed = function (t) {
                            return this.client.isSubscribed(this.name, t);
                        }),
                        (r.prototype.publish = function (t, e) {
                            this.client.publish(this.name, t, e);
                        }),
                        (r.prototype.watch = function (t) {
                            this.client.watch(this.name, t);
                        }),
                        (r.prototype.unwatch = function (t) {
                            this.client.unwatch(this.name, t);
                        }),
                        (r.prototype.watchers = function () {
                            return this.client.watchers(this.name);
                        }),
                        (r.prototype.destroy = function () {
                            this.client.destroyChannel(this.name);
                        }),
                        (e.exports.SCChannel = r);
                },
                { "sc-emitter": 15 },
            ],
            15: [
                function (t, e, n) {
                    var i = t("component-emitter");
                    Object.create || (Object.create = t("./objectcreate"));
                    var r = function () {
                        i.call(this);
                    };
                    (r.prototype = Object.create(i.prototype)),
                        (r.prototype.emit = function (t) {
                            if ("error" == t && this.domain) {
                                var e = arguments[1];
                                e || (e = new Error('Uncaught, unspecified "error" event.')), (e.domainEmitter = this), (e.domain = this.domain), (e.domainThrown = !1), this.domain.emit("error", e);
                            }
                            i.prototype.emit.apply(this, arguments);
                        }),
                        (e.exports.SCEmitter = r);
                },
                { "./objectcreate": 16, "component-emitter": 10 },
            ],
            16: [
                function (t, e, n) {
                    e.exports.create = (function () {
                        function t() {}
                        return function (e) {
                            if (1 != arguments.length) throw new Error("Object.create implementation only accepts one parameter.");
                            return (t.prototype = e), new t();
                        };
                    })();
                },
                {},
            ],
            17: [
                function (t, e, n) {
                    function i(t, e) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "AuthTokenExpiredError"), (this.message = t), (this.expiry = e);
                    }
                    function r(t) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "AuthTokenInvalidError"), (this.message = t);
                    }
                    function o(t, e) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "SilentMiddlewareBlockedError"), (this.message = t), (this.type = e);
                    }
                    function a(t) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "InvalidActionError"), (this.message = t);
                    }
                    function s(t) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "InvalidArgumentsError"), (this.message = t);
                    }
                    function l(t) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "InvalidOptionsError"), (this.message = t);
                    }
                    function c(t) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "InvalidMessageError"), (this.message = t);
                    }
                    function u(t, e) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "SocketProtocolError"), (this.message = t), (this.code = e);
                    }
                    function d(t) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "ServerProtocolError"), (this.message = t);
                    }
                    function p(t) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "HTTPServerError"), (this.message = t);
                    }
                    function h(t) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "ResourceLimitError"), (this.message = t);
                    }
                    function f(t) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "TimeoutError"), (this.message = t);
                    }
                    function m(t) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "BrokerError"), (this.message = t);
                    }
                    function v(t, e) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "ProcessExitError"), (this.message = t), (this.code = e);
                    }
                    function g(t) {
                        Error.captureStackTrace && !b ? Error.captureStackTrace(this, arguments.callee) : (this.stack = new Error().stack), (this.name = "UnknownError"), (this.message = t);
                    }
                    var y = t("cycle"),
                        b = (function () {
                            return !this;
                        })();
                    (i.prototype = Object.create(Error.prototype)),
                        (r.prototype = Object.create(Error.prototype)),
                        (o.prototype = Object.create(Error.prototype)),
                        (a.prototype = Object.create(Error.prototype)),
                        (s.prototype = Object.create(Error.prototype)),
                        (l.prototype = Object.create(Error.prototype)),
                        (c.prototype = Object.create(Error.prototype)),
                        (u.prototype = Object.create(Error.prototype)),
                        (d.prototype = Object.create(Error.prototype)),
                        (p.prototype = Object.create(Error.prototype)),
                        (h.prototype = Object.create(Error.prototype)),
                        (f.prototype = Object.create(Error.prototype)),
                        (m.prototype = Object.create(Error.prototype)),
                        (v.prototype = Object.create(Error.prototype)),
                        (g.prototype = Object.create(Error.prototype)),
                        (e.exports = {
                            AuthTokenExpiredError: i,
                            AuthTokenInvalidError: r,
                            SilentMiddlewareBlockedError: o,
                            InvalidActionError: a,
                            InvalidArgumentsError: s,
                            InvalidOptionsError: l,
                            InvalidMessageError: c,
                            SocketProtocolError: u,
                            ServerProtocolError: d,
                            HTTPServerError: p,
                            ResourceLimitError: h,
                            TimeoutError: f,
                            BrokerError: m,
                            ProcessExitError: v,
                            UnknownError: g,
                        }),
                        (e.exports.socketProtocolErrorStatuses = {
                            1001: "Socket was disconnected",
                            1002: "A WebSocket protocol error was encountered",
                            1003: "Server terminated socket because it received invalid data",
                            1005: "Socket closed without status code",
                            1006: "Socket hung up",
                            1007: "Message format was incorrect",
                            1008: "Encountered a policy violation",
                            1009: "Message was too big to process",
                            1010: "Client ended the connection because the server did not comply with extension requirements",
                            1011: "Server encountered an unexpected fatal condition",
                            4e3: "Server ping timed out",
                            4001: "Client pong timed out",
                            4002: "Server failed to sign auth token",
                            4003: "Failed to complete handshake",
                            4004: "Client failed to save auth token",
                            4005: "Did not receive #handshake from client before timeout",
                            4006: "Failed to bind socket to message broker",
                            4007: "Client connection establishment timed out",
                        }),
                        (e.exports.socketProtocolIgnoreStatuses = { 1e3: "Socket closed normally", 1001: "Socket hung up" });
                    var w = { domain: 1, domainEmitter: 1, domainThrown: 1 };
                    (e.exports.dehydrateError = function (t, e) {
                        var n;
                        if ("string" == typeof t) n = t;
                        else {
                            (n = { message: t.message }), e && (n.stack = t.stack);
                            for (var i in t) w[i] || (n[i] = t[i]);
                        }
                        return y.decycle(n);
                    }),
                        (e.exports.hydrateError = function (t) {
                            var e = null;
                            if (null != t)
                                if ("string" == typeof t) e = t;
                                else {
                                    e = new Error(t.message);
                                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                                }
                            return e;
                        });
                },
                { cycle: 11 },
            ],
            18: [
                function (t, e, n) {
                    !(function (t) {
                        "use strict";
                        function e(t) {
                            var e = t.charCodeAt(0);
                            return e === a || e === d ? 62 : e === s || e === p ? 63 : l > e ? -1 : l + 10 > e ? e - l + 26 + 26 : u + 26 > e ? e - u : c + 26 > e ? e - c + 26 : void 0;
                        }
                        function n(t) {
                            function n(t) {
                                c[d++] = t;
                            }
                            var i, r, a, s, l, c;
                            if (t.length % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
                            var u = t.length;
                            (l = "=" === t.charAt(u - 2) ? 2 : "=" === t.charAt(u - 1) ? 1 : 0), (c = new o((3 * t.length) / 4 - l)), (a = l > 0 ? t.length - 4 : t.length);
                            var d = 0;
                            for (i = 0, r = 0; a > i; i += 4, r += 3) (s = (e(t.charAt(i)) << 18) | (e(t.charAt(i + 1)) << 12) | (e(t.charAt(i + 2)) << 6) | e(t.charAt(i + 3))), n((16711680 & s) >> 16), n((65280 & s) >> 8), n(255 & s);
                            return (
                                2 === l
                                    ? ((s = (e(t.charAt(i)) << 2) | (e(t.charAt(i + 1)) >> 4)), n(255 & s))
                                    : 1 === l && ((s = (e(t.charAt(i)) << 10) | (e(t.charAt(i + 1)) << 4) | (e(t.charAt(i + 2)) >> 2)), n((s >> 8) & 255), n(255 & s)),
                                c
                            );
                        }
                        function i(t) {
                            function e(t) {
                                return r.charAt(t);
                            }
                            function n(t) {
                                return e((t >> 18) & 63) + e((t >> 12) & 63) + e((t >> 6) & 63) + e(63 & t);
                            }
                            var i,
                                o,
                                a,
                                s = t.length % 3,
                                l = "";
                            for (i = 0, a = t.length - s; a > i; i += 3) (o = (t[i] << 16) + (t[i + 1] << 8) + t[i + 2]), (l += n(o));
                            switch (s) {
                                case 1:
                                    (o = t[t.length - 1]), (l += e(o >> 2)), (l += e((o << 4) & 63)), (l += "==");
                                    break;
                                case 2:
                                    (o = (t[t.length - 2] << 8) + t[t.length - 1]), (l += e(o >> 10)), (l += e((o >> 4) & 63)), (l += e((o << 2) & 63)), (l += "=");
                            }
                            return l;
                        }
                        var r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
                            o = "undefined" != typeof Uint8Array ? Uint8Array : Array,
                            a = "+".charCodeAt(0),
                            s = "/".charCodeAt(0),
                            l = "0".charCodeAt(0),
                            c = "a".charCodeAt(0),
                            u = "A".charCodeAt(0),
                            d = "-".charCodeAt(0),
                            p = "_".charCodeAt(0);
                        (t.toByteArray = n), (t.fromByteArray = i);
                    })("undefined" == typeof n ? (this.base64js = {}) : n);
                },
                {},
            ],
            19: [
                function (t, e, n) {
                    (function (e) {
                        "use strict";
                        function i() {
                            try {
                                var t = new Uint8Array(1);
                                return (
                                    (t.foo = function () {
                                        return 42;
                                    }),
                                    42 === t.foo() && "function" == typeof t.subarray && 0 === t.subarray(1, 1).byteLength
                                );
                            } catch (e) {
                                return !1;
                            }
                        }
                        function r() {
                            return o.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;
                        }
                        function o(t) {
                            return this instanceof o
                                ? (o.TYPED_ARRAY_SUPPORT || ((this.length = 0), (this.parent = void 0)), "number" == typeof t ? a(this, t) : "string" == typeof t ? s(this, t, arguments.length > 1 ? arguments[1] : "utf8") : l(this, t))
                                : arguments.length > 1
                                ? new o(t, arguments[1])
                                : new o(t);
                        }
                        function a(t, e) {
                            if (((t = m(t, 0 > e ? 0 : 0 | v(e))), !o.TYPED_ARRAY_SUPPORT)) for (var n = 0; e > n; n++) t[n] = 0;
                            return t;
                        }
                        function s(t, e, n) {
                            ("string" != typeof n || "" === n) && (n = "utf8");
                            var i = 0 | y(e, n);
                            return (t = m(t, i)), t.write(e, n), t;
                        }
                        function l(t, e) {
                            if (o.isBuffer(e)) return c(t, e);
                            if (J(e)) return u(t, e);
                            if (null == e) throw new TypeError("must start with number, buffer, array or string");
                            if ("undefined" != typeof ArrayBuffer) {
                                if (e.buffer instanceof ArrayBuffer) return d(t, e);
                                if (e instanceof ArrayBuffer) return p(t, e);
                            }
                            return e.length ? h(t, e) : f(t, e);
                        }
                        function c(t, e) {
                            var n = 0 | v(e.length);
                            return (t = m(t, n)), e.copy(t, 0, 0, n), t;
                        }
                        function u(t, e) {
                            var n = 0 | v(e.length);
                            t = m(t, n);
                            for (var i = 0; n > i; i += 1) t[i] = 255 & e[i];
                            return t;
                        }
                        function d(t, e) {
                            var n = 0 | v(e.length);
                            t = m(t, n);
                            for (var i = 0; n > i; i += 1) t[i] = 255 & e[i];
                            return t;
                        }
                        function p(t, e) {
                            return e.byteLength, o.TYPED_ARRAY_SUPPORT ? ((t = new Uint8Array(e)), (t.__proto__ = o.prototype)) : (t = d(t, new Uint8Array(e))), t;
                        }
                        function h(t, e) {
                            var n = 0 | v(e.length);
                            t = m(t, n);
                            for (var i = 0; n > i; i += 1) t[i] = 255 & e[i];
                            return t;
                        }
                        function f(t, e) {
                            var n,
                                i = 0;
                            "Buffer" === e.type && J(e.data) && ((n = e.data), (i = 0 | v(n.length))), (t = m(t, i));
                            for (var r = 0; i > r; r += 1) t[r] = 255 & n[r];
                            return t;
                        }
                        function m(t, e) {
                            o.TYPED_ARRAY_SUPPORT ? ((t = new Uint8Array(e)), (t.__proto__ = o.prototype)) : (t.length = e);
                            var n = 0 !== e && e <= o.poolSize >>> 1;
                            return n && (t.parent = K), t;
                        }
                        function v(t) {
                            if (t >= r()) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + r().toString(16) + " bytes");
                            return 0 | t;
                        }
                        function g(t, e) {
                            if (!(this instanceof g)) return new g(t, e);
                            var n = new o(t, e);
                            return delete n.parent, n;
                        }
                        function y(t, e) {
                            "string" != typeof t && (t = "" + t);
                            var n = t.length;
                            if (0 === n) return 0;
                            for (var i = !1; ; )
                                switch (e) {
                                    case "ascii":
                                    case "binary":
                                    case "raw":
                                    case "raws":
                                        return n;
                                    case "utf8":
                                    case "utf-8":
                                        return H(t).length;
                                    case "ucs2":
                                    case "ucs-2":
                                    case "utf16le":
                                    case "utf-16le":
                                        return 2 * n;
                                    case "hex":
                                        return n >>> 1;
                                    case "base64":
                                        return W(t).length;
                                    default:
                                        if (i) return H(t).length;
                                        (e = ("" + e).toLowerCase()), (i = !0);
                                }
                        }
                        function b(t, e, n) {
                            var i = !1;
                            if (((e = 0 | e), (n = void 0 === n || n === 1 / 0 ? this.length : 0 | n), t || (t = "utf8"), 0 > e && (e = 0), n > this.length && (n = this.length), e >= n)) return "";
                            for (;;)
                                switch (t) {
                                    case "hex":
                                        return R(this, e, n);
                                    case "utf8":
                                    case "utf-8":
                                        return T(this, e, n);
                                    case "ascii":
                                        return A(this, e, n);
                                    case "binary":
                                        return I(this, e, n);
                                    case "base64":
                                        return _(this, e, n);
                                    case "ucs2":
                                    case "ucs-2":
                                    case "utf16le":
                                    case "utf-16le":
                                        return P(this, e, n);
                                    default:
                                        if (i) throw new TypeError("Unknown encoding: " + t);
                                        (t = (t + "").toLowerCase()), (i = !0);
                                }
                        }
                        function w(t, e, n, i) {
                            n = Number(n) || 0;
                            var r = t.length - n;
                            i ? ((i = Number(i)), i > r && (i = r)) : (i = r);
                            var o = e.length;
                            if (o % 2 !== 0) throw new Error("Invalid hex string");
                            i > o / 2 && (i = o / 2);
                            for (var a = 0; i > a; a++) {
                                var s = parseInt(e.substr(2 * a, 2), 16);
                                if (isNaN(s)) throw new Error("Invalid hex string");
                                t[n + a] = s;
                            }
                            return a;
                        }
                        function $(t, e, n, i) {
                            return Y(H(e, t.length - n), t, n, i);
                        }
                        function x(t, e, n, i) {
                            return Y(V(e), t, n, i);
                        }
                        function k(t, e, n, i) {
                            return x(t, e, n, i);
                        }
                        function S(t, e, n, i) {
                            return Y(W(e), t, n, i);
                        }
                        function C(t, e, n, i) {
                            return Y(z(e, t.length - n), t, n, i);
                        }
                        function _(t, e, n) {
                            return 0 === e && n === t.length ? G.fromByteArray(t) : G.fromByteArray(t.slice(e, n));
                        }
                        function T(t, e, n) {
                            n = Math.min(t.length, n);
                            for (var i = [], r = e; n > r; ) {
                                var o = t[r],
                                    a = null,
                                    s = o > 239 ? 4 : o > 223 ? 3 : o > 191 ? 2 : 1;
                                if (n >= r + s) {
                                    var l, c, u, d;
                                    switch (s) {
                                        case 1:
                                            128 > o && (a = o);
                                            break;
                                        case 2:
                                            (l = t[r + 1]), 128 === (192 & l) && ((d = ((31 & o) << 6) | (63 & l)), d > 127 && (a = d));
                                            break;
                                        case 3:
                                            (l = t[r + 1]), (c = t[r + 2]), 128 === (192 & l) && 128 === (192 & c) && ((d = ((15 & o) << 12) | ((63 & l) << 6) | (63 & c)), d > 2047 && (55296 > d || d > 57343) && (a = d));
                                            break;
                                        case 4:
                                            (l = t[r + 1]),
                                                (c = t[r + 2]),
                                                (u = t[r + 3]),
                                                128 === (192 & l) && 128 === (192 & c) && 128 === (192 & u) && ((d = ((15 & o) << 18) | ((63 & l) << 12) | ((63 & c) << 6) | (63 & u)), d > 65535 && 1114112 > d && (a = d));
                                    }
                                }
                                null === a ? ((a = 65533), (s = 1)) : a > 65535 && ((a -= 65536), i.push(((a >>> 10) & 1023) | 55296), (a = 56320 | (1023 & a))), i.push(a), (r += s);
                            }
                            return E(i);
                        }
                        function E(t) {
                            var e = t.length;
                            if (Q >= e) return String.fromCharCode.apply(String, t);
                            for (var n = "", i = 0; e > i; ) n += String.fromCharCode.apply(String, t.slice(i, (i += Q)));
                            return n;
                        }
                        function A(t, e, n) {
                            var i = "";
                            n = Math.min(t.length, n);
                            for (var r = e; n > r; r++) i += String.fromCharCode(127 & t[r]);
                            return i;
                        }
                        function I(t, e, n) {
                            var i = "";
                            n = Math.min(t.length, n);
                            for (var r = e; n > r; r++) i += String.fromCharCode(t[r]);
                            return i;
                        }
                        function R(t, e, n) {
                            var i = t.length;
                            (!e || 0 > e) && (e = 0), (!n || 0 > n || n > i) && (n = i);
                            for (var r = "", o = e; n > o; o++) r += F(t[o]);
                            return r;
                        }
                        function P(t, e, n) {
                            for (var i = t.slice(e, n), r = "", o = 0; o < i.length; o += 2) r += String.fromCharCode(i[o] + 256 * i[o + 1]);
                            return r;
                        }
                        function j(t, e, n) {
                            if (t % 1 !== 0 || 0 > t) throw new RangeError("offset is not uint");
                            if (t + e > n) throw new RangeError("Trying to access beyond buffer length");
                        }
                        function D(t, e, n, i, r, a) {
                            if (!o.isBuffer(t)) throw new TypeError("buffer must be a Buffer instance");
                            if (e > r || a > e) throw new RangeError("value is out of bounds");
                            if (n + i > t.length) throw new RangeError("index out of range");
                        }
                        function O(t, e, n, i) {
                            0 > e && (e = 65535 + e + 1);
                            for (var r = 0, o = Math.min(t.length - n, 2); o > r; r++) t[n + r] = (e & (255 << (8 * (i ? r : 1 - r)))) >>> (8 * (i ? r : 1 - r));
                        }
                        function L(t, e, n, i) {
                            0 > e && (e = 4294967295 + e + 1);
                            for (var r = 0, o = Math.min(t.length - n, 4); o > r; r++) t[n + r] = (e >>> (8 * (i ? r : 3 - r))) & 255;
                        }
                        function N(t, e, n, i, r, o) {
                            if (e > r || o > e) throw new RangeError("value is out of bounds");
                            if (n + i > t.length) throw new RangeError("index out of range");
                            if (0 > n) throw new RangeError("index out of range");
                        }
                        function q(t, e, n, i, r) {
                            return r || N(t, e, n, 4, 3.4028234663852886e38, -3.4028234663852886e38), X.write(t, e, n, i, 23, 4), n + 4;
                        }
                        function U(t, e, n, i, r) {
                            return r || N(t, e, n, 8, 1.7976931348623157e308, -1.7976931348623157e308), X.write(t, e, n, i, 52, 8), n + 8;
                        }
                        function M(t) {
                            if (((t = B(t).replace(Z, "")), t.length < 2)) return "";
                            for (; t.length % 4 !== 0; ) t += "=";
                            return t;
                        }
                        function B(t) {
                            return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "");
                        }
                        function F(t) {
                            return 16 > t ? "0" + t.toString(16) : t.toString(16);
                        }
                        function H(t, e) {
                            e = e || 1 / 0;
                            for (var n, i = t.length, r = null, o = [], a = 0; i > a; a++) {
                                if (((n = t.charCodeAt(a)), n > 55295 && 57344 > n)) {
                                    if (!r) {
                                        if (n > 56319) {
                                            (e -= 3) > -1 && o.push(239, 191, 189);
                                            continue;
                                        }
                                        if (a + 1 === i) {
                                            (e -= 3) > -1 && o.push(239, 191, 189);
                                            continue;
                                        }
                                        r = n;
                                        continue;
                                    }
                                    if (56320 > n) {
                                        (e -= 3) > -1 && o.push(239, 191, 189), (r = n);
                                        continue;
                                    }
                                    n = (((r - 55296) << 10) | (n - 56320)) + 65536;
                                } else r && (e -= 3) > -1 && o.push(239, 191, 189);
                                if (((r = null), 128 > n)) {
                                    if ((e -= 1) < 0) break;
                                    o.push(n);
                                } else if (2048 > n) {
                                    if ((e -= 2) < 0) break;
                                    o.push((n >> 6) | 192, (63 & n) | 128);
                                } else if (65536 > n) {
                                    if ((e -= 3) < 0) break;
                                    o.push((n >> 12) | 224, ((n >> 6) & 63) | 128, (63 & n) | 128);
                                } else {
                                    if (!(1114112 > n)) throw new Error("Invalid code point");
                                    if ((e -= 4) < 0) break;
                                    o.push((n >> 18) | 240, ((n >> 12) & 63) | 128, ((n >> 6) & 63) | 128, (63 & n) | 128);
                                }
                            }
                            return o;
                        }
                        function V(t) {
                            for (var e = [], n = 0; n < t.length; n++) e.push(255 & t.charCodeAt(n));
                            return e;
                        }
                        function z(t, e) {
                            for (var n, i, r, o = [], a = 0; a < t.length && !((e -= 2) < 0); a++) (n = t.charCodeAt(a)), (i = n >> 8), (r = n % 256), o.push(r), o.push(i);
                            return o;
                        }
                        function W(t) {
                            return G.toByteArray(M(t));
                        }
                        function Y(t, e, n, i) {
                            for (var r = 0; i > r && !(r + n >= e.length || r >= t.length); r++) e[r + n] = t[r];
                            return r;
                        }
                        var G = t("base64-js"),
                            X = t("ieee754"),
                            J = t("isarray");
                        (n.Buffer = o), (n.SlowBuffer = g), (n.INSPECT_MAX_BYTES = 50), (o.poolSize = 8192);
                        var K = {};
                        (o.TYPED_ARRAY_SUPPORT = void 0 !== e.TYPED_ARRAY_SUPPORT ? e.TYPED_ARRAY_SUPPORT : i()),
                            o.TYPED_ARRAY_SUPPORT ? ((o.prototype.__proto__ = Uint8Array.prototype), (o.__proto__ = Uint8Array)) : ((o.prototype.length = void 0), (o.prototype.parent = void 0)),
                            (o.isBuffer = function (t) {
                                return !(null == t || !t._isBuffer);
                            }),
                            (o.compare = function (t, e) {
                                if (!o.isBuffer(t) || !o.isBuffer(e)) throw new TypeError("Arguments must be Buffers");
                                if (t === e) return 0;
                                for (var n = t.length, i = e.length, r = 0, a = Math.min(n, i); a > r && t[r] === e[r]; ) ++r;
                                return r !== a && ((n = t[r]), (i = e[r])), i > n ? -1 : n > i ? 1 : 0;
                            }),
                            (o.isEncoding = function (t) {
                                switch (String(t).toLowerCase()) {
                                    case "hex":
                                    case "utf8":
                                    case "utf-8":
                                    case "ascii":
                                    case "binary":
                                    case "base64":
                                    case "raw":
                                    case "ucs2":
                                    case "ucs-2":
                                    case "utf16le":
                                    case "utf-16le":
                                        return !0;
                                    default:
                                        return !1;
                                }
                            }),
                            (o.concat = function (t, e) {
                                if (!J(t)) throw new TypeError("list argument must be an Array of Buffers.");
                                if (0 === t.length) return new o(0);
                                var n;
                                if (void 0 === e) for (e = 0, n = 0; n < t.length; n++) e += t[n].length;
                                var i = new o(e),
                                    r = 0;
                                for (n = 0; n < t.length; n++) {
                                    var a = t[n];
                                    a.copy(i, r), (r += a.length);
                                }
                                return i;
                            }),
                            (o.byteLength = y),
                            (o.prototype._isBuffer = !0),
                            (o.prototype.toString = function () {
                                var t = 0 | this.length;
                                return 0 === t ? "" : 0 === arguments.length ? T(this, 0, t) : b.apply(this, arguments);
                            }),
                            (o.prototype.equals = function (t) {
                                if (!o.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
                                return this === t ? !0 : 0 === o.compare(this, t);
                            }),
                            (o.prototype.inspect = function () {
                                var t = "",
                                    e = n.INSPECT_MAX_BYTES;
                                return this.length > 0 && ((t = this.toString("hex", 0, e).match(/.{2}/g).join(" ")), this.length > e && (t += " ... ")), "<Buffer " + t + ">";
                            }),
                            (o.prototype.compare = function (t) {
                                if (!o.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
                                return this === t ? 0 : o.compare(this, t);
                            }),
                            (o.prototype.indexOf = function (t, e) {
                                function n(t, e, n) {
                                    for (var i = -1, r = 0; n + r < t.length; r++)
                                        if (t[n + r] === e[-1 === i ? 0 : r - i]) {
                                            if ((-1 === i && (i = r), r - i + 1 === e.length)) return n + i;
                                        } else i = -1;
                                    return -1;
                                }
                                if ((e > 2147483647 ? (e = 2147483647) : -2147483648 > e && (e = -2147483648), (e >>= 0), 0 === this.length)) return -1;
                                if (e >= this.length) return -1;
                                if ((0 > e && (e = Math.max(this.length + e, 0)), "string" == typeof t)) return 0 === t.length ? -1 : String.prototype.indexOf.call(this, t, e);
                                if (o.isBuffer(t)) return n(this, t, e);
                                if ("number" == typeof t) return o.TYPED_ARRAY_SUPPORT && "function" === Uint8Array.prototype.indexOf ? Uint8Array.prototype.indexOf.call(this, t, e) : n(this, [t], e);
                                throw new TypeError("val must be string, number or Buffer");
                            }),
                            (o.prototype.write = function (t, e, n, i) {
                                if (void 0 === e) (i = "utf8"), (n = this.length), (e = 0);
                                else if (void 0 === n && "string" == typeof e) (i = e), (n = this.length), (e = 0);
                                else if (isFinite(e)) (e = 0 | e), isFinite(n) ? ((n = 0 | n), void 0 === i && (i = "utf8")) : ((i = n), (n = void 0));
                                else {
                                    var r = i;
                                    (i = e), (e = 0 | n), (n = r);
                                }
                                var o = this.length - e;
                                if (((void 0 === n || n > o) && (n = o), (t.length > 0 && (0 > n || 0 > e)) || e > this.length)) throw new RangeError("attempt to write outside buffer bounds");
                                i || (i = "utf8");
                                for (var a = !1; ; )
                                    switch (i) {
                                        case "hex":
                                            return w(this, t, e, n);
                                        case "utf8":
                                        case "utf-8":
                                            return $(this, t, e, n);
                                        case "ascii":
                                            return x(this, t, e, n);
                                        case "binary":
                                            return k(this, t, e, n);
                                        case "base64":
                                            return S(this, t, e, n);
                                        case "ucs2":
                                        case "ucs-2":
                                        case "utf16le":
                                        case "utf-16le":
                                            return C(this, t, e, n);
                                        default:
                                            if (a) throw new TypeError("Unknown encoding: " + i);
                                            (i = ("" + i).toLowerCase()), (a = !0);
                                    }
                            }),
                            (o.prototype.toJSON = function () {
                                return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };
                            });
                        var Q = 4096;
                        (o.prototype.slice = function (t, e) {
                            var n = this.length;
                            (t = ~~t), (e = void 0 === e ? n : ~~e), 0 > t ? ((t += n), 0 > t && (t = 0)) : t > n && (t = n), 0 > e ? ((e += n), 0 > e && (e = 0)) : e > n && (e = n), t > e && (e = t);
                            var i;
                            if (o.TYPED_ARRAY_SUPPORT) (i = this.subarray(t, e)), (i.__proto__ = o.prototype);
                            else {
                                var r = e - t;
                                i = new o(r, void 0);
                                for (var a = 0; r > a; a++) i[a] = this[a + t];
                            }
                            return i.length && (i.parent = this.parent || this), i;
                        }),
                            (o.prototype.readUIntLE = function (t, e, n) {
                                (t = 0 | t), (e = 0 | e), n || j(t, e, this.length);
                                for (var i = this[t], r = 1, o = 0; ++o < e && (r *= 256); ) i += this[t + o] * r;
                                return i;
                            }),
                            (o.prototype.readUIntBE = function (t, e, n) {
                                (t = 0 | t), (e = 0 | e), n || j(t, e, this.length);
                                for (var i = this[t + --e], r = 1; e > 0 && (r *= 256); ) i += this[t + --e] * r;
                                return i;
                            }),
                            (o.prototype.readUInt8 = function (t, e) {
                                return e || j(t, 1, this.length), this[t];
                            }),
                            (o.prototype.readUInt16LE = function (t, e) {
                                return e || j(t, 2, this.length), this[t] | (this[t + 1] << 8);
                            }),
                            (o.prototype.readUInt16BE = function (t, e) {
                                return e || j(t, 2, this.length), (this[t] << 8) | this[t + 1];
                            }),
                            (o.prototype.readUInt32LE = function (t, e) {
                                return e || j(t, 4, this.length), (this[t] | (this[t + 1] << 8) | (this[t + 2] << 16)) + 16777216 * this[t + 3];
                            }),
                            (o.prototype.readUInt32BE = function (t, e) {
                                return e || j(t, 4, this.length), 16777216 * this[t] + ((this[t + 1] << 16) | (this[t + 2] << 8) | this[t + 3]);
                            }),
                            (o.prototype.readIntLE = function (t, e, n) {
                                (t = 0 | t), (e = 0 | e), n || j(t, e, this.length);
                                for (var i = this[t], r = 1, o = 0; ++o < e && (r *= 256); ) i += this[t + o] * r;
                                return (r *= 128), i >= r && (i -= Math.pow(2, 8 * e)), i;
                            }),
                            (o.prototype.readIntBE = function (t, e, n) {
                                (t = 0 | t), (e = 0 | e), n || j(t, e, this.length);
                                for (var i = e, r = 1, o = this[t + --i]; i > 0 && (r *= 256); ) o += this[t + --i] * r;
                                return (r *= 128), o >= r && (o -= Math.pow(2, 8 * e)), o;
                            }),
                            (o.prototype.readInt8 = function (t, e) {
                                return e || j(t, 1, this.length), 128 & this[t] ? -1 * (255 - this[t] + 1) : this[t];
                            }),
                            (o.prototype.readInt16LE = function (t, e) {
                                e || j(t, 2, this.length);
                                var n = this[t] | (this[t + 1] << 8);
                                return 32768 & n ? 4294901760 | n : n;
                            }),
                            (o.prototype.readInt16BE = function (t, e) {
                                e || j(t, 2, this.length);
                                var n = this[t + 1] | (this[t] << 8);
                                return 32768 & n ? 4294901760 | n : n;
                            }),
                            (o.prototype.readInt32LE = function (t, e) {
                                return e || j(t, 4, this.length), this[t] | (this[t + 1] << 8) | (this[t + 2] << 16) | (this[t + 3] << 24);
                            }),
                            (o.prototype.readInt32BE = function (t, e) {
                                return e || j(t, 4, this.length), (this[t] << 24) | (this[t + 1] << 16) | (this[t + 2] << 8) | this[t + 3];
                            }),
                            (o.prototype.readFloatLE = function (t, e) {
                                return e || j(t, 4, this.length), X.read(this, t, !0, 23, 4);
                            }),
                            (o.prototype.readFloatBE = function (t, e) {
                                return e || j(t, 4, this.length), X.read(this, t, !1, 23, 4);
                            }),
                            (o.prototype.readDoubleLE = function (t, e) {
                                return e || j(t, 8, this.length), X.read(this, t, !0, 52, 8);
                            }),
                            (o.prototype.readDoubleBE = function (t, e) {
                                return e || j(t, 8, this.length), X.read(this, t, !1, 52, 8);
                            }),
                            (o.prototype.writeUIntLE = function (t, e, n, i) {
                                (t = +t), (e = 0 | e), (n = 0 | n), i || D(this, t, e, n, Math.pow(2, 8 * n), 0);
                                var r = 1,
                                    o = 0;
                                for (this[e] = 255 & t; ++o < n && (r *= 256); ) this[e + o] = (t / r) & 255;
                                return e + n;
                            }),
                            (o.prototype.writeUIntBE = function (t, e, n, i) {
                                (t = +t), (e = 0 | e), (n = 0 | n), i || D(this, t, e, n, Math.pow(2, 8 * n), 0);
                                var r = n - 1,
                                    o = 1;
                                for (this[e + r] = 255 & t; --r >= 0 && (o *= 256); ) this[e + r] = (t / o) & 255;
                                return e + n;
                            }),
                            (o.prototype.writeUInt8 = function (t, e, n) {
                                return (t = +t), (e = 0 | e), n || D(this, t, e, 1, 255, 0), o.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), (this[e] = 255 & t), e + 1;
                            }),
                            (o.prototype.writeUInt16LE = function (t, e, n) {
                                return (t = +t), (e = 0 | e), n || D(this, t, e, 2, 65535, 0), o.TYPED_ARRAY_SUPPORT ? ((this[e] = 255 & t), (this[e + 1] = t >>> 8)) : O(this, t, e, !0), e + 2;
                            }),
                            (o.prototype.writeUInt16BE = function (t, e, n) {
                                return (t = +t), (e = 0 | e), n || D(this, t, e, 2, 65535, 0), o.TYPED_ARRAY_SUPPORT ? ((this[e] = t >>> 8), (this[e + 1] = 255 & t)) : O(this, t, e, !1), e + 2;
                            }),
                            (o.prototype.writeUInt32LE = function (t, e, n) {
                                return (
                                    (t = +t),
                                    (e = 0 | e),
                                    n || D(this, t, e, 4, 4294967295, 0),
                                    o.TYPED_ARRAY_SUPPORT ? ((this[e + 3] = t >>> 24), (this[e + 2] = t >>> 16), (this[e + 1] = t >>> 8), (this[e] = 255 & t)) : L(this, t, e, !0),
                                    e + 4
                                );
                            }),
                            (o.prototype.writeUInt32BE = function (t, e, n) {
                                return (
                                    (t = +t),
                                    (e = 0 | e),
                                    n || D(this, t, e, 4, 4294967295, 0),
                                    o.TYPED_ARRAY_SUPPORT ? ((this[e] = t >>> 24), (this[e + 1] = t >>> 16), (this[e + 2] = t >>> 8), (this[e + 3] = 255 & t)) : L(this, t, e, !1),
                                    e + 4
                                );
                            }),
                            (o.prototype.writeIntLE = function (t, e, n, i) {
                                if (((t = +t), (e = 0 | e), !i)) {
                                    var r = Math.pow(2, 8 * n - 1);
                                    D(this, t, e, n, r - 1, -r);
                                }
                                var o = 0,
                                    a = 1,
                                    s = 0 > t ? 1 : 0;
                                for (this[e] = 255 & t; ++o < n && (a *= 256); ) this[e + o] = (((t / a) >> 0) - s) & 255;
                                return e + n;
                            }),
                            (o.prototype.writeIntBE = function (t, e, n, i) {
                                if (((t = +t), (e = 0 | e), !i)) {
                                    var r = Math.pow(2, 8 * n - 1);
                                    D(this, t, e, n, r - 1, -r);
                                }
                                var o = n - 1,
                                    a = 1,
                                    s = 0 > t ? 1 : 0;
                                for (this[e + o] = 255 & t; --o >= 0 && (a *= 256); ) this[e + o] = (((t / a) >> 0) - s) & 255;
                                return e + n;
                            }),
                            (o.prototype.writeInt8 = function (t, e, n) {
                                return (t = +t), (e = 0 | e), n || D(this, t, e, 1, 127, -128), o.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), 0 > t && (t = 255 + t + 1), (this[e] = 255 & t), e + 1;
                            }),
                            (o.prototype.writeInt16LE = function (t, e, n) {
                                return (t = +t), (e = 0 | e), n || D(this, t, e, 2, 32767, -32768), o.TYPED_ARRAY_SUPPORT ? ((this[e] = 255 & t), (this[e + 1] = t >>> 8)) : O(this, t, e, !0), e + 2;
                            }),
                            (o.prototype.writeInt16BE = function (t, e, n) {
                                return (t = +t), (e = 0 | e), n || D(this, t, e, 2, 32767, -32768), o.TYPED_ARRAY_SUPPORT ? ((this[e] = t >>> 8), (this[e + 1] = 255 & t)) : O(this, t, e, !1), e + 2;
                            }),
                            (o.prototype.writeInt32LE = function (t, e, n) {
                                return (
                                    (t = +t),
                                    (e = 0 | e),
                                    n || D(this, t, e, 4, 2147483647, -2147483648),
                                    o.TYPED_ARRAY_SUPPORT ? ((this[e] = 255 & t), (this[e + 1] = t >>> 8), (this[e + 2] = t >>> 16), (this[e + 3] = t >>> 24)) : L(this, t, e, !0),
                                    e + 4
                                );
                            }),
                            (o.prototype.writeInt32BE = function (t, e, n) {
                                return (
                                    (t = +t),
                                    (e = 0 | e),
                                    n || D(this, t, e, 4, 2147483647, -2147483648),
                                    0 > t && (t = 4294967295 + t + 1),
                                    o.TYPED_ARRAY_SUPPORT ? ((this[e] = t >>> 24), (this[e + 1] = t >>> 16), (this[e + 2] = t >>> 8), (this[e + 3] = 255 & t)) : L(this, t, e, !1),
                                    e + 4
                                );
                            }),
                            (o.prototype.writeFloatLE = function (t, e, n) {
                                return q(this, t, e, !0, n);
                            }),
                            (o.prototype.writeFloatBE = function (t, e, n) {
                                return q(this, t, e, !1, n);
                            }),
                            (o.prototype.writeDoubleLE = function (t, e, n) {
                                return U(this, t, e, !0, n);
                            }),
                            (o.prototype.writeDoubleBE = function (t, e, n) {
                                return U(this, t, e, !1, n);
                            }),
                            (o.prototype.copy = function (t, e, n, i) {
                                if ((n || (n = 0), i || 0 === i || (i = this.length), e >= t.length && (e = t.length), e || (e = 0), i > 0 && n > i && (i = n), i === n)) return 0;
                                if (0 === t.length || 0 === this.length) return 0;
                                if (0 > e) throw new RangeError("targetStart out of bounds");
                                if (0 > n || n >= this.length) throw new RangeError("sourceStart out of bounds");
                                if (0 > i) throw new RangeError("sourceEnd out of bounds");
                                i > this.length && (i = this.length), t.length - e < i - n && (i = t.length - e + n);
                                var r,
                                    a = i - n;
                                if (this === t && e > n && i > e) for (r = a - 1; r >= 0; r--) t[r + e] = this[r + n];
                                else if (1e3 > a || !o.TYPED_ARRAY_SUPPORT) for (r = 0; a > r; r++) t[r + e] = this[r + n];
                                else Uint8Array.prototype.set.call(t, this.subarray(n, n + a), e);
                                return a;
                            }),
                            (o.prototype.fill = function (t, e, n) {
                                if ((t || (t = 0), e || (e = 0), n || (n = this.length), e > n)) throw new RangeError("end < start");
                                if (n !== e && 0 !== this.length) {
                                    if (0 > e || e >= this.length) throw new RangeError("start out of bounds");
                                    if (0 > n || n > this.length) throw new RangeError("end out of bounds");
                                    var i;
                                    if ("number" == typeof t) for (i = e; n > i; i++) this[i] = t;
                                    else {
                                        var r = H(t.toString()),
                                            o = r.length;
                                        for (i = e; n > i; i++) this[i] = r[i % o];
                                    }
                                    return this;
                                }
                            });
                        var Z = /[^+\/0-9A-Za-z-_]/g;
                    }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
                },
                { "base64-js": 18, ieee754: 21, isarray: 20 },
            ],
            20: [
                function (t, e, n) {
                    var i = {}.toString;
                    e.exports =
                        Array.isArray ||
                        function (t) {
                            return "[object Array]" == i.call(t);
                        };
                },
                {},
            ],
            21: [
                function (t, e, n) {
                    (n.read = function (t, e, n, i, r) {
                        var o,
                            a,
                            s = 8 * r - i - 1,
                            l = (1 << s) - 1,
                            c = l >> 1,
                            u = -7,
                            d = n ? r - 1 : 0,
                            p = n ? -1 : 1,
                            h = t[e + d];
                        for (d += p, o = h & ((1 << -u) - 1), h >>= -u, u += s; u > 0; o = 256 * o + t[e + d], d += p, u -= 8);
                        for (a = o & ((1 << -u) - 1), o >>= -u, u += i; u > 0; a = 256 * a + t[e + d], d += p, u -= 8);
                        if (0 === o) o = 1 - c;
                        else {
                            if (o === l) return a ? NaN : (h ? -1 : 1) * (1 / 0);
                            (a += Math.pow(2, i)), (o -= c);
                        }
                        return (h ? -1 : 1) * a * Math.pow(2, o - i);
                    }),
                        (n.write = function (t, e, n, i, r, o) {
                            var a,
                                s,
                                l,
                                c = 8 * o - r - 1,
                                u = (1 << c) - 1,
                                d = u >> 1,
                                p = 23 === r ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
                                h = i ? 0 : o - 1,
                                f = i ? 1 : -1,
                                m = 0 > e || (0 === e && 0 > 1 / e) ? 1 : 0;
                            for (
                                e = Math.abs(e),
                                    isNaN(e) || e === 1 / 0
                                        ? ((s = isNaN(e) ? 1 : 0), (a = u))
                                        : ((a = Math.floor(Math.log(e) / Math.LN2)),
                                          e * (l = Math.pow(2, -a)) < 1 && (a--, (l *= 2)),
                                          (e += a + d >= 1 ? p / l : p * Math.pow(2, 1 - d)),
                                          e * l >= 2 && (a++, (l /= 2)),
                                          a + d >= u ? ((s = 0), (a = u)) : a + d >= 1 ? ((s = (e * l - 1) * Math.pow(2, r)), (a += d)) : ((s = e * Math.pow(2, d - 1) * Math.pow(2, r)), (a = 0)));
                                r >= 8;
                                t[n + h] = 255 & s, h += f, s /= 256, r -= 8
                            );
                            for (a = (a << r) | s, c += r; c > 0; t[n + h] = 255 & a, h += f, a /= 256, c -= 8);
                            t[n + h - f] |= 128 * m;
                        });
                },
                {},
            ],
            22: [
                function (t, e, n) {
                    "use strict";
                    function i(t, e) {
                        return Object.prototype.hasOwnProperty.call(t, e);
                    }
                    e.exports = function (t, e, n, o) {
                        (e = e || "&"), (n = n || "=");
                        var a = {};
                        if ("string" != typeof t || 0 === t.length) return a;
                        var s = /\+/g;
                        t = t.split(e);
                        var l = 1e3;
                        o && "number" == typeof o.maxKeys && (l = o.maxKeys);
                        var c = t.length;
                        l > 0 && c > l && (c = l);
                        for (var u = 0; c > u; ++u) {
                            var d,
                                p,
                                h,
                                f,
                                m = t[u].replace(s, "%20"),
                                v = m.indexOf(n);
                            v >= 0 ? ((d = m.substr(0, v)), (p = m.substr(v + 1))) : ((d = m), (p = "")), (h = decodeURIComponent(d)), (f = decodeURIComponent(p)), i(a, h) ? (r(a[h]) ? a[h].push(f) : (a[h] = [a[h], f])) : (a[h] = f);
                        }
                        return a;
                    };
                    var r =
                        Array.isArray ||
                        function (t) {
                            return "[object Array]" === Object.prototype.toString.call(t);
                        };
                },
                {},
            ],
            23: [
                function (t, e, n) {
                    "use strict";
                    function i(t, e) {
                        if (t.map) return t.map(e);
                        for (var n = [], i = 0; i < t.length; i++) n.push(e(t[i], i));
                        return n;
                    }
                    var r = function (t) {
                        switch (typeof t) {
                            case "string":
                                return t;
                            case "boolean":
                                return t ? "true" : "false";
                            case "number":
                                return isFinite(t) ? t : "";
                            default:
                                return "";
                        }
                    };
                    e.exports = function (t, e, n, s) {
                        return (
                            (e = e || "&"),
                            (n = n || "="),
                            null === t && (t = void 0),
                            "object" == typeof t
                                ? i(a(t), function (a) {
                                      var s = encodeURIComponent(r(a)) + n;
                                      return o(t[a])
                                          ? i(t[a], function (t) {
                                                return s + encodeURIComponent(r(t));
                                            }).join(e)
                                          : s + encodeURIComponent(r(t[a]));
                                  }).join(e)
                                : s
                                ? encodeURIComponent(r(s)) + n + encodeURIComponent(r(t))
                                : ""
                        );
                    };
                    var o =
                            Array.isArray ||
                            function (t) {
                                return "[object Array]" === Object.prototype.toString.call(t);
                            },
                        a =
                            Object.keys ||
                            function (t) {
                                var e = [];
                                for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.push(n);
                                return e;
                            };
                },
                {},
            ],
            24: [
                function (t, e, n) {
                    "use strict";
                    (n.decode = n.parse = t("./decode")), (n.encode = n.stringify = t("./encode"));
                },
                { "./decode": 22, "./encode": 23 },
            ],
        },
        {},
        [2]
    )(2);
});
var options = { secure: !0, hostname: ty.settings.realtime.host };
"localhost" == ty.settings.realtime.host && ((options.secure = !1), (options.port = 8e3)),
    (ty.realtime = socketCluster.connect(options)),
    (ty.realtime.channels = {}),
    (ty.realtime.join = function (t) {
        var e = ty.realtime.subscribe(t);
        return (
            e.bind ||
                (e.bind = function (t, n) {
                    e.watch(function (e) {
                        e.event == t && n && n(e.message);
                    });
                }),
            e
        );
    }),
    (ty.realtime.leave = function (t) {
        ty.realtime.destroyChannel(t), $.event.trigger("realtime:leave", t);
    }),
    ty.realtime.on("disconnect", function (t) {
        ty.realtime.socketId && ty.realtime.leave("socket-" + ty.realtime.socketId);
    }),
    (ty.realtime.send = function (t) {
        ty.realtime.emit("message", t);
    }),
    ty.realtime.on("error", function (t) {
        throw (ty.realtime.leave("socket-" + ty.realtime.socketId), "Socket error - " + t);
    }),
    ty.realtime.on("connect", function (t) {
        (ty.realtime.socketChannel = ty.realtime.join("socket-" + t.id)), (ty.realtime.socketId = t.id);
        try {
            ty.realtime.emit("login", JSON.parse($.cookie("loginToken")));
        } catch (e) {
            ty.realtime.emit("login", void 0);
        }
    }),
    (ty.rt = {
        connection: !1,
        connectionInit: !1,
        queued: [],
        queuedActives: [],
        queuedActivesCallbacks: {},
        getQueuedActives: function () {
            var t = _.clone(ty.rt.queuedActivesCallbacks);
            (ty.rt.queuedActivesCallbacks = {}),
                ty.post("realtime/activesCount", { channels: ty.rt.queuedActives }, function (e) {
                    _.each(e, function (e) {
                        var n = e.id;
                        t[n](e);
                    }),
                        $("body").scope().$digest();
                }),
                (ty.rt.queuedActives = []);
        },
        activesCount: function (t, e) {
            ty.rt.queuedActives.push(t), (ty.rt.queuedActivesCallbacks[t] = e), ty.rt.activesDebounce();
        },
    }),
    (ty.rt.activesDebounce = _.debounce(ty.rt.getQueuedActives, 200, { maxWait: 200 })),
    angular
        .module("realtime", [])
        .run(["$rootScope", function (t) {}])
        .factory("Pusher", [
            "$http",
            function (t) {
                return {
                    subscribe: function (t, e, n) {
                        var i = ty.realtime.join(t);
                        return i;
                    },
                    unsubscribe: function (t) {
                        try {
                            ty.realtime.leave(t);
                        } catch (e) {}
                    },
                };
            },
        ]),
    angular.module("realtime").service("tySubscribe", [
        "$http",
        "Pusher",
        "$rootScope",
        function (t, e, n) {
            var i = function (t) {
                return t ? t.replace(/[\/\s\|?#']/gi, "-") : "";
            };
            (this.node = function (n) {
                var i,
                    r,
                    o = function (t, e, n) {
                        ty.get("node/" + e, function (e) {
                            (t[n] = e), t.$digest();
                        });
                    },
                    a = function (t, e, n) {
                        $.extend(t[n], e), t.$digest();
                    };
                return t.get("/api/node/" + n).then(function (t) {
                    return {
                        data: t.data,
                        bind: function (t, s) {
                            var l = e.subscribe("node-" + n);
                            l.bind("changed", function (e) {
                                !e._pusherFailed && e.updateProperties ? (delete e.updateProperties, a(t, e, s)) : e._pusherFailed ? o(t, n, s) : ((t[s] = e), t.$digest());
                            }),
                                (r = t.$on("realtime-reconnect", function () {
                                    o(t, n, s);
                                })),
                                (i = t.$on("$destroy", function () {
                                    e.unsubscribe("node-" + n);
                                }));
                        },
                        unbind: function () {
                            e.unsubscribe("node-" + n), i && i(), r && r();
                        },
                    };
                });
            }),
                (this.actives = function (t) {
                    var e = t.scope,
                        n = t.channel,
                        i = t.propertyName || "actives";
                    ty.rt.activesCount(n, function (t) {
                        e[i] = t.count;
                    });
                }),
                (this.list = function (n) {
                    function r() {
                        function t(t) {
                            (o.actives = t.count), o.$digest();
                        }
                        if (!o.tySubscribed[a]) {
                            (o.tySubscribed[a] = !0),
                                o.$on("$destroy", function () {
                                    e.unsubscribe(a);
                                });
                            var n = e.subscribe(a);
                            return (
                                n.bind("childChanged", function (t) {
                                    c(t);
                                }),
                                n.bind("updateUsersCount", t),
                                n
                            );
                        }
                    }
                    var o = n.scope;
                    if (o) {
                        var a = i(n.path);
                        n.channel && (a = i(n.channel)), n.presence && (a = "presence-" + a), (o.tySubscribed = o.tySubscribed || {});
                        var s = n.property,
                            l = function (t) {
                                o[s].push(t), o.$emit("childAdded", t), o.$digest();
                            },
                            c = function (t) {
                                var e = _.findIndex(o[s], function (e, n) {
                                    return e._id == t._id ? !0 : void 0;
                                });
                                return -1 != e || "no new" == n.childChangedAdd || t.updateProperties ? (t.updateProperties || (o[s][e] = t), o.$emit("childChanged", t, e), void o.$digest()) : void l(t);
                            },
                            u = r();
                        if (n.noInit)
                            return {
                                close: function () {
                                    e.unsubscribe(a);
                                },
                                childChanged: c,
                            };
                        var d = n.initialPath || n.path,
                            p = o.$on("realtime-reconnect", function () {
                                ty.get(d, function (t) {
                                    (o[s] = t), o.$digest();
                                });
                            });
                        return t.get("/api/" + d).then(function (t) {
                            return (
                                (o[s] = t.data),
                                (o.listLoaded = !0),
                                n.callback && n.callback(t.data),
                                o.$emit("listLoaded"),
                                {
                                    close: function () {
                                        e.unsubscribe(a), p(), delete o.tySubscribed[a];
                                    },
                                    count: function () {
                                        return u ? u.members.count : 0;
                                    },
                                    users: function (t) {
                                        ty.get("realtime/users/" + a, function (e) {
                                            t(e);
                                        });
                                    },
                                    childChanged: c,
                                    data: t.data,
                                }
                            );
                        });
                    }
                });
        },
    ]),
    (ty.Realtime = function () {}),
    (function (t) {
        "use strict";
        t.module("vcRecaptcha", []);
    })(angular),
    (function (t) {
        "use strict";
        function e() {
            throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create');
        }
        var n = t.module("vcRecaptcha");
        n.provider("vcRecaptchaService", function () {
            var n = this,
                i = {};
            (n.onLoadFunctionName = "vcRecaptchaApiLoaded"),
                (n.setDefaults = function (e) {
                    t.copy(e, i);
                }),
                (n.setSiteKey = function (t) {
                    i.key = t;
                }),
                (n.setTheme = function (t) {
                    i.theme = t;
                }),
                (n.setStoken = function (t) {
                    i.stoken = t;
                }),
                (n.setSize = function (t) {
                    i.size = t;
                }),
                (n.setType = function (t) {
                    i.type = t;
                }),
                (n.setLang = function (t) {
                    i.lang = t;
                }),
                (n.setOnLoadFunctionName = function (t) {
                    n.onLoadFunctionName = t;
                }),
                (n.$get = [
                    "$rootScope",
                    "$window",
                    "$q",
                    function (r, o, a) {
                        function s() {
                            return c ? a.when(c) : d;
                        }
                        function l() {
                            if (!c) throw new Error("reCaptcha has not been loaded yet.");
                        }
                        var c,
                            u = a.defer(),
                            d = u.promise,
                            p = {};
                        o.vcRecaptchaApiLoadedCallback = o.vcRecaptchaApiLoadedCallback || [];
                        var h = function () {
                            (c = o.grecaptcha), u.resolve(c);
                        };
                        return (
                            o.vcRecaptchaApiLoadedCallback.push(h),
                            (o[n.onLoadFunctionName] = function () {
                                o.vcRecaptchaApiLoadedCallback.forEach(function (t) {
                                    t();
                                });
                            }),
                            t.isDefined(o.grecaptcha) && h(),
                            {
                                create: function (t, n) {
                                    return (
                                        (n.sitekey = n.key || i.key),
                                        (n.theme = n.theme || i.theme),
                                        (n.stoken = n.stoken || i.stoken),
                                        (n.size = n.size || i.size),
                                        (n.type = n.type || i.type),
                                        (n.hl = n.lang || i.lang),
                                        (n.sitekey && 40 === n.sitekey.length) || e(),
                                        s().then(function (e) {
                                            var i = e.render(t, n);
                                            return (p[i] = t), i;
                                        })
                                    );
                                },
                                reload: function (t) {
                                    l(), c.reset(t), r.$broadcast("reCaptchaReset", t);
                                },
                                useLang: function (t, e) {
                                    var n = p[t];
                                    if (!n) throw new Error("reCaptcha Widget ID not exists", t);
                                    var i = n.querySelector("iframe");
                                    if (!e) return i && i.src && /[?&]hl=\w+/.test(i.src) ? i.src.replace(/.+[?&]hl=(\w+)([^\w].+)?/, "$1") : null;
                                    if (i && i.src) {
                                        var r = i.src;
                                        /[?&]hl=/.test(r) ? (r = r.replace(/([?&]hl=)\w+/, "$1" + e)) : (r += (-1 === r.indexOf("?") ? "?" : "&") + "hl=" + e), (i.src = r);
                                    }
                                },
                                getResponse: function (t) {
                                    return l(), c.getResponse(t);
                                },
                                getInstance: function (t) {
                                    return p[t];
                                },
                                destroy: function (t) {
                                    delete p[t];
                                },
                            }
                        );
                    },
                ]);
        });
    })(angular),
    (function (t) {
        "use strict";
        var e = t.module("vcRecaptcha");
        e.directive("vcRecaptcha", [
            "$document",
            "$timeout",
            "vcRecaptchaService",
            function (e, n, i) {
                return {
                    restrict: "A",
                    require: "?^^form",
                    scope: { response: "=?ngModel", key: "=?", stoken: "=?", theme: "=?", size: "=?", type: "=?", lang: "=?", tabindex: "=?", required: "=?", onCreate: "&", onSuccess: "&", onExpire: "&" },
                    link: function (r, o, a, s) {
                        function l() {
                            s && s.$setValidity("recaptcha", null), d();
                        }
                        function c() {
                            n(function () {
                                (r.response = ""), u(), r.onExpire({ widgetId: r.widgetId });
                            });
                        }
                        function u() {
                            s && s.$setValidity("recaptcha", r.required === !1 ? null : Boolean(r.response));
                        }
                        function d() {
                            i.destroy(r.widgetId), t.element(e[0].querySelectorAll(".pls-container")).parent().remove();
                        }
                        (r.widgetId = null), s && t.isDefined(a.required) && r.$watch("required", u);
                        var p = r.$watch("key", function (e) {
                            var s = function (t) {
                                n(function () {
                                    (r.response = t), u(), r.onSuccess({ response: t, widgetId: r.widgetId });
                                });
                            };
                            i
                                .create(o[0], {
                                    callback: s,
                                    key: e,
                                    stoken: r.stoken || a.stoken || null,
                                    theme: r.theme || a.theme || null,
                                    type: r.type || a.type || null,
                                    lang: r.lang || a.lang || null,
                                    tabindex: r.tabindex || a.tabindex || null,
                                    size: r.size || a.size || null,
                                    "expired-callback": c,
                                })
                                .then(function (e) {
                                    u(),
                                        (r.widgetId = e),
                                        r.onCreate({ widgetId: e }),
                                        r.$on("$destroy", l),
                                        r.$on("reCaptchaReset", function (n, i) {
                                            (t.isUndefined(i) || e === i) && ((r.response = ""), u());
                                        });
                                }),
                                p();
                        });
                    },
                };
            },
        ]);
    })(angular),
    angular.module("simpleAngularSocialLinks", []).directive("simpleAngularSocialLinks", [
        "$location",
        function (t) {
            return {
                link: function (e, n, i) {
                    var r,
                        o,
                        a = i.shareLinks.toLowerCase().split(","),
                        s = encodeURIComponent(t.absUrl()),
                        l = escape(i.shareTitle),
                        c = escape(i.shareDescription),
                        u = encodeURIComponent(l),
                        d = [],
                        p = "";
                    for (
                        p = i.shareSquare && "true" === i.shareSquare.toString() ? "-square" : "",
                            angular.forEach(a, function (t) {
                                switch ((t = t.trim())) {
                                    case "twitter":
                                        o = "http://twitter.com/intent/tweet?text=" + u + "%20" + s;
                                        break;
                                    case "facebook":
                                        o = "http://facebook.com/sharer.php?u=" + s;
                                        break;
                                    case "tumblr":
                                        o = "http://www.tumblr.com/share/link?url=" + s + "&description=" + c + "&name=" + l;
                                        break;
                                    case "linkedin":
                                        o = "http://www.linkedin.com/shareArticle?mini=true&url=" + s + "&title=" + u;
                                }
                                ("twitter" === t || "facebook" === t || "tumblr" === t || "linkedin" === t) && d.push({ network: t, url: o });
                            }),
                            r = 0;
                        r < d.length;
                        r++
                    )
                        n.append('<a href="' + d[r].url + '" class="fa fa-' + d[r].network + p + '" target="_blank"><span>' + d[r].network + "</span></a> ");
                },
            };
        },
    ]),
    (ty.threads = angular.module("threads", [])),
    angular
        .module("threads")
        .config([
            "$stateProvider",
            function (t) {
                t.state("standard.threadItem", {
                    url: "/:board/threads/:threadTitle/:threadId",
                    resolve: {
                        thread: [
                            "$stateParams",
                            "tySubscribe",
                            function (t, e) {
                                var n = t.threadId;
                                return e.node(n);
                            },
                        ],
                    },
                    views: { "content@standard": { templateUrl: "/tmpl/threads/threadItem", controller: "threadItem" } },
                    data: { threads: !0 },
                });
            },
        ])
        .controller("threadItem", [
            "$scope",
            "$rootScope",
            "$state",
            "feed",
            "$stateParams",
            "thread",
            "$location",
            "$modal",
            function (t, e, n, i, r, o, a, s) {
                t.thread = o.data;
                var l = function () {
                    return t.thread.r && t.thread.r[0] ? t.thread.r[0] : "stories";
                };
                $("#content").addClass("fullContent"),
                    (e.story = t.thread),
                    t.$on("$destroy", function () {
                        (e.story = void 0), $("#content").removeClass("fullContent");
                    }),
                    (t.getBoard = l),
                    t.setCurrentChatID(t.getBoard()),
                    t.setCurrentThreadHref("/" + l() + "/threads"),
                    (t.threadId = r.threadId),
                    t.$on("moderatorEnabled", function () {
                        t.checkIsAuthor();
                    }),
                    (e.pageTitle = r.threadTitle + " - " + e.siteName),
                    t.$on("editChanged", function () {
                        ty.put("node", t.thread, function (t) {});
                    });
                var c = function () {
                    return t.thread;
                };
                (t.editNode = function () {
                    s.open(t.nodeSettings);
                }),
                    (t.nodeSettings = {
                        backdrop: !0,
                        keyboard: !0,
                        backdropClick: !0,
                        templateUrl: "/tmpl/threads/threadEdit",
                        controller: [
                            "$scope",
                            "$modalInstance",
                            function (t, e) {
                                (t.thread = c()),
                                    (t.close = function (n) {
                                        ty.put("node", t.thread), e.close(n);
                                    });
                            },
                        ],
                    }),
                    (t.checkIsAuthor = function () {
                        e.currentUser && t.thread && t.thread.u && -1 != _.pluck(t.thread.u, "_id").indexOf(e.currentUser._id) ? (t.threadAuthor = !0) : e.moderatorEnabled ? (t.threadAuthor = !0) : (t.threadAuthor = !1);
                    }),
                    (e.setImage = function () {
                        ty.upload("images", function (e) {
                            (t.thread.i = [e]),
                                ty.put("node", t.thread, function () {
                                    t.$digest();
                                }),
                                analytics.track("Story image uploaded", { image: e });
                        });
                    }),
                    t.$on("login", function () {
                        t.checkIsAuthor();
                    }),
                    t.checkIsAuthor();
            },
        ]),
    (function (t) {
        "function" == typeof define && define.amd ? define(["jquery"], t) : t(jQuery);
    })(function (t) {
        function e(t) {
            if ((t.minTime && (t.minTime = g(t.minTime)), t.maxTime && (t.maxTime = g(t.maxTime)), t.durationTime && "function" != typeof t.durationTime && (t.durationTime = g(t.durationTime)), t.disableTimeRanges.length > 0)) {
                for (var e in t.disableTimeRanges) t.disableTimeRanges[e] = [g(t.disableTimeRanges[e][0]), g(t.disableTimeRanges[e][1])];
                t.disableTimeRanges = t.disableTimeRanges.sort(function (t, e) {
                    return t[0] - e[0];
                });
            }
            return t;
        }
        function n(e) {
            var n = e.data("timepicker-settings"),
                i = e.data("timepicker-list");
            i && i.length && (i.remove(), e.data("timepicker-list", !1)), (i = t("<ul />", { class: "ui-timepicker-list" }));
            var r = t("<div />", { class: "ui-timepicker-wrapper", tabindex: -1 });
            r.css({ display: "none", position: "absolute" }).append(i), n.className && r.addClass(n.className), (null === n.minTime && null === n.durationTime) || !n.showDuration || r.addClass("ui-timepicker-with-duration");
            var o = n.minTime;
            "function" == typeof n.durationTime ? (o = g(n.durationTime())) : null !== n.durationTime && (o = n.durationTime);
            var a = null !== n.minTime ? n.minTime : 0,
                l = null !== n.maxTime ? n.maxTime : a + w - 1;
            a >= l && (l += w);
            for (var c = n.disableTimeRanges, u = 0, d = c.length, p = a; l >= p; p += 60 * n.step) {
                var h = p % w,
                    y = t("<li />");
                if ((y.data("time", h), y.text(v(h, n.timeFormat)), (null !== n.minTime || null !== n.durationTime) && n.showDuration)) {
                    var b = t("<span />");
                    b.addClass("ui-timepicker-duration"), b.text(" (" + m(p - o) + ")"), y.append(b);
                }
                d > u && (h >= c[u][0] && h < c[u][1] ? y.addClass("ui-timepicker-disabled") : h >= c[u][1] && (u += 1)), i.append(y);
            }
            r.data("timepicker-input", e), e.data("timepicker-list", r);
            var $ = n.appendTo;
            "string" == typeof $ ? ($ = t($)) : "function" == typeof $ && ($ = $(e)),
                $.append(r),
                s(e, i),
                i.on("click", "li", function (n) {
                    e.off("focus.timepicker"),
                        e.on("focus.timepicker-ie-hack", function () {
                            e.off("focus.timepicker-ie-hack"), e.on("focus.timepicker", k.show);
                        }),
                        e[0].focus(),
                        i.find("li").removeClass("ui-timepicker-selected"),
                        t(this).addClass("ui-timepicker-selected"),
                        f(e) && r.hide();
                });
        }
        function i() {
            return new Date(1970, 1, 1, 0, 0, 0);
        }
        function r(e) {
            "ontouchstart" in document ? t("body").on("touchstart.ui-timepicker", o) : (t("body").on("mousedown.ui-timepicker", o), e.closeOnWindowScroll && t(window).on("scroll.ui-timepicker", o));
        }
        function o(e) {
            var n = t(e.target),
                i = n.closest(".ui-timepicker-input");
            0 === i.length && 0 === n.closest(".ui-timepicker-wrapper").length && (k.hide(), t("body").unbind(".ui-timepicker"), t(window).unbind(".ui-timepicker"));
        }
        function a(e, n, i) {
            if (!i && 0 !== i) return !1;
            var r = e.data("timepicker-settings"),
                o = !1,
                a = 30 * r.step;
            return (
                n.find("li").each(function (e, n) {
                    var r = t(n),
                        s = r.data("time") - i;
                    return Math.abs(s) < a || s == a ? ((o = r), !1) : void 0;
                }),
                o
            );
        }
        function s(t, e) {
            e.find("li").removeClass("ui-timepicker-selected");
            var n = g(c(t));
            if (n) {
                var i = a(t, e, n);
                if (i) {
                    var r = i.offset().top - e.offset().top;
                    (r + i.outerHeight() > e.outerHeight() || 0 > r) && e.scrollTop(e.scrollTop() + i.position().top - i.outerHeight()), i.addClass("ui-timepicker-selected");
                }
            }
        }
        function l() {
            if ("" !== this.value) {
                var e = t(this),
                    n = g(this.value);
                if (null === n) return void e.trigger("timeFormatError");
                var i = e.data("timepicker-settings");
                if (
                    (null !== i.minTime && n < i.minTime ? e.trigger("timeRangeError") : null !== i.maxTime && n > i.maxTime && e.trigger("timeRangeError"),
                    t.each(i.disableTimeRanges, function () {
                        return n >= this[0] && n < this[1] ? (e.trigger("timeRangeError"), !1) : void 0;
                    }),
                    i.forceRoundTime)
                ) {
                    var r = n % (60 * i.step);
                    r >= 30 * i.step ? (n += 60 * i.step - r) : (n -= r);
                }
                var o = v(n, i.timeFormat);
                u(e, o);
            }
        }
        function c(t) {
            return t.is("input") ? t.val() : t.data("ui-timepicker-value");
        }
        function u(t, e) {
            t.is("input") ? t.val(e) : t.data("ui-timepicker-value", e);
        }
        function d(e) {
            var n = t(this),
                i = n.data("timepicker-list");
            if (!i || !i.is(":visible")) {
                if (40 != e.keyCode) return p(e, n);
                n.focus();
            }
            switch (e.keyCode) {
                case 13:
                    return f(n) && k.hide.apply(this), e.preventDefault(), !1;
                case 38:
                    var r = i.find(".ui-timepicker-selected");
                    return (
                        r.length
                            ? r.is(":first-child") || (r.removeClass("ui-timepicker-selected"), r.prev().addClass("ui-timepicker-selected"), r.prev().position().top < r.outerHeight() && i.scrollTop(i.scrollTop() - r.outerHeight()))
                            : (i.find("li").each(function (e, n) {
                                  return t(n).position().top > 0 ? ((r = t(n)), !1) : void 0;
                              }),
                              r.addClass("ui-timepicker-selected")),
                        !1
                    );
                case 40:
                    return (
                        (r = i.find(".ui-timepicker-selected")),
                        0 === r.length
                            ? (i.find("li").each(function (e, n) {
                                  return t(n).position().top > 0 ? ((r = t(n)), !1) : void 0;
                              }),
                              r.addClass("ui-timepicker-selected"))
                            : r.is(":last-child") ||
                              (r.removeClass("ui-timepicker-selected"), r.next().addClass("ui-timepicker-selected"), r.next().position().top + 2 * r.outerHeight() > i.outerHeight() && i.scrollTop(i.scrollTop() + r.outerHeight())),
                        !1
                    );
                case 27:
                    i.find("li").removeClass("ui-timepicker-selected"), i.hide();
                    break;
                case 9:
                    k.hide();
                    break;
                default:
                    return p(e, n);
            }
        }
        function p(t, e) {
            return !e.data("timepicker-settings").disableTextInput || t.ctrlKey || t.altKey || t.metaKey || (2 != t.keyCode && (t.keyCode < 46 || t.keyCode > 90));
        }
        function h(e) {
            var n = t(this),
                i = n.data("timepicker-list");
            if (!i || !i.is(":visible")) return !0;
            switch (e.keyCode) {
                case 96:
                case 97:
                case 98:
                case 99:
                case 100:
                case 101:
                case 102:
                case 103:
                case 104:
                case 105:
                case 48:
                case 49:
                case 50:
                case 51:
                case 52:
                case 53:
                case 54:
                case 55:
                case 56:
                case 57:
                case 65:
                case 77:
                case 80:
                case 186:
                case 8:
                case 46:
                    s(n, i);
                    break;
                default:
                    return;
            }
        }
        function f(t) {
            var e = t.data("timepicker-settings"),
                n = t.data("timepicker-list"),
                i = null,
                r = n.find(".ui-timepicker-selected");
            if (r.hasClass("ui-timepicker-disabled")) return !1;
            if ((r.length ? (i = r.data("time")) : c(t) && ((i = g(c(t))), s(t, n)), null !== i)) {
                var o = v(i, e.timeFormat);
                u(t, o);
            }
            return t.trigger("change").trigger("changeTime"), !0;
        }
        function m(t) {
            var e,
                n = Math.round(t / 60);
            if (Math.abs(n) < 60) e = [n, x.mins];
            else if (60 == n) e = ["1", x.hr];
            else {
                var i = (n / 60).toFixed(1);
                "." != x.decimal && (i = i.replace(".", x.decimal)), (e = [i, x.hrs]);
            }
            return e.join(" ");
        }
        function v(t, e) {
            if (null !== t) {
                for (var n, i, r = new Date(b.valueOf() + 1e3 * t), o = "", a = 0; a < e.length; a++)
                    switch ((i = e.charAt(a))) {
                        case "a":
                            o += r.getHours() > 11 ? "pm" : "am";
                            break;
                        case "A":
                            o += r.getHours() > 11 ? "PM" : "AM";
                            break;
                        case "g":
                            (n = r.getHours() % 12), (o += 0 === n ? "12" : n);
                            break;
                        case "G":
                            o += r.getHours();
                            break;
                        case "h":
                            (n = r.getHours() % 12), 0 !== n && 10 > n && (n = "0" + n), (o += 0 === n ? "12" : n);
                            break;
                        case "H":
                            (n = r.getHours()), (o += n > 9 ? n : "0" + n);
                            break;
                        case "i":
                            var s = r.getMinutes();
                            o += s > 9 ? s : "0" + s;
                            break;
                        case "s":
                            (t = r.getSeconds()), (o += t > 9 ? t : "0" + t);
                            break;
                        default:
                            o += i;
                    }
                return o;
            }
        }
        function g(t) {
            if ("" === t) return null;
            if (!t || t + 0 == t) return t;
            "object" == typeof t && (t = t.getHours() + ":" + y(t.getMinutes()) + ":" + y(t.getSeconds())), (t = t.toLowerCase());
            var e;
            new Date(0);
            if (
                (-1 === t.indexOf(":")
                    ? ((e = t.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/)), e || (e = t.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/)))
                    : (e = t.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/)),
                !e)
            )
                return null;
            var n,
                i = parseInt(1 * e[1], 10);
            n = e[4] ? (12 == i ? ("p" == e[4] ? 12 : 0) : i + ("p" == e[4] ? 12 : 0)) : i;
            var r = 1 * e[2] || 0,
                o = 1 * e[3] || 0;
            return 3600 * n + 60 * r + o;
        }
        function y(t) {
            return ("0" + t).slice(-2);
        }
        var b = i(),
            w = 86400,
            $ = {
                className: null,
                minTime: null,
                maxTime: null,
                durationTime: null,
                step: 30,
                showDuration: !1,
                timeFormat: "g:ia",
                scrollDefaultNow: !1,
                scrollDefaultTime: !1,
                selectOnBlur: !1,
                disableTouchKeyboard: !0,
                forceRoundTime: !1,
                appendTo: "body",
                disableTimeRanges: [],
                closeOnWindowScroll: !1,
                disableTextInput: !1,
            },
            x = { decimal: ".", mins: "mins", hr: "hr", hrs: "hrs" },
            k = {
                init: function (n) {
                    return this.each(function () {
                        var i = t(this);
                        if ("SELECT" == i[0].tagName) {
                            for (var r = { type: "text", value: i.val() }, o = i[0].attributes, a = 0; a < o.length; a++) r[o[a].nodeName] = o[a].nodeValue;
                            var s = t("<input />", r);
                            i.replaceWith(s), (i = s);
                        }
                        var c = t.extend({}, $);
                        n && (c = t.extend(c, n)),
                            c.lang && (x = t.extend(x, c.lang)),
                            (c = e(c)),
                            i.data("timepicker-settings", c),
                            i.prop("autocomplete", "off"),
                            i.on("click.timepicker focus.timepicker", k.show),
                            i.on("blur.timepicker", l),
                            i.on("keydown.timepicker", d),
                            i.on("keyup.timepicker", h),
                            i.addClass("ui-timepicker-input"),
                            l.call(i.get(0));
                    });
                },
                show: function (e) {
                    var i = t(this),
                        o = i.data("timepicker-settings");
                    "ontouchstart" in document && o.disableTouchKeyboard && i.blur();
                    var s = i.data("timepicker-list");
                    if (!i.prop("readonly") && ((s && 0 !== s.length && "function" != typeof o.durationTime) || (n(i), (s = i.data("timepicker-list"))), !s.is(":visible"))) {
                        k.hide(),
                            s.show(),
                            i.offset().top + i.outerHeight(!0) + s.outerHeight() > t(window).height() + t(window).scrollTop()
                                ? s.offset({ left: i.offset().left + parseInt(s.css("marginLeft").replace("px", ""), 10), top: i.offset().top - s.outerHeight() + parseInt(s.css("marginTop").replace("px", ""), 10) })
                                : s.offset({ left: i.offset().left + parseInt(s.css("marginLeft").replace("px", ""), 10), top: i.offset().top + i.outerHeight() + parseInt(s.css("marginTop").replace("px", ""), 10) });
                        var l = s.find(".ui-timepicker-selected");
                        if ((l.length || (c(i) ? (l = a(i, s, g(c(i)))) : o.scrollDefaultNow ? (l = a(i, s, g(new Date()))) : o.scrollDefaultTime !== !1 && (l = a(i, s, g(o.scrollDefaultTime)))), l && l.length)) {
                            var u = s.scrollTop() + l.position().top - l.outerHeight();
                            s.scrollTop(u);
                        } else s.scrollTop(0);
                        r(o), i.trigger("showTimepicker");
                    }
                },
                hide: function (e) {
                    t(".ui-timepicker-wrapper:visible").each(function () {
                        var e = t(this),
                            n = e.data("timepicker-input"),
                            i = n.data("timepicker-settings");
                        i && i.selectOnBlur && f(n), e.hide(), n.trigger("hideTimepicker");
                    });
                },
                option: function (n, i) {
                    var r = this,
                        o = r.data("timepicker-settings"),
                        a = r.data("timepicker-list");
                    if ("object" == typeof n) o = t.extend(o, n);
                    else if ("string" == typeof n && "undefined" != typeof i) o[n] = i;
                    else if ("string" == typeof n) return o[n];
                    return (o = e(o)), r.data("timepicker-settings", o), a && (a.remove(), r.data("timepicker-list", !1)), r;
                },
                getSecondsFromMidnight: function () {
                    return g(c(this));
                },
                getTime: function () {
                    var t = this,
                        e = new Date();
                    return e.setHours(0, 0, 0, 0), new Date(e.valueOf() + 1e3 * g(c(t)));
                },
                setTime: function (t) {
                    var e = this,
                        n = v(g(t), e.data("timepicker-settings").timeFormat);
                    u(e, n);
                },
                remove: function () {
                    var t = this;
                    t.hasClass("ui-timepicker-input") &&
                        (t.removeAttr("autocomplete", "off"),
                        t.removeClass("ui-timepicker-input"),
                        t.removeData("timepicker-settings"),
                        t.off(".timepicker"),
                        t.data("timepicker-list") && t.data("timepicker-list").remove(),
                        t.removeData("timepicker-list"));
                },
            };
        t.fn.timepicker = function (e) {
            return k[e] ? k[e].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof e && e ? void t.error("Method " + e + " does not exist on jQuery.timepicker") : k.init.apply(this, arguments);
        };
    }),
    (function () {
        "use strict";
        var t = angular.module("pasvaz.bindonce", []);
        t.directive("bindonce", function () {
            var t = function (t) {
                    if (t && 0 !== t.length) {
                        var e = angular.lowercase("" + t);
                        t = !("f" === e || "0" === e || "false" === e || "no" === e || "n" === e || "[]" === e);
                    } else t = !1;
                    return t;
                },
                e = parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent)) || [])[1], 10);
            isNaN(e) && (e = parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent)) || [])[1], 10));
            var n = {
                restrict: "AM",
                controller: [
                    "$scope",
                    "$element",
                    "$attrs",
                    "$interpolate",
                    function (n, i, r, o) {
                        var a = function (e, n, i) {
                                var r = "show" === n ? "" : "none",
                                    o = "hide" === n ? "" : "none";
                                e.css("display", t(i) ? r : o);
                            },
                            s = function (t, e) {
                                if (angular.isObject(e) && !angular.isArray(e)) {
                                    var n = [];
                                    angular.forEach(e, function (t, e) {
                                        t && n.push(e);
                                    }),
                                        (e = n);
                                }
                                e && t.addClass(angular.isArray(e) ? e.join(" ") : e);
                            },
                            l = function (t, e) {
                                t.transclude(e, function (e) {
                                    var n = t.element.parent(),
                                        i = t.element && t.element[t.element.length - 1],
                                        r = (n && n[0]) || (i && i.parentNode),
                                        o = (i && i.nextSibling) || null;
                                    angular.forEach(e, function (t) {
                                        r.insertBefore(t, o);
                                    });
                                });
                            },
                            c = {
                                watcherRemover: void 0,
                                binders: [],
                                group: r.boName,
                                element: i,
                                ran: !1,
                                addBinder: function (t) {
                                    this.binders.push(t), this.ran && this.runBinders();
                                },
                                setupWatcher: function (t) {
                                    var e = this;
                                    this.watcherRemover = n.$watch(
                                        t,
                                        function (t) {
                                            void 0 !== t && (e.removeWatcher(), e.checkBindonce(t));
                                        },
                                        !0
                                    );
                                },
                                checkBindonce: function (t) {
                                    var e = this,
                                        n = t.$promise ? t.$promise.then : t.then;
                                    "function" == typeof n
                                        ? n(function () {
                                              e.runBinders();
                                          })
                                        : e.runBinders();
                                },
                                removeWatcher: function () {
                                    void 0 !== this.watcherRemover && (this.watcherRemover(), (this.watcherRemover = void 0));
                                },
                                runBinders: function () {
                                    for (; this.binders.length > 0; ) {
                                        var n = this.binders.shift();
                                        if (!this.group || this.group == n.group) {
                                            var i = n.scope.$eval(n.interpolate ? o(n.value) : n.value);
                                            switch (n.attr) {
                                                case "boIf":
                                                    t(i) && l(n, n.scope.$new());
                                                    break;
                                                case "boSwitch":
                                                    var r,
                                                        c = n.controller[0];
                                                    (r = c.cases["!" + i] || c.cases["?"]) &&
                                                        (n.scope.$eval(n.attrs.change),
                                                        angular.forEach(r, function (t) {
                                                            l(t, n.scope.$new());
                                                        }));
                                                    break;
                                                case "boSwitchWhen":
                                                    var u = n.controller[0];
                                                    (u.cases["!" + n.attrs.boSwitchWhen] = u.cases["!" + n.attrs.boSwitchWhen] || []), u.cases["!" + n.attrs.boSwitchWhen].push({ transclude: n.transclude, element: n.element });
                                                    break;
                                                case "boSwitchDefault":
                                                    var u = n.controller[0];
                                                    (u.cases["?"] = u.cases["?"] || []), u.cases["?"].push({ transclude: n.transclude, element: n.element });
                                                    break;
                                                case "hide":
                                                case "show":
                                                    a(n.element, n.attr, i);
                                                    break;
                                                case "class":
                                                    s(n.element, i);
                                                    break;
                                                case "text":
                                                    n.element.text(i);
                                                    break;
                                                case "html":
                                                    n.element.html(i);
                                                    break;
                                                case "style":
                                                    n.element.css(i);
                                                    break;
                                                case "disabled":
                                                    n.element.prop("disabled", i);
                                                    break;
                                                case "src":
                                                    n.element.attr(n.attr, i), e && n.element.prop("src", i);
                                                    break;
                                                case "attr":
                                                    angular.forEach(n.attrs, function (t, e) {
                                                        var i, r;
                                                        e.match(/^boAttr./) &&
                                                            n.attrs[e] &&
                                                            ((i = e
                                                                .replace(/^boAttr/, "")
                                                                .replace(/([a-z])([A-Z])/g, "$1-$2")
                                                                .toLowerCase()),
                                                            (r = n.scope.$eval(n.attrs[e])),
                                                            n.element.attr(i, r));
                                                    });
                                                    break;
                                                case "href":
                                                case "alt":
                                                case "title":
                                                case "id":
                                                case "value":
                                                    n.element.attr(n.attr, i);
                                            }
                                        }
                                    }
                                    this.ran = !0;
                                },
                            };
                        angular.extend(this, c);
                    },
                ],
                link: function (t, e, n, i) {
                    var r = n.bindonce && t.$eval(n.bindonce);
                    void 0 !== r ? i.checkBindonce(r) : (i.setupWatcher(n.bindonce), e.bind("$destroy", i.removeWatcher));
                },
            };
            return n;
        }),
            angular.forEach(
                [
                    { directiveName: "boShow", attribute: "show" },
                    { directiveName: "boHide", attribute: "hide" },
                    { directiveName: "boClass", attribute: "class" },
                    { directiveName: "boText", attribute: "text" },
                    { directiveName: "boBind", attribute: "text" },
                    { directiveName: "boHtml", attribute: "html" },
                    { directiveName: "boSrcI", attribute: "src", interpolate: !0 },
                    { directiveName: "boSrc", attribute: "src" },
                    { directiveName: "boHrefI", attribute: "href", interpolate: !0 },
                    { directiveName: "boHref", attribute: "href" },
                    { directiveName: "boAlt", attribute: "alt" },
                    { directiveName: "boTitle", attribute: "title" },
                    { directiveName: "boId", attribute: "id" },
                    { directiveName: "boStyle", attribute: "style" },
                    { directiveName: "boDisabled", attribute: "disabled" },
                    { directiveName: "boValue", attribute: "value" },
                    { directiveName: "boAttr", attribute: "attr" },
                    { directiveName: "boIf", transclude: "element", terminal: !0, priority: 1e3 },
                    {
                        directiveName: "boSwitch",
                        require: "boSwitch",
                        controller: function () {
                            this.cases = {};
                        },
                    },
                    { directiveName: "boSwitchWhen", transclude: "element", priority: 800, require: "^boSwitch" },
                    { directiveName: "boSwitchDefault", transclude: "element", priority: 800, require: "^boSwitch" },
                ],
                function (e) {
                    var n = 200;
                    return t.directive(e.directiveName, function () {
                        var t = {
                            priority: e.priority || n,
                            transclude: e.transclude || !1,
                            terminal: e.terminal || !1,
                            require: ["^bindonce"].concat(e.require || []),
                            controller: e.controller,
                            compile: function (t, n, i) {
                                return function (t, n, r, o) {
                                    var a = o[0],
                                        s = r.boParent;
                                    if (s && a.group !== s) {
                                        var l = a.element.parent();
                                        a = void 0;
                                        for (var c; 9 !== l[0].nodeType && l.length; ) {
                                            if ((c = l.data("$bindonceController")) && c.group === s) {
                                                a = c;
                                                break;
                                            }
                                            l = l.parent();
                                        }
                                        if (!a) throw new Error("No bindonce controller: " + s);
                                    }
                                    a.addBinder({ element: n, attr: e.attribute || e.directiveName, attrs: r, value: r[e.directiveName], interpolate: e.interpolate, group: s, transclude: i, controller: o.slice(1), scope: t });
                                };
                            },
                        };
                        return t;
                    });
                }
            );
    })();
var deviceIsAndroid = navigator.userAgent.indexOf("Android") > 0,
    deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent),
    deviceIsIOS4 = deviceIsIOS && /OS 4_\d(_\d)?/.test(navigator.userAgent),
    deviceIsIOSWithBadTarget = deviceIsIOS && /OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);
(FastClick.prototype.needsClick = function (t) {
    "use strict";
    switch (t.nodeName.toLowerCase()) {
        case "button":
        case "select":
        case "textarea":
            if (t.disabled) return !0;
            break;
        case "input":
            if ((deviceIsIOS && "file" === t.type) || t.disabled) return !0;
            break;
        case "label":
        case "video":
            return !0;
    }
    return /\bneedsclick\b/.test(t.className);
}),
    (FastClick.prototype.needsFocus = function (t) {
        "use strict";
        switch (t.nodeName.toLowerCase()) {
            case "textarea":
                return !0;
            case "select":
                return !deviceIsAndroid;
            case "input":
                switch (t.type) {
                    case "button":
                    case "checkbox":
                    case "file":
                    case "image":
                    case "radio":
                    case "submit":
                        return !1;
                }
                return !t.disabled && !t.readOnly;
            default:
                return /\bneedsfocus\b/.test(t.className);
        }
    }),
    (FastClick.prototype.sendClick = function (t, e) {
        "use strict";
        var n, i;
        document.activeElement && document.activeElement !== t && document.activeElement.blur(),
            (i = e.changedTouches[0]),
            (n = document.createEvent("MouseEvents")),
            n.initMouseEvent(this.determineEventType(t), !0, !0, window, 1, i.screenX, i.screenY, i.clientX, i.clientY, !1, !1, !1, !1, 0, null),
            (n.forwardedTouchEvent = !0),
            t.dispatchEvent(n);
    }),
    (FastClick.prototype.determineEventType = function (t) {
        "use strict";
        return deviceIsAndroid && "select" === t.tagName.toLowerCase() ? "mousedown" : "click";
    }),
    (FastClick.prototype.focus = function (t) {
        "use strict";
        var e;
        deviceIsIOS && t.setSelectionRange && 0 !== t.type.indexOf("date") && "time" !== t.type ? ((e = t.value.length), t.setSelectionRange(e, e)) : t.focus();
    }),
    (FastClick.prototype.updateScrollParent = function (t) {
        "use strict";
        var e, n;
        if (((e = t.fastClickScrollParent), !e || !e.contains(t))) {
            n = t;
            do {
                if (n.scrollHeight > n.offsetHeight) {
                    (e = n), (t.fastClickScrollParent = n);
                    break;
                }
                n = n.parentElement;
            } while (n);
        }
        e && (e.fastClickLastScrollTop = e.scrollTop);
    }),
    (FastClick.prototype.getTargetElementFromEventTarget = function (t) {
        "use strict";
        return t.nodeType === Node.TEXT_NODE ? t.parentNode : t;
    }),
    (FastClick.prototype.onTouchStart = function (t) {
        "use strict";
        var e, n, i;
        if (t.targetTouches.length > 1) return !0;
        if (((e = this.getTargetElementFromEventTarget(t.target)), (n = t.targetTouches[0]), deviceIsIOS)) {
            if (((i = window.getSelection()), i.rangeCount && !i.isCollapsed)) return !0;
            if (!deviceIsIOS4) {
                if (n.identifier === this.lastTouchIdentifier) return t.preventDefault(), !1;
                (this.lastTouchIdentifier = n.identifier), this.updateScrollParent(e);
            }
        }
        return (
            (this.trackingClick = !0), (this.trackingClickStart = t.timeStamp), (this.targetElement = e), (this.touchStartX = n.pageX), (this.touchStartY = n.pageY), t.timeStamp - this.lastClickTime < this.tapDelay && t.preventDefault(), !0
        );
    }),
    (FastClick.prototype.touchHasMoved = function (t) {
        "use strict";
        var e = t.changedTouches[0],
            n = this.touchBoundary;
        return Math.abs(e.pageX - this.touchStartX) > n || Math.abs(e.pageY - this.touchStartY) > n ? !0 : !1;
    }),
    (FastClick.prototype.onTouchMove = function (t) {
        "use strict";
        return this.trackingClick ? ((this.targetElement !== this.getTargetElementFromEventTarget(t.target) || this.touchHasMoved(t)) && ((this.trackingClick = !1), (this.targetElement = null)), !0) : !0;
    }),
    (FastClick.prototype.findControl = function (t) {
        "use strict";
        return void 0 !== t.control ? t.control : t.htmlFor ? document.getElementById(t.htmlFor) : t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea");
    }),
    (FastClick.prototype.onTouchEnd = function (t) {
        "use strict";
        var e,
            n,
            i,
            r,
            o,
            a = this.targetElement;
        if (!this.trackingClick) return !0;
        if (t.timeStamp - this.lastClickTime < this.tapDelay) return (this.cancelNextClick = !0), !0;
        if (
            ((this.cancelNextClick = !1),
            (this.lastClickTime = t.timeStamp),
            (n = this.trackingClickStart),
            (this.trackingClick = !1),
            (this.trackingClickStart = 0),
            deviceIsIOSWithBadTarget && ((o = t.changedTouches[0]), (a = document.elementFromPoint(o.pageX - window.pageXOffset, o.pageY - window.pageYOffset) || a), (a.fastClickScrollParent = this.targetElement.fastClickScrollParent)),
            (i = a.tagName.toLowerCase()),
            "label" === i)
        ) {
            if ((e = this.findControl(a))) {
                if ((this.focus(a), deviceIsAndroid)) return !1;
                a = e;
            }
        } else if (this.needsFocus(a))
            return t.timeStamp - n > 100 || (deviceIsIOS && window.top !== window && "input" === i)
                ? ((this.targetElement = null), !1)
                : (this.focus(a), this.sendClick(a, t), (deviceIsIOS && "select" === i) || ((this.targetElement = null), t.preventDefault()), !1);
        return deviceIsIOS && !deviceIsIOS4 && ((r = a.fastClickScrollParent), r && r.fastClickLastScrollTop !== r.scrollTop) ? !0 : (this.needsClick(a) || (t.preventDefault(), this.sendClick(a, t)), !1);
    }),
    (FastClick.prototype.onTouchCancel = function () {
        "use strict";
        (this.trackingClick = !1), (this.targetElement = null);
    }),
    (FastClick.prototype.onMouse = function (t) {
        "use strict";
        return this.targetElement
            ? t.forwardedTouchEvent
                ? !0
                : t.cancelable && (!this.needsClick(this.targetElement) || this.cancelNextClick)
                ? (t.stopImmediatePropagation ? t.stopImmediatePropagation() : (t.propagationStopped = !0), t.stopPropagation(), t.preventDefault(), !1)
                : !0
            : !0;
    }),
    (FastClick.prototype.onClick = function (t) {
        "use strict";
        var e;
        return this.trackingClick ? ((this.targetElement = null), (this.trackingClick = !1), !0) : "submit" === t.target.type && 0 === t.detail ? !0 : ((e = this.onMouse(t)), e || (this.targetElement = null), e);
    }),
    (FastClick.prototype.destroy = function () {
        "use strict";
        var t = this.layer;
        deviceIsAndroid && (t.removeEventListener("mouseover", this.onMouse, !0), t.removeEventListener("mousedown", this.onMouse, !0), t.removeEventListener("mouseup", this.onMouse, !0)),
            t.removeEventListener("click", this.onClick, !0),
            t.removeEventListener("touchstart", this.onTouchStart, !1),
            t.removeEventListener("touchmove", this.onTouchMove, !1),
            t.removeEventListener("touchend", this.onTouchEnd, !1),
            t.removeEventListener("touchcancel", this.onTouchCancel, !1);
    }),
    (FastClick.notNeeded = function (t) {
        "use strict";
        var e, n;
        if ("undefined" == typeof window.ontouchstart) return !0;
        if ((n = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1])) {
            if (!deviceIsAndroid) return !0;
            if ((e = document.querySelector("meta[name=viewport]"))) {
                if (-1 !== e.content.indexOf("user-scalable=no")) return !0;
                if (n > 31 && document.documentElement.scrollWidth <= window.outerWidth) return !0;
            }
        }
        return "none" === t.style.msTouchAction ? !0 : !1;
    }),
    (FastClick.attach = function (t, e) {
        "use strict";
        return new FastClick(t, e);
    }),
    "undefined" != typeof define && define.amd
        ? define(function () {
              "use strict";
              return FastClick;
          })
        : "undefined" != typeof module && module.exports
        ? ((module.exports = FastClick.attach), (module.exports.FastClick = FastClick))
        : (window.FastClick = FastClick),
    (ty.responsive = {
        isSmallTablet: function () {
            return window.innerWidth <= 1024 && window.innerWidth > 480 ? !0 : !1;
        },
        isPhone: function () {
            return window.innerWidth <= 480 ? !0 : !1;
        },
    }),
    (ty.isMobile = (function () {
        var t = !1;
        return (
            (function (e) {
                (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(
                    e
                ) ||
                    /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(
                        e.substr(0, 4)
                    )) &&
                    (t = !0);
            })(navigator.userAgent || navigator.vendor || window.opera),
            t
        );
    })()),
    !(function (t) {
        if ("object" == typeof exports && "undefined" != typeof module) module.exports = t();
        else if ("function" == typeof define && define.amd) define([], t);
        else {
            var e;
            "undefined" != typeof window ? (e = window) : "undefined" != typeof global ? (e = global) : "undefined" != typeof self && (e = self), (e.jade = t());
        }
    })(function () {
        return (function t(e, n, i) {
            function r(a, s) {
                if (!n[a]) {
                    if (!e[a]) {
                        var l = "function" == typeof require && require;
                        if (!s && l) return l(a, !0);
                        if (o) return o(a, !0);
                        var c = new Error("Cannot find module '" + a + "'");
                        throw ((c.code = "MODULE_NOT_FOUND"), c);
                    }
                    var u = (n[a] = { exports: {} });
                    e[a][0].call(
                        u.exports,
                        function (t) {
                            var n = e[a][1][t];
                            return r(n ? n : t);
                        },
                        u,
                        u.exports,
                        t,
                        e,
                        n,
                        i
                    );
                }
                return n[a].exports;
            }
            for (var o = "function" == typeof require && require, a = 0; a < i.length; a++) r(i[a]);
            return r;
        })(
            {
                1: [
                    function (t, e, n) {
                        "use strict";
                        function i(t) {
                            return null != t && "" !== t;
                        }
                        function r(t) {
                            return (Array.isArray(t)
                                ? t.map(r)
                                : t && "object" == typeof t
                                ? Object.keys(t).filter(function (e) {
                                      return t[e];
                                  })
                                : [t]
                            )
                                .filter(i)
                                .join(" ");
                        }
                        (n.merge = function o(t, e) {
                            if (1 === arguments.length) {
                                for (var n = t[0], r = 1; r < t.length; r++) n = o(n, t[r]);
                                return n;
                            }
                            var a = t["class"],
                                s = e["class"];
                            (a || s) && ((a = a || []), (s = s || []), Array.isArray(a) || (a = [a]), Array.isArray(s) || (s = [s]), (t["class"] = a.concat(s).filter(i)));
                            for (var l in e) "class" != l && (t[l] = e[l]);
                            return t;
                        }),
                            (n.joinClasses = r),
                            (n.cls = function (t, e) {
                                for (var i = [], o = 0; o < t.length; o++) e && e[o] ? i.push(n.escape(r([t[o]]))) : i.push(r(t[o]));
                                var a = r(i);
                                return a.length ? ' class="' + a + '"' : "";
                            }),
                            (n.style = function (t) {
                                return t && "object" == typeof t
                                    ? Object.keys(t)
                                          .map(function (e) {
                                              return e + ":" + t[e];
                                          })
                                          .join(";")
                                    : t;
                            }),
                            (n.attr = function (t, e, i, r) {
                                return (
                                    "style" === t && (e = n.style(e)),
                                    "boolean" == typeof e || null == e
                                        ? e
                                            ? " " + (r ? t : t + '="' + t + '"')
                                            : ""
                                        : 0 == t.indexOf("data") && "string" != typeof e
                                        ? (-1 !== JSON.stringify(e).indexOf("&") && console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),
                                          e && "function" == typeof e.toISOString && console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0"),
                                          " " + t + "='" + JSON.stringify(e).replace(/'/g, "&apos;") + "'")
                                        : i
                                        ? (e && "function" == typeof e.toISOString && console.warn("Jade will stringify dates in ISO form after 2.0.0"), " " + t + '="' + n.escape(e) + '"')
                                        : (e && "function" == typeof e.toISOString && console.warn("Jade will stringify dates in ISO form after 2.0.0"), " " + t + '="' + e + '"')
                                );
                            }),
                            (n.attrs = function (t, e) {
                                var i = [],
                                    o = Object.keys(t);
                                if (o.length)
                                    for (var a = 0; a < o.length; ++a) {
                                        var s = o[a],
                                            l = t[s];
                                        "class" == s ? (l = r(l)) && i.push(" " + s + '="' + l + '"') : i.push(n.attr(s, l, !1, e));
                                    }
                                return i.join("");
                            }),
                            (n.escape = function (t) {
                                var e = String(t).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;");
                                return e === "" + t ? t : e;
                            }),
                            (n.rethrow = function a(e, n, i, r) {
                                if (!(e instanceof Error)) throw e;
                                if (!(("undefined" == typeof window && n) || r)) throw ((e.message += " on line " + i), e);
                                try {
                                    r = r || t("fs").readFileSync(n, "utf8");
                                } catch (o) {
                                    a(e, null, i);
                                }
                                var s = 3,
                                    l = r.split("\n"),
                                    c = Math.max(i - s, 0),
                                    u = Math.min(l.length, i + s),
                                    s = l
                                        .slice(c, u)
                                        .map(function (t, e) {
                                            var n = e + c + 1;
                                            return (n == i ? "  > " : "    ") + n + "| " + t;
                                        })
                                        .join("\n");
                                throw ((e.path = n), (e.message = (n || "Jade") + ":" + i + "\n" + s + "\n\n" + e.message), e);
                            });
                    },
                    { fs: 2 },
                ],
                2: [function (t, e, n) {}, {}],
            },
            {},
            [1]
        )(1);
    }),
    angular.module("localStorage", []).factory("$store", [
        "$parse",
        function (t) {
            var e = "undefined" == typeof window.localStorage ? void 0 : window.localStorage,
                n = !("undefined" == typeof e || "undefined" == typeof window.JSON),
                i = {
                    parseValue: function (t) {
                        var e;
                        try {
                            (e = JSON.parse(t)), "undefined" == typeof e && (e = t), "true" == e && (e = !0), "false" == e && (e = !1), parseFloat(e) != e || angular.isObject(e) || (e = parseFloat(e));
                        } catch (n) {
                            e = t;
                        }
                        return e;
                    },
                },
                r = {
                    set: function (t, r) {
                        if (!n)
                            try {
                                return $.cookie(t, r), r;
                            } catch (o) {
                                console.log("Local Storage not supported, make sure you have the $.cookie supported.");
                            }
                        var a = JSON.stringify(r);
                        return e.setItem(t, a), i.parseValue(a);
                    },
                    get: function (t) {
                        if (!n)
                            try {
                                return i.parseValue($.cookie(t));
                            } catch (r) {
                                return null;
                            }
                        var o = e.getItem(t);
                        return i.parseValue(o);
                    },
                    remove: function (t) {
                        if (!n)
                            try {
                                return $.cookie(t, null), !0;
                            } catch (i) {
                                return !1;
                            }
                        return e.removeItem(t), !0;
                    },
                    bind: function (e, n, i) {
                        return (
                            (i = i || ""),
                            r.get(n) || r.set(n, i),
                            t(n).assign(e, r.get(n)),
                            e.$watch(
                                n,
                                function (t) {
                                    r.set(n, t);
                                },
                                !0
                            ),
                            r.get(n)
                        );
                    },
                };
            return r;
        },
    ]),
    (function (t) {
        if ("object" == typeof exports && "undefined" != typeof module) module.exports = t();
        else if ("function" == typeof define && define.amd) define([], t);
        else {
            var e;
            (e = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this), (e.sanitizeHtml = t());
        }
    })(function () {
        return (function t(e, n, i) {
            function r(a, s) {
                if (!n[a]) {
                    if (!e[a]) {
                        var l = "function" == typeof require && require;
                        if (!s && l) return l(a, !0);
                        if (o) return o(a, !0);
                        var c = new Error("Cannot find module '" + a + "'");
                        throw ((c.code = "MODULE_NOT_FOUND"), c);
                    }
                    var u = (n[a] = { exports: {} });
                    e[a][0].call(
                        u.exports,
                        function (t) {
                            var n = e[a][1][t];
                            return r(n ? n : t);
                        },
                        u,
                        u.exports,
                        t,
                        e,
                        n,
                        i
                    );
                }
                return n[a].exports;
            }
            for (var o = "function" == typeof require && require, a = 0; a < i.length; a++) r(i[a]);
            return r;
        })(
            {
                1: [
                    function (t, e, n) {
                        function i(t, e) {
                            t &&
                                Object.keys(t).forEach(function (n) {
                                    e(t[n], n);
                                });
                        }
                        function r(t, e) {
                            return {}.hasOwnProperty.call(t, e);
                        }
                        function o(t, e, n) {
                            function u(t, e) {
                                var n = this;
                                (this.tag = t),
                                    (this.attribs = e || {}),
                                    (this.tagPosition = f.length),
                                    (this.text = ""),
                                    (this.updateParentNodeText = function () {
                                        if (x.length) {
                                            var t = x[x.length - 1];
                                            t.text += n.text;
                                        }
                                    });
                            }
                            function d(t) {
                                return "string" != typeof t && (t += ""), t.replace(/\&/g, "&amp;").replace(/</g, "&lt;").replace(/\>/g, "&gt;").replace(/\"/g, "&quot;");
                            }
                            function p(t, n) {
                                (n = n.replace(/[\x00-\x20]+/g, "")), (n = n.replace(/<\!\-\-.*?\-\-\>/g, ""));
                                var i = n.match(/^([a-zA-Z]+)\:/);
                                if (!i) return n.match(/^\/\//) ? !e.allowProtocolRelative : !1;
                                var o = i[1].toLowerCase();
                                return r(e.allowedSchemesByTag, t) ? -1 === e.allowedSchemesByTag[t].indexOf(o) : !e.allowedSchemes || -1 === e.allowedSchemes.indexOf(o);
                            }
                            function h(t, e) {
                                return e
                                    ? ((t = t.split(/\s+/)),
                                      t
                                          .filter(function (t) {
                                              return -1 !== e.indexOf(t);
                                          })
                                          .join(" "))
                                    : t;
                            }
                            var f = "";
                            e ? ((e = s(o.defaults, e)), e.parser ? (e.parser = s(c, e.parser)) : (e.parser = c)) : ((e = o.defaults), (e.parser = c));
                            var m,
                                v,
                                g = e.nonTextTags || ["script", "style", "textarea"];
                            e.allowedAttributes &&
                                ((m = {}),
                                (v = {}),
                                i(e.allowedAttributes, function (t, e) {
                                    m[e] = [];
                                    var n = [];
                                    t.forEach(function (t) {
                                        t.indexOf("*") >= 0 ? n.push(l(t).replace(/\\\*/g, ".*")) : m[e].push(t);
                                    }),
                                        (v[e] = new RegExp("^(" + n.join("|") + ")$"));
                                }));
                            var y = {};
                            i(e.allowedClasses, function (t, e) {
                                m && (r(m, e) || (m[e] = []), m[e].push("class")), (y[e] = t);
                            });
                            var b,
                                w = {};
                            i(e.transformTags, function (t, e) {
                                var n;
                                "function" == typeof t ? (n = t) : "string" == typeof t && (n = o.simpleTransform(t)), "*" === e ? (b = n) : (w[e] = n);
                            });
                            var $ = 0,
                                x = [],
                                k = {},
                                S = {},
                                C = !1,
                                _ = 0,
                                T = new a.Parser(
                                    {
                                        onopentag: function (t, n) {
                                            if (C) return void _++;
                                            var o = new u(t, n);
                                            x.push(o);
                                            var a,
                                                s = !1,
                                                l = o.text ? !0 : !1;
                                            r(w, t) && ((a = w[t](t, n)), (o.attribs = n = a.attribs), void 0 !== a.text && (o.innerText = a.text), t !== a.tagName && ((o.name = t = a.tagName), (S[$] = a.tagName))),
                                                b && ((a = b(t, n)), (o.attribs = n = a.attribs), t !== a.tagName && ((o.name = t = a.tagName), (S[$] = a.tagName))),
                                                e.allowedTags && -1 === e.allowedTags.indexOf(t) && ((s = !0), -1 !== g.indexOf(t) && ((C = !0), (_ = 1)), (k[$] = !0)),
                                                $++,
                                                s ||
                                                    ((f += "<" + t),
                                                    (!m || r(m, t) || m["*"]) &&
                                                        i(n, function (e, n) {
                                                            if (!m || (r(m, t) && -1 !== m[t].indexOf(n)) || (m["*"] && -1 !== m["*"].indexOf(n)) || (r(v, t) && v[t].test(n)) || (v["*"] && v["*"].test(n))) {
                                                                if (("href" === n || "src" === n) && p(t, e)) return void delete o.attribs[n];
                                                                if ("class" === n && ((e = h(e, y[t])), !e.length)) return void delete o.attribs[n];
                                                                (f += " " + n), e.length && (f += '="' + d(e) + '"');
                                                            } else delete o.attribs[n];
                                                        }),
                                                    -1 !== e.selfClosing.indexOf(t) ? (f += " />") : ((f += ">"), !o.innerText || l || e.textFilter || (f += o.innerText)));
                                        },
                                        ontext: function (t) {
                                            if (!C) {
                                                var n,
                                                    i = x[x.length - 1];
                                                if ((i && ((n = i.tag), (t = void 0 !== i.innerText ? i.innerText : t)), "script" === n || "style" === n)) f += t;
                                                else {
                                                    var r = d(t);
                                                    f += e.textFilter ? e.textFilter(r) : r;
                                                }
                                                if (x.length) {
                                                    var o = x[x.length - 1];
                                                    o.text += t;
                                                }
                                            }
                                        },
                                        onclosetag: function (t) {
                                            if (C) {
                                                if ((_--, _)) return;
                                                C = !1;
                                            }
                                            var n = x.pop();
                                            if (n) {
                                                if (((C = !1), $--, k[$])) return delete k[$], void n.updateParentNodeText();
                                                if ((S[$] && ((t = S[$]), delete S[$]), e.exclusiveFilter && e.exclusiveFilter(n))) return void (f = f.substr(0, n.tagPosition));
                                                n.updateParentNodeText(), -1 === e.selfClosing.indexOf(t) && (f += "</" + t + ">");
                                            }
                                        },
                                    },
                                    e.parser
                                );
                            return T.write(t), T.end(), f;
                        }
                        var a = t("htmlparser2"),
                            s = t("xtend"),
                            l = t("lodash.escaperegexp");
                        e.exports = o;
                        var c = { decodeEntities: !0 };
                        (o.defaults = {
                            allowedTags: ["h3", "h4", "h5", "h6", "blockquote", "p", "a", "ul", "ol", "nl", "li", "b", "i", "strong", "em", "strike", "code", "hr", "br", "div", "table", "thead", "caption", "tbody", "tr", "th", "td", "pre"],
                            allowedAttributes: { a: ["href", "name", "target"], img: ["src"] },
                            selfClosing: ["img", "br", "hr", "area", "base", "basefont", "input", "link", "meta"],
                            allowedSchemes: ["http", "https", "ftp", "mailto"],
                            allowedSchemesByTag: {},
                            allowProtocolRelative: !0,
                        }),
                            (o.simpleTransform = function (t, e, n) {
                                return (
                                    (n = void 0 === n ? !0 : n),
                                    (e = e || {}),
                                    function (i, r) {
                                        var o;
                                        if (n) for (o in e) r[o] = e[o];
                                        else r = e;
                                        return { tagName: t, attribs: r };
                                    }
                                );
                            });
                    },
                    { htmlparser2: 36, "lodash.escaperegexp": 41, xtend: 61 },
                ],
                2: [
                    function (t, e, n) {
                        "use strict";
                        function i(t) {
                            var e = t.length;
                            if (e % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
                            return "=" === t[e - 2] ? 2 : "=" === t[e - 1] ? 1 : 0;
                        }
                        function r(t) {
                            return (3 * t.length) / 4 - i(t);
                        }
                        function o(t) {
                            var e,
                                n,
                                r,
                                o,
                                a,
                                s = t.length;
                            (o = i(t)), (a = new d((3 * s) / 4 - o)), (n = o > 0 ? s - 4 : s);
                            var l = 0;
                            for (e = 0; n > e; e += 4)
                                (r = (u[t.charCodeAt(e)] << 18) | (u[t.charCodeAt(e + 1)] << 12) | (u[t.charCodeAt(e + 2)] << 6) | u[t.charCodeAt(e + 3)]), (a[l++] = (r >> 16) & 255), (a[l++] = (r >> 8) & 255), (a[l++] = 255 & r);
                            return (
                                2 === o
                                    ? ((r = (u[t.charCodeAt(e)] << 2) | (u[t.charCodeAt(e + 1)] >> 4)), (a[l++] = 255 & r))
                                    : 1 === o && ((r = (u[t.charCodeAt(e)] << 10) | (u[t.charCodeAt(e + 1)] << 4) | (u[t.charCodeAt(e + 2)] >> 2)), (a[l++] = (r >> 8) & 255), (a[l++] = 255 & r)),
                                a
                            );
                        }
                        function a(t) {
                            return c[(t >> 18) & 63] + c[(t >> 12) & 63] + c[(t >> 6) & 63] + c[63 & t];
                        }
                        function s(t, e, n) {
                            for (var i, r = [], o = e; n > o; o += 3) (i = (t[o] << 16) + (t[o + 1] << 8) + t[o + 2]), r.push(a(i));
                            return r.join("");
                        }
                        function l(t) {
                            for (var e, n = t.length, i = n % 3, r = "", o = [], a = 16383, l = 0, u = n - i; u > l; l += a) o.push(s(t, l, l + a > u ? u : l + a));
                            return (
                                1 === i
                                    ? ((e = t[n - 1]), (r += c[e >> 2]), (r += c[(e << 4) & 63]), (r += "=="))
                                    : 2 === i && ((e = (t[n - 2] << 8) + t[n - 1]), (r += c[e >> 10]), (r += c[(e >> 4) & 63]), (r += c[(e << 2) & 63]), (r += "=")),
                                o.push(r),
                                o.join("")
                            );
                        }
                        (n.byteLength = r), (n.toByteArray = o), (n.fromByteArray = l);
                        for (var c = [], u = [], d = "undefined" != typeof Uint8Array ? Uint8Array : Array, p = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", h = 0, f = p.length; f > h; ++h)
                            (c[h] = p[h]), (u[p.charCodeAt(h)] = h);
                        (u["-".charCodeAt(0)] = 62), (u["_".charCodeAt(0)] = 63);
                    },
                    {},
                ],
                3: [function (t, e, n) {}, {}],
                4: [
                    function (t, e, n) {
                        function i(t) {
                            if (t && !l(t)) throw new Error("Unknown encoding: " + t);
                        }
                        function r(t) {
                            return t.toString(this.encoding);
                        }
                        function o(t) {
                            (this.charReceived = t.length % 2), (this.charLength = this.charReceived ? 2 : 0);
                        }
                        function a(t) {
                            (this.charReceived = t.length % 3), (this.charLength = this.charReceived ? 3 : 0);
                        }
                        var s = t("buffer").Buffer,
                            l =
                                s.isEncoding ||
                                function (t) {
                                    switch (t && t.toLowerCase()) {
                                        case "hex":
                                        case "utf8":
                                        case "utf-8":
                                        case "ascii":
                                        case "binary":
                                        case "base64":
                                        case "ucs2":
                                        case "ucs-2":
                                        case "utf16le":
                                        case "utf-16le":
                                        case "raw":
                                            return !0;
                                        default:
                                            return !1;
                                    }
                                },
                            c = (n.StringDecoder = function (t) {
                                switch (((this.encoding = (t || "utf8").toLowerCase().replace(/[-_]/, "")), i(t), this.encoding)) {
                                    case "utf8":
                                        this.surrogateSize = 3;
                                        break;
                                    case "ucs2":
                                    case "utf16le":
                                        (this.surrogateSize = 2), (this.detectIncompleteChar = o);
                                        break;
                                    case "base64":
                                        (this.surrogateSize = 3), (this.detectIncompleteChar = a);
                                        break;
                                    default:
                                        return void (this.write = r);
                                }
                                (this.charBuffer = new s(6)), (this.charReceived = 0), (this.charLength = 0);
                            });
                        (c.prototype.write = function (t) {
                            for (var e = ""; this.charLength; ) {
                                var n = t.length >= this.charLength - this.charReceived ? this.charLength - this.charReceived : t.length;
                                if ((t.copy(this.charBuffer, this.charReceived, 0, n), (this.charReceived += n), this.charReceived < this.charLength)) return "";
                                (t = t.slice(n, t.length)), (e = this.charBuffer.slice(0, this.charLength).toString(this.encoding));
                                var i = e.charCodeAt(e.length - 1);
                                if (!(i >= 55296 && 56319 >= i)) {
                                    if (((this.charReceived = this.charLength = 0), 0 === t.length)) return e;
                                    break;
                                }
                                (this.charLength += this.surrogateSize), (e = "");
                            }
                            this.detectIncompleteChar(t);
                            var r = t.length;
                            this.charLength && (t.copy(this.charBuffer, 0, t.length - this.charReceived, r), (r -= this.charReceived)), (e += t.toString(this.encoding, 0, r));
                            var r = e.length - 1,
                                i = e.charCodeAt(r);
                            if (i >= 55296 && 56319 >= i) {
                                var o = this.surrogateSize;
                                return (this.charLength += o), (this.charReceived += o), this.charBuffer.copy(this.charBuffer, o, 0, o), t.copy(this.charBuffer, 0, 0, o), e.substring(0, r);
                            }
                            return e;
                        }),
                            (c.prototype.detectIncompleteChar = function (t) {
                                for (var e = t.length >= 3 ? 3 : t.length; e > 0; e--) {
                                    var n = t[t.length - e];
                                    if (1 == e && n >> 5 == 6) {
                                        this.charLength = 2;
                                        break;
                                    }
                                    if (2 >= e && n >> 4 == 14) {
                                        this.charLength = 3;
                                        break;
                                    }
                                    if (3 >= e && n >> 3 == 30) {
                                        this.charLength = 4;
                                        break;
                                    }
                                }
                                this.charReceived = e;
                            }),
                            (c.prototype.end = function (t) {
                                var e = "";
                                if ((t && t.length && (e = this.write(t)), this.charReceived)) {
                                    var n = this.charReceived,
                                        i = this.charBuffer,
                                        r = this.encoding;
                                    e += i.slice(0, n).toString(r);
                                }
                                return e;
                            });
                    },
                    { buffer: 5 },
                ],
                5: [
                    function (t, e, n) {
                        (function (e) {
                            "use strict";
                            function i() {
                                try {
                                    var t = new Uint8Array(1);
                                    return (
                                        (t.__proto__ = {
                                            __proto__: Uint8Array.prototype,
                                            foo: function () {
                                                return 42;
                                            },
                                        }),
                                        42 === t.foo() && "function" == typeof t.subarray && 0 === t.subarray(1, 1).byteLength
                                    );
                                } catch (e) {
                                    return !1;
                                }
                            }
                            function r() {
                                return a.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;
                            }
                            function o(t, e) {
                                if (r() < e) throw new RangeError("Invalid typed array length");
                                return a.TYPED_ARRAY_SUPPORT ? ((t = new Uint8Array(e)), (t.__proto__ = a.prototype)) : (null === t && (t = new a(e)), (t.length = e)), t;
                            }
                            function a(t, e, n) {
                                if (!(a.TYPED_ARRAY_SUPPORT || this instanceof a)) return new a(t, e, n);
                                if ("number" == typeof t) {
                                    if ("string" == typeof e) throw new Error("If encoding is specified then the first argument must be a string");
                                    return u(this, t);
                                }
                                return s(this, t, e, n);
                            }
                            function s(t, e, n, i) {
                                if ("number" == typeof e) throw new TypeError('"value" argument must not be a number');
                                return "undefined" != typeof ArrayBuffer && e instanceof ArrayBuffer ? h(t, e, n, i) : "string" == typeof e ? d(t, e, n) : f(t, e);
                            }
                            function l(t) {
                                if ("number" != typeof t) throw new TypeError('"size" argument must be a number');
                                if (0 > t) throw new RangeError('"size" argument must not be negative');
                            }
                            function c(t, e, n, i) {
                                return l(e), 0 >= e ? o(t, e) : void 0 !== n ? ("string" == typeof i ? o(t, e).fill(n, i) : o(t, e).fill(n)) : o(t, e);
                            }
                            function u(t, e) {
                                if ((l(e), (t = o(t, 0 > e ? 0 : 0 | m(e))), !a.TYPED_ARRAY_SUPPORT)) for (var n = 0; e > n; ++n) t[n] = 0;
                                return t;
                            }
                            function d(t, e, n) {
                                if ((("string" != typeof n || "" === n) && (n = "utf8"), !a.isEncoding(n))) throw new TypeError('"encoding" must be a valid string encoding');
                                var i = 0 | g(e, n);
                                t = o(t, i);
                                var r = t.write(e, n);
                                return r !== i && (t = t.slice(0, r)), t;
                            }
                            function p(t, e) {
                                var n = e.length < 0 ? 0 : 0 | m(e.length);
                                t = o(t, n);
                                for (var i = 0; n > i; i += 1) t[i] = 255 & e[i];
                                return t;
                            }
                            function h(t, e, n, i) {
                                if ((e.byteLength, 0 > n || e.byteLength < n)) throw new RangeError("'offset' is out of bounds");
                                if (e.byteLength < n + (i || 0)) throw new RangeError("'length' is out of bounds");
                                return (
                                    (e = void 0 === n && void 0 === i ? new Uint8Array(e) : void 0 === i ? new Uint8Array(e, n) : new Uint8Array(e, n, i)), a.TYPED_ARRAY_SUPPORT ? ((t = e), (t.__proto__ = a.prototype)) : (t = p(t, e)), t
                                );
                            }
                            function f(t, e) {
                                if (a.isBuffer(e)) {
                                    var n = 0 | m(e.length);
                                    return (t = o(t, n)), 0 === t.length ? t : (e.copy(t, 0, 0, n), t);
                                }
                                if (e) {
                                    if (("undefined" != typeof ArrayBuffer && e.buffer instanceof ArrayBuffer) || "length" in e) return "number" != typeof e.length || J(e.length) ? o(t, 0) : p(t, e);
                                    if ("Buffer" === e.type && Z(e.data)) return p(t, e.data);
                                }
                                throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
                            }
                            function m(t) {
                                if (t >= r()) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + r().toString(16) + " bytes");
                                return 0 | t;
                            }
                            function v(t) {
                                return +t != t && (t = 0), a.alloc(+t);
                            }
                            function g(t, e) {
                                if (a.isBuffer(t)) return t.length;
                                if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(t) || t instanceof ArrayBuffer)) return t.byteLength;
                                "string" != typeof t && (t = "" + t);
                                var n = t.length;
                                if (0 === n) return 0;
                                for (var i = !1; ; )
                                    switch (e) {
                                        case "ascii":
                                        case "latin1":
                                        case "binary":
                                            return n;
                                        case "utf8":
                                        case "utf-8":
                                        case void 0:
                                            return z(t).length;
                                        case "ucs2":
                                        case "ucs-2":
                                        case "utf16le":
                                        case "utf-16le":
                                            return 2 * n;
                                        case "hex":
                                            return n >>> 1;
                                        case "base64":
                                            return G(t).length;
                                        default:
                                            if (i) return z(t).length;
                                            (e = ("" + e).toLowerCase()), (i = !0);
                                    }
                            }
                            function y(t, e, n) {
                                var i = !1;
                                if (((void 0 === e || 0 > e) && (e = 0), e > this.length)) return "";
                                if (((void 0 === n || n > this.length) && (n = this.length), 0 >= n)) return "";
                                if (((n >>>= 0), (e >>>= 0), e >= n)) return "";
                                for (t || (t = "utf8"); ; )
                                    switch (t) {
                                        case "hex":
                                            return j(this, e, n);
                                        case "utf8":
                                        case "utf-8":
                                            return A(this, e, n);
                                        case "ascii":
                                            return R(this, e, n);
                                        case "latin1":
                                        case "binary":
                                            return P(this, e, n);
                                        case "base64":
                                            return E(this, e, n);
                                        case "ucs2":
                                        case "ucs-2":
                                        case "utf16le":
                                        case "utf-16le":
                                            return D(this, e, n);
                                        default:
                                            if (i) throw new TypeError("Unknown encoding: " + t);
                                            (t = (t + "").toLowerCase()), (i = !0);
                                    }
                            }
                            function b(t, e, n) {
                                var i = t[e];
                                (t[e] = t[n]), (t[n] = i);
                            }
                            function w(t, e, n, i, r) {
                                if (0 === t.length) return -1;
                                if (
                                    ("string" == typeof n ? ((i = n), (n = 0)) : n > 2147483647 ? (n = 2147483647) : -2147483648 > n && (n = -2147483648),
                                    (n = +n),
                                    isNaN(n) && (n = r ? 0 : t.length - 1),
                                    0 > n && (n = t.length + n),
                                    n >= t.length)
                                ) {
                                    if (r) return -1;
                                    n = t.length - 1;
                                } else if (0 > n) {
                                    if (!r) return -1;
                                    n = 0;
                                }
                                if (("string" == typeof e && (e = a.from(e, i)), a.isBuffer(e))) return 0 === e.length ? -1 : $(t, e, n, i, r);
                                if ("number" == typeof e)
                                    return (
                                        (e = 255 & e),
                                        a.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? (r ? Uint8Array.prototype.indexOf.call(t, e, n) : Uint8Array.prototype.lastIndexOf.call(t, e, n)) : $(t, [e], n, i, r)
                                    );
                                throw new TypeError("val must be string, number or Buffer");
                            }
                            function $(t, e, n, i, r) {
                                function o(t, e) {
                                    return 1 === a ? t[e] : t.readUInt16BE(e * a);
                                }
                                var a = 1,
                                    s = t.length,
                                    l = e.length;
                                if (void 0 !== i && ((i = String(i).toLowerCase()), "ucs2" === i || "ucs-2" === i || "utf16le" === i || "utf-16le" === i)) {
                                    if (t.length < 2 || e.length < 2) return -1;
                                    (a = 2), (s /= 2), (l /= 2), (n /= 2);
                                }
                                var c;
                                if (r) {
                                    var u = -1;
                                    for (c = n; s > c; c++)
                                        if (o(t, c) === o(e, -1 === u ? 0 : c - u)) {
                                            if ((-1 === u && (u = c), c - u + 1 === l)) return u * a;
                                        } else -1 !== u && (c -= c - u), (u = -1);
                                } else
                                    for (n + l > s && (n = s - l), c = n; c >= 0; c--) {
                                        for (var d = !0, p = 0; l > p; p++)
                                            if (o(t, c + p) !== o(e, p)) {
                                                d = !1;
                                                break;
                                            }
                                        if (d) return c;
                                    }
                                return -1;
                            }
                            function x(t, e, n, i) {
                                n = Number(n) || 0;
                                var r = t.length - n;
                                i ? ((i = Number(i)), i > r && (i = r)) : (i = r);
                                var o = e.length;
                                if (o % 2 !== 0) throw new TypeError("Invalid hex string");
                                i > o / 2 && (i = o / 2);
                                for (var a = 0; i > a; ++a) {
                                    var s = parseInt(e.substr(2 * a, 2), 16);
                                    if (isNaN(s)) return a;
                                    t[n + a] = s;
                                }
                                return a;
                            }
                            function k(t, e, n, i) {
                                return X(z(e, t.length - n), t, n, i);
                            }
                            function S(t, e, n, i) {
                                return X(W(e), t, n, i);
                            }
                            function C(t, e, n, i) {
                                return S(t, e, n, i);
                            }
                            function _(t, e, n, i) {
                                return X(G(e), t, n, i);
                            }
                            function T(t, e, n, i) {
                                return X(Y(e, t.length - n), t, n, i);
                            }
                            function E(t, e, n) {
                                return 0 === e && n === t.length ? K.fromByteArray(t) : K.fromByteArray(t.slice(e, n));
                            }
                            function A(t, e, n) {
                                n = Math.min(t.length, n);
                                for (var i = [], r = e; n > r; ) {
                                    var o = t[r],
                                        a = null,
                                        s = o > 239 ? 4 : o > 223 ? 3 : o > 191 ? 2 : 1;
                                    if (n >= r + s) {
                                        var l, c, u, d;
                                        switch (s) {
                                            case 1:
                                                128 > o && (a = o);
                                                break;
                                            case 2:
                                                (l = t[r + 1]), 128 === (192 & l) && ((d = ((31 & o) << 6) | (63 & l)), d > 127 && (a = d));
                                                break;
                                            case 3:
                                                (l = t[r + 1]), (c = t[r + 2]), 128 === (192 & l) && 128 === (192 & c) && ((d = ((15 & o) << 12) | ((63 & l) << 6) | (63 & c)), d > 2047 && (55296 > d || d > 57343) && (a = d));
                                                break;
                                            case 4:
                                                (l = t[r + 1]),
                                                    (c = t[r + 2]),
                                                    (u = t[r + 3]),
                                                    128 === (192 & l) && 128 === (192 & c) && 128 === (192 & u) && ((d = ((15 & o) << 18) | ((63 & l) << 12) | ((63 & c) << 6) | (63 & u)), d > 65535 && 1114112 > d && (a = d));
                                        }
                                    }
                                    null === a ? ((a = 65533), (s = 1)) : a > 65535 && ((a -= 65536), i.push(((a >>> 10) & 1023) | 55296), (a = 56320 | (1023 & a))), i.push(a), (r += s);
                                }
                                return I(i);
                            }
                            function I(t) {
                                var e = t.length;
                                if (tt >= e) return String.fromCharCode.apply(String, t);
                                for (var n = "", i = 0; e > i; ) n += String.fromCharCode.apply(String, t.slice(i, (i += tt)));
                                return n;
                            }
                            function R(t, e, n) {
                                var i = "";
                                n = Math.min(t.length, n);
                                for (var r = e; n > r; ++r) i += String.fromCharCode(127 & t[r]);
                                return i;
                            }
                            function P(t, e, n) {
                                var i = "";
                                n = Math.min(t.length, n);
                                for (var r = e; n > r; ++r) i += String.fromCharCode(t[r]);
                                return i;
                            }
                            function j(t, e, n) {
                                var i = t.length;
                                (!e || 0 > e) && (e = 0), (!n || 0 > n || n > i) && (n = i);
                                for (var r = "", o = e; n > o; ++o) r += V(t[o]);
                                return r;
                            }
                            function D(t, e, n) {
                                for (var i = t.slice(e, n), r = "", o = 0; o < i.length; o += 2) r += String.fromCharCode(i[o] + 256 * i[o + 1]);
                                return r;
                            }
                            function O(t, e, n) {
                                if (t % 1 !== 0 || 0 > t) throw new RangeError("offset is not uint");
                                if (t + e > n) throw new RangeError("Trying to access beyond buffer length");
                            }
                            function L(t, e, n, i, r, o) {
                                if (!a.isBuffer(t)) throw new TypeError('"buffer" argument must be a Buffer instance');
                                if (e > r || o > e) throw new RangeError('"value" argument is out of bounds');
                                if (n + i > t.length) throw new RangeError("Index out of range");
                            }
                            function N(t, e, n, i) {
                                0 > e && (e = 65535 + e + 1);
                                for (var r = 0, o = Math.min(t.length - n, 2); o > r; ++r) t[n + r] = (e & (255 << (8 * (i ? r : 1 - r)))) >>> (8 * (i ? r : 1 - r));
                            }
                            function q(t, e, n, i) {
                                0 > e && (e = 4294967295 + e + 1);
                                for (var r = 0, o = Math.min(t.length - n, 4); o > r; ++r) t[n + r] = (e >>> (8 * (i ? r : 3 - r))) & 255;
                            }
                            function U(t, e, n, i, r, o) {
                                if (n + i > t.length) throw new RangeError("Index out of range");
                                if (0 > n) throw new RangeError("Index out of range");
                            }
                            function M(t, e, n, i, r) {
                                return r || U(t, e, n, 4, 3.4028234663852886e38, -3.4028234663852886e38), Q.write(t, e, n, i, 23, 4), n + 4;
                            }
                            function B(t, e, n, i, r) {
                                return r || U(t, e, n, 8, 1.7976931348623157e308, -1.7976931348623157e308), Q.write(t, e, n, i, 52, 8), n + 8;
                            }
                            function F(t) {
                                if (((t = H(t).replace(et, "")), t.length < 2)) return "";
                                for (; t.length % 4 !== 0; ) t += "=";
                                return t;
                            }
                            function H(t) {
                                return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "");
                            }
                            function V(t) {
                                return 16 > t ? "0" + t.toString(16) : t.toString(16);
                            }
                            function z(t, e) {
                                e = e || 1 / 0;
                                for (var n, i = t.length, r = null, o = [], a = 0; i > a; ++a) {
                                    if (((n = t.charCodeAt(a)), n > 55295 && 57344 > n)) {
                                        if (!r) {
                                            if (n > 56319) {
                                                (e -= 3) > -1 && o.push(239, 191, 189);
                                                continue;
                                            }
                                            if (a + 1 === i) {
                                                (e -= 3) > -1 && o.push(239, 191, 189);
                                                continue;
                                            }
                                            r = n;
                                            continue;
                                        }
                                        if (56320 > n) {
                                            (e -= 3) > -1 && o.push(239, 191, 189), (r = n);
                                            continue;
                                        }
                                        n = (((r - 55296) << 10) | (n - 56320)) + 65536;
                                    } else r && (e -= 3) > -1 && o.push(239, 191, 189);
                                    if (((r = null), 128 > n)) {
                                        if ((e -= 1) < 0) break;
                                        o.push(n);
                                    } else if (2048 > n) {
                                        if ((e -= 2) < 0) break;
                                        o.push((n >> 6) | 192, (63 & n) | 128);
                                    } else if (65536 > n) {
                                        if ((e -= 3) < 0) break;
                                        o.push((n >> 12) | 224, ((n >> 6) & 63) | 128, (63 & n) | 128);
                                    } else {
                                        if (!(1114112 > n)) throw new Error("Invalid code point");
                                        if ((e -= 4) < 0) break;
                                        o.push((n >> 18) | 240, ((n >> 12) & 63) | 128, ((n >> 6) & 63) | 128, (63 & n) | 128);
                                    }
                                }
                                return o;
                            }
                            function W(t) {
                                for (var e = [], n = 0; n < t.length; ++n) e.push(255 & t.charCodeAt(n));
                                return e;
                            }
                            function Y(t, e) {
                                for (var n, i, r, o = [], a = 0; a < t.length && !((e -= 2) < 0); ++a) (n = t.charCodeAt(a)), (i = n >> 8), (r = n % 256), o.push(r), o.push(i);
                                return o;
                            }
                            function G(t) {
                                return K.toByteArray(F(t));
                            }
                            function X(t, e, n, i) {
                                for (var r = 0; i > r && !(r + n >= e.length || r >= t.length); ++r) e[r + n] = t[r];
                                return r;
                            }
                            function J(t) {
                                return t !== t;
                            }
                            var K = t("base64-js"),
                                Q = t("ieee754"),
                                Z = t("isarray");
                            (n.Buffer = a),
                                (n.SlowBuffer = v),
                                (n.INSPECT_MAX_BYTES = 50),
                                (a.TYPED_ARRAY_SUPPORT = void 0 !== e.TYPED_ARRAY_SUPPORT ? e.TYPED_ARRAY_SUPPORT : i()),
                                (n.kMaxLength = r()),
                                (a.poolSize = 8192),
                                (a._augment = function (t) {
                                    return (t.__proto__ = a.prototype), t;
                                }),
                                (a.from = function (t, e, n) {
                                    return s(null, t, e, n);
                                }),
                                a.TYPED_ARRAY_SUPPORT &&
                                    ((a.prototype.__proto__ = Uint8Array.prototype),
                                    (a.__proto__ = Uint8Array),
                                    "undefined" != typeof Symbol && Symbol.species && a[Symbol.species] === a && Object.defineProperty(a, Symbol.species, { value: null, configurable: !0 })),
                                (a.alloc = function (t, e, n) {
                                    return c(null, t, e, n);
                                }),
                                (a.allocUnsafe = function (t) {
                                    return u(null, t);
                                }),
                                (a.allocUnsafeSlow = function (t) {
                                    return u(null, t);
                                }),
                                (a.isBuffer = function (t) {
                                    return !(null == t || !t._isBuffer);
                                }),
                                (a.compare = function (t, e) {
                                    if (!a.isBuffer(t) || !a.isBuffer(e)) throw new TypeError("Arguments must be Buffers");
                                    if (t === e) return 0;
                                    for (var n = t.length, i = e.length, r = 0, o = Math.min(n, i); o > r; ++r)
                                        if (t[r] !== e[r]) {
                                            (n = t[r]), (i = e[r]);
                                            break;
                                        }
                                    return i > n ? -1 : n > i ? 1 : 0;
                                }),
                                (a.isEncoding = function (t) {
                                    switch (String(t).toLowerCase()) {
                                        case "hex":
                                        case "utf8":
                                        case "utf-8":
                                        case "ascii":
                                        case "latin1":
                                        case "binary":
                                        case "base64":
                                        case "ucs2":
                                        case "ucs-2":
                                        case "utf16le":
                                        case "utf-16le":
                                            return !0;
                                        default:
                                            return !1;
                                    }
                                }),
                                (a.concat = function (t, e) {
                                    if (!Z(t)) throw new TypeError('"list" argument must be an Array of Buffers');
                                    if (0 === t.length) return a.alloc(0);
                                    var n;
                                    if (void 0 === e) for (e = 0, n = 0; n < t.length; ++n) e += t[n].length;
                                    var i = a.allocUnsafe(e),
                                        r = 0;
                                    for (n = 0; n < t.length; ++n) {
                                        var o = t[n];
                                        if (!a.isBuffer(o)) throw new TypeError('"list" argument must be an Array of Buffers');
                                        o.copy(i, r), (r += o.length);
                                    }
                                    return i;
                                }),
                                (a.byteLength = g),
                                (a.prototype._isBuffer = !0),
                                (a.prototype.swap16 = function () {
                                    var t = this.length;
                                    if (t % 2 !== 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
                                    for (var e = 0; t > e; e += 2) b(this, e, e + 1);
                                    return this;
                                }),
                                (a.prototype.swap32 = function () {
                                    var t = this.length;
                                    if (t % 4 !== 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
                                    for (var e = 0; t > e; e += 4) b(this, e, e + 3), b(this, e + 1, e + 2);
                                    return this;
                                }),
                                (a.prototype.swap64 = function () {
                                    var t = this.length;
                                    if (t % 8 !== 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
                                    for (var e = 0; t > e; e += 8) b(this, e, e + 7), b(this, e + 1, e + 6), b(this, e + 2, e + 5), b(this, e + 3, e + 4);
                                    return this;
                                }),
                                (a.prototype.toString = function () {
                                    var t = 0 | this.length;
                                    return 0 === t ? "" : 0 === arguments.length ? A(this, 0, t) : y.apply(this, arguments);
                                }),
                                (a.prototype.equals = function (t) {
                                    if (!a.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
                                    return this === t ? !0 : 0 === a.compare(this, t);
                                }),
                                (a.prototype.inspect = function () {
                                    var t = "",
                                        e = n.INSPECT_MAX_BYTES;
                                    return this.length > 0 && ((t = this.toString("hex", 0, e).match(/.{2}/g).join(" ")), this.length > e && (t += " ... ")), "<Buffer " + t + ">";
                                }),
                                (a.prototype.compare = function (t, e, n, i, r) {
                                    if (!a.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
                                    if ((void 0 === e && (e = 0), void 0 === n && (n = t ? t.length : 0), void 0 === i && (i = 0), void 0 === r && (r = this.length), 0 > e || n > t.length || 0 > i || r > this.length))
                                        throw new RangeError("out of range index");
                                    if (i >= r && e >= n) return 0;
                                    if (i >= r) return -1;
                                    if (e >= n) return 1;
                                    if (((e >>>= 0), (n >>>= 0), (i >>>= 0), (r >>>= 0), this === t)) return 0;
                                    for (var o = r - i, s = n - e, l = Math.min(o, s), c = this.slice(i, r), u = t.slice(e, n), d = 0; l > d; ++d)
                                        if (c[d] !== u[d]) {
                                            (o = c[d]), (s = u[d]);
                                            break;
                                        }
                                    return s > o ? -1 : o > s ? 1 : 0;
                                }),
                                (a.prototype.includes = function (t, e, n) {
                                    return -1 !== this.indexOf(t, e, n);
                                }),
                                (a.prototype.indexOf = function (t, e, n) {
                                    return w(this, t, e, n, !0);
                                }),
                                (a.prototype.lastIndexOf = function (t, e, n) {
                                    return w(this, t, e, n, !1);
                                }),
                                (a.prototype.write = function (t, e, n, i) {
                                    if (void 0 === e) (i = "utf8"), (n = this.length), (e = 0);
                                    else if (void 0 === n && "string" == typeof e) (i = e), (n = this.length), (e = 0);
                                    else {
                                        if (!isFinite(e)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                                        (e = 0 | e), isFinite(n) ? ((n = 0 | n), void 0 === i && (i = "utf8")) : ((i = n), (n = void 0));
                                    }
                                    var r = this.length - e;
                                    if (((void 0 === n || n > r) && (n = r), (t.length > 0 && (0 > n || 0 > e)) || e > this.length)) throw new RangeError("Attempt to write outside buffer bounds");
                                    i || (i = "utf8");
                                    for (var o = !1; ; )
                                        switch (i) {
                                            case "hex":
                                                return x(this, t, e, n);
                                            case "utf8":
                                            case "utf-8":
                                                return k(this, t, e, n);
                                            case "ascii":
                                                return S(this, t, e, n);
                                            case "latin1":
                                            case "binary":
                                                return C(this, t, e, n);
                                            case "base64":
                                                return _(this, t, e, n);
                                            case "ucs2":
                                            case "ucs-2":
                                            case "utf16le":
                                            case "utf-16le":
                                                return T(this, t, e, n);
                                            default:
                                                if (o) throw new TypeError("Unknown encoding: " + i);
                                                (i = ("" + i).toLowerCase()), (o = !0);
                                        }
                                }),
                                (a.prototype.toJSON = function () {
                                    return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };
                                });
                            var tt = 4096;
                            (a.prototype.slice = function (t, e) {
                                var n = this.length;
                                (t = ~~t), (e = void 0 === e ? n : ~~e), 0 > t ? ((t += n), 0 > t && (t = 0)) : t > n && (t = n), 0 > e ? ((e += n), 0 > e && (e = 0)) : e > n && (e = n), t > e && (e = t);
                                var i;
                                if (a.TYPED_ARRAY_SUPPORT) (i = this.subarray(t, e)), (i.__proto__ = a.prototype);
                                else {
                                    var r = e - t;
                                    i = new a(r, void 0);
                                    for (var o = 0; r > o; ++o) i[o] = this[o + t];
                                }
                                return i;
                            }),
                                (a.prototype.readUIntLE = function (t, e, n) {
                                    (t = 0 | t), (e = 0 | e), n || O(t, e, this.length);
                                    for (var i = this[t], r = 1, o = 0; ++o < e && (r *= 256); ) i += this[t + o] * r;
                                    return i;
                                }),
                                (a.prototype.readUIntBE = function (t, e, n) {
                                    (t = 0 | t), (e = 0 | e), n || O(t, e, this.length);
                                    for (var i = this[t + --e], r = 1; e > 0 && (r *= 256); ) i += this[t + --e] * r;
                                    return i;
                                }),
                                (a.prototype.readUInt8 = function (t, e) {
                                    return e || O(t, 1, this.length), this[t];
                                }),
                                (a.prototype.readUInt16LE = function (t, e) {
                                    return e || O(t, 2, this.length), this[t] | (this[t + 1] << 8);
                                }),
                                (a.prototype.readUInt16BE = function (t, e) {
                                    return e || O(t, 2, this.length), (this[t] << 8) | this[t + 1];
                                }),
                                (a.prototype.readUInt32LE = function (t, e) {
                                    return e || O(t, 4, this.length), (this[t] | (this[t + 1] << 8) | (this[t + 2] << 16)) + 16777216 * this[t + 3];
                                }),
                                (a.prototype.readUInt32BE = function (t, e) {
                                    return e || O(t, 4, this.length), 16777216 * this[t] + ((this[t + 1] << 16) | (this[t + 2] << 8) | this[t + 3]);
                                }),
                                (a.prototype.readIntLE = function (t, e, n) {
                                    (t = 0 | t), (e = 0 | e), n || O(t, e, this.length);
                                    for (var i = this[t], r = 1, o = 0; ++o < e && (r *= 256); ) i += this[t + o] * r;
                                    return (r *= 128), i >= r && (i -= Math.pow(2, 8 * e)), i;
                                }),
                                (a.prototype.readIntBE = function (t, e, n) {
                                    (t = 0 | t), (e = 0 | e), n || O(t, e, this.length);
                                    for (var i = e, r = 1, o = this[t + --i]; i > 0 && (r *= 256); ) o += this[t + --i] * r;
                                    return (r *= 128), o >= r && (o -= Math.pow(2, 8 * e)), o;
                                }),
                                (a.prototype.readInt8 = function (t, e) {
                                    return e || O(t, 1, this.length), 128 & this[t] ? -1 * (255 - this[t] + 1) : this[t];
                                }),
                                (a.prototype.readInt16LE = function (t, e) {
                                    e || O(t, 2, this.length);
                                    var n = this[t] | (this[t + 1] << 8);
                                    return 32768 & n ? 4294901760 | n : n;
                                }),
                                (a.prototype.readInt16BE = function (t, e) {
                                    e || O(t, 2, this.length);
                                    var n = this[t + 1] | (this[t] << 8);
                                    return 32768 & n ? 4294901760 | n : n;
                                }),
                                (a.prototype.readInt32LE = function (t, e) {
                                    return e || O(t, 4, this.length), this[t] | (this[t + 1] << 8) | (this[t + 2] << 16) | (this[t + 3] << 24);
                                }),
                                (a.prototype.readInt32BE = function (t, e) {
                                    return e || O(t, 4, this.length), (this[t] << 24) | (this[t + 1] << 16) | (this[t + 2] << 8) | this[t + 3];
                                }),
                                (a.prototype.readFloatLE = function (t, e) {
                                    return e || O(t, 4, this.length), Q.read(this, t, !0, 23, 4);
                                }),
                                (a.prototype.readFloatBE = function (t, e) {
                                    return e || O(t, 4, this.length), Q.read(this, t, !1, 23, 4);
                                }),
                                (a.prototype.readDoubleLE = function (t, e) {
                                    return e || O(t, 8, this.length), Q.read(this, t, !0, 52, 8);
                                }),
                                (a.prototype.readDoubleBE = function (t, e) {
                                    return e || O(t, 8, this.length), Q.read(this, t, !1, 52, 8);
                                }),
                                (a.prototype.writeUIntLE = function (t, e, n, i) {
                                    if (((t = +t), (e = 0 | e), (n = 0 | n), !i)) {
                                        var r = Math.pow(2, 8 * n) - 1;
                                        L(this, t, e, n, r, 0);
                                    }
                                    var o = 1,
                                        a = 0;
                                    for (this[e] = 255 & t; ++a < n && (o *= 256); ) this[e + a] = (t / o) & 255;
                                    return e + n;
                                }),
                                (a.prototype.writeUIntBE = function (t, e, n, i) {
                                    if (((t = +t), (e = 0 | e), (n = 0 | n), !i)) {
                                        var r = Math.pow(2, 8 * n) - 1;
                                        L(this, t, e, n, r, 0);
                                    }
                                    var o = n - 1,
                                        a = 1;
                                    for (this[e + o] = 255 & t; --o >= 0 && (a *= 256); ) this[e + o] = (t / a) & 255;
                                    return e + n;
                                }),
                                (a.prototype.writeUInt8 = function (t, e, n) {
                                    return (t = +t), (e = 0 | e), n || L(this, t, e, 1, 255, 0), a.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), (this[e] = 255 & t), e + 1;
                                }),
                                (a.prototype.writeUInt16LE = function (t, e, n) {
                                    return (t = +t), (e = 0 | e), n || L(this, t, e, 2, 65535, 0), a.TYPED_ARRAY_SUPPORT ? ((this[e] = 255 & t), (this[e + 1] = t >>> 8)) : N(this, t, e, !0), e + 2;
                                }),
                                (a.prototype.writeUInt16BE = function (t, e, n) {
                                    return (t = +t), (e = 0 | e), n || L(this, t, e, 2, 65535, 0), a.TYPED_ARRAY_SUPPORT ? ((this[e] = t >>> 8), (this[e + 1] = 255 & t)) : N(this, t, e, !1), e + 2;
                                }),
                                (a.prototype.writeUInt32LE = function (t, e, n) {
                                    return (
                                        (t = +t),
                                        (e = 0 | e),
                                        n || L(this, t, e, 4, 4294967295, 0),
                                        a.TYPED_ARRAY_SUPPORT ? ((this[e + 3] = t >>> 24), (this[e + 2] = t >>> 16), (this[e + 1] = t >>> 8), (this[e] = 255 & t)) : q(this, t, e, !0),
                                        e + 4
                                    );
                                }),
                                (a.prototype.writeUInt32BE = function (t, e, n) {
                                    return (
                                        (t = +t),
                                        (e = 0 | e),
                                        n || L(this, t, e, 4, 4294967295, 0),
                                        a.TYPED_ARRAY_SUPPORT ? ((this[e] = t >>> 24), (this[e + 1] = t >>> 16), (this[e + 2] = t >>> 8), (this[e + 3] = 255 & t)) : q(this, t, e, !1),
                                        e + 4
                                    );
                                }),
                                (a.prototype.writeIntLE = function (t, e, n, i) {
                                    if (((t = +t), (e = 0 | e), !i)) {
                                        var r = Math.pow(2, 8 * n - 1);
                                        L(this, t, e, n, r - 1, -r);
                                    }
                                    var o = 0,
                                        a = 1,
                                        s = 0;
                                    for (this[e] = 255 & t; ++o < n && (a *= 256); ) 0 > t && 0 === s && 0 !== this[e + o - 1] && (s = 1), (this[e + o] = (((t / a) >> 0) - s) & 255);
                                    return e + n;
                                }),
                                (a.prototype.writeIntBE = function (t, e, n, i) {
                                    if (((t = +t), (e = 0 | e), !i)) {
                                        var r = Math.pow(2, 8 * n - 1);
                                        L(this, t, e, n, r - 1, -r);
                                    }
                                    var o = n - 1,
                                        a = 1,
                                        s = 0;
                                    for (this[e + o] = 255 & t; --o >= 0 && (a *= 256); ) 0 > t && 0 === s && 0 !== this[e + o + 1] && (s = 1), (this[e + o] = (((t / a) >> 0) - s) & 255);
                                    return e + n;
                                }),
                                (a.prototype.writeInt8 = function (t, e, n) {
                                    return (t = +t), (e = 0 | e), n || L(this, t, e, 1, 127, -128), a.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), 0 > t && (t = 255 + t + 1), (this[e] = 255 & t), e + 1;
                                }),
                                (a.prototype.writeInt16LE = function (t, e, n) {
                                    return (t = +t), (e = 0 | e), n || L(this, t, e, 2, 32767, -32768), a.TYPED_ARRAY_SUPPORT ? ((this[e] = 255 & t), (this[e + 1] = t >>> 8)) : N(this, t, e, !0), e + 2;
                                }),
                                (a.prototype.writeInt16BE = function (t, e, n) {
                                    return (t = +t), (e = 0 | e), n || L(this, t, e, 2, 32767, -32768), a.TYPED_ARRAY_SUPPORT ? ((this[e] = t >>> 8), (this[e + 1] = 255 & t)) : N(this, t, e, !1), e + 2;
                                }),
                                (a.prototype.writeInt32LE = function (t, e, n) {
                                    return (
                                        (t = +t),
                                        (e = 0 | e),
                                        n || L(this, t, e, 4, 2147483647, -2147483648),
                                        a.TYPED_ARRAY_SUPPORT ? ((this[e] = 255 & t), (this[e + 1] = t >>> 8), (this[e + 2] = t >>> 16), (this[e + 3] = t >>> 24)) : q(this, t, e, !0),
                                        e + 4
                                    );
                                }),
                                (a.prototype.writeInt32BE = function (t, e, n) {
                                    return (
                                        (t = +t),
                                        (e = 0 | e),
                                        n || L(this, t, e, 4, 2147483647, -2147483648),
                                        0 > t && (t = 4294967295 + t + 1),
                                        a.TYPED_ARRAY_SUPPORT ? ((this[e] = t >>> 24), (this[e + 1] = t >>> 16), (this[e + 2] = t >>> 8), (this[e + 3] = 255 & t)) : q(this, t, e, !1),
                                        e + 4
                                    );
                                }),
                                (a.prototype.writeFloatLE = function (t, e, n) {
                                    return M(this, t, e, !0, n);
                                }),
                                (a.prototype.writeFloatBE = function (t, e, n) {
                                    return M(this, t, e, !1, n);
                                }),
                                (a.prototype.writeDoubleLE = function (t, e, n) {
                                    return B(this, t, e, !0, n);
                                }),
                                (a.prototype.writeDoubleBE = function (t, e, n) {
                                    return B(this, t, e, !1, n);
                                }),
                                (a.prototype.copy = function (t, e, n, i) {
                                    if ((n || (n = 0), i || 0 === i || (i = this.length), e >= t.length && (e = t.length), e || (e = 0), i > 0 && n > i && (i = n), i === n)) return 0;
                                    if (0 === t.length || 0 === this.length) return 0;
                                    if (0 > e) throw new RangeError("targetStart out of bounds");
                                    if (0 > n || n >= this.length) throw new RangeError("sourceStart out of bounds");
                                    if (0 > i) throw new RangeError("sourceEnd out of bounds");
                                    i > this.length && (i = this.length), t.length - e < i - n && (i = t.length - e + n);
                                    var r,
                                        o = i - n;
                                    if (this === t && e > n && i > e) for (r = o - 1; r >= 0; --r) t[r + e] = this[r + n];
                                    else if (1e3 > o || !a.TYPED_ARRAY_SUPPORT) for (r = 0; o > r; ++r) t[r + e] = this[r + n];
                                    else Uint8Array.prototype.set.call(t, this.subarray(n, n + o), e);
                                    return o;
                                }),
                                (a.prototype.fill = function (t, e, n, i) {
                                    if ("string" == typeof t) {
                                        if (("string" == typeof e ? ((i = e), (e = 0), (n = this.length)) : "string" == typeof n && ((i = n), (n = this.length)), 1 === t.length)) {
                                            var r = t.charCodeAt(0);
                                            256 > r && (t = r);
                                        }
                                        if (void 0 !== i && "string" != typeof i) throw new TypeError("encoding must be a string");
                                        if ("string" == typeof i && !a.isEncoding(i)) throw new TypeError("Unknown encoding: " + i);
                                    } else "number" == typeof t && (t = 255 & t);
                                    if (0 > e || this.length < e || this.length < n) throw new RangeError("Out of range index");
                                    if (e >= n) return this;
                                    (e >>>= 0), (n = void 0 === n ? this.length : n >>> 0), t || (t = 0);
                                    var o;
                                    if ("number" == typeof t) for (o = e; n > o; ++o) this[o] = t;
                                    else {
                                        var s = a.isBuffer(t) ? t : z(new a(t, i).toString()),
                                            l = s.length;
                                        for (o = 0; n - e > o; ++o) this[o + e] = s[o % l];
                                    }
                                    return this;
                                });
                            var et = /[^+\/0-9A-Za-z-_]/g;
                        }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
                    },
                    { "base64-js": 2, ieee754: 37, isarray: 40 },
                ],
                6: [
                    function (t, e, n) {
                        (function (t) {
                            function e(t) {
                                return Array.isArray ? Array.isArray(t) : "[object Array]" === v(t);
                            }
                            function i(t) {
                                return "boolean" == typeof t;
                            }
                            function r(t) {
                                return null === t;
                            }
                            function o(t) {
                                return null == t;
                            }
                            function a(t) {
                                return "number" == typeof t;
                            }
                            function s(t) {
                                return "string" == typeof t;
                            }
                            function l(t) {
                                return "symbol" == typeof t;
                            }
                            function c(t) {
                                return void 0 === t;
                            }
                            function u(t) {
                                return "[object RegExp]" === v(t);
                            }
                            function d(t) {
                                return "object" == typeof t && null !== t;
                            }
                            function p(t) {
                                return "[object Date]" === v(t);
                            }
                            function h(t) {
                                return "[object Error]" === v(t) || t instanceof Error;
                            }
                            function f(t) {
                                return "function" == typeof t;
                            }
                            function m(t) {
                                return null === t || "boolean" == typeof t || "number" == typeof t || "string" == typeof t || "symbol" == typeof t || "undefined" == typeof t;
                            }
                            function v(t) {
                                return Object.prototype.toString.call(t);
                            }
                            (n.isArray = e),
                                (n.isBoolean = i),
                                (n.isNull = r),
                                (n.isNullOrUndefined = o),
                                (n.isNumber = a),
                                (n.isString = s),
                                (n.isSymbol = l),
                                (n.isUndefined = c),
                                (n.isRegExp = u),
                                (n.isObject = d),
                                (n.isDate = p),
                                (n.isError = h),
                                (n.isFunction = f),
                                (n.isPrimitive = m),
                                (n.isBuffer = t.isBuffer);
                        }.call(this, { isBuffer: t("../../is-buffer/index.js") }));
                    },
                    { "../../is-buffer/index.js": 39 },
                ],
                7: [
                    function (t, e, n) {
                        function i(t, e) {
                            if (t) {
                                var n,
                                    i = "";
                                for (var r in t) (n = t[r]), i && (i += " "), (i += !n && d[r] ? r : r + '="' + (e.decodeEntities ? u.encodeXML(n) : n) + '"');
                                return i;
                            }
                        }
                        function r(t, e) {
                            "svg" === t.name && (e = { decodeEntities: e.decodeEntities, xmlMode: !0 });
                            var n = "<" + t.name,
                                r = i(t.attribs, e);
                            return r && (n += " " + r), !e.xmlMode || (t.children && 0 !== t.children.length) ? ((n += ">"), t.children && (n += f(t.children, e)), (!h[t.name] || e.xmlMode) && (n += "</" + t.name + ">")) : (n += "/>"), n;
                        }
                        function o(t) {
                            return "<" + t.data + ">";
                        }
                        function a(t, e) {
                            var n = t.data || "";
                            return !e.decodeEntities || (t.parent && t.parent.name in p) || (n = u.encodeXML(n)), n;
                        }
                        function s(t) {
                            return "<![CDATA[" + t.children[0].data + "]]>";
                        }
                        function l(t) {
                            return "<!--" + t.data + "-->";
                        }
                        var c = t("domelementtype"),
                            u = t("entities"),
                            d = {
                                __proto__: null,
                                allowfullscreen: !0,
                                async: !0,
                                autofocus: !0,
                                autoplay: !0,
                                checked: !0,
                                controls: !0,
                                default: !0,
                                defer: !0,
                                disabled: !0,
                                hidden: !0,
                                ismap: !0,
                                loop: !0,
                                multiple: !0,
                                muted: !0,
                                open: !0,
                                readonly: !0,
                                required: !0,
                                reversed: !0,
                                scoped: !0,
                                seamless: !0,
                                selected: !0,
                                typemustmatch: !0,
                            },
                            p = { __proto__: null, style: !0, script: !0, xmp: !0, iframe: !0, noembed: !0, noframes: !0, plaintext: !0, noscript: !0 },
                            h = {
                                __proto__: null,
                                area: !0,
                                base: !0,
                                basefont: !0,
                                br: !0,
                                col: !0,
                                command: !0,
                                embed: !0,
                                frame: !0,
                                hr: !0,
                                img: !0,
                                input: !0,
                                isindex: !0,
                                keygen: !0,
                                link: !0,
                                meta: !0,
                                param: !0,
                                source: !0,
                                track: !0,
                                wbr: !0,
                            },
                            f = (e.exports = function (t, e) {
                                Array.isArray(t) || t.cheerio || (t = [t]), (e = e || {});
                                for (var n = "", i = 0; i < t.length; i++) {
                                    var u = t[i];
                                    n += "root" === u.type ? f(u.children, e) : c.isTag(u) ? r(u, e) : u.type === c.Directive ? o(u) : u.type === c.Comment ? l(u) : u.type === c.CDATA ? s(u) : a(u, e);
                                }
                                return n;
                            });
                    },
                    { domelementtype: 8, entities: 20 },
                ],
                8: [
                    function (t, e, n) {
                        e.exports = {
                            Text: "text",
                            Directive: "directive",
                            Comment: "comment",
                            Script: "script",
                            Style: "style",
                            Tag: "tag",
                            CDATA: "cdata",
                            isTag: function (t) {
                                return "tag" === t.type || "script" === t.type || "style" === t.type;
                            },
                        };
                    },
                    {},
                ],
                9: [
                    function (t, e, n) {
                        e.exports = {
                            Text: "text",
                            Directive: "directive",
                            Comment: "comment",
                            Script: "script",
                            Style: "style",
                            Tag: "tag",
                            CDATA: "cdata",
                            Doctype: "doctype",
                            isTag: function (t) {
                                return "tag" === t.type || "script" === t.type || "style" === t.type;
                            },
                        };
                    },
                    {},
                ],
                10: [
                    function (t, e, n) {
                        function i(t, e, n) {
                            "object" == typeof t ? ((n = e), (e = t), (t = null)) : "function" == typeof e && ((n = e), (e = l)),
                                (this._callback = t),
                                (this._options = e || l),
                                (this._elementCB = n),
                                (this.dom = []),
                                (this._done = !1),
                                (this._tagStack = []),
                                (this._parser = this._parser || null);
                        }
                        var r = t("domelementtype"),
                            o = /\s+/g,
                            a = t("./lib/node"),
                            s = t("./lib/element"),
                            l = { normalizeWhitespace: !1, withStartIndices: !1, withEndIndices: !1 };
                        (i.prototype.onparserinit = function (t) {
                            this._parser = t;
                        }),
                            (i.prototype.onreset = function () {
                                i.call(this, this._callback, this._options, this._elementCB);
                            }),
                            (i.prototype.onend = function () {
                                this._done || ((this._done = !0), (this._parser = null), this._handleCallback(null));
                            }),
                            (i.prototype._handleCallback = i.prototype.onerror = function (t) {
                                if ("function" == typeof this._callback) this._callback(t, this.dom);
                                else if (t) throw t;
                            }),
                            (i.prototype.onclosetag = function () {
                                var t = this._tagStack.pop();
                                this._options.withEndIndices && (t.endIndex = this._parser.endIndex), this._elementCB && this._elementCB(t);
                            }),
                            (i.prototype._createDomElement = function (t) {
                                if (!this._options.withDomLvl1) return t;
                                var e;
                                e = "tag" === t.type ? Object.create(s) : Object.create(a);
                                for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                                return e;
                            }),
                            (i.prototype._addDomElement = function (t) {
                                var e = this._tagStack[this._tagStack.length - 1],
                                    n = e ? e.children : this.dom,
                                    i = n[n.length - 1];
                                (t.next = null),
                                    this._options.withStartIndices && (t.startIndex = this._parser.startIndex),
                                    this._options.withEndIndices && (t.endIndex = this._parser.endIndex),
                                    i ? ((t.prev = i), (i.next = t)) : (t.prev = null),
                                    n.push(t),
                                    (t.parent = e || null);
                            }),
                            (i.prototype.onopentag = function (t, e) {
                                var n = { type: "script" === t ? r.Script : "style" === t ? r.Style : r.Tag, name: t, attribs: e, children: [] },
                                    i = this._createDomElement(n);
                                this._addDomElement(i), this._tagStack.push(i);
                            }),
                            (i.prototype.ontext = function (t) {
                                var e,
                                    n = this._options.normalizeWhitespace || this._options.ignoreWhitespace;
                                if (!this._tagStack.length && this.dom.length && (e = this.dom[this.dom.length - 1]).type === r.Text) n ? (e.data = (e.data + t).replace(o, " ")) : (e.data += t);
                                else if (this._tagStack.length && (e = this._tagStack[this._tagStack.length - 1]) && (e = e.children[e.children.length - 1]) && e.type === r.Text) n ? (e.data = (e.data + t).replace(o, " ")) : (e.data += t);
                                else {
                                    n && (t = t.replace(o, " "));
                                    var i = this._createDomElement({ data: t, type: r.Text });
                                    this._addDomElement(i);
                                }
                            }),
                            (i.prototype.oncomment = function (t) {
                                var e = this._tagStack[this._tagStack.length - 1];
                                if (e && e.type === r.Comment) return void (e.data += t);
                                var n = { data: t, type: r.Comment },
                                    i = this._createDomElement(n);
                                this._addDomElement(i), this._tagStack.push(i);
                            }),
                            (i.prototype.oncdatastart = function () {
                                var t = { children: [{ data: "", type: r.Text }], type: r.CDATA },
                                    e = this._createDomElement(t);
                                this._addDomElement(e), this._tagStack.push(e);
                            }),
                            (i.prototype.oncommentend = i.prototype.oncdataend = function () {
                                this._tagStack.pop();
                            }),
                            (i.prototype.onprocessinginstruction = function (t, e) {
                                var n = this._createDomElement({ name: t, data: e, type: r.Directive });
                                this._addDomElement(n);
                            }),
                            (e.exports = i);
                    },
                    { "./lib/element": 11, "./lib/node": 12, domelementtype: 9 },
                ],
                11: [
                    function (t, e, n) {
                        var i = t("./node"),
                            r = (e.exports = Object.create(i)),
                            o = { tagName: "name" };
                        Object.keys(o).forEach(function (t) {
                            var e = o[t];
                            Object.defineProperty(r, t, {
                                get: function () {
                                    return this[e] || null;
                                },
                                set: function (t) {
                                    return (this[e] = t), t;
                                },
                            });
                        });
                    },
                    { "./node": 12 },
                ],
                12: [
                    function (t, e, n) {
                        var i = (e.exports = {
                                get firstChild() {
                                    var t = this.children;
                                    return (t && t[0]) || null;
                                },
                                get lastChild() {
                                    var t = this.children;
                                    return (t && t[t.length - 1]) || null;
                                },
                                get nodeType() {
                                    return o[this.type] || o.element;
                                },
                            }),
                            r = { tagName: "name", childNodes: "children", parentNode: "parent", previousSibling: "prev", nextSibling: "next", nodeValue: "data" },
                            o = { element: 1, text: 3, cdata: 4, comment: 8 };
                        Object.keys(r).forEach(function (t) {
                            var e = r[t];
                            Object.defineProperty(i, t, {
                                get: function () {
                                    return this[e] || null;
                                },
                                set: function (t) {
                                    return (this[e] = t), t;
                                },
                            });
                        });
                    },
                    {},
                ],
                13: [
                    function (t, e, n) {
                        var i = e.exports;
                        [t("./lib/stringify"), t("./lib/traversal"), t("./lib/manipulation"), t("./lib/querying"), t("./lib/legacy"), t("./lib/helpers")].forEach(function (t) {
                            Object.keys(t).forEach(function (e) {
                                i[e] = t[e].bind(i);
                            });
                        });
                    },
                    { "./lib/helpers": 14, "./lib/legacy": 15, "./lib/manipulation": 16, "./lib/querying": 17, "./lib/stringify": 18, "./lib/traversal": 19 },
                ],
                14: [
                    function (t, e, n) {
                        n.removeSubsets = function (t) {
                            for (var e, n, i, r = t.length; --r > -1; ) {
                                for (e = n = t[r], t[r] = null, i = !0; n; ) {
                                    if (t.indexOf(n) > -1) {
                                        (i = !1), t.splice(r, 1);
                                        break;
                                    }
                                    n = n.parent;
                                }
                                i && (t[r] = e);
                            }
                            return t;
                        };
                        var i = { DISCONNECTED: 1, PRECEDING: 2, FOLLOWING: 4, CONTAINS: 8, CONTAINED_BY: 16 },
                            r = (n.compareDocumentPosition = function (t, e) {
                                var n,
                                    r,
                                    o,
                                    a,
                                    s,
                                    l,
                                    c = [],
                                    u = [];
                                if (t === e) return 0;
                                for (n = t; n; ) c.unshift(n), (n = n.parent);
                                for (n = e; n; ) u.unshift(n), (n = n.parent);
                                for (l = 0; c[l] === u[l]; ) l++;
                                return 0 === l
                                    ? i.DISCONNECTED
                                    : ((r = c[l - 1]), (o = r.children), (a = c[l]), (s = u[l]), o.indexOf(a) > o.indexOf(s) ? (r === e ? i.FOLLOWING | i.CONTAINED_BY : i.FOLLOWING) : r === t ? i.PRECEDING | i.CONTAINS : i.PRECEDING);
                            });
                        n.uniqueSort = function (t) {
                            var e,
                                n,
                                o = t.length;
                            for (t = t.slice(); --o > -1; ) (e = t[o]), (n = t.indexOf(e)), n > -1 && o > n && t.splice(o, 1);
                            return (
                                t.sort(function (t, e) {
                                    var n = r(t, e);
                                    return n & i.PRECEDING ? -1 : n & i.FOLLOWING ? 1 : 0;
                                }),
                                t
                            );
                        };
                    },
                    {},
                ],
                15: [
                    function (t, e, n) {
                        function i(t, e) {
                            return "function" == typeof e
                                ? function (n) {
                                      return n.attribs && e(n.attribs[t]);
                                  }
                                : function (n) {
                                      return n.attribs && n.attribs[t] === e;
                                  };
                        }
                        function r(t, e) {
                            return function (n) {
                                return t(n) || e(n);
                            };
                        }
                        var o = t("domelementtype"),
                            a = (n.isTag = o.isTag);
                        n.testElement = function (t, e) {
                            for (var n in t)
                                if (t.hasOwnProperty(n)) {
                                    if ("tag_name" === n) {
                                        if (!a(e) || !t.tag_name(e.name)) return !1;
                                    } else if ("tag_type" === n) {
                                        if (!t.tag_type(e.type)) return !1;
                                    } else if ("tag_contains" === n) {
                                        if (a(e) || !t.tag_contains(e.data)) return !1;
                                    } else if (!e.attribs || !t[n](e.attribs[n])) return !1;
                                } else;
                            return !0;
                        };
                        var s = {
                            tag_name: function (t) {
                                return "function" == typeof t
                                    ? function (e) {
                                          return a(e) && t(e.name);
                                      }
                                    : "*" === t
                                    ? a
                                    : function (e) {
                                          return a(e) && e.name === t;
                                      };
                            },
                            tag_type: function (t) {
                                return "function" == typeof t
                                    ? function (e) {
                                          return t(e.type);
                                      }
                                    : function (e) {
                                          return e.type === t;
                                      };
                            },
                            tag_contains: function (t) {
                                return "function" == typeof t
                                    ? function (e) {
                                          return !a(e) && t(e.data);
                                      }
                                    : function (e) {
                                          return !a(e) && e.data === t;
                                      };
                            },
                        };
                        (n.getElements = function (t, e, n, o) {
                            var a = Object.keys(t).map(function (e) {
                                var n = t[e];
                                return e in s ? s[e](n) : i(e, n);
                            });
                            return 0 === a.length ? [] : this.filter(a.reduce(r), e, n, o);
                        }),
                            (n.getElementById = function (t, e, n) {
                                return Array.isArray(e) || (e = [e]), this.findOne(i("id", t), e, n !== !1);
                            }),
                            (n.getElementsByTagName = function (t, e, n, i) {
                                return this.filter(s.tag_name(t), e, n, i);
                            }),
                            (n.getElementsByTagType = function (t, e, n, i) {
                                return this.filter(s.tag_type(t), e, n, i);
                            });
                    },
                    { domelementtype: 9 },
                ],
                16: [
                    function (t, e, n) {
                        (n.removeElement = function (t) {
                            if ((t.prev && (t.prev.next = t.next), t.next && (t.next.prev = t.prev), t.parent)) {
                                var e = t.parent.children;
                                e.splice(e.lastIndexOf(t), 1);
                            }
                        }),
                            (n.replaceElement = function (t, e) {
                                var n = (e.prev = t.prev);
                                n && (n.next = e);
                                var i = (e.next = t.next);
                                i && (i.prev = e);
                                var r = (e.parent = t.parent);
                                if (r) {
                                    var o = r.children;
                                    o[o.lastIndexOf(t)] = e;
                                }
                            }),
                            (n.appendChild = function (t, e) {
                                if (((e.parent = t), 1 !== t.children.push(e))) {
                                    var n = t.children[t.children.length - 2];
                                    (n.next = e), (e.prev = n), (e.next = null);
                                }
                            }),
                            (n.append = function (t, e) {
                                var n = t.parent,
                                    i = t.next;
                                if (((e.next = i), (e.prev = t), (t.next = e), (e.parent = n), i)) {
                                    if (((i.prev = e), n)) {
                                        var r = n.children;
                                        r.splice(r.lastIndexOf(i), 0, e);
                                    }
                                } else n && n.children.push(e);
                            }),
                            (n.prepend = function (t, e) {
                                var n = t.parent;
                                if (n) {
                                    var i = n.children;
                                    i.splice(i.lastIndexOf(t), 0, e);
                                }
                                t.prev && (t.prev.next = e), (e.parent = n), (e.prev = t.prev), (e.next = t), (t.prev = e);
                            });
                    },
                    {},
                ],
                17: [
                    function (t, e, n) {
                        function i(t, e, n, i) {
                            return Array.isArray(e) || (e = [e]), ("number" == typeof i && isFinite(i)) || (i = 1 / 0), r(t, e, n !== !1, i);
                        }
                        function r(t, e, n, i) {
                            for (
                                var o, a = [], s = 0, l = e.length;
                                l > s && !(t(e[s]) && (a.push(e[s]), --i <= 0)) && ((o = e[s].children), !(n && o && o.length > 0 && ((o = r(t, o, n, i)), (a = a.concat(o)), (i -= o.length), 0 >= i)));
                                s++
                            );
                            return a;
                        }
                        function o(t, e) {
                            for (var n = 0, i = e.length; i > n; n++) if (t(e[n])) return e[n];
                            return null;
                        }
                        function a(t, e) {
                            for (var n = null, i = 0, r = e.length; r > i && !n; i++) c(e[i]) && (t(e[i]) ? (n = e[i]) : e[i].children.length > 0 && (n = a(t, e[i].children)));
                            return n;
                        }
                        function s(t, e) {
                            for (var n = 0, i = e.length; i > n; n++) if (c(e[n]) && (t(e[n]) || (e[n].children.length > 0 && s(t, e[n].children)))) return !0;
                            return !1;
                        }
                        function l(t, e) {
                            for (var n = [], i = [e]; i.length; ) {
                                for (var r = i.pop(), o = 0, a = r.length; a > o; o++) c(r[o]) && t(r[o]) && n.push(r[o]);
                                for (; a-- > 0; ) r[a].children && r[a].children.length > 0 && i.push(r[a].children);
                            }
                            return n;
                        }
                        var c = t("domelementtype").isTag;
                        e.exports = { filter: i, find: r, findOneChild: o, findOne: a, existsOne: s, findAll: l };
                    },
                    { domelementtype: 9 },
                ],
                18: [
                    function (t, e, n) {
                        function i(t, e) {
                            return t.children
                                ? t.children
                                      .map(function (t) {
                                          return a(t, e);
                                      })
                                      .join("")
                                : "";
                        }
                        function r(t) {
                            return Array.isArray(t) ? t.map(r).join("") : s(t) ? ("br" === t.name ? "\n" : r(t.children)) : t.type === o.CDATA ? r(t.children) : t.type === o.Text ? t.data : "";
                        }
                        var o = t("domelementtype"),
                            a = t("dom-serializer"),
                            s = o.isTag;
                        e.exports = { getInnerHTML: i, getOuterHTML: a, getText: r };
                    },
                    { "dom-serializer": 7, domelementtype: 9 },
                ],
                19: [
                    function (t, e, n) {
                        var i = (n.getChildren = function (t) {
                                return t.children;
                            }),
                            r = (n.getParent = function (t) {
                                return t.parent;
                            });
                        (n.getSiblings = function (t) {
                            var e = r(t);
                            return e ? i(e) : [t];
                        }),
                            (n.getAttributeValue = function (t, e) {
                                return t.attribs && t.attribs[e];
                            }),
                            (n.hasAttrib = function (t, e) {
                                return !!t.attribs && hasOwnProperty.call(t.attribs, e);
                            }),
                            (n.getName = function (t) {
                                return t.name;
                            });
                    },
                    {},
                ],
                20: [
                    function (t, e, n) {
                        var i = t("./lib/encode.js"),
                            r = t("./lib/decode.js");
                        (n.decode = function (t, e) {
                            return (!e || 0 >= e ? r.XML : r.HTML)(t);
                        }),
                            (n.decodeStrict = function (t, e) {
                                return (!e || 0 >= e ? r.XML : r.HTMLStrict)(t);
                            }),
                            (n.encode = function (t, e) {
                                return (!e || 0 >= e ? i.XML : i.HTML)(t);
                            }),
                            (n.encodeXML = i.XML),
                            (n.encodeHTML4 = n.encodeHTML5 = n.encodeHTML = i.HTML),
                            (n.decodeXML = n.decodeXMLStrict = r.XML),
                            (n.decodeHTML4 = n.decodeHTML5 = n.decodeHTML = r.HTML),
                            (n.decodeHTML4Strict = n.decodeHTML5Strict = n.decodeHTMLStrict = r.HTMLStrict),
                            (n.escape = i.escape);
                    },
                    { "./lib/decode.js": 21, "./lib/encode.js": 23 },
                ],
                21: [
                    function (t, e, n) {
                        function i(t) {
                            var e = Object.keys(t).join("|"),
                                n = o(t);
                            e += "|#[xX][\\da-fA-F]+|#\\d+";
                            var i = new RegExp("&(?:" + e + ");", "g");
                            return function (t) {
                                return String(t).replace(i, n);
                            };
                        }
                        function r(t, e) {
                            return e > t ? 1 : -1;
                        }
                        function o(t) {
                            return function (e) {
                                return "#" === e.charAt(1) ? c("X" === e.charAt(2) || "x" === e.charAt(2) ? parseInt(e.substr(3), 16) : parseInt(e.substr(2), 10)) : t[e.slice(1, -1)];
                            };
                        }
                        var a = t("../maps/entities.json"),
                            s = t("../maps/legacy.json"),
                            l = t("../maps/xml.json"),
                            c = t("./decode_codepoint.js"),
                            u = i(l),
                            d = i(a),
                            p = (function () {
                                function t(t) {
                                    return ";" !== t.substr(-1) && (t += ";"), u(t);
                                }
                                for (var e = Object.keys(s).sort(r), n = Object.keys(a).sort(r), i = 0, l = 0; i < n.length; i++) e[l] === n[i] ? ((n[i] += ";?"), l++) : (n[i] += ";");
                                var c = new RegExp("&(?:" + n.join("|") + "|#[xX][\\da-fA-F]+;?|#\\d+;?)", "g"),
                                    u = o(a);
                                return function (e) {
                                    return String(e).replace(c, t);
                                };
                            })();
                        e.exports = { XML: u, HTML: p, HTMLStrict: d };
                    },
                    { "../maps/entities.json": 25, "../maps/legacy.json": 26, "../maps/xml.json": 27, "./decode_codepoint.js": 22 },
                ],
                22: [
                    function (t, e, n) {
                        function i(t) {
                            if ((t >= 55296 && 57343 >= t) || t > 1114111) return "�";
                            t in r && (t = r[t]);
                            var e = "";
                            return t > 65535 && ((t -= 65536), (e += String.fromCharCode(((t >>> 10) & 1023) | 55296)), (t = 56320 | (1023 & t))), (e += String.fromCharCode(t));
                        }
                        var r = t("../maps/decode.json");
                        e.exports = i;
                    },
                    { "../maps/decode.json": 24 },
                ],
                23: [
                    function (t, e, n) {
                        function i(t) {
                            return Object.keys(t)
                                .sort()
                                .reduce(function (e, n) {
                                    return (e[t[n]] = "&" + n + ";"), e;
                                }, {});
                        }
                        function r(t) {
                            var e = [],
                                n = [];
                            return (
                                Object.keys(t).forEach(function (t) {
                                    1 === t.length ? e.push("\\" + t) : n.push(t);
                                }),
                                n.unshift("[" + e.join("") + "]"),
                                new RegExp(n.join("|"), "g")
                            );
                        }
                        function o(t) {
                            return "&#x" + t.charCodeAt(0).toString(16).toUpperCase() + ";";
                        }
                        function a(t) {
                            var e = t.charCodeAt(0),
                                n = t.charCodeAt(1),
                                i = 1024 * (e - 55296) + n - 56320 + 65536;
                            return "&#x" + i.toString(16).toUpperCase() + ";";
                        }
                        function s(t, e) {
                            function n(e) {
                                return t[e];
                            }
                            return function (t) {
                                return t.replace(e, n).replace(f, a).replace(h, o);
                            };
                        }
                        function l(t) {
                            return t.replace(m, o).replace(f, a).replace(h, o);
                        }
                        var c = i(t("../maps/xml.json")),
                            u = r(c);
                        n.XML = s(c, u);
                        var d = i(t("../maps/entities.json")),
                            p = r(d);
                        n.HTML = s(d, p);
                        var h = /[^\0-\x7F]/g,
                            f = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
                            m = r(c);
                        n.escape = l;
                    },
                    { "../maps/entities.json": 25, "../maps/xml.json": 27 },
                ],
                24: [
                    function (t, e, n) {
                        e.exports = {
                            0: 65533,
                            128: 8364,
                            130: 8218,
                            131: 402,
                            132: 8222,
                            133: 8230,
                            134: 8224,
                            135: 8225,
                            136: 710,
                            137: 8240,
                            138: 352,
                            139: 8249,
                            140: 338,
                            142: 381,
                            145: 8216,
                            146: 8217,
                            147: 8220,
                            148: 8221,
                            149: 8226,
                            150: 8211,
                            151: 8212,
                            152: 732,
                            153: 8482,
                            154: 353,
                            155: 8250,
                            156: 339,
                            158: 382,
                            159: 376,
                        };
                    },
                    {},
                ],
                25: [
                    function (t, e, n) {
                        e.exports = {
                            Aacute: "Á",
                            aacute: "á",
                            Abreve: "Ă",
                            abreve: "ă",
                            ac: "∾",
                            acd: "∿",
                            acE: "∾̳",
                            Acirc: "Â",
                            acirc: "â",
                            acute: "´",
                            Acy: "А",
                            acy: "а",
                            AElig: "Æ",
                            aelig: "æ",
                            af: "⁡",
                            Afr: "𝔄",
                            afr: "𝔞",
                            Agrave: "À",
                            agrave: "à",
                            alefsym: "ℵ",
                            aleph: "ℵ",
                            Alpha: "Α",
                            alpha: "α",
                            Amacr: "Ā",
                            amacr: "ā",
                            amalg: "⨿",
                            amp: "&",
                            AMP: "&",
                            andand: "⩕",
                            And: "⩓",
                            and: "∧",
                            andd: "⩜",
                            andslope: "⩘",
                            andv: "⩚",
                            ang: "∠",
                            ange: "⦤",
                            angle: "∠",
                            angmsdaa: "⦨",
                            angmsdab: "⦩",
                            angmsdac: "⦪",
                            angmsdad: "⦫",
                            angmsdae: "⦬",
                            angmsdaf: "⦭",
                            angmsdag: "⦮",
                            angmsdah: "⦯",
                            angmsd: "∡",
                            angrt: "∟",
                            angrtvb: "⊾",
                            angrtvbd: "⦝",
                            angsph: "∢",
                            angst: "Å",
                            angzarr: "⍼",
                            Aogon: "Ą",
                            aogon: "ą",
                            Aopf: "𝔸",
                            aopf: "𝕒",
                            apacir: "⩯",
                            ap: "≈",
                            apE: "⩰",
                            ape: "≊",
                            apid: "≋",
                            apos: "'",
                            ApplyFunction: "⁡",
                            approx: "≈",
                            approxeq: "≊",
                            Aring: "Å",
                            aring: "å",
                            Ascr: "𝒜",
                            ascr: "𝒶",
                            Assign: "≔",
                            ast: "*",
                            asymp: "≈",
                            asympeq: "≍",
                            Atilde: "Ã",
                            atilde: "ã",
                            Auml: "Ä",
                            auml: "ä",
                            awconint: "∳",
                            awint: "⨑",
                            backcong: "≌",
                            backepsilon: "϶",
                            backprime: "‵",
                            backsim: "∽",
                            backsimeq: "⋍",
                            Backslash: "∖",
                            Barv: "⫧",
                            barvee: "⊽",
                            barwed: "⌅",
                            Barwed: "⌆",
                            barwedge: "⌅",
                            bbrk: "⎵",
                            bbrktbrk: "⎶",
                            bcong: "≌",
                            Bcy: "Б",
                            bcy: "б",
                            bdquo: "„",
                            becaus: "∵",
                            because: "∵",
                            Because: "∵",
                            bemptyv: "⦰",
                            bepsi: "϶",
                            bernou: "ℬ",
                            Bernoullis: "ℬ",
                            Beta: "Β",
                            beta: "β",
                            beth: "ℶ",
                            between: "≬",
                            Bfr: "𝔅",
                            bfr: "𝔟",
                            bigcap: "⋂",
                            bigcirc: "◯",
                            bigcup: "⋃",
                            bigodot: "⨀",
                            bigoplus: "⨁",
                            bigotimes: "⨂",
                            bigsqcup: "⨆",
                            bigstar: "★",
                            bigtriangledown: "▽",
                            bigtriangleup: "△",
                            biguplus: "⨄",
                            bigvee: "⋁",
                            bigwedge: "⋀",
                            bkarow: "⤍",
                            blacklozenge: "⧫",
                            blacksquare: "▪",
                            blacktriangle: "▴",
                            blacktriangledown: "▾",
                            blacktriangleleft: "◂",
                            blacktriangleright: "▸",
                            blank: "␣",
                            blk12: "▒",
                            blk14: "░",
                            blk34: "▓",
                            block: "█",
                            bne: "=⃥",
                            bnequiv: "≡⃥",
                            bNot: "⫭",
                            bnot: "⌐",
                            Bopf: "𝔹",
                            bopf: "𝕓",
                            bot: "⊥",
                            bottom: "⊥",
                            bowtie: "⋈",
                            boxbox: "⧉",
                            boxdl: "┐",
                            boxdL: "╕",
                            boxDl: "╖",
                            boxDL: "╗",
                            boxdr: "┌",
                            boxdR: "╒",
                            boxDr: "╓",
                            boxDR: "╔",
                            boxh: "─",
                            boxH: "═",
                            boxhd: "┬",
                            boxHd: "╤",
                            boxhD: "╥",
                            boxHD: "╦",
                            boxhu: "┴",
                            boxHu: "╧",
                            boxhU: "╨",
                            boxHU: "╩",
                            boxminus: "⊟",
                            boxplus: "⊞",
                            boxtimes: "⊠",
                            boxul: "┘",
                            boxuL: "╛",
                            boxUl: "╜",
                            boxUL: "╝",
                            boxur: "└",
                            boxuR: "╘",
                            boxUr: "╙",
                            boxUR: "╚",
                            boxv: "│",
                            boxV: "║",
                            boxvh: "┼",
                            boxvH: "╪",
                            boxVh: "╫",
                            boxVH: "╬",
                            boxvl: "┤",
                            boxvL: "╡",
                            boxVl: "╢",
                            boxVL: "╣",
                            boxvr: "├",
                            boxvR: "╞",
                            boxVr: "╟",
                            boxVR: "╠",
                            bprime: "‵",
                            breve: "˘",
                            Breve: "˘",
                            brvbar: "¦",
                            bscr: "𝒷",
                            Bscr: "ℬ",
                            bsemi: "⁏",
                            bsim: "∽",
                            bsime: "⋍",
                            bsolb: "⧅",
                            bsol: "\\",
                            bsolhsub: "⟈",
                            bull: "•",
                            bullet: "•",
                            bump: "≎",
                            bumpE: "⪮",
                            bumpe: "≏",
                            Bumpeq: "≎",
                            bumpeq: "≏",
                            Cacute: "Ć",
                            cacute: "ć",
                            capand: "⩄",
                            capbrcup: "⩉",
                            capcap: "⩋",
                            cap: "∩",
                            Cap: "⋒",
                            capcup: "⩇",
                            capdot: "⩀",
                            CapitalDifferentialD: "ⅅ",
                            caps: "∩︀",
                            caret: "⁁",
                            caron: "ˇ",
                            Cayleys: "ℭ",
                            ccaps: "⩍",
                            Ccaron: "Č",
                            ccaron: "č",
                            Ccedil: "Ç",
                            ccedil: "ç",
                            Ccirc: "Ĉ",
                            ccirc: "ĉ",
                            Cconint: "∰",
                            ccups: "⩌",
                            ccupssm: "⩐",
                            Cdot: "Ċ",
                            cdot: "ċ",
                            cedil: "¸",
                            Cedilla: "¸",
                            cemptyv: "⦲",
                            cent: "¢",
                            centerdot: "·",
                            CenterDot: "·",
                            cfr: "𝔠",
                            Cfr: "ℭ",
                            CHcy: "Ч",
                            chcy: "ч",
                            check: "✓",
                            checkmark: "✓",
                            Chi: "Χ",
                            chi: "χ",
                            circ: "ˆ",
                            circeq: "≗",
                            circlearrowleft: "↺",
                            circlearrowright: "↻",
                            circledast: "⊛",
                            circledcirc: "⊚",
                            circleddash: "⊝",
                            CircleDot: "⊙",
                            circledR: "®",
                            circledS: "Ⓢ",
                            CircleMinus: "⊖",
                            CirclePlus: "⊕",
                            CircleTimes: "⊗",
                            cir: "○",
                            cirE: "⧃",
                            cire: "≗",
                            cirfnint: "⨐",
                            cirmid: "⫯",
                            cirscir: "⧂",
                            ClockwiseContourIntegral: "∲",
                            CloseCurlyDoubleQuote: "”",
                            CloseCurlyQuote: "’",
                            clubs: "♣",
                            clubsuit: "♣",
                            colon: ":",
                            Colon: "∷",
                            Colone: "⩴",
                            colone: "≔",
                            coloneq: "≔",
                            comma: ",",
                            commat: "@",
                            comp: "∁",
                            compfn: "∘",
                            complement: "∁",
                            complexes: "ℂ",
                            cong: "≅",
                            congdot: "⩭",
                            Congruent: "≡",
                            conint: "∮",
                            Conint: "∯",
                            ContourIntegral: "∮",
                            copf: "𝕔",
                            Copf: "ℂ",
                            coprod: "∐",
                            Coproduct: "∐",
                            copy: "©",
                            COPY: "©",
                            copysr: "℗",
                            CounterClockwiseContourIntegral: "∳",
                            crarr: "↵",
                            cross: "✗",
                            Cross: "⨯",
                            Cscr: "𝒞",
                            cscr: "𝒸",
                            csub: "⫏",
                            csube: "⫑",
                            csup: "⫐",
                            csupe: "⫒",
                            ctdot: "⋯",
                            cudarrl: "⤸",
                            cudarrr: "⤵",
                            cuepr: "⋞",
                            cuesc: "⋟",
                            cularr: "↶",
                            cularrp: "⤽",
                            cupbrcap: "⩈",
                            cupcap: "⩆",
                            CupCap: "≍",
                            cup: "∪",
                            Cup: "⋓",
                            cupcup: "⩊",
                            cupdot: "⊍",
                            cupor: "⩅",
                            cups: "∪︀",
                            curarr: "↷",
                            curarrm: "⤼",
                            curlyeqprec: "⋞",
                            curlyeqsucc: "⋟",
                            curlyvee: "⋎",
                            curlywedge: "⋏",
                            curren: "¤",
                            curvearrowleft: "↶",
                            curvearrowright: "↷",
                            cuvee: "⋎",
                            cuwed: "⋏",
                            cwconint: "∲",
                            cwint: "∱",
                            cylcty: "⌭",
                            dagger: "†",
                            Dagger: "‡",
                            daleth: "ℸ",
                            darr: "↓",
                            Darr: "↡",
                            dArr: "⇓",
                            dash: "‐",
                            Dashv: "⫤",
                            dashv: "⊣",
                            dbkarow: "⤏",
                            dblac: "˝",
                            Dcaron: "Ď",
                            dcaron: "ď",
                            Dcy: "Д",
                            dcy: "д",
                            ddagger: "‡",
                            ddarr: "⇊",
                            DD: "ⅅ",
                            dd: "ⅆ",
                            DDotrahd: "⤑",
                            ddotseq: "⩷",
                            deg: "°",
                            Del: "∇",
                            Delta: "Δ",
                            delta: "δ",
                            demptyv: "⦱",
                            dfisht: "⥿",
                            Dfr: "𝔇",
                            dfr: "𝔡",
                            dHar: "⥥",
                            dharl: "⇃",
                            dharr: "⇂",
                            DiacriticalAcute: "´",
                            DiacriticalDot: "˙",
                            DiacriticalDoubleAcute: "˝",
                            DiacriticalGrave: "`",
                            DiacriticalTilde: "˜",
                            diam: "⋄",
                            diamond: "⋄",
                            Diamond: "⋄",
                            diamondsuit: "♦",
                            diams: "♦",
                            die: "¨",
                            DifferentialD: "ⅆ",
                            digamma: "ϝ",
                            disin: "⋲",
                            div: "÷",
                            divide: "÷",
                            divideontimes: "⋇",
                            divonx: "⋇",
                            DJcy: "Ђ",
                            djcy: "ђ",
                            dlcorn: "⌞",
                            dlcrop: "⌍",
                            dollar: "$",
                            Dopf: "𝔻",
                            dopf: "𝕕",
                            Dot: "¨",
                            dot: "˙",
                            DotDot: "⃜",
                            doteq: "≐",
                            doteqdot: "≑",
                            DotEqual: "≐",
                            dotminus: "∸",
                            dotplus: "∔",
                            dotsquare: "⊡",
                            doublebarwedge: "⌆",
                            DoubleContourIntegral: "∯",
                            DoubleDot: "¨",
                            DoubleDownArrow: "⇓",
                            DoubleLeftArrow: "⇐",
                            DoubleLeftRightArrow: "⇔",
                            DoubleLeftTee: "⫤",
                            DoubleLongLeftArrow: "⟸",
                            DoubleLongLeftRightArrow: "⟺",
                            DoubleLongRightArrow: "⟹",
                            DoubleRightArrow: "⇒",
                            DoubleRightTee: "⊨",
                            DoubleUpArrow: "⇑",
                            DoubleUpDownArrow: "⇕",
                            DoubleVerticalBar: "∥",
                            DownArrowBar: "⤓",
                            downarrow: "↓",
                            DownArrow: "↓",
                            Downarrow: "⇓",
                            DownArrowUpArrow: "⇵",
                            DownBreve: "̑",
                            downdownarrows: "⇊",
                            downharpoonleft: "⇃",
                            downharpoonright: "⇂",
                            DownLeftRightVector: "⥐",
                            DownLeftTeeVector: "⥞",
                            DownLeftVectorBar: "⥖",
                            DownLeftVector: "↽",
                            DownRightTeeVector: "⥟",
                            DownRightVectorBar: "⥗",
                            DownRightVector: "⇁",
                            DownTeeArrow: "↧",
                            DownTee: "⊤",
                            drbkarow: "⤐",
                            drcorn: "⌟",
                            drcrop: "⌌",
                            Dscr: "𝒟",
                            dscr: "𝒹",
                            DScy: "Ѕ",
                            dscy: "ѕ",
                            dsol: "⧶",
                            Dstrok: "Đ",
                            dstrok: "đ",
                            dtdot: "⋱",
                            dtri: "▿",
                            dtrif: "▾",
                            duarr: "⇵",
                            duhar: "⥯",
                            dwangle: "⦦",
                            DZcy: "Џ",
                            dzcy: "џ",
                            dzigrarr: "⟿",
                            Eacute: "É",
                            eacute: "é",
                            easter: "⩮",
                            Ecaron: "Ě",
                            ecaron: "ě",
                            Ecirc: "Ê",
                            ecirc: "ê",
                            ecir: "≖",
                            ecolon: "≕",
                            Ecy: "Э",
                            ecy: "э",
                            eDDot: "⩷",
                            Edot: "Ė",
                            edot: "ė",
                            eDot: "≑",
                            ee: "ⅇ",
                            efDot: "≒",
                            Efr: "𝔈",
                            efr: "𝔢",
                            eg: "⪚",
                            Egrave: "È",
                            egrave: "è",
                            egs: "⪖",
                            egsdot: "⪘",
                            el: "⪙",
                            Element: "∈",
                            elinters: "⏧",
                            ell: "ℓ",
                            els: "⪕",
                            elsdot: "⪗",
                            Emacr: "Ē",
                            emacr: "ē",
                            empty: "∅",
                            emptyset: "∅",
                            EmptySmallSquare: "◻",
                            emptyv: "∅",
                            EmptyVerySmallSquare: "▫",
                            emsp13: " ",
                            emsp14: " ",
                            emsp: " ",
                            ENG: "Ŋ",
                            eng: "ŋ",
                            ensp: " ",
                            Eogon: "Ę",
                            eogon: "ę",
                            Eopf: "𝔼",
                            eopf: "𝕖",
                            epar: "⋕",
                            eparsl: "⧣",
                            eplus: "⩱",
                            epsi: "ε",
                            Epsilon: "Ε",
                            epsilon: "ε",
                            epsiv: "ϵ",
                            eqcirc: "≖",
                            eqcolon: "≕",
                            eqsim: "≂",
                            eqslantgtr: "⪖",
                            eqslantless: "⪕",
                            Equal: "⩵",
                            equals: "=",
                            EqualTilde: "≂",
                            equest: "≟",
                            Equilibrium: "⇌",
                            equiv: "≡",
                            equivDD: "⩸",
                            eqvparsl: "⧥",
                            erarr: "⥱",
                            erDot: "≓",
                            escr: "ℯ",
                            Escr: "ℰ",
                            esdot: "≐",
                            Esim: "⩳",
                            esim: "≂",
                            Eta: "Η",
                            eta: "η",
                            ETH: "Ð",
                            eth: "ð",
                            Euml: "Ë",
                            euml: "ë",
                            euro: "€",
                            excl: "!",
                            exist: "∃",
                            Exists: "∃",
                            expectation: "ℰ",
                            exponentiale: "ⅇ",
                            ExponentialE: "ⅇ",
                            fallingdotseq: "≒",
                            Fcy: "Ф",
                            fcy: "ф",
                            female: "♀",
                            ffilig: "ﬃ",
                            fflig: "ﬀ",
                            ffllig: "ﬄ",
                            Ffr: "𝔉",
                            ffr: "𝔣",
                            filig: "ﬁ",
                            FilledSmallSquare: "◼",
                            FilledVerySmallSquare: "▪",
                            fjlig: "fj",
                            flat: "♭",
                            fllig: "ﬂ",
                            fltns: "▱",
                            fnof: "ƒ",
                            Fopf: "𝔽",
                            fopf: "𝕗",
                            forall: "∀",
                            ForAll: "∀",
                            fork: "⋔",
                            forkv: "⫙",
                            Fouriertrf: "ℱ",
                            fpartint: "⨍",
                            frac12: "½",
                            frac13: "⅓",
                            frac14: "¼",
                            frac15: "⅕",
                            frac16: "⅙",
                            frac18: "⅛",
                            frac23: "⅔",
                            frac25: "⅖",
                            frac34: "¾",
                            frac35: "⅗",
                            frac38: "⅜",
                            frac45: "⅘",
                            frac56: "⅚",
                            frac58: "⅝",
                            frac78: "⅞",
                            frasl: "⁄",
                            frown: "⌢",
                            fscr: "𝒻",
                            Fscr: "ℱ",
                            gacute: "ǵ",
                            Gamma: "Γ",
                            gamma: "γ",
                            Gammad: "Ϝ",
                            gammad: "ϝ",
                            gap: "⪆",
                            Gbreve: "Ğ",
                            gbreve: "ğ",
                            Gcedil: "Ģ",
                            Gcirc: "Ĝ",
                            gcirc: "ĝ",
                            Gcy: "Г",
                            gcy: "г",
                            Gdot: "Ġ",
                            gdot: "ġ",
                            ge: "≥",
                            gE: "≧",
                            gEl: "⪌",
                            gel: "⋛",
                            geq: "≥",
                            geqq: "≧",
                            geqslant: "⩾",
                            gescc: "⪩",
                            ges: "⩾",
                            gesdot: "⪀",
                            gesdoto: "⪂",
                            gesdotol: "⪄",
                            gesl: "⋛︀",
                            gesles: "⪔",
                            Gfr: "𝔊",
                            gfr: "𝔤",
                            gg: "≫",
                            Gg: "⋙",
                            ggg: "⋙",
                            gimel: "ℷ",
                            GJcy: "Ѓ",
                            gjcy: "ѓ",
                            gla: "⪥",
                            gl: "≷",
                            glE: "⪒",
                            glj: "⪤",
                            gnap: "⪊",
                            gnapprox: "⪊",
                            gne: "⪈",
                            gnE: "≩",
                            gneq: "⪈",
                            gneqq: "≩",
                            gnsim: "⋧",
                            Gopf: "𝔾",
                            gopf: "𝕘",
                            grave: "`",
                            GreaterEqual: "≥",
                            GreaterEqualLess: "⋛",
                            GreaterFullEqual: "≧",
                            GreaterGreater: "⪢",
                            GreaterLess: "≷",
                            GreaterSlantEqual: "⩾",
                            GreaterTilde: "≳",
                            Gscr: "𝒢",
                            gscr: "ℊ",
                            gsim: "≳",
                            gsime: "⪎",
                            gsiml: "⪐",
                            gtcc: "⪧",
                            gtcir: "⩺",
                            gt: ">",
                            GT: ">",
                            Gt: "≫",
                            gtdot: "⋗",
                            gtlPar: "⦕",
                            gtquest: "⩼",
                            gtrapprox: "⪆",
                            gtrarr: "⥸",
                            gtrdot: "⋗",
                            gtreqless: "⋛",
                            gtreqqless: "⪌",
                            gtrless: "≷",
                            gtrsim: "≳",
                            gvertneqq: "≩︀",
                            gvnE: "≩︀",
                            Hacek: "ˇ",
                            hairsp: " ",
                            half: "½",
                            hamilt: "ℋ",
                            HARDcy: "Ъ",
                            hardcy: "ъ",
                            harrcir: "⥈",
                            harr: "↔",
                            hArr: "⇔",
                            harrw: "↭",
                            Hat: "^",
                            hbar: "ℏ",
                            Hcirc: "Ĥ",
                            hcirc: "ĥ",
                            hearts: "♥",
                            heartsuit: "♥",
                            hellip: "…",
                            hercon: "⊹",
                            hfr: "𝔥",
                            Hfr: "ℌ",
                            HilbertSpace: "ℋ",
                            hksearow: "⤥",
                            hkswarow: "⤦",
                            hoarr: "⇿",
                            homtht: "∻",
                            hookleftarrow: "↩",
                            hookrightarrow: "↪",
                            hopf: "𝕙",
                            Hopf: "ℍ",
                            horbar: "―",
                            HorizontalLine: "─",
                            hscr: "𝒽",
                            Hscr: "ℋ",
                            hslash: "ℏ",
                            Hstrok: "Ħ",
                            hstrok: "ħ",
                            HumpDownHump: "≎",
                            HumpEqual: "≏",
                            hybull: "⁃",
                            hyphen: "‐",
                            Iacute: "Í",
                            iacute: "í",
                            ic: "⁣",
                            Icirc: "Î",
                            icirc: "î",
                            Icy: "И",
                            icy: "и",
                            Idot: "İ",
                            IEcy: "Е",
                            iecy: "е",
                            iexcl: "¡",
                            iff: "⇔",
                            ifr: "𝔦",
                            Ifr: "ℑ",
                            Igrave: "Ì",
                            igrave: "ì",
                            ii: "ⅈ",
                            iiiint: "⨌",
                            iiint: "∭",
                            iinfin: "⧜",
                            iiota: "℩",
                            IJlig: "Ĳ",
                            ijlig: "ĳ",
                            Imacr: "Ī",
                            imacr: "ī",
                            image: "ℑ",
                            ImaginaryI: "ⅈ",
                            imagline: "ℐ",
                            imagpart: "ℑ",
                            imath: "ı",
                            Im: "ℑ",
                            imof: "⊷",
                            imped: "Ƶ",
                            Implies: "⇒",
                            incare: "℅",
                            in: "∈",
                            infin: "∞",
                            infintie: "⧝",
                            inodot: "ı",
                            intcal: "⊺",
                            int: "∫",
                            Int: "∬",
                            integers: "ℤ",
                            Integral: "∫",
                            intercal: "⊺",
                            Intersection: "⋂",
                            intlarhk: "⨗",
                            intprod: "⨼",
                            InvisibleComma: "⁣",
                            InvisibleTimes: "⁢",
                            IOcy: "Ё",
                            iocy: "ё",
                            Iogon: "Į",
                            iogon: "į",
                            Iopf: "𝕀",
                            iopf: "𝕚",
                            Iota: "Ι",
                            iota: "ι",
                            iprod: "⨼",
                            iquest: "¿",
                            iscr: "𝒾",
                            Iscr: "ℐ",
                            isin: "∈",
                            isindot: "⋵",
                            isinE: "⋹",
                            isins: "⋴",
                            isinsv: "⋳",
                            isinv: "∈",
                            it: "⁢",
                            Itilde: "Ĩ",
                            itilde: "ĩ",
                            Iukcy: "І",
                            iukcy: "і",
                            Iuml: "Ï",
                            iuml: "ï",
                            Jcirc: "Ĵ",
                            jcirc: "ĵ",
                            Jcy: "Й",
                            jcy: "й",
                            Jfr: "𝔍",
                            jfr: "𝔧",
                            jmath: "ȷ",
                            Jopf: "𝕁",
                            jopf: "𝕛",
                            Jscr: "𝒥",
                            jscr: "𝒿",
                            Jsercy: "Ј",
                            jsercy: "ј",
                            Jukcy: "Є",
                            jukcy: "є",
                            Kappa: "Κ",
                            kappa: "κ",
                            kappav: "ϰ",
                            Kcedil: "Ķ",
                            kcedil: "ķ",
                            Kcy: "К",
                            kcy: "к",
                            Kfr: "𝔎",
                            kfr: "𝔨",
                            kgreen: "ĸ",
                            KHcy: "Х",
                            khcy: "х",
                            KJcy: "Ќ",
                            kjcy: "ќ",
                            Kopf: "𝕂",
                            kopf: "𝕜",
                            Kscr: "𝒦",
                            kscr: "𝓀",
                            lAarr: "⇚",
                            Lacute: "Ĺ",
                            lacute: "ĺ",
                            laemptyv: "⦴",
                            lagran: "ℒ",
                            Lambda: "Λ",
                            lambda: "λ",
                            lang: "⟨",
                            Lang: "⟪",
                            langd: "⦑",
                            langle: "⟨",
                            lap: "⪅",
                            Laplacetrf: "ℒ",
                            laquo: "«",
                            larrb: "⇤",
                            larrbfs: "⤟",
                            larr: "←",
                            Larr: "↞",
                            lArr: "⇐",
                            larrfs: "⤝",
                            larrhk: "↩",
                            larrlp: "↫",
                            larrpl: "⤹",
                            larrsim: "⥳",
                            larrtl: "↢",
                            latail: "⤙",
                            lAtail: "⤛",
                            lat: "⪫",
                            late: "⪭",
                            lates: "⪭︀",
                            lbarr: "⤌",
                            lBarr: "⤎",
                            lbbrk: "❲",
                            lbrace: "{",
                            lbrack: "[",
                            lbrke: "⦋",
                            lbrksld: "⦏",
                            lbrkslu: "⦍",
                            Lcaron: "Ľ",
                            lcaron: "ľ",
                            Lcedil: "Ļ",
                            lcedil: "ļ",
                            lceil: "⌈",
                            lcub: "{",
                            Lcy: "Л",
                            lcy: "л",
                            ldca: "⤶",
                            ldquo: "“",
                            ldquor: "„",
                            ldrdhar: "⥧",
                            ldrushar: "⥋",
                            ldsh: "↲",
                            le: "≤",
                            lE: "≦",
                            LeftAngleBracket: "⟨",
                            LeftArrowBar: "⇤",
                            leftarrow: "←",
                            LeftArrow: "←",
                            Leftarrow: "⇐",
                            LeftArrowRightArrow: "⇆",
                            leftarrowtail: "↢",
                            LeftCeiling: "⌈",
                            LeftDoubleBracket: "⟦",
                            LeftDownTeeVector: "⥡",
                            LeftDownVectorBar: "⥙",
                            LeftDownVector: "⇃",
                            LeftFloor: "⌊",
                            leftharpoondown: "↽",
                            leftharpoonup: "↼",
                            leftleftarrows: "⇇",
                            leftrightarrow: "↔",
                            LeftRightArrow: "↔",
                            Leftrightarrow: "⇔",
                            leftrightarrows: "⇆",
                            leftrightharpoons: "⇋",
                            leftrightsquigarrow: "↭",
                            LeftRightVector: "⥎",
                            LeftTeeArrow: "↤",
                            LeftTee: "⊣",
                            LeftTeeVector: "⥚",
                            leftthreetimes: "⋋",
                            LeftTriangleBar: "⧏",
                            LeftTriangle: "⊲",
                            LeftTriangleEqual: "⊴",
                            LeftUpDownVector: "⥑",
                            LeftUpTeeVector: "⥠",
                            LeftUpVectorBar: "⥘",
                            LeftUpVector: "↿",
                            LeftVectorBar: "⥒",
                            LeftVector: "↼",
                            lEg: "⪋",
                            leg: "⋚",
                            leq: "≤",
                            leqq: "≦",
                            leqslant: "⩽",
                            lescc: "⪨",
                            les: "⩽",
                            lesdot: "⩿",
                            lesdoto: "⪁",
                            lesdotor: "⪃",
                            lesg: "⋚︀",
                            lesges: "⪓",
                            lessapprox: "⪅",
                            lessdot: "⋖",
                            lesseqgtr: "⋚",
                            lesseqqgtr: "⪋",
                            LessEqualGreater: "⋚",
                            LessFullEqual: "≦",
                            LessGreater: "≶",
                            lessgtr: "≶",
                            LessLess: "⪡",
                            lesssim: "≲",
                            LessSlantEqual: "⩽",
                            LessTilde: "≲",
                            lfisht: "⥼",
                            lfloor: "⌊",
                            Lfr: "𝔏",
                            lfr: "𝔩",
                            lg: "≶",
                            lgE: "⪑",
                            lHar: "⥢",
                            lhard: "↽",
                            lharu: "↼",
                            lharul: "⥪",
                            lhblk: "▄",
                            LJcy: "Љ",
                            ljcy: "љ",
                            llarr: "⇇",
                            ll: "≪",
                            Ll: "⋘",
                            llcorner: "⌞",
                            Lleftarrow: "⇚",
                            llhard: "⥫",
                            lltri: "◺",
                            Lmidot: "Ŀ",
                            lmidot: "ŀ",
                            lmoustache: "⎰",
                            lmoust: "⎰",
                            lnap: "⪉",
                            lnapprox: "⪉",
                            lne: "⪇",
                            lnE: "≨",
                            lneq: "⪇",
                            lneqq: "≨",
                            lnsim: "⋦",
                            loang: "⟬",
                            loarr: "⇽",
                            lobrk: "⟦",
                            longleftarrow: "⟵",
                            LongLeftArrow: "⟵",
                            Longleftarrow: "⟸",
                            longleftrightarrow: "⟷",
                            LongLeftRightArrow: "⟷",
                            Longleftrightarrow: "⟺",
                            longmapsto: "⟼",
                            longrightarrow: "⟶",
                            LongRightArrow: "⟶",
                            Longrightarrow: "⟹",
                            looparrowleft: "↫",
                            looparrowright: "↬",
                            lopar: "⦅",
                            Lopf: "𝕃",
                            lopf: "𝕝",
                            loplus: "⨭",
                            lotimes: "⨴",
                            lowast: "∗",
                            lowbar: "_",
                            LowerLeftArrow: "↙",
                            LowerRightArrow: "↘",
                            loz: "◊",
                            lozenge: "◊",
                            lozf: "⧫",
                            lpar: "(",
                            lparlt: "⦓",
                            lrarr: "⇆",
                            lrcorner: "⌟",
                            lrhar: "⇋",
                            lrhard: "⥭",
                            lrm: "‎",
                            lrtri: "⊿",
                            lsaquo: "‹",
                            lscr: "𝓁",
                            Lscr: "ℒ",
                            lsh: "↰",
                            Lsh: "↰",
                            lsim: "≲",
                            lsime: "⪍",
                            lsimg: "⪏",
                            lsqb: "[",
                            lsquo: "‘",
                            lsquor: "‚",
                            Lstrok: "Ł",
                            lstrok: "ł",
                            ltcc: "⪦",
                            ltcir: "⩹",
                            lt: "<",
                            LT: "<",
                            Lt: "≪",
                            ltdot: "⋖",
                            lthree: "⋋",
                            ltimes: "⋉",
                            ltlarr: "⥶",
                            ltquest: "⩻",
                            ltri: "◃",
                            ltrie: "⊴",
                            ltrif: "◂",
                            ltrPar: "⦖",
                            lurdshar: "⥊",
                            luruhar: "⥦",
                            lvertneqq: "≨︀",
                            lvnE: "≨︀",
                            macr: "¯",
                            male: "♂",
                            malt: "✠",
                            maltese: "✠",
                            Map: "⤅",
                            map: "↦",
                            mapsto: "↦",
                            mapstodown: "↧",
                            mapstoleft: "↤",
                            mapstoup: "↥",
                            marker: "▮",
                            mcomma: "⨩",
                            Mcy: "М",
                            mcy: "м",
                            mdash: "—",
                            mDDot: "∺",
                            measuredangle: "∡",
                            MediumSpace: " ",
                            Mellintrf: "ℳ",
                            Mfr: "𝔐",
                            mfr: "𝔪",
                            mho: "℧",
                            micro: "µ",
                            midast: "*",
                            midcir: "⫰",
                            mid: "∣",
                            middot: "·",
                            minusb: "⊟",
                            minus: "−",
                            minusd: "∸",
                            minusdu: "⨪",
                            MinusPlus: "∓",
                            mlcp: "⫛",
                            mldr: "…",
                            mnplus: "∓",
                            models: "⊧",
                            Mopf: "𝕄",
                            mopf: "𝕞",
                            mp: "∓",
                            mscr: "𝓂",
                            Mscr: "ℳ",
                            mstpos: "∾",
                            Mu: "Μ",
                            mu: "μ",
                            multimap: "⊸",
                            mumap: "⊸",
                            nabla: "∇",
                            Nacute: "Ń",
                            nacute: "ń",
                            nang: "∠⃒",
                            nap: "≉",
                            napE: "⩰̸",
                            napid: "≋̸",
                            napos: "ŉ",
                            napprox: "≉",
                            natural: "♮",
                            naturals: "ℕ",
                            natur: "♮",
                            nbsp: " ",
                            nbump: "≎̸",
                            nbumpe: "≏̸",
                            ncap: "⩃",
                            Ncaron: "Ň",
                            ncaron: "ň",
                            Ncedil: "Ņ",
                            ncedil: "ņ",
                            ncong: "≇",
                            ncongdot: "⩭̸",
                            ncup: "⩂",
                            Ncy: "Н",
                            ncy: "н",
                            ndash: "–",
                            nearhk: "⤤",
                            nearr: "↗",
                            neArr: "⇗",
                            nearrow: "↗",
                            ne: "≠",
                            nedot: "≐̸",
                            NegativeMediumSpace: "​",
                            NegativeThickSpace: "​",
                            NegativeThinSpace: "​",
                            NegativeVeryThinSpace: "​",
                            nequiv: "≢",
                            nesear: "⤨",
                            nesim: "≂̸",
                            NestedGreaterGreater: "≫",
                            NestedLessLess: "≪",
                            NewLine: "\n",
                            nexist: "∄",
                            nexists: "∄",
                            Nfr: "𝔑",
                            nfr: "𝔫",
                            ngE: "≧̸",
                            nge: "≱",
                            ngeq: "≱",
                            ngeqq: "≧̸",
                            ngeqslant: "⩾̸",
                            nges: "⩾̸",
                            nGg: "⋙̸",
                            ngsim: "≵",
                            nGt: "≫⃒",
                            ngt: "≯",
                            ngtr: "≯",
                            nGtv: "≫̸",
                            nharr: "↮",
                            nhArr: "⇎",
                            nhpar: "⫲",
                            ni: "∋",
                            nis: "⋼",
                            nisd: "⋺",
                            niv: "∋",
                            NJcy: "Њ",
                            njcy: "њ",
                            nlarr: "↚",
                            nlArr: "⇍",
                            nldr: "‥",
                            nlE: "≦̸",
                            nle: "≰",
                            nleftarrow: "↚",
                            nLeftarrow: "⇍",
                            nleftrightarrow: "↮",
                            nLeftrightarrow: "⇎",
                            nleq: "≰",
                            nleqq: "≦̸",
                            nleqslant: "⩽̸",
                            nles: "⩽̸",
                            nless: "≮",
                            nLl: "⋘̸",
                            nlsim: "≴",
                            nLt: "≪⃒",
                            nlt: "≮",
                            nltri: "⋪",
                            nltrie: "⋬",
                            nLtv: "≪̸",
                            nmid: "∤",
                            NoBreak: "⁠",
                            NonBreakingSpace: " ",
                            nopf: "𝕟",
                            Nopf: "ℕ",
                            Not: "⫬",
                            not: "¬",
                            NotCongruent: "≢",
                            NotCupCap: "≭",
                            NotDoubleVerticalBar: "∦",
                            NotElement: "∉",
                            NotEqual: "≠",
                            NotEqualTilde: "≂̸",
                            NotExists: "∄",
                            NotGreater: "≯",
                            NotGreaterEqual: "≱",
                            NotGreaterFullEqual: "≧̸",
                            NotGreaterGreater: "≫̸",
                            NotGreaterLess: "≹",
                            NotGreaterSlantEqual: "⩾̸",
                            NotGreaterTilde: "≵",
                            NotHumpDownHump: "≎̸",
                            NotHumpEqual: "≏̸",
                            notin: "∉",
                            notindot: "⋵̸",
                            notinE: "⋹̸",
                            notinva: "∉",
                            notinvb: "⋷",
                            notinvc: "⋶",
                            NotLeftTriangleBar: "⧏̸",
                            NotLeftTriangle: "⋪",
                            NotLeftTriangleEqual: "⋬",
                            NotLess: "≮",
                            NotLessEqual: "≰",
                            NotLessGreater: "≸",
                            NotLessLess: "≪̸",
                            NotLessSlantEqual: "⩽̸",
                            NotLessTilde: "≴",
                            NotNestedGreaterGreater: "⪢̸",
                            NotNestedLessLess: "⪡̸",
                            notni: "∌",
                            notniva: "∌",
                            notnivb: "⋾",
                            notnivc: "⋽",
                            NotPrecedes: "⊀",
                            NotPrecedesEqual: "⪯̸",
                            NotPrecedesSlantEqual: "⋠",
                            NotReverseElement: "∌",
                            NotRightTriangleBar: "⧐̸",
                            NotRightTriangle: "⋫",
                            NotRightTriangleEqual: "⋭",
                            NotSquareSubset: "⊏̸",
                            NotSquareSubsetEqual: "⋢",
                            NotSquareSuperset: "⊐̸",
                            NotSquareSupersetEqual: "⋣",
                            NotSubset: "⊂⃒",
                            NotSubsetEqual: "⊈",
                            NotSucceeds: "⊁",
                            NotSucceedsEqual: "⪰̸",
                            NotSucceedsSlantEqual: "⋡",
                            NotSucceedsTilde: "≿̸",
                            NotSuperset: "⊃⃒",
                            NotSupersetEqual: "⊉",
                            NotTilde: "≁",
                            NotTildeEqual: "≄",
                            NotTildeFullEqual: "≇",
                            NotTildeTilde: "≉",
                            NotVerticalBar: "∤",
                            nparallel: "∦",
                            npar: "∦",
                            nparsl: "⫽⃥",
                            npart: "∂̸",
                            npolint: "⨔",
                            npr: "⊀",
                            nprcue: "⋠",
                            nprec: "⊀",
                            npreceq: "⪯̸",
                            npre: "⪯̸",
                            nrarrc: "⤳̸",
                            nrarr: "↛",
                            nrArr: "⇏",
                            nrarrw: "↝̸",
                            nrightarrow: "↛",
                            nRightarrow: "⇏",
                            nrtri: "⋫",
                            nrtrie: "⋭",
                            nsc: "⊁",
                            nsccue: "⋡",
                            nsce: "⪰̸",
                            Nscr: "𝒩",
                            nscr: "𝓃",
                            nshortmid: "∤",
                            nshortparallel: "∦",
                            nsim: "≁",
                            nsime: "≄",
                            nsimeq: "≄",
                            nsmid: "∤",
                            nspar: "∦",
                            nsqsube: "⋢",
                            nsqsupe: "⋣",
                            nsub: "⊄",
                            nsubE: "⫅̸",
                            nsube: "⊈",
                            nsubset: "⊂⃒",
                            nsubseteq: "⊈",
                            nsubseteqq: "⫅̸",
                            nsucc: "⊁",
                            nsucceq: "⪰̸",
                            nsup: "⊅",
                            nsupE: "⫆̸",
                            nsupe: "⊉",
                            nsupset: "⊃⃒",
                            nsupseteq: "⊉",
                            nsupseteqq: "⫆̸",
                            ntgl: "≹",
                            Ntilde: "Ñ",
                            ntilde: "ñ",
                            ntlg: "≸",
                            ntriangleleft: "⋪",
                            ntrianglelefteq: "⋬",
                            ntriangleright: "⋫",
                            ntrianglerighteq: "⋭",
                            Nu: "Ν",
                            nu: "ν",
                            num: "#",
                            numero: "№",
                            numsp: " ",
                            nvap: "≍⃒",
                            nvdash: "⊬",
                            nvDash: "⊭",
                            nVdash: "⊮",
                            nVDash: "⊯",
                            nvge: "≥⃒",
                            nvgt: ">⃒",
                            nvHarr: "⤄",
                            nvinfin: "⧞",
                            nvlArr: "⤂",
                            nvle: "≤⃒",
                            nvlt: "<⃒",
                            nvltrie: "⊴⃒",
                            nvrArr: "⤃",
                            nvrtrie: "⊵⃒",
                            nvsim: "∼⃒",
                            nwarhk: "⤣",
                            nwarr: "↖",
                            nwArr: "⇖",
                            nwarrow: "↖",
                            nwnear: "⤧",
                            Oacute: "Ó",
                            oacute: "ó",
                            oast: "⊛",
                            Ocirc: "Ô",
                            ocirc: "ô",
                            ocir: "⊚",
                            Ocy: "О",
                            ocy: "о",
                            odash: "⊝",
                            Odblac: "Ő",
                            odblac: "ő",
                            odiv: "⨸",
                            odot: "⊙",
                            odsold: "⦼",
                            OElig: "Œ",
                            oelig: "œ",
                            ofcir: "⦿",
                            Ofr: "𝔒",
                            ofr: "𝔬",
                            ogon: "˛",
                            Ograve: "Ò",
                            ograve: "ò",
                            ogt: "⧁",
                            ohbar: "⦵",
                            ohm: "Ω",
                            oint: "∮",
                            olarr: "↺",
                            olcir: "⦾",
                            olcross: "⦻",
                            oline: "‾",
                            olt: "⧀",
                            Omacr: "Ō",
                            omacr: "ō",
                            Omega: "Ω",
                            omega: "ω",
                            Omicron: "Ο",
                            omicron: "ο",
                            omid: "⦶",
                            ominus: "⊖",
                            Oopf: "𝕆",
                            oopf: "𝕠",
                            opar: "⦷",
                            OpenCurlyDoubleQuote: "“",
                            OpenCurlyQuote: "‘",
                            operp: "⦹",
                            oplus: "⊕",
                            orarr: "↻",
                            Or: "⩔",
                            or: "∨",
                            ord: "⩝",
                            order: "ℴ",
                            orderof: "ℴ",
                            ordf: "ª",
                            ordm: "º",
                            origof: "⊶",
                            oror: "⩖",
                            orslope: "⩗",
                            orv: "⩛",
                            oS: "Ⓢ",
                            Oscr: "𝒪",
                            oscr: "ℴ",
                            Oslash: "Ø",
                            oslash: "ø",
                            osol: "⊘",
                            Otilde: "Õ",
                            otilde: "õ",
                            otimesas: "⨶",
                            Otimes: "⨷",
                            otimes: "⊗",
                            Ouml: "Ö",
                            ouml: "ö",
                            ovbar: "⌽",
                            OverBar: "‾",
                            OverBrace: "⏞",
                            OverBracket: "⎴",
                            OverParenthesis: "⏜",
                            para: "¶",
                            parallel: "∥",
                            par: "∥",
                            parsim: "⫳",
                            parsl: "⫽",
                            part: "∂",
                            PartialD: "∂",
                            Pcy: "П",
                            pcy: "п",
                            percnt: "%",
                            period: ".",
                            permil: "‰",
                            perp: "⊥",
                            pertenk: "‱",
                            Pfr: "𝔓",
                            pfr: "𝔭",
                            Phi: "Φ",
                            phi: "φ",
                            phiv: "ϕ",
                            phmmat: "ℳ",
                            phone: "☎",
                            Pi: "Π",
                            pi: "π",
                            pitchfork: "⋔",
                            piv: "ϖ",
                            planck: "ℏ",
                            planckh: "ℎ",
                            plankv: "ℏ",
                            plusacir: "⨣",
                            plusb: "⊞",
                            pluscir: "⨢",
                            plus: "+",
                            plusdo: "∔",
                            plusdu: "⨥",
                            pluse: "⩲",
                            PlusMinus: "±",
                            plusmn: "±",
                            plussim: "⨦",
                            plustwo: "⨧",
                            pm: "±",
                            Poincareplane: "ℌ",
                            pointint: "⨕",
                            popf: "𝕡",
                            Popf: "ℙ",
                            pound: "£",
                            prap: "⪷",
                            Pr: "⪻",
                            pr: "≺",
                            prcue: "≼",
                            precapprox: "⪷",
                            prec: "≺",
                            preccurlyeq: "≼",
                            Precedes: "≺",
                            PrecedesEqual: "⪯",
                            PrecedesSlantEqual: "≼",
                            PrecedesTilde: "≾",
                            preceq: "⪯",
                            precnapprox: "⪹",
                            precneqq: "⪵",
                            precnsim: "⋨",
                            pre: "⪯",
                            prE: "⪳",
                            precsim: "≾",
                            prime: "′",
                            Prime: "″",
                            primes: "ℙ",
                            prnap: "⪹",
                            prnE: "⪵",
                            prnsim: "⋨",
                            prod: "∏",
                            Product: "∏",
                            profalar: "⌮",
                            profline: "⌒",
                            profsurf: "⌓",
                            prop: "∝",
                            Proportional: "∝",
                            Proportion: "∷",
                            propto: "∝",
                            prsim: "≾",
                            prurel: "⊰",
                            Pscr: "𝒫",
                            pscr: "𝓅",
                            Psi: "Ψ",
                            psi: "ψ",
                            puncsp: " ",
                            Qfr: "𝔔",
                            qfr: "𝔮",
                            qint: "⨌",
                            qopf: "𝕢",
                            Qopf: "ℚ",
                            qprime: "⁗",
                            Qscr: "𝒬",
                            qscr: "𝓆",
                            quaternions: "ℍ",
                            quatint: "⨖",
                            quest: "?",
                            questeq: "≟",
                            quot: '"',
                            QUOT: '"',
                            rAarr: "⇛",
                            race: "∽̱",
                            Racute: "Ŕ",
                            racute: "ŕ",
                            radic: "√",
                            raemptyv: "⦳",
                            rang: "⟩",
                            Rang: "⟫",
                            rangd: "⦒",
                            range: "⦥",
                            rangle: "⟩",
                            raquo: "»",
                            rarrap: "⥵",
                            rarrb: "⇥",
                            rarrbfs: "⤠",
                            rarrc: "⤳",
                            rarr: "→",
                            Rarr: "↠",
                            rArr: "⇒",
                            rarrfs: "⤞",
                            rarrhk: "↪",
                            rarrlp: "↬",
                            rarrpl: "⥅",
                            rarrsim: "⥴",
                            Rarrtl: "⤖",
                            rarrtl: "↣",
                            rarrw: "↝",
                            ratail: "⤚",
                            rAtail: "⤜",
                            ratio: "∶",
                            rationals: "ℚ",
                            rbarr: "⤍",
                            rBarr: "⤏",
                            RBarr: "⤐",
                            rbbrk: "❳",
                            rbrace: "}",
                            rbrack: "]",
                            rbrke: "⦌",
                            rbrksld: "⦎",
                            rbrkslu: "⦐",
                            Rcaron: "Ř",
                            rcaron: "ř",
                            Rcedil: "Ŗ",
                            rcedil: "ŗ",
                            rceil: "⌉",
                            rcub: "}",
                            Rcy: "Р",
                            rcy: "р",
                            rdca: "⤷",
                            rdldhar: "⥩",
                            rdquo: "”",
                            rdquor: "”",
                            rdsh: "↳",
                            real: "ℜ",
                            realine: "ℛ",
                            realpart: "ℜ",
                            reals: "ℝ",
                            Re: "ℜ",
                            rect: "▭",
                            reg: "®",
                            REG: "®",
                            ReverseElement: "∋",
                            ReverseEquilibrium: "⇋",
                            ReverseUpEquilibrium: "⥯",
                            rfisht: "⥽",
                            rfloor: "⌋",
                            rfr: "𝔯",
                            Rfr: "ℜ",
                            rHar: "⥤",
                            rhard: "⇁",
                            rharu: "⇀",
                            rharul: "⥬",
                            Rho: "Ρ",
                            rho: "ρ",
                            rhov: "ϱ",
                            RightAngleBracket: "⟩",
                            RightArrowBar: "⇥",
                            rightarrow: "→",
                            RightArrow: "→",
                            Rightarrow: "⇒",
                            RightArrowLeftArrow: "⇄",
                            rightarrowtail: "↣",
                            RightCeiling: "⌉",
                            RightDoubleBracket: "⟧",
                            RightDownTeeVector: "⥝",
                            RightDownVectorBar: "⥕",
                            RightDownVector: "⇂",
                            RightFloor: "⌋",
                            rightharpoondown: "⇁",
                            rightharpoonup: "⇀",
                            rightleftarrows: "⇄",
                            rightleftharpoons: "⇌",
                            rightrightarrows: "⇉",
                            rightsquigarrow: "↝",
                            RightTeeArrow: "↦",
                            RightTee: "⊢",
                            RightTeeVector: "⥛",
                            rightthreetimes: "⋌",
                            RightTriangleBar: "⧐",
                            RightTriangle: "⊳",
                            RightTriangleEqual: "⊵",
                            RightUpDownVector: "⥏",
                            RightUpTeeVector: "⥜",
                            RightUpVectorBar: "⥔",
                            RightUpVector: "↾",
                            RightVectorBar: "⥓",
                            RightVector: "⇀",
                            ring: "˚",
                            risingdotseq: "≓",
                            rlarr: "⇄",
                            rlhar: "⇌",
                            rlm: "‏",
                            rmoustache: "⎱",
                            rmoust: "⎱",
                            rnmid: "⫮",
                            roang: "⟭",
                            roarr: "⇾",
                            robrk: "⟧",
                            ropar: "⦆",
                            ropf: "𝕣",
                            Ropf: "ℝ",
                            roplus: "⨮",
                            rotimes: "⨵",
                            RoundImplies: "⥰",
                            rpar: ")",
                            rpargt: "⦔",
                            rppolint: "⨒",
                            rrarr: "⇉",
                            Rrightarrow: "⇛",
                            rsaquo: "›",
                            rscr: "𝓇",
                            Rscr: "ℛ",
                            rsh: "↱",
                            Rsh: "↱",
                            rsqb: "]",
                            rsquo: "’",
                            rsquor: "’",
                            rthree: "⋌",
                            rtimes: "⋊",
                            rtri: "▹",
                            rtrie: "⊵",
                            rtrif: "▸",
                            rtriltri: "⧎",
                            RuleDelayed: "⧴",
                            ruluhar: "⥨",
                            rx: "℞",
                            Sacute: "Ś",
                            sacute: "ś",
                            sbquo: "‚",
                            scap: "⪸",
                            Scaron: "Š",
                            scaron: "š",
                            Sc: "⪼",
                            sc: "≻",
                            sccue: "≽",
                            sce: "⪰",
                            scE: "⪴",
                            Scedil: "Ş",
                            scedil: "ş",
                            Scirc: "Ŝ",
                            scirc: "ŝ",
                            scnap: "⪺",
                            scnE: "⪶",
                            scnsim: "⋩",
                            scpolint: "⨓",
                            scsim: "≿",
                            Scy: "С",
                            scy: "с",
                            sdotb: "⊡",
                            sdot: "⋅",
                            sdote: "⩦",
                            searhk: "⤥",
                            searr: "↘",
                            seArr: "⇘",
                            searrow: "↘",
                            sect: "§",
                            semi: ";",
                            seswar: "⤩",
                            setminus: "∖",
                            setmn: "∖",
                            sext: "✶",
                            Sfr: "𝔖",
                            sfr: "𝔰",
                            sfrown: "⌢",
                            sharp: "♯",
                            SHCHcy: "Щ",
                            shchcy: "щ",
                            SHcy: "Ш",
                            shcy: "ш",
                            ShortDownArrow: "↓",
                            ShortLeftArrow: "←",
                            shortmid: "∣",
                            shortparallel: "∥",
                            ShortRightArrow: "→",
                            ShortUpArrow: "↑",
                            shy: "­",
                            Sigma: "Σ",
                            sigma: "σ",
                            sigmaf: "ς",
                            sigmav: "ς",
                            sim: "∼",
                            simdot: "⩪",
                            sime: "≃",
                            simeq: "≃",
                            simg: "⪞",
                            simgE: "⪠",
                            siml: "⪝",
                            simlE: "⪟",
                            simne: "≆",
                            simplus: "⨤",
                            simrarr: "⥲",
                            slarr: "←",
                            SmallCircle: "∘",
                            smallsetminus: "∖",
                            smashp: "⨳",
                            smeparsl: "⧤",
                            smid: "∣",
                            smile: "⌣",
                            smt: "⪪",
                            smte: "⪬",
                            smtes: "⪬︀",
                            SOFTcy: "Ь",
                            softcy: "ь",
                            solbar: "⌿",
                            solb: "⧄",
                            sol: "/",
                            Sopf: "𝕊",
                            sopf: "𝕤",
                            spades: "♠",
                            spadesuit: "♠",
                            spar: "∥",
                            sqcap: "⊓",
                            sqcaps: "⊓︀",
                            sqcup: "⊔",
                            sqcups: "⊔︀",
                            Sqrt: "√",
                            sqsub: "⊏",
                            sqsube: "⊑",
                            sqsubset: "⊏",
                            sqsubseteq: "⊑",
                            sqsup: "⊐",
                            sqsupe: "⊒",
                            sqsupset: "⊐",
                            sqsupseteq: "⊒",
                            square: "□",
                            Square: "□",
                            SquareIntersection: "⊓",
                            SquareSubset: "⊏",
                            SquareSubsetEqual: "⊑",
                            SquareSuperset: "⊐",
                            SquareSupersetEqual: "⊒",
                            SquareUnion: "⊔",
                            squarf: "▪",
                            squ: "□",
                            squf: "▪",
                            srarr: "→",
                            Sscr: "𝒮",
                            sscr: "𝓈",
                            ssetmn: "∖",
                            ssmile: "⌣",
                            sstarf: "⋆",
                            Star: "⋆",
                            star: "☆",
                            starf: "★",
                            straightepsilon: "ϵ",
                            straightphi: "ϕ",
                            strns: "¯",
                            sub: "⊂",
                            Sub: "⋐",
                            subdot: "⪽",
                            subE: "⫅",
                            sube: "⊆",
                            subedot: "⫃",
                            submult: "⫁",
                            subnE: "⫋",
                            subne: "⊊",
                            subplus: "⪿",
                            subrarr: "⥹",
                            subset: "⊂",
                            Subset: "⋐",
                            subseteq: "⊆",
                            subseteqq: "⫅",
                            SubsetEqual: "⊆",
                            subsetneq: "⊊",
                            subsetneqq: "⫋",
                            subsim: "⫇",
                            subsub: "⫕",
                            subsup: "⫓",
                            succapprox: "⪸",
                            succ: "≻",
                            succcurlyeq: "≽",
                            Succeeds: "≻",
                            SucceedsEqual: "⪰",
                            SucceedsSlantEqual: "≽",
                            SucceedsTilde: "≿",
                            succeq: "⪰",
                            succnapprox: "⪺",
                            succneqq: "⪶",
                            succnsim: "⋩",
                            succsim: "≿",
                            SuchThat: "∋",
                            sum: "∑",
                            Sum: "∑",
                            sung: "♪",
                            sup1: "¹",
                            sup2: "²",
                            sup3: "³",
                            sup: "⊃",
                            Sup: "⋑",
                            supdot: "⪾",
                            supdsub: "⫘",
                            supE: "⫆",
                            supe: "⊇",
                            supedot: "⫄",
                            Superset: "⊃",
                            SupersetEqual: "⊇",
                            suphsol: "⟉",
                            suphsub: "⫗",
                            suplarr: "⥻",
                            supmult: "⫂",
                            supnE: "⫌",
                            supne: "⊋",
                            supplus: "⫀",
                            supset: "⊃",
                            Supset: "⋑",
                            supseteq: "⊇",
                            supseteqq: "⫆",
                            supsetneq: "⊋",
                            supsetneqq: "⫌",
                            supsim: "⫈",
                            supsub: "⫔",
                            supsup: "⫖",
                            swarhk: "⤦",
                            swarr: "↙",
                            swArr: "⇙",
                            swarrow: "↙",
                            swnwar: "⤪",
                            szlig: "ß",
                            Tab: "	",
                            target: "⌖",
                            Tau: "Τ",
                            tau: "τ",
                            tbrk: "⎴",
                            Tcaron: "Ť",
                            tcaron: "ť",
                            Tcedil: "Ţ",
                            tcedil: "ţ",
                            Tcy: "Т",
                            tcy: "т",
                            tdot: "⃛",
                            telrec: "⌕",
                            Tfr: "𝔗",
                            tfr: "𝔱",
                            there4: "∴",
                            therefore: "∴",
                            Therefore: "∴",
                            Theta: "Θ",
                            theta: "θ",
                            thetasym: "ϑ",
                            thetav: "ϑ",
                            thickapprox: "≈",
                            thicksim: "∼",
                            ThickSpace: "  ",
                            ThinSpace: " ",
                            thinsp: " ",
                            thkap: "≈",
                            thksim: "∼",
                            THORN: "Þ",
                            thorn: "þ",
                            tilde: "˜",
                            Tilde: "∼",
                            TildeEqual: "≃",
                            TildeFullEqual: "≅",
                            TildeTilde: "≈",
                            timesbar: "⨱",
                            timesb: "⊠",
                            times: "×",
                            timesd: "⨰",
                            tint: "∭",
                            toea: "⤨",
                            topbot: "⌶",
                            topcir: "⫱",
                            top: "⊤",
                            Topf: "𝕋",
                            topf: "𝕥",
                            topfork: "⫚",
                            tosa: "⤩",
                            tprime: "‴",
                            trade: "™",
                            TRADE: "™",
                            triangle: "▵",
                            triangledown: "▿",
                            triangleleft: "◃",
                            trianglelefteq: "⊴",
                            triangleq: "≜",
                            triangleright: "▹",
                            trianglerighteq: "⊵",
                            tridot: "◬",
                            trie: "≜",
                            triminus: "⨺",
                            TripleDot: "⃛",
                            triplus: "⨹",
                            trisb: "⧍",
                            tritime: "⨻",
                            trpezium: "⏢",
                            Tscr: "𝒯",
                            tscr: "𝓉",
                            TScy: "Ц",
                            tscy: "ц",
                            TSHcy: "Ћ",
                            tshcy: "ћ",
                            Tstrok: "Ŧ",
                            tstrok: "ŧ",
                            twixt: "≬",
                            twoheadleftarrow: "↞",
                            twoheadrightarrow: "↠",
                            Uacute: "Ú",
                            uacute: "ú",
                            uarr: "↑",
                            Uarr: "↟",
                            uArr: "⇑",
                            Uarrocir: "⥉",
                            Ubrcy: "Ў",
                            ubrcy: "ў",
                            Ubreve: "Ŭ",
                            ubreve: "ŭ",
                            Ucirc: "Û",
                            ucirc: "û",
                            Ucy: "У",
                            ucy: "у",
                            udarr: "⇅",
                            Udblac: "Ű",
                            udblac: "ű",
                            udhar: "⥮",
                            ufisht: "⥾",
                            Ufr: "𝔘",
                            ufr: "𝔲",
                            Ugrave: "Ù",
                            ugrave: "ù",
                            uHar: "⥣",
                            uharl: "↿",
                            uharr: "↾",
                            uhblk: "▀",
                            ulcorn: "⌜",
                            ulcorner: "⌜",
                            ulcrop: "⌏",
                            ultri: "◸",
                            Umacr: "Ū",
                            umacr: "ū",
                            uml: "¨",
                            UnderBar: "_",
                            UnderBrace: "⏟",
                            UnderBracket: "⎵",
                            UnderParenthesis: "⏝",
                            Union: "⋃",
                            UnionPlus: "⊎",
                            Uogon: "Ų",
                            uogon: "ų",
                            Uopf: "𝕌",
                            uopf: "𝕦",
                            UpArrowBar: "⤒",
                            uparrow: "↑",
                            UpArrow: "↑",
                            Uparrow: "⇑",
                            UpArrowDownArrow: "⇅",
                            updownarrow: "↕",
                            UpDownArrow: "↕",
                            Updownarrow: "⇕",
                            UpEquilibrium: "⥮",
                            upharpoonleft: "↿",
                            upharpoonright: "↾",
                            uplus: "⊎",
                            UpperLeftArrow: "↖",
                            UpperRightArrow: "↗",
                            upsi: "υ",
                            Upsi: "ϒ",
                            upsih: "ϒ",
                            Upsilon: "Υ",
                            upsilon: "υ",
                            UpTeeArrow: "↥",
                            UpTee: "⊥",
                            upuparrows: "⇈",
                            urcorn: "⌝",
                            urcorner: "⌝",
                            urcrop: "⌎",
                            Uring: "Ů",
                            uring: "ů",
                            urtri: "◹",
                            Uscr: "𝒰",
                            uscr: "𝓊",
                            utdot: "⋰",
                            Utilde: "Ũ",
                            utilde: "ũ",
                            utri: "▵",
                            utrif: "▴",
                            uuarr: "⇈",
                            Uuml: "Ü",
                            uuml: "ü",
                            uwangle: "⦧",
                            vangrt: "⦜",
                            varepsilon: "ϵ",
                            varkappa: "ϰ",
                            varnothing: "∅",
                            varphi: "ϕ",
                            varpi: "ϖ",
                            varpropto: "∝",
                            varr: "↕",
                            vArr: "⇕",
                            varrho: "ϱ",
                            varsigma: "ς",
                            varsubsetneq: "⊊︀",
                            varsubsetneqq: "⫋︀",
                            varsupsetneq: "⊋︀",
                            varsupsetneqq: "⫌︀",
                            vartheta: "ϑ",
                            vartriangleleft: "⊲",
                            vartriangleright: "⊳",
                            vBar: "⫨",
                            Vbar: "⫫",
                            vBarv: "⫩",
                            Vcy: "В",
                            vcy: "в",
                            vdash: "⊢",
                            vDash: "⊨",
                            Vdash: "⊩",
                            VDash: "⊫",
                            Vdashl: "⫦",
                            veebar: "⊻",
                            vee: "∨",
                            Vee: "⋁",
                            veeeq: "≚",
                            vellip: "⋮",
                            verbar: "|",
                            Verbar: "‖",
                            vert: "|",
                            Vert: "‖",
                            VerticalBar: "∣",
                            VerticalLine: "|",
                            VerticalSeparator: "❘",
                            VerticalTilde: "≀",
                            VeryThinSpace: " ",
                            Vfr: "𝔙",
                            vfr: "𝔳",
                            vltri: "⊲",
                            vnsub: "⊂⃒",
                            vnsup: "⊃⃒",
                            Vopf: "𝕍",
                            vopf: "𝕧",
                            vprop: "∝",
                            vrtri: "⊳",
                            Vscr: "𝒱",
                            vscr: "𝓋",
                            vsubnE: "⫋︀",
                            vsubne: "⊊︀",
                            vsupnE: "⫌︀",
                            vsupne: "⊋︀",
                            Vvdash: "⊪",
                            vzigzag: "⦚",
                            Wcirc: "Ŵ",
                            wcirc: "ŵ",
                            wedbar: "⩟",
                            wedge: "∧",
                            Wedge: "⋀",
                            wedgeq: "≙",
                            weierp: "℘",
                            Wfr: "𝔚",
                            wfr: "𝔴",
                            Wopf: "𝕎",
                            wopf: "𝕨",
                            wp: "℘",
                            wr: "≀",
                            wreath: "≀",
                            Wscr: "𝒲",
                            wscr: "𝓌",
                            xcap: "⋂",
                            xcirc: "◯",
                            xcup: "⋃",
                            xdtri: "▽",
                            Xfr: "𝔛",
                            xfr: "𝔵",
                            xharr: "⟷",
                            xhArr: "⟺",
                            Xi: "Ξ",
                            xi: "ξ",
                            xlarr: "⟵",
                            xlArr: "⟸",
                            xmap: "⟼",
                            xnis: "⋻",
                            xodot: "⨀",
                            Xopf: "𝕏",
                            xopf: "𝕩",
                            xoplus: "⨁",
                            xotime: "⨂",
                            xrarr: "⟶",
                            xrArr: "⟹",
                            Xscr: "𝒳",
                            xscr: "𝓍",
                            xsqcup: "⨆",
                            xuplus: "⨄",
                            xutri: "△",
                            xvee: "⋁",
                            xwedge: "⋀",
                            Yacute: "Ý",
                            yacute: "ý",
                            YAcy: "Я",
                            yacy: "я",
                            Ycirc: "Ŷ",
                            ycirc: "ŷ",
                            Ycy: "Ы",
                            ycy: "ы",
                            yen: "¥",
                            Yfr: "𝔜",
                            yfr: "𝔶",
                            YIcy: "Ї",
                            yicy: "ї",
                            Yopf: "𝕐",
                            yopf: "𝕪",
                            Yscr: "𝒴",
                            yscr: "𝓎",
                            YUcy: "Ю",
                            yucy: "ю",
                            yuml: "ÿ",
                            Yuml: "Ÿ",
                            Zacute: "Ź",
                            zacute: "ź",
                            Zcaron: "Ž",
                            zcaron: "ž",
                            Zcy: "З",
                            zcy: "з",
                            Zdot: "Ż",
                            zdot: "ż",
                            zeetrf: "ℨ",
                            ZeroWidthSpace: "​",
                            Zeta: "Ζ",
                            zeta: "ζ",
                            zfr: "𝔷",
                            Zfr: "ℨ",
                            ZHcy: "Ж",
                            zhcy: "ж",
                            zigrarr: "⇝",
                            zopf: "𝕫",
                            Zopf: "ℤ",
                            Zscr: "𝒵",
                            zscr: "𝓏",
                            zwj: "‍",
                            zwnj: "‌",
                        };
                    },
                    {},
                ],
                26: [
                    function (t, e, n) {
                        e.exports = {
                            Aacute: "Á",
                            aacute: "á",
                            Acirc: "Â",
                            acirc: "â",
                            acute: "´",
                            AElig: "Æ",
                            aelig: "æ",
                            Agrave: "À",
                            agrave: "à",
                            amp: "&",
                            AMP: "&",
                            Aring: "Å",
                            aring: "å",
                            Atilde: "Ã",
                            atilde: "ã",
                            Auml: "Ä",
                            auml: "ä",
                            brvbar: "¦",
                            Ccedil: "Ç",
                            ccedil: "ç",
                            cedil: "¸",
                            cent: "¢",
                            copy: "©",
                            COPY: "©",
                            curren: "¤",
                            deg: "°",
                            divide: "÷",
                            Eacute: "É",
                            eacute: "é",
                            Ecirc: "Ê",
                            ecirc: "ê",
                            Egrave: "È",
                            egrave: "è",
                            ETH: "Ð",
                            eth: "ð",
                            Euml: "Ë",
                            euml: "ë",
                            frac12: "½",
                            frac14: "¼",
                            frac34: "¾",
                            gt: ">",
                            GT: ">",
                            Iacute: "Í",
                            iacute: "í",
                            Icirc: "Î",
                            icirc: "î",
                            iexcl: "¡",
                            Igrave: "Ì",
                            igrave: "ì",
                            iquest: "¿",
                            Iuml: "Ï",
                            iuml: "ï",
                            laquo: "«",
                            lt: "<",
                            LT: "<",
                            macr: "¯",
                            micro: "µ",
                            middot: "·",
                            nbsp: " ",
                            not: "¬",
                            Ntilde: "Ñ",
                            ntilde: "ñ",
                            Oacute: "Ó",
                            oacute: "ó",
                            Ocirc: "Ô",
                            ocirc: "ô",
                            Ograve: "Ò",
                            ograve: "ò",
                            ordf: "ª",
                            ordm: "º",
                            Oslash: "Ø",
                            oslash: "ø",
                            Otilde: "Õ",
                            otilde: "õ",
                            Ouml: "Ö",
                            ouml: "ö",
                            para: "¶",
                            plusmn: "±",
                            pound: "£",
                            quot: '"',
                            QUOT: '"',
                            raquo: "»",
                            reg: "®",
                            REG: "®",
                            sect: "§",
                            shy: "­",
                            sup1: "¹",
                            sup2: "²",
                            sup3: "³",
                            szlig: "ß",
                            THORN: "Þ",
                            thorn: "þ",
                            times: "×",
                            Uacute: "Ú",
                            uacute: "ú",
                            Ucirc: "Û",
                            ucirc: "û",
                            Ugrave: "Ù",
                            ugrave: "ù",
                            uml: "¨",
                            Uuml: "Ü",
                            uuml: "ü",
                            Yacute: "Ý",
                            yacute: "ý",
                            yen: "¥",
                            yuml: "ÿ",
                        };
                    },
                    {},
                ],
                27: [
                    function (t, e, n) {
                        e.exports = { amp: "&", apos: "'", gt: ">", lt: "<", quot: '"' };
                    },
                    {},
                ],
                28: [
                    function (t, e, n) {
                        function i() {
                            (this._events = this._events || {}), (this._maxListeners = this._maxListeners || void 0);
                        }
                        function r(t) {
                            return "function" == typeof t;
                        }
                        function o(t) {
                            return "number" == typeof t;
                        }
                        function a(t) {
                            return "object" == typeof t && null !== t;
                        }
                        function s(t) {
                            return void 0 === t;
                        }
                        (e.exports = i),
                            (i.EventEmitter = i),
                            (i.prototype._events = void 0),
                            (i.prototype._maxListeners = void 0),
                            (i.defaultMaxListeners = 10),
                            (i.prototype.setMaxListeners = function (t) {
                                if (!o(t) || 0 > t || isNaN(t)) throw TypeError("n must be a positive number");
                                return (this._maxListeners = t), this;
                            }),
                            (i.prototype.emit = function (t) {
                                var e, n, i, o, l, c;
                                if ((this._events || (this._events = {}), "error" === t && (!this._events.error || (a(this._events.error) && !this._events.error.length)))) {
                                    if (((e = arguments[1]), e instanceof Error)) throw e;
                                    var u = new Error('Uncaught, unspecified "error" event. (' + e + ")");
                                    throw ((u.context = e), u);
                                }
                                if (((n = this._events[t]), s(n))) return !1;
                                if (r(n))
                                    switch (arguments.length) {
                                        case 1:
                                            n.call(this);
                                            break;
                                        case 2:
                                            n.call(this, arguments[1]);
                                            break;
                                        case 3:
                                            n.call(this, arguments[1], arguments[2]);
                                            break;
                                        default:
                                            (o = Array.prototype.slice.call(arguments, 1)), n.apply(this, o);
                                    }
                                else if (a(n)) for (o = Array.prototype.slice.call(arguments, 1), c = n.slice(), i = c.length, l = 0; i > l; l++) c[l].apply(this, o);
                                return !0;
                            }),
                            (i.prototype.addListener = function (t, e) {
                                var n;
                                if (!r(e)) throw TypeError("listener must be a function");
                                return (
                                    this._events || (this._events = {}),
                                    this._events.newListener && this.emit("newListener", t, r(e.listener) ? e.listener : e),
                                    this._events[t] ? (a(this._events[t]) ? this._events[t].push(e) : (this._events[t] = [this._events[t], e])) : (this._events[t] = e),
                                    a(this._events[t]) &&
                                        !this._events[t].warned &&
                                        ((n = s(this._maxListeners) ? i.defaultMaxListeners : this._maxListeners),
                                        n &&
                                            n > 0 &&
                                            this._events[t].length > n &&
                                            ((this._events[t].warned = !0),
                                            console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.", this._events[t].length),
                                            "function" == typeof console.trace && console.trace())),
                                    this
                                );
                            }),
                            (i.prototype.on = i.prototype.addListener),
                            (i.prototype.once = function (t, e) {
                                function n() {
                                    this.removeListener(t, n), i || ((i = !0), e.apply(this, arguments));
                                }
                                if (!r(e)) throw TypeError("listener must be a function");
                                var i = !1;
                                return (n.listener = e), this.on(t, n), this;
                            }),
                            (i.prototype.removeListener = function (t, e) {
                                var n, i, o, s;
                                if (!r(e)) throw TypeError("listener must be a function");
                                if (!this._events || !this._events[t]) return this;
                                if (((n = this._events[t]), (o = n.length), (i = -1), n === e || (r(n.listener) && n.listener === e))) delete this._events[t], this._events.removeListener && this.emit("removeListener", t, e);
                                else if (a(n)) {
                                    for (s = o; s-- > 0; )
                                        if (n[s] === e || (n[s].listener && n[s].listener === e)) {
                                            i = s;
                                            break;
                                        }
                                    if (0 > i) return this;
                                    1 === n.length ? ((n.length = 0), delete this._events[t]) : n.splice(i, 1), this._events.removeListener && this.emit("removeListener", t, e);
                                }
                                return this;
                            }),
                            (i.prototype.removeAllListeners = function (t) {
                                var e, n;
                                if (!this._events) return this;
                                if (!this._events.removeListener) return 0 === arguments.length ? (this._events = {}) : this._events[t] && delete this._events[t], this;
                                if (0 === arguments.length) {
                                    for (e in this._events) "removeListener" !== e && this.removeAllListeners(e);
                                    return this.removeAllListeners("removeListener"), (this._events = {}), this;
                                }
                                if (((n = this._events[t]), r(n))) this.removeListener(t, n);
                                else if (n) for (; n.length; ) this.removeListener(t, n[n.length - 1]);
                                return delete this._events[t], this;
                            }),
                            (i.prototype.listeners = function (t) {
                                var e;
                                return (e = this._events && this._events[t] ? (r(this._events[t]) ? [this._events[t]] : this._events[t].slice()) : []);
                            }),
                            (i.prototype.listenerCount = function (t) {
                                if (this._events) {
                                    var e = this._events[t];
                                    if (r(e)) return 1;
                                    if (e) return e.length;
                                }
                                return 0;
                            }),
                            (i.listenerCount = function (t, e) {
                                return t.listenerCount(e);
                            });
                    },
                    {},
                ],
                29: [
                    function (t, e, n) {
                        function i(t) {
                            (this._cbs = t || {}), (this.events = []);
                        }
                        e.exports = i;
                        var r = t("./").EVENTS;
                        Object.keys(r).forEach(function (t) {
                            if (0 === r[t])
                                (t = "on" + t),
                                    (i.prototype[t] = function () {
                                        this.events.push([t]), this._cbs[t] && this._cbs[t]();
                                    });
                            else if (1 === r[t])
                                (t = "on" + t),
                                    (i.prototype[t] = function (e) {
                                        this.events.push([t, e]), this._cbs[t] && this._cbs[t](e);
                                    });
                            else {
                                if (2 !== r[t]) throw Error("wrong number of arguments");
                                (t = "on" + t),
                                    (i.prototype[t] = function (e, n) {
                                        this.events.push([t, e, n]), this._cbs[t] && this._cbs[t](e, n);
                                    });
                            }
                        }),
                            (i.prototype.onreset = function () {
                                (this.events = []), this._cbs.onreset && this._cbs.onreset();
                            }),
                            (i.prototype.restart = function () {
                                this._cbs.onreset && this._cbs.onreset();
                                for (var t = 0, e = this.events.length; e > t; t++)
                                    if (this._cbs[this.events[t][0]]) {
                                        var n = this.events[t].length;
                                        1 === n ? this._cbs[this.events[t][0]]() : 2 === n ? this._cbs[this.events[t][0]](this.events[t][1]) : this._cbs[this.events[t][0]](this.events[t][1], this.events[t][2]);
                                    }
                            });
                    },
                    { "./": 36 },
                ],
                30: [
                    function (t, e, n) {
                        function i(t, e) {
                            this.init(t, e);
                        }
                        function r(t, e) {
                            return u.getElementsByTagName(t, e, !0);
                        }
                        function o(t, e) {
                            return u.getElementsByTagName(t, e, !0, 1)[0];
                        }
                        function a(t, e, n) {
                            return u.getText(u.getElementsByTagName(t, e, n, 1)).trim();
                        }
                        function s(t, e, n, i, r) {
                            var o = a(n, i, r);
                            o && (t[e] = o);
                        }
                        var l = t("./index.js"),
                            c = l.DomHandler,
                            u = l.DomUtils;
                        t("inherits")(i, c), (i.prototype.init = c);
                        var d = function (t) {
                            return "rss" === t || "feed" === t || "rdf:RDF" === t;
                        };
                        (i.prototype.onend = function () {
                            var t,
                                e,
                                n = {},
                                i = o(d, this.dom);
                            i &&
                                ("feed" === i.name
                                    ? ((e = i.children),
                                      (n.type = "atom"),
                                      s(n, "id", "id", e),
                                      s(n, "title", "title", e),
                                      (t = o("link", e)) && (t = t.attribs) && (t = t.href) && (n.link = t),
                                      s(n, "description", "subtitle", e),
                                      (t = a("updated", e)) && (n.updated = new Date(t)),
                                      s(n, "author", "email", e, !0),
                                      (n.items = r("entry", e).map(function (t) {
                                          var e,
                                              n = {};
                                          return (
                                              (t = t.children),
                                              s(n, "id", "id", t),
                                              s(n, "title", "title", t),
                                              (e = o("link", t)) && (e = e.attribs) && (e = e.href) && (n.link = e),
                                              (e = a("summary", t) || a("content", t)) && (n.description = e),
                                              (e = a("updated", t)) && (n.pubDate = new Date(e)),
                                              n
                                          );
                                      })))
                                    : ((e = o("channel", i.children).children),
                                      (n.type = i.name.substr(0, 3)),
                                      (n.id = ""),
                                      s(n, "title", "title", e),
                                      s(n, "link", "link", e),
                                      s(n, "description", "description", e),
                                      (t = a("lastBuildDate", e)) && (n.updated = new Date(t)),
                                      s(n, "author", "managingEditor", e, !0),
                                      (n.items = r("item", i.children).map(function (t) {
                                          var e,
                                              n = {};
                                          return (t = t.children), s(n, "id", "guid", t), s(n, "title", "title", t), s(n, "link", "link", t), s(n, "description", "description", t), (e = a("pubDate", t)) && (n.pubDate = new Date(e)), n;
                                      })))),
                                (this.dom = n),
                                c.prototype._handleCallback.call(this, i ? null : Error("couldn't find root of feed"));
                        }),
                            (e.exports = i);
                    },
                    { "./index.js": 36, inherits: 38 },
                ],
                31: [
                    function (t, e, n) {
                        function i(t, e) {
                            (this._options = e || {}),
                                (this._cbs = t || {}),
                                (this._tagname = ""),
                                (this._attribname = ""),
                                (this._attribvalue = ""),
                                (this._attribs = null),
                                (this._stack = []),
                                (this.startIndex = 0),
                                (this.endIndex = null),
                                (this._lowerCaseTagNames = "lowerCaseTags" in this._options ? !!this._options.lowerCaseTags : !this._options.xmlMode),
                                (this._lowerCaseAttributeNames = "lowerCaseAttributeNames" in this._options ? !!this._options.lowerCaseAttributeNames : !this._options.xmlMode),
                                this._options.Tokenizer && (r = this._options.Tokenizer),
                                (this._tokenizer = new r(this._options, this)),
                                this._cbs.onparserinit && this._cbs.onparserinit(this);
                        }
                        var r = t("./Tokenizer.js"),
                            o = { input: !0, option: !0, optgroup: !0, select: !0, button: !0, datalist: !0, textarea: !0 },
                            a = {
                                tr: { tr: !0, th: !0, td: !0 },
                                th: { th: !0 },
                                td: { thead: !0, th: !0, td: !0 },
                                body: { head: !0, link: !0, script: !0 },
                                li: { li: !0 },
                                p: { p: !0 },
                                h1: { p: !0 },
                                h2: { p: !0 },
                                h3: { p: !0 },
                                h4: { p: !0 },
                                h5: { p: !0 },
                                h6: { p: !0 },
                                select: o,
                                input: o,
                                output: o,
                                button: o,
                                datalist: o,
                                textarea: o,
                                option: { option: !0 },
                                optgroup: { optgroup: !0 },
                            },
                            s = {
                                __proto__: null,
                                area: !0,
                                base: !0,
                                basefont: !0,
                                br: !0,
                                col: !0,
                                command: !0,
                                embed: !0,
                                frame: !0,
                                hr: !0,
                                img: !0,
                                input: !0,
                                isindex: !0,
                                keygen: !0,
                                link: !0,
                                meta: !0,
                                param: !0,
                                source: !0,
                                track: !0,
                                wbr: !0,
                                path: !0,
                                circle: !0,
                                ellipse: !0,
                                line: !0,
                                rect: !0,
                                use: !0,
                                stop: !0,
                                polyline: !0,
                                polygon: !0,
                            },
                            l = /\s|\//;
                        t("inherits")(i, t("events").EventEmitter),
                            (i.prototype._updatePosition = function (t) {
                                null === this.endIndex ? (this._tokenizer._sectionStart <= t ? (this.startIndex = 0) : (this.startIndex = this._tokenizer._sectionStart - t)) : (this.startIndex = this.endIndex + 1),
                                    (this.endIndex = this._tokenizer.getAbsoluteIndex());
                            }),
                            (i.prototype.ontext = function (t) {
                                this._updatePosition(1), this.endIndex--, this._cbs.ontext && this._cbs.ontext(t);
                            }),
                            (i.prototype.onopentagname = function (t) {
                                if ((this._lowerCaseTagNames && (t = t.toLowerCase()), (this._tagname = t), !this._options.xmlMode && t in a)) for (var e; (e = this._stack[this._stack.length - 1]) in a[t]; this.onclosetag(e));
                                (!this._options.xmlMode && t in s) || this._stack.push(t), this._cbs.onopentagname && this._cbs.onopentagname(t), this._cbs.onopentag && (this._attribs = {});
                            }),
                            (i.prototype.onopentagend = function () {
                                this._updatePosition(1),
                                    this._attribs && (this._cbs.onopentag && this._cbs.onopentag(this._tagname, this._attribs), (this._attribs = null)),
                                    !this._options.xmlMode && this._cbs.onclosetag && this._tagname in s && this._cbs.onclosetag(this._tagname),
                                    (this._tagname = "");
                            }),
                            (i.prototype.onclosetag = function (t) {
                                if ((this._updatePosition(1), this._lowerCaseTagNames && (t = t.toLowerCase()), !this._stack.length || (t in s && !this._options.xmlMode)))
                                    this._options.xmlMode || ("br" !== t && "p" !== t) || (this.onopentagname(t), this._closeCurrentTag());
                                else {
                                    var e = this._stack.lastIndexOf(t);
                                    if (-1 !== e)
                                        if (this._cbs.onclosetag) for (e = this._stack.length - e; e--; ) this._cbs.onclosetag(this._stack.pop());
                                        else this._stack.length = e;
                                    else "p" !== t || this._options.xmlMode || (this.onopentagname(t), this._closeCurrentTag());
                                }
                            }),
                            (i.prototype.onselfclosingtag = function () {
                                this._options.xmlMode || this._options.recognizeSelfClosing ? this._closeCurrentTag() : this.onopentagend();
                            }),
                            (i.prototype._closeCurrentTag = function () {
                                var t = this._tagname;
                                this.onopentagend(), this._stack[this._stack.length - 1] === t && (this._cbs.onclosetag && this._cbs.onclosetag(t), this._stack.pop());
                            }),
                            (i.prototype.onattribname = function (t) {
                                this._lowerCaseAttributeNames && (t = t.toLowerCase()), (this._attribname = t);
                            }),
                            (i.prototype.onattribdata = function (t) {
                                this._attribvalue += t;
                            }),
                            (i.prototype.onattribend = function () {
                                this._cbs.onattribute && this._cbs.onattribute(this._attribname, this._attribvalue),
                                    this._attribs && !Object.prototype.hasOwnProperty.call(this._attribs, this._attribname) && (this._attribs[this._attribname] = this._attribvalue),
                                    (this._attribname = ""),
                                    (this._attribvalue = "");
                            }),
                            (i.prototype._getInstructionName = function (t) {
                                var e = t.search(l),
                                    n = 0 > e ? t : t.substr(0, e);
                                return this._lowerCaseTagNames && (n = n.toLowerCase()), n;
                            }),
                            (i.prototype.ondeclaration = function (t) {
                                if (this._cbs.onprocessinginstruction) {
                                    var e = this._getInstructionName(t);
                                    this._cbs.onprocessinginstruction("!" + e, "!" + t);
                                }
                            }),
                            (i.prototype.onprocessinginstruction = function (t) {
                                if (this._cbs.onprocessinginstruction) {
                                    var e = this._getInstructionName(t);
                                    this._cbs.onprocessinginstruction("?" + e, "?" + t);
                                }
                            }),
                            (i.prototype.oncomment = function (t) {
                                this._updatePosition(4), this._cbs.oncomment && this._cbs.oncomment(t), this._cbs.oncommentend && this._cbs.oncommentend();
                            }),
                            (i.prototype.oncdata = function (t) {
                                this._updatePosition(1),
                                    this._options.xmlMode || this._options.recognizeCDATA
                                        ? (this._cbs.oncdatastart && this._cbs.oncdatastart(), this._cbs.ontext && this._cbs.ontext(t), this._cbs.oncdataend && this._cbs.oncdataend())
                                        : this.oncomment("[CDATA[" + t + "]]");
                            }),
                            (i.prototype.onerror = function (t) {
                                this._cbs.onerror && this._cbs.onerror(t);
                            }),
                            (i.prototype.onend = function () {
                                if (this._cbs.onclosetag) for (var t = this._stack.length; t > 0; this._cbs.onclosetag(this._stack[--t]));
                                this._cbs.onend && this._cbs.onend();
                            }),
                            (i.prototype.reset = function () {
                                this._cbs.onreset && this._cbs.onreset(),
                                    this._tokenizer.reset(),
                                    (this._tagname = ""),
                                    (this._attribname = ""),
                                    (this._attribs = null),
                                    (this._stack = []),
                                    this._cbs.onparserinit && this._cbs.onparserinit(this);
                            }),
                            (i.prototype.parseComplete = function (t) {
                                this.reset(), this.end(t);
                            }),
                            (i.prototype.write = function (t) {
                                this._tokenizer.write(t);
                            }),
                            (i.prototype.end = function (t) {
                                this._tokenizer.end(t);
                            }),
                            (i.prototype.pause = function () {
                                this._tokenizer.pause();
                            }),
                            (i.prototype.resume = function () {
                                this._tokenizer.resume();
                            }),
                            (i.prototype.parseChunk = i.prototype.write),
                            (i.prototype.done = i.prototype.end),
                            (e.exports = i);
                    },
                    { "./Tokenizer.js": 34, events: 28, inherits: 38 },
                ],
                32: [
                    function (t, e, n) {
                        function i(t) {
                            this._cbs = t || {};
                        }
                        e.exports = i;
                        var r = t("./").EVENTS;
                        Object.keys(r).forEach(function (t) {
                            if (0 === r[t])
                                (t = "on" + t),
                                    (i.prototype[t] = function () {
                                        this._cbs[t] && this._cbs[t]();
                                    });
                            else if (1 === r[t])
                                (t = "on" + t),
                                    (i.prototype[t] = function (e) {
                                        this._cbs[t] && this._cbs[t](e);
                                    });
                            else {
                                if (2 !== r[t]) throw Error("wrong number of arguments");
                                (t = "on" + t),
                                    (i.prototype[t] = function (e, n) {
                                        this._cbs[t] && this._cbs[t](e, n);
                                    });
                            }
                        });
                    },
                    { "./": 36 },
                ],
                33: [
                    function (t, e, n) {
                        function i(t) {
                            o.call(this, new r(this), t);
                        }
                        function r(t) {
                            this.scope = t;
                        }
                        e.exports = i;
                        var o = t("./WritableStream.js");
                        t("inherits")(i, o), (i.prototype.readable = !0);
                        var a = t("../").EVENTS;
                        Object.keys(a).forEach(function (t) {
                            if (0 === a[t])
                                r.prototype["on" + t] = function () {
                                    this.scope.emit(t);
                                };
                            else if (1 === a[t])
                                r.prototype["on" + t] = function (e) {
                                    this.scope.emit(t, e);
                                };
                            else {
                                if (2 !== a[t]) throw Error("wrong number of arguments!");
                                r.prototype["on" + t] = function (e, n) {
                                    this.scope.emit(t, e, n);
                                };
                            }
                        });
                    },
                    { "../": 36, "./WritableStream.js": 35, inherits: 38 },
                ],
                34: [
                    function (t, e, n) {
                        function i(t) {
                            return " " === t || "\n" === t || "	" === t || "\f" === t || "\r" === t;
                        }
                        function r(t, e) {
                            return function (n) {
                                n === t && (this._state = e);
                            };
                        }
                        function o(t, e, n) {
                            var i = t.toLowerCase();
                            return t === i
                                ? function (t) {
                                      t === i ? (this._state = e) : ((this._state = n), this._index--);
                                  }
                                : function (r) {
                                      r === i || r === t ? (this._state = e) : ((this._state = n), this._index--);
                                  };
                        }
                        function a(t, e) {
                            var n = t.toLowerCase();
                            return function (i) {
                                i === n || i === t ? (this._state = e) : ((this._state = m), this._index--);
                            };
                        }
                        function s(t, e) {
                            (this._state = h),
                                (this._buffer = ""),
                                (this._sectionStart = 0),
                                (this._index = 0),
                                (this._bufferOffset = 0),
                                (this._baseState = h),
                                (this._special = mt),
                                (this._cbs = e),
                                (this._running = !0),
                                (this._ended = !1),
                                (this._xmlMode = !(!t || !t.xmlMode)),
                                (this._decodeEntities = !(!t || !t.decodeEntities));
                        }
                        e.exports = s;
                        var l = t("entities/lib/decode_codepoint.js"),
                            c = t("entities/maps/entities.json"),
                            u = t("entities/maps/legacy.json"),
                            d = t("entities/maps/xml.json"),
                            p = 0,
                            h = p++,
                            f = p++,
                            m = p++,
                            v = p++,
                            g = p++,
                            y = p++,
                            b = p++,
                            w = p++,
                            $ = p++,
                            x = p++,
                            k = p++,
                            S = p++,
                            C = p++,
                            _ = p++,
                            T = p++,
                            E = p++,
                            A = p++,
                            I = p++,
                            R = p++,
                            P = p++,
                            j = p++,
                            D = p++,
                            O = p++,
                            L = p++,
                            N = p++,
                            q = p++,
                            U = p++,
                            M = p++,
                            B = p++,
                            F = p++,
                            H = p++,
                            V = p++,
                            z = p++,
                            W = p++,
                            Y = p++,
                            G = p++,
                            X = p++,
                            J = p++,
                            K = p++,
                            Q = p++,
                            Z = p++,
                            tt = p++,
                            et = p++,
                            nt = p++,
                            it = p++,
                            rt = p++,
                            ot = p++,
                            at = p++,
                            st = p++,
                            lt = p++,
                            ct = p++,
                            ut = p++,
                            dt = p++,
                            pt = p++,
                            ht = p++,
                            ft = 0,
                            mt = ft++,
                            vt = ft++,
                            gt = ft++;
                        (s.prototype._stateText = function (t) {
                            "<" === t
                                ? (this._index > this._sectionStart && this._cbs.ontext(this._getSection()), (this._state = f), (this._sectionStart = this._index))
                                : this._decodeEntities &&
                                  this._special === mt &&
                                  "&" === t &&
                                  (this._index > this._sectionStart && this._cbs.ontext(this._getSection()), (this._baseState = h), (this._state = ct), (this._sectionStart = this._index));
                        }),
                            (s.prototype._stateBeforeTagName = function (t) {
                                "/" === t
                                    ? (this._state = g)
                                    : "<" === t
                                    ? (this._cbs.ontext(this._getSection()), (this._sectionStart = this._index))
                                    : ">" === t || this._special !== mt || i(t)
                                    ? (this._state = h)
                                    : "!" === t
                                    ? ((this._state = T), (this._sectionStart = this._index + 1))
                                    : "?" === t
                                    ? ((this._state = A), (this._sectionStart = this._index + 1))
                                    : ((this._state = this._xmlMode || ("s" !== t && "S" !== t) ? m : H), (this._sectionStart = this._index));
                            }),
                            (s.prototype._stateInTagName = function (t) {
                                ("/" === t || ">" === t || i(t)) && (this._emitToken("onopentagname"), (this._state = w), this._index--);
                            }),
                            (s.prototype._stateBeforeCloseingTagName = function (t) {
                                i(t) || (">" === t ? (this._state = h) : this._special !== mt ? ("s" === t || "S" === t ? (this._state = V) : ((this._state = h), this._index--)) : ((this._state = y), (this._sectionStart = this._index)));
                            }),
                            (s.prototype._stateInCloseingTagName = function (t) {
                                (">" === t || i(t)) && (this._emitToken("onclosetag"), (this._state = b), this._index--);
                            }),
                            (s.prototype._stateAfterCloseingTagName = function (t) {
                                ">" === t && ((this._state = h), (this._sectionStart = this._index + 1));
                            }),
                            (s.prototype._stateBeforeAttributeName = function (t) {
                                ">" === t ? (this._cbs.onopentagend(), (this._state = h), (this._sectionStart = this._index + 1)) : "/" === t ? (this._state = v) : i(t) || ((this._state = $), (this._sectionStart = this._index));
                            }),
                            (s.prototype._stateInSelfClosingTag = function (t) {
                                ">" === t ? (this._cbs.onselfclosingtag(), (this._state = h), (this._sectionStart = this._index + 1)) : i(t) || ((this._state = w), this._index--);
                            }),
                            (s.prototype._stateInAttributeName = function (t) {
                                ("=" === t || "/" === t || ">" === t || i(t)) && (this._cbs.onattribname(this._getSection()), (this._sectionStart = -1), (this._state = x), this._index--);
                            }),
                            (s.prototype._stateAfterAttributeName = function (t) {
                                "=" === t ? (this._state = k) : "/" === t || ">" === t ? (this._cbs.onattribend(), (this._state = w), this._index--) : i(t) || (this._cbs.onattribend(), (this._state = $), (this._sectionStart = this._index));
                            }),
                            (s.prototype._stateBeforeAttributeValue = function (t) {
                                '"' === t
                                    ? ((this._state = S), (this._sectionStart = this._index + 1))
                                    : "'" === t
                                    ? ((this._state = C), (this._sectionStart = this._index + 1))
                                    : i(t) || ((this._state = _), (this._sectionStart = this._index), this._index--);
                            }),
                            (s.prototype._stateInAttributeValueDoubleQuotes = function (t) {
                                '"' === t
                                    ? (this._emitToken("onattribdata"), this._cbs.onattribend(), (this._state = w))
                                    : this._decodeEntities && "&" === t && (this._emitToken("onattribdata"), (this._baseState = this._state), (this._state = ct), (this._sectionStart = this._index));
                            }),
                            (s.prototype._stateInAttributeValueSingleQuotes = function (t) {
                                "'" === t
                                    ? (this._emitToken("onattribdata"), this._cbs.onattribend(), (this._state = w))
                                    : this._decodeEntities && "&" === t && (this._emitToken("onattribdata"), (this._baseState = this._state), (this._state = ct), (this._sectionStart = this._index));
                            }),
                            (s.prototype._stateInAttributeValueNoQuotes = function (t) {
                                i(t) || ">" === t
                                    ? (this._emitToken("onattribdata"), this._cbs.onattribend(), (this._state = w), this._index--)
                                    : this._decodeEntities && "&" === t && (this._emitToken("onattribdata"), (this._baseState = this._state), (this._state = ct), (this._sectionStart = this._index));
                            }),
                            (s.prototype._stateBeforeDeclaration = function (t) {
                                this._state = "[" === t ? D : "-" === t ? I : E;
                            }),
                            (s.prototype._stateInDeclaration = function (t) {
                                ">" === t && (this._cbs.ondeclaration(this._getSection()), (this._state = h), (this._sectionStart = this._index + 1));
                            }),
                            (s.prototype._stateInProcessingInstruction = function (t) {
                                ">" === t && (this._cbs.onprocessinginstruction(this._getSection()), (this._state = h), (this._sectionStart = this._index + 1));
                            }),
                            (s.prototype._stateBeforeComment = function (t) {
                                "-" === t ? ((this._state = R), (this._sectionStart = this._index + 1)) : (this._state = E);
                            }),
                            (s.prototype._stateInComment = function (t) {
                                "-" === t && (this._state = P);
                            }),
                            (s.prototype._stateAfterComment1 = function (t) {
                                "-" === t ? (this._state = j) : (this._state = R);
                            }),
                            (s.prototype._stateAfterComment2 = function (t) {
                                ">" === t ? (this._cbs.oncomment(this._buffer.substring(this._sectionStart, this._index - 2)), (this._state = h), (this._sectionStart = this._index + 1)) : "-" !== t && (this._state = R);
                            }),
                            (s.prototype._stateBeforeCdata1 = o("C", O, E)),
                            (s.prototype._stateBeforeCdata2 = o("D", L, E)),
                            (s.prototype._stateBeforeCdata3 = o("A", N, E)),
                            (s.prototype._stateBeforeCdata4 = o("T", q, E)),
                            (s.prototype._stateBeforeCdata5 = o("A", U, E)),
                            (s.prototype._stateBeforeCdata6 = function (t) {
                                "[" === t ? ((this._state = M), (this._sectionStart = this._index + 1)) : ((this._state = E), this._index--);
                            }),
                            (s.prototype._stateInCdata = function (t) {
                                "]" === t && (this._state = B);
                            }),
                            (s.prototype._stateAfterCdata1 = r("]", F)),
                            (s.prototype._stateAfterCdata2 = function (t) {
                                ">" === t ? (this._cbs.oncdata(this._buffer.substring(this._sectionStart, this._index - 2)), (this._state = h), (this._sectionStart = this._index + 1)) : "]" !== t && (this._state = M);
                            }),
                            (s.prototype._stateBeforeSpecial = function (t) {
                                "c" === t || "C" === t ? (this._state = z) : "t" === t || "T" === t ? (this._state = et) : ((this._state = m), this._index--);
                            }),
                            (s.prototype._stateBeforeSpecialEnd = function (t) {
                                this._special !== vt || ("c" !== t && "C" !== t) ? (this._special !== gt || ("t" !== t && "T" !== t) ? (this._state = h) : (this._state = ot)) : (this._state = J);
                            }),
                            (s.prototype._stateBeforeScript1 = a("R", W)),
                            (s.prototype._stateBeforeScript2 = a("I", Y)),
                            (s.prototype._stateBeforeScript3 = a("P", G)),
                            (s.prototype._stateBeforeScript4 = a("T", X)),
                            (s.prototype._stateBeforeScript5 = function (t) {
                                ("/" === t || ">" === t || i(t)) && (this._special = vt), (this._state = m), this._index--;
                            }),
                            (s.prototype._stateAfterScript1 = o("R", K, h)),
                            (s.prototype._stateAfterScript2 = o("I", Q, h)),
                            (s.prototype._stateAfterScript3 = o("P", Z, h)),
                            (s.prototype._stateAfterScript4 = o("T", tt, h)),
                            (s.prototype._stateAfterScript5 = function (t) {
                                ">" === t || i(t) ? ((this._special = mt), (this._state = y), (this._sectionStart = this._index - 6), this._index--) : (this._state = h);
                            }),
                            (s.prototype._stateBeforeStyle1 = a("Y", nt)),
                            (s.prototype._stateBeforeStyle2 = a("L", it)),
                            (s.prototype._stateBeforeStyle3 = a("E", rt)),
                            (s.prototype._stateBeforeStyle4 = function (t) {
                                ("/" === t || ">" === t || i(t)) && (this._special = gt), (this._state = m), this._index--;
                            }),
                            (s.prototype._stateAfterStyle1 = o("Y", at, h)),
                            (s.prototype._stateAfterStyle2 = o("L", st, h)),
                            (s.prototype._stateAfterStyle3 = o("E", lt, h)),
                            (s.prototype._stateAfterStyle4 = function (t) {
                                ">" === t || i(t) ? ((this._special = mt), (this._state = y), (this._sectionStart = this._index - 5), this._index--) : (this._state = h);
                            }),
                            (s.prototype._stateBeforeEntity = o("#", ut, dt)),
                            (s.prototype._stateBeforeNumericEntity = o("X", ht, pt)),
                            (s.prototype._parseNamedEntityStrict = function () {
                                if (this._sectionStart + 1 < this._index) {
                                    var t = this._buffer.substring(this._sectionStart + 1, this._index),
                                        e = this._xmlMode ? d : c;
                                    e.hasOwnProperty(t) && (this._emitPartial(e[t]), (this._sectionStart = this._index + 1));
                                }
                            }),
                            (s.prototype._parseLegacyEntity = function () {
                                var t = this._sectionStart + 1,
                                    e = this._index - t;
                                for (e > 6 && (e = 6); e >= 2; ) {
                                    var n = this._buffer.substr(t, e);
                                    if (u.hasOwnProperty(n)) return this._emitPartial(u[n]), void (this._sectionStart += e + 1);
                                    e--;
                                }
                            }),
                            (s.prototype._stateInNamedEntity = function (t) {
                                ";" === t
                                    ? (this._parseNamedEntityStrict(), this._sectionStart + 1 < this._index && !this._xmlMode && this._parseLegacyEntity(), (this._state = this._baseState))
                                    : ("a" > t || t > "z") &&
                                      ("A" > t || t > "Z") &&
                                      ("0" > t || t > "9") &&
                                      (this._xmlMode || this._sectionStart + 1 === this._index || (this._baseState !== h ? "=" !== t && this._parseNamedEntityStrict() : this._parseLegacyEntity()),
                                      (this._state = this._baseState),
                                      this._index--);
                            }),
                            (s.prototype._decodeNumericEntity = function (t, e) {
                                var n = this._sectionStart + t;
                                if (n !== this._index) {
                                    var i = this._buffer.substring(n, this._index),
                                        r = parseInt(i, e);
                                    this._emitPartial(l(r)), (this._sectionStart = this._index);
                                } else this._sectionStart--;
                                this._state = this._baseState;
                            }),
                            (s.prototype._stateInNumericEntity = function (t) {
                                ";" === t ? (this._decodeNumericEntity(2, 10), this._sectionStart++) : ("0" > t || t > "9") && (this._xmlMode ? (this._state = this._baseState) : this._decodeNumericEntity(2, 10), this._index--);
                            }),
                            (s.prototype._stateInHexEntity = function (t) {
                                ";" === t
                                    ? (this._decodeNumericEntity(3, 16), this._sectionStart++)
                                    : ("a" > t || t > "f") && ("A" > t || t > "F") && ("0" > t || t > "9") && (this._xmlMode ? (this._state = this._baseState) : this._decodeNumericEntity(3, 16), this._index--);
                            }),
                            (s.prototype._cleanup = function () {
                                this._sectionStart < 0
                                    ? ((this._buffer = ""), (this._bufferOffset += this._index), (this._index = 0))
                                    : this._running &&
                                      (this._state === h
                                          ? (this._sectionStart !== this._index && this._cbs.ontext(this._buffer.substr(this._sectionStart)), (this._buffer = ""), (this._bufferOffset += this._index), (this._index = 0))
                                          : this._sectionStart === this._index
                                          ? ((this._buffer = ""), (this._bufferOffset += this._index), (this._index = 0))
                                          : ((this._buffer = this._buffer.substr(this._sectionStart)), (this._index -= this._sectionStart), (this._bufferOffset += this._sectionStart)),
                                      (this._sectionStart = 0));
                            }),
                            (s.prototype.write = function (t) {
                                this._ended && this._cbs.onerror(Error(".write() after done!")), (this._buffer += t), this._parse();
                            }),
                            (s.prototype._parse = function () {
                                for (; this._index < this._buffer.length && this._running; ) {
                                    var t = this._buffer.charAt(this._index);
                                    this._state === h
                                        ? this._stateText(t)
                                        : this._state === f
                                        ? this._stateBeforeTagName(t)
                                        : this._state === m
                                        ? this._stateInTagName(t)
                                        : this._state === g
                                        ? this._stateBeforeCloseingTagName(t)
                                        : this._state === y
                                        ? this._stateInCloseingTagName(t)
                                        : this._state === b
                                        ? this._stateAfterCloseingTagName(t)
                                        : this._state === v
                                        ? this._stateInSelfClosingTag(t)
                                        : this._state === w
                                        ? this._stateBeforeAttributeName(t)
                                        : this._state === $
                                        ? this._stateInAttributeName(t)
                                        : this._state === x
                                        ? this._stateAfterAttributeName(t)
                                        : this._state === k
                                        ? this._stateBeforeAttributeValue(t)
                                        : this._state === S
                                        ? this._stateInAttributeValueDoubleQuotes(t)
                                        : this._state === C
                                        ? this._stateInAttributeValueSingleQuotes(t)
                                        : this._state === _
                                        ? this._stateInAttributeValueNoQuotes(t)
                                        : this._state === T
                                        ? this._stateBeforeDeclaration(t)
                                        : this._state === E
                                        ? this._stateInDeclaration(t)
                                        : this._state === A
                                        ? this._stateInProcessingInstruction(t)
                                        : this._state === I
                                        ? this._stateBeforeComment(t)
                                        : this._state === R
                                        ? this._stateInComment(t)
                                        : this._state === P
                                        ? this._stateAfterComment1(t)
                                        : this._state === j
                                        ? this._stateAfterComment2(t)
                                        : this._state === D
                                        ? this._stateBeforeCdata1(t)
                                        : this._state === O
                                        ? this._stateBeforeCdata2(t)
                                        : this._state === L
                                        ? this._stateBeforeCdata3(t)
                                        : this._state === N
                                        ? this._stateBeforeCdata4(t)
                                        : this._state === q
                                        ? this._stateBeforeCdata5(t)
                                        : this._state === U
                                        ? this._stateBeforeCdata6(t)
                                        : this._state === M
                                        ? this._stateInCdata(t)
                                        : this._state === B
                                        ? this._stateAfterCdata1(t)
                                        : this._state === F
                                        ? this._stateAfterCdata2(t)
                                        : this._state === H
                                        ? this._stateBeforeSpecial(t)
                                        : this._state === V
                                        ? this._stateBeforeSpecialEnd(t)
                                        : this._state === z
                                        ? this._stateBeforeScript1(t)
                                        : this._state === W
                                        ? this._stateBeforeScript2(t)
                                        : this._state === Y
                                        ? this._stateBeforeScript3(t)
                                        : this._state === G
                                        ? this._stateBeforeScript4(t)
                                        : this._state === X
                                        ? this._stateBeforeScript5(t)
                                        : this._state === J
                                        ? this._stateAfterScript1(t)
                                        : this._state === K
                                        ? this._stateAfterScript2(t)
                                        : this._state === Q
                                        ? this._stateAfterScript3(t)
                                        : this._state === Z
                                        ? this._stateAfterScript4(t)
                                        : this._state === tt
                                        ? this._stateAfterScript5(t)
                                        : this._state === et
                                        ? this._stateBeforeStyle1(t)
                                        : this._state === nt
                                        ? this._stateBeforeStyle2(t)
                                        : this._state === it
                                        ? this._stateBeforeStyle3(t)
                                        : this._state === rt
                                        ? this._stateBeforeStyle4(t)
                                        : this._state === ot
                                        ? this._stateAfterStyle1(t)
                                        : this._state === at
                                        ? this._stateAfterStyle2(t)
                                        : this._state === st
                                        ? this._stateAfterStyle3(t)
                                        : this._state === lt
                                        ? this._stateAfterStyle4(t)
                                        : this._state === ct
                                        ? this._stateBeforeEntity(t)
                                        : this._state === ut
                                        ? this._stateBeforeNumericEntity(t)
                                        : this._state === dt
                                        ? this._stateInNamedEntity(t)
                                        : this._state === pt
                                        ? this._stateInNumericEntity(t)
                                        : this._state === ht
                                        ? this._stateInHexEntity(t)
                                        : this._cbs.onerror(Error("unknown _state"), this._state),
                                        this._index++;
                                }
                                this._cleanup();
                            }),
                            (s.prototype.pause = function () {
                                this._running = !1;
                            }),
                            (s.prototype.resume = function () {
                                (this._running = !0), this._index < this._buffer.length && this._parse(), this._ended && this._finish();
                            }),
                            (s.prototype.end = function (t) {
                                this._ended && this._cbs.onerror(Error(".end() after done!")), t && this.write(t), (this._ended = !0), this._running && this._finish();
                            }),
                            (s.prototype._finish = function () {
                                this._sectionStart < this._index && this._handleTrailingData(), this._cbs.onend();
                            }),
                            (s.prototype._handleTrailingData = function () {
                                var t = this._buffer.substr(this._sectionStart);
                                this._state === M || this._state === B || this._state === F
                                    ? this._cbs.oncdata(t)
                                    : this._state === R || this._state === P || this._state === j
                                    ? this._cbs.oncomment(t)
                                    : this._state !== dt || this._xmlMode
                                    ? this._state !== pt || this._xmlMode
                                        ? this._state !== ht || this._xmlMode
                                            ? this._state !== m &&
                                              this._state !== w &&
                                              this._state !== k &&
                                              this._state !== x &&
                                              this._state !== $ &&
                                              this._state !== C &&
                                              this._state !== S &&
                                              this._state !== _ &&
                                              this._state !== y &&
                                              this._cbs.ontext(t)
                                            : (this._decodeNumericEntity(3, 16), this._sectionStart < this._index && ((this._state = this._baseState), this._handleTrailingData()))
                                        : (this._decodeNumericEntity(2, 10), this._sectionStart < this._index && ((this._state = this._baseState), this._handleTrailingData()))
                                    : (this._parseLegacyEntity(), this._sectionStart < this._index && ((this._state = this._baseState), this._handleTrailingData()));
                            }),
                            (s.prototype.reset = function () {
                                s.call(this, { xmlMode: this._xmlMode, decodeEntities: this._decodeEntities }, this._cbs);
                            }),
                            (s.prototype.getAbsoluteIndex = function () {
                                return this._bufferOffset + this._index;
                            }),
                            (s.prototype._getSection = function () {
                                return this._buffer.substring(this._sectionStart, this._index);
                            }),
                            (s.prototype._emitToken = function (t) {
                                this._cbs[t](this._getSection()), (this._sectionStart = -1);
                            }),
                            (s.prototype._emitPartial = function (t) {
                                this._baseState !== h ? this._cbs.onattribdata(t) : this._cbs.ontext(t);
                            });
                    },
                    { "entities/lib/decode_codepoint.js": 22, "entities/maps/entities.json": 25, "entities/maps/legacy.json": 26, "entities/maps/xml.json": 27 },
                ],
                35: [
                    function (t, e, n) {
                        function i(t, e) {
                            var n = (this._parser = new r(t, e)),
                                i = (this._decoder = new a());
                            o.call(this, { decodeStrings: !1 }),
                                this.once("finish", function () {
                                    n.end(i.end());
                                });
                        }
                        e.exports = i;
                        var r = t("./Parser.js"),
                            o = t("stream").Writable || t("readable-stream").Writable,
                            a = t("string_decoder").StringDecoder,
                            s = t("buffer").Buffer;
                        t("inherits")(i, o),
                            (o.prototype._write = function (t, e, n) {
                                t instanceof s && (t = this._decoder.write(t)), this._parser.write(t), n();
                            });
                    },
                    { "./Parser.js": 31, buffer: 5, inherits: 38, "readable-stream": 3, stream: 58, string_decoder: 4 },
                ],
                36: [
                    function (t, e, n) {
                        function i(t, n) {
                            return delete e.exports[t], (e.exports[t] = n), n;
                        }
                        var r = t("./Parser.js"),
                            o = t("domhandler");
                        e.exports = {
                            Parser: r,
                            Tokenizer: t("./Tokenizer.js"),
                            ElementType: t("domelementtype"),
                            DomHandler: o,
                            get FeedHandler() {
                                return i("FeedHandler", t("./FeedHandler.js"));
                            },
                            get Stream() {
                                return i("Stream", t("./Stream.js"));
                            },
                            get WritableStream() {
                                return i("WritableStream", t("./WritableStream.js"));
                            },
                            get ProxyHandler() {
                                return i("ProxyHandler", t("./ProxyHandler.js"));
                            },
                            get DomUtils() {
                                return i("DomUtils", t("domutils"));
                            },
                            get CollectingHandler() {
                                return i("CollectingHandler", t("./CollectingHandler.js"));
                            },
                            DefaultHandler: o,
                            get RssHandler() {
                                return i("RssHandler", this.FeedHandler);
                            },
                            parseDOM: function (t, e) {
                                var n = new o(e);
                                return new r(n, e).end(t), n.dom;
                            },
                            parseFeed: function (t, n) {
                                var i = new e.exports.FeedHandler(n);
                                return new r(i, n).end(t), i.dom;
                            },
                            createDomStream: function (t, e, n) {
                                var i = new o(t, e, n);
                                return new r(i, e);
                            },
                            EVENTS: { attribute: 2, cdatastart: 0, cdataend: 0, text: 1, processinginstruction: 2, comment: 1, commentend: 0, closetag: 1, opentag: 2, opentagname: 1, error: 1, end: 0 },
                        };
                    },
                    { "./CollectingHandler.js": 29, "./FeedHandler.js": 30, "./Parser.js": 31, "./ProxyHandler.js": 32, "./Stream.js": 33, "./Tokenizer.js": 34, "./WritableStream.js": 35, domelementtype: 9, domhandler: 10, domutils: 13 },
                ],
                37: [
                    function (t, e, n) {
                        (n.read = function (t, e, n, i, r) {
                            var o,
                                a,
                                s = 8 * r - i - 1,
                                l = (1 << s) - 1,
                                c = l >> 1,
                                u = -7,
                                d = n ? r - 1 : 0,
                                p = n ? -1 : 1,
                                h = t[e + d];
                            for (d += p, o = h & ((1 << -u) - 1), h >>= -u, u += s; u > 0; o = 256 * o + t[e + d], d += p, u -= 8);
                            for (a = o & ((1 << -u) - 1), o >>= -u, u += i; u > 0; a = 256 * a + t[e + d], d += p, u -= 8);
                            if (0 === o) o = 1 - c;
                            else {
                                if (o === l) return a ? NaN : (h ? -1 : 1) * (1 / 0);
                                (a += Math.pow(2, i)), (o -= c);
                            }
                            return (h ? -1 : 1) * a * Math.pow(2, o - i);
                        }),
                            (n.write = function (t, e, n, i, r, o) {
                                var a,
                                    s,
                                    l,
                                    c = 8 * o - r - 1,
                                    u = (1 << c) - 1,
                                    d = u >> 1,
                                    p = 23 === r ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
                                    h = i ? 0 : o - 1,
                                    f = i ? 1 : -1,
                                    m = 0 > e || (0 === e && 0 > 1 / e) ? 1 : 0;
                                for (
                                    e = Math.abs(e),
                                        isNaN(e) || e === 1 / 0
                                            ? ((s = isNaN(e) ? 1 : 0), (a = u))
                                            : ((a = Math.floor(Math.log(e) / Math.LN2)),
                                              e * (l = Math.pow(2, -a)) < 1 && (a--, (l *= 2)),
                                              (e += a + d >= 1 ? p / l : p * Math.pow(2, 1 - d)),
                                              e * l >= 2 && (a++, (l /= 2)),
                                              a + d >= u ? ((s = 0), (a = u)) : a + d >= 1 ? ((s = (e * l - 1) * Math.pow(2, r)), (a += d)) : ((s = e * Math.pow(2, d - 1) * Math.pow(2, r)), (a = 0)));
                                    r >= 8;
                                    t[n + h] = 255 & s, h += f, s /= 256, r -= 8
                                );
                                for (a = (a << r) | s, c += r; c > 0; t[n + h] = 255 & a, h += f, a /= 256, c -= 8);
                                t[n + h - f] |= 128 * m;
                            });
                    },
                    {},
                ],
                38: [
                    function (t, e, n) {
                        "function" == typeof Object.create
                            ? (e.exports = function (t, e) {
                                  (t.super_ = e), (t.prototype = Object.create(e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }));
                              })
                            : (e.exports = function (t, e) {
                                  t.super_ = e;
                                  var n = function () {};
                                  (n.prototype = e.prototype), (t.prototype = new n()), (t.prototype.constructor = t);
                              });
                    },
                    {},
                ],
                39: [
                    function (t, e, n) {
                        function i(t) {
                            return !!t.constructor && "function" == typeof t.constructor.isBuffer && t.constructor.isBuffer(t);
                        }
                        function r(t) {
                            return "function" == typeof t.readFloatLE && "function" == typeof t.slice && i(t.slice(0, 0));
                        }
                        e.exports = function (t) {
                            return null != t && (i(t) || r(t) || !!t._isBuffer);
                        };
                    },
                    {},
                ],
                40: [
                    function (t, e, n) {
                        var i = {}.toString;
                        e.exports =
                            Array.isArray ||
                            function (t) {
                                return "[object Array]" == i.call(t);
                            };
                    },
                    {},
                ],
                41: [
                    function (t, e, n) {
                        (function (t) {
                            function n(t) {
                                if ("string" == typeof t) return t;
                                if (r(t)) return y ? y.call(t) : "";
                                var e = t + "";
                                return "0" == e && 1 / t == -s ? "-0" : e;
                            }
                            function i(t) {
                                return !!t && "object" == typeof t;
                            }
                            function r(t) {
                                return "symbol" == typeof t || (i(t) && m.call(t) == l);
                            }
                            function o(t) {
                                return null == t ? "" : n(t);
                            }
                            function a(t) {
                                return (t = o(t)), t && u.test(t) ? t.replace(c, "\\$&") : t;
                            }
                            var s = 1 / 0,
                                l = "[object Symbol]",
                                c = /[\\^$.*+?()[\]{}|]/g,
                                u = RegExp(c.source),
                                d = "object" == typeof t && t && t.Object === Object && t,
                                p = "object" == typeof self && self && self.Object === Object && self,
                                h = d || p || Function("return this")(),
                                f = Object.prototype,
                                m = f.toString,
                                v = h.Symbol,
                                g = v ? v.prototype : void 0,
                                y = g ? g.toString : void 0;
                            e.exports = a;
                        }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
                    },
                    {},
                ],
                42: [
                    function (t, e, n) {
                        (function (t) {
                            "use strict";
                            function n(e, n, i, r) {
                                if ("function" != typeof e) throw new TypeError('"callback" argument must be a function');
                                var o,
                                    a,
                                    s = arguments.length;
                                switch (s) {
                                    case 0:
                                    case 1:
                                        return t.nextTick(e);
                                    case 2:
                                        return t.nextTick(function () {
                                            e.call(null, n);
                                        });
                                    case 3:
                                        return t.nextTick(function () {
                                            e.call(null, n, i);
                                        });
                                    case 4:
                                        return t.nextTick(function () {
                                            e.call(null, n, i, r);
                                        });
                                    default:
                                        for (o = new Array(s - 1), a = 0; a < o.length; ) o[a++] = arguments[a];
                                        return t.nextTick(function () {
                                            e.apply(null, o);
                                        });
                                }
                            }
                            !t.version || 0 === t.version.indexOf("v0.") || (0 === t.version.indexOf("v1.") && 0 !== t.version.indexOf("v1.8.")) ? (e.exports = n) : (e.exports = t.nextTick);
                        }.call(this, t("_process")));
                    },
                    { _process: 43 },
                ],
                43: [
                    function (t, e, n) {
                        function i() {
                            throw new Error("setTimeout has not been defined");
                        }
                        function r() {
                            throw new Error("clearTimeout has not been defined");
                        }
                        function o(t) {
                            if (d === setTimeout) return setTimeout(t, 0);
                            if ((d === i || !d) && setTimeout) return (d = setTimeout), setTimeout(t, 0);
                            try {
                                return d(t, 0);
                            } catch (e) {
                                try {
                                    return d.call(null, t, 0);
                                } catch (e) {
                                    return d.call(this, t, 0);
                                }
                            }
                        }
                        function a(t) {
                            if (p === clearTimeout) return clearTimeout(t);
                            if ((p === r || !p) && clearTimeout) return (p = clearTimeout), clearTimeout(t);
                            try {
                                return p(t);
                            } catch (e) {
                                try {
                                    return p.call(null, t);
                                } catch (e) {
                                    return p.call(this, t);
                                }
                            }
                        }
                        function s() {
                            v && f && ((v = !1), f.length ? (m = f.concat(m)) : (g = -1), m.length && l());
                        }
                        function l() {
                            if (!v) {
                                var t = o(s);
                                v = !0;
                                for (var e = m.length; e; ) {
                                    for (f = m, m = []; ++g < e; ) f && f[g].run();
                                    (g = -1), (e = m.length);
                                }
                                (f = null), (v = !1), a(t);
                            }
                        }
                        function c(t, e) {
                            (this.fun = t), (this.array = e);
                        }
                        function u() {}
                        var d,
                            p,
                            h = (e.exports = {});
                        !(function () {
                            try {
                                d = "function" == typeof setTimeout ? setTimeout : i;
                            } catch (t) {
                                d = i;
                            }
                            try {
                                p = "function" == typeof clearTimeout ? clearTimeout : r;
                            } catch (t) {
                                p = r;
                            }
                        })();
                        var f,
                            m = [],
                            v = !1,
                            g = -1;
                        (h.nextTick = function (t) {
                            var e = new Array(arguments.length - 1);
                            if (arguments.length > 1) for (var n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
                            m.push(new c(t, e)), 1 !== m.length || v || o(l);
                        }),
                            (c.prototype.run = function () {
                                this.fun.apply(null, this.array);
                            }),
                            (h.title = "browser"),
                            (h.browser = !0),
                            (h.env = {}),
                            (h.argv = []),
                            (h.version = ""),
                            (h.versions = {}),
                            (h.on = u),
                            (h.addListener = u),
                            (h.once = u),
                            (h.off = u),
                            (h.removeListener = u),
                            (h.removeAllListeners = u),
                            (h.emit = u),
                            (h.prependListener = u),
                            (h.prependOnceListener = u),
                            (h.listeners = function (t) {
                                return [];
                            }),
                            (h.binding = function (t) {
                                throw new Error("process.binding is not supported");
                            }),
                            (h.cwd = function () {
                                return "/";
                            }),
                            (h.chdir = function (t) {
                                throw new Error("process.chdir is not supported");
                            }),
                            (h.umask = function () {
                                return 0;
                            });
                    },
                    {},
                ],
                44: [
                    function (t, e, n) {
                        e.exports = t("./lib/_stream_duplex.js");
                    },
                    { "./lib/_stream_duplex.js": 45 },
                ],
                45: [
                    function (t, e, n) {
                        "use strict";
                        function i(t) {
                            return this instanceof i
                                ? (c.call(this, t),
                                  u.call(this, t),
                                  t && t.readable === !1 && (this.readable = !1),
                                  t && t.writable === !1 && (this.writable = !1),
                                  (this.allowHalfOpen = !0),
                                  t && t.allowHalfOpen === !1 && (this.allowHalfOpen = !1),
                                  void this.once("end", r))
                                : new i(t);
                        }
                        function r() {
                            this.allowHalfOpen || this._writableState.ended || a(o, this);
                        }
                        function o(t) {
                            t.end();
                        }
                        var a = t("process-nextick-args"),
                            s =
                                Object.keys ||
                                function (t) {
                                    var e = [];
                                    for (var n in t) e.push(n);
                                    return e;
                                };
                        e.exports = i;
                        var l = t("core-util-is");
                        l.inherits = t("inherits");
                        var c = t("./_stream_readable"),
                            u = t("./_stream_writable");
                        l.inherits(i, c);
                        for (var d = s(u.prototype), p = 0; p < d.length; p++) {
                            var h = d[p];
                            i.prototype[h] || (i.prototype[h] = u.prototype[h]);
                        }
                        Object.defineProperty(i.prototype, "destroyed", {
                            get: function () {
                                return void 0 === this._readableState || void 0 === this._writableState ? !1 : this._readableState.destroyed && this._writableState.destroyed;
                            },
                            set: function (t) {
                                void 0 !== this._readableState && void 0 !== this._writableState && ((this._readableState.destroyed = t), (this._writableState.destroyed = t));
                            },
                        }),
                            (i.prototype._destroy = function (t, e) {
                                this.push(null), this.end(), a(e, t);
                            });
                    },
                    { "./_stream_readable": 47, "./_stream_writable": 49, "core-util-is": 6, inherits: 38, "process-nextick-args": 42 },
                ],
                46: [
                    function (t, e, n) {
                        "use strict";
                        function i(t) {
                            return this instanceof i ? void r.call(this, t) : new i(t);
                        }
                        e.exports = i;
                        var r = t("./_stream_transform"),
                            o = t("core-util-is");
                        (o.inherits = t("inherits")),
                            o.inherits(i, r),
                            (i.prototype._transform = function (t, e, n) {
                                n(null, t);
                            });
                    },
                    { "./_stream_transform": 48, "core-util-is": 6, inherits: 38 },
                ],
                47: [
                    function (t, e, n) {
                        (function (n, i) {
                            "use strict";
                            function r(t) {
                                return N.from(t);
                            }
                            function o(t) {
                                return N.isBuffer(t) || t instanceof q;
                            }
                            function a(t, e, n) {
                                return "function" == typeof t.prependListener ? t.prependListener(e, n) : void (t._events && t._events[e] ? (D(t._events[e]) ? t._events[e].unshift(n) : (t._events[e] = [n, t._events[e]])) : t.on(e, n));
                            }
                            function s(e, n) {
                                (j = j || t("./_stream_duplex")), (e = e || {}), (this.objectMode = !!e.objectMode), n instanceof j && (this.objectMode = this.objectMode || !!e.readableObjectMode);
                                var i = e.highWaterMark,
                                    r = this.objectMode ? 16 : 16384;
                                (this.highWaterMark = i || 0 === i ? i : r),
                                    (this.highWaterMark = Math.floor(this.highWaterMark)),
                                    (this.buffer = new H()),
                                    (this.length = 0),
                                    (this.pipes = null),
                                    (this.pipesCount = 0),
                                    (this.flowing = null),
                                    (this.ended = !1),
                                    (this.endEmitted = !1),
                                    (this.reading = !1),
                                    (this.sync = !0),
                                    (this.needReadable = !1),
                                    (this.emittedReadable = !1),
                                    (this.readableListening = !1),
                                    (this.resumeScheduled = !1),
                                    (this.destroyed = !1),
                                    (this.defaultEncoding = e.defaultEncoding || "utf8"),
                                    (this.awaitDrain = 0),
                                    (this.readingMore = !1),
                                    (this.decoder = null),
                                    (this.encoding = null),
                                    e.encoding && (F || (F = t("string_decoder/").StringDecoder), (this.decoder = new F(e.encoding)), (this.encoding = e.encoding));
                            }
                            function l(e) {
                                return (
                                    (j = j || t("./_stream_duplex")),
                                    this instanceof l
                                        ? ((this._readableState = new s(e, this)),
                                          (this.readable = !0),
                                          e && ("function" == typeof e.read && (this._read = e.read), "function" == typeof e.destroy && (this._destroy = e.destroy)),
                                          void L.call(this))
                                        : new l(e)
                                );
                            }
                            function c(t, e, n, i, o) {
                                var a = t._readableState;
                                if (null === e) (a.reading = !1), m(t, a);
                                else {
                                    var s;
                                    o || (s = d(a, e)),
                                        s
                                            ? t.emit("error", s)
                                            : a.objectMode || (e && e.length > 0)
                                            ? ("string" == typeof e || a.objectMode || Object.getPrototypeOf(e) === N.prototype || (e = r(e)),
                                              i
                                                  ? a.endEmitted
                                                      ? t.emit("error", new Error("stream.unshift() after end event"))
                                                      : u(t, a, e, !0)
                                                  : a.ended
                                                  ? t.emit("error", new Error("stream.push() after EOF"))
                                                  : ((a.reading = !1), a.decoder && !n ? ((e = a.decoder.write(e)), a.objectMode || 0 !== e.length ? u(t, a, e, !1) : y(t, a)) : u(t, a, e, !1)))
                                            : i || (a.reading = !1);
                                }
                                return p(a);
                            }
                            function u(t, e, n, i) {
                                e.flowing && 0 === e.length && !e.sync ? (t.emit("data", n), t.read(0)) : ((e.length += e.objectMode ? 1 : n.length), i ? e.buffer.unshift(n) : e.buffer.push(n), e.needReadable && v(t)), y(t, e);
                            }
                            function d(t, e) {
                                var n;
                                return o(e) || "string" == typeof e || void 0 === e || t.objectMode || (n = new TypeError("Invalid non-string/buffer chunk")), n;
                            }
                            function p(t) {
                                return !t.ended && (t.needReadable || t.length < t.highWaterMark || 0 === t.length);
                            }
                            function h(t) {
                                return t >= W ? (t = W) : (t--, (t |= t >>> 1), (t |= t >>> 2), (t |= t >>> 4), (t |= t >>> 8), (t |= t >>> 16), t++), t;
                            }
                            function f(t, e) {
                                return 0 >= t || (0 === e.length && e.ended)
                                    ? 0
                                    : e.objectMode
                                    ? 1
                                    : t !== t
                                    ? e.flowing && e.length
                                        ? e.buffer.head.data.length
                                        : e.length
                                    : (t > e.highWaterMark && (e.highWaterMark = h(t)), t <= e.length ? t : e.ended ? e.length : ((e.needReadable = !0), 0));
                            }
                            function m(t, e) {
                                if (!e.ended) {
                                    if (e.decoder) {
                                        var n = e.decoder.end();
                                        n && n.length && (e.buffer.push(n), (e.length += e.objectMode ? 1 : n.length));
                                    }
                                    (e.ended = !0), v(t);
                                }
                            }
                            function v(t) {
                                var e = t._readableState;
                                (e.needReadable = !1), e.emittedReadable || (B("emitReadable", e.flowing), (e.emittedReadable = !0), e.sync ? P(g, t) : g(t));
                            }
                            function g(t) {
                                B("emit readable"), t.emit("readable"), S(t);
                            }
                            function y(t, e) {
                                e.readingMore || ((e.readingMore = !0), P(b, t, e));
                            }
                            function b(t, e) {
                                for (var n = e.length; !e.reading && !e.flowing && !e.ended && e.length < e.highWaterMark && (B("maybeReadMore read 0"), t.read(0), n !== e.length); ) n = e.length;
                                e.readingMore = !1;
                            }
                            function w(t) {
                                return function () {
                                    var e = t._readableState;
                                    B("pipeOnDrain", e.awaitDrain), e.awaitDrain && e.awaitDrain--, 0 === e.awaitDrain && O(t, "data") && ((e.flowing = !0), S(t));
                                };
                            }
                            function $(t) {
                                B("readable nexttick read 0"), t.read(0);
                            }
                            function x(t, e) {
                                e.resumeScheduled || ((e.resumeScheduled = !0), P(k, t, e));
                            }
                            function k(t, e) {
                                e.reading || (B("resume read 0"), t.read(0)), (e.resumeScheduled = !1), (e.awaitDrain = 0), t.emit("resume"), S(t), e.flowing && !e.reading && t.read(0);
                            }
                            function S(t) {
                                var e = t._readableState;
                                for (B("flow", e.flowing); e.flowing && null !== t.read(); );
                            }
                            function C(t, e) {
                                if (0 === e.length) return null;
                                var n;
                                return (
                                    e.objectMode
                                        ? (n = e.buffer.shift())
                                        : !t || t >= e.length
                                        ? ((n = e.decoder ? e.buffer.join("") : 1 === e.buffer.length ? e.buffer.head.data : e.buffer.concat(e.length)), e.buffer.clear())
                                        : (n = _(t, e.buffer, e.decoder)),
                                    n
                                );
                            }
                            function _(t, e, n) {
                                var i;
                                return t < e.head.data.length ? ((i = e.head.data.slice(0, t)), (e.head.data = e.head.data.slice(t))) : (i = t === e.head.data.length ? e.shift() : n ? T(t, e) : E(t, e)), i;
                            }
                            function T(t, e) {
                                var n = e.head,
                                    i = 1,
                                    r = n.data;
                                for (t -= r.length; (n = n.next); ) {
                                    var o = n.data,
                                        a = t > o.length ? o.length : t;
                                    if (((r += a === o.length ? o : o.slice(0, t)), (t -= a), 0 === t)) {
                                        a === o.length ? (++i, n.next ? (e.head = n.next) : (e.head = e.tail = null)) : ((e.head = n), (n.data = o.slice(a)));
                                        break;
                                    }
                                    ++i;
                                }
                                return (e.length -= i), r;
                            }
                            function E(t, e) {
                                var n = N.allocUnsafe(t),
                                    i = e.head,
                                    r = 1;
                                for (i.data.copy(n), t -= i.data.length; (i = i.next); ) {
                                    var o = i.data,
                                        a = t > o.length ? o.length : t;
                                    if ((o.copy(n, n.length - t, 0, a), (t -= a), 0 === t)) {
                                        a === o.length ? (++r, i.next ? (e.head = i.next) : (e.head = e.tail = null)) : ((e.head = i), (i.data = o.slice(a)));
                                        break;
                                    }
                                    ++r;
                                }
                                return (e.length -= r), n;
                            }
                            function A(t) {
                                var e = t._readableState;
                                if (e.length > 0) throw new Error('"endReadable()" called on non-empty stream');
                                e.endEmitted || ((e.ended = !0), P(I, e, t));
                            }
                            function I(t, e) {
                                t.endEmitted || 0 !== t.length || ((t.endEmitted = !0), (e.readable = !1), e.emit("end"));
                            }
                            function R(t, e) {
                                for (var n = 0, i = t.length; i > n; n++) if (t[n] === e) return n;
                                return -1;
                            }
                            var P = t("process-nextick-args");
                            e.exports = l;
                            var j,
                                D = t("isarray");
                            l.ReadableState = s;
                            var O =
                                    (t("events").EventEmitter,
                                    function (t, e) {
                                        return t.listeners(e).length;
                                    }),
                                L = t("./internal/streams/stream"),
                                N = t("safe-buffer").Buffer,
                                q = i.Uint8Array || function () {},
                                U = t("core-util-is");
                            U.inherits = t("inherits");
                            var M = t("util"),
                                B = void 0;
                            B = M && M.debuglog ? M.debuglog("stream") : function () {};
                            var F,
                                H = t("./internal/streams/BufferList"),
                                V = t("./internal/streams/destroy");
                            U.inherits(l, L);
                            var z = ["error", "close", "destroy", "pause", "resume"];
                            Object.defineProperty(l.prototype, "destroyed", {
                                get: function () {
                                    return void 0 === this._readableState ? !1 : this._readableState.destroyed;
                                },
                                set: function (t) {
                                    this._readableState && (this._readableState.destroyed = t);
                                },
                            }),
                                (l.prototype.destroy = V.destroy),
                                (l.prototype._undestroy = V.undestroy),
                                (l.prototype._destroy = function (t, e) {
                                    this.push(null), e(t);
                                }),
                                (l.prototype.push = function (t, e) {
                                    var n,
                                        i = this._readableState;
                                    return i.objectMode ? (n = !0) : "string" == typeof t && ((e = e || i.defaultEncoding), e !== i.encoding && ((t = N.from(t, e)), (e = "")), (n = !0)), c(this, t, e, !1, n);
                                }),
                                (l.prototype.unshift = function (t) {
                                    return c(this, t, null, !0, !1);
                                }),
                                (l.prototype.isPaused = function () {
                                    return this._readableState.flowing === !1;
                                }),
                                (l.prototype.setEncoding = function (e) {
                                    return F || (F = t("string_decoder/").StringDecoder), (this._readableState.decoder = new F(e)), (this._readableState.encoding = e), this;
                                });
                            var W = 8388608;
                            (l.prototype.read = function (t) {
                                B("read", t), (t = parseInt(t, 10));
                                var e = this._readableState,
                                    n = t;
                                if ((0 !== t && (e.emittedReadable = !1), 0 === t && e.needReadable && (e.length >= e.highWaterMark || e.ended)))
                                    return B("read: emitReadable", e.length, e.ended), 0 === e.length && e.ended ? A(this) : v(this), null;
                                if (((t = f(t, e)), 0 === t && e.ended)) return 0 === e.length && A(this), null;
                                var i = e.needReadable;
                                B("need readable", i),
                                    (0 === e.length || e.length - t < e.highWaterMark) && ((i = !0), B("length less than watermark", i)),
                                    e.ended || e.reading
                                        ? ((i = !1), B("reading or ended", i))
                                        : i && (B("do read"), (e.reading = !0), (e.sync = !0), 0 === e.length && (e.needReadable = !0), this._read(e.highWaterMark), (e.sync = !1), e.reading || (t = f(n, e)));
                                var r;
                                return (
                                    (r = t > 0 ? C(t, e) : null),
                                    null === r ? ((e.needReadable = !0), (t = 0)) : (e.length -= t),
                                    0 === e.length && (e.ended || (e.needReadable = !0), n !== t && e.ended && A(this)),
                                    null !== r && this.emit("data", r),
                                    r
                                );
                            }),
                                (l.prototype._read = function (t) {
                                    this.emit("error", new Error("_read() is not implemented"));
                                }),
                                (l.prototype.pipe = function (t, e) {
                                    function i(t, e) {
                                        B("onunpipe"), t === p && e && e.hasUnpiped === !1 && ((e.hasUnpiped = !0), o());
                                    }
                                    function r() {
                                        B("onend"), t.end();
                                    }
                                    function o() {
                                        B("cleanup"),
                                            t.removeListener("close", c),
                                            t.removeListener("finish", u),
                                            t.removeListener("drain", v),
                                            t.removeListener("error", l),
                                            t.removeListener("unpipe", i),
                                            p.removeListener("end", r),
                                            p.removeListener("end", d),
                                            p.removeListener("data", s),
                                            (g = !0),
                                            !h.awaitDrain || (t._writableState && !t._writableState.needDrain) || v();
                                    }
                                    function s(e) {
                                        B("ondata"), (y = !1);
                                        var n = t.write(e);
                                        !1 !== n ||
                                            y ||
                                            (((1 === h.pipesCount && h.pipes === t) || (h.pipesCount > 1 && -1 !== R(h.pipes, t))) &&
                                                !g &&
                                                (B("false write response, pause", p._readableState.awaitDrain), p._readableState.awaitDrain++, (y = !0)),
                                            p.pause());
                                    }
                                    function l(e) {
                                        B("onerror", e), d(), t.removeListener("error", l), 0 === O(t, "error") && t.emit("error", e);
                                    }
                                    function c() {
                                        t.removeListener("finish", u), d();
                                    }
                                    function u() {
                                        B("onfinish"), t.removeListener("close", c), d();
                                    }
                                    function d() {
                                        B("unpipe"), p.unpipe(t);
                                    }
                                    var p = this,
                                        h = this._readableState;
                                    switch (h.pipesCount) {
                                        case 0:
                                            h.pipes = t;
                                            break;
                                        case 1:
                                            h.pipes = [h.pipes, t];
                                            break;
                                        default:
                                            h.pipes.push(t);
                                    }
                                    (h.pipesCount += 1), B("pipe count=%d opts=%j", h.pipesCount, e);
                                    var f = (!e || e.end !== !1) && t !== n.stdout && t !== n.stderr,
                                        m = f ? r : d;
                                    h.endEmitted ? P(m) : p.once("end", m), t.on("unpipe", i);
                                    var v = w(p);
                                    t.on("drain", v);
                                    var g = !1,
                                        y = !1;
                                    return p.on("data", s), a(t, "error", l), t.once("close", c), t.once("finish", u), t.emit("pipe", p), h.flowing || (B("pipe resume"), p.resume()), t;
                                }),
                                (l.prototype.unpipe = function (t) {
                                    var e = this._readableState,
                                        n = { hasUnpiped: !1 };
                                    if (0 === e.pipesCount) return this;
                                    if (1 === e.pipesCount) return t && t !== e.pipes ? this : (t || (t = e.pipes), (e.pipes = null), (e.pipesCount = 0), (e.flowing = !1), t && t.emit("unpipe", this, n), this);
                                    if (!t) {
                                        var i = e.pipes,
                                            r = e.pipesCount;
                                        (e.pipes = null), (e.pipesCount = 0), (e.flowing = !1);
                                        for (var o = 0; r > o; o++) i[o].emit("unpipe", this, n);
                                        return this;
                                    }
                                    var a = R(e.pipes, t);
                                    return -1 === a ? this : (e.pipes.splice(a, 1), (e.pipesCount -= 1), 1 === e.pipesCount && (e.pipes = e.pipes[0]), t.emit("unpipe", this, n), this);
                                }),
                                (l.prototype.on = function (t, e) {
                                    var n = L.prototype.on.call(this, t, e);
                                    if ("data" === t) this._readableState.flowing !== !1 && this.resume();
                                    else if ("readable" === t) {
                                        var i = this._readableState;
                                        i.endEmitted || i.readableListening || ((i.readableListening = i.needReadable = !0), (i.emittedReadable = !1), i.reading ? i.length && v(this) : P($, this));
                                    }
                                    return n;
                                }),
                                (l.prototype.addListener = l.prototype.on),
                                (l.prototype.resume = function () {
                                    var t = this._readableState;
                                    return t.flowing || (B("resume"), (t.flowing = !0), x(this, t)), this;
                                }),
                                (l.prototype.pause = function () {
                                    return B("call pause flowing=%j", this._readableState.flowing), !1 !== this._readableState.flowing && (B("pause"), (this._readableState.flowing = !1), this.emit("pause")), this;
                                }),
                                (l.prototype.wrap = function (t) {
                                    var e = this._readableState,
                                        n = !1,
                                        i = this;
                                    t.on("end", function () {
                                        if ((B("wrapped end"), e.decoder && !e.ended)) {
                                            var t = e.decoder.end();
                                            t && t.length && i.push(t);
                                        }
                                        i.push(null);
                                    }),
                                        t.on("data", function (r) {
                                            if ((B("wrapped data"), e.decoder && (r = e.decoder.write(r)), (!e.objectMode || (null !== r && void 0 !== r)) && (e.objectMode || (r && r.length)))) {
                                                var o = i.push(r);
                                                o || ((n = !0), t.pause());
                                            }
                                        });
                                    for (var r in t)
                                        void 0 === this[r] &&
                                            "function" == typeof t[r] &&
                                            (this[r] = (function (e) {
                                                return function () {
                                                    return t[e].apply(t, arguments);
                                                };
                                            })(r));
                                    for (var o = 0; o < z.length; o++) t.on(z[o], i.emit.bind(i, z[o]));
                                    return (
                                        (i._read = function (e) {
                                            B("wrapped _read", e), n && ((n = !1), t.resume());
                                        }),
                                        i
                                    );
                                }),
                                (l._fromList = C);
                        }.call(this, t("_process"), "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
                    },
                    {
                        "./_stream_duplex": 45,
                        "./internal/streams/BufferList": 50,
                        "./internal/streams/destroy": 51,
                        "./internal/streams/stream": 52,
                        _process: 43,
                        "core-util-is": 6,
                        events: 28,
                        inherits: 38,
                        isarray: 40,
                        "process-nextick-args": 42,
                        "safe-buffer": 57,
                        "string_decoder/": 59,
                        util: 3,
                    },
                ],
                48: [
                    function (t, e, n) {
                        "use strict";
                        function i(t) {
                            (this.afterTransform = function (e, n) {
                                return r(t, e, n);
                            }),
                                (this.needTransform = !1),
                                (this.transforming = !1),
                                (this.writecb = null),
                                (this.writechunk = null),
                                (this.writeencoding = null);
                        }
                        function r(t, e, n) {
                            var i = t._transformState;
                            i.transforming = !1;
                            var r = i.writecb;
                            if (!r) return t.emit("error", new Error("write callback called multiple times"));
                            (i.writechunk = null), (i.writecb = null), null !== n && void 0 !== n && t.push(n), r(e);
                            var o = t._readableState;
                            (o.reading = !1), (o.needReadable || o.length < o.highWaterMark) && t._read(o.highWaterMark);
                        }
                        function o(t) {
                            if (!(this instanceof o)) return new o(t);
                            s.call(this, t), (this._transformState = new i(this));
                            var e = this;
                            (this._readableState.needReadable = !0),
                                (this._readableState.sync = !1),
                                t && ("function" == typeof t.transform && (this._transform = t.transform), "function" == typeof t.flush && (this._flush = t.flush)),
                                this.once("prefinish", function () {
                                    "function" == typeof this._flush
                                        ? this._flush(function (t, n) {
                                              a(e, t, n);
                                          })
                                        : a(e);
                                });
                        }
                        function a(t, e, n) {
                            if (e) return t.emit("error", e);
                            null !== n && void 0 !== n && t.push(n);
                            var i = t._writableState,
                                r = t._transformState;
                            if (i.length) throw new Error("Calling transform done when ws.length != 0");
                            if (r.transforming) throw new Error("Calling transform done when still transforming");
                            return t.push(null);
                        }
                        e.exports = o;
                        var s = t("./_stream_duplex"),
                            l = t("core-util-is");
                        (l.inherits = t("inherits")),
                            l.inherits(o, s),
                            (o.prototype.push = function (t, e) {
                                return (this._transformState.needTransform = !1), s.prototype.push.call(this, t, e);
                            }),
                            (o.prototype._transform = function (t, e, n) {
                                throw new Error("_transform() is not implemented");
                            }),
                            (o.prototype._write = function (t, e, n) {
                                var i = this._transformState;
                                if (((i.writecb = n), (i.writechunk = t), (i.writeencoding = e), !i.transforming)) {
                                    var r = this._readableState;
                                    (i.needTransform || r.needReadable || r.length < r.highWaterMark) && this._read(r.highWaterMark);
                                }
                            }),
                            (o.prototype._read = function (t) {
                                var e = this._transformState;
                                null !== e.writechunk && e.writecb && !e.transforming ? ((e.transforming = !0), this._transform(e.writechunk, e.writeencoding, e.afterTransform)) : (e.needTransform = !0);
                            }),
                            (o.prototype._destroy = function (t, e) {
                                var n = this;
                                s.prototype._destroy.call(this, t, function (t) {
                                    e(t), n.emit("close");
                                });
                            });
                    },
                    { "./_stream_duplex": 45, "core-util-is": 6, inherits: 38 },
                ],
                49: [
                    function (t, e, n) {
                        (function (n, i) {
                            "use strict";
                            function r(t) {
                                var e = this;
                                (this.next = null),
                                    (this.entry = null),
                                    (this.finish = function () {
                                        _(e, t);
                                    });
                            }
                            function o(t) {
                                return j.from(t);
                            }
                            function a(t) {
                                return j.isBuffer(t) || t instanceof D;
                            }
                            function s() {}
                            function l(e, n) {
                                (E = E || t("./_stream_duplex")), (e = e || {}), (this.objectMode = !!e.objectMode), n instanceof E && (this.objectMode = this.objectMode || !!e.writableObjectMode);
                                var i = e.highWaterMark,
                                    o = this.objectMode ? 16 : 16384;
                                (this.highWaterMark = i || 0 === i ? i : o),
                                    (this.highWaterMark = Math.floor(this.highWaterMark)),
                                    (this.finalCalled = !1),
                                    (this.needDrain = !1),
                                    (this.ending = !1),
                                    (this.ended = !1),
                                    (this.finished = !1),
                                    (this.destroyed = !1);
                                var a = e.decodeStrings === !1;
                                (this.decodeStrings = !a),
                                    (this.defaultEncoding = e.defaultEncoding || "utf8"),
                                    (this.length = 0),
                                    (this.writing = !1),
                                    (this.corked = 0),
                                    (this.sync = !0),
                                    (this.bufferProcessing = !1),
                                    (this.onwrite = function (t) {
                                        g(n, t);
                                    }),
                                    (this.writecb = null),
                                    (this.writelen = 0),
                                    (this.bufferedRequest = null),
                                    (this.lastBufferedRequest = null),
                                    (this.pendingcb = 0),
                                    (this.prefinished = !1),
                                    (this.errorEmitted = !1),
                                    (this.bufferedRequestCount = 0),
                                    (this.corkedRequestsFree = new r(this));
                            }
                            function c(e) {
                                return (
                                    (E = E || t("./_stream_duplex")),
                                    L.call(c, this) || this instanceof E
                                        ? ((this._writableState = new l(e, this)),
                                          (this.writable = !0),
                                          e &&
                                              ("function" == typeof e.write && (this._write = e.write),
                                              "function" == typeof e.writev && (this._writev = e.writev),
                                              "function" == typeof e.destroy && (this._destroy = e.destroy),
                                              "function" == typeof e["final"] && (this._final = e["final"])),
                                          void P.call(this))
                                        : new c(e)
                                );
                            }
                            function u(t, e) {
                                var n = new Error("write after end");
                                t.emit("error", n), T(e, n);
                            }
                            function d(t, e, n, i) {
                                var r = !0,
                                    o = !1;
                                return (
                                    null === n ? (o = new TypeError("May not write null values to stream")) : "string" == typeof n || void 0 === n || e.objectMode || (o = new TypeError("Invalid non-string/buffer chunk")),
                                    o && (t.emit("error", o), T(i, o), (r = !1)),
                                    r
                                );
                            }
                            function p(t, e, n) {
                                return t.objectMode || t.decodeStrings === !1 || "string" != typeof e || (e = j.from(e, n)), e;
                            }
                            function h(t, e, n, i, r, o) {
                                if (!n) {
                                    var a = p(e, i, r);
                                    i !== a && ((n = !0), (r = "buffer"), (i = a));
                                }
                                var s = e.objectMode ? 1 : i.length;
                                e.length += s;
                                var l = e.length < e.highWaterMark;
                                if ((l || (e.needDrain = !0), e.writing || e.corked)) {
                                    var c = e.lastBufferedRequest;
                                    (e.lastBufferedRequest = { chunk: i, encoding: r, isBuf: n, callback: o, next: null }), c ? (c.next = e.lastBufferedRequest) : (e.bufferedRequest = e.lastBufferedRequest), (e.bufferedRequestCount += 1);
                                } else f(t, e, !1, s, i, r, o);
                                return l;
                            }
                            function f(t, e, n, i, r, o, a) {
                                (e.writelen = i), (e.writecb = a), (e.writing = !0), (e.sync = !0), n ? t._writev(r, e.onwrite) : t._write(r, o, e.onwrite), (e.sync = !1);
                            }
                            function m(t, e, n, i, r) {
                                --e.pendingcb, n ? (T(r, i), T(S, t, e), (t._writableState.errorEmitted = !0), t.emit("error", i)) : (r(i), (t._writableState.errorEmitted = !0), t.emit("error", i), S(t, e));
                            }
                            function v(t) {
                                (t.writing = !1), (t.writecb = null), (t.length -= t.writelen), (t.writelen = 0);
                            }
                            function g(t, e) {
                                var n = t._writableState,
                                    i = n.sync,
                                    r = n.writecb;
                                if ((v(n), e)) m(t, n, i, e, r);
                                else {
                                    var o = $(n);
                                    o || n.corked || n.bufferProcessing || !n.bufferedRequest || w(t, n), i ? A(y, t, n, o, r) : y(t, n, o, r);
                                }
                            }
                            function y(t, e, n, i) {
                                n || b(t, e), e.pendingcb--, i(), S(t, e);
                            }
                            function b(t, e) {
                                0 === e.length && e.needDrain && ((e.needDrain = !1), t.emit("drain"));
                            }
                            function w(t, e) {
                                e.bufferProcessing = !0;
                                var n = e.bufferedRequest;
                                if (t._writev && n && n.next) {
                                    var i = e.bufferedRequestCount,
                                        o = new Array(i),
                                        a = e.corkedRequestsFree;
                                    a.entry = n;
                                    for (var s = 0, l = !0; n; ) (o[s] = n), n.isBuf || (l = !1), (n = n.next), (s += 1);
                                    (o.allBuffers = l), f(t, e, !0, e.length, o, "", a.finish), e.pendingcb++, (e.lastBufferedRequest = null), a.next ? ((e.corkedRequestsFree = a.next), (a.next = null)) : (e.corkedRequestsFree = new r(e));
                                } else {
                                    for (; n; ) {
                                        var c = n.chunk,
                                            u = n.encoding,
                                            d = n.callback,
                                            p = e.objectMode ? 1 : c.length;
                                        if ((f(t, e, !1, p, c, u, d), (n = n.next), e.writing)) break;
                                    }
                                    null === n && (e.lastBufferedRequest = null);
                                }
                                (e.bufferedRequestCount = 0), (e.bufferedRequest = n), (e.bufferProcessing = !1);
                            }
                            function $(t) {
                                return t.ending && 0 === t.length && null === t.bufferedRequest && !t.finished && !t.writing;
                            }
                            function x(t, e) {
                                t._final(function (n) {
                                    e.pendingcb--, n && t.emit("error", n), (e.prefinished = !0), t.emit("prefinish"), S(t, e);
                                });
                            }
                            function k(t, e) {
                                e.prefinished || e.finalCalled || ("function" == typeof t._final ? (e.pendingcb++, (e.finalCalled = !0), T(x, t, e)) : ((e.prefinished = !0), t.emit("prefinish")));
                            }
                            function S(t, e) {
                                var n = $(e);
                                return n && (k(t, e), 0 === e.pendingcb && ((e.finished = !0), t.emit("finish"))), n;
                            }
                            function C(t, e, n) {
                                (e.ending = !0), S(t, e), n && (e.finished ? T(n) : t.once("finish", n)), (e.ended = !0), (t.writable = !1);
                            }
                            function _(t, e, n) {
                                var i = t.entry;
                                for (t.entry = null; i; ) {
                                    var r = i.callback;
                                    e.pendingcb--, r(n), (i = i.next);
                                }
                                e.corkedRequestsFree ? (e.corkedRequestsFree.next = t) : (e.corkedRequestsFree = t);
                            }
                            var T = t("process-nextick-args");
                            e.exports = c;
                            var E,
                                A = !n.browser && ["v0.10", "v0.9."].indexOf(n.version.slice(0, 5)) > -1 ? setImmediate : T;
                            c.WritableState = l;
                            var I = t("core-util-is");
                            I.inherits = t("inherits");
                            var R = { deprecate: t("util-deprecate") },
                                P = t("./internal/streams/stream"),
                                j = t("safe-buffer").Buffer,
                                D = i.Uint8Array || function () {},
                                O = t("./internal/streams/destroy");
                            I.inherits(c, P),
                                (l.prototype.getBuffer = function () {
                                    for (var t = this.bufferedRequest, e = []; t; ) e.push(t), (t = t.next);
                                    return e;
                                }),
                                (function () {
                                    try {
                                        Object.defineProperty(l.prototype, "buffer", {
                                            get: R.deprecate(
                                                function () {
                                                    return this.getBuffer();
                                                },
                                                "_writableState.buffer is deprecated. Use _writableState.getBuffer instead.",
                                                "DEP0003"
                                            ),
                                        });
                                    } catch (t) {}
                                })();
                            var L;
                            "function" == typeof Symbol && Symbol.hasInstance && "function" == typeof Function.prototype[Symbol.hasInstance]
                                ? ((L = Function.prototype[Symbol.hasInstance]),
                                  Object.defineProperty(c, Symbol.hasInstance, {
                                      value: function (t) {
                                          return L.call(this, t) ? !0 : t && t._writableState instanceof l;
                                      },
                                  }))
                                : (L = function (t) {
                                      return t instanceof this;
                                  }),
                                (c.prototype.pipe = function () {
                                    this.emit("error", new Error("Cannot pipe, not readable"));
                                }),
                                (c.prototype.write = function (t, e, n) {
                                    var i = this._writableState,
                                        r = !1,
                                        l = a(t) && !i.objectMode;
                                    return (
                                        l && !j.isBuffer(t) && (t = o(t)),
                                        "function" == typeof e && ((n = e), (e = null)),
                                        l ? (e = "buffer") : e || (e = i.defaultEncoding),
                                        "function" != typeof n && (n = s),
                                        i.ended ? u(this, n) : (l || d(this, i, t, n)) && (i.pendingcb++, (r = h(this, i, l, t, e, n))),
                                        r
                                    );
                                }),
                                (c.prototype.cork = function () {
                                    var t = this._writableState;
                                    t.corked++;
                                }),
                                (c.prototype.uncork = function () {
                                    var t = this._writableState;
                                    t.corked && (t.corked--, t.writing || t.corked || t.finished || t.bufferProcessing || !t.bufferedRequest || w(this, t));
                                }),
                                (c.prototype.setDefaultEncoding = function (t) {
                                    if (("string" == typeof t && (t = t.toLowerCase()), !(["hex", "utf8", "utf-8", "ascii", "binary", "base64", "ucs2", "ucs-2", "utf16le", "utf-16le", "raw"].indexOf((t + "").toLowerCase()) > -1)))
                                        throw new TypeError("Unknown encoding: " + t);
                                    return (this._writableState.defaultEncoding = t), this;
                                }),
                                (c.prototype._write = function (t, e, n) {
                                    n(new Error("_write() is not implemented"));
                                }),
                                (c.prototype._writev = null),
                                (c.prototype.end = function (t, e, n) {
                                    var i = this._writableState;
                                    "function" == typeof t ? ((n = t), (t = null), (e = null)) : "function" == typeof e && ((n = e), (e = null)),
                                        null !== t && void 0 !== t && this.write(t, e),
                                        i.corked && ((i.corked = 1), this.uncork()),
                                        i.ending || i.finished || C(this, i, n);
                                }),
                                Object.defineProperty(c.prototype, "destroyed", {
                                    get: function () {
                                        return void 0 === this._writableState ? !1 : this._writableState.destroyed;
                                    },
                                    set: function (t) {
                                        this._writableState && (this._writableState.destroyed = t);
                                    },
                                }),
                                (c.prototype.destroy = O.destroy),
                                (c.prototype._undestroy = O.undestroy),
                                (c.prototype._destroy = function (t, e) {
                                    this.end(), e(t);
                                });
                        }.call(this, t("_process"), "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
                    },
                    { "./_stream_duplex": 45, "./internal/streams/destroy": 51, "./internal/streams/stream": 52, _process: 43, "core-util-is": 6, inherits: 38, "process-nextick-args": 42, "safe-buffer": 57, "util-deprecate": 60 },
                ],
                50: [
                    function (t, e, n) {
                        "use strict";
                        function i(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
                        }
                        function r(t, e, n) {
                            t.copy(e, n);
                        }
                        var o = t("safe-buffer").Buffer;
                        e.exports = (function () {
                            function t() {
                                i(this, t), (this.head = null), (this.tail = null), (this.length = 0);
                            }
                            return (
                                (t.prototype.push = function (t) {
                                    var e = { data: t, next: null };
                                    this.length > 0 ? (this.tail.next = e) : (this.head = e), (this.tail = e), ++this.length;
                                }),
                                (t.prototype.unshift = function (t) {
                                    var e = { data: t, next: this.head };
                                    0 === this.length && (this.tail = e), (this.head = e), ++this.length;
                                }),
                                (t.prototype.shift = function () {
                                    if (0 !== this.length) {
                                        var t = this.head.data;
                                        return 1 === this.length ? (this.head = this.tail = null) : (this.head = this.head.next), --this.length, t;
                                    }
                                }),
                                (t.prototype.clear = function () {
                                    (this.head = this.tail = null), (this.length = 0);
                                }),
                                (t.prototype.join = function (t) {
                                    if (0 === this.length) return "";
                                    for (var e = this.head, n = "" + e.data; (e = e.next); ) n += t + e.data;
                                    return n;
                                }),
                                (t.prototype.concat = function (t) {
                                    if (0 === this.length) return o.alloc(0);
                                    if (1 === this.length) return this.head.data;
                                    for (var e = o.allocUnsafe(t >>> 0), n = this.head, i = 0; n; ) r(n.data, e, i), (i += n.data.length), (n = n.next);
                                    return e;
                                }),
                                t
                            );
                        })();
                    },
                    { "safe-buffer": 57 },
                ],
                51: [
                    function (t, e, n) {
                        "use strict";
                        function i(t, e) {
                            var n = this,
                                i = this._readableState && this._readableState.destroyed,
                                r = this._writableState && this._writableState.destroyed;
                            return i || r
                                ? void (e ? e(t) : !t || (this._writableState && this._writableState.errorEmitted) || a(o, this, t))
                                : (this._readableState && (this._readableState.destroyed = !0),
                                  this._writableState && (this._writableState.destroyed = !0),
                                  void this._destroy(t || null, function (t) {
                                      !e && t ? (a(o, n, t), n._writableState && (n._writableState.errorEmitted = !0)) : e && e(t);
                                  }));
                        }
                        function r() {
                            this._readableState && ((this._readableState.destroyed = !1), (this._readableState.reading = !1), (this._readableState.ended = !1), (this._readableState.endEmitted = !1)),
                                this._writableState &&
                                    ((this._writableState.destroyed = !1), (this._writableState.ended = !1), (this._writableState.ending = !1), (this._writableState.finished = !1), (this._writableState.errorEmitted = !1));
                        }
                        function o(t, e) {
                            t.emit("error", e);
                        }
                        var a = t("process-nextick-args");
                        e.exports = { destroy: i, undestroy: r };
                    },
                    { "process-nextick-args": 42 },
                ],
                52: [
                    function (t, e, n) {
                        e.exports = t("events").EventEmitter;
                    },
                    { events: 28 },
                ],
                53: [
                    function (t, e, n) {
                        e.exports = t("./readable").PassThrough;
                    },
                    { "./readable": 54 },
                ],
                54: [
                    function (t, e, n) {
                        (n = e.exports = t("./lib/_stream_readable.js")),
                            (n.Stream = n),
                            (n.Readable = n),
                            (n.Writable = t("./lib/_stream_writable.js")),
                            (n.Duplex = t("./lib/_stream_duplex.js")),
                            (n.Transform = t("./lib/_stream_transform.js")),
                            (n.PassThrough = t("./lib/_stream_passthrough.js"));
                    },
                    { "./lib/_stream_duplex.js": 45, "./lib/_stream_passthrough.js": 46, "./lib/_stream_readable.js": 47, "./lib/_stream_transform.js": 48, "./lib/_stream_writable.js": 49 },
                ],
                55: [
                    function (t, e, n) {
                        e.exports = t("./readable").Transform;
                    },
                    { "./readable": 54 },
                ],
                56: [
                    function (t, e, n) {
                        e.exports = t("./lib/_stream_writable.js");
                    },
                    { "./lib/_stream_writable.js": 49 },
                ],
                57: [
                    function (t, e, n) {
                        function i(t, e) {
                            for (var n in t) e[n] = t[n];
                        }
                        function r(t, e, n) {
                            return a(t, e, n);
                        }
                        var o = t("buffer"),
                            a = o.Buffer;
                        a.from && a.alloc && a.allocUnsafe && a.allocUnsafeSlow ? (e.exports = o) : (i(o, n), (n.Buffer = r)),
                            i(a, r),
                            (r.from = function (t, e, n) {
                                if ("number" == typeof t) throw new TypeError("Argument must not be a number");
                                return a(t, e, n);
                            }),
                            (r.alloc = function (t, e, n) {
                                if ("number" != typeof t) throw new TypeError("Argument must be a number");
                                var i = a(t);
                                return void 0 !== e ? ("string" == typeof n ? i.fill(e, n) : i.fill(e)) : i.fill(0), i;
                            }),
                            (r.allocUnsafe = function (t) {
                                if ("number" != typeof t) throw new TypeError("Argument must be a number");
                                return a(t);
                            }),
                            (r.allocUnsafeSlow = function (t) {
                                if ("number" != typeof t) throw new TypeError("Argument must be a number");
                                return o.SlowBuffer(t);
                            });
                    },
                    { buffer: 5 },
                ],
                58: [
                    function (t, e, n) {
                        function i() {
                            r.call(this);
                        }
                        e.exports = i;
                        var r = t("events").EventEmitter,
                            o = t("inherits");
                        o(i, r),
                            (i.Readable = t("readable-stream/readable.js")),
                            (i.Writable = t("readable-stream/writable.js")),
                            (i.Duplex = t("readable-stream/duplex.js")),
                            (i.Transform = t("readable-stream/transform.js")),
                            (i.PassThrough = t("readable-stream/passthrough.js")),
                            (i.Stream = i),
                            (i.prototype.pipe = function (t, e) {
                                function n(e) {
                                    t.writable && !1 === t.write(e) && c.pause && c.pause();
                                }
                                function i() {
                                    c.readable && c.resume && c.resume();
                                }
                                function o() {
                                    u || ((u = !0), t.end());
                                }
                                function a() {
                                    u || ((u = !0), "function" == typeof t.destroy && t.destroy());
                                }
                                function s(t) {
                                    if ((l(), 0 === r.listenerCount(this, "error"))) throw t;
                                }
                                function l() {
                                    c.removeListener("data", n),
                                        t.removeListener("drain", i),
                                        c.removeListener("end", o),
                                        c.removeListener("close", a),
                                        c.removeListener("error", s),
                                        t.removeListener("error", s),
                                        c.removeListener("end", l),
                                        c.removeListener("close", l),
                                        t.removeListener("close", l);
                                }
                                var c = this;
                                c.on("data", n), t.on("drain", i), t._isStdio || (e && e.end === !1) || (c.on("end", o), c.on("close", a));
                                var u = !1;
                                return c.on("error", s), t.on("error", s), c.on("end", l), c.on("close", l), t.on("close", l), t.emit("pipe", c), t;
                            });
                    },
                    { events: 28, inherits: 38, "readable-stream/duplex.js": 44, "readable-stream/passthrough.js": 53, "readable-stream/readable.js": 54, "readable-stream/transform.js": 55, "readable-stream/writable.js": 56 },
                ],
                59: [
                    function (t, e, n) {
                        "use strict";
                        function i(t) {
                            if (!t) return "utf8";
                            for (var e; ; )
                                switch (t) {
                                    case "utf8":
                                    case "utf-8":
                                        return "utf8";
                                    case "ucs2":
                                    case "ucs-2":
                                    case "utf16le":
                                    case "utf-16le":
                                        return "utf16le";
                                    case "latin1":
                                    case "binary":
                                        return "latin1";
                                    case "base64":
                                    case "ascii":
                                    case "hex":
                                        return t;
                                    default:
                                        if (e) return;
                                        (t = ("" + t).toLowerCase()), (e = !0);
                                }
                        }
                        function r(t) {
                            var e = i(t);
                            if ("string" != typeof e && (y.isEncoding === b || !b(t))) throw new Error("Unknown encoding: " + t);
                            return e || t;
                        }
                        function o(t) {
                            this.encoding = r(t);
                            var e;
                            switch (this.encoding) {
                                case "utf16le":
                                    (this.text = p), (this.end = h), (e = 4);
                                    break;
                                case "utf8":
                                    (this.fillLast = c), (e = 4);
                                    break;
                                case "base64":
                                    (this.text = f), (this.end = m), (e = 3);
                                    break;
                                default:
                                    return (this.write = v), void (this.end = g);
                            }
                            (this.lastNeed = 0), (this.lastTotal = 0), (this.lastChar = y.allocUnsafe(e));
                        }
                        function a(t) {
                            return 127 >= t ? 0 : t >> 5 === 6 ? 2 : t >> 4 === 14 ? 3 : t >> 3 === 30 ? 4 : -1;
                        }
                        function s(t, e, n) {
                            var i = e.length - 1;
                            if (n > i) return 0;
                            var r = a(e[i]);
                            return r >= 0
                                ? (r > 0 && (t.lastNeed = r - 1), r)
                                : --i < n
                                ? 0
                                : ((r = a(e[i])), r >= 0 ? (r > 0 && (t.lastNeed = r - 2), r) : --i < n ? 0 : ((r = a(e[i])), r >= 0 ? (r > 0 && (2 === r ? (r = 0) : (t.lastNeed = r - 3)), r) : 0));
                        }
                        function l(t, e, n) {
                            if (128 !== (192 & e[0])) return (t.lastNeed = 0), "�".repeat(n);
                            if (t.lastNeed > 1 && e.length > 1) {
                                if (128 !== (192 & e[1])) return (t.lastNeed = 1), "�".repeat(n + 1);
                                if (t.lastNeed > 2 && e.length > 2 && 128 !== (192 & e[2])) return (t.lastNeed = 2), "�".repeat(n + 2);
                            }
                        }
                        function c(t) {
                            var e = this.lastTotal - this.lastNeed,
                                n = l(this, t, e);
                            return void 0 !== n
                                ? n
                                : this.lastNeed <= t.length
                                ? (t.copy(this.lastChar, e, 0, this.lastNeed), this.lastChar.toString(this.encoding, 0, this.lastTotal))
                                : (t.copy(this.lastChar, e, 0, t.length), void (this.lastNeed -= t.length));
                        }
                        function u(t, e) {
                            var n = s(this, t, e);
                            if (!this.lastNeed) return t.toString("utf8", e);
                            this.lastTotal = n;
                            var i = t.length - (n - this.lastNeed);
                            return t.copy(this.lastChar, 0, i), t.toString("utf8", e, i);
                        }
                        function d(t) {
                            var e = t && t.length ? this.write(t) : "";
                            return this.lastNeed ? e + "�".repeat(this.lastTotal - this.lastNeed) : e;
                        }
                        function p(t, e) {
                            if ((t.length - e) % 2 === 0) {
                                var n = t.toString("utf16le", e);
                                if (n) {
                                    var i = n.charCodeAt(n.length - 1);
                                    if (i >= 55296 && 56319 >= i) return (this.lastNeed = 2), (this.lastTotal = 4), (this.lastChar[0] = t[t.length - 2]), (this.lastChar[1] = t[t.length - 1]), n.slice(0, -1);
                                }
                                return n;
                            }
                            return (this.lastNeed = 1), (this.lastTotal = 2), (this.lastChar[0] = t[t.length - 1]), t.toString("utf16le", e, t.length - 1);
                        }
                        function h(t) {
                            var e = t && t.length ? this.write(t) : "";
                            if (this.lastNeed) {
                                var n = this.lastTotal - this.lastNeed;
                                return e + this.lastChar.toString("utf16le", 0, n);
                            }
                            return e;
                        }
                        function f(t, e) {
                            var n = (t.length - e) % 3;
                            return 0 === n
                                ? t.toString("base64", e)
                                : ((this.lastNeed = 3 - n),
                                  (this.lastTotal = 3),
                                  1 === n ? (this.lastChar[0] = t[t.length - 1]) : ((this.lastChar[0] = t[t.length - 2]), (this.lastChar[1] = t[t.length - 1])),
                                  t.toString("base64", e, t.length - n));
                        }
                        function m(t) {
                            var e = t && t.length ? this.write(t) : "";
                            return this.lastNeed ? e + this.lastChar.toString("base64", 0, 3 - this.lastNeed) : e;
                        }
                        function v(t) {
                            return t.toString(this.encoding);
                        }
                        function g(t) {
                            return t && t.length ? this.write(t) : "";
                        }
                        var y = t("safe-buffer").Buffer,
                            b =
                                y.isEncoding ||
                                function (t) {
                                    switch (((t = "" + t), t && t.toLowerCase())) {
                                        case "hex":
                                        case "utf8":
                                        case "utf-8":
                                        case "ascii":
                                        case "binary":
                                        case "base64":
                                        case "ucs2":
                                        case "ucs-2":
                                        case "utf16le":
                                        case "utf-16le":
                                        case "raw":
                                            return !0;
                                        default:
                                            return !1;
                                    }
                                };
                        (n.StringDecoder = o),
                            (o.prototype.write = function (t) {
                                if (0 === t.length) return "";
                                var e, n;
                                if (this.lastNeed) {
                                    if (((e = this.fillLast(t)), void 0 === e)) return "";
                                    (n = this.lastNeed), (this.lastNeed = 0);
                                } else n = 0;
                                return n < t.length ? (e ? e + this.text(t, n) : this.text(t, n)) : e || "";
                            }),
                            (o.prototype.end = d),
                            (o.prototype.text = u),
                            (o.prototype.fillLast = function (t) {
                                return this.lastNeed <= t.length
                                    ? (t.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed), this.lastChar.toString(this.encoding, 0, this.lastTotal))
                                    : (t.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, t.length), void (this.lastNeed -= t.length));
                            });
                    },
                    { "safe-buffer": 57 },
                ],
                60: [
                    function (t, e, n) {
                        (function (t) {
                            function n(t, e) {
                                function n() {
                                    if (!r) {
                                        if (i("throwDeprecation")) throw new Error(e);
                                        i("traceDeprecation") ? console.trace(e) : console.warn(e), (r = !0);
                                    }
                                    return t.apply(this, arguments);
                                }
                                if (i("noDeprecation")) return t;
                                var r = !1;
                                return n;
                            }
                            function i(e) {
                                try {
                                    if (!t.localStorage) return !1;
                                } catch (n) {
                                    return !1;
                                }
                                var i = t.localStorage[e];
                                return null == i ? !1 : "true" === String(i).toLowerCase();
                            }
                            e.exports = n;
                        }.call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}));
                    },
                    {},
                ],
                61: [
                    function (t, e, n) {
                        function i() {
                            for (var t = {}, e = 0; e < arguments.length; e++) {
                                var n = arguments[e];
                                for (var i in n) r.call(n, i) && (t[i] = n[i]);
                            }
                            return t;
                        }
                        e.exports = i;
                        var r = Object.prototype.hasOwnProperty;
                    },
                    {},
                ],
            },
            {},
            [1]
        )(1);
    }),
    (function (t, e, n) {
        "use strict";
        function i(t) {
            var e,
                n = {},
                i = t.split(",");
            for (e = 0; e < i.length; e++) n[i[e]] = !0;
            return n;
        }
        function r(t, n) {
            function i(t, i, a, s) {
                if (((i = e.lowercase(i)), k[i])) for (; g.last() && S[g.last()]; ) r("", g.last());
                x[i] && g.last() == i && r("", i), (s = b[i] || !!s), s || g.push(i);
                var l = {};
                a.replace(p, function (t, e, n, i, r) {
                    var a = n || i || r || "";
                    l[e] = o(a);
                }),
                    n.start && n.start(i, l, s);
            }
            function r(t, i) {
                var r,
                    o = 0;
                if ((i = e.lowercase(i))) for (o = g.length - 1; o >= 0 && g[o] != i; o--);
                if (o >= 0) {
                    for (r = g.length - 1; r >= o; r--) n.end && n.end(g[r]);
                    g.length = o;
                }
            }
            var a,
                s,
                c,
                g = [],
                y = t;
            for (
                g.last = function () {
                    return g[g.length - 1];
                };
                t;

            ) {
                if (((s = !0), g.last() && C[g.last()]))
                    (t = t.replace(new RegExp("(.*)<\\s*\\/\\s*" + g.last() + "[^>]*>", "i"), function (t, e) {
                        return (e = e.replace(m, "$1").replace(v, "$1")), n.chars && n.chars(o(e)), "";
                    })),
                        r("", g.last());
                else if (
                    (0 === t.indexOf("<!--")
                        ? ((a = t.indexOf("-->")), a >= 0 && (n.comment && n.comment(t.substring(4, a)), (t = t.substring(a + 3)), (s = !1)))
                        : f.test(t)
                        ? ((c = t.match(d)), c && ((t = t.substring(c[0].length)), c[0].replace(d, r), (s = !1)))
                        : h.test(t) && ((c = t.match(u)), c && ((t = t.substring(c[0].length)), c[0].replace(u, i), (s = !1))),
                    s)
                ) {
                    a = t.indexOf("<");
                    var w = 0 > a ? t : t.substring(0, a);
                    (t = 0 > a ? "" : t.substring(a)), n.chars && n.chars(o(w));
                }
                if (t == y) throw l("badparse", "The sanitizer was unable to parse the following block of html: {0}", t);
                y = t;
            }
            r();
        }
        function o(t) {
            return (A.innerHTML = t.replace(/</g, "&lt;")), A.innerText || A.textContent || "";
        }
        function a(t) {
            return t
                .replace(/&/g, "&amp;")
                .replace(y, function (t) {
                    return "&#" + t.charCodeAt(0) + ";";
                })
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;");
        }
        function s(t) {
            var n = !1,
                i = e.bind(t, t.push);
            return {
                start: function (t, r, o) {
                    (t = e.lowercase(t)),
                        !n && C[t] && (n = t),
                        n ||
                            1 != _[t] ||
                            (i("<"),
                            i(t),
                            e.forEach(r, function (t, n) {
                                var r = e.lowercase(n);
                                1 != E[r] || (T[r] === !0 && !t.match(g)) || (i(" "), i(n), i('="'), i(a(t)), i('"'));
                            }),
                            i(o ? "/>" : ">"));
                },
                end: function (t) {
                    (t = e.lowercase(t)), n || 1 != _[t] || (i("</"), i(t), i(">")), t == n && (n = !1);
                },
                chars: function (t) {
                    n || i(a(t));
                },
            };
        }
        var l = e.$$minErr("$sanitize"),
            c = function (t) {
                var e = [];
                return r(t, s(e)), e.join("");
            },
            u = /^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,
            d = /^<\s*\/\s*([\w:-]+)[^>]*>/,
            p = /([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,
            h = /^</,
            f = /^<\s*\//,
            m = /<!--(.*?)-->/g,
            v = /<!\[CDATA\[(.*?)]]>/g,
            g = /^((ftp|https?):\/\/|mailto:|tel:|#)/i,
            y = /([^\#-~| |!])/g,
            b = i("area,br,col,hr,img,wbr"),
            w = i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),
            $ = i("rp,rt"),
            x = e.extend({}, $, w),
            k = e.extend({}, w, i("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),
            S = e.extend({}, $, i("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
            C = i("script,style"),
            _ = e.extend({}, b, k, S, x),
            T = i("background,cite,href,longdesc,src,usemap"),
            E = e.extend(
                {},
                T,
                i(
                    "abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,span,start,summary,target,title,type,valign,value,vspace,width,data-url,data-id"
                )
            ),
            A = document.createElement("pre");
        e.module("ngSanitize", []).value("$sanitize", c),
            e.module("ngSanitize").filter("linky", function () {
                var t = /((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s\.\;\,\(\)\{\}\<\>]/,
                    n = /^mailto:/;
                return function (i, r) {
                    if (!i) return i;
                    var o,
                        a,
                        l,
                        c = i,
                        u = [],
                        d = s(u),
                        p = {};
                    for (e.isDefined(r) && (p.target = r); (o = c.match(t)); )
                        (a = o[0]), o[2] == o[3] && (a = "mailto:" + a), (l = o.index), d.chars(c.substr(0, l)), (p.href = a), d.start("a", p), d.chars(o[0].replace(n, "")), d.end("a"), (c = c.substring(l + o[0].length));
                    return d.chars(c), u.join("");
                };
            });
    })(window, window.angular),
    !(function (t, e) {
        "use strict";
        function n(t, e) {
            var n,
                i,
                r = t.toLowerCase();
            for (e = [].concat(e), n = 0; n < e.length; n += 1)
                if ((i = e[n])) {
                    if (i.test && i.test(t)) return !0;
                    if (i.toLowerCase() === r) return !0;
                }
        }
        var i = e.prototype.trim,
            r = e.prototype.trimRight,
            o = e.prototype.trimLeft,
            a = function (t) {
                return 1 * t || 0;
            },
            s = function (t, e) {
                if (1 > e) return "";
                for (var n = ""; e > 0; ) 1 & e && (n += t), (e >>= 1), (t += t);
                return n;
            },
            l = [].slice,
            c = function (t) {
                return null == t ? "\\s" : t.source ? t.source : "[" + f.escapeRegExp(t) + "]";
            },
            u = { lt: "<", gt: ">", quot: '"', amp: "&", apos: "'" },
            d = {};
        for (var p in u) d[u[p]] = p;
        d["'"] = "#39";
        var h = (function () {
                function t(t) {
                    return Object.prototype.toString.call(t).slice(8, -1).toLowerCase();
                }
                var n = s,
                    i = function () {
                        return i.cache.hasOwnProperty(arguments[0]) || (i.cache[arguments[0]] = i.parse(arguments[0])), i.format.call(null, i.cache[arguments[0]], arguments);
                    };
                return (
                    (i.format = function (i, r) {
                        var o,
                            a,
                            s,
                            l,
                            c,
                            u,
                            d,
                            p = 1,
                            f = i.length,
                            m = "",
                            v = [];
                        for (a = 0; f > a; a++)
                            if (((m = t(i[a])), "string" === m)) v.push(i[a]);
                            else if ("array" === m) {
                                if (((l = i[a]), l[2]))
                                    for (o = r[p], s = 0; s < l[2].length; s++) {
                                        if (!o.hasOwnProperty(l[2][s])) throw new Error(h('[_.sprintf] property "%s" does not exist', l[2][s]));
                                        o = o[l[2][s]];
                                    }
                                else o = l[1] ? r[l[1]] : r[p++];
                                if (/[^s]/.test(l[8]) && "number" != t(o)) throw new Error(h("[_.sprintf] expecting number but found %s", t(o)));
                                switch (l[8]) {
                                    case "b":
                                        o = o.toString(2);
                                        break;
                                    case "c":
                                        o = e.fromCharCode(o);
                                        break;
                                    case "d":
                                        o = parseInt(o, 10);
                                        break;
                                    case "e":
                                        o = l[7] ? o.toExponential(l[7]) : o.toExponential();
                                        break;
                                    case "f":
                                        o = l[7] ? parseFloat(o).toFixed(l[7]) : parseFloat(o);
                                        break;
                                    case "o":
                                        o = o.toString(8);
                                        break;
                                    case "s":
                                        o = (o = e(o)) && l[7] ? o.substring(0, l[7]) : o;
                                        break;
                                    case "u":
                                        o = Math.abs(o);
                                        break;
                                    case "x":
                                        o = o.toString(16);
                                        break;
                                    case "X":
                                        o = o.toString(16).toUpperCase();
                                }
                                (o = /[def]/.test(l[8]) && l[3] && o >= 0 ? "+" + o : o), (u = l[4] ? ("0" == l[4] ? "0" : l[4].charAt(1)) : " "), (d = l[6] - e(o).length), (c = l[6] ? n(u, d) : ""), v.push(l[5] ? o + c : c + o);
                            }
                        return v.join("");
                    }),
                    (i.cache = {}),
                    (i.parse = function (t) {
                        for (var e = t, n = [], i = [], r = 0; e; ) {
                            if (null !== (n = /^[^\x25]+/.exec(e))) i.push(n[0]);
                            else if (null !== (n = /^\x25{2}/.exec(e))) i.push("%");
                            else {
                                if (null === (n = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e))) throw new Error("[_.sprintf] huh?");
                                if (n[2]) {
                                    r |= 1;
                                    var o = [],
                                        a = n[2],
                                        s = [];
                                    if (null === (s = /^([a-z_][a-z_\d]*)/i.exec(a))) throw new Error("[_.sprintf] huh?");
                                    for (o.push(s[1]); "" !== (a = a.substring(s[0].length)); )
                                        if (null !== (s = /^\.([a-z_][a-z_\d]*)/i.exec(a))) o.push(s[1]);
                                        else {
                                            if (null === (s = /^\[(\d+)\]/.exec(a))) throw new Error("[_.sprintf] huh?");
                                            o.push(s[1]);
                                        }
                                    n[2] = o;
                                } else r |= 2;
                                if (3 === r) throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");
                                i.push(n);
                            }
                            e = e.substring(n[0].length);
                        }
                        return i;
                    }),
                    i
                );
            })(),
            f = {
                VERSION: "2.3.0",
                isBlank: function (t) {
                    return null == t && (t = ""), /^\s*$/.test(t);
                },
                stripTags: function (t) {
                    return null == t ? "" : e(t).replace(/<\/?[^>]+>/g, "");
                },
                capitalize: function (t) {
                    return (t = null == t ? "" : e(t)), t.charAt(0).toUpperCase() + t.slice(1);
                },
                chop: function (t, n) {
                    return null == t ? [] : ((t = e(t)), (n = ~~n), n > 0 ? t.match(new RegExp(".{1," + n + "}", "g")) : [t]);
                },
                clean: function (t) {
                    return f.strip(t).replace(/\s+/g, " ");
                },
                count: function (t, n) {
                    if (null == t || null == n) return 0;
                    (t = e(t)), (n = e(n));
                    for (var i = 0, r = 0, o = n.length; ; ) {
                        if (((r = t.indexOf(n, r)), -1 === r)) break;
                        i++, (r += o);
                    }
                    return i;
                },
                chars: function (t) {
                    return null == t ? [] : e(t).split("");
                },
                swapCase: function (t) {
                    return null == t
                        ? ""
                        : e(t).replace(/\S/g, function (t) {
                              return t === t.toUpperCase() ? t.toLowerCase() : t.toUpperCase();
                          });
                },
                escapeHTML: function (t) {
                    return null == t
                        ? ""
                        : e(t).replace(/[&<>"']/g, function (t) {
                              return "&" + d[t] + ";";
                          });
                },
                unescapeHTML: function (t) {
                    return null == t
                        ? ""
                        : e(t).replace(/\&([^;]+);/g, function (t, n) {
                              var i;
                              return n in u ? u[n] : (i = n.match(/^#x([\da-fA-F]+)$/)) ? e.fromCharCode(parseInt(i[1], 16)) : (i = n.match(/^#(\d+)$/)) ? e.fromCharCode(~~i[1]) : t;
                          });
                },
                escapeRegExp: function (t) {
                    return null == t ? "" : e(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1");
                },
                splice: function (t, e, n, i) {
                    var r = f.chars(t);
                    return r.splice(~~e, ~~n, i), r.join("");
                },
                insert: function (t, e, n) {
                    return f.splice(t, e, 0, n);
                },
                include: function (t, n) {
                    return "" === n ? !0 : null == t ? !1 : -1 !== e(t).indexOf(n);
                },
                join: function () {
                    var t = l.call(arguments),
                        e = t.shift();
                    return null == e && (e = ""), t.join(e);
                },
                lines: function (t) {
                    return null == t ? [] : e(t).split("\n");
                },
                reverse: function (t) {
                    return f.chars(t).reverse().join("");
                },
                startsWith: function (t, n) {
                    return "" === n ? !0 : null == t || null == n ? !1 : ((t = e(t)), (n = e(n)), t.length >= n.length && t.slice(0, n.length) === n);
                },
                endsWith: function (t, n) {
                    return "" === n ? !0 : null == t || null == n ? !1 : ((t = e(t)), (n = e(n)), t.length >= n.length && t.slice(t.length - n.length) === n);
                },
                succ: function (t) {
                    return null == t ? "" : ((t = e(t)), t.slice(0, -1) + e.fromCharCode(t.charCodeAt(t.length - 1) + 1));
                },
                titleize: function (t) {
                    return null == t
                        ? ""
                        : ((t = e(t).toLowerCase()),
                          t.replace(/(?:^|\s|-)\S/g, function (t) {
                              return t.toUpperCase();
                          }));
                },
                camelize: function (t) {
                    return f.trim(t).replace(/[-_\s]+(.)?/g, function (t, e) {
                        return e ? e.toUpperCase() : "";
                    });
                },
                underscored: function (t) {
                    return f
                        .trim(t)
                        .replace(/([a-z\d])([A-Z]+)/g, "$1_$2")
                        .replace(/[-\s]+/g, "_")
                        .toLowerCase();
                },
                dasherize: function (t) {
                    return f
                        .trim(t)
                        .replace(/([A-Z])/g, "-$1")
                        .replace(/[-_\s]+/g, "-")
                        .toLowerCase();
                },
                classify: function (t) {
                    return f.titleize(e(t).replace(/[\W_]/g, " ")).replace(/\s/g, "");
                },
                humanize: function (t) {
                    return f.capitalize(f.underscored(t).replace(/_id$/, "").replace(/_/g, " "));
                },
                trim: function (t, n) {
                    return null == t ? "" : !n && i ? i.call(t) : ((n = c(n)), e(t).replace(new RegExp("^" + n + "+|" + n + "+$", "g"), ""));
                },
                ltrim: function (t, n) {
                    return null == t ? "" : !n && o ? o.call(t) : ((n = c(n)), e(t).replace(new RegExp("^" + n + "+"), ""));
                },
                rtrim: function (t, n) {
                    return null == t ? "" : !n && r ? r.call(t) : ((n = c(n)), e(t).replace(new RegExp(n + "+$"), ""));
                },
                truncate: function (t, n, i) {
                    return null == t ? "" : ((t = e(t)), (i = i || "..."), (n = ~~n), t.length > n ? t.slice(0, n) + i : t);
                },
                prune: function (t, n, i) {
                    if (null == t) return "";
                    if (((t = e(t)), (n = ~~n), (i = null != i ? e(i) : "..."), t.length <= n)) return t;
                    var r = function (t) {
                            return t.toUpperCase() !== t.toLowerCase() ? "A" : " ";
                        },
                        o = t.slice(0, n + 1).replace(/.(?=\W*\w*$)/g, r);
                    return (o = o.slice(o.length - 2).match(/\w\w/) ? o.replace(/\s*\S+$/, "") : f.rtrim(o.slice(0, o.length - 1))), (o + i).length > t.length ? t : t.slice(0, o.length) + i;
                },
                words: function (t, e) {
                    return f.isBlank(t) ? [] : f.trim(t, e).split(e || /\s+/);
                },
                pad: function (t, n, i, r) {
                    (t = null == t ? "" : e(t)), (n = ~~n);
                    var o = 0;
                    switch ((i ? i.length > 1 && (i = i.charAt(0)) : (i = " "), r)) {
                        case "right":
                            return (o = n - t.length), t + s(i, o);
                        case "both":
                            return (o = n - t.length), s(i, Math.ceil(o / 2)) + t + s(i, Math.floor(o / 2));
                        default:
                            return (o = n - t.length), s(i, o) + t;
                    }
                },
                lpad: function (t, e, n) {
                    return f.pad(t, e, n);
                },
                rpad: function (t, e, n) {
                    return f.pad(t, e, n, "right");
                },
                lrpad: function (t, e, n) {
                    return f.pad(t, e, n, "both");
                },
                sprintf: h,
                vsprintf: function (t, e) {
                    return e.unshift(t), h.apply(null, e);
                },
                toNumber: function (t, e) {
                    return t ? ((t = f.trim(t)), t.match(/^-?\d+(?:\.\d+)?$/) ? a(a(t).toFixed(~~e)) : NaN) : 0;
                },
                numberFormat: function (t, e, n, i) {
                    if (isNaN(t) || null == t) return "";
                    (t = t.toFixed(~~e)), (i = "string" == typeof i ? i : ",");
                    var r = t.split("."),
                        o = r[0],
                        a = r[1] ? (n || ".") + r[1] : "";
                    return o.replace(/(\d)(?=(?:\d{3})+$)/g, "$1" + i) + a;
                },
                strRight: function (t, n) {
                    if (null == t) return "";
                    (t = e(t)), (n = null != n ? e(n) : n);
                    var i = n ? t.indexOf(n) : -1;
                    return ~i ? t.slice(i + n.length, t.length) : t;
                },
                strRightBack: function (t, n) {
                    if (null == t) return "";
                    (t = e(t)), (n = null != n ? e(n) : n);
                    var i = n ? t.lastIndexOf(n) : -1;
                    return ~i ? t.slice(i + n.length, t.length) : t;
                },
                strLeft: function (t, n) {
                    if (null == t) return "";
                    (t = e(t)), (n = null != n ? e(n) : n);
                    var i = n ? t.indexOf(n) : -1;
                    return ~i ? t.slice(0, i) : t;
                },
                strLeftBack: function (t, e) {
                    if (null == t) return "";
                    (t += ""), (e = null != e ? "" + e : e);
                    var n = t.lastIndexOf(e);
                    return ~n ? t.slice(0, n) : t;
                },
                toSentence: function (t, e, n, i) {
                    (e = e || ", "), (n = n || " and ");
                    var r = t.slice(),
                        o = r.pop();
                    return t.length > 2 && i && (n = f.rtrim(e) + n), r.length ? r.join(e) + n + o : o;
                },
                toSentenceSerial: function () {
                    var t = l.call(arguments);
                    return (t[3] = !0), f.toSentence.apply(f, t);
                },
                slugify: function (t) {
                    if (null == t) return "";
                    var n = "ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",
                        i = "aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",
                        r = new RegExp(c(n), "g");
                    return (
                        (t = e(t)
                            .toLowerCase()
                            .replace(r, function (t) {
                                var e = n.indexOf(t);
                                return i.charAt(e) || "-";
                            })),
                        f.dasherize(t.replace(/[^\w\s-]/g, ""))
                    );
                },
                surround: function (t, e) {
                    return [e, t, e].join("");
                },
                quote: function (t, e) {
                    return f.surround(t, e || '"');
                },
                unquote: function (t, e) {
                    return (e = e || '"'), t[0] === e && t[t.length - 1] === e ? t.slice(1, t.length - 1) : t;
                },
                exports: function () {
                    var t = {};
                    for (var e in this) this.hasOwnProperty(e) && !e.match(/^(?:include|contains|reverse)$/) && (t[e] = this[e]);
                    return t;
                },
                repeat: function (t, n, i) {
                    if (null == t) return "";
                    if (((n = ~~n), null == i)) return s(e(t), n);
                    for (var r = []; n > 0; r[--n] = t);
                    return r.join(i);
                },
                naturalCmp: function (t, n) {
                    if (t == n) return 0;
                    if (!t) return -1;
                    if (!n) return 1;
                    for (var i = /(\.\d+)|(\d+)|(\D+)/g, r = e(t).toLowerCase().match(i), o = e(n).toLowerCase().match(i), a = Math.min(r.length, o.length), s = 0; a > s; s++) {
                        var l = r[s],
                            c = o[s];
                        if (l !== c) {
                            var u = parseInt(l, 10);
                            if (!isNaN(u)) {
                                var d = parseInt(c, 10);
                                if (!isNaN(d) && u - d) return u - d;
                            }
                            return c > l ? -1 : 1;
                        }
                    }
                    return r.length === o.length ? r.length - o.length : n > t ? -1 : 1;
                },
                levenshtein: function (t, n) {
                    if (null == t && null == n) return 0;
                    if (null == t) return e(n).length;
                    if (null == n) return e(t).length;
                    (t = e(t)), (n = e(n));
                    for (var i, r, o = [], a = 0; a <= n.length; a++) for (var s = 0; s <= t.length; s++) (r = a && s ? (t.charAt(s - 1) === n.charAt(a - 1) ? i : Math.min(o[s], o[s - 1], i) + 1) : a + s), (i = o[s]), (o[s] = r);
                    return o.pop();
                },
                toBoolean: function (t, e, i) {
                    return "number" == typeof t && (t = "" + t), "string" != typeof t ? !!t : ((t = f.trim(t)), n(t, e || ["true", "1"]) ? !0 : n(t, i || ["false", "0"]) ? !1 : void 0);
                },
            };
        (f.strip = f.trim),
            (f.lstrip = f.ltrim),
            (f.rstrip = f.rtrim),
            (f.center = f.lrpad),
            (f.rjust = f.lpad),
            (f.ljust = f.rpad),
            (f.contains = f.include),
            (f.q = f.quote),
            (f.toBool = f.toBoolean),
            "undefined" != typeof exports && ("undefined" != typeof module && module.exports && (module.exports = f), (exports._s = f)),
            "function" == typeof define &&
                define.amd &&
                define("underscore.string", [], function () {
                    return f;
                }),
            (t._ = t._ || {}),
            (t._.string = t._.str = f);
    })(this, String),
    (function () {
        "use strict";
        angular
            .module("watchFighers", [])
            .directive("setIf", [
                function () {
                    return {
                        transclude: "element",
                        priority: 1e3,
                        terminal: !0,
                        restrict: "A",
                        compile: function (t, e, n) {
                            return function (t, e, i) {
                                e[0].doNotMove = !0;
                                var r = i.setIf,
                                    o = t.$eval(r);
                                o &&
                                    n(t, function (t) {
                                        e.after(t);
                                    });
                            };
                        },
                    };
                },
            ])
            .directive("setHtml", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        $(e).html(t.$eval(n.setHtml));
                    },
                };
            })
            .directive("setText", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        var i = t.$eval(n.setText);
                        "object" != typeof i && ((i += ""), $(e).text(i.replace(/<(?:.|\n)*?>/gm, "")));
                    },
                };
            })
            .directive("setClass", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        var i = t.$eval(n.setClass);
                        if (angular.isObject(i)) for (var r in i) i.hasOwnProperty(r) && i[r] && e.addClass(r);
                        else e.addClass(i);
                    },
                };
            })
            .directive("setTitle", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        $(e).attr("title", t.$eval(n.setTitle));
                    },
                };
            })
            .directive("setDataNt", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        $(e).attr("data-nt", t.$eval(n.setDataNt));
                    },
                };
            })
            .directive("setAlt", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        $(e).attr("alt", t.$eval(n.setAlt));
                    },
                };
            })
            .directive("setDataHint", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        $(e).attr("data-hint", t.$eval(n.setDataHint));
                    },
                };
            })
            .directive("setDataId", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        $(e).attr("data-id", t.$eval(n.setDataId));
                    },
                };
            })
            .directive("setDataIndex", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        $(e).attr("data-index", t.$eval(n.setDataIndex));
                    },
                };
            })
            .directive("setSrc", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        $(e).attr("src", t.$eval(n.setSrc));
                    },
                };
            })
            .directive("setHref", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        $(e).attr("href", t.$eval(n.setHref));
                    },
                };
            })
            .directive("setValue", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        $(e).attr("value", t.$eval(n.setValue));
                    },
                };
            })
            .directive("setStyle", function () {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function (t, e, n) {
                        e.css(t.$eval(n.setStyle));
                    },
                };
            });
    })(),
    !(function (t) {
        "use strict";
        var e = function (e) {
            this.element = t(e);
        };
        e.prototype = {
            constructor: e,
            show: function () {
                var e,
                    n,
                    i,
                    r = this.element,
                    o = r.closest("ul:not(.dropdown-menu)"),
                    a = r.attr("data-target");
                a || ((a = r.attr("href")), (a = a && a.replace(/.*(?=#[^\s]*$)/, ""))),
                    r.parent("li").hasClass("active") ||
                        ((e = o.find(".active:last a")[0]),
                        (i = t.Event("show", { relatedTarget: e })),
                        r.trigger(i),
                        i.isDefaultPrevented() ||
                            ((n = t(a)),
                            this.activate(r.parent("li"), o),
                            this.activate(n, n.parent(), function () {
                                r.trigger({ type: "shown", relatedTarget: e });
                            })));
            },
            activate: function (e, n, i) {
                function r() {
                    o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),
                        e.addClass("active"),
                        a ? (e[0].offsetWidth, e.addClass("in")) : e.removeClass("fade"),
                        e.parent(".dropdown-menu") && e.closest("li.dropdown").addClass("active"),
                        i && i();
                }
                var o = n.find("> .active"),
                    a = i && t.support.transition && o.hasClass("fade");
                a ? o.one(t.support.transition.end, r) : r(), o.removeClass("in");
            },
        };
        var n = t.fn.tab;
        (t.fn.tab = function (n) {
            return this.each(function () {
                var i = t(this),
                    r = i.data("tab");
                r || i.data("tab", (r = new e(this))), "string" == typeof n && r[n]();
            });
        }),
            (t.fn.tab.Constructor = e),
            (t.fn.tab.noConflict = function () {
                return (t.fn.tab = n), this;
            }),
            t(document).on("click.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function (e) {
                e.preventDefault(), t(this).tab("show");
            });
    })(window.jQuery),
    (function (t) {
        t.fn.hoverIntent = function (e, n, i) {
            var r = { interval: 100, sensitivity: 6, timeout: 0 };
            r = "object" == typeof e ? t.extend(r, e) : t.isFunction(n) ? t.extend(r, { over: e, out: n, selector: i }) : t.extend(r, { over: e, out: e, selector: n });
            var o,
                a,
                s,
                l,
                c = function (t) {
                    (o = t.pageX), (a = t.pageY);
                },
                u = function (e, n) {
                    return (
                        (n.hoverIntent_t = clearTimeout(n.hoverIntent_t)),
                        Math.sqrt((s - o) * (s - o) + (l - a) * (l - a)) < r.sensitivity
                            ? (t(n).off("mousemove.hoverIntent", c), (n.hoverIntent_s = !0), r.over.apply(n, [e]))
                            : ((s = o),
                              (l = a),
                              (n.hoverIntent_t = setTimeout(function () {
                                  u(e, n);
                              }, r.interval)),
                              void 0)
                    );
                },
                d = function (t, e) {
                    return (e.hoverIntent_t = clearTimeout(e.hoverIntent_t)), (e.hoverIntent_s = !1), r.out.apply(e, [t]);
                },
                p = function (e) {
                    var n = t.extend({}, e),
                        i = this;
                    i.hoverIntent_t && (i.hoverIntent_t = clearTimeout(i.hoverIntent_t)),
                        "mouseenter" === e.type
                            ? ((s = n.pageX),
                              (l = n.pageY),
                              t(i).on("mousemove.hoverIntent", c),
                              i.hoverIntent_s ||
                                  (i.hoverIntent_t = setTimeout(function () {
                                      u(n, i);
                                  }, r.interval)))
                            : (t(i).off("mousemove.hoverIntent", c),
                              i.hoverIntent_s &&
                                  (i.hoverIntent_t = setTimeout(function () {
                                      d(n, i);
                                  }, r.timeout)));
                };
            return this.on({ "mouseenter.hoverIntent": p, "mouseleave.hoverIntent": p }, r.selector);
        };
    })(jQuery),
    (function (t, e) {
        function n(e, n) {
            var r,
                o,
                a,
                s = e.nodeName.toLowerCase();
            return "area" === s
                ? ((r = e.parentNode), (o = r.name), e.href && o && "map" === r.nodeName.toLowerCase() ? ((a = t("img[usemap=#" + o + "]")[0]), !!a && i(a)) : !1)
                : (/input|select|textarea|button|object/.test(s) ? !e.disabled : "a" === s ? e.href || n : n) && i(e);
        }
        function i(e) {
            return (
                t.expr.filters.visible(e) &&
                !t(e)
                    .parents()
                    .addBack()
                    .filter(function () {
                        return "hidden" === t.css(this, "visibility");
                    }).length
            );
        }
        var r = 0,
            o = /^ui-id-\d+$/;
        (t.ui = t.ui || {}),
            t.extend(t.ui, {
                version: "1.10.3",
                keyCode: {
                    BACKSPACE: 8,
                    COMMA: 188,
                    DELETE: 46,
                    DOWN: 40,
                    END: 35,
                    ENTER: 13,
                    ESCAPE: 27,
                    HOME: 36,
                    LEFT: 37,
                    NUMPAD_ADD: 107,
                    NUMPAD_DECIMAL: 110,
                    NUMPAD_DIVIDE: 111,
                    NUMPAD_ENTER: 108,
                    NUMPAD_MULTIPLY: 106,
                    NUMPAD_SUBTRACT: 109,
                    PAGE_DOWN: 34,
                    PAGE_UP: 33,
                    PERIOD: 190,
                    RIGHT: 39,
                    SPACE: 32,
                    TAB: 9,
                    UP: 38,
                },
            }),
            t.fn.extend({
                focus: (function (e) {
                    return function (n, i) {
                        return "number" == typeof n
                            ? this.each(function () {
                                  var e = this;
                                  setTimeout(function () {
                                      t(e).focus(), i && i.call(e);
                                  }, n);
                              })
                            : e.apply(this, arguments);
                    };
                })(t.fn.focus),
                scrollParent: function () {
                    var e;
                    return (
                        (e =
                            (t.ui.ie && /(static|relative)/.test(this.css("position"))) || /absolute/.test(this.css("position"))
                                ? this.parents()
                                      .filter(function () {
                                          return /(relative|absolute|fixed)/.test(t.css(this, "position")) && /(auto|scroll)/.test(t.css(this, "overflow") + t.css(this, "overflow-y") + t.css(this, "overflow-x"));
                                      })
                                      .eq(0)
                                : this.parents()
                                      .filter(function () {
                                          return /(auto|scroll)/.test(t.css(this, "overflow") + t.css(this, "overflow-y") + t.css(this, "overflow-x"));
                                      })
                                      .eq(0)),
                        /fixed/.test(this.css("position")) || !e.length ? t(document) : e
                    );
                },
                zIndex: function (n) {
                    if (n !== e) return this.css("zIndex", n);
                    if (this.length)
                        for (var i, r, o = t(this[0]); o.length && o[0] !== document; ) {
                            if (((i = o.css("position")), ("absolute" === i || "relative" === i || "fixed" === i) && ((r = parseInt(o.css("zIndex"), 10)), !isNaN(r) && 0 !== r))) return r;
                            o = o.parent();
                        }
                    return 0;
                },
                uniqueId: function () {
                    return this.each(function () {
                        this.id || (this.id = "ui-id-" + ++r);
                    });
                },
                removeUniqueId: function () {
                    return this.each(function () {
                        o.test(this.id) && t(this).removeAttr("id");
                    });
                },
            }),
            t.extend(t.expr[":"], {
                data: t.expr.createPseudo
                    ? t.expr.createPseudo(function (e) {
                          return function (n) {
                              return !!t.data(n, e);
                          };
                      })
                    : function (e, n, i) {
                          return !!t.data(e, i[3]);
                      },
                focusable: function (e) {
                    return n(e, !isNaN(t.attr(e, "tabindex")));
                },
                tabbable: function (e) {
                    var i = t.attr(e, "tabindex"),
                        r = isNaN(i);
                    return (r || i >= 0) && n(e, !r);
                },
            }),
            t("<a>").outerWidth(1).jquery ||
                t.each(["Width", "Height"], function (n, i) {
                    function r(e, n, i, r) {
                        return (
                            t.each(o, function () {
                                (n -= parseFloat(t.css(e, "padding" + this)) || 0), i && (n -= parseFloat(t.css(e, "border" + this + "Width")) || 0), r && (n -= parseFloat(t.css(e, "margin" + this)) || 0);
                            }),
                            n
                        );
                    }
                    var o = "Width" === i ? ["Left", "Right"] : ["Top", "Bottom"],
                        a = i.toLowerCase(),
                        s = { innerWidth: t.fn.innerWidth, innerHeight: t.fn.innerHeight, outerWidth: t.fn.outerWidth, outerHeight: t.fn.outerHeight };
                    (t.fn["inner" + i] = function (n) {
                        return n === e
                            ? s["inner" + i].call(this)
                            : this.each(function () {
                                  t(this).css(a, r(this, n) + "px");
                              });
                    }),
                        (t.fn["outer" + i] = function (e, n) {
                            return "number" != typeof e
                                ? s["outer" + i].call(this, e)
                                : this.each(function () {
                                      t(this).css(a, r(this, e, !0, n) + "px");
                                  });
                        });
                }),
            t.fn.addBack ||
                (t.fn.addBack = function (t) {
                    return this.add(null == t ? this.prevObject : this.prevObject.filter(t));
                }),
            t("<a>").data("a-b", "a").removeData("a-b").data("a-b") &&
                (t.fn.removeData = (function (e) {
                    return function (n) {
                        return arguments.length ? e.call(this, t.camelCase(n)) : e.call(this);
                    };
                })(t.fn.removeData)),
            (t.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())),
            (t.support.selectstart = "onselectstart" in document.createElement("div")),
            t.fn.extend({
                disableSelection: function () {
                    return this.bind((t.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function (t) {
                        t.preventDefault();
                    });
                },
                enableSelection: function () {
                    return this.unbind(".ui-disableSelection");
                },
            }),
            t.extend(t.ui, {
                plugin: {
                    add: function (e, n, i) {
                        var r,
                            o = t.ui[e].prototype;
                        for (r in i) (o.plugins[r] = o.plugins[r] || []), o.plugins[r].push([n, i[r]]);
                    },
                    call: function (t, e, n) {
                        var i,
                            r = t.plugins[e];
                        if (r && t.element[0].parentNode && 11 !== t.element[0].parentNode.nodeType) for (i = 0; i < r.length; i++) t.options[r[i][0]] && r[i][1].apply(t.element, n);
                    },
                },
                hasScroll: function (e, n) {
                    if ("hidden" === t(e).css("overflow")) return !1;
                    var i = n && "left" === n ? "scrollLeft" : "scrollTop",
                        r = !1;
                    return e[i] > 0 ? !0 : ((e[i] = 1), (r = e[i] > 0), (e[i] = 0), r);
                },
            });
    })(jQuery),
    (function (t, e) {
        var n = 0,
            i = Array.prototype.slice,
            r = t.cleanData;
        (t.cleanData = function (e) {
            for (var n, i = 0; null != (n = e[i]); i++)
                try {
                    t(n).triggerHandler("remove");
                } catch (o) {}
            r(e);
        }),
            (t.widget = function (e, n, i) {
                var r,
                    o,
                    a,
                    s,
                    l = {},
                    c = e.split(".")[0];
                (e = e.split(".")[1]),
                    (r = c + "-" + e),
                    i || ((i = n), (n = t.Widget)),
                    (t.expr[":"][r.toLowerCase()] = function (e) {
                        return !!t.data(e, r);
                    }),
                    (t[c] = t[c] || {}),
                    (o = t[c][e]),
                    (a = t[c][e] = function (t, e) {
                        return this._createWidget ? void (arguments.length && this._createWidget(t, e)) : new a(t, e);
                    }),
                    t.extend(a, o, { version: i.version, _proto: t.extend({}, i), _childConstructors: [] }),
                    (s = new n()),
                    (s.options = t.widget.extend({}, s.options)),
                    t.each(i, function (e, i) {
                        return t.isFunction(i)
                            ? void (l[e] = (function () {
                                  var t = function () {
                                          return n.prototype[e].apply(this, arguments);
                                      },
                                      r = function (t) {
                                          return n.prototype[e].apply(this, t);
                                      };
                                  return function () {
                                      var e,
                                          n = this._super,
                                          o = this._superApply;
                                      return (this._super = t), (this._superApply = r), (e = i.apply(this, arguments)), (this._super = n), (this._superApply = o), e;
                                  };
                              })())
                            : void (l[e] = i);
                    }),
                    (a.prototype = t.widget.extend(s, { widgetEventPrefix: o ? s.widgetEventPrefix : e }, l, { constructor: a, namespace: c, widgetName: e, widgetFullName: r })),
                    o
                        ? (t.each(o._childConstructors, function (e, n) {
                              var i = n.prototype;
                              t.widget(i.namespace + "." + i.widgetName, a, n._proto);
                          }),
                          delete o._childConstructors)
                        : n._childConstructors.push(a),
                    t.widget.bridge(e, a);
            }),
            (t.widget.extend = function (n) {
                for (var r, o, a = i.call(arguments, 1), s = 0, l = a.length; l > s; s++)
                    for (r in a[s]) (o = a[s][r]), a[s].hasOwnProperty(r) && o !== e && (t.isPlainObject(o) ? (n[r] = t.isPlainObject(n[r]) ? t.widget.extend({}, n[r], o) : t.widget.extend({}, o)) : (n[r] = o));
                return n;
            }),
            (t.widget.bridge = function (n, r) {
                var o = r.prototype.widgetFullName || n;
                t.fn[n] = function (a) {
                    var s = "string" == typeof a,
                        l = i.call(arguments, 1),
                        c = this;
                    return (
                        (a = !s && l.length ? t.widget.extend.apply(null, [a].concat(l)) : a),
                        s
                            ? this.each(function () {
                                  var i,
                                      r = t.data(this, o);
                                  return r
                                      ? t.isFunction(r[a]) && "_" !== a.charAt(0)
                                          ? ((i = r[a].apply(r, l)), i !== r && i !== e ? ((c = i && i.jquery ? c.pushStack(i.get()) : i), !1) : void 0)
                                          : t.error("no such method '" + a + "' for " + n + " widget instance")
                                      : t.error("cannot call methods on " + n + " prior to initialization; attempted to call method '" + a + "'");
                              })
                            : this.each(function () {
                                  var e = t.data(this, o);
                                  e ? e.option(a || {})._init() : t.data(this, o, new r(a, this));
                              }),
                        c
                    );
                };
            }),
            (t.Widget = function () {}),
            (t.Widget._childConstructors = []),
            (t.Widget.prototype = {
                widgetName: "widget",
                widgetEventPrefix: "",
                defaultElement: "<div>",
                options: { disabled: !1, create: null },
                _createWidget: function (e, i) {
                    (i = t(i || this.defaultElement || this)[0]),
                        (this.element = t(i)),
                        (this.uuid = n++),
                        (this.eventNamespace = "." + this.widgetName + this.uuid),
                        (this.options = t.widget.extend({}, this.options, this._getCreateOptions(), e)),
                        (this.bindings = t()),
                        (this.hoverable = t()),
                        (this.focusable = t()),
                        i !== this &&
                            (t.data(i, this.widgetFullName, this),
                            this._on(!0, this.element, {
                                remove: function (t) {
                                    t.target === i && this.destroy();
                                },
                            }),
                            (this.document = t(i.style ? i.ownerDocument : i.document || i)),
                            (this.window = t(this.document[0].defaultView || this.document[0].parentWindow))),
                        this._create(),
                        this._trigger("create", null, this._getCreateEventData()),
                        this._init();
                },
                _getCreateOptions: t.noop,
                _getCreateEventData: t.noop,
                _create: t.noop,
                _init: t.noop,
                destroy: function () {
                    this._destroy(),
                        this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),
                        this.widget()
                            .unbind(this.eventNamespace)
                            .removeAttr("aria-disabled")
                            .removeClass(this.widgetFullName + "-disabled ui-state-disabled"),
                        this.bindings.unbind(this.eventNamespace),
                        this.hoverable.removeClass("ui-state-hover"),
                        this.focusable.removeClass("ui-state-focus");
                },
                _destroy: t.noop,
                widget: function () {
                    return this.element;
                },
                option: function (n, i) {
                    var r,
                        o,
                        a,
                        s = n;
                    if (0 === arguments.length) return t.widget.extend({}, this.options);
                    if ("string" == typeof n)
                        if (((s = {}), (r = n.split(".")), (n = r.shift()), r.length)) {
                            for (o = s[n] = t.widget.extend({}, this.options[n]), a = 0; a < r.length - 1; a++) (o[r[a]] = o[r[a]] || {}), (o = o[r[a]]);
                            if (((n = r.pop()), i === e)) return o[n] === e ? null : o[n];
                            o[n] = i;
                        } else {
                            if (i === e) return this.options[n] === e ? null : this.options[n];
                            s[n] = i;
                        }
                    return this._setOptions(s), this;
                },
                _setOptions: function (t) {
                    var e;
                    for (e in t) this._setOption(e, t[e]);
                    return this;
                },
                _setOption: function (t, e) {
                    return (
                        (this.options[t] = e),
                        "disabled" === t &&
                            (this.widget()
                                .toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!e)
                                .attr("aria-disabled", e),
                            this.hoverable.removeClass("ui-state-hover"),
                            this.focusable.removeClass("ui-state-focus")),
                        this
                    );
                },
                enable: function () {
                    return this._setOption("disabled", !1);
                },
                disable: function () {
                    return this._setOption("disabled", !0);
                },
                _on: function (e, n, i) {
                    var r,
                        o = this;
                    "boolean" != typeof e && ((i = n), (n = e), (e = !1)),
                        i ? ((n = r = t(n)), (this.bindings = this.bindings.add(n))) : ((i = n), (n = this.element), (r = this.widget())),
                        t.each(i, function (i, a) {
                            function s() {
                                return e || (o.options.disabled !== !0 && !t(this).hasClass("ui-state-disabled")) ? ("string" == typeof a ? o[a] : a).apply(o, arguments) : void 0;
                            }
                            "string" != typeof a && (s.guid = a.guid = a.guid || s.guid || t.guid++);
                            var l = i.match(/^(\w+)\s*(.*)$/),
                                c = l[1] + o.eventNamespace,
                                u = l[2];
                            u ? r.delegate(u, c, s) : n.bind(c, s);
                        });
                },
                _off: function (t, e) {
                    (e = (e || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace), t.unbind(e).undelegate(e);
                },
                _delay: function (t, e) {
                    function n() {
                        return ("string" == typeof t ? i[t] : t).apply(i, arguments);
                    }
                    var i = this;
                    return setTimeout(n, e || 0);
                },
                _hoverable: function (e) {
                    (this.hoverable = this.hoverable.add(e)),
                        this._on(e, {
                            mouseenter: function (e) {
                                t(e.currentTarget).addClass("ui-state-hover");
                            },
                            mouseleave: function (e) {
                                t(e.currentTarget).removeClass("ui-state-hover");
                            },
                        });
                },
                _focusable: function (e) {
                    (this.focusable = this.focusable.add(e)),
                        this._on(e, {
                            focusin: function (e) {
                                t(e.currentTarget).addClass("ui-state-focus");
                            },
                            focusout: function (e) {
                                t(e.currentTarget).removeClass("ui-state-focus");
                            },
                        });
                },
                _trigger: function (e, n, i) {
                    var r,
                        o,
                        a = this.options[e];
                    if (((i = i || {}), (n = t.Event(n)), (n.type = (e === this.widgetEventPrefix ? e : this.widgetEventPrefix + e).toLowerCase()), (n.target = this.element[0]), (o = n.originalEvent))) for (r in o) r in n || (n[r] = o[r]);
                    return this.element.trigger(n, i), !((t.isFunction(a) && a.apply(this.element[0], [n].concat(i)) === !1) || n.isDefaultPrevented());
                },
            }),
            t.each({ show: "fadeIn", hide: "fadeOut" }, function (e, n) {
                t.Widget.prototype["_" + e] = function (i, r, o) {
                    "string" == typeof r && (r = { effect: r });
                    var a,
                        s = r ? (r === !0 || "number" == typeof r ? n : r.effect || n) : e;
                    (r = r || {}),
                        "number" == typeof r && (r = { duration: r }),
                        (a = !t.isEmptyObject(r)),
                        (r.complete = o),
                        r.delay && i.delay(r.delay),
                        a && t.effects && t.effects.effect[s]
                            ? i[e](r)
                            : s !== e && i[s]
                            ? i[s](r.duration, r.easing, o)
                            : i.queue(function (n) {
                                  t(this)[e](), o && o.call(i[0]), n();
                              });
                };
            });
    })(jQuery),
    (function (t, e) {
        var n = !1;
        t(document).mouseup(function () {
            n = !1;
        }),
            t.widget("ui.mouse", {
                version: "1.10.3",
                options: { cancel: "input,textarea,button,select,option", distance: 1, delay: 0 },
                _mouseInit: function () {
                    var e = this;
                    this.element
                        .bind("mousedown." + this.widgetName, function (t) {
                            return e._mouseDown(t);
                        })
                        .bind("click." + this.widgetName, function (n) {
                            return !0 === t.data(n.target, e.widgetName + ".preventClickEvent") ? (t.removeData(n.target, e.widgetName + ".preventClickEvent"), n.stopImmediatePropagation(), !1) : void 0;
                        }),
                        (this.started = !1);
                },
                _mouseDestroy: function () {
                    this.element.unbind("." + this.widgetName),
                        this._mouseMoveDelegate &&
                            t(document)
                                .unbind("mousemove." + this.widgetName, this._mouseMoveDelegate)
                                .unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
                },
                _mouseDown: function (e) {
                    if (!n) {
                        this._mouseStarted && this._mouseUp(e), (this._mouseDownEvent = e);
                        var i = this,
                            r = 1 === e.which,
                            o = "string" == typeof this.options.cancel && e.target.nodeName ? t(e.target).closest(this.options.cancel).length : !1;
                        return r && !o && this._mouseCapture(e)
                            ? ((this.mouseDelayMet = !this.options.delay),
                              this.mouseDelayMet ||
                                  (this._mouseDelayTimer = setTimeout(function () {
                                      i.mouseDelayMet = !0;
                                  }, this.options.delay)),
                              this._mouseDistanceMet(e) && this._mouseDelayMet(e) && ((this._mouseStarted = this._mouseStart(e) !== !1), !this._mouseStarted)
                                  ? (e.preventDefault(), !0)
                                  : (!0 === t.data(e.target, this.widgetName + ".preventClickEvent") && t.removeData(e.target, this.widgetName + ".preventClickEvent"),
                                    (this._mouseMoveDelegate = function (t) {
                                        return i._mouseMove(t);
                                    }),
                                    (this._mouseUpDelegate = function (t) {
                                        return i._mouseUp(t);
                                    }),
                                    t(document)
                                        .bind("mousemove." + this.widgetName, this._mouseMoveDelegate)
                                        .bind("mouseup." + this.widgetName, this._mouseUpDelegate),
                                    e.preventDefault(),
                                    (n = !0),
                                    !0))
                            : !0;
                    }
                },
                _mouseMove: function (e) {
                    return t.ui.ie && (!document.documentMode || document.documentMode < 9) && !e.button
                        ? this._mouseUp(e)
                        : this._mouseStarted
                        ? (this._mouseDrag(e), e.preventDefault())
                        : (this._mouseDistanceMet(e) && this._mouseDelayMet(e) && ((this._mouseStarted = this._mouseStart(this._mouseDownEvent, e) !== !1), this._mouseStarted ? this._mouseDrag(e) : this._mouseUp(e)), !this._mouseStarted);
                },
                _mouseUp: function (e) {
                    return (
                        t(document)
                            .unbind("mousemove." + this.widgetName, this._mouseMoveDelegate)
                            .unbind("mouseup." + this.widgetName, this._mouseUpDelegate),
                        this._mouseStarted && ((this._mouseStarted = !1), e.target === this._mouseDownEvent.target && t.data(e.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(e)),
                        !1
                    );
                },
                _mouseDistanceMet: function (t) {
                    return Math.max(Math.abs(this._mouseDownEvent.pageX - t.pageX), Math.abs(this._mouseDownEvent.pageY - t.pageY)) >= this.options.distance;
                },
                _mouseDelayMet: function () {
                    return this.mouseDelayMet;
                },
                _mouseStart: function () {},
                _mouseDrag: function () {},
                _mouseStop: function () {},
                _mouseCapture: function () {
                    return !0;
                },
            });
    })(jQuery),
    (function (t, e) {
        function n(t, e, n) {
            return [parseFloat(t[0]) * (h.test(t[0]) ? e / 100 : 1), parseFloat(t[1]) * (h.test(t[1]) ? n / 100 : 1)];
        }
        function i(e, n) {
            return parseInt(t.css(e, n), 10) || 0;
        }
        function r(e) {
            var n = e[0];
            return 9 === n.nodeType
                ? { width: e.width(), height: e.height(), offset: { top: 0, left: 0 } }
                : t.isWindow(n)
                ? { width: e.width(), height: e.height(), offset: { top: e.scrollTop(), left: e.scrollLeft() } }
                : n.preventDefault
                ? { width: 0, height: 0, offset: { top: n.pageY, left: n.pageX } }
                : { width: e.outerWidth(), height: e.outerHeight(), offset: e.offset() };
        }
        t.ui = t.ui || {};
        var o,
            a = Math.max,
            s = Math.abs,
            l = Math.round,
            c = /left|center|right/,
            u = /top|center|bottom/,
            d = /[\+\-]\d+(\.[\d]+)?%?/,
            p = /^\w+/,
            h = /%$/,
            f = t.fn.position;
        (t.position = {
            scrollbarWidth: function () {
                if (o !== e) return o;
                var n,
                    i,
                    r = t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
                    a = r.children()[0];
                return t("body").append(r), (n = a.offsetWidth), r.css("overflow", "scroll"), (i = a.offsetWidth), n === i && (i = r[0].clientWidth), r.remove(), (o = n - i);
            },
            getScrollInfo: function (e) {
                var n = e.isWindow ? "" : e.element.css("overflow-x"),
                    i = e.isWindow ? "" : e.element.css("overflow-y"),
                    r = "scroll" === n || ("auto" === n && e.width < e.element[0].scrollWidth),
                    o = "scroll" === i || ("auto" === i && e.height < e.element[0].scrollHeight);
                return { width: o ? t.position.scrollbarWidth() : 0, height: r ? t.position.scrollbarWidth() : 0 };
            },
            getWithinInfo: function (e) {
                var n = t(e || window),
                    i = t.isWindow(n[0]);
                return { element: n, isWindow: i, offset: n.offset() || { left: 0, top: 0 }, scrollLeft: n.scrollLeft(), scrollTop: n.scrollTop(), width: i ? n.width() : n.outerWidth(), height: i ? n.height() : n.outerHeight() };
            },
        }),
            (t.fn.position = function (e) {
                if (!e || !e.of) return f.apply(this, arguments);
                e = t.extend({}, e);
                var o,
                    h,
                    m,
                    v,
                    g,
                    y,
                    b = t(e.of),
                    w = t.position.getWithinInfo(e.within),
                    $ = t.position.getScrollInfo(w),
                    x = (e.collision || "flip").split(" "),
                    k = {};
                return (
                    (y = r(b)),
                    b[0].preventDefault && (e.at = "left top"),
                    (h = y.width),
                    (m = y.height),
                    (v = y.offset),
                    (g = t.extend({}, v)),
                    t.each(["my", "at"], function () {
                        var t,
                            n,
                            i = (e[this] || "").split(" ");
                        1 === i.length && (i = c.test(i[0]) ? i.concat(["center"]) : u.test(i[0]) ? ["center"].concat(i) : ["center", "center"]),
                            (i[0] = c.test(i[0]) ? i[0] : "center"),
                            (i[1] = u.test(i[1]) ? i[1] : "center"),
                            (t = d.exec(i[0])),
                            (n = d.exec(i[1])),
                            (k[this] = [t ? t[0] : 0, n ? n[0] : 0]),
                            (e[this] = [p.exec(i[0])[0], p.exec(i[1])[0]]);
                    }),
                    1 === x.length && (x[1] = x[0]),
                    "right" === e.at[0] ? (g.left += h) : "center" === e.at[0] && (g.left += h / 2),
                    "bottom" === e.at[1] ? (g.top += m) : "center" === e.at[1] && (g.top += m / 2),
                    (o = n(k.at, h, m)),
                    (g.left += o[0]),
                    (g.top += o[1]),
                    this.each(function () {
                        var r,
                            c,
                            u = t(this),
                            d = u.outerWidth(),
                            p = u.outerHeight(),
                            f = i(this, "marginLeft"),
                            y = i(this, "marginTop"),
                            S = d + f + i(this, "marginRight") + $.width,
                            C = p + y + i(this, "marginBottom") + $.height,
                            _ = t.extend({}, g),
                            T = n(k.my, u.outerWidth(), u.outerHeight());
                        "right" === e.my[0] ? (_.left -= d) : "center" === e.my[0] && (_.left -= d / 2),
                            "bottom" === e.my[1] ? (_.top -= p) : "center" === e.my[1] && (_.top -= p / 2),
                            (_.left += T[0]),
                            (_.top += T[1]),
                            t.support.offsetFractions || ((_.left = l(_.left)), (_.top = l(_.top))),
                            (r = { marginLeft: f, marginTop: y }),
                            t.each(["left", "top"], function (n, i) {
                                t.ui.position[x[n]] &&
                                    t.ui.position[x[n]][i](_, {
                                        targetWidth: h,
                                        targetHeight: m,
                                        elemWidth: d,
                                        elemHeight: p,
                                        collisionPosition: r,
                                        collisionWidth: S,
                                        collisionHeight: C,
                                        offset: [o[0] + T[0], o[1] + T[1]],
                                        my: e.my,
                                        at: e.at,
                                        within: w,
                                        elem: u,
                                    });
                            }),
                            e.using &&
                                (c = function (t) {
                                    var n = v.left - _.left,
                                        i = n + h - d,
                                        r = v.top - _.top,
                                        o = r + m - p,
                                        l = {
                                            target: { element: b, left: v.left, top: v.top, width: h, height: m },
                                            element: { element: u, left: _.left, top: _.top, width: d, height: p },
                                            horizontal: 0 > i ? "left" : n > 0 ? "right" : "center",
                                            vertical: 0 > o ? "top" : r > 0 ? "bottom" : "middle",
                                        };
                                    d > h && s(n + i) < h && (l.horizontal = "center"),
                                        p > m && s(r + o) < m && (l.vertical = "middle"),
                                        a(s(n), s(i)) > a(s(r), s(o)) ? (l.important = "horizontal") : (l.important = "vertical"),
                                        e.using.call(this, t, l);
                                }),
                            u.offset(t.extend(_, { using: c }));
                    })
                );
            }),
            (t.ui.position = {
                fit: {
                    left: function (t, e) {
                        var n,
                            i = e.within,
                            r = i.isWindow ? i.scrollLeft : i.offset.left,
                            o = i.width,
                            s = t.left - e.collisionPosition.marginLeft,
                            l = r - s,
                            c = s + e.collisionWidth - o - r;
                        e.collisionWidth > o
                            ? l > 0 && 0 >= c
                                ? ((n = t.left + l + e.collisionWidth - o - r), (t.left += l - n))
                                : c > 0 && 0 >= l
                                ? (t.left = r)
                                : l > c
                                ? (t.left = r + o - e.collisionWidth)
                                : (t.left = r)
                            : l > 0
                            ? (t.left += l)
                            : c > 0
                            ? (t.left -= c)
                            : (t.left = a(t.left - s, t.left));
                    },
                    top: function (t, e) {
                        var n,
                            i = e.within,
                            r = i.isWindow ? i.scrollTop : i.offset.top,
                            o = e.within.height,
                            s = t.top - e.collisionPosition.marginTop,
                            l = r - s,
                            c = s + e.collisionHeight - o - r;
                        e.collisionHeight > o
                            ? l > 0 && 0 >= c
                                ? ((n = t.top + l + e.collisionHeight - o - r), (t.top += l - n))
                                : c > 0 && 0 >= l
                                ? (t.top = r)
                                : l > c
                                ? (t.top = r + o - e.collisionHeight)
                                : (t.top = r)
                            : l > 0
                            ? (t.top += l)
                            : c > 0
                            ? (t.top -= c)
                            : (t.top = a(t.top - s, t.top));
                    },
                },
                flip: {
                    left: function (t, e) {
                        var n,
                            i,
                            r = e.within,
                            o = r.offset.left + r.scrollLeft,
                            a = r.width,
                            l = r.isWindow ? r.scrollLeft : r.offset.left,
                            c = t.left - e.collisionPosition.marginLeft,
                            u = c - l,
                            d = c + e.collisionWidth - a - l,
                            p = "left" === e.my[0] ? -e.elemWidth : "right" === e.my[0] ? e.elemWidth : 0,
                            h = "left" === e.at[0] ? e.targetWidth : "right" === e.at[0] ? -e.targetWidth : 0,
                            f = -2 * e.offset[0];
                        0 > u
                            ? ((n = t.left + p + h + f + e.collisionWidth - a - o), (0 > n || n < s(u)) && (t.left += p + h + f))
                            : d > 0 && ((i = t.left - e.collisionPosition.marginLeft + p + h + f - l), (i > 0 || s(i) < d) && (t.left += p + h + f));
                    },
                    top: function (t, e) {
                        var n,
                            i,
                            r = e.within,
                            o = r.offset.top + r.scrollTop,
                            a = r.height,
                            l = r.isWindow ? r.scrollTop : r.offset.top,
                            c = t.top - e.collisionPosition.marginTop,
                            u = c - l,
                            d = c + e.collisionHeight - a - l,
                            p = "top" === e.my[1],
                            h = p ? -e.elemHeight : "bottom" === e.my[1] ? e.elemHeight : 0,
                            f = "top" === e.at[1] ? e.targetHeight : "bottom" === e.at[1] ? -e.targetHeight : 0,
                            m = -2 * e.offset[1];
                        0 > u
                            ? ((i = t.top + h + f + m + e.collisionHeight - a - o), t.top + h + f + m > u && (0 > i || i < s(u)) && (t.top += h + f + m))
                            : d > 0 && ((n = t.top - e.collisionPosition.marginTop + h + f + m - l), t.top + h + f + m > d && (n > 0 || s(n) < d) && (t.top += h + f + m));
                    },
                },
                flipfit: {
                    left: function () {
                        t.ui.position.flip.left.apply(this, arguments), t.ui.position.fit.left.apply(this, arguments);
                    },
                    top: function () {
                        t.ui.position.flip.top.apply(this, arguments), t.ui.position.fit.top.apply(this, arguments);
                    },
                },
            }),
            (function () {
                var e,
                    n,
                    i,
                    r,
                    o,
                    a = document.getElementsByTagName("body")[0],
                    s = document.createElement("div");
                (e = document.createElement(a ? "div" : "body")), (i = { visibility: "hidden", width: 0, height: 0, border: 0, margin: 0, background: "none" }), a && t.extend(i, { position: "absolute", left: "-1000px", top: "-1000px" });
                for (o in i) e.style[o] = i[o];
                e.appendChild(s),
                    (n = a || document.documentElement),
                    n.insertBefore(e, n.firstChild),
                    (s.style.cssText = "position: absolute; left: 10.7432222px;"),
                    (r = t(s).offset().left),
                    (t.support.offsetFractions = r > 10 && 11 > r),
                    (e.innerHTML = ""),
                    n.removeChild(e);
            })();
    })(jQuery),
    (function (t, e) {
        function n(t) {
            return parseInt(t, 10) || 0;
        }
        function i(t) {
            return !isNaN(parseInt(t, 10));
        }
        t.widget("ui.resizable", t.ui.mouse, {
            version: "1.10.3",
            widgetEventPrefix: "resize",
            options: {
                alsoResize: !1,
                animate: !1,
                animateDuration: "slow",
                animateEasing: "swing",
                aspectRatio: !1,
                autoHide: !1,
                containment: !1,
                ghost: !1,
                grid: !1,
                handles: "e,s,se",
                helper: !1,
                maxHeight: null,
                maxWidth: null,
                minHeight: 10,
                minWidth: 10,
                zIndex: 90,
                resize: null,
                start: null,
                stop: null,
            },
            _create: function () {
                var e,
                    n,
                    i,
                    r,
                    o,
                    a = this,
                    s = this.options;
                if (
                    (this.element.addClass("ui-resizable"),
                    t.extend(this, {
                        _aspectRatio: !!s.aspectRatio,
                        aspectRatio: s.aspectRatio,
                        originalElement: this.element,
                        _proportionallyResizeElements: [],
                        _helper: s.helper || s.ghost || s.animate ? s.helper || "ui-resizable-helper" : null,
                    }),
                    this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) &&
                        (this.element.wrap(
                            t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                                position: this.element.css("position"),
                                width: this.element.outerWidth(),
                                height: this.element.outerHeight(),
                                top: this.element.css("top"),
                                left: this.element.css("left"),
                            })
                        ),
                        (this.element = this.element.parent().data("ui-resizable", this.element.data("ui-resizable"))),
                        (this.elementIsWrapper = !0),
                        this.element.css({
                            marginLeft: this.originalElement.css("marginLeft"),
                            marginTop: this.originalElement.css("marginTop"),
                            marginRight: this.originalElement.css("marginRight"),
                            marginBottom: this.originalElement.css("marginBottom"),
                        }),
                        this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0 }),
                        (this.originalResizeStyle = this.originalElement.css("resize")),
                        this.originalElement.css("resize", "none"),
                        this._proportionallyResizeElements.push(this.originalElement.css({ position: "static", zoom: 1, display: "block" })),
                        this.originalElement.css({ margin: this.originalElement.css("margin") }),
                        this._proportionallyResize()),
                    (this.handles =
                        s.handles ||
                        (t(".ui-resizable-handle", this.element).length
                            ? { n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw" }
                            : "e,s,se")),
                    this.handles.constructor === String)
                )
                    for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), e = this.handles.split(","), this.handles = {}, n = 0; n < e.length; n++)
                        (i = t.trim(e[n])),
                            (o = "ui-resizable-" + i),
                            (r = t("<div class='ui-resizable-handle " + o + "'></div>")),
                            r.css({ zIndex: s.zIndex }),
                            "se" === i && r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),
                            (this.handles[i] = ".ui-resizable-" + i),
                            this.element.append(r);
                (this._renderAxis = function (e) {
                    var n, i, r, o;
                    e = e || this.element;
                    for (n in this.handles)
                        this.handles[n].constructor === String && (this.handles[n] = t(this.handles[n], this.element).show()),
                            this.elementIsWrapper &&
                                this.originalElement[0].nodeName.match(/textarea|input|select|button/i) &&
                                ((i = t(this.handles[n], this.element)),
                                (o = /sw|ne|nw|se|n|s/.test(n) ? i.outerHeight() : i.outerWidth()),
                                (r = ["padding", /ne|nw|n/.test(n) ? "Top" : /se|sw|s/.test(n) ? "Bottom" : /^e$/.test(n) ? "Right" : "Left"].join("")),
                                e.css(r, o),
                                this._proportionallyResize()),
                            t(this.handles[n]).length;
                }),
                    this._renderAxis(this.element),
                    (this._handles = t(".ui-resizable-handle", this.element).disableSelection()),
                    this._handles.mouseover(function () {
                        a.resizing || (this.className && (r = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), (a.axis = r && r[1] ? r[1] : "se"));
                    }),
                    s.autoHide &&
                        (this._handles.hide(),
                        t(this.element)
                            .addClass("ui-resizable-autohide")
                            .mouseenter(function () {
                                s.disabled || (t(this).removeClass("ui-resizable-autohide"), a._handles.show());
                            })
                            .mouseleave(function () {
                                s.disabled || a.resizing || (t(this).addClass("ui-resizable-autohide"), a._handles.hide());
                            })),
                    this._mouseInit();
            },
            _destroy: function () {
                this._mouseDestroy();
                var e,
                    n = function (e) {
                        t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
                    };
                return (
                    this.elementIsWrapper &&
                        (n(this.element), (e = this.element), this.originalElement.css({ position: e.css("position"), width: e.outerWidth(), height: e.outerHeight(), top: e.css("top"), left: e.css("left") }).insertAfter(e), e.remove()),
                    this.originalElement.css("resize", this.originalResizeStyle),
                    n(this.originalElement),
                    this
                );
            },
            _mouseCapture: function (e) {
                var n,
                    i,
                    r = !1;
                for (n in this.handles) (i = t(this.handles[n])[0]), (i === e.target || t.contains(i, e.target)) && (r = !0);
                return !this.options.disabled && r;
            },
            _mouseStart: function (e) {
                var i,
                    r,
                    o,
                    a = this.options,
                    s = this.element.position(),
                    l = this.element;
                return (
                    (this.resizing = !0),
                    /absolute/.test(l.css("position")) ? l.css({ position: "absolute", top: l.css("top"), left: l.css("left") }) : l.is(".ui-draggable") && l.css({ position: "absolute", top: s.top, left: s.left }),
                    this._renderProxy(),
                    (i = n(this.helper.css("left"))),
                    (r = n(this.helper.css("top"))),
                    a.containment && ((i += t(a.containment).scrollLeft() || 0), (r += t(a.containment).scrollTop() || 0)),
                    (this.offset = this.helper.offset()),
                    (this.position = { left: i, top: r }),
                    (this.size = this._helper ? { width: l.outerWidth(), height: l.outerHeight() } : { width: l.width(), height: l.height() }),
                    (this.originalSize = this._helper ? { width: l.outerWidth(), height: l.outerHeight() } : { width: l.width(), height: l.height() }),
                    (this.originalPosition = { left: i, top: r }),
                    (this.sizeDiff = { width: l.outerWidth() - l.width(), height: l.outerHeight() - l.height() }),
                    (this.originalMousePosition = { left: e.pageX, top: e.pageY }),
                    (this.aspectRatio = "number" == typeof a.aspectRatio ? a.aspectRatio : this.originalSize.width / this.originalSize.height || 1),
                    (o = t(".ui-resizable-" + this.axis).css("cursor")),
                    t("body").css("cursor", "auto" === o ? this.axis + "-resize" : o),
                    l.addClass("ui-resizable-resizing"),
                    this._propagate("start", e),
                    !0
                );
            },
            _mouseDrag: function (e) {
                var n,
                    i = this.helper,
                    r = {},
                    o = this.originalMousePosition,
                    a = this.axis,
                    s = this.position.top,
                    l = this.position.left,
                    c = this.size.width,
                    u = this.size.height,
                    d = e.pageX - o.left || 0,
                    p = e.pageY - o.top || 0,
                    h = this._change[a];
                return h
                    ? ((n = h.apply(this, [e, d, p])),
                      this._updateVirtualBoundaries(e.shiftKey),
                      (this._aspectRatio || e.shiftKey) && (n = this._updateRatio(n, e)),
                      (n = this._respectSize(n, e)),
                      this._updateCache(n),
                      this._propagate("resize", e),
                      this.position.top !== s && (r.top = this.position.top + "px"),
                      this.position.left !== l && (r.left = this.position.left + "px"),
                      this.size.width !== c && (r.width = this.size.width + "px"),
                      this.size.height !== u && (r.height = this.size.height + "px"),
                      i.css(r),
                      !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(),
                      t.isEmptyObject(r) || this._trigger("resize", e, this.ui()),
                      !1)
                    : !1;
            },
            _mouseStop: function (e) {
                this.resizing = !1;
                var n,
                    i,
                    r,
                    o,
                    a,
                    s,
                    l,
                    c = this.options,
                    u = this;
                return (
                    this._helper &&
                        ((n = this._proportionallyResizeElements),
                        (i = n.length && /textarea/i.test(n[0].nodeName)),
                        (r = i && t.ui.hasScroll(n[0], "left") ? 0 : u.sizeDiff.height),
                        (o = i ? 0 : u.sizeDiff.width),
                        (a = { width: u.helper.width() - o, height: u.helper.height() - r }),
                        (s = parseInt(u.element.css("left"), 10) + (u.position.left - u.originalPosition.left) || null),
                        (l = parseInt(u.element.css("top"), 10) + (u.position.top - u.originalPosition.top) || null),
                        c.animate || this.element.css(t.extend(a, { top: l, left: s })),
                        u.helper.height(u.size.height),
                        u.helper.width(u.size.width),
                        this._helper && !c.animate && this._proportionallyResize()),
                    t("body").css("cursor", "auto"),
                    this.element.removeClass("ui-resizable-resizing"),
                    this._propagate("stop", e),
                    this._helper && this.helper.remove(),
                    !1
                );
            },
            _updateVirtualBoundaries: function (t) {
                var e,
                    n,
                    r,
                    o,
                    a,
                    s = this.options;
                (a = { minWidth: i(s.minWidth) ? s.minWidth : 0, maxWidth: i(s.maxWidth) ? s.maxWidth : 1 / 0, minHeight: i(s.minHeight) ? s.minHeight : 0, maxHeight: i(s.maxHeight) ? s.maxHeight : 1 / 0 }),
                    (this._aspectRatio || t) &&
                        ((e = a.minHeight * this.aspectRatio),
                        (r = a.minWidth / this.aspectRatio),
                        (n = a.maxHeight * this.aspectRatio),
                        (o = a.maxWidth / this.aspectRatio),
                        e > a.minWidth && (a.minWidth = e),
                        r > a.minHeight && (a.minHeight = r),
                        n < a.maxWidth && (a.maxWidth = n),
                        o < a.maxHeight && (a.maxHeight = o)),
                    (this._vBoundaries = a);
            },
            _updateCache: function (t) {
                (this.offset = this.helper.offset()), i(t.left) && (this.position.left = t.left), i(t.top) && (this.position.top = t.top), i(t.height) && (this.size.height = t.height), i(t.width) && (this.size.width = t.width);
            },
            _updateRatio: function (t) {
                var e = this.position,
                    n = this.size,
                    r = this.axis;
                return (
                    i(t.height) ? (t.width = t.height * this.aspectRatio) : i(t.width) && (t.height = t.width / this.aspectRatio),
                    "sw" === r && ((t.left = e.left + (n.width - t.width)), (t.top = null)),
                    "nw" === r && ((t.top = e.top + (n.height - t.height)), (t.left = e.left + (n.width - t.width))),
                    t
                );
            },
            _respectSize: function (t) {
                var e = this._vBoundaries,
                    n = this.axis,
                    r = i(t.width) && e.maxWidth && e.maxWidth < t.width,
                    o = i(t.height) && e.maxHeight && e.maxHeight < t.height,
                    a = i(t.width) && e.minWidth && e.minWidth > t.width,
                    s = i(t.height) && e.minHeight && e.minHeight > t.height,
                    l = this.originalPosition.left + this.originalSize.width,
                    c = this.position.top + this.size.height,
                    u = /sw|nw|w/.test(n),
                    d = /nw|ne|n/.test(n);
                return (
                    a && (t.width = e.minWidth),
                    s && (t.height = e.minHeight),
                    r && (t.width = e.maxWidth),
                    o && (t.height = e.maxHeight),
                    a && u && (t.left = l - e.minWidth),
                    r && u && (t.left = l - e.maxWidth),
                    s && d && (t.top = c - e.minHeight),
                    o && d && (t.top = c - e.maxHeight),
                    t.width || t.height || t.left || !t.top ? t.width || t.height || t.top || !t.left || (t.left = null) : (t.top = null),
                    t
                );
            },
            _proportionallyResize: function () {
                if (this._proportionallyResizeElements.length) {
                    var t,
                        e,
                        n,
                        i,
                        r,
                        o = this.helper || this.element;
                    for (t = 0; t < this._proportionallyResizeElements.length; t++) {
                        if (((r = this._proportionallyResizeElements[t]), !this.borderDif))
                            for (
                                this.borderDif = [],
                                    n = [r.css("borderTopWidth"), r.css("borderRightWidth"), r.css("borderBottomWidth"), r.css("borderLeftWidth")],
                                    i = [r.css("paddingTop"), r.css("paddingRight"), r.css("paddingBottom"), r.css("paddingLeft")],
                                    e = 0;
                                e < n.length;
                                e++
                            )
                                this.borderDif[e] = (parseInt(n[e], 10) || 0) + (parseInt(i[e], 10) || 0);
                        r.css({ height: o.height() - this.borderDif[0] - this.borderDif[2] || 0, width: o.width() - this.borderDif[1] - this.borderDif[3] || 0 });
                    }
                }
            },
            _renderProxy: function () {
                var e = this.element,
                    n = this.options;
                (this.elementOffset = e.offset()),
                    this._helper
                        ? ((this.helper = this.helper || t("<div style='overflow:hidden;'></div>")),
                          this.helper
                              .addClass(this._helper)
                              .css({ width: this.element.outerWidth() - 1, height: this.element.outerHeight() - 1, position: "absolute", left: this.elementOffset.left + "px", top: this.elementOffset.top + "px", zIndex: ++n.zIndex }),
                          this.helper.appendTo("body").disableSelection())
                        : (this.helper = this.element);
            },
            _change: {
                e: function (t, e) {
                    return { width: this.originalSize.width + e };
                },
                w: function (t, e) {
                    var n = this.originalSize,
                        i = this.originalPosition;
                    return { left: i.left + e, width: n.width - e };
                },
                n: function (t, e, n) {
                    var i = this.originalSize,
                        r = this.originalPosition;
                    return { top: r.top + n, height: i.height - n };
                },
                s: function (t, e, n) {
                    return { height: this.originalSize.height + n };
                },
                se: function (e, n, i) {
                    return t.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [e, n, i]));
                },
                sw: function (e, n, i) {
                    return t.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [e, n, i]));
                },
                ne: function (e, n, i) {
                    return t.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [e, n, i]));
                },
                nw: function (e, n, i) {
                    return t.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [e, n, i]));
                },
            },
            _propagate: function (e, n) {
                t.ui.plugin.call(this, e, [n, this.ui()]), "resize" !== e && this._trigger(e, n, this.ui());
            },
            plugins: {},
            ui: function () {
                return { originalElement: this.originalElement, element: this.element, helper: this.helper, position: this.position, size: this.size, originalSize: this.originalSize, originalPosition: this.originalPosition };
            },
        }),
            t.ui.plugin.add("resizable", "animate", {
                stop: function (e) {
                    var n = t(this).data("ui-resizable"),
                        i = n.options,
                        r = n._proportionallyResizeElements,
                        o = r.length && /textarea/i.test(r[0].nodeName),
                        a = o && t.ui.hasScroll(r[0], "left") ? 0 : n.sizeDiff.height,
                        s = o ? 0 : n.sizeDiff.width,
                        l = { width: n.size.width - s, height: n.size.height - a },
                        c = parseInt(n.element.css("left"), 10) + (n.position.left - n.originalPosition.left) || null,
                        u = parseInt(n.element.css("top"), 10) + (n.position.top - n.originalPosition.top) || null;
                    n.element.animate(t.extend(l, u && c ? { top: u, left: c } : {}), {
                        duration: i.animateDuration,
                        easing: i.animateEasing,
                        step: function () {
                            var i = { width: parseInt(n.element.css("width"), 10), height: parseInt(n.element.css("height"), 10), top: parseInt(n.element.css("top"), 10), left: parseInt(n.element.css("left"), 10) };
                            r && r.length && t(r[0]).css({ width: i.width, height: i.height }), n._updateCache(i), n._propagate("resize", e);
                        },
                    });
                },
            }),
            t.ui.plugin.add("resizable", "containment", {
                start: function () {
                    var e,
                        i,
                        r,
                        o,
                        a,
                        s,
                        l,
                        c = t(this).data("ui-resizable"),
                        u = c.options,
                        d = c.element,
                        p = u.containment,
                        h = p instanceof t ? p.get(0) : /parent/.test(p) ? d.parent().get(0) : p;
                    h &&
                        ((c.containerElement = t(h)),
                        /document/.test(p) || p === document
                            ? ((c.containerOffset = { left: 0, top: 0 }),
                              (c.containerPosition = { left: 0, top: 0 }),
                              (c.parentData = { element: t(document), left: 0, top: 0, width: t(document).width(), height: t(document).height() || document.body.parentNode.scrollHeight }))
                            : ((e = t(h)),
                              (i = []),
                              t(["Top", "Right", "Left", "Bottom"]).each(function (t, r) {
                                  i[t] = n(e.css("padding" + r));
                              }),
                              (c.containerOffset = e.offset()),
                              (c.containerPosition = e.position()),
                              (c.containerSize = { height: e.innerHeight() - i[3], width: e.innerWidth() - i[1] }),
                              (r = c.containerOffset),
                              (o = c.containerSize.height),
                              (a = c.containerSize.width),
                              (s = t.ui.hasScroll(h, "left") ? h.scrollWidth : a),
                              (l = t.ui.hasScroll(h) ? h.scrollHeight : o),
                              (c.parentData = { element: h, left: r.left, top: r.top, width: s, height: l })));
                },
                resize: function (e) {
                    var n,
                        i,
                        r,
                        o,
                        a = t(this).data("ui-resizable"),
                        s = a.options,
                        l = a.containerOffset,
                        c = a.position,
                        u = a._aspectRatio || e.shiftKey,
                        d = { top: 0, left: 0 },
                        p = a.containerElement;
                    p[0] !== document && /static/.test(p.css("position")) && (d = l),
                        c.left < (a._helper ? l.left : 0) &&
                            ((a.size.width = a.size.width + (a._helper ? a.position.left - l.left : a.position.left - d.left)), u && (a.size.height = a.size.width / a.aspectRatio), (a.position.left = s.helper ? l.left : 0)),
                        c.top < (a._helper ? l.top : 0) &&
                            ((a.size.height = a.size.height + (a._helper ? a.position.top - l.top : a.position.top)), u && (a.size.width = a.size.height * a.aspectRatio), (a.position.top = a._helper ? l.top : 0)),
                        (a.offset.left = a.parentData.left + a.position.left),
                        (a.offset.top = a.parentData.top + a.position.top),
                        (n = Math.abs((a._helper ? a.offset.left - d.left : a.offset.left - d.left) + a.sizeDiff.width)),
                        (i = Math.abs((a._helper ? a.offset.top - d.top : a.offset.top - l.top) + a.sizeDiff.height)),
                        (r = a.containerElement.get(0) === a.element.parent().get(0)),
                        (o = /relative|absolute/.test(a.containerElement.css("position"))),
                        r && o && (n -= a.parentData.left),
                        n + a.size.width >= a.parentData.width && ((a.size.width = a.parentData.width - n), u && (a.size.height = a.size.width / a.aspectRatio)),
                        i + a.size.height >= a.parentData.height && ((a.size.height = a.parentData.height - i), u && (a.size.width = a.size.height * a.aspectRatio));
                },
                stop: function () {
                    var e = t(this).data("ui-resizable"),
                        n = e.options,
                        i = e.containerOffset,
                        r = e.containerPosition,
                        o = e.containerElement,
                        a = t(e.helper),
                        s = a.offset(),
                        l = a.outerWidth() - e.sizeDiff.width,
                        c = a.outerHeight() - e.sizeDiff.height;
                    e._helper && !n.animate && /relative/.test(o.css("position")) && t(this).css({ left: s.left - r.left - i.left, width: l, height: c }),
                        e._helper && !n.animate && /static/.test(o.css("position")) && t(this).css({ left: s.left - r.left - i.left, width: l, height: c });
                },
            }),
            t.ui.plugin.add("resizable", "alsoResize", {
                start: function () {
                    var e = t(this).data("ui-resizable"),
                        n = e.options,
                        i = function (e) {
                            t(e).each(function () {
                                var e = t(this);
                                e.data("ui-resizable-alsoresize", { width: parseInt(e.width(), 10), height: parseInt(e.height(), 10), left: parseInt(e.css("left"), 10), top: parseInt(e.css("top"), 10) });
                            });
                        };
                    "object" != typeof n.alsoResize || n.alsoResize.parentNode
                        ? i(n.alsoResize)
                        : n.alsoResize.length
                        ? ((n.alsoResize = n.alsoResize[0]), i(n.alsoResize))
                        : t.each(n.alsoResize, function (t) {
                              i(t);
                          });
                },
                resize: function (e, n) {
                    var i = t(this).data("ui-resizable"),
                        r = i.options,
                        o = i.originalSize,
                        a = i.originalPosition,
                        s = { height: i.size.height - o.height || 0, width: i.size.width - o.width || 0, top: i.position.top - a.top || 0, left: i.position.left - a.left || 0 },
                        l = function (e, i) {
                            t(e).each(function () {
                                var e = t(this),
                                    r = t(this).data("ui-resizable-alsoresize"),
                                    o = {},
                                    a = i && i.length ? i : e.parents(n.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                                t.each(a, function (t, e) {
                                    var n = (r[e] || 0) + (s[e] || 0);
                                    n && n >= 0 && (o[e] = n || null);
                                }),
                                    e.css(o);
                            });
                        };
                    "object" != typeof r.alsoResize || r.alsoResize.nodeType
                        ? l(r.alsoResize)
                        : t.each(r.alsoResize, function (t, e) {
                              l(t, e);
                          });
                },
                stop: function () {
                    t(this).removeData("resizable-alsoresize");
                },
            }),
            t.ui.plugin.add("resizable", "ghost", {
                start: function () {
                    var e = t(this).data("ui-resizable"),
                        n = e.options,
                        i = e.size;
                    (e.ghost = e.originalElement.clone()),
                        e.ghost
                            .css({ opacity: 0.25, display: "block", position: "relative", height: i.height, width: i.width, margin: 0, left: 0, top: 0 })
                            .addClass("ui-resizable-ghost")
                            .addClass("string" == typeof n.ghost ? n.ghost : ""),
                        e.ghost.appendTo(e.helper);
                },
                resize: function () {
                    var e = t(this).data("ui-resizable");
                    e.ghost && e.ghost.css({ position: "relative", height: e.size.height, width: e.size.width });
                },
                stop: function () {
                    var e = t(this).data("ui-resizable");
                    e.ghost && e.helper && e.helper.get(0).removeChild(e.ghost.get(0));
                },
            }),
            t.ui.plugin.add("resizable", "grid", {
                resize: function () {
                    var e = t(this).data("ui-resizable"),
                        n = e.options,
                        i = e.size,
                        r = e.originalSize,
                        o = e.originalPosition,
                        a = e.axis,
                        s = "number" == typeof n.grid ? [n.grid, n.grid] : n.grid,
                        l = s[0] || 1,
                        c = s[1] || 1,
                        u = Math.round((i.width - r.width) / l) * l,
                        d = Math.round((i.height - r.height) / c) * c,
                        p = r.width + u,
                        h = r.height + d,
                        f = n.maxWidth && n.maxWidth < p,
                        m = n.maxHeight && n.maxHeight < h,
                        v = n.minWidth && n.minWidth > p,
                        g = n.minHeight && n.minHeight > h;
                    (n.grid = s),
                        v && (p += l),
                        g && (h += c),
                        f && (p -= l),
                        m && (h -= c),
                        /^(se|s|e)$/.test(a)
                            ? ((e.size.width = p), (e.size.height = h))
                            : /^(ne)$/.test(a)
                            ? ((e.size.width = p), (e.size.height = h), (e.position.top = o.top - d))
                            : /^(sw)$/.test(a)
                            ? ((e.size.width = p), (e.size.height = h), (e.position.left = o.left - u))
                            : ((e.size.width = p), (e.size.height = h), (e.position.top = o.top - d), (e.position.left = o.left - u));
                },
            });
    })(jQuery),
    (ty.user = {
        updateProfile: function (t, e) {
            var n = ty.rootScope,
                i = n.currentUser;
            return i ? ((n.currentUser.profile = n.currentUser.profile || {}), (n.currentUser.profile[t] = e), void ty.put("user", n.currentUser.profile)) : void 0;
        },
    }),
    (ty.Media = function () {
        _.bindAll(this), (this.channels = { bgm1: [] });
    }),
    (ty.Media.prototype.play = function (t, e) {
        var n = this,
            i = this.channels[t];
        if (i.length > 0) {
            var r = $("#file-" + i[0]),
                o = r[0];
            o.paused && o.play(),
                e
                    ? r.attr("loop", "loop")
                    : (r.removeAttr("loop"),
                      o.addEventListener("ended", function () {
                          n.channels[t].shift(), n.play(t);
                      }));
        }
    }),
    (ty.Media.prototype.playnow = function (t) {
        var e;
        t.mp3 && new Audio().canPlayType("audio/mpeg") ? (e = new Audio(t.mp3)) : t.ogg ? (e = new Audio(t.ogg)) : t.wav && (e = new Audio(t.wav)), (e.volume = 0.5), t.volume && (e.volume = t.volume), e.play();
    }),
    (ty.Media.prototype.skip = function (t, e) {
        var n = this,
            i = this.channels[t];
        if (i.length > 0) {
            var r = $("#file-" + i[0])[0];
            r.pause(), n.channels[t].shift(), n.play(t, e);
        }
    }),
    (ty.Media.prototype.pause = function (t) {
        var e = this.channels[t];
        if (e.length > 0) {
            var n = $("#file-" + e[0])[0];
            n.pause();
        }
    }),
    (ty.media = new ty.Media()),
    (ty.setBubble = function (t, e, n) {
        (!n || document.hidden || document.mozHidden || document.webkitHidden || document.msHidden) && ((t = t || 1), (this.num = this.num || 0), void 0 != e ? (this.num = e) : (this.num = e || this.num + t), Tinycon.setBubble(this.num));
    }),
    pageVisibility &&
        document.addEventListener(pageVisibility.replace(/[H|h]idden/, "") + "visibilitychange", function () {
            ty.setBubble(0, 0), Tinycon.reset();
        }),
    (ty.notification = {}),
    (ty.notification.send = function () {}),
    window.webkitNotifications &&
        ((ty.notification = window.webkitNotifications),
        (ty.notification.send = function (t, e, n) {
            var i;
            if (((i = ty.settings.modules.desktopNotification.img), pageVisibility && 0 == window.webkitNotifications.checkPermission())) {
                var r = webkitNotifications.createNotification(i, t, e);
                r.show(),
                    (r.ondisplay = function () {
                        setTimeout(function () {
                            r.cancel();
                        }, 5e3);
                    });
            }
        })),
    angular.module("tydai", ["ngSanitize", "ngAnimate", "watchFighers", "pasvaz.bindonce", "analytics", "ui", "ui.bootstrap", "ui.router", "user.loginMenu", "realtime"]),
    (ty.checkIsAuthor = function () {
        var t = ty.rootScope;
        return t.currentUser && t.story
            ? t.currentUser && t.story && t.story.u && -1 != _.pluck(t.story.u, "_id").indexOf(t.currentUser._id)
                ? !0
                : t.currentUser && t.story && t.story.u2 && -1 != _.pluck(t.story.u2, "_id").indexOf(t.currentUser._id)
                ? !0
                : !1
            : !1;
    }),
    (ty.imageURLParser = function (t, e, n, i) {
        return t
            ? ("object" == typeof t && (t = t[0]),
              e && n
                  ? -1 != t.indexOf("www.filepicker.io")
                      ? i
                          ? t.replace(/filepicker\.io\/api\/file\/(\w+)/g, "filepicker.io/api/file/$1/convert?h=" + n + "&w=" + e + "&fit=max")
                          : t.replace(/filepicker\.io\/api\/file\/(\w+)/g, "filepicker.io/api/file/$1/convert?h=" + n + "&w=" + e + "&fit=crop")
                      : i
                      ? t.replace(/(\w+)\.cloudfront.net/g, "cdn.fiction.live/h" + n + "-w" + e)
                      : t.replace(/(\w+)\.cloudfront.net/g, "cdn.fiction.live/h" + n + "-w" + e + "-cfill")
                  : t.replace(/(\w+)\.cloudfront.net/g, ty.settings.cdn))
            : void 0;
    }),
    (ty.centerImage = function (t) {
        (t = ty.sanitize(t)), (t = $("<div />", { html: t }));
        var e = $(t).find("img");
        e.wrap('<div class="imgContainer"></div>'),
            e.each(function () {
                var t = $(this);
                t.attr("src") && ((changed = ty.imageURLParser(t.attr("src"), 800, 600, "nocfill")), t.attr("src", changed));
            });
        var n = t.html();
        return n;
    }),
    (ty.replaceChapterDynamicInputs = function (t, e) {
        if (!t) return t;
        var n = /{\-replace (\w+?)}/g,
            i = /\-{(\w+?)}/g,
            r = /{\-replace \-(capitalized|lowercase|uppercase) (\w+)}/g,
            o = /{\-input (\w+)}/g,
            a = /{\-input (-num|-button) (\w+)( .+?)?}/g,
            s = /{\-set (\w+) (.+?)}/g,
            l = /{\-button (.+?)}/g,
            c = t.match(l);
        c &&
            c.forEach(function (e) {
                var n = e.match(/\-set (\w+) (.+?)}/),
                    i = n[1],
                    r = n[2],
                    o = e.replace(/\-set (\w+) (.+?)}/, ""),
                    a = o.match(/{\-button (.*)/);
                t = t.replace(/{\-button (\w+?) (.+?)}/, "<span class='inStoryButton btn' value='" + r + "' name='" + i + "'>" + a[1] + "</span>");
            });
        var u = t.match(s);
        u &&
            u.forEach(function (n) {
                var i,
                    r = n.match(/{\-set (\w+) (.+?)}/),
                    o = r[2];
                "username" === o
                    ? ty.currentUser && (i = ty.currentUser.username || i)
                    : "userfirstname" === o || "usergivenname" === o
                    ? ty.currentUser && (i = ty.currentUser.givenname || i)
                    : "userfamilyname" === o || "userlastname" === o
                    ? ty.currentUser && (i = ty.currentUser.familyname || i)
                    : "usergender" === o
                    ? ty.currentUser && (i = ty.currentUser.gender || i)
                    : (i = r[2]),
                    i && ("all" === r[1] && (ty.currentStory.storyVars = {}), e ? ty.currentStory.storyVars[r[1]] || (ty.currentStory.storyVars[r[1]] = i) : (ty.currentStory.storyVars[r[1]] = i)),
                    ty.checkIsAuthor() || (t = t.replace(/\s*?{\-set (\w+) (.+?)}\s*?/g, ""));
            });
        var d = t.match(a);
        d &&
            d.forEach(function (e) {
                var n = e.match(/{\-input (-num|-button) (\w+)( .+?)?}/);
                t =
                    "-num" === n[1]
                        ? t.replace(/{\-input (-num|-button) (\w+)( .+?)?}/, "<input type='number' class='inStoryInput autogrow' value='" + ty.currentStory.storyVars[n[2]] + "' name='" + n[2] + "' />")
                        : t.replace(/{\-input (-num|-button) (\w+)( .+?)?}/, "<span type='btn' class='btn' name='" + n[2] + "'>" + ty.currentStory.storyVars[n[3]] + "</span>");
            });
        var p = t.match(o);
        p &&
            p.forEach(function (e) {
                var n = e.match(/{\-input (\w+)}/);
                t = t.replace(/{\-input (\w+)}/, "<input type='text' class='inStoryInput autogrow' value='" + ty.currentStory.storyVars[n[1]] + "' name='" + n[1] + "' />");
            });
        var h = t.match(r);
        h &&
            h.forEach(function (e) {
                var n = e.match(/{\-replace \-(capitalized|lowercase|uppercase) (\w+)}/);
                t = t.replace(/{\-replace \-(capitalized|lowercase|uppercase) (\w+)}/, "<anonkunReplace " + n[1] + " name='" + n[2] + "'>" + ty.currentStory.storyVars[n[2]] + "</anonkunReplace>");
            });
        var f = t.match(n);
        f &&
            f.forEach(function (e) {
                var n = e.match(/{\-replace (\w+)}/);
                t = t.replace(/{\-replace (\w+)}/, "<anonkunReplace name='" + n[1] + "'>" + ty.currentStory.storyVars[n[1]] + "</anonkunReplace>");
            });
        var m = t.match(i);
        return (
            m &&
                m.forEach(function (e) {
                    var n = e.match(/\-{(\w+?)}/);
                    t = t.replace(/\-{(\w+?)}/, "<anonkunReplace name='" + n[1] + "'>" + ty.currentStory.storyVars[n[1]] + "</anonkunReplace>");
                }),
            t
        );
    }),
    (ty.replaceLinksMentions = function (t) {
        if (!t) return t;
        var e = window.location.hostname;
        return (t = t.replace(/@(\w+)/g, '<a href="//' + e + '/user/$1">@$1</a>'));
    }),
    (ty.replaceLinksTags = function (t) {
        if (!t) return t;
        var e = window.location.hostname;
        return (t = t.replace(/#(\w+)/g, '<a href="//' + e + '/$1">#$1</a>'));
    }),
    (ty.customChatSanitize = function (t) {
        return sanitizeHtml(t, { allowedTags: ["u", "p", "ul", "ol", "li", "b", "i", "strong", "em", "strike"], allowedAttributes: { "*": ["name"] } });
    }),
    (ty.contentTransforms = function (t, e) {
        return (t = e ? ty.sanitize(t) : ty.customChatSanitize(t)), (t = ty.replaceLinksTags(t)), (t = ty.replaceLinksMentions(t));
    }),
    angular
        .module("tydai")
        .run([
            "$rootScope",
            "$location",
            function (t, e) {
                $(document).on("mousedown", ".tydai-spoiler", function () {
                    0 == $(this).closest(".fieldEditor").length && $(this).replaceWith($(this).html());
                }),
                    ($.timeago.settings.allowFuture = !0),
                    ($.timeago.settings.strings = {
                        prefixAgo: null,
                        prefixFromNow: null,
                        suffixAgo: "ago",
                        suffixFromNow: "",
                        seconds: "less than a minute",
                        minute: "a minute",
                        minutes: "%d minutes",
                        hour: "an hour",
                        hours: "%d hours",
                        day: "a day",
                        days: "%d days",
                        month: "a month",
                        months: "%d months",
                        year: "a year",
                        years: "%d years",
                        wordSeparator: " ",
                        numbers: [],
                    }),
                    FastClick.attach(document.body),
                    (t.activeLink = function (t) {
                        var n = "active";
                        return e.path() === t ? n : void 0;
                    });
            },
        ])
        .directive("bindHtmlUnsafe", function () {
            return function (t, e, n) {
                var i = function (t) {
                        e.html(t);
                    },
                    r = n.bindHtmlUnsafe;
                t.$watch(r, function (t) {
                    t && i(t);
                });
            };
        })
        .directive("activeLink", [
            "$location",
            function (t) {
                return {
                    restrict: "A",
                    link: function (e, n, i, r) {
                        var o,
                            a = "active";
                        (e.location = t),
                            n.is("a")
                                ? ((o = i.href),
                                  e.$watch("attrs.href", function (e) {
                                      (o = i.href), t.path() === o ? n.addClass(a) : n.removeClass(a);
                                  }))
                                : (o = n.children("a").attr("href")),
                            e.$watch("location.path()", function (t) {
                                o === t ? n.addClass(a) : n.removeClass(a);
                            });
                    },
                };
            },
        ])
        .config([
            "$locationProvider",
            function (t) {
                t.html5Mode(!0);
            },
        ])
        .filter("default", function () {
            return function (t, e) {
                return (out = null == t || void 0 == t || ("" == t && !angular.isNumber(t)) ? e || "" : t);
            };
        })
        .filter("htmlToPlain", function () {
            return function (t) {
                return String(t).replace(/<(?:.|\n)*?>/gm, "");
            };
        })
        .filter("url", function () {
            return function (t) {
                return ty.url(t);
            };
        })
        .filter("imageURLParser", function () {
            return function (t, e, n, i) {
                return ty.imageURLParser(t, e, n, i);
            };
        })
        .filter("formatNumber", function () {
            return function (t, e, n, i) {
                return ty.formatNumber(t, e, n, i);
            };
        })
        .filter("encodeURIComponent", function () {
            return function (t) {
                return encodeURIComponent(encodeURIComponent(t));
            };
        })
        .filter("formatTime", function () {
            return function (t) {
                return ty.formatTime(t);
            };
        })
        .filter("timeago", function () {
            return function (t) {
                return $.timeago(t);
            };
        })
        .directive("ngBlur", [
            "$parse",
            function (t) {
                return function (e, n, i) {
                    var r = t(i.ngBlur);
                    n.bind("blur", function (t) {
                        e.$apply(function () {
                            r(e, { $event: t });
                        });
                    });
                };
            },
        ])
        .directive("pageTitle", [
            "$rootScope",
            function (t) {
                return {
                    restrict: "AE",
                    scope: { pageTitle: "=pageTitle" },
                    link: function (e, n, i) {
                        t.pageTitle = e.pageTitle;
                    },
                };
            },
        ])
        .directive("jadeRepeat", [
            "$rootScope",
            "$location",
            "$compile",
            function (t, e, n) {
                return {
                    restrict: "A",
                    link: function (e, i, r) {
                        function o(o) {
                            ty.t(r.jadeRepeat, { data: o, rootScope: t, scope: e }, function (t) {
                                if (r.jadeCompile) {
                                    var o = n(t);
                                    t = o(e);
                                }
                                i.html(t);
                                var a = e.$parent.$eval(r.postRender);
                                a && a();
                            });
                        }
                        var a;
                        r.jadeRepeatLocation &&
                            e.$watch("location.path()", function (t) {
                                a && o(a);
                            }),
                            r.jadeLoginReload &&
                                t.$on("login", function () {
                                    setTimeout(function () {
                                        a && o(a);
                                    });
                                }),
                            e.$watch(r.jadeRepeatData, function (t) {
                                t && ((a = t), o(t));
                            });
                    },
                };
            },
        ]),
    _.mixin(_.str.exports()),
    (function (t) {
        function e() {
            if (t.fn.ajaxSubmit.debug) {
                var e = "[jquery.form] " + Array.prototype.join.call(arguments, "");
                window.console && window.console.log ? window.console.log(e) : window.opera && window.opera.postError && window.opera.postError(e);
            }
        }
        (t.fn.ajaxSubmit = function (n) {
            function i() {
                function i() {
                    var e = p.attr("target"),
                        n = p.attr("action");
                    o.setAttribute("target", s),
                        "POST" != o.getAttribute("method") && o.setAttribute("method", "POST"),
                        o.getAttribute("action") != a.url && o.setAttribute("action", a.url),
                        a.skipEncodingOverride || p.attr({ encoding: "multipart/form-data", enctype: "multipart/form-data" }),
                        a.timeout &&
                            setTimeout(function () {
                                (h = !0), r();
                            }, a.timeout);
                    var i = [];
                    try {
                        if (a.extraData) for (var u in a.extraData) i.push(t('<input type="hidden" name="' + u + '" value="' + a.extraData[u] + '" />').appendTo(o)[0]);
                        l.appendTo("body"), c.attachEvent ? c.attachEvent("onload", r) : c.addEventListener("load", r, !1), o.submit();
                    } finally {
                        o.setAttribute("action", n), e ? o.setAttribute("target", e) : p.removeAttr("target"), t(i).remove();
                    }
                }
                function r() {
                    if (!u.aborted) {
                        var n = c.contentWindow ? c.contentWindow.document : c.contentDocument ? c.contentDocument : c.document;
                        if (n && n.location.href != a.iframeSrc) {
                            c.detachEvent ? c.detachEvent("onload", r) : c.removeEventListener("load", r, !1);
                            var i = !0;
                            try {
                                if (h) throw "timeout";
                                var o = "xml" == a.dataType || n.XMLDocument || t.isXMLDoc(n);
                                if ((e("isXml=" + o), !o && window.opera && (null == n.body || "" == n.body.innerHTML) && --g)) return e("requeing onLoad callback, DOM not available"), void setTimeout(r, 250);
                                (u.responseText = n.body ? n.body.innerHTML : n.documentElement ? n.documentElement.innerHTML : null),
                                    (u.responseXML = n.XMLDocument ? n.XMLDocument : n),
                                    (u.getResponseHeader = function (t) {
                                        var e = { "content-type": a.dataType };
                                        return e[t];
                                    });
                                var s = /(json|script)/.test(a.dataType);
                                if (s || a.textarea) {
                                    var p = n.getElementsByTagName("textarea")[0];
                                    if (p) u.responseText = p.value;
                                    else if (s) {
                                        var f = n.getElementsByTagName("pre")[0],
                                            m = n.getElementsByTagName("body")[0];
                                        f ? (u.responseText = f.textContent) : m && (u.responseText = m.innerHTML);
                                    }
                                } else "xml" != a.dataType || u.responseXML || null == u.responseText || (u.responseXML = y(u.responseText));
                                v = w(u, a.dataType, a);
                            } catch (b) {
                                e("error caught:", b), (i = !1), (u.error = b), a.error && a.error.call(a.context, u, "error", b), d && t.event.trigger("ajaxError", [u, a, b]);
                            }
                            u.aborted && (e("upload aborted"), (i = !1)),
                                i && (a.success && a.success.call(a.context, v, "success", u), d && t.event.trigger("ajaxSuccess", [u, a])),
                                d && t.event.trigger("ajaxComplete", [u, a]),
                                d && !--t.active && t.event.trigger("ajaxStop"),
                                a.complete && a.complete.call(a.context, u, i ? "success" : "error"),
                                setTimeout(function () {
                                    l.removeData("form-plugin-onload"), l.remove(), (u.responseXML = null);
                                }, 100);
                        }
                    }
                }
                var o = p[0];
                if (t(":input[name=submit],:input[id=submit]", o).length) return void alert('Error: Form elements must not have name or id of "submit".');
                var a = t.extend(!0, {}, t.ajaxSettings, n);
                a.context = a.context || a;
                var s = "jqFormIO" + new Date().getTime(),
                    l = t('<iframe id="' + s + '" name="' + s + '" src="' + a.iframeSrc + '" />'),
                    c = l[0];
                l.css({ position: "absolute", top: "-1000px", left: "-1000px" });
                var u = {
                        aborted: 0,
                        responseText: null,
                        responseXML: null,
                        status: 0,
                        statusText: "n/a",
                        getAllResponseHeaders: function () {},
                        getResponseHeader: function () {},
                        setRequestHeader: function () {},
                        abort: function () {
                            e("aborting upload...");
                            var n = "aborted";
                            (this.aborted = 1),
                                l.attr("src", a.iframeSrc),
                                (u.error = n),
                                a.error && a.error.call(a.context, u, "error", n),
                                d && t.event.trigger("ajaxError", [u, a, n]),
                                a.complete && a.complete.call(a.context, u, "error");
                        },
                    },
                    d = a.global;
                if ((d && !t.active++ && t.event.trigger("ajaxStart"), d && t.event.trigger("ajaxSend", [u, a]), a.beforeSend && a.beforeSend.call(a.context, u, a) === !1)) return void (a.global && t.active--);
                if (!u.aborted) {
                    var h = 0,
                        f = o.clk;
                    if (f) {
                        var m = f.name;
                        m && !f.disabled && ((a.extraData = a.extraData || {}), (a.extraData[m] = f.value), "image" == f.type && ((a.extraData[m + ".x"] = o.clk_x), (a.extraData[m + ".y"] = o.clk_y)));
                    }
                    a.forceSync ? i() : setTimeout(i, 10);
                    var v,
                        g = 50,
                        y =
                            t.parseXML ||
                            function (t, e) {
                                return (
                                    window.ActiveXObject ? ((e = new ActiveXObject("Microsoft.XMLDOM")), (e.async = "false"), e.loadXML(t)) : (e = new DOMParser().parseFromString(t, "text/xml")),
                                    e && e.documentElement && "parsererror" != e.documentElement.nodeName ? e : null
                                );
                            },
                        b =
                            t.parseJSON ||
                            function (t) {
                                return window.eval("(" + t + ")");
                            },
                        w = function (e, n, i) {
                            var r = e.getResponseHeader("content-type") || "",
                                o = "xml" === n || (!n && r.indexOf("xml") >= 0),
                                a = o ? e.responseXML : e.responseText;
                            return (
                                o && "parsererror" === a.documentElement.nodeName && t.error && t.error("parsererror"),
                                i && i.dataFilter && (a = i.dataFilter(a, n)),
                                "string" == typeof a && ("json" === n || (!n && r.indexOf("json") >= 0) ? (a = b(a)) : ("script" === n || (!n && r.indexOf("javascript") >= 0)) && t.globalEval(a)),
                                a
                            );
                        };
                }
            }
            if (!this.length) return e("ajaxSubmit: skipping submit process - no element selected"), this;
            "function" == typeof n && (n = { success: n });
            var r = this.attr("action"),
                o = "string" == typeof r ? t.trim(r) : "";
            o && (o = (o.match(/^([^#]+)/) || [])[1]),
                (o = o || window.location.href || ""),
                (n = t.extend(!0, { url: o, type: this[0].getAttribute("method") || "GET", iframeSrc: /^https/i.test(window.location.href || "") ? "javascript:false" : "about:blank" }, n));
            var a = {};
            if ((this.trigger("form-pre-serialize", [this, n, a]), a.veto)) return e("ajaxSubmit: submit vetoed via form-pre-serialize trigger"), this;
            if (n.beforeSerialize && n.beforeSerialize(this, n) === !1) return e("ajaxSubmit: submit aborted via beforeSerialize callback"), this;
            var s,
                l,
                c = this.formToArray(n.semantic);
            if (n.data) {
                n.extraData = n.data;
                for (s in n.data)
                    if (n.data[s] instanceof Array) for (var u in n.data[s]) c.push({ name: s, value: n.data[s][u] });
                    else (l = n.data[s]), (l = t.isFunction(l) ? l() : l), c.push({ name: s, value: l });
            }
            if (n.beforeSubmit && n.beforeSubmit(c, this, n) === !1) return e("ajaxSubmit: submit aborted via beforeSubmit callback"), this;
            if ((this.trigger("form-submit-validate", [c, this, n, a]), a.veto)) return e("ajaxSubmit: submit vetoed via form-submit-validate trigger"), this;
            var d = t.param(c);
            "GET" == n.type.toUpperCase() ? ((n.url += (n.url.indexOf("?") >= 0 ? "&" : "?") + d), (n.data = null)) : (n.data = d);
            var p = this,
                h = [];
            if (
                (n.resetForm &&
                    h.push(function () {
                        p.resetForm();
                    }),
                n.clearForm &&
                    h.push(function () {
                        p.clearForm();
                    }),
                !n.dataType && n.target)
            ) {
                var f = n.success || function () {};
                h.push(function (e) {
                    var i = n.replaceTarget ? "replaceWith" : "html";
                    t(n.target)[i](e).each(f, arguments);
                });
            } else n.success && h.push(n.success);
            n.success = function (t, e, i) {
                for (var r = n.context || n, o = 0, a = h.length; a > o; o++) h[o].apply(r, [t, e, i || p, p]);
            };
            var m = t("input:file", this).length > 0,
                v = "multipart/form-data",
                g = p.attr("enctype") == v || p.attr("encoding") == v;
            return n.iframe !== !1 && (m || n.iframe || g) ? (n.closeKeepAlive ? t.get(n.closeKeepAlive, i) : i()) : t.ajax(n), this.trigger("form-submit-notify", [this, n]), this;
        }),
            (t.fn.ajaxForm = function (n) {
                if (0 === this.length) {
                    var i = { s: this.selector, c: this.context };
                    return !t.isReady && i.s
                        ? (e("DOM not ready, queuing ajaxForm"),
                          t(function () {
                              t(i.s, i.c).ajaxForm(n);
                          }),
                          this)
                        : (e("terminating; zero elements found by selector" + (t.isReady ? "" : " (DOM not ready)")), this);
                }
                return this.ajaxFormUnbind()
                    .bind("submit.form-plugin", function (e) {
                        e.isDefaultPrevented() || (e.preventDefault(), t(this).ajaxSubmit(n));
                    })
                    .bind("click.form-plugin", function (e) {
                        var n = e.target,
                            i = t(n);
                        if (!i.is(":submit,input:image")) {
                            var r = i.closest(":submit");
                            if (0 == r.length) return;
                            n = r[0];
                        }
                        var o = this;
                        if (((o.clk = n), "image" == n.type))
                            if (void 0 != e.offsetX) (o.clk_x = e.offsetX), (o.clk_y = e.offsetY);
                            else if ("function" == typeof t.fn.offset) {
                                var a = i.offset();
                                (o.clk_x = e.pageX - a.left), (o.clk_y = e.pageY - a.top);
                            } else (o.clk_x = e.pageX - n.offsetLeft), (o.clk_y = e.pageY - n.offsetTop);
                        setTimeout(function () {
                            o.clk = o.clk_x = o.clk_y = null;
                        }, 100);
                    });
            }),
            (t.fn.ajaxFormUnbind = function () {
                return this.unbind("submit.form-plugin click.form-plugin");
            }),
            (t.fn.formToArray = function (e) {
                var n = [];
                if (0 === this.length) return n;
                var i = this[0],
                    r = e ? i.getElementsByTagName("*") : i.elements;
                if (!r) return n;
                var o, a, s, l, c, u, d;
                for (o = 0, u = r.length; u > o; o++)
                    if (((c = r[o]), (s = c.name)))
                        if (e && i.clk && "image" == c.type) c.disabled || i.clk != c || (n.push({ name: s, value: t(c).val() }), n.push({ name: s + ".x", value: i.clk_x }, { name: s + ".y", value: i.clk_y }));
                        else if (((l = t.fieldValue(c, !0)), l && l.constructor == Array)) for (a = 0, d = l.length; d > a; a++) n.push({ name: s, value: l[a] });
                        else null !== l && "undefined" != typeof l && n.push({ name: s, value: l });
                if (!e && i.clk) {
                    var p = t(i.clk),
                        h = p[0];
                    (s = h.name), s && !h.disabled && "image" == h.type && (n.push({ name: s, value: p.val() }), n.push({ name: s + ".x", value: i.clk_x }, { name: s + ".y", value: i.clk_y }));
                }
                return n;
            }),
            (t.fn.formSerialize = function (e) {
                return t.param(this.formToArray(e));
            }),
            (t.fn.fieldSerialize = function (e) {
                var n = [];
                return (
                    this.each(function () {
                        var i = this.name;
                        if (i) {
                            var r = t.fieldValue(this, e);
                            if (r && r.constructor == Array) for (var o = 0, a = r.length; a > o; o++) n.push({ name: i, value: r[o] });
                            else null !== r && "undefined" != typeof r && n.push({ name: this.name, value: r });
                        }
                    }),
                    t.param(n)
                );
            }),
            (t.fn.fieldValue = function (e) {
                for (var n = [], i = 0, r = this.length; r > i; i++) {
                    var o = this[i],
                        a = t.fieldValue(o, e);
                    null === a || "undefined" == typeof a || (a.constructor == Array && !a.length) || (a.constructor == Array ? t.merge(n, a) : n.push(a));
                }
                return n;
            }),
            (t.fieldValue = function (e, n) {
                var i = e.name,
                    r = e.type,
                    o = e.tagName.toLowerCase();
                if (
                    (void 0 === n && (n = !0),
                    n && (!i || e.disabled || "reset" == r || "button" == r || (("checkbox" == r || "radio" == r) && !e.checked) || (("submit" == r || "image" == r) && e.form && e.form.clk != e) || ("select" == o && -1 == e.selectedIndex)))
                )
                    return null;
                if ("select" == o) {
                    var a = e.selectedIndex;
                    if (0 > a) return null;
                    for (var s = [], l = e.options, c = "select-one" == r, u = c ? a + 1 : l.length, d = c ? a : 0; u > d; d++) {
                        var p = l[d];
                        if (p.selected) {
                            var h = p.value;
                            if ((h || (h = p.attributes && p.attributes.value && !p.attributes.value.specified ? p.text : p.value), c)) return h;
                            s.push(h);
                        }
                    }
                    return s;
                }
                return t(e).val();
            }),
            (t.fn.clearForm = function () {
                return this.each(function () {
                    t("input,select,textarea", this).clearFields();
                });
            }),
            (t.fn.clearFields = t.fn.clearInputs = function () {
                return this.each(function () {
                    var t = this.type,
                        e = this.tagName.toLowerCase();
                    "text" == t || "password" == t || "textarea" == e ? (this.value = "") : "checkbox" == t || "radio" == t ? (this.checked = !1) : "select" == e && (this.selectedIndex = -1);
                });
            }),
            (t.fn.resetForm = function () {
                return this.each(function () {
                    ("function" == typeof this.reset || ("object" == typeof this.reset && !this.reset.nodeType)) && this.reset();
                });
            }),
            (t.fn.enable = function (t) {
                return (
                    void 0 === t && (t = !0),
                    this.each(function () {
                        this.disabled = !t;
                    })
                );
            }),
            (t.fn.selected = function (e) {
                return (
                    void 0 === e && (e = !0),
                    this.each(function () {
                        var n = this.type;
                        if ("checkbox" == n || "radio" == n) this.checked = e;
                        else if ("option" == this.tagName.toLowerCase()) {
                            var i = t(this).parent("select");
                            e && i[0] && "select-one" == i[0].type && i.find("option").selected(!1), (this.selected = e);
                        }
                    })
                );
            });
    })(jQuery),
    (function (t) {
        var e = function (t) {
            return t === Object(t);
        };
        t.fn.inputAutogrow = function (n) {
            return (
                this.each(function () {
                    var i = t(this);
                    if (i.data("original-width")) var r = i.data("original-width");
                    else {
                        var r = i.width();
                        i.data("original-width", r);
                    }
                    var o = { maxWidth: i.parent().width(), minWidth: r, trailingSpace: 0 };
                    n && e(n) && (o = t.extend(o, n));
                    var a = null,
                        s = t("<span/>")
                            .css({
                                position: "absolute",
                                top: -9999500,
                                left: -99999293,
                                width: "auto",
                                fontSize: i.css("fontSize"),
                                fontFamily: i.css("fontFamily"),
                                fontWeight: i.css("fontWeight"),
                                letterSpacing: i.css("letterSpacing"),
                                textTransform: i.css("textTransform"),
                                whiteSpace: "nowrap",
                                ariaHidden: !0,
                            })
                            .appendTo("body"),
                        l = function (t) {
                            if (a !== (a = i.val()) || "autogrow" === t.type) {
                                null == a && (a = i.attr("placeholder") || ""), s.html(a.replace(/&/g, "&amp;").replace(/\s/g, "&nbsp;").replace(/</g, "&lt;").replace(/>/g, "&gt;"));
                                var e = s.width() + o.trailingSpace,
                                    n = "function" == typeof o.maxWidth ? o.maxWidth() : o.maxWidth;
                                e > n ? (e = n) : e < o.minWidth && (e = o.minWidth), "number" === i.attr("type") && (e += 1), e != i.width() && i.width(e), s.remove();
                            }
                        };
                    l();
                }),
                this
            );
        };
    })(window.jQuery || window.Zepto || window.$),
    angular.module("tydai.ui", []),
    angular.module("tydai.ui").directive("draggableHandle", function () {
        return {
            restrict: "A",
            link: function (t, e, n) {
                if (!ty.responsive.isPhone()) {
                    var i = e[0];
                    "parent" == n.draggableContent && (i = e.parent()[0]);
                    var r = new Draggabilly(i, { handle: n.draggableHandle, containment: "html" });
                    r.on("dragEnd", function (t, e) {
                        r.position.y < 0 && r.setPosition(r.position.x, 0), r.position.y > window.innerHeight - 40 && r.setPosition(r.position.x, window.innerHeight - 40);
                    }),
                        $(i).css({ position: "fixed", margin: "0" });
                }
            },
        };
    }),
    (ty.fields = {}),
    (ty.fieldsRun = function (t, e) {
        for (var n in ty.fields) ty.fields.hasOwnProperty(n) && "function" == typeof ty.fields[n] && ty.fields[n](t, e);
    }),
    (function (t) {
        t.fn.uploadToInput = function (e, n) {
            return this.each(function () {
                var i = t(this);
                if ("init" != i.attr("uploadInit")) {
                    i.attr("uploadInit", "init");
                    var r = Math.floor(999999999 * Math.random());
                    i.attr("dir", "rtl")
                        .focus(function () {
                            i.attr("dir", "ltr");
                        })
                        .blur(function () {
                            i.attr("dir", "rtl");
                        });
                    var o = t(
                            '<form id="upload-' +
                                e +
                                r +
                                '" action="https://upload.fiction.live/api/upload/' +
                                e +
                                '" enctype="multipart/form-data" method="post" class="ty-upload"><input type="file" class="upload noUpdate file" multiple="multiple" id="upload-' +
                                r +
                                '" name="upload"><input type="submit" value="Upload" class="upload noUpdate" style="display:none;"></form>'
                        ),
                        a = function () {
                            var a = t('<iframe id="upload_target-' + e + r + '" name="upload_target-' + e + r + '" style="width:0;height:0;border:0px solid #fff;"></iframe>');
                            o.append(a),
                                o.find("iframe").load(function () {
                                    var e = t(this).contents().find("#url").text();
                                    null != e && "" != e && (i.val(e).trigger("change"), n && n(e));
                                });
                        };
                    i.attr("for", "upload-" + r),
                        o.insertAfter(i),
                        o.bind("submit", function () {
                            document.getElementById("upload-" + e + r).target = "upload_target-" + e + r;
                        }),
                        o.find("input.file").change(function () {
                            "" != t(this).val() && (0 == t("#upload_target-" + e + r).length && a(), t("#upload-" + e + r).submit());
                        });
                }
            });
        };
    })(jQuery),
    (ty.anonkun = {}),
    angular.module("tydai").config([
        "$stateProvider",
        function (t) {
            t.state("standard", {
                views: {
                    main: {
                        templateUrl: "/tmpl/anonkun/standard",
                        controller: [
                            "$scope",
                            "$timeout",
                            function (t, e) {
                                (t.currentChatID = ""),
                                    (t.setCurrentChatID = function (e) {
                                        t.currentChatID;
                                        t.currentChatID = e;
                                    }),
                                    (t.setCurrentThreadHref = function (e) {
                                        t.currentThreadListHref;
                                        t.currentThreadListHref = e;
                                    });
                                var n = window.innerWidth - $("#left").width() - $("#right").width() - 40;
                                t.contentStyle = { width: n + "px" };
                            },
                        ],
                    },
                },
            }),
                t.state("standard.boards", { abstract: !0, views: { sideMenu: { templateUrl: "/tmpl/anonkun/board/left" } } });
        },
    ]),
    (ty.chat.allowed = !0),
    (ty.chat.post = function (t, e) {
        return (
            "string" == typeof t.r && (t.r = [t.r]),
            "join" == t.nt
                ? void ty.post("chat/join", t, function (t) {
                      "function" == typeof e && e(t);
                  })
                : (analytics.track("Chat post", t),
                  "anon" != ty.currentUser && ty.currentUser && ty.currentUser.emails && ty.currentUser.emails[0] && ty.currentUser.emails[0].verified
                      ? void ty.post("node", t, function (t) {
                            "function" == typeof e && e(t);
                        })
                      : void ty.post("storyChat", t, function (t) {
                            "function" == typeof e && e(t);
                        }))
        );
    }),
    ty.chat.directive("chat", [
        "$rootScope",
        "tySubscribe",
        function (t, e) {
            return {
                templateUrl: "/tmpl/chat/chat",
                replace: !0,
                scope: { chatID: "@chat", chatLight: "@chatLight", threading: "@threading", fromBeginning: "@fromBeginning" },
                controller: [
                    "$scope",
                    "$element",
                    "$timeout",
                    "chatWindow",
                    "chatItemDetail",
                    "$modal",
                    function (n, i, r, o, a, s) {
                        function l() {
                            var t = { r: n.chatID, threading: n.threading };
                            return n.chatLog && ((t.lastCT = _.last(n.chatLog).ct), (t.firstCT = _.first(n.chatLog).ct), (t.cpr = n.currentPage)), t;
                        }
                        function c(t, e) {
                            var r = l();
                            (r.page = t),
                                ty.post("chat/page", r, function (r) {
                                    n.fromBeginning || (n.pager = !1),
                                        (n.pageText = "Page " + t),
                                        (n.chatLog = _.sortBy(r, "ct")),
                                        (n.listLoaded = !0),
                                        n.$digest(),
                                        e && e(),
                                        (i.find(".chatLog")[0].scrollTop = 0),
                                        analytics.track("Chat view page", { page: t, _id: n.chatID });
                                });
                        }
                        function u(t) {
                            t && f && f.close();
                        }
                        function d(e) {
                            var r = new Date().getTime();
                            return n.latestWatched
                                ? void (n.latestWatched = e)
                                : ((n.latestWatched = e),
                                  n.$on("childAdded", function (e, o) {
                                      return "post" == o.nt
                                          ? void t.$broadcast("updatePost", o)
                                          : (t.$broadcast("updateChat", o),
                                            n.threading
                                                ? ty.t("chat/chatItemThreading", { chatMsg: o, rootScope: t, scope: n }, function (t) {
                                                      i.find(".chatLog>div>.jadeRepeat").append(t);
                                                  })
                                                : ty.t("chat/chatItem", { chatMsg: o, rootScope: t, scope: n }, function (t) {
                                                      i.find(".jadeRepeat").append(t);
                                                  }),
                                            void ("join" != o.nt && o.ct > r && ty.setBubble(void 0, void 0, !0)));
                                  }),
                                  void n.$on("childChanged", function (e, r) {
                                      if ("post" == r.nt) return void t.$broadcast("updatePost", r);
                                      t.$broadcast("updateChat", r);
                                      var o = i.find('.jadeRepeat .chatMsg[data-id="' + r._id + '"]');
                                      if (r.trash) return void o.hide();
                                      if ((o.show(), r.updateProperties)) {
                                          if (n.threading) {
                                              if (
                                                  ((o = o.children("footer.footer-links").children(".expandThread")),
                                                  o.removeClass("hidden"),
                                                  1 == r.p ? o.text("show " + r.p + " reply") : o.text("show " + r.p + " replies"),
                                                  !o.closest(".chatMsg").find(".replies").hasClass("hasMore") && r.p > o.closest(".chatMsg").find(".replies .logItem").length)
                                              ) {
                                                  var a = $('<div class="btn loadMore dim-font-color small">Load More replies</div>');
                                                  o.closest(".chatMsg").find(".replies").addClass("hasMore").append(a),
                                                      a.click(function () {
                                                          $(this).closest(".chatMsg").find(">.footer-links .expandThread").trigger("click").trigger("click");
                                                      });
                                              }
                                              return;
                                          }
                                          return o.find(".label.replies").removeClass("hidden"), void o.find(".label.replies .value").text(r.p);
                                      }
                                      ty.t("chat/chatItem", { chatMsg: r, rootScope: t, scope: n }, function (t) {
                                          if ("choice" == r.nt) {
                                              o = i.find('.jadeRepeat .inner[data-id="' + r._id + '"]');
                                              var e = $(t).find("table.poll");
                                              o.find("table.poll").replaceWith(e);
                                              var n = $(t).find("table.poll");
                                              o.find("footer.poll-control").replaceWith(n);
                                              var a = $(t).find("h4.poll-head");
                                              return void o.find("h4.poll-head").replaceWith(a);
                                          }
                                          o.hasClass("active") ? ((t = $(t).find(".chatMsg").addClass("active")), o.html(t.html())) : ((t = $(t).find(".chatMsg")), o.html(t.html()));
                                      });
                                  }));
                        }
                        function p(t, i) {
                            if (t) {
                                var r = "chat/" + t + "/latest",
                                    o = r;
                                n.threading && ((o = "chat/" + t + "/threading"), (n.currentPage = 1)),
                                    e.list({ scope: n, path: r, initialPath: o, presence: !0, property: "chatLog" }).then(function (e) {
                                        (f = e), n.$emit("chat-jumpToEnd", t);
                                    }),
                                    d(t);
                            }
                        }
                        function h(t) {
                            n.fromBeginning ? p(t, 1) : p(t);
                        }
                        var f,
                            m = n.chatID;
                        (n.maxSize = 20),
                            (n.itemsPerPage = 30),
                            n.threading && (n.itemsPerPage = 300),
                            (n.users = function () {
                                f.users(function (t) {
                                    var e = _.pull(t, "anon"),
                                        i = n.actives - e.length;
                                    i > 0 && e.push("anon");
                                    var r = {
                                        backdrop: !0,
                                        keyboard: !0,
                                        backdropClick: !0,
                                        windowClass: "modal fullHeight",
                                        templateUrl: "/tmpl/chat/users",
                                        controller: [
                                            "$scope",
                                            "$modalInstance",
                                            function (t, n) {
                                                (t.users = e),
                                                    (t.extraAnons = i),
                                                    (t.close = function (t) {
                                                        n.close(t);
                                                    });
                                            },
                                        ],
                                    };
                                    s.open(r);
                                });
                            }),
                            (n.openPager = function () {
                                return n.pager && !n.fromBeginning
                                    ? void (n.pager = !1)
                                    : void ty.post("chat/pages", { r: n.chatID }, function (t) {
                                          (n.totalItems = t.count), (n.pagesCount = Math.ceil(n.totalItems / n.itemsPerPage)), n.currentPage || (n.currentPage = n.pagesCount), (n.pager = !0), n.$digest();
                                      });
                            }),
                            n.fromBeginning && n.openPager(),
                            (n.selectPage = function (t) {
                                return n.threading || t != n.pagesCount ? (n.threading || u(n.chatID), c(t), void (n.currentPage = t)) : void n.backToLatest();
                            }),
                            (n.nextPage = function (t) {
                                t.stopPropagation();
                                var e = n.currentPage,
                                    i = e + 1;
                                n.selectPage(i), n.fromBeginning || (n.pager = !1);
                            }),
                            (n.prevPage = function (t) {
                                t.stopPropagation();
                                var e = n.currentPage;
                                if (!(1 >= e)) {
                                    var i = e - 1;
                                    c(i), (n.currentPage = i), n.fromBeginning || (n.pager = !1);
                                }
                            }),
                            (n.backToLatest = function () {
                                var t = n.chatID;
                                p(t), (n.pageText = !1), (n.currentPage = 0), n.fromBeginning || (n.pager = !1), analytics.track("Chat view latest", { _id: n.chatID });
                            }),
                            h(m),
                            n.$watch("chatID", function (t, e) {
                                t != e && (e && u(e), h(t));
                            }),
                            (n.title = "Chat");
                    },
                ],
                link: function (e, n, i) {
                    e.title = i.title || "Chat ";
                    var r = n.find(".chatLog"),
                        o = function () {
                            var t = n.find(".chatInputContainer").outerHeight(),
                                e = n.find(".chatHeader").outerHeight();
                            "margin-bottom" === i.resizeTarget ? r.css("margin-bottom", t) : r.css("height", "calc(100% - " + e + "px - " + t + "px)");
                        };
                    i.scrollLock &&
                        r.bind("mousewheel DOMMouseScroll", function (t) {
                            var e = null;
                            "mousewheel" == t.type ? (e = -1 * t.originalEvent.wheelDelta) : "DOMMouseScroll" == t.type && (e = 40 * t.originalEvent.detail), e && (t.preventDefault(), $(this).scrollTop(e + $(this).scrollTop()));
                        }),
                        o(),
                        e.$on("elastic:resize", o),
                        (e.checkEnter = function (n) {
                            13 != n.keyCode || n.shiftKey || (n.preventDefault(), e.post(), t.$broadcast("elastic:adjust"));
                        }),
                        n.find(".chatInputContainer .image").click(function () {
                            ty.upload("images", function (t) {
                                e.postImage(t);
                            });
                        }),
                        (e.postImage = function (t) {
                            analytics.track("Chat post image select");
                            var n = { r: e.chatID, nt: "chat", i: t },
                                r = e.$parent.$eval(i.beforePost);
                            r && (n = r(n)),
                                ty.chat.post(n, function (t) {
                                    _.find(e.chatLog, function (e) {
                                        return e._id == t._id ? !0 : void 0;
                                    }) || (e.chatLog.push(t), e.$emit("childAdded", t));
                                });
                            var o = e.$parent.$eval(i.onPost);
                            o && o(n), analytics.track("Chat post image uploaded", { image: t }), e.$emit("post", t);
                        }),
                        (e.post = function (t) {
                            var r = n.find(".final .chatInput"),
                                o = _.trim(r.val());
                            if ("" != o && ty.chat.allowed && o.length > 1) {
                                var a = {};
                                r.hasClass("reply") && (a = { _id: r.closest(".chatMsg").attr("data-ID"), b: r.closest(".chatMsg").find("dd .fieldBody").text(), u: r.closest(".chatMsg").find("dt").text() }), e.$emit("chatPost", o, a);
                                var s = /^\//g;
                                if (s.test(o)) {
                                    var l = _.trim(o);
                                    e.$emit("chatCommand", l);
                                }
                                var c = { r: e.chatID, nt: "chat", b: o, ra: a },
                                    u = e.$parent.$eval(i.beforePost);
                                u && (c = u(c)),
                                    ty.chat.post(c, function (t) {
                                        _.find(e.chatLog, function (e) {
                                            return e._id == t._id ? !0 : void 0;
                                        }) || (e.chatLog.push(t), e.$emit("childAdded", t));
                                    });
                                var d = e.$parent.$eval(i.onPost);
                                d && d(c), r.val(""), r.focus();
                            }
                        });
                },
            };
        },
    ]),
    ty.chat.directive("chatPost", function () {
        return {
            replace: !1,
            templateUrl: "/tmpl/chat/postForms",
            scope: { chatID: "@chatPost", chatLog: "@chatLog" },
            controller: [
                "$scope",
                "$element",
                "$rootScope",
                "$timeout",
                function (t, e, n, i) {
                    t.chatID;
                    e.find(".chatInputContainer .image").click(function (e) {
                        ty.upload("images", function (e) {
                            t.postImage(e);
                        });
                    }),
                        (t.postImage = function (e) {
                            analytics.track("Chat post image select"), ty.chat.post({ r: t.chatID, nt: "chat", i: e }), analytics.track("Chat post image uploaded", { image: e });
                        });
                },
            ],
            link: function (t, e, n) {
                e.find(".chatInput");
                (t.checkEnter = function (e) {
                    13 != e.keyCode || e.shiftKey || (e.preventDefault(), t.post());
                }),
                    (t.post = function () {
                        var i = e.find(".chatInput"),
                            r = _.trim(i.val());
                        if ("" != r && ty.chat.allowed && r.length > 1) {
                            var o = /^\//g;
                            if (o.test(r)) {
                                var a = _(r).trim();
                                ty.hook("chatCommand", a);
                            }
                            var s = {};
                            i.hasClass("reply") && (s = { _id: i.closest(".chatMsg").attr("data-ID"), b: i.closest(".chatMsg").find("dd .fieldBody").text(), u: i.closest(".chatMsg").find("dt").text() });
                            var l = { r: t.chatID, nt: "chat", b: r, ra: s },
                                c = t.$parent.$eval(n.beforePost);
                            c && (l = c(l)), ty.chat.post(l), i.val(""), i.focus();
                        }
                    });
            },
        };
    }),
    ty.chat.run([
        "$rootScope",
        "chatItemDetail",
        function (t, e) {
            var n = function (e, n) {
                    var i = $(e.currentTarget).closest(".chatMsg"),
                        r = i.scope(),
                        o = i.attr("data-id");
                    if (i.hasClass("refreshThreadReplies"));
                    else if ((i.find(".expandThread").toggleClass("active"), i.hasClass("active"))) return i.removeClass("active"), void i.children("footer.replies").remove();
                    ty.post("chat/light/page", { page: 1, r: o }, function (e) {
                        _.each(e, function (t) {
                            i.closest(".chat")
                                .find(".chatMsg[data-id=" + t._id + "]")
                                .remove();
                        }),
                            ty.t("chat/chatListThreading", { rootScope: t, scope: r, data: e, chatID: o }, function (t) {
                                ty.t("chat/footerReplies", {}, function (e) {
                                    i.find(".lastReply").remove(),
                                        i.addClass("active"),
                                        i.hasClass("refreshThreadReplies") ? (i.find("footer.replies").html(t), i.removeClass("refreshThreadReplies")) : (i.append(e), i.find("footer.replies").prepend(t));
                                });
                            });
                    });
                },
                i = function (e, n) {
                    var i = $(e.currentTarget).closest(".chatMsg");
                    i.scope(), i.attr("data-id");
                    return t.currentUser
                        ? $(e.currentTarget).hasClass("active")
                            ? ($(e.currentTarget).toggleClass("active"), void i.children("footer.input").remove())
                            : ($(e.currentTarget).toggleClass("active"),
                              void ty.t("chat/footerInput", {}, function (t) {
                                  i.children("footer.footer-links").after(t);
                              }))
                        : void t.openRegister();
                },
                r = function (t) {
                    var e = $(t.currentTarget).closest(".chatMsg"),
                        n = (e.scope(), e.attr("data-id"), e.find(">.message>.fieldBody").text());
                    n.substring(0, 30);
                },
                o = function (t) {
                    var e = angular.element(t.currentTarget).closest(".chatMsg"),
                        n = angular.element(t.currentTarget).closest(".chat"),
                        i = n.scope(),
                        r = (e.attr("data-id"), n.attr("chat") || n.attr("data-id")),
                        o = $(t.currentTarget).parent().find(".chatInput"),
                        a = _.trim(o.val());
                    if (a && ty.chat.allowed && a.length > 1) {
                        i.$emit("chatPost", a);
                        var s = /^\//g;
                        if (s.test(a)) {
                            var l = _.trim(a);
                            i.$emit("chatCommand", l);
                        }
                        var c = {};
                        c = { _id: e.attr("data-ID"), b: e.find(".fieldBody").text() };
                        var u = { r: [r, e.attr("data-ID")], ra: c, nt: "chat", b: a };
                        ty.chat.post(u, function (t) {}), o.val(""), o.focus();
                    }
                },
                a = function (e) {
                    13 != e.keyCode || e.shiftKey || (e.preventDefault(), o(e), t.$broadcast("elastic:adjust"));
                },
                s = function (t, n) {
                    var i = angular.element(t.currentTarget),
                        r = i.scope(),
                        o = i.attr("data-id");
                    if (
                        (n ||
                            (n = _.find(r.chatLog, function (t) {
                                return t._id == o;
                            })),
                        "join" !== n.nt)
                    ) {
                        if ((r.openedChats || (r.openedChats = {}), i.hasClass("active"))) return r.openedChats[o].close(), void i.removeClass("active");
                        i.addClass("active"),
                            (r.openChatDetail = s),
                            (r.openedChats[o] = e(n, {
                                onClose: function () {
                                    i.removeClass("active");
                                },
                                position: { of: i, at: "left center", my: "right center" },
                                beforePost: function (t) {
                                    return (t.ra = { _id: t.r, b: n.b }), n.u && (t.ra.u = n.u[0]), _.isArray(t.r) || (t.r = [t.r]), _.isArray(n.r) && (t.r = _.union(n.r, t.r)), t;
                                },
                                onPost: function () {},
                                parentChatScope: r,
                            }));
                    }
                },
                l = function (t, e) {
                    var n = angular.element(t.currentTarget).closest(".chatMsg"),
                        i = angular.element(t.currentTarget).closest(".chat"),
                        r = i.attr("chat");
                    analytics.track("Chat post image select"), ty.chat.post({ r: [r, n.attr("data-ID")], nt: "chat", i: e }), analytics.track("Chat post image uploaded", { image: e });
                },
                c = function (t, e) {
                    var n = angular.element(t.currentTarget).closest(".chatMsg");
                    0 == n.length && (n = angular.element(t.currentTarget));
                    var i = n.scope(),
                        r = n.attr("data-id");
                    !e &&
                        r &&
                        (e = _.find(i.chatLog, function (t) {
                            return t._id == r;
                        }));
                    var o = angular.element(t.currentTarget).parent().find(".chatInput"),
                        a = _.trim(o.val());
                    if ("" != a && ty.chat.allowed && a.length > 1) {
                        i.$emit("chatPost", a);
                        var s = /^\//g;
                        if (s.test(a)) {
                            var l = _.trim(a);
                            i.$emit("chatCommand", l);
                        }
                        var c = [i.chatID];
                        e && e._id && c.unshift(e._id);
                        var u = {};
                        o.hasClass("reply") && (u = { _id: o.closest(".chatMsg").attr("data-ID"), b: o.closest(".chatMsg").find("dd .fieldBody").text(), u: o.closest(".chatMsg").find("dt").text() });
                        var d = { r: c, ra: u, nt: "chat", b: a };
                        ty.chat.post(d, function (t) {
                            _.find(i.chatLog, function (e) {
                                return e._id == t._id ? !0 : void 0;
                            }) || (i.chatLog.push(t), i.$emit("childAdded", t));
                        }),
                            o.val(""),
                            o.focus();
                    }
                },
                u = function (e) {
                    13 != e.keyCode || e.shiftKey || (e.preventDefault(), c(e), t.$broadcast("elastic:adjust"));
                };
            $(document)
                .on("click", ".chatMsg:not(.threading)", s)
                .on("click", ".openReply", i)
                .on("click", ".openDetail", s)
                .on("click", ".openNewThread", r)
                .on("click", ".expandThread", n)
                .on("keypress", ".chatInputContainer.child .chatInput", u)
                .on("keypress", "footer.input .chatInputContainer .chatInput", a)
                .on("click", ".chatMsg .chatInputContainer .image", function (t) {
                    ty.upload("images", function (e) {
                        l(t, e);
                    });
                });
        },
    ]),
    angular
        .module("tydai")
        .directive("editInPlace", [
            "$timeout",
            function (t) {
                return {
                    scope: { value: "=", textarea: "=" },
                    template: '<span ng-click="edit()" ng-hide="editing" bind-html-unsafe="value"></span><input ng-model="value" ng-show="editing&&!textarea"></input><textarea ng-model="value" ng-show="editing&&textarea" />',
                    controller: ["$scope", "$timeout", function (t, e) {}],
                    link: function (e, n, i) {
                        var r = $(n).find("input");
                        e.textarea && (r = $(n).find("textarea")),
                            !e.value && i.editInPlace && (e.value = i.editInPlace),
                            (e.editing = !1),
                            (e.edit = function () {
                                (e.editing = !0),
                                    setTimeout(function () {
                                        r[0].focus();
                                    });
                            }),
                            r.on("blur", function () {
                                t(function () {
                                    e.$emit("editChanged"), (e.editing = !1);
                                });
                            });
                    },
                };
            },
        ])
        .directive("textarea", function () {
            return {
                restrict: "E",
                require: "?ngModel",
                link: function (t, e, n, i) {
                    i &&
                        "radio" !== n.type &&
                        "checkbox" !== n.type &&
                        (e.unbind("input").unbind("keydown").unbind("change"),
                        e.bind("change", function () {
                            t.$apply(function () {
                                i.$setViewValue(e.val());
                            });
                        }));
                },
            };
        })
        .directive("input", function () {
            return {
                restrict: "E",
                require: "?ngModel",
                link: function (t, e, n, i) {
                    i &&
                        "radio" !== n.type &&
                        "checkbox" !== n.type &&
                        (n.typeahead ||
                            (e.unbind("input").unbind("keydown").unbind("change"),
                            e.bind("change", function () {
                                t.$apply(function () {
                                    i.$setViewValue(e.val());
                                });
                            })));
                },
            };
        })
        .directive("formMultipleSimple", function () {
            return {
                link: function (t, e, n) {
                    var i = $(e).find(".form-multiple-item").clone(!0);
                    $(e).on("keydown blur", "input", function () {
                        "" != $(e).find("input:last").val() && e.append(i.clone(!0));
                    });
                },
            };
        })
        .directive("formMultiple", function () {
            return {
                require: "?ngModel",
                link: function (t, e, n, i) {
                    function r() {
                        i.$modelValue && i.$modelValue[i.$modelValue.length - 1] != t.formMultipleDefault && "" != e.find("input:last").val()
                            ? (i.$modelValue.push(t.formMultipleDefault), t.$digest())
                            : i.$modelValue || i.$setViewValue([t.formMultipleDefault]);
                    }
                    i &&
                        (r(),
                        e.on("blur keyup tapstart mouseenter", "input", function () {
                            r();
                        }));
                },
            };
        }),
    angular.module("like", []).directive("likeButton", function () {
        return {
            replace: !0,
            templateUrl: "/tmpl/like/likeButton",
            scope: { readOnly: "=readOnly", likeUsers: "@likeUsers", noIcon: "@noIcon", likeButton: "=" },
            controller: [
                "$scope",
                "$element",
                "$rootScope",
                "$timeout",
                function (t, e, n, i) {
                    function r(e, n) {
                        (t.liked = !1),
                            (t.disliked = !1),
                            (e = e || 0),
                            (n && "unliked" !== n) || (t.likesText = "Like (" + e + ")"),
                            "liked" === n && ((t.liked = !0), (t.likesText = "Liked (" + e + ")")),
                            "disliked" === n && ((t.disliked = !0), (t.likesText = "Like (" + e + ")")),
                            (t.likeClasses = function () {
                                var e = "";
                                return t.readOnly && (e += "readOnly"), t.likeState && (e = e + " " + t.likeState), e;
                            }),
                            t.$digest();
                    }
                    var o = t.likeButton,
                        a = o._id;
                    t.likeState;
                    var s = function () {
                        ty.get("like/hasLiked/" + a, function (e) {
                            var n;
                            e.l && (n = "liked"), e.d && (n = "disliked"), (t.likeState = n), r(o.likeCount, n);
                        });
                    };
                    s(),
                        (t.like = function () {
                            return t.readOnly
                                ? void 0
                                : n.currentUser
                                ? void (t.liked
                                      ? ty.del("like/" + a, function (e) {
                                            (t.likeState = "unliked"), r(e.likeCount, "unliked"), analytics.track("Unlike", a);
                                        })
                                      : ty.post("like/" + a, {}, function (e) {
                                            t.$emit("like", a), (t.likeState = "liked"), r(e.likeCount, "liked"), analytics.track("Like", a);
                                        }))
                                : void n.openRegister();
                        }),
                        (t.dislike = function () {
                            return t.readOnly
                                ? void 0
                                : n.currentUser
                                ? void (t.disliked
                                      ? ty.del("like/dislike/" + a, function (e) {
                                            e && (localStorage.UserIdenticon = e.user), (t.likeState = "unliked"), r(e.likeCount, "unliked"), analytics.track("Unlike", a);
                                        })
                                      : ty.post("like/dislike/" + a, {}, function (e) {
                                            e.user && (localStorage.UserIdenticon = e.user), (t.likeState = "disliked"), r(e.likeCount, "disliked"), analytics.track("disliked", a);
                                        }))
                                : void n.openRegister();
                        }),
                        t.$watch("likeButton.likeCount", function (t, e) {
                            t != e && r(t);
                        });
                },
            ],
            link: function (t, e, n) {
                e.find(".chatInput");
            },
        };
    }),
    (function (t) {
        (t.PaginationCalculator = function (t, e) {
            (this.maxentries = t), (this.opts = e);
        }),
            t.extend(t.PaginationCalculator.prototype, {
                numPages: function () {
                    return Math.ceil(this.maxentries / this.opts.items_per_page);
                },
                getInterval: function (t) {
                    var e = Math.floor(this.opts.num_display_entries / 2),
                        n = this.numPages(),
                        i = n - this.opts.num_display_entries,
                        r = t > e ? Math.max(Math.min(t - e, i), 1) : 1,
                        o = t > e ? Math.min(t + e + (this.opts.num_display_entries % 2), n) : Math.min(this.opts.num_display_entries, n);
                    return { start: r, end: o };
                },
            }),
            (t.PaginationRenderers = {}),
            (t.PaginationRenderers.defaultRenderer = function (e, n) {
                (this.maxentries = e), (this.opts = n), (this.pc = new t.PaginationCalculator(e, n));
            }),
            t.extend(t.PaginationRenderers.defaultRenderer.prototype, {
                createLink: function (e, n, i) {
                    var r,
                        o = this.pc.numPages();
                    if (((e = 0 > e ? 1 : o > e ? e : o - 1), (i = t.extend({ text: e, classes: "" }, i || {})), e == n)) r = t("<span class='current'>" + i.text + "</span>");
                    else {
                        var a = location.pathname.split("/");
                        a.pop(), (a = a.join("/"));
                        this.opts.isPaging ? (1 == e ? (pagingUrl = a) : (pagingUrl = a + "/" + e)) : (pagingUrl = location.pathname + "/" + e), (r = t("<a>" + i.text + "</a>").attr("href", pagingUrl));
                    }
                    return i.classes && r.addClass(i.classes), r.data("page_id", e), r;
                },
                appendRange: function (t, e, n, i, r) {
                    var o;
                    for (o = n; i > o; o++) this.createLink(o, e, r).appendTo(t);
                },
                getLinks: function (e, n) {
                    var i,
                        r,
                        o = this.pc.getInterval(e),
                        a = this.pc.numPages(),
                        s = t("<div class='pagination'></div>");
                    return (
                        this.opts.prev_text && (e > 1 || this.opts.prev_show_always) && s.append(this.createLink(e - 1, e, { text: this.opts.prev_text, classes: "prev" })),
                        o.start > 0 &&
                            this.opts.num_edge_entries > 0 &&
                            ((r = Math.min(this.opts.num_edge_entries, o.start)),
                            this.appendRange(s, e, 1, 1, { classes: "sp" }),
                            this.opts.num_edge_entries < o.start && this.opts.ellipse_text && (s.append(this.createLink(1, e, { text: 1 })), t("<span>" + this.opts.ellipse_text + "</span>").appendTo(s))),
                        this.appendRange(s, e, o.start, o.end),
                        o.end < a &&
                            this.opts.num_edge_entries > 0 &&
                            (a - this.opts.num_edge_entries > o.end && this.opts.ellipse_text && t("<span>" + this.opts.ellipse_text + "</span>").appendTo(s),
                            (i = Math.max(a - this.opts.num_edge_entries, o.end)),
                            this.appendRange(s, e, i, a, { classes: "ep" })),
                        this.opts.next_text && (a - 1 > e || this.opts.next_show_always) && s.append(this.createLink(e + 1, e, { text: this.opts.next_text, classes: "next" })),
                        t("a", s).click(n),
                        s
                    );
                },
            }),
            (t.fn.pagination = function (e, n) {
                function i(t) {}
                function r(t) {
                    l.data("current_page", t), (a = o.getLinks(t, i)), l.empty(), a.appendTo(l);
                    var e = n.callback(t, l);
                    return e;
                }
                0 == n.current_page && (n.current_page = 1),
                    (n = t.extend(
                        {
                            items_per_page: 20,
                            num_display_entries: 6,
                            current_page: 1,
                            isPaging: !1,
                            num_edge_entries: 1,
                            link_to: "#",
                            prev_text: "Prev",
                            next_text: "Next",
                            ellipse_text: "...",
                            prev_show_always: !1,
                            next_show_always: !1,
                            renderer: "defaultRenderer",
                            show_if_single_page: !1,
                            load_first_page: !1,
                            callback: function () {},
                        },
                        n || {}
                    ));
                var o,
                    a,
                    s,
                    l = this;
                if (((s = parseInt(n.current_page)), l.data("current_page", s), (e = !e || 0 > e ? 1 : e), (n.items_per_page = !n.items_per_page || n.items_per_page < 0 ? 1 : n.items_per_page), !t.PaginationRenderers[n.renderer]))
                    throw new ReferenceError("Pagination renderer '" + n.renderer + "' was not found in jQuery.PaginationRenderers object.");
                o = new t.PaginationRenderers[n.renderer](e, n);
                var c = new t.PaginationCalculator(e, n),
                    u = c.numPages();
                l.bind("setPage", { numPages: u }, function (t, e) {
                    e >= 0 && e < t.data.numPages && r(e);
                }),
                    l.bind("prevPage", function (e) {
                        var n = t(this).data("current_page");
                        n > 0 && r(n - 1);
                    }),
                    l.bind("nextPage", { numPages: u }, function (e) {
                        var n = t(this).data("current_page");
                        n < e.data.numPages - 1 && r(n + 1);
                    }),
                    (a = o.getLinks(s, i)),
                    l.empty(),
                    (u > 1 || n.show_if_single_page) && a.appendTo(l),
                    n.load_first_page && n.callback(s, l);
            });
    })(jQuery),
    ty.threads.factory("threadItemDetail", [
        "$modal",
        "$rootScope",
        "$timeout",
        function (t, e, n) {
            return function (e, i) {
                var r = i.templateUrl || "/tmpl/threads/threadItemDetail",
                    o = e._id,
                    a = t.open({
                        backdrop: !1,
                        keyboard: !1,
                        closeOnLocationChange: !1,
                        windowClass: "modal threadItemDetailModal threadItemDetail-window-" + o,
                        backdropClick: !1,
                        templateUrl: r,
                        controller: [
                            "$scope",
                            "$modalInstance",
                            function (t, n) {
                                (t.nid = o),
                                    (t.beforePost = function (t) {
                                        return i.beforePost ? i.beforePost(t) : t;
                                    }),
                                    (t.chatMsg = e),
                                    t.$on("chatPost", function (t, e) {
                                        "function" == typeof i.onPost && i.onPost(e);
                                    }),
                                    analytics.track("Chat window", { chatID: o }),
                                    (t.close = function () {
                                        n.close(), "function" == typeof i.onClose && i.onClose();
                                    });
                            },
                        ],
                    });
                return (
                    a.opened.then(function () {
                        i.position &&
                            n(function () {
                                var t = $(".threadItemDetail-window-" + o);
                                t.position({ collision: "fit", my: i.position.my, at: i.position.at, of: i.position.of }), t.find(".chatInput").focus();
                            });
                    }),
                    a
                );
            };
        },
    ]),
    ty.threads
        .directive("threads", [
            "$rootScope",
            "tySubscribe",
            function (t, e) {
                return {
                    templateUrl: "/tmpl/threads/threads",
                    replace: !0,
                    scope: { refId: "@threads", currentThreadListHref: "@currentThreadListHref", threadMax: "@threadMax", noPager: "@noPager" },
                    controller: [
                        "$scope",
                        "$element",
                        "$timeout",
                        "$location",
                        "threadItemDetail",
                        "$interval",
                        "$stateParams",
                        "$modal",
                        function (e, n, i, r, o, a, s, l) {
                            function c(t) {
                                e.selectPage(d, t);
                            }
                            e.refId = e.refId.replace("anonkun_board_", "");
                            var u = e.refId;
                            (e.maxSize = 50), (e.itemsPerPage = 30);
                            var d = 1,
                                p = r.search().page;
                            p && ((p = p.split("/")), (d = parseInt(p[p.length - 1]))),
                                (e.getHref = function (t) {
                                    return r.path() + "?page=" + t;
                                }),
                                (e.currentPage = d);
                            var h = a(function () {
                                e.selectPage(e.currentPage);
                            }, 24e4);
                            e.$on("$destroy", function () {
                                a.cancel(h);
                            }),
                                "/stories/threads" == e.currentThreadListHref && (u = "stories"),
                                ty.get("thread/" + u + "/pages", function (t) {
                                    (e.totalItems = t.count), (e.pagesCount = Math.ceil(e.totalItems / e.itemsPerPage)), e.currentPage || (e.currentPage = e.pagesCount), (e.pager = !0), e.$digest();
                                }),
                                (e.threadDetail = function (t, n) {
                                    var i = angular.element(t.currentTarget),
                                        r = i.scope();
                                    return r.detailed
                                        ? (r.detail.close(), void (r.detailed = !1))
                                        : ((r.detailed = !0),
                                          void (r.detail = o(n, {
                                              onClose: function () {
                                                  r.detailed = !1;
                                              },
                                              position: { of: i, at: "left center", my: "right center" },
                                              beforePost: function (t) {
                                                  return (t.ra = { _id: t.r, b: n.b }), n.u && (t.ra.u = n.u[0]), _.isArray(t.r) || (t.r = [t.r]), t.r.push(e.chatID), t;
                                              },
                                              onPost: function () {},
                                          })));
                                }),
                                (e.postThread = function (n) {
                                    if (!t.currentUser) return void t.openRegister();
                                    var o = function (o) {
                                        var a = e.currentThreadListHref;
                                        e.createThreadForm = {
                                            backdrop: !0,
                                            keyboard: !0,
                                            scope: e,
                                            windowClass: "modal createThreadForm",
                                            backdropClick: !0,
                                            templateUrl: "/tmpl/threads/createThreadForm",
                                            controller: [
                                                "$scope",
                                                "$modalInstance",
                                                function (e, n) {
                                                    (u = e.refId.replace("anonkun_board_", "")),
                                                        (e.board = u),
                                                        (e.submit = function (i, o) {
                                                            var l = $(i.currentTarget).find(".title").val(),
                                                                c = $(i.currentTarget).find(".body").val();
                                                            if (((l = _.clean(l)), l.length)) {
                                                                u = e.refId.replace("anonkun_board_", "");
                                                                var d = { r: [e.board], t: l, b: c };
                                                                s.storyID && (d.storyThread = !0),
                                                                    ty.post("anonkun/board/item", d, function (e) {
                                                                        r.path(a + "/" + ty.url(e.t) + "/" + e._id), t.$apply();
                                                                    }),
                                                                    n.close();
                                                            }
                                                        }),
                                                        (e.close = function (t) {
                                                            n.close();
                                                        });
                                                },
                                            ],
                                        };
                                        var c = l.open(e.createThreadForm);
                                        c.opened.then(function () {
                                            i(function () {
                                                var t = $(".createThreadForm");
                                                t.position({ collision: "fit", of: $(n.currentTarget), at: "center bottom", my: "center top" }), t.find(".title").focus();
                                            });
                                        });
                                    };
                                    o();
                                }),
                                (e.postThreadSimple = function (t) {
                                    var n = $(t.currentTarget),
                                        i = n.val();
                                    if (((i = _.clean(i)), i.length && !n.hasClass("disabled"))) {
                                        n.addClass("disabled");
                                        var o = e.refId.replace("anonkun_board_", ""),
                                            a = { r: [o], t: i };
                                        ty.post("anonkun/board/item", a, function (t) {
                                            r.path(e.currentThreadListHref + "/my-new-post/" + t._id), e.$apply();
                                        });
                                    }
                                }),
                                (e.checkEnter = function (t) {
                                    13 != t.keyCode || t.shiftKey || (t.preventDefault(), e.postThreadSimple(t));
                                }),
                                (e.selectPage = function (t, n) {
                                    t || (t = 1), n || (n = e.refId.replace("anonkun_board_", "")), "/stories/threads" == e.currentThreadListHref && (n = "stories");
                                    var i = e.threadMax || 20;
                                    ty.get("thread/" + n + "/" + t + "/" + i, function (t) {
                                        (e.threadList = t), (e.listLoaded = !0), e.$apply();
                                    });
                                }),
                                c(u),
                                e.$on("updatePost", function (t, n) {
                                    var i;
                                    _.find(e.threadList, function (t, e) {
                                        return t._id == n._id ? ((i = e), !0) : void 0;
                                    });
                                    i || 0 == i
                                        ? ((e.threadList[i].p = n.p),
                                          (e.threadList[i].ut = n.ut),
                                          (e.threadList[i].t = n.t || e.threadList[i].t),
                                          (e.threadList[i].lr = n.lr || e.threadList[i].lr),
                                          (e.threadList[i].i = n.i || e.threadList[i].i),
                                          e.$digest())
                                        : e.selectPage(e.currentPage);
                                }),
                                e.$watch("refId", function (t, e) {
                                    (t = t.replace("anonkun_board_", "")), (e = e.replace("anonkun_board_", "")), t != e && c(t);
                                });
                        },
                    ],
                    link: function (t, e, n) {
                        t.title = n.title || "Chat ";
                        var i = e.find(".chatLog");
                        n.scrollLock &&
                            i.bind("mousewheel DOMMouseScroll", function (t) {
                                var e = null;
                                "mousewheel" == t.type ? (e = -1 * t.originalEvent.wheelDelta) : "DOMMouseScroll" == t.type && (e = 40 * t.originalEvent.detail), e && (t.preventDefault(), $(this).scrollTop(e + $(this).scrollTop()));
                            });
                    },
                };
            },
        ])
        .run([
            "$rootScope",
            "chatItemDetail",
            function (t, e) {
                var n = function (t) {
                    var n,
                        i = angular.element(t.currentTarget),
                        r = i.scope(),
                        o = i.closest(".threadListItem").attr("data-id");
                    r.threadList
                        ? ((n = _.find(r.threadList, function (t) {
                              return t._id == o;
                          })),
                          e(n, { position: { of: i, at: "left center", my: "right center" } }))
                        : ty.get("node/" + o, function (t) {
                              (n = t), e(n, { position: { of: i, at: "left center", my: "right center" } });
                          });
                };
                $(document).on("click", ".openThreadDetail", n);
            },
        ]),
    angular.module("ngPluralizeFilter", []).filter("pluralize", function () {
        function t(t) {
            if ("string" != typeof t) return t;
            for (
                var e = [
                        { regex: /octopus/gi, suffix: "octopuses" },
                        { regex: /person/gi, suffix: "people" },
                        { regex: /ox/gi, suffix: "oxen" },
                        { regex: /goose/gi, suffix: "geese" },
                        { regex: /mouse/gi, suffix: "mice" },
                        { regex: /bison|buffalo|deer|duck|fish|moose|pike|plankton|salmon|sheep|squid|swine|trout|sheap|equipment|information|rice|money|species|series|news/i, suffix: "$&" },
                        { regex: /(x|ch|ss|sh)$/gi, suffix: "$1es" },
                        { regex: /(hetero|canto|photo|zero|piano|pro|kimono|portico|quarto)$/gi, suffix: "$1s" },
                        { regex: /(?:([^f])fe|([lr])f)$/, suffix: "$1$2ves" },
                        { regex: /o$/gi, suffix: "oes" },
                        { regex: /([^aeiouy]|qu)y$/gi, suffix: "$1ies" },
                        { regex: /s$/gi, suffix: "s" },
                        { regex: /$/gi, suffix: "s" },
                    ],
                    n = 0;
                n < e.length;
                n++
            ) {
                var i = e[n];
                if (t.match(i.regex)) {
                    t = t.replace(i.regex, i.suffix);
                    break;
                }
            }
            return t;
        }
        return function (e) {
            return e ? t(e) : e;
        };
    }),
    angular
        .module("timer", [])
        .directive("timer", [
            "$timeout",
            "$compile",
            function (t, e) {
                return {
                    restrict: "E",
                    replace: !0,
                    scope: { interval: "@interval", countdownattr: "@countdown" },
                    template:
                        '<div><span ng-if="days && days > 1">{{days}} days </span><span ng-if="days && days == 1">{{days}} day </span><span ng-if="hours || days">{{hours}}:</span><span ng-if="minutes || hours || days">{{minutes}}:</span><span>{{seconds}}</span></div>',
                    controller: [
                        "$scope",
                        "$element",
                        function (n, i) {
                            function r(t) {
                                n.countdown = n.countdownattr && parseInt(n.countdownattr, 10) > 0 ? parseInt(n.countdownattr, 10) : void 0;
                            }
                            function o() {
                                n.timeoutId && t.cancel(n.timeoutId);
                            }
                            0 === i.html().trim().length && i.append(e("<span>{{millis}}</span>")(n)),
                                n.$watch("countdownattr", function () {
                                    r();
                                }),
                                (n.startTime = null),
                                (n.timeoutId = null),
                                r(),
                                (n.isRunning = !1),
                                n.$on("timer-start", function () {
                                    n.start();
                                }),
                                n.$on("timer-resume", function () {
                                    n.resume();
                                }),
                                n.$on("timer-stop", function () {
                                    n.stop();
                                }),
                                (n.start = i[0].start = function () {
                                    (n.startTime = new Date()), o(), a();
                                }),
                                (n.resume = i[0].resume = function () {
                                    o(), (n.startTime = new Date() - (n.stoppedTime - n.startTime)), a();
                                }),
                                (n.stop = i[0].stop = function () {
                                    (n.stoppedTime = new Date()), t.cancel(n.timeoutId), (n.timeoutId = null);
                                }),
                                i.bind("$destroy", function () {
                                    t.cancel(n.timeoutId);
                                });
                            var a = function () {
                                n.countdown > 0 ? n.countdown-- : n.countdown <= 0 && n.stop(),
                                    (n.millis = new Date() - n.startTime),
                                    n.countdown > 0 && (n.millis = 1e3 * n.countdown),
                                    (n.seconds = Math.floor((n.millis / 1e3) % 60)),
                                    (n.minutes = Math.floor((n.millis / 6e4) % 60)),
                                    (n.hours = Math.floor((n.millis / 36e5) % 24)),
                                    (n.days = Math.floor(n.millis / 864e5)),
                                    (n.timeoutId = t(function () {
                                        a();
                                    }, parseInt(n.interval, 10))),
                                    n.$emit("timer-tick", { timeoutId: n.timeoutId, millis: n.millis });
                            };
                            n.start();
                        },
                    ],
                };
            },
        ])
        .directive("endtimer", [
            "$timeout",
            "$compile",
            function (t, e) {
                return {
                    restrict: "E",
                    replace: !0,
                    scope: { interval: "@interval", endtime: "=endtime" },
                    template:
                        '<div><span ng-if="days && days > 1">{{days}} days </span><span ng-if="days && days == 1">{{days}} day </span><span ng-if="hours || days">{{hours}}:</span><span ng-if="minutes || hours || days">{{minutes}}:</span><span>{{seconds}}</span></div>',
                    controller: [
                        "$scope",
                        "$element",
                        function (n, i) {
                            function r(t) {
                                n.countdown = (n.endtime - Date.now()) / 1e3;
                            }
                            function o() {
                                n.timeoutId && t.cancel(n.timeoutId);
                            }
                            0 === i.html().trim().length && i.append(e("<span>{{millis}}</span>")(n)),
                                n.$watch("endtime", function () {
                                    r();
                                }),
                                (n.startTime = null),
                                (n.timeoutId = null),
                                r(),
                                (n.isRunning = !1),
                                n.$on("timer-start", function () {
                                    n.start();
                                }),
                                n.$on("timer-resume", function () {
                                    n.resume();
                                }),
                                n.$on("timer-stop", function () {
                                    n.stop();
                                }),
                                (n.start = i[0].start = function () {
                                    (n.startTime = new Date()), o(), a();
                                }),
                                (n.resume = i[0].resume = function () {
                                    o(), (n.startTime = new Date() - (n.stoppedTime - n.startTime)), a();
                                }),
                                (n.stop = i[0].stop = function () {
                                    (n.stoppedTime = new Date()), t.cancel(n.timeoutId), (n.timeoutId = null);
                                }),
                                i.bind("$destroy", function () {
                                    t.cancel(n.timeoutId);
                                });
                            var a = function () {
                                n.countdown > 0 ? (n.countdown = (n.endtime - Date.now()) / 1e3) : n.countdown <= 0 && n.stop(),
                                    (n.millis = new Date() - n.startTime),
                                    n.countdown > 0 && (n.millis = 1e3 * n.countdown),
                                    (n.seconds = Math.floor((n.millis / 1e3) % 60)),
                                    (n.minutes = Math.floor((n.millis / 6e4) % 60)),
                                    (n.hours = Math.floor((n.millis / 36e5) % 24)),
                                    (n.days = Math.floor(n.millis / 864e5)),
                                    (n.timeoutId = t(function () {
                                        a();
                                    }, parseInt(n.interval, 10))),
                                    n.$emit("timer-tick", { timeoutId: n.timeoutId, millis: n.millis });
                            };
                            n.start();
                        },
                    ],
                };
            },
        ]),
    (function (t, e) {
        "function" == typeof define && define.amd
            ? define("jquery-bridget/jquery-bridget", ["jquery"], function (n) {
                  return e(t, n);
              })
            : "object" == typeof module && module.exports
            ? (module.exports = e(t, require("jquery")))
            : (t.jQueryBridget = e(t, t.jQuery));
    })(window, function (t, e) {
        "use strict";
        function n(n, o, s) {
            function l(t, e, i) {
                var r,
                    o = "$()." + n + '("' + e + '")';
                return (
                    t.each(function (t, l) {
                        var c = s.data(l, n);
                        if (!c) return void a(n + " not initialized. Cannot call methods, i.e. " + o);
                        var u = c[e];
                        if (!u || "_" == e.charAt(0)) return void a(o + " is not a valid method");
                        var d = u.apply(c, i);
                        r = void 0 === r ? d : r;
                    }),
                    void 0 !== r ? r : t
                );
            }
            function c(t, e) {
                t.each(function (t, i) {
                    var r = s.data(i, n);
                    r ? (r.option(e), r._init()) : ((r = new o(i, e)), s.data(i, n, r));
                });
            }
            (s = s || e || t.jQuery),
                s &&
                    (o.prototype.option ||
                        (o.prototype.option = function (t) {
                            s.isPlainObject(t) && (this.options = s.extend(!0, this.options, t));
                        }),
                    (s.fn[n] = function (t) {
                        if ("string" == typeof t) {
                            var e = r.call(arguments, 1);
                            return l(this, t, e);
                        }
                        return c(this, t), this;
                    }),
                    i(s));
        }
        function i(t) {
            !t || (t && t.bridget) || (t.bridget = n);
        }
        var r = Array.prototype.slice,
            o = t.console,
            a =
                "undefined" == typeof o
                    ? function () {}
                    : function (t) {
                          o.error(t);
                      };
        return i(e || t.jQuery), n;
    }),
    (function (t, e) {
        "use strict";
        "function" == typeof define && define.amd
            ? define("get-size/get-size", [], function () {
                  return e();
              })
            : "object" == typeof module && module.exports
            ? (module.exports = e())
            : (t.getSize = e());
    })(window, function () {
        "use strict";
        function t(t) {
            var e = parseFloat(t),
                n = -1 == t.indexOf("%") && !isNaN(e);
            return n && e;
        }
        function e() {}
        function n() {
            for (var t = { width: 0, height: 0, innerWidth: 0, innerHeight: 0, outerWidth: 0, outerHeight: 0 }, e = 0; c > e; e++) {
                var n = l[e];
                t[n] = 0;
            }
            return t;
        }
        function i(t) {
            var e = getComputedStyle(t);
            return e || s("Style returned " + e + ". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"), e;
        }
        function r() {
            if (!u) {
                u = !0;
                var e = document.createElement("div");
                (e.style.width = "200px"), (e.style.padding = "1px 2px 3px 4px"), (e.style.borderStyle = "solid"), (e.style.borderWidth = "1px 2px 3px 4px"), (e.style.boxSizing = "border-box");
                var n = document.body || document.documentElement;
                n.appendChild(e);
                var r = i(e);
                (o.isBoxSizeOuter = a = 200 == t(r.width)), n.removeChild(e);
            }
        }
        function o(e) {
            if ((r(), "string" == typeof e && (e = document.querySelector(e)), e && "object" == typeof e && e.nodeType)) {
                var o = i(e);
                if ("none" == o.display) return n();
                var s = {};
                (s.width = e.offsetWidth), (s.height = e.offsetHeight);
                for (var u = (s.isBorderBox = "border-box" == o.boxSizing), d = 0; c > d; d++) {
                    var p = l[d],
                        h = o[p],
                        f = parseFloat(h);
                    s[p] = isNaN(f) ? 0 : f;
                }
                var m = s.paddingLeft + s.paddingRight,
                    v = s.paddingTop + s.paddingBottom,
                    g = s.marginLeft + s.marginRight,
                    y = s.marginTop + s.marginBottom,
                    b = s.borderLeftWidth + s.borderRightWidth,
                    w = s.borderTopWidth + s.borderBottomWidth,
                    $ = u && a,
                    x = t(o.width);
                x !== !1 && (s.width = x + ($ ? 0 : m + b));
                var k = t(o.height);
                return k !== !1 && (s.height = k + ($ ? 0 : v + w)), (s.innerWidth = s.width - (m + b)), (s.innerHeight = s.height - (v + w)), (s.outerWidth = s.width + g), (s.outerHeight = s.height + y), s;
            }
        }
        var a,
            s =
                "undefined" == typeof console
                    ? e
                    : function (t) {
                          console.error(t);
                      },
            l = ["paddingLeft", "paddingRight", "paddingTop", "paddingBottom", "marginLeft", "marginRight", "marginTop", "marginBottom", "borderLeftWidth", "borderRightWidth", "borderTopWidth", "borderBottomWidth"],
            c = l.length,
            u = !1;
        return o;
    }),
    (function (t, e) {
        "function" == typeof define && define.amd ? define("ev-emitter/ev-emitter", e) : "object" == typeof module && module.exports ? (module.exports = e()) : (t.EvEmitter = e());
    })("undefined" != typeof window ? window : this, function () {
        function t() {}
        var e = t.prototype;
        return (
            (e.on = function (t, e) {
                if (t && e) {
                    var n = (this._events = this._events || {}),
                        i = (n[t] = n[t] || []);
                    return -1 == i.indexOf(e) && i.push(e), this;
                }
            }),
            (e.once = function (t, e) {
                if (t && e) {
                    this.on(t, e);
                    var n = (this._onceEvents = this._onceEvents || {}),
                        i = (n[t] = n[t] || {});
                    return (i[e] = !0), this;
                }
            }),
            (e.off = function (t, e) {
                var n = this._events && this._events[t];
                if (n && n.length) {
                    var i = n.indexOf(e);
                    return -1 != i && n.splice(i, 1), this;
                }
            }),
            (e.emitEvent = function (t, e) {
                var n = this._events && this._events[t];
                if (n && n.length) {
                    (n = n.slice(0)), (e = e || []);
                    for (var i = this._onceEvents && this._onceEvents[t], r = 0; r < n.length; r++) {
                        var o = n[r],
                            a = i && i[o];
                        a && (this.off(t, o), delete i[o]), o.apply(this, e);
                    }
                    return this;
                }
            }),
            (e.allOff = function () {
                delete this._events, delete this._onceEvents;
            }),
            t
        );
    }),
    (function (t, e) {
        "function" == typeof define && define.amd
            ? define("unipointer/unipointer", ["ev-emitter/ev-emitter"], function (n) {
                  return e(t, n);
              })
            : "object" == typeof module && module.exports
            ? (module.exports = e(t, require("ev-emitter")))
            : (t.Unipointer = e(t, t.EvEmitter));
    })(window, function (t, e) {
        function n() {}
        function i() {}
        var r = (i.prototype = Object.create(e.prototype));
        (r.bindStartEvent = function (t) {
            this._bindStartEvent(t, !0);
        }),
            (r.unbindStartEvent = function (t) {
                this._bindStartEvent(t, !1);
            }),
            (r._bindStartEvent = function (e, n) {
                n = void 0 === n ? !0 : n;
                var i = n ? "addEventListener" : "removeEventListener",
                    r = "mousedown";
                t.PointerEvent ? (r = "pointerdown") : "ontouchstart" in t && (r = "touchstart"), e[i](r, this);
            }),
            (r.handleEvent = function (t) {
                var e = "on" + t.type;
                this[e] && this[e](t);
            }),
            (r.getTouch = function (t) {
                for (var e = 0; e < t.length; e++) {
                    var n = t[e];
                    if (n.identifier == this.pointerIdentifier) return n;
                }
            }),
            (r.onmousedown = function (t) {
                var e = t.button;
                (e && 0 !== e && 1 !== e) || this._pointerDown(t, t);
            }),
            (r.ontouchstart = function (t) {
                this._pointerDown(t, t.changedTouches[0]);
            }),
            (r.onpointerdown = function (t) {
                this._pointerDown(t, t);
            }),
            (r._pointerDown = function (t, e) {
                t.button || this.isPointerDown || ((this.isPointerDown = !0), (this.pointerIdentifier = void 0 !== e.pointerId ? e.pointerId : e.identifier), this.pointerDown(t, e));
            }),
            (r.pointerDown = function (t, e) {
                this._bindPostStartEvents(t), this.emitEvent("pointerDown", [t, e]);
            });
        var o = { mousedown: ["mousemove", "mouseup"], touchstart: ["touchmove", "touchend", "touchcancel"], pointerdown: ["pointermove", "pointerup", "pointercancel"] };
        return (
            (r._bindPostStartEvents = function (e) {
                if (e) {
                    var n = o[e.type];
                    n.forEach(function (e) {
                        t.addEventListener(e, this);
                    }, this),
                        (this._boundPointerEvents = n);
                }
            }),
            (r._unbindPostStartEvents = function () {
                this._boundPointerEvents &&
                    (this._boundPointerEvents.forEach(function (e) {
                        t.removeEventListener(e, this);
                    }, this),
                    delete this._boundPointerEvents);
            }),
            (r.onmousemove = function (t) {
                this._pointerMove(t, t);
            }),
            (r.onpointermove = function (t) {
                t.pointerId == this.pointerIdentifier && this._pointerMove(t, t);
            }),
            (r.ontouchmove = function (t) {
                var e = this.getTouch(t.changedTouches);
                e && this._pointerMove(t, e);
            }),
            (r._pointerMove = function (t, e) {
                this.pointerMove(t, e);
            }),
            (r.pointerMove = function (t, e) {
                this.emitEvent("pointerMove", [t, e]);
            }),
            (r.onmouseup = function (t) {
                this._pointerUp(t, t);
            }),
            (r.onpointerup = function (t) {
                t.pointerId == this.pointerIdentifier && this._pointerUp(t, t);
            }),
            (r.ontouchend = function (t) {
                var e = this.getTouch(t.changedTouches);
                e && this._pointerUp(t, e);
            }),
            (r._pointerUp = function (t, e) {
                this._pointerDone(), this.pointerUp(t, e);
            }),
            (r.pointerUp = function (t, e) {
                this.emitEvent("pointerUp", [t, e]);
            }),
            (r._pointerDone = function () {
                this._pointerReset(), this._unbindPostStartEvents(), this.pointerDone();
            }),
            (r._pointerReset = function () {
                (this.isPointerDown = !1), delete this.pointerIdentifier;
            }),
            (r.pointerDone = n),
            (r.onpointercancel = function (t) {
                t.pointerId == this.pointerIdentifier && this._pointerCancel(t, t);
            }),
            (r.ontouchcancel = function (t) {
                var e = this.getTouch(t.changedTouches);
                e && this._pointerCancel(t, e);
            }),
            (r._pointerCancel = function (t, e) {
                this._pointerDone(), this.pointerCancel(t, e);
            }),
            (r.pointerCancel = function (t, e) {
                this.emitEvent("pointerCancel", [t, e]);
            }),
            (i.getPointerPoint = function (t) {
                return { x: t.pageX, y: t.pageY };
            }),
            i
        );
    }),
    (function (t, e) {
        "function" == typeof define && define.amd
            ? define("unidragger/unidragger", ["unipointer/unipointer"], function (n) {
                  return e(t, n);
              })
            : "object" == typeof module && module.exports
            ? (module.exports = e(t, require("unipointer")))
            : (t.Unidragger = e(t, t.Unipointer));
    })(window, function (t, e) {
        function n() {}
        var i = (n.prototype = Object.create(e.prototype));
        (i.bindHandles = function () {
            this._bindHandles(!0);
        }),
            (i.unbindHandles = function () {
                this._bindHandles(!1);
            }),
            (i._bindHandles = function (e) {
                e = void 0 === e ? !0 : e;
                for (var n = e ? "addEventListener" : "removeEventListener", i = e ? this._touchActionValue : "", r = 0; r < this.handles.length; r++) {
                    var o = this.handles[r];
                    this._bindStartEvent(o, e), o[n]("click", this), t.PointerEvent && (o.style.touchAction = i);
                }
            }),
            (i._touchActionValue = "none"),
            (i.pointerDown = function (t, e) {
                var n = this.okayPointerDown(t);
                n && ((this.pointerDownPointer = e), t.preventDefault(), this.pointerDownBlur(), this._bindPostStartEvents(t), this.emitEvent("pointerDown", [t, e]));
            });
        var r = { TEXTAREA: !0, INPUT: !0, SELECT: !0, OPTION: !0 },
            o = { radio: !0, checkbox: !0, button: !0, submit: !0, image: !0, file: !0 };
        return (
            (i.okayPointerDown = function (t) {
                var e = r[t.target.nodeName],
                    n = o[t.target.type],
                    i = !e || n;
                return i || this._pointerReset(), i;
            }),
            (i.pointerDownBlur = function () {
                var t = document.activeElement,
                    e = t && t.blur && t != document.body;
                e && t.blur();
            }),
            (i.pointerMove = function (t, e) {
                var n = this._dragPointerMove(t, e);
                this.emitEvent("pointerMove", [t, e, n]), this._dragMove(t, e, n);
            }),
            (i._dragPointerMove = function (t, e) {
                var n = { x: e.pageX - this.pointerDownPointer.pageX, y: e.pageY - this.pointerDownPointer.pageY };
                return !this.isDragging && this.hasDragStarted(n) && this._dragStart(t, e), n;
            }),
            (i.hasDragStarted = function (t) {
                return Math.abs(t.x) > 3 || Math.abs(t.y) > 3;
            }),
            (i.pointerUp = function (t, e) {
                this.emitEvent("pointerUp", [t, e]), this._dragPointerUp(t, e);
            }),
            (i._dragPointerUp = function (t, e) {
                this.isDragging ? this._dragEnd(t, e) : this._staticClick(t, e);
            }),
            (i._dragStart = function (t, e) {
                (this.isDragging = !0), (this.isPreventingClicks = !0), this.dragStart(t, e);
            }),
            (i.dragStart = function (t, e) {
                this.emitEvent("dragStart", [t, e]);
            }),
            (i._dragMove = function (t, e, n) {
                this.isDragging && this.dragMove(t, e, n);
            }),
            (i.dragMove = function (t, e, n) {
                t.preventDefault(), this.emitEvent("dragMove", [t, e, n]);
            }),
            (i._dragEnd = function (t, e) {
                (this.isDragging = !1),
                    setTimeout(
                        function () {
                            delete this.isPreventingClicks;
                        }.bind(this)
                    ),
                    this.dragEnd(t, e);
            }),
            (i.dragEnd = function (t, e) {
                this.emitEvent("dragEnd", [t, e]);
            }),
            (i.onclick = function (t) {
                this.isPreventingClicks && t.preventDefault();
            }),
            (i._staticClick = function (t, e) {
                (this.isIgnoringMouseUp && "mouseup" == t.type) ||
                    (this.staticClick(t, e),
                    "mouseup" != t.type &&
                        ((this.isIgnoringMouseUp = !0),
                        setTimeout(
                            function () {
                                delete this.isIgnoringMouseUp;
                            }.bind(this),
                            400
                        )));
            }),
            (i.staticClick = function (t, e) {
                this.emitEvent("staticClick", [t, e]);
            }),
            (n.getPointerPoint = e.getPointerPoint),
            n
        );
    }),
    (function (t, e) {
        "function" == typeof define && define.amd
            ? define(["get-size/get-size", "unidragger/unidragger"], function (n, i) {
                  return e(t, n, i);
              })
            : "object" == typeof module && module.exports
            ? (module.exports = e(t, require("get-size"), require("unidragger")))
            : (t.Draggabilly = e(t, t.getSize, t.Unidragger));
    })(window, function (t, e, n) {
        function i(t, e) {
            for (var n in e) t[n] = e[n];
            return t;
        }
        function r() {}
        function o(t, e) {
            (this.element = "string" == typeof t ? document.querySelector(t) : t), s && (this.$element = s(this.element)), (this.options = i({}, this.constructor.defaults)), this.option(e), this._create();
        }
        function a(t, e, n) {
            return (n = n || "round"), e ? Math[n](t / e) * e : t;
        }
        var s = t.jQuery,
            l = (o.prototype = Object.create(n.prototype));
        (o.defaults = {}),
            (l.option = function (t) {
                i(this.options, t);
            });
        var c = { relative: !0, absolute: !0, fixed: !0 };
        return (
            (l._create = function () {
                (this.position = {}), this._getPosition(), (this.startPoint = { x: 0, y: 0 }), (this.dragPoint = { x: 0, y: 0 }), (this.startPosition = i({}, this.position));
                var t = getComputedStyle(this.element);
                c[t.position] || (this.element.style.position = "relative"), this.on("pointerDown", this.onPointerDown), this.on("pointerMove", this.onPointerMove), this.on("pointerUp", this.onPointerUp), this.enable(), this.setHandles();
            }),
            (l.setHandles = function () {
                (this.handles = this.options.handle ? this.element.querySelectorAll(this.options.handle) : [this.element]), this.bindHandles();
            }),
            (l.dispatchEvent = function (t, e, n) {
                var i = [e].concat(n);
                this.emitEvent(t, i), this.dispatchJQueryEvent(t, e, n);
            }),
            (l.dispatchJQueryEvent = function (e, n, i) {
                var r = t.jQuery;
                if (r && this.$element) {
                    var o = r.Event(n);
                    (o.type = e), this.$element.trigger(o, i);
                }
            }),
            (l._getPosition = function () {
                var t = getComputedStyle(this.element),
                    e = this._getPositionCoord(t.left, "width"),
                    n = this._getPositionCoord(t.top, "height");
                (this.position.x = isNaN(e) ? 0 : e), (this.position.y = isNaN(n) ? 0 : n), this._addTransformPosition(t);
            }),
            (l._getPositionCoord = function (t, n) {
                if (-1 != t.indexOf("%")) {
                    var i = e(this.element.parentNode);
                    return i ? (parseFloat(t) / 100) * i[n] : 0;
                }
                return parseInt(t, 10);
            }),
            (l._addTransformPosition = function (t) {
                var e = t.transform;
                if (0 === e.indexOf("matrix")) {
                    var n = e.split(","),
                        i = 0 === e.indexOf("matrix3d") ? 12 : 4,
                        r = parseInt(n[i], 10),
                        o = parseInt(n[i + 1], 10);
                    (this.position.x += r), (this.position.y += o);
                }
            }),
            (l.onPointerDown = function (t, e) {
                this.element.classList.add("is-pointer-down"), this.dispatchJQueryEvent("pointerDown", t, [e]);
            }),
            (l.dragStart = function (t, e) {
                this.isEnabled &&
                    (this._getPosition(),
                    this.measureContainment(),
                    (this.startPosition.x = this.position.x),
                    (this.startPosition.y = this.position.y),
                    this.setLeftTop(),
                    (this.dragPoint.x = 0),
                    (this.dragPoint.y = 0),
                    this.element.classList.add("is-dragging"),
                    this.dispatchEvent("dragStart", t, [e]),
                    this.animate());
            }),
            (l.measureContainment = function () {
                var t = this.getContainer();
                if (t) {
                    var n = e(this.element),
                        i = e(t),
                        r = this.element.getBoundingClientRect(),
                        o = t.getBoundingClientRect(),
                        a = i.borderLeftWidth + i.borderRightWidth,
                        s = i.borderTopWidth + i.borderBottomWidth,
                        l = (this.relativeStartPosition = { x: r.left - (o.left + i.borderLeftWidth), y: r.top - (o.top + i.borderTopWidth) });
                    this.containSize = { width: i.width - a - l.x - n.width, height: i.height - s - l.y - n.height };
                }
            }),
            (l.getContainer = function () {
                var t = this.options.containment;
                if (t) {
                    var e = t instanceof HTMLElement;
                    return e ? t : "string" == typeof t ? document.querySelector(t) : this.element.parentNode;
                }
            }),
            (l.onPointerMove = function (t, e, n) {
                this.dispatchJQueryEvent("pointerMove", t, [e, n]);
            }),
            (l.dragMove = function (t, e, n) {
                if (this.isEnabled) {
                    var i = n.x,
                        r = n.y,
                        o = this.options.grid,
                        s = o && o[0],
                        l = o && o[1];
                    (i = a(i, s)),
                        (r = a(r, l)),
                        (i = this.containDrag("x", i, s)),
                        (r = this.containDrag("y", r, l)),
                        (i = "y" == this.options.axis ? 0 : i),
                        (r = "x" == this.options.axis ? 0 : r),
                        (this.position.x = this.startPosition.x + i),
                        (this.position.y = this.startPosition.y + r),
                        (this.dragPoint.x = i),
                        (this.dragPoint.y = r),
                        this.dispatchEvent("dragMove", t, [e, n]);
                }
            }),
            (l.containDrag = function (t, e, n) {
                if (!this.options.containment) return e;
                var i = "x" == t ? "width" : "height",
                    r = this.relativeStartPosition[t],
                    o = a(-r, n, "ceil"),
                    s = this.containSize[i];
                return (s = a(s, n, "floor")), Math.max(o, Math.min(s, e));
            }),
            (l.onPointerUp = function (t, e) {
                this.element.classList.remove("is-pointer-down"), this.dispatchJQueryEvent("pointerUp", t, [e]);
            }),
            (l.dragEnd = function (t, e) {
                this.isEnabled && ((this.element.style.transform = ""), this.setLeftTop(), this.element.classList.remove("is-dragging"), this.dispatchEvent("dragEnd", t, [e]));
            }),
            (l.animate = function () {
                if (this.isDragging) {
                    this.positionDrag();
                    var t = this;
                    requestAnimationFrame(function () {
                        t.animate();
                    });
                }
            }),
            (l.setLeftTop = function () {
                (this.element.style.left = this.position.x + "px"), (this.element.style.top = this.position.y + "px");
            }),
            (l.positionDrag = function () {
                this.element.style.transform = "translate3d( " + this.dragPoint.x + "px, " + this.dragPoint.y + "px, 0)";
            }),
            (l.staticClick = function (t, e) {
                this.dispatchEvent("staticClick", t, [e]);
            }),
            (l.setPosition = function (t, e) {
                (this.position.x = t), (this.position.y = e), this.setLeftTop();
            }),
            (l.enable = function () {
                this.isEnabled = !0;
            }),
            (l.disable = function () {
                (this.isEnabled = !1), this.isDragging && this.dragEnd();
            }),
            (l.destroy = function () {
                this.disable(),
                    (this.element.style.transform = ""),
                    (this.element.style.left = ""),
                    (this.element.style.top = ""),
                    (this.element.style.position = ""),
                    this.unbindHandles(),
                    this.$element && this.$element.removeData("draggabilly");
            }),
            (l._init = r),
            s && s.bridget && s.bridget("draggabilly", o),
            o
        );
    }),
    ($.fn.notify = function (t, e) {
        return this.each(function () {
            var e = $(this),
                n = $('<div class="popover notification-message"><div class="main-message">' + t + '</div><div class="dismiss-message">(Click on this box to dismiss)</div></div>');
            n.appendTo("body"),
                n
                    .position({ my: "center center", at: "center center", collision: "fit", of: e })
                    .show()
                    .click(function () {
                        $(this).remove();
                    });
        });
    }),
    $(function () {
        $(".flashMessage").on("click", document, function () {
            $(this).attr("data-flashMessage") && "" != $(this).attr("data-flashMessage") && flashMessage("#" != $(this).attr("data-flashMessage").charAt(0) ? $(this).attr("data-flashMessage") : $($(this).attr("data-flashMessage")).html());
        });
    }),
    (function (t) {
        t.fn.tagit = function (e, i) {
            return this.each(function () {
                function r(e) {
                    var i = !0;
                    return (
                        p
                            .parents("ul")
                            .children(".tagit-choice")
                            .each(function (r) {
                                (n = t(this).children("input").val()), e == n && (i = !1);
                            }),
                        i
                    );
                }
                function o(e) {
                    var n = "";
                    (e = e.toLowerCase()), (n = '<li data-value="' + e + '" class="tagit-choice">\n'), (n += e + "\n"), (n += '<a class="close">x</a>\n'), (n += "</li>\n");
                    var i = p.parent();
                    t(n).insertBefore(i), p.val("");
                }
                function a() {
                    var n = [];
                    u.find(".tagit-choice").each(function (e) {
                        n.push(t(this).attr("data-value"));
                    }),
                        e && e(n);
                }
                var s = t(this);
                s.addClass("tagit-input"), s.wrap("<ul></ul>");
                var l = 13,
                    c = 44,
                    u = s.parent();
                u.addClass("tagit");
                var d = t("<li class='tagit-new'></li>");
                s.wrap(d);
                var p = s,
                    h = i || s.val();
                h &&
                    (t.each(h.split(","), function (t, e) {
                        o(e);
                    }),
                    u.sortable({
                        items: "li.tagit-choice",
                        cursor: "move",
                        containment: "parent",
                        stop: function (t) {
                            a();
                        },
                    })),
                    u.click(function (e) {
                        "A" == e.target.tagName && (t(e.target).parent().remove(), a()), p.focus();
                    }),
                    p.keypress(function (t) {
                        if (t.which == c || t.which == l) {
                            t.preventDefault();
                            var e = p.val();
                            (e = e.replace(/,+$/, "")), (e = jQuery.trim(e)), "" != e && (r(e) && o(e), p.val(""), a(), p.focus());
                        }
                    });
            });
        };
    })(jQuery),
    (function (t) {
        "function" == typeof define && define.amd ? define(["jquery"], t) : t("object" == typeof module && "object" == typeof module.exports ? require("jquery") : jQuery);
    })(function (t) {
        function e() {
            var e = o.settings;
            if (e.autoDispose && !t.contains(document.documentElement, this)) return t(this).timeago("dispose"), this;
            var a = n(this);
            return isNaN(a.datetime) || (0 === e.cutoff || Math.abs(r(a.datetime)) < e.cutoff ? t(this).text(i(a.datetime)) : t(this).attr("title").length > 0 && t(this).text(t(this).attr("title"))), this;
        }
        function n(e) {
            if (((e = t(e)), !e.data("timeago"))) {
                e.data("timeago", { datetime: o.datetime(e) });
                var n = t.trim(e.text());
                o.settings.localeTitle ? e.attr("title", e.data("timeago").datetime.toLocaleString()) : !(n.length > 0) || (o.isTime(e) && e.attr("title")) || e.attr("title", n);
            }
            return e.data("timeago");
        }
        function i(t) {
            return o.inWords(r(t));
        }
        function r(t) {
            return new Date().getTime() - t.getTime();
        }
        t.timeago = function (e) {
            return i(e instanceof Date ? e : "string" == typeof e ? t.timeago.parse(e) : "number" == typeof e ? new Date(e) : t.timeago.datetime(e));
        };
        var o = t.timeago;
        t.extend(t.timeago, {
            settings: {
                refreshMillis: 6e4,
                allowPast: !0,
                allowFuture: !1,
                localeTitle: !1,
                cutoff: 0,
                autoDispose: !0,
                strings: {
                    prefixAgo: null,
                    prefixFromNow: null,
                    suffixAgo: "ago",
                    suffixFromNow: "from now",
                    inPast: "any moment now",
                    seconds: "less than a minute",
                    minute: "about a minute",
                    minutes: "%d minutes",
                    hour: "about an hour",
                    hours: "about %d hours",
                    day: "a day",
                    days: "%d days",
                    month: "about a month",
                    months: "%d months",
                    year: "about a year",
                    years: "%d years",
                    wordSeparator: " ",
                    numbers: [],
                },
            },
            inWords: function (e) {
                function n(n, r) {
                    var o = t.isFunction(n) ? n(r, e) : n,
                        a = (i.numbers && i.numbers[r]) || r;
                    return o.replace(/%d/i, a);
                }
                if (!this.settings.allowPast && !this.settings.allowFuture) throw "timeago allowPast and allowFuture settings can not both be set to false.";
                var i = this.settings.strings,
                    r = i.prefixAgo,
                    o = i.suffixAgo;
                if ((this.settings.allowFuture && 0 > e && ((r = i.prefixFromNow), (o = i.suffixFromNow)), !this.settings.allowPast && e >= 0)) return this.settings.strings.inPast;
                var a = Math.abs(e) / 1e3,
                    s = a / 60,
                    l = s / 60,
                    c = l / 24,
                    u = c / 365,
                    d =
                        (45 > a && n(i.seconds, Math.round(a))) ||
                        (90 > a && n(i.minute, 1)) ||
                        (45 > s && n(i.minutes, Math.round(s))) ||
                        (90 > s && n(i.hour, 1)) ||
                        (24 > l && n(i.hours, Math.round(l))) ||
                        (42 > l && n(i.day, 1)) ||
                        (30 > c && n(i.days, Math.round(c))) ||
                        (45 > c && n(i.month, 1)) ||
                        (365 > c && n(i.months, Math.round(c / 30))) ||
                        (1.5 > u && n(i.year, 1)) ||
                        n(i.years, Math.round(u)),
                    p = i.wordSeparator || "";
                return void 0 === i.wordSeparator && (p = " "), t.trim([r, d, o].join(p));
            },
            parse: function (e) {
                var n = t.trim(e);
                return (
                    (n = n.replace(/\.\d+/, "")),
                    (n = n.replace(/-/, "/").replace(/-/, "/")),
                    (n = n.replace(/T/, " ").replace(/Z/, " UTC")),
                    (n = n.replace(/([\+\-]\d\d)\:?(\d\d)/, " $1$2")),
                    (n = n.replace(/([\+\-]\d\d)$/, " $100")),
                    new Date(n)
                );
            },
            datetime: function (e) {
                var n = o.isTime(e) ? t(e).attr("datetime") : t(e).attr("title");
                return o.parse(n);
            },
            isTime: function (e) {
                return "time" === t(e).get(0).tagName.toLowerCase();
            },
        });
        var a = {
            init: function () {
                a.dispose.call(this);
                var n = t.proxy(e, this);
                n();
                var i = o.settings;
                i.refreshMillis > 0 && (this._timeagoInterval = setInterval(n, i.refreshMillis));
            },
            update: function (n) {
                var i = n instanceof Date ? n : o.parse(n);
                t(this).data("timeago", { datetime: i }), o.settings.localeTitle && t(this).attr("title", i.toLocaleString()), e.apply(this);
            },
            updateFromDOM: function () {
                t(this).data("timeago", { datetime: o.parse(o.isTime(this) ? t(this).attr("datetime") : t(this).attr("title")) }), e.apply(this);
            },
            dispose: function () {
                this._timeagoInterval && (window.clearInterval(this._timeagoInterval), (this._timeagoInterval = null));
            },
        };
        (t.fn.timeago = function (t, e) {
            var n = t ? a[t] : a.init;
            if (!n) throw new Error("Unknown function name '" + t + "' for timeago");
            return (
                this.each(function () {
                    n.call(this, e);
                }),
                this
            );
        }),
            document.createElement("abbr"),
            document.createElement("time");
    }),
    (ty.tooltip = {
        at: function (t) {
            return t.attr("tooltip-at")
                ? t.attr("tooltip-at")
                : "top" == t.attr("tooltip-position")
                ? "center top"
                : "bottom" == t.attr("tooltip-position")
                ? "center bottom"
                : "left" == t.attr("tooltip-position")
                ? "left center"
                : ("right" == t.attr("tooltip-position"), "right center");
        },
        my: function (t) {
            return t.attr("tooltip-my")
                ? t.attr("tooltip-my")
                : "top" == t.attr("tooltip-position")
                ? "center bottom"
                : "bottom" == t.attr("tooltip-position")
                ? "center top"
                : "left" == t.attr("tooltip-position")
                ? "right center"
                : ("right" == t.attr("tooltip-position"), "left center");
        },
    }),
    $(function () {
        $("body").delegate("[tooltip-content]", "mouseleave", function (t) {
            $(this).data("tooltip").remove();
        }),
            $("body").delegate(".popover-toggle", "click", function (t) {
                var e = $(this).data("popover");
                e
                    ? (e.hide(), $(this).after(e), $(this).removeData("popover"))
                    : ((e = $(this).next("popover")), e.show(), e.appendTo("body"), e.position({ collision: "fit", of: $(this), at: ty.tooltip.at($(this)), my: ty.tooltip.my($(this)) }), $(this).data("popover", e));
            }),
            $("body").delegate("[tooltip-content]", "mouseenter", function (t) {
                var e = $(this).attr("tooltip-content"),
                    n = $("<tooltip>" + e + "</tooltip>");
                $(this).data("tooltip", n), $("body").append(n), n.position({ collision: "fit", of: $(this), at: ty.tooltip.at($(this)), my: ty.tooltip.my($(this)) });
            });
    }),
    ($.fn.ty = {}),
    (function (t, e) {
        function n(t, e, n) {
            return t > e && e + n > t;
        }
        function i(t) {
            return /left|right/.test(t.css("float")) || /inline|table-cell/.test(t.css("display"));
        }
        t.widget("ui.sortable", t.ui.mouse, {
            version: "1.10.4",
            widgetEventPrefix: "sort",
            ready: !1,
            options: {
                appendTo: "parent",
                axis: !1,
                connectWith: !1,
                containment: !1,
                cursor: "auto",
                cursorAt: !1,
                dropOnEmpty: !0,
                forcePlaceholderSize: !1,
                forceHelperSize: !1,
                grid: !1,
                handle: !1,
                helper: "original",
                items: "> *",
                opacity: !1,
                placeholder: !1,
                revert: !1,
                scroll: !0,
                scrollSensitivity: 20,
                scrollSpeed: 20,
                scope: "default",
                tolerance: "intersect",
                zIndex: 1e3,
                activate: null,
                beforeStop: null,
                change: null,
                deactivate: null,
                out: null,
                over: null,
                receive: null,
                remove: null,
                sort: null,
                start: null,
                stop: null,
                update: null,
            },
            _create: function () {
                var t = this.options;
                (this.containerCache = {}),
                    this.element.addClass("ui-sortable"),
                    this.refresh(),
                    (this.floating = this.items.length ? "x" === t.axis || i(this.items[0].item) : !1),
                    (this.offset = this.element.offset()),
                    this._mouseInit(),
                    (this.ready = !0);
            },
            _destroy: function () {
                this.element.removeClass("ui-sortable ui-sortable-disabled"), this._mouseDestroy();
                for (var t = this.items.length - 1; t >= 0; t--) this.items[t].item.removeData(this.widgetName + "-item");
                return this;
            },
            _setOption: function (e, n) {
                "disabled" === e ? ((this.options[e] = n), this.widget().toggleClass("ui-sortable-disabled", !!n)) : t.Widget.prototype._setOption.apply(this, arguments);
            },
            _mouseCapture: function (e, n) {
                var i = null,
                    r = !1,
                    o = this;
                return this.reverting
                    ? !1
                    : this.options.disabled || "static" === this.options.type
                    ? !1
                    : (this._refreshItems(e),
                      t(e.target)
                          .parents()
                          .each(function () {
                              return t.data(this, o.widgetName + "-item") === o ? ((i = t(this)), !1) : void 0;
                          }),
                      t.data(e.target, o.widgetName + "-item") === o && (i = t(e.target)),
                      i &&
                      (!this.options.handle ||
                          n ||
                          (t(this.options.handle, i)
                              .find("*")
                              .addBack()
                              .each(function () {
                                  this === e.target && (r = !0);
                              }),
                          r))
                          ? ((this.currentItem = i), this._removeCurrentsFromItems(), !0)
                          : !1);
            },
            _mouseStart: function (e, n, i) {
                var r,
                    o,
                    a = this.options;
                if (
                    ((this.currentContainer = this),
                    this.refreshPositions(),
                    (this.helper = this._createHelper(e)),
                    this._cacheHelperProportions(),
                    this._cacheMargins(),
                    (this.scrollParent = this.helper.scrollParent()),
                    (this.offset = this.currentItem.offset()),
                    (this.offset = { top: this.offset.top - this.margins.top, left: this.offset.left - this.margins.left }),
                    t.extend(this.offset, { click: { left: e.pageX - this.offset.left, top: e.pageY - this.offset.top }, parent: this._getParentOffset(), relative: this._getRelativeOffset() }),
                    this.helper.css("position", "absolute"),
                    (this.cssPosition = this.helper.css("position")),
                    (this.originalPosition = this._generatePosition(e)),
                    (this.originalPageX = e.pageX),
                    (this.originalPageY = e.pageY),
                    a.cursorAt && this._adjustOffsetFromHelper(a.cursorAt),
                    (this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] }),
                    this.helper[0] !== this.currentItem[0] && this.currentItem.hide(),
                    this._createPlaceholder(),
                    a.containment && this._setContainment(),
                    a.cursor &&
                        "auto" !== a.cursor &&
                        ((o = this.document.find("body")), (this.storedCursor = o.css("cursor")), o.css("cursor", a.cursor), (this.storedStylesheet = t("<style>*{ cursor: " + a.cursor + " !important; }</style>").appendTo(o))),
                    a.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", a.opacity)),
                    a.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", a.zIndex)),
                    this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()),
                    this._trigger("start", e, this._uiHash()),
                    this._preserveHelperProportions || this._cacheHelperProportions(),
                    !i)
                )
                    for (r = this.containers.length - 1; r >= 0; r--) this.containers[r]._trigger("activate", e, this._uiHash(this));
                return (
                    t.ui.ddmanager && (t.ui.ddmanager.current = this), t.ui.ddmanager && !a.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e), (this.dragging = !0), this.helper.addClass("ui-sortable-helper"), this._mouseDrag(e), !0
                );
            },
            _mouseDrag: function (e) {
                var n,
                    i,
                    r,
                    o,
                    a = this.options,
                    s = !1;
                for (
                    this.position = this._generatePosition(e),
                        this.positionAbs = this._convertPositionTo("absolute"),
                        this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs),
                        this.options.scroll &&
                            (this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName
                                ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - e.pageY < a.scrollSensitivity
                                      ? (this.scrollParent[0].scrollTop = s = this.scrollParent[0].scrollTop + a.scrollSpeed)
                                      : e.pageY - this.overflowOffset.top < a.scrollSensitivity && (this.scrollParent[0].scrollTop = s = this.scrollParent[0].scrollTop - a.scrollSpeed),
                                  this.overflowOffset.left + this.scrollParent[0].offsetWidth - e.pageX < a.scrollSensitivity
                                      ? (this.scrollParent[0].scrollLeft = s = this.scrollParent[0].scrollLeft + a.scrollSpeed)
                                      : e.pageX - this.overflowOffset.left < a.scrollSensitivity && (this.scrollParent[0].scrollLeft = s = this.scrollParent[0].scrollLeft - a.scrollSpeed))
                                : (e.pageY - t(document).scrollTop() < a.scrollSensitivity
                                      ? (s = t(document).scrollTop(t(document).scrollTop() - a.scrollSpeed))
                                      : t(window).height() - (e.pageY - t(document).scrollTop()) < a.scrollSensitivity && (s = t(document).scrollTop(t(document).scrollTop() + a.scrollSpeed)),
                                  e.pageX - t(document).scrollLeft() < a.scrollSensitivity
                                      ? (s = t(document).scrollLeft(t(document).scrollLeft() - a.scrollSpeed))
                                      : t(window).width() - (e.pageX - t(document).scrollLeft()) < a.scrollSensitivity && (s = t(document).scrollLeft(t(document).scrollLeft() + a.scrollSpeed))),
                            s !== !1 && t.ui.ddmanager && !a.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e)),
                        this.positionAbs = this._convertPositionTo("absolute"),
                        (this.options.axis && "y" === this.options.axis) || (this.helper[0].style.left = this.position.left + "px"),
                        (this.options.axis && "x" === this.options.axis) || (this.helper[0].style.top = this.position.top + "px"),
                        n = this.items.length - 1;
                    n >= 0;
                    n--
                )
                    if (
                        ((i = this.items[n]),
                        (r = i.item[0]),
                        (o = this._intersectsWithPointer(i)),
                        o &&
                            i.instance === this.currentContainer &&
                            r !== this.currentItem[0] &&
                            this.placeholder[1 === o ? "next" : "prev"]()[0] !== r &&
                            !t.contains(this.placeholder[0], r) &&
                            ("semi-dynamic" === this.options.type ? !t.contains(this.element[0], r) : !0))
                    ) {
                        if (((this.direction = 1 === o ? "down" : "up"), "pointer" !== this.options.tolerance && !this._intersectsWithSides(i))) break;
                        this._rearrange(e, i), this._trigger("change", e, this._uiHash());
                        break;
                    }
                return this._contactContainers(e), t.ui.ddmanager && t.ui.ddmanager.drag(this, e), this._trigger("sort", e, this._uiHash()), (this.lastPositionAbs = this.positionAbs), !1;
            },
            _mouseStop: function (e, n) {
                if (e) {
                    if ((t.ui.ddmanager && !this.options.dropBehaviour && t.ui.ddmanager.drop(this, e), this.options.revert)) {
                        var i = this,
                            r = this.placeholder.offset(),
                            o = this.options.axis,
                            a = {};
                        (o && "x" !== o) || (a.left = r.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft)),
                            (o && "y" !== o) || (a.top = r.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)),
                            (this.reverting = !0),
                            t(this.helper).animate(a, parseInt(this.options.revert, 10) || 500, function () {
                                i._clear(e);
                            });
                    } else this._clear(e, n);
                    return !1;
                }
            },
            cancel: function () {
                if (this.dragging) {
                    this._mouseUp({ target: null }), "original" === this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                    for (var e = this.containers.length - 1; e >= 0; e--)
                        this.containers[e]._trigger("deactivate", null, this._uiHash(this)),
                            this.containers[e].containerCache.over && (this.containers[e]._trigger("out", null, this._uiHash(this)), (this.containers[e].containerCache.over = 0));
                }
                return (
                    this.placeholder &&
                        (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
                        "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(),
                        t.extend(this, { helper: null, dragging: !1, reverting: !1, _noFinalSort: null }),
                        this.domPosition.prev ? t(this.domPosition.prev).after(this.currentItem) : t(this.domPosition.parent).prepend(this.currentItem)),
                    this
                );
            },
            serialize: function (e) {
                var n = this._getItemsAsjQuery(e && e.connected),
                    i = [];
                return (
                    (e = e || {}),
                    t(n).each(function () {
                        var n = (t(e.item || this).attr(e.attribute || "id") || "").match(e.expression || /(.+)[\-=_](.+)/);
                        n && i.push((e.key || n[1] + "[]") + "=" + (e.key && e.expression ? n[1] : n[2]));
                    }),
                    !i.length && e.key && i.push(e.key + "="),
                    i.join("&")
                );
            },
            toArray: function (e) {
                var n = this._getItemsAsjQuery(e && e.connected),
                    i = [];
                return (
                    (e = e || {}),
                    n.each(function () {
                        i.push(t(e.item || this).attr(e.attribute || "id") || "");
                    }),
                    i
                );
            },
            _intersectsWith: function (t) {
                var e = this.positionAbs.left,
                    n = e + this.helperProportions.width,
                    i = this.positionAbs.top,
                    r = i + this.helperProportions.height,
                    o = t.left,
                    a = o + t.width,
                    s = t.top,
                    l = s + t.height,
                    c = this.offset.click.top,
                    u = this.offset.click.left,
                    d = "x" === this.options.axis || (i + c > s && l > i + c),
                    p = "y" === this.options.axis || (e + u > o && a > e + u),
                    h = d && p;
                return "pointer" === this.options.tolerance ||
                    this.options.forcePointerForContainers ||
                    ("pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > t[this.floating ? "width" : "height"])
                    ? h
                    : o < e + this.helperProportions.width / 2 && n - this.helperProportions.width / 2 < a && s < i + this.helperProportions.height / 2 && r - this.helperProportions.height / 2 < l;
            },
            _intersectsWithPointer: function (t) {
                var e = "x" === this.options.axis || n(this.positionAbs.top + this.offset.click.top, t.top, t.height),
                    i = "y" === this.options.axis || n(this.positionAbs.left + this.offset.click.left, t.left, t.width),
                    r = e && i,
                    o = this._getDragVerticalDirection(),
                    a = this._getDragHorizontalDirection();
                return r ? (this.floating ? ((a && "right" === a) || "down" === o ? 2 : 1) : o && ("down" === o ? 2 : 1)) : !1;
            },
            _intersectsWithSides: function (t) {
                var e = n(this.positionAbs.top + this.offset.click.top, t.top + t.height / 2, t.height),
                    i = n(this.positionAbs.left + this.offset.click.left, t.left + t.width / 2, t.width),
                    r = this._getDragVerticalDirection(),
                    o = this._getDragHorizontalDirection();
                return this.floating && o ? ("right" === o && i) || ("left" === o && !i) : r && (("down" === r && e) || ("up" === r && !e));
            },
            _getDragVerticalDirection: function () {
                var t = this.positionAbs.top - this.lastPositionAbs.top;
                return 0 !== t && (t > 0 ? "down" : "up");
            },
            _getDragHorizontalDirection: function () {
                var t = this.positionAbs.left - this.lastPositionAbs.left;
                return 0 !== t && (t > 0 ? "right" : "left");
            },
            refresh: function (t) {
                return this._refreshItems(t), this.refreshPositions(), this;
            },
            _connectWith: function () {
                var t = this.options;
                return t.connectWith.constructor === String ? [t.connectWith] : t.connectWith;
            },
            _getItemsAsjQuery: function (e) {
                function n() {
                    s.push(this);
                }
                var i,
                    r,
                    o,
                    a,
                    s = [],
                    l = [],
                    c = this._connectWith();
                if (c && e)
                    for (i = c.length - 1; i >= 0; i--)
                        for (o = t(c[i]), r = o.length - 1; r >= 0; r--)
                            (a = t.data(o[r], this.widgetFullName)),
                                a &&
                                    a !== this &&
                                    !a.options.disabled &&
                                    l.push([t.isFunction(a.options.items) ? a.options.items.call(a.element) : t(a.options.items, a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), a]);
                for (
                    l.push([
                        t.isFunction(this.options.items)
                            ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem })
                            : t(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
                        this,
                    ]),
                        i = l.length - 1;
                    i >= 0;
                    i--
                )
                    l[i][0].each(n);
                return t(s);
            },
            _removeCurrentsFromItems: function () {
                var e = this.currentItem.find(":data(" + this.widgetName + "-item)");
                this.items = t.grep(this.items, function (t) {
                    for (var n = 0; n < e.length; n++) if (e[n] === t.item[0]) return !1;
                    return !0;
                });
            },
            _refreshItems: function (e) {
                (this.items = []), (this.containers = [this]);
                var n,
                    i,
                    r,
                    o,
                    a,
                    s,
                    l,
                    c,
                    u = this.items,
                    d = [[t.isFunction(this.options.items) ? this.options.items.call(this.element[0], e, { item: this.currentItem }) : t(this.options.items, this.element), this]],
                    p = this._connectWith();
                if (p && this.ready)
                    for (n = p.length - 1; n >= 0; n--)
                        for (r = t(p[n]), i = r.length - 1; i >= 0; i--)
                            (o = t.data(r[i], this.widgetFullName)),
                                o &&
                                    o !== this &&
                                    !o.options.disabled &&
                                    (d.push([t.isFunction(o.options.items) ? o.options.items.call(o.element[0], e, { item: this.currentItem }) : t(o.options.items, o.element), o]), this.containers.push(o));
                for (n = d.length - 1; n >= 0; n--) for (a = d[n][1], s = d[n][0], i = 0, c = s.length; c > i; i++) (l = t(s[i])), l.data(this.widgetName + "-item", a), u.push({ item: l, instance: a, width: 0, height: 0, left: 0, top: 0 });
            },
            refreshPositions: function (e) {
                this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
                var n, i, r, o;
                for (n = this.items.length - 1; n >= 0; n--)
                    (i = this.items[n]),
                        (i.instance !== this.currentContainer && this.currentContainer && i.item[0] !== this.currentItem[0]) ||
                            ((r = this.options.toleranceElement ? t(this.options.toleranceElement, i.item) : i.item), e || ((i.width = r.outerWidth()), (i.height = r.outerHeight())), (o = r.offset()), (i.left = o.left), (i.top = o.top));
                if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this);
                else
                    for (n = this.containers.length - 1; n >= 0; n--)
                        (o = this.containers[n].element.offset()),
                            (this.containers[n].containerCache.left = o.left),
                            (this.containers[n].containerCache.top = o.top),
                            (this.containers[n].containerCache.width = this.containers[n].element.outerWidth()),
                            (this.containers[n].containerCache.height = this.containers[n].element.outerHeight());
                return this;
            },
            _createPlaceholder: function (e) {
                e = e || this;
                var n,
                    i = e.options;
                (i.placeholder && i.placeholder.constructor !== String) ||
                    ((n = i.placeholder),
                    (i.placeholder = {
                        element: function () {
                            var i = e.currentItem[0].nodeName.toLowerCase(),
                                r = t("<" + i + ">", e.document[0])
                                    .addClass(n || e.currentItem[0].className + " ui-sortable-placeholder")
                                    .removeClass("ui-sortable-helper");
                            return (
                                "tr" === i
                                    ? e.currentItem.children().each(function () {
                                          t("<td>&#160;</td>", e.document[0])
                                              .attr("colspan", t(this).attr("colspan") || 1)
                                              .appendTo(r);
                                      })
                                    : "img" === i && r.attr("src", e.currentItem.attr("src")),
                                n || r.css("visibility", "hidden"),
                                r
                            );
                        },
                        update: function (t, r) {
                            (!n || i.forcePlaceholderSize) &&
                                (r.height() || r.height(e.currentItem.innerHeight() - parseInt(e.currentItem.css("paddingTop") || 0, 10) - parseInt(e.currentItem.css("paddingBottom") || 0, 10)),
                                r.width() || r.width(e.currentItem.innerWidth() - parseInt(e.currentItem.css("paddingLeft") || 0, 10) - parseInt(e.currentItem.css("paddingRight") || 0, 10)));
                        },
                    })),
                    (e.placeholder = t(i.placeholder.element.call(e.element, e.currentItem))),
                    e.currentItem.after(e.placeholder),
                    i.placeholder.update(e, e.placeholder);
            },
            _contactContainers: function (e) {
                var r,
                    o,
                    a,
                    s,
                    l,
                    c,
                    u,
                    d,
                    p,
                    h,
                    f = null,
                    m = null;
                for (r = this.containers.length - 1; r >= 0; r--)
                    if (!t.contains(this.currentItem[0], this.containers[r].element[0]))
                        if (this._intersectsWith(this.containers[r].containerCache)) {
                            if (f && t.contains(this.containers[r].element[0], f.element[0])) continue;
                            (f = this.containers[r]), (m = r);
                        } else this.containers[r].containerCache.over && (this.containers[r]._trigger("out", e, this._uiHash(this)), (this.containers[r].containerCache.over = 0));
                if (f)
                    if (1 === this.containers.length) this.containers[m].containerCache.over || (this.containers[m]._trigger("over", e, this._uiHash(this)), (this.containers[m].containerCache.over = 1));
                    else {
                        for (a = 1e4, s = null, h = f.floating || i(this.currentItem), l = h ? "left" : "top", c = h ? "width" : "height", u = this.positionAbs[l] + this.offset.click[l], o = this.items.length - 1; o >= 0; o--)
                            t.contains(this.containers[m].element[0], this.items[o].item[0]) &&
                                this.items[o].item[0] !== this.currentItem[0] &&
                                (!h || n(this.positionAbs.top + this.offset.click.top, this.items[o].top, this.items[o].height)) &&
                                ((d = this.items[o].item.offset()[l]),
                                (p = !1),
                                Math.abs(d - u) > Math.abs(d + this.items[o][c] - u) && ((p = !0), (d += this.items[o][c])),
                                Math.abs(d - u) < a && ((a = Math.abs(d - u)), (s = this.items[o]), (this.direction = p ? "up" : "down")));
                        if (!s && !this.options.dropOnEmpty) return;
                        if (this.currentContainer === this.containers[m]) return;
                        s ? this._rearrange(e, s, null, !0) : this._rearrange(e, null, this.containers[m].element, !0),
                            this._trigger("change", e, this._uiHash()),
                            this.containers[m]._trigger("change", e, this._uiHash(this)),
                            (this.currentContainer = this.containers[m]),
                            this.options.placeholder.update(this.currentContainer, this.placeholder),
                            this.containers[m]._trigger("over", e, this._uiHash(this)),
                            (this.containers[m].containerCache.over = 1);
                    }
            },
            _createHelper: function (e) {
                var n = this.options,
                    i = t.isFunction(n.helper) ? t(n.helper.apply(this.element[0], [e, this.currentItem])) : "clone" === n.helper ? this.currentItem.clone() : this.currentItem;
                return (
                    i.parents("body").length || t("parent" !== n.appendTo ? n.appendTo : this.currentItem[0].parentNode)[0].appendChild(i[0]),
                    i[0] === this.currentItem[0] &&
                        (this._storedCSS = {
                            width: this.currentItem[0].style.width,
                            height: this.currentItem[0].style.height,
                            position: this.currentItem.css("position"),
                            top: this.currentItem.css("top"),
                            left: this.currentItem.css("left"),
                        }),
                    (!i[0].style.width || n.forceHelperSize) && i.width(this.currentItem.width()),
                    (!i[0].style.height || n.forceHelperSize) && i.height(this.currentItem.height()),
                    i
                );
            },
            _adjustOffsetFromHelper: function (e) {
                "string" == typeof e && (e = e.split(" ")),
                    t.isArray(e) && (e = { left: +e[0], top: +e[1] || 0 }),
                    "left" in e && (this.offset.click.left = e.left + this.margins.left),
                    "right" in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left),
                    "top" in e && (this.offset.click.top = e.top + this.margins.top),
                    "bottom" in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top);
            },
            _getParentOffset: function () {
                this.offsetParent = this.helper.offsetParent();
                var e = this.offsetParent.offset();
                return (
                    "absolute" === this.cssPosition && this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0]) && ((e.left += this.scrollParent.scrollLeft()), (e.top += this.scrollParent.scrollTop())),
                    (this.offsetParent[0] === document.body || (this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && t.ui.ie)) && (e = { top: 0, left: 0 }),
                    { top: e.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: e.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0) }
                );
            },
            _getRelativeOffset: function () {
                if ("relative" === this.cssPosition) {
                    var t = this.currentItem.position();
                    return { top: t.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(), left: t.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft() };
                }
                return { top: 0, left: 0 };
            },
            _cacheMargins: function () {
                this.margins = { left: parseInt(this.currentItem.css("marginLeft"), 10) || 0, top: parseInt(this.currentItem.css("marginTop"), 10) || 0 };
            },
            _cacheHelperProportions: function () {
                this.helperProportions = { width: this.helper.outerWidth(), height: this.helper.outerHeight() };
            },
            _setContainment: function () {
                var e,
                    n,
                    i,
                    r = this.options;
                "parent" === r.containment && (r.containment = this.helper[0].parentNode),
                    ("document" === r.containment || "window" === r.containment) &&
                        (this.containment = [
                            0 - this.offset.relative.left - this.offset.parent.left,
                            0 - this.offset.relative.top - this.offset.parent.top,
                            t("document" === r.containment ? document : window).width() - this.helperProportions.width - this.margins.left,
                            (t("document" === r.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top,
                        ]),
                    /^(document|window|parent)$/.test(r.containment) ||
                        ((e = t(r.containment)[0]),
                        (n = t(r.containment).offset()),
                        (i = "hidden" !== t(e).css("overflow")),
                        (this.containment = [
                            n.left + (parseInt(t(e).css("borderLeftWidth"), 10) || 0) + (parseInt(t(e).css("paddingLeft"), 10) || 0) - this.margins.left,
                            n.top + (parseInt(t(e).css("borderTopWidth"), 10) || 0) + (parseInt(t(e).css("paddingTop"), 10) || 0) - this.margins.top,
                            n.left +
                                (i ? Math.max(e.scrollWidth, e.offsetWidth) : e.offsetWidth) -
                                (parseInt(t(e).css("borderLeftWidth"), 10) || 0) -
                                (parseInt(t(e).css("paddingRight"), 10) || 0) -
                                this.helperProportions.width -
                                this.margins.left,
                            n.top +
                                (i ? Math.max(e.scrollHeight, e.offsetHeight) : e.offsetHeight) -
                                (parseInt(t(e).css("borderTopWidth"), 10) || 0) -
                                (parseInt(t(e).css("paddingBottom"), 10) || 0) -
                                this.helperProportions.height -
                                this.margins.top,
                        ]));
            },
            _convertPositionTo: function (e, n) {
                n || (n = this.position);
                var i = "absolute" === e ? 1 : -1,
                    r = "absolute" !== this.cssPosition || (this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0])) ? this.scrollParent : this.offsetParent,
                    o = /(html|body)/i.test(r[0].tagName);
                return {
                    top: n.top + this.offset.relative.top * i + this.offset.parent.top * i - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : o ? 0 : r.scrollTop()) * i,
                    left: n.left + this.offset.relative.left * i + this.offset.parent.left * i - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : o ? 0 : r.scrollLeft()) * i,
                };
            },
            _generatePosition: function (e) {
                var n,
                    i,
                    r = this.options,
                    o = e.pageX,
                    a = e.pageY,
                    s = "absolute" !== this.cssPosition || (this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0])) ? this.scrollParent : this.offsetParent,
                    l = /(html|body)/i.test(s[0].tagName);
                return (
                    "relative" !== this.cssPosition || (this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0]) || (this.offset.relative = this._getRelativeOffset()),
                    this.originalPosition &&
                        (this.containment &&
                            (e.pageX - this.offset.click.left < this.containment[0] && (o = this.containment[0] + this.offset.click.left),
                            e.pageY - this.offset.click.top < this.containment[1] && (a = this.containment[1] + this.offset.click.top),
                            e.pageX - this.offset.click.left > this.containment[2] && (o = this.containment[2] + this.offset.click.left),
                            e.pageY - this.offset.click.top > this.containment[3] && (a = this.containment[3] + this.offset.click.top)),
                        r.grid &&
                            ((n = this.originalPageY + Math.round((a - this.originalPageY) / r.grid[1]) * r.grid[1]),
                            (a = this.containment
                                ? n - this.offset.click.top >= this.containment[1] && n - this.offset.click.top <= this.containment[3]
                                    ? n
                                    : n - this.offset.click.top >= this.containment[1]
                                    ? n - r.grid[1]
                                    : n + r.grid[1]
                                : n),
                            (i = this.originalPageX + Math.round((o - this.originalPageX) / r.grid[0]) * r.grid[0]),
                            (o = this.containment
                                ? i - this.offset.click.left >= this.containment[0] && i - this.offset.click.left <= this.containment[2]
                                    ? i
                                    : i - this.offset.click.left >= this.containment[0]
                                    ? i - r.grid[0]
                                    : i + r.grid[0]
                                : i))),
                    {
                        top: a - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : l ? 0 : s.scrollTop()),
                        left: o - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : l ? 0 : s.scrollLeft()),
                    }
                );
            },
            _rearrange: function (t, e, n, i) {
                n ? n[0].appendChild(this.placeholder[0]) : e.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? e.item[0] : e.item[0].nextSibling), (this.counter = this.counter ? ++this.counter : 1);
                var r = this.counter;
                this._delay(function () {
                    r === this.counter && this.refreshPositions(!i);
                });
            },
            _clear: function (t, e) {
                function n(t, e, n) {
                    return function (i) {
                        n._trigger(t, i, e._uiHash(e));
                    };
                }
                this.reverting = !1;
                var i,
                    r = [];
                if ((!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), (this._noFinalSort = null), this.helper[0] === this.currentItem[0])) {
                    for (i in this._storedCSS) ("auto" === this._storedCSS[i] || "static" === this._storedCSS[i]) && (this._storedCSS[i] = "");
                    this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
                } else this.currentItem.show();
                for (
                    this.fromOutside &&
                        !e &&
                        r.push(function (t) {
                            this._trigger("receive", t, this._uiHash(this.fromOutside));
                        }),
                        (!this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0]) ||
                            e ||
                            r.push(function (t) {
                                this._trigger("update", t, this._uiHash());
                            }),
                        this !== this.currentContainer &&
                            (e ||
                                (r.push(function (t) {
                                    this._trigger("remove", t, this._uiHash());
                                }),
                                r.push(
                                    function (t) {
                                        return function (e) {
                                            t._trigger("receive", e, this._uiHash(this));
                                        };
                                    }.call(this, this.currentContainer)
                                ),
                                r.push(
                                    function (t) {
                                        return function (e) {
                                            t._trigger("update", e, this._uiHash(this));
                                        };
                                    }.call(this, this.currentContainer)
                                ))),
                        i = this.containers.length - 1;
                    i >= 0;
                    i--
                )
                    e || r.push(n("deactivate", this, this.containers[i])), this.containers[i].containerCache.over && (r.push(n("out", this, this.containers[i])), (this.containers[i].containerCache.over = 0));
                if (
                    (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), this.storedStylesheet.remove()),
                    this._storedOpacity && this.helper.css("opacity", this._storedOpacity),
                    this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex),
                    (this.dragging = !1),
                    this.cancelHelperRemoval)
                ) {
                    if (!e) {
                        for (this._trigger("beforeStop", t, this._uiHash()), i = 0; i < r.length; i++) r[i].call(this, t);
                        this._trigger("stop", t, this._uiHash());
                    }
                    return (this.fromOutside = !1), !1;
                }
                if ((e || this._trigger("beforeStop", t, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.helper[0] !== this.currentItem[0] && this.helper.remove(), (this.helper = null), !e)) {
                    for (i = 0; i < r.length; i++) r[i].call(this, t);
                    this._trigger("stop", t, this._uiHash());
                }
                return (this.fromOutside = !1), !0;
            },
            _trigger: function () {
                t.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel();
            },
            _uiHash: function (e) {
                var n = e || this;
                return { helper: n.helper, placeholder: n.placeholder || t([]), position: n.position, originalPosition: n.originalPosition, offset: n.positionAbs, item: n.currentItem, sender: e ? e.element : null };
            },
        });
    })(jQuery),
    angular
        .module("user.loginMenu", ["vcRecaptcha"])
        .config([
            "$stateProvider",
            function (t) {
                t.state("unsubscribedFromEmails", {
                    url: "/user/unsubscribed?token&id",
                    views: {
                        main: {
                            templateUrl: "/tmpl/user/unsubscribed",
                            controller: [
                                "$scope",
                                "$stateParams",
                                "$rootScope",
                                "$http",
                                "$location",
                                function (t, e, n, i, r) {
                                    n.mobileController = "board";
                                    var o = e.token,
                                        a = e.id;
                                    t.submit = function (e) {
                                        return e.password2 != e.password
                                            ? void (t.error = "Board missing tags. Set some tags first please!")
                                            : void i
                                                  .post("/api/resetPassword", { token: o, password: e.password, _id: a })
                                                  .success(function (t, e) {
                                                      r.path("/"), n.openRegister(), analytics.track("Reset password", { user: a });
                                                  })
                                                  .error(function (e, n) {
                                                      t.error = e;
                                                  });
                                    };
                                },
                            ],
                        },
                    },
                }),
                    t.state("resetPassword", {
                        url: "/user/resetPassword?token&id",
                        views: {
                            main: {
                                templateUrl: "/tmpl/user/resetPassword",
                                controller: [
                                    "$scope",
                                    "$stateParams",
                                    "$rootScope",
                                    "$http",
                                    "$location",
                                    function (t, e, n, i, r) {
                                        n.mobileController = "board";
                                        var o = e.token,
                                            a = e.id;
                                        t.submit = function (e) {
                                            return e.password2 != e.password
                                                ? void (t.error = "Board missing tags. Set some tags first please!")
                                                : void i
                                                      .post("/api/resetPassword", { token: o, password: e.password, _id: a })
                                                      .success(function (t, e) {
                                                          r.path("/"), n.openRegister(), analytics.track("Reset password", { user: a });
                                                      })
                                                      .error(function (e, n) {
                                                          t.error = e;
                                                      });
                                        };
                                    },
                                ],
                            },
                        },
                    });
            },
        ])
        .run([
            "$rootScope",
            "$modal",
            "$http",
            "Pusher",
            "$state",
            function (t, e, n, i, r) {
                var o = function (e) {
                        var n = i.subscribe("user-" + localStorage.userId + "-" + e.secret);
                        n.bind("changed", function (e) {
                            e._pusherFailed
                                ? ty.get("user/accounts/login", function (n) {
                                      (t.currentUser = e), t.$digest();
                                  })
                                : ((t.currentUser = e), t.$digest());
                        }),
                            (t.currentUser = e),
                            t.$broadcast("login", e),
                            a(e);
                    },
                    a = function (t) {
                        var e = t;
                        (e.name = t.username), (e.id = t._id), t.profile && ((e.gender = t.profile.gender), (e.avatar = t.profile.image)), (e.email = t.emails[0].address), analytics.identify(localStorage.userId, e);
                    };
                "anon" != ty.currentUser
                    ? (o(ty.currentUser), analytics.track("New tab login"))
                    : localStorage.userId
                    ? ty.get("user/accounts/login", function (t, e, n) {
                          o(t), analytics.track("New tab login");
                      })
                    : analytics.track("New tab anon");
                var s = function (t, e) {
                        n.post("/api/login", t.user)
                            .success(function (n, i) {
                                n &&
                                    n._id &&
                                    (($.cookie.json = !0),
                                    $.cookie("loginToken", { loginToken: n.token, userId: n._id }, { path: "/", expires: 5475 }),
                                    (localStorage.userId = n._id),
                                    (localStorage.username = n.username),
                                    delete n.token,
                                    o(n),
                                    (t.loginError = void 0),
                                    analytics.track("Login"),
                                    e.close(),
                                    location.reload());
                            })
                            .error(function (e, n) {
                                t.loginError = e.err;
                            });
                    },
                    l = {
                        backdrop: !0,
                        keyboard: !0,
                        windowClass: "modal forgotPasswordDialog",
                        backdropClick: !0,
                        templateUrl: "/tmpl/user/forgotPassword",
                        controller: [
                            "$scope",
                            "$modalInstance",
                            function (t, e) {
                                (t.recoverPassword = function (i) {
                                    (t.user = i),
                                        n
                                            .post("/api/forgotPassword", t.user)
                                            .success(function (t, n) {
                                                $(".forgotPasswordDialog").notify("Check your email for your account recovery details."), e.close();
                                            })
                                            .error(function (e, n) {
                                                t.error = e;
                                            });
                                }),
                                    (t.close = function () {
                                        e.close(), analytics.track("Register box close");
                                    });
                            },
                        ],
                    };
                t.forgotPasswordOpen = function () {
                    e.open(l);
                };
                var c = {
                    backdrop: !0,
                    keyboard: !0,
                    windowClass: "modal registerDialog loginOrRegisterDialog",
                    backdropClick: !0,
                    templateUrl: "/tmpl/user/registerForm",
                    controller: [
                        "$scope",
                        "$modalInstance",
                        "vcRecaptchaService",
                        function (t, e, i) {
                            (t.model = { key: "6Lf5qRsUAAAAAIFgm_bOXFI_UbDS0RQm_Bg9Cilt" }),
                                (t.login = function (n) {
                                    (t.user = n), s(t, e);
                                }),
                                (t.register = function (i) {
                                    (t.user = i),
                                        n
                                            .post("/api/register", t.user)
                                            .success(function (n, i) {
                                                s(t, e), r.includes("frontpage") && r.go("standard.boards.board");
                                            })
                                            .error(function (e, n) {
                                                t.error = e;
                                            });
                                }),
                                (t.close = function () {
                                    e.close(), analytics.track("Register box close");
                                });
                        },
                    ],
                };
                (t.openRegister = function (t) {
                    (c.windowClass = "modal registerDialog loginOrRegisterDialog"), "loginOnly" == t ? (c.windowClass = c.windowClass + " loginOnly") : "registerOnly" == t && (c.windowClass = c.windowClass + " registerOnly"), e.open(c);
                }),
                    (t.logout = function () {
                        analytics.track("Logout"),
                            i.unsubscribe("user-" + t.currentUser._id + "-" + t.currentUser.secret),
                            (t.currentUser = void 0),
                            localStorage.removeItem("userId"),
                            localStorage.removeItem("token"),
                            localStorage.removeItem("username"),
                            $.removeCookie("loginToken", { path: "/" }),
                            location.reload();
                    }),
                    (t.resendVerificationEmail = function () {
                        t.resendVerificationEmailSent ||
                            (analytics.track("resendVerificationEmail"),
                            ty.get("user/resendEmailVerification", function () {
                                (t.resendVerificationEmailSent = !0), t.$apply(), flashMessage("Email sent.");
                            }));
                    });
            },
        ])
        .factory("feed", [
            "$rootScope",
            function (t) {
                return function (e, n) {
                    var i = e.type + "." + e.path,
                        r = { n: "Anon" };
                    t.currentUser && ((r = { _id: t.currentUser._id, n: t.currentUser.username }), t.currentUser.profile && (r.avatar = t.currentUser.profile.image));
                    var o = { path: i, from: r, url: window.location.pathname },
                        a = _.defaults(o, e);
                    ty.post("feed", a, function () {
                        n && n(arguments);
                    });
                };
            },
        ])
        .directive("loginMenu", function () {
            return {
                templateUrl: "/tmpl/user/loginMenu",
                replace: !0,
                controller: [
                    "$scope",
                    "$element",
                    "$modal",
                    "$http",
                    "$rootScope",
                    "Pusher",
                    "chatWindow",
                    "$location",
                    function (t, e, n, i, r, o, a, s) {
                        (t.openFeedItem = function (e) {
                            var e = e.value,
                                n = e.from;
                            ty.del("feed", { path: e.path }, function (e) {
                                (r.currentUser = e), t.$digest();
                            }),
                                "pm" == e.type ? a(n._id, n.n) : ("like" == e.type || "review" == e.type || "goLive" == e.type) && s.path(e.url);
                        }),
                            (t.dismissFeedItem = function (e) {
                                var e = e.value;
                                e.from;
                                ty.del("feed", { path: e.path }, function (e) {
                                    (r.currentUser = e), t.$digest();
                                });
                            }),
                            (t.clearFeed = function () {
                                ty.del("feed", function (e) {
                                    (r.currentUser = e), t.$digest();
                                });
                            }),
                            (t.feedCount = function () {
                                if (!r.currentUser || !r.currentUser.feed) return 0;
                                var t = 0;
                                return (
                                    _.each(r.currentUser.feed, function (e) {
                                        (t = _.size(e) + t), e.$$hashKey && (t -= 1);
                                    }),
                                    t
                                );
                            }),
                            (t.recentChats = function () {
                                return _.take(r.currentUser.profile.chatWindow, 5);
                            }),
                            (t.classByUserId = function (t) {
                                return "chatWindow-" + t._id;
                            }),
                            (t.openWindow = function (t, e) {
                                r.currentUser.profile.chatWindow.splice(e, 1), a(t._id, t.n, t.image);
                            }),
                            (r.isModerator = function (t, e) {
                                return r.currentUser && -1 != ty.moderators.indexOf(r.currentUser._id) ? !0 : void 0;
                            }),
                            (t.enableModerator = function (t, e) {
                                (r.moderatorEnabled = !0), r.$broadcast("moderatorEnabled");
                            }),
                            (t.disableModerator = function (t, e) {
                                (r.moderatorEnabled = void 0), r.$broadcast("moderatorEnabled");
                            });
                    },
                ],
                link: function (t, e, n, i, r) {},
            };
        }),
    angular
        .module("anonkun.board", [])
        .config([
            "$stateProvider",
            function (t) {
                t.state("standard.boards.createBoard", {
                    url: "/boards/create",
                    views: {
                        "content@standard": {
                            templateUrl: "/tmpl/anonkun/board/create",
                            controller: [
                                "$scope",
                                "$stateParams",
                                "$rootScope",
                                "$http",
                                "$location",
                                "suggestedTags",
                                function (t, e, n, i, r, o) {
                                    (n.mobileController = "board"),
                                        (t.suggestedTags = o),
                                        (n.threads = !0),
                                        (n.pageTitle = "Board - Create"),
                                        (t.submit = function () {
                                            return (
                                                t.board.criteria || (t.board.criteria = {}),
                                                (t.board.criteria.t = t.board.t),
                                                t.board.criteria.ta && t.board.criteria.ta.all
                                                    ? (i
                                                          .post("/api/anonkun/board", t.board.criteria)
                                                          .success(function (e, n) {
                                                              r.path("/" + ty.url(t.board.t.toLowerCase())),
                                                                  ty.get("anonkun/board/watch/" + ty.url(t.board.t.toLowerCase())),
                                                                  analytics.track("Board watch", { board: t.board.t.toLowerCase() });
                                                          })
                                                          .error(function (e, n) {
                                                              "already exists" == e && (t.error = "Board already exists. You can try creating a board with a different name."),
                                                                  401 == n && (t.error = "You must be logged in to make a board.");
                                                          }),
                                                      void analytics.track("Board create", { criteria: t.board.criteria }))
                                                    : void (t.error = "Board missing tags. Set some tags first please!")
                                            );
                                        }),
                                        t.$watch("storiesFilterCriteria", function () {
                                            t.board || (t.board = {}),
                                                (t.board.criteria = n.storiesFilterCriteria),
                                                i.post("/api/anonkun/filteredStories", { criteria: n.storiesFilterCriteria }).success(function (e) {
                                                    t.stories = e;
                                                });
                                        }),
                                        t.setCurrentChatID("anonkun_board_social"),
                                        t.setCurrentThreadHref("/stories/threads"),
                                        analytics.track("Board view create");
                                },
                            ],
                        },
                    },
                }),
                    t.state("standard.boards.all", {
                        url: "/boards/all",
                        views: {
                            "content@standard": {
                                templateUrl: "/tmpl/anonkun/board/all",
                                controller: [
                                    "$scope",
                                    "$stateParams",
                                    "$rootScope",
                                    "$http",
                                    function (t, e, n, i) {
                                        (n.mobileController = "board"),
                                            (n.threads = !0),
                                            i.get("/api/anonkun/boards/99999").success(function (e) {
                                                t.boards = _.filter(e, function (t) {
                                                    return t.i ? t.i.length > 2 : void 0;
                                                });
                                                _.pluck(t.boards, "_id");
                                            }),
                                            (n.pageTitle = "All Boards"),
                                            analytics.track("Board view all boards list"),
                                            t.setCurrentChatID("anonkun_board_social"),
                                            t.setCurrentThreadHref("/social/threads");
                                    },
                                ],
                            },
                        },
                    }),
                    t.state("standard.boards.board", { url: "/:board?page", views: { "content@standard": { templateUrl: "/tmpl/anonkun/board/board", controller: "boardController" } } }),
                    t.state("standard.boards.board.threads", { url: "/threads?threadPage", views: { "content@standard": { templateUrl: "/tmpl/anonkun/board/threads", controller: "boardController" } }, data: { threads: !0 } }),
                    t.state("standard.boards.board.new", { url: "/new", views: { "content@standard": { templateUrl: "/tmpl/anonkun/board/board", controller: "boardController" } }, data: { new: !0 } }),
                    t.state("standard.boards.board.top", { url: "/top", views: { "content@standard": { templateUrl: "/tmpl/anonkun/board/board", controller: "boardController" } }, data: { top: !0 } }),
                    t.state("standard.boards.board.like", { url: "/like", views: { "content@standard": { templateUrl: "/tmpl/anonkun/board/board", controller: "boardController" } }, data: { like: !0 } }),
                    t.state("standard.boards.board.updated", { url: "/updated", views: { "content@standard": { templateUrl: "/tmpl/anonkun/board/board", controller: "boardController" } }, data: { updated: !0 } });
            },
        ])
        .controller("boardController", [
            "$scope",
            "tySubscribe",
            "$stateParams",
            "$state",
            "$location",
            "$rootScope",
            "$http",
            "$interval",
            "$modal",
            "$timeout",
            function (t, e, n, i, r, o, a, s, l, c) {
                var u = n.board;
                (o.mobileController = "board"),
                    u || (u = "stories"),
                    (u = u.toLowerCase()),
                    (t.boardID = u),
                    ty.get("node/anonkun_board_" + u, function (e) {
                        e || (e = { _id: "anonkun_board_" + u, t: u, ta: { all: [u] } }), (t.listLoaded = !0), (t.board = e), t.$digest();
                    }),
                    $("#boardInformation").length && $("#boardInformation").css({ left: $("#board .board-main").offset().left }),
                    "stories" != u && "live" != u && "anonkun" != u && "fiction.live" != u && "anonquest" != u
                        ? (t.setCurrentChatID("anonkun_board_" + u), t.setCurrentThreadHref("/" + u + "/threads"))
                        : (t.setCurrentChatID("anonkun_board_social"), t.setCurrentThreadHref("/stories/threads")),
                    "live" == u && e.list({ scope: t, path: "anonkun/nextLive", property: "upcoming", public: !0 }),
                    (t.setCompact = function () {
                        t.listViewCompact ? localStorage.removeItem("listViewCompact") : localStorage.setItem("listViewCompact", !0);
                    }),
                    (t.title = u.replace("-", " ")),
                    (o.pageTitle = u + " board - " + o.siteName),
                    analytics.track("Board view", { board: u }),
                    (t.getHref = function (t) {
                        return "/" + u + "?page=" + t;
                    }),
                    (t.itemsPerPage = 20),
                    (t.maxSize = 10);
                var d = localStorage.boardFilters || "{}";
                (d = JSON.parse(d)),
                    d.contentRating
                        ? (t.boardFilter = d)
                        : ((t.boardFilter = { contentRating: { teen: !0, nsfw: !0, mature: !0 }, storyStatus: { active: !0, finished: !0, hiatus: !0 } }), (localStorage.boardFilters = JSON.stringify(t.boardFilter))),
                    (t.boardFilter.sort = "Latest"),
                    (t.threads = !1),
                    i.current &&
                        i.current.data &&
                        ((t.threads = i.current.data.threads),
                        (t.boardFilter.threads = t.threads),
                        i.current.data.updated &&
                            ((t.boardFilter.sort = "UpdatedChapter"),
                            (t.getHref = function (t) {
                                return "/" + u + "/updated?page=" + t;
                            })),
                        i.current.data["new"] &&
                            ((t.boardFilter.sort = "new"),
                            (t.getHref = function (t) {
                                return "/" + u + "/new?page=" + t;
                            })),
                        i.current.data.like &&
                            ((t.boardFilter.sort = "like"),
                            (t.getHref = function (t) {
                                return "/" + u + "/like?page=" + t;
                            })),
                        i.current.data.top &&
                            ((t.boardFilter.sort = "top"),
                            (t.getHref = function (t) {
                                return "/" + u + "/top?page=" + t;
                            })));
                var p = 1,
                    h = n.page;
                h && ((h = h.split("/")), (p = parseInt(h[h.length - 1])));
                var f = !0;
                t.$watch(
                    "boardFilter",
                    function () {
                        return f ? void (f = !1) : ((localStorage.boardFilters = JSON.stringify(t.boardFilter)), t.selectPage(), void window.scrollTo(0, 0));
                    },
                    !0
                ),
                    (t.currentPage = p);
                var m = s(function () {
                    t.selectPage(t.currentPage);
                }, 24e4);
                t.$on("$destroy", function () {
                    s.cancel(m);
                }),
                    (t.selectPage = function (e) {
                        (t.showSearchResults = !1),
                            e || (e = 1),
                            ty.get("anonkun/board/" + u + "/" + e + "?" + $.param(t.boardFilter), function (e) {
                                (t.stories = e.stories), t.$digest();
                            }),
                            analytics.track("View board page", { page: e });
                    }),
                    (t.search = {}),
                    t.$watch("search.searchTerms", function (e, n) {
                        !e && n && t.selectPage(t.currentPage),
                            e &&
                                ty.post("anonkun/search", { terms: t.search.searchTerms, nt: "story" }, function (e) {
                                    (t.stories = e), (t.showSearchResults = !0), t.$digest();
                                });
                    }),
                    t.selectPage(p),
                    window.scrollTo(0, 0),
                    (t.watchBoard = function () {
                        return o.currentUser ? (ty.get("anonkun/board/watch/" + u), void analytics.track("Board watch", { board: u })) : void o.openRegister();
                    }),
                    (t.unwatchBoard = function () {
                        ty.get("anonkun/board/unwatch/" + u), analytics.track("Board unwatch", { board: u });
                    }),
                    (t.postThread = function () {
                        if (!o.currentUser) return void o.openRegister();
                        ty.post("anonkun/board/item", { r: [u] }, function (e) {
                            r.path("/" + u + "/my-new-post/" + e._id), t.$apply();
                        });
                    }),
                    "live" == u || t.currentPage > 1,
                    (t.expandAbout = function () {
                        t.expandedAbout ? (t.expandedAbout = !1) : (t.expandedAbout = !0);
                    }),
                    (t.openFilter = function () {
                        t.expandedFilter ? (t.expandedFilter = !1) : (t.expandedFilter = !0);
                    }),
                    (t.openSort = function () {
                        t.expandedSort ? (t.expandedSort = !1) : (t.expandedSort = !0);
                    }),
                    t.$on("storiesTagsChange", function (e, n) {
                        console.log(n), console.log(t.boardFilter), (t.boardFilter.ta = n.ta);
                    });
            },
        ])
        .controller("bestNew", [
            "$scope",
            "tySubscribe",
            "$stateParams",
            "$location",
            "$rootScope",
            function (t, e, n, i, r) {
                t.listViewCompact = !0;
            },
        ]),
    angular.module("anonkun.boardsList", []).directive("boardsList", function () {
        return {
            replace: !0,
            templateUrl: "/tmpl/anonkun/board/list",
            controller: [
                "$scope",
                "$http",
                "$rootScope",
                function (t, e, n) {
                    var i = (window.innerHeight - $("#header").outerHeight(!0) - 20 - $("#mainLinks").outerHeight(!0), ["adventure", "romance", "politics", "scifi", "fantasy", "smut", "anime", "drama", "social", "writing"]),
                        r = function (t) {
                            t(i);
                        },
                        o = function (t) {
                            n.currentUser &&
                                e
                                    .get("/api/anonkun/collections/lite/byTitle/watching/" + n.currentUser.username)
                                    .then(function (e) {
                                        t && t(e.data);
                                    })
                                    ["catch"](function () {
                                        t && t();
                                    });
                        },
                        a = function (t) {
                            n.currentUser &&
                                e
                                    .get("/api/anonkun/following/" + n.currentUser._id)
                                    .then(function (e) {
                                        t && t(e.data);
                                    })
                                    ["catch"](function () {
                                        t && t();
                                    });
                        },
                        s = function (t) {
                            n.currentUser &&
                                e
                                    .get("/api/anonkun/userCollections/" + n.currentUser._id)
                                    .then(function (e) {
                                        t && t(e.data);
                                    })
                                    ["catch"](function () {
                                        t && t();
                                    });
                        };
                    t.$watch("currentUser.profile.boards", function () {
                        r(function (e) {
                            t.boards = e;
                        });
                    }),
                        t.$watch("currentUser._id", function () {
                            h();
                        });
                    var l,
                        c = {},
                        u = function (t) {
                            c[t] = c[t] || {};
                            var e = ty.realtime.join("node-" + t);
                            e.bind("changed", function (e) {
                                l = n.currentUser.profile.lastSeen;
                                var i = $('.watching.external a[data-id="' + t + '"]');
                                e.isLive ? (i.find(".live-icon").removeClass("hidden"), i.find(".nextLive").addClass("hidden")) : i.find(".live-icon").addClass("hidden"),
                                    e.nextLive ? (i.find(".nextLive").attr("data-nextLive", e.nextLive), i.find(".nextLive").removeClass("hidden")) : i.find(".nextLive").removeAttr("data-nextLive"),
                                    n.story && e._id === n.story._id && ((l[e._id] = { cht: e.cht, p: e.p }), ty.user.updateProfile("lastSeen", l)),
                                    (c[e._id] = { p: e.p, cht: e.cht }),
                                    p(i, e, l[e._id].cht),
                                    d(i, e, l[e._id].p);
                            });
                        },
                        d = function (t, e, n) {
                            var i = e.p - n;
                            i > 0 ? t.find(".newPosts").removeClass("hidden").find(".value").text(i) : t.find(".newPosts").addClass("hidden").find(".value").text(i);
                        },
                        p = function (t, e, n) {
                            if (e.cht > n) {
                                var i = new Date(new Date().getTime() - 1e4).getTime();
                                e.cht &&
                                    n &&
                                    (!localStorage.getItem("lastPlayedAudio") || parseInt(localStorage.getItem("lastPlayedAudio")) < i) &&
                                    t.find(".newChapter").hasClass("hidden") &&
                                    (ty.media.playnow({ volume: 0.4, wav: "https://d2t4fc8ff77neh.cloudfront.net/cardSrcMedia/17caqcfo7_80921__justinbw__buttonchime02up.wav" }),
                                    localStorage.setItem("lastPlayedAudio", new Date().getTime())),
                                    t.find(".newChapter").removeClass("hidden");
                            } else t.find(".newChapter").addClass("hidden");
                        };
                    t.$watch("currentUser.profile.lastSeen", function () {
                        l &&
                            ((l = n.currentUser.profile.lastSeen),
                            _.each(c, function (t, e) {
                                var n = $('.watching.external a[data-id="' + e + '"]');
                                d(n, t, l[e].p), p(n, t, l[e].cht);
                            }));
                    });
                    var h = function () {
                        a(function (e) {
                            s(function (i) {
                                r(function (r) {
                                    o(function (o) {
                                        var a = n.currentUser.profile;
                                        if ((o && o.collectionList && o.collectionList.length > 0 && (a.settings.disallowLeftSideBar || $("body").addClass("allowLeftSidebar")), o)) {
                                            (a.lastSeen = a.lastSeen || {}),
                                                (l = a.lastSeen),
                                                n.$watch("story._id", function (t, e) {
                                                    if (($(".watching.external a").removeClass("active"), t != e && $('.watching.external a[data-id="' + e + '"]').length > 0 && u(e), t)) {
                                                        var i = $('.watching.external a[data-id="' + t + '"]');
                                                        i.addClass("active"), ((!l[t] && i.length > 0) || (l[t] && n.story.p != l[t].p)) && ((l[t] = { cht: n.story.cht, p: n.story.p }), ty.user.updateProfile("lastSeen", l));
                                                        var i = $('.watching.external a[data-id="' + t + '"]');
                                                        i.addClass("active");
                                                    }
                                                });
                                            var s = [];
                                            o.collectionList.forEach(function (t) {
                                                var e = o.collectionDetail.collection.indexOf(t._id);
                                                (s[e] = t), l[t._id] || (l[t._id] = { cht: t.cht, p: t.p }), l[t._id].cht >= t.cht && (t.noNewChapter = !0), l[t._id].p < t.p && (t.pDiff = t.p - l[t._id].p), u(t._id);
                                            });
                                        }
                                        (s = _.compact(s)),
                                            (n.sideContent = { boards: r, watching: s, following: e, collections: i }),
                                            (t.afterRenderingWatching = function () {
                                                $(".watching.external>nav").sortable({
                                                    items: "a.storyListItem.listItemInner",
                                                    cursor: "move",
                                                    containment: "parent",
                                                    tolerance: "pointer",
                                                    stop: function (t) {
                                                        var e = [];
                                                        $(".watching.external>nav a").each(function () {
                                                            e.push($(this).attr("data-id"));
                                                        }),
                                                            ty.put("anonkun/collections/order", { order: e, collection: o.collectionDetail._id });
                                                    },
                                                });
                                            });
                                    });
                                });
                            });
                        });
                    };
                    (n.sideContent = { boards: i }),
                        $("body").on("click", ".addStoryToWatching", function () {
                            n.story || flashMessage("Open a story to add it to your watching list."),
                                ty.post("anonkun/collections/" + n.story._id, { collection: "watching" }, function (t) {
                                    h();
                                });
                        }),
                        $("body").on("click", ".hideLeftSideBar", function () {
                            $("body").toggleClass("allowLeftSidebar");
                            var t = n.currentUser;
                            return t
                                ? ((n.currentUser.profile = n.currentUser.profile || {}),
                                  (n.currentUser.profile.settings = n.currentUser.profile.settings || {}),
                                  n.currentUser.profile.settings.disallowLeftSideBar ? (n.currentUser.profile.settings.disallowLeftSideBar = !1) : (n.currentUser.profile.settings.disallowLeftSideBar = !0),
                                  void ty.put("user", n.currentUser.profile))
                                : void 0;
                        });
                },
            ],
        };
    }),
    setInterval(function () {
        $(".watching.external a .nextLive").each(function () {
            function t() {
                var t = "";
                return s && s > 1 ? (t = s + " days ") : 1 == s && (t = s + " day "), l && l > 1 ? (t += l + " hours ") : 1 == l && (t += l + " hour "), c ? (t += c + ":" + u) : u && (t += "00:" + u + " seconds"), t;
            }
            var e = $(this).attr("data-nextLive"),
                n = $(this).closest("a"),
                i = n.attr("data-title");
            if (e) {
                $(this).removeClass("hidden");
                var r = new Date().getTime(),
                    o = "",
                    a = e - r;
                if (1 > a) return $(this).addClass("hidden"), void n.attr("tooltip-content", i);
                var s = Math.floor(a / 864e5),
                    l = Math.floor((a % 864e5) / 36e5),
                    c = Math.floor((a % 36e5) / 6e4),
                    u = Math.floor((a % 6e4) / 1e3);
                10 > u && u > 0 && (u = "0" + u), s && s > 1 ? (o = s + " days") : 1 == s ? (o = s + " day") : l && l > 1 ? (o = l + " hours") : 1 == l ? (o = l + " hour") : c ? (o = c + ":" + u) : u && (o = u + "s"), $(this).text(o);
                var d = '<div class="live-in">Live in: <span class="time">' + t() + "</span></div>" + i;
                n.attr("tooltip-content", d), n.data("tooltip") && n.data("tooltip").find(".time").text(t());
            } else n.attr("tooltip-content", i), $(this).addClass("hidden");
        });
    }, 1e3),
    angular.module("anonkun.collections", []).config([
        "$stateProvider",
        function (t) {
            t.state("standard.boards.collections", {
                url: "/collections?l&page&cpr",
                resolve: {
                    pageData: [
                        "$http",
                        "$rootScope",
                        "$stateParams",
                        function (t, e, n) {
                            var i = n.page,
                                r = n.l,
                                o = n.cpr;
                            return t.post("/api/anonkun/filteredCollections", { page: i, lastCT: r, cpr: o }).then(function (t) {
                                return t.data;
                            });
                        },
                    ],
                },
                views: {
                    "content@standard": {
                        templateUrl: "/tmpl/anonkun/collections",
                        controller: [
                            "$scope",
                            "$timeout",
                            "$rootScope",
                            "$stateParams",
                            "pageData",
                            function (t, e, n, i, r) {
                                (n.mobileController = "board"), (n.pageTitle = "Collections");
                                var o = i.page || 1;
                                (o = parseInt(o)),
                                    t.setCurrentChatID("anonkun_board_collections"),
                                    analytics.track("View all collections"),
                                    (t.itemsPerPage = 20),
                                    (t.maxSize = 0),
                                    (t.currentPage = o),
                                    (t.selectPage = function (t) {}),
                                    t.setCurrentThreadHref("/collections/threads"),
                                    (t.getHref = function (t) {
                                        return "/collections?page=" + t + "&l=" + _.last(r).ut + "&cpr=" + o;
                                    }),
                                    (t.collections = r),
                                    $(window).scrollTop(0),
                                    analytics.track("View collections page", { page: o });
                            },
                        ],
                    },
                },
            });
        },
    ]),
    (ty.anonkun.frontpage = angular.module("anonkun.frontpage", [])),
    ty.anonkun.frontpage.run([
        "$rootScope",
        "$location",
        "$state",
        function (t, e, n) {
            t.$on("$stateChangeStart", function (e, i, r, o) {
                "frontpage" == i.name && t.currentUser && (e.preventDefault(), n.go("standard.boards.board", { board: "stories" }));
            });
        },
    ]),
    ty.anonkun.frontpage.config([
        "$stateProvider",
        function (t) {
            t.state("frontpage", {
                url: "/",
                views: {
                    main: {
                        templateUrl: "/tmpl/anonkun/frontpage",
                        controller: [
                            "$scope",
                            "$rootScope",
                            "$timeout",
                            "$state",
                            function (t, e, n, i) {
                                (e.mobileController = "frontpage"),
                                    (e.pageTitle = e.siteName),
                                    ty.get("anonkun/collections/byTitle/featured/featured", function (e) {
                                        (t.stories = e.collectionList), t.$digest();
                                    }),
                                    analytics.track("Frontpage");
                            },
                        ],
                    },
                },
            })
                .state("frontpage.terms", {
                    url: "about/terms",
                    views: {
                        frontpageContent: {
                            templateUrl: "/tmpl/anonkun/terms",
                            controller: function () {
                                window.scrollTo(0, 0);
                            },
                        },
                    },
                })
                .state("frontpage.about", {
                    url: "about",
                    views: {
                        frontpageContent: {
                            templateUrl: "/tmpl/anonkun/about",
                            controller: function () {
                                window.scrollTo(0, 0);
                            },
                        },
                    },
                })
                .state("frontpage.forwriters", {
                    url: "forwriters",
                    views: {
                        frontpageContent: {
                            templateUrl: "/tmpl/anonkun/forwriters",
                            controller: function () {
                                window.scrollTo(0, 0);
                            },
                        },
                    },
                })
                .state("frontpage.privacy", {
                    url: "about/privacy",
                    views: {
                        frontpageContent: {
                            templateUrl: "/tmpl/anonkun/privacy",
                            controller: function () {
                                window.scrollTo(0, 0);
                            },
                        },
                    },
                })
                .state("frontpage.premiumTerms", {
                    url: "about/termsOfSale",
                    views: {
                        frontpageContent: {
                            templateUrl: "/tmpl/anonkun/premiumTerms",
                            controller: function () {
                                window.scrollTo(0, 0);
                            },
                        },
                    },
                })
                .state("frontpage.premium", {
                    url: "about/super",
                    views: {
                        frontpageContent: {
                            templateUrl: "/tmpl/anonkun/premium",
                            controller: [
                                "$rootScope",
                                "$scope",
                                "$modal",
                                "$timeout",
                                function (t, e, n, i) {
                                    window.scrollTo(0, 0),
                                        (e.subscribeSettings = {
                                            backdrop: !0,
                                            keyboard: !0,
                                            backdropClick: !0,
                                            templateUrl: "/tmpl/anonkun/subscription",
                                            controller: [
                                                "$scope",
                                                "$modalInstance",
                                                function (e, n) {
                                                    (e.submit = function () {}),
                                                        (e.setUserID = function (n, i) {
                                                            t.story;
                                                            return "" == n
                                                                ? void delete t.story.u[i]._id
                                                                : void ty.post("user/idByName", { name: n }, function (n) {
                                                                      (t.story.u[i]._id = n._id), e.$apply();
                                                                  });
                                                        }),
                                                        (e.close = function (e) {
                                                            ty.put("user", t.currentUser.profile), n.close(e);
                                                        });
                                                },
                                            ],
                                        }),
                                        (e.plan = function () {
                                            return t.currentUser.plan;
                                        }),
                                        (e.subscribe = function () {
                                            return e.plan()
                                                ? void $(".callToAction").first().notify("You already have Super.")
                                                : void $.getScript("https://js.stripe.com/v3/", function () {
                                                      var r = n.open(e.subscribeSettings);
                                                      r.opened.then(function () {
                                                          i(function () {
                                                              function e(t) {
                                                                  return fetch("/api/anonkun/create-customer", { method: "post", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ payment_method: t }) })
                                                                      .then(function (t) {
                                                                          return t.json();
                                                                      })
                                                                      .then(function (t) {
                                                                          i(t);
                                                                      });
                                                              }
                                                              function n(t) {
                                                                  d(!1);
                                                                  var e = document.querySelector(".sr-field-error");
                                                                  (e.textContent = t.message),
                                                                      setTimeout(function () {
                                                                          e.textContent = "";
                                                                      }, 8e3);
                                                              }
                                                              function i(t) {
                                                                  var e = t.latest_invoice,
                                                                      i = e.payment_intent;
                                                                  if (i) {
                                                                      var a = i.client_secret,
                                                                          s = i.status;
                                                                      "requires_action" === s || "requires_payment_method" === s
                                                                          ? o.confirmCardPayment(a).then(function (e) {
                                                                                e.error ? (d(!1), n(e.error)) : r(t.id);
                                                                            })
                                                                          : u(t);
                                                                  } else u(t);
                                                              }
                                                              function r(t) {
                                                                  return fetch("/subscription", { method: "post", headers: { "Content-type": "application/json" }, body: JSON.stringify({ subscriptionId: t }) })
                                                                      .then(function (t) {
                                                                          return t.json();
                                                                      })
                                                                      .then(function (t) {
                                                                          u(t);
                                                                      });
                                                              }
                                                              var o = Stripe("pk_vaTqKftOBjbsmFEgLtxLcGLj5PJJ6"),
                                                                  a = o.elements(),
                                                                  s = $(".subscription").parent();
                                                              s.position({ of: window });
                                                              var l = {
                                                                      base: { color: "#32325d", fontFamily: '"Helvetica Neue", Helvetica, sans-serif', fontSmoothing: "antialiased", fontSize: "18px", "::placeholder": { color: "#aab7c4" } },
                                                                      invalid: { color: "#fa755a", iconColor: "#fa755a" },
                                                                  },
                                                                  c = a.create("card", { style: l });
                                                              c.mount("#card-element"),
                                                                  c.addEventListener("change", function (t) {
                                                                      var e = document.getElementById("card-errors");
                                                                      t.error ? (e.textContent = t.error.message) : (e.textContent = "");
                                                                  }),
                                                                  document.querySelector("#submit").addEventListener("click", function (t) {
                                                                      t.preventDefault(), d(!0), createPaymentMethodAndCustomer(o, c);
                                                                  }),
                                                                  (createPaymentMethodAndCustomer = function () {
                                                                      o.createPaymentMethod("card", c, { billing_details: { name: t.currentUser.username } }).then(function (t) {
                                                                          t.error ? n(t.error) : e(t.paymentMethod.id);
                                                                      });
                                                                  });
                                                              var u = function (t) {
                                                                      d(!1);
                                                                      JSON.stringify(t, null, 2);
                                                                      document.querySelectorAll(".payment-view").forEach(function (t) {
                                                                          t.classList.add("hidden");
                                                                      }),
                                                                          document.querySelectorAll(".completed-view").forEach(function (t) {
                                                                              t.classList.remove("hidden");
                                                                          }),
                                                                          (document.querySelector(".order-status").textContent = t.status),
                                                                          "active" == t.status && location.reload();
                                                                  },
                                                                  d = function (t) {
                                                                      t
                                                                          ? (document.querySelector("#submit").classList.add("loading"), (document.querySelector("button").disabled = !0))
                                                                          : ((document.querySelector("button").disabled = !1), document.querySelector("#submit").classList.remove("loading"));
                                                                  };
                                                          });
                                                      });
                                                  });
                                        });
                                },
                            ],
                        },
                    },
                })
                .state("frontpage.helpFront", {
                    url: "help",
                    views: {
                        frontpageContent: {
                            templateUrl: "/tmpl/anonkun/help",
                            controller: [
                                "$scope",
                                "$rootScope",
                                "$timeout",
                                "$state",
                                "$stateParams",
                                function (t, e, n, i, r) {
                                    var o,
                                        a = "frequently-asked-questions";
                                    return e.helpPages
                                        ? ((o = _.find(e.helpPages, function (t) {
                                              return t.path == a;
                                          })),
                                          (t.content = o.content),
                                          void (t.title = o.title))
                                        : void ty.get("node/cdfc43a2-e4a7-46cc-8076-fb86cef233c4", function (n) {
                                              var i = $("<div>" + n.b + "</div>"),
                                                  r = [];
                                              i.find("h1").each(function () {
                                                  var t = $(this).text(),
                                                      e = $("<div></div>");
                                                  e.html($(this).nextUntil("h1")), r.push({ title: t, content: e.html(), path: _.slugify(t) });
                                              }),
                                                  (e.helpPages = r),
                                                  (o = _.find(e.helpPages, function (t) {
                                                      return t.path == a;
                                                  })),
                                                  (t.content = o.content),
                                                  (t.title = o.title),
                                                  t.$digest();
                                          });
                                },
                            ],
                        },
                    },
                })
                .state("frontpage.help", {
                    url: "help/:page",
                    views: {
                        frontpageContent: {
                            templateUrl: "/tmpl/anonkun/help",
                            controller: [
                                "$scope",
                                "$rootScope",
                                "$timeout",
                                "$state",
                                "$stateParams",
                                function (t, e, n, i, r) {
                                    var o,
                                        a = r.page;
                                    return e.helpPages
                                        ? ((o = _.find(e.helpPages, function (t) {
                                              return t.path == a;
                                          })),
                                          (t.content = o.content),
                                          void (t.title = o.title))
                                        : void ty.get("node/cdfc43a2-e4a7-46cc-8076-fb86cef233c4", function (n) {
                                              var i = $("<div>" + n.b + "</div>"),
                                                  r = [];
                                              i.find("h1").each(function () {
                                                  var t = $(this).text(),
                                                      e = $("<div></div>");
                                                  e.html($(this).nextUntil("h1")), r.push({ title: t, content: e.html(), path: _.slugify(t) });
                                              }),
                                                  (e.helpPages = r),
                                                  (o = _.find(e.helpPages, function (t) {
                                                      return t.path == a;
                                                  })),
                                                  (t.content = o.content),
                                                  (t.title = o.title),
                                                  t.$digest();
                                          });
                                },
                            ],
                        },
                    },
                });
        },
    ]),
    angular
        .module("anonkun.reviews", [])
        .run([
            "$templateCache",
            function (t) {
                t.put(
                    "template/rating/rating.html",
                    '<span ng-mouseleave="reset()">\n <i ng-repeat="r in range" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="fa" ng-class="$index < val && (r.stateOn || \'fa-star\') || (r.stateOff || \'fa-star-o\')"></i>\n</span>'
                );
            },
        ])
        .config([
            "$stateProvider",
            function (t) {
                t.state("standard.boards.reviews", {
                    url: "/reviews?l&page&cpr",
                    resolve: {
                        pageData: [
                            "$http",
                            "$rootScope",
                            "$stateParams",
                            function (t, e, n) {
                                var i = n.page,
                                    r = n.l,
                                    o = n.cpr;
                                return t.post("/api/anonkun/filteredReviews", { page: i, lastCT: r, cpr: o }).then(function (t) {
                                    return t.data;
                                });
                            },
                        ],
                    },
                    views: {
                        "content@standard": {
                            templateUrl: "/tmpl/anonkun/reviews",
                            controller: [
                                "$scope",
                                "$timeout",
                                "$rootScope",
                                "$stateParams",
                                "pageData",
                                function (t, e, n, i, r) {
                                    (n.mobileController = "board"), (n.pageTitle = "Reviews");
                                    var o = i.page || 1;
                                    (o = parseInt(o)),
                                        t.setCurrentChatID("anonkun_board_reviews"),
                                        analytics.track("View all reviews"),
                                        (t.itemsPerPage = 20),
                                        (t.maxSize = 0),
                                        (t.currentPage = o),
                                        (t.selectPage = function (t) {}),
                                        t.setCurrentThreadHref("/reviews/threads");
                                    var a = _.map(r.reviews, function (t) {
                                        var e = _.find(r.stories, function (e) {
                                            return e._id == t.sid;
                                        });
                                        return (t.story = e), !e || e.trash ? null : t;
                                    });
                                    if ((a = _.compact(a))) {
                                        var s = _.last(a).ct;
                                        (t.getHref = function (t) {
                                            return "/reviews?page=" + t + "&l=" + s + "&cpr=" + o;
                                        }),
                                            (t.stories = a),
                                            $(window).scrollTop(0),
                                            analytics.track("View reviews page", { page: o });
                                    }
                                },
                            ],
                        },
                    },
                });
            },
        ]),
    angular
        .module("anonkun.stories", [])
        .factory("liveStories", ["tySubscribe", function (t) {}])
        .factory("suggestedTags", function () {
            return [
                "mecha",
                "anime",
                "action",
                "adventure",
                "mature",
                "erotic",
                "yuri",
                "yaoi",
                "scifi",
                "horror",
                "space",
                "comedy",
                "drama",
                "romance",
                "mecha",
                "martialarts",
                "sports",
                "male protagonist",
                "femaleprotagonist",
                "tragedy",
                "psychological",
                "harem",
                "genderbender",
                "supernatural",
                "religion",
                "celebrity",
                "historical",
                "school life",
                "sliceoflife",
                "ecchi",
                "adult",
                "fanfiction",
                "rpg",
                "italy",
                "turkey",
                "russia",
                "multipleprotagonists",
                "murder",
                "crime",
                "rape",
                "celebrity",
                "truestory",
                "explicitsex",
                "animal",
                "monstergirls",
                "highschool",
                "mermaid",
                "awardwinning",
                "bullying",
                "biology",
                "science",
                "anthropology",
                "angel",
                "baseball",
                "basketball",
                "swimming",
                "tournament",
                "kindergarten",
                "sexualcuriosity",
                "marriedcouple",
                "transgendered",
                "transvestite",
                "romanticsubplot",
                "gag",
                "family",
                "crossdressing",
                "korea",
                "japan",
                "police",
                "cousins",
                "maleleadfallinginlovefirst",
                "edo",
                "femaleleadfallinginlovefirst",
                "masturbation",
                "agegap",
                "food",
                "europe",
                "oldermale",
                "interracial",
                "guns",
                "swords",
                "afterlife",
                "surgeon",
                "america",
                "britain",
                "china",
                "comingofage",
                "olderfemale",
                "assassins",
                "studentcouncil",
                "france",
                "youngerfemale",
                "trainertraineerelationship",
                "timetravel",
                "incest",
                "youngermale",
                "reincarnation",
                "masochist",
                "sadist",
                "humiliation",
                "smartlead",
                "friendship",
                "bodyswap",
                "doctor",
                "samurai",
                "royalty",
                "masochists",
                "geniuslead",
                "pastlife",
                "unrequitedlove",
                "writer",
                "friendsbecomelovers",
                "secretrelationship",
                "stolenkiss",
                "loveatfirstsight",
                "charactergrowth",
                "magic",
                "pastlife",
                "infidelty",
                "middleschool",
                "popularlead",
                "couple growth",
                "prostitute",
                "prostitution",
                "secretidentity",
                "beautifullead",
                "angst",
                "slow romance",
                "quirkycharacters",
                "fastromance",
                "university",
                "childhoodfriends",
                "bespectacledprotagonist",
                "betrayal",
                "princess",
                "mentalillness",
                "hiddenpotential",
                "training",
                "mindbreak",
                "personalitychange",
                "multiplepersonalities",
                "mysteriousprotagonist",
                "revenge",
                "gambling",
                "brainwashing",
                "timeskip",
                "strategicminds",
                "heavilyreaderdriven",
                "comic",
                "predeterminedplot",
                "mildlyreaderdriven",
                "readerdriven",
                "predetermined ending",
                "textadventure",
                "textadventure",
                "characterdriven",
                "singleprotagonist",
                "dailyquest",
                "videogame",
                "novel",
                "superhero",
                "civilizationgame",
                "dating",
                "multipleloveinterests",
                "sexualdeviance",
                "fewcustomschoices",
                "customschoicesonly",
                "crossfic",
                "drawquest",
                "customprotagonist",
                "establishedprotagonist",
            ];
        })
        .controller("storyListItem", [
            "$scope",
            "tySubscribe",
            "$interval",
            "$rootScope",
            function (t, e, n, i) {
                var r = t.story,
                    o = r.t + r.d;
                r.nextLive && r.nextLive > Math.round(new Date().getTime()) && (t.showNextLive = !0),
                    (r.ta = _.without(r.ta, "nsfw")),
                    (r.ta = _.xor(r.ta, r.spoilerTags)),
                    (t.readingTime = function () {
                        if (!r.w) return "";
                        var t = r.w / 200,
                            e = 0,
                            n = 0;
                        return t > 60 && (e = t / 60), e > 24 && (n = e / 24), n ? Math.ceil(n) + " day read" : e ? Math.ceil(e) + " hour read" : t ? Math.ceil(t) + " minute read" : void 0;
                    });
                var a = "presence-chat-" + r._id + "-latest";
                e.actives({ scope: t, channel: a });
                var s = n(function () {
                    e.actives({ scope: t, channel: a });
                }, 6e4);
                t.$on("$destroy", function () {
                    n.cancel(s);
                }),
                    o.length < 190 && window.innerWidth > 1420 && (t.largeImg = !0);
            },
        ]),
    angular
        .module("anonkun.story", [])
        .run([
            "$rootScope",
            "$stateParams",
            function (t, e) {
                t.$on("chatCommand", function (n, i) {
                    if (_.startsWith(i, "/dice ") || _.startsWith(i, "/dice+") || _.startsWith(i, "/roll ") || _.startsWith(i, "/roll+")) {
                        var r = { sid: t.story._id, dice: i };
                        e.routeID && (r.route = e.routeID), ty.post("anonkun/dice", r);
                    }
                });
            },
        ])
        .directive("myRepeatDirective", function () {
            return function (t, e, n) {
                angular.element(e).css("color", "blue"), t.$last && window.alert("im the last!");
            };
        })
        .filter("defaultAnonNick", function () {
            return function (t, e) {
                return (out = null == t || void 0 == t || ("" == t && !angular.isNumber(t)) ? e || "" : t);
            };
        })
        .factory("anonkun_currentStory", function () {
            return { story: { data: null } };
        })
        .directive("simpleTags", function () {
            return {
                replace: !0,
                templateUrl: "/tmpl/anonkun/simpleTags",
                controller: [
                    "$scope",
                    "$element",
                    "$rootScope",
                    "suggestedTags",
                    function (t, e, n, i) {
                        if (n.story) {
                            var r;
                            (t.ta = n.story.ta), (t.suggestedTags = i);
                            var o = n.story.spoilerTags;
                            t.ta && ((o = o || []), (r = t.ta), (r = _.xor(r, o)), (r = r.join(","))),
                                (t.selected = t.ta),
                                (n.story.ta = n.story.ta || []),
                                e
                                    .find(".fieldTags:not(.tagit-processed)")
                                    .tagit(function (e) {
                                        t.$apply(function () {
                                            (n.story.ta = e), t.$emit("editChanged");
                                        });
                                    }, r)
                                    .addClass("tagit-processed");
                        }
                    },
                ],
            };
        })
        .directive("simpleTagsSpoilers", function () {
            return {
                replace: !0,
                templateUrl: "/tmpl/anonkun/simpleTags",
                controller: [
                    "$scope",
                    "$element",
                    "$rootScope",
                    "suggestedTags",
                    function (t, e, n, i) {
                        if (n.story) {
                            var r;
                            (t.spoilerTags = n.story.spoilerTags),
                                (t.suggestedTags = i),
                                t.spoilerTags && (r = t.spoilerTags.join(",")),
                                (t.selected = t.spoilerTags),
                                (n.story.spoilerTags = n.story.spoilerTags || []),
                                e
                                    .find(".fieldTags:not(.tagit-processed)")
                                    .tagit(function (e) {
                                        t.$apply(function () {
                                            (n.story.spoilerTags = e), t.$emit("editChanged");
                                        });
                                    }, r)
                                    .addClass("tagit-processed");
                        }
                    },
                ],
            };
        }),
    angular.module("anonkun.story").controller("storyReview", [
        "$scope",
        "$rootScope",
        "reviews",
        "$state",
        "feed",
        function (t, e, n, i, r) {
            if (((t.reviews = n), n && n.length > 0 && e.currentUser))
                var o = _.find(n, function (t) {
                    return t.u[0]._id == e.currentUser._id;
                });
            t.setCurrentChatID(e.story._id), analytics.track("Review open", { sid: e.story._id, storyTitle: e.story.t });
            var a = function () {
                return e.story.r && e.story.r[0] ? e.story.r[0] : "stories";
            };
            (t.getBoard = a),
                (t.yourreview = { score: 3 }),
                o && ((t.yourreview = o), (t.hasReview = !0)),
                (t.post = function (n) {
                    if (!e.currentUser) return void e.openRegister();
                    var o = $(n.currentTarget),
                        a = o.closest(".postReview"),
                        s = _.trim(a.find(".spoilerFree textarea").val()),
                        l = _.trim(a.find(".spoiler textarea").val());
                    o.hasClass("disabled") ||
                        (ty.post("anonkun/review", { score: parseInt(t.yourreview.score), sid: e.story._id, b: s, spoiler: l }, function (n) {
                            ty.chat.post({ r: e.story._id, nt: "chat", b: "reviewed this story" });
                            var o = e.story.u[0]._id,
                                a = Math.random().toString(36).substring(7);
                            localStorage.UserIdenticon && (a = localStorage.UserIdenticon),
                                e.currentUser && (a = e.currentUser._id),
                                t.hasReview
                                    ? "scoreChange" == n.type &&
                                      r({ path: a + "_" + e.story._id, type: "review", sid: e.story._id, value: 'Score change on a review for "' + e.story.t + '"     (' + n.oldScore + "/5 ->" + n.newScore + "/5)" })
                                    : r({ path: a + "_" + e.story._id, type: "review", user: o, sid: e.story._id, value: 'New review for "' + e.story.t + '"     (' + parseInt(t.yourreview.score) + "/5)" }),
                                i.go("^"),
                                analytics.track("Review post", { score: parseInt(t.yourreview.score), sid: e.story._id, b: s, spoiler: l });
                        }),
                        o.addClass("disabled"));
                });
        },
    ]),
    angular.module("anonkun.story").controller("storyThreadItem", [
        "$scope",
        "$rootScope",
        "$state",
        "feed",
        "$stateParams",
        "thread",
        "$modal",
        function (t, e, n, i, r, o, a) {
            var s = function () {
                return e.story.r && e.story.r[0] ? e.story.r[0] : "stories";
            };
            (t.thread = o.data), (t.getBoard = s);
            var l = function () {
                return t.thread;
            };
            (t.editNode = function () {
                a.open(t.nodeSettings);
            }),
                (t.nodeSettings = {
                    backdrop: !0,
                    keyboard: !0,
                    backdropClick: !0,
                    templateUrl: "/tmpl/threads/threadEdit",
                    controller: [
                        "$scope",
                        "$modalInstance",
                        function (t, e) {
                            (t.thread = l()),
                                (t.noBoard = !0),
                                (t.close = function (n) {
                                    ty.put("node", t.thread), e.close(n);
                                });
                        },
                    ],
                }),
                t.setCurrentChatID(e.story._id),
                (e.pageTitle = r.threadTitle + " - " + r.storyTitle + " - " + e.siteName),
                t.setCurrentThreadHref("/" + s() + "/" + r.storyTitle + "/" + r.storyID + "/threads"),
                (t.threadId = r.threadId),
                t.$on("moderatorEnabled", function () {
                    t.checkIsAuthor();
                }),
                t.$on("editChanged", function () {
                    ty.put("node", t.thread, function (t) {});
                }),
                (t.checkIsAuthor = function () {
                    e.currentUser && t.thread && t.thread.u && -1 != _.pluck(t.thread.u, "_id").indexOf(e.currentUser._id)
                        ? (t.threadAuthor = !0)
                        : e.currentUser && t.thread && t.thread.u2 && -1 != _.pluck(t.thread.u2, "_id").indexOf(e.currentUser._id)
                        ? (t.threadAuthor = !0)
                        : e.moderatorEnabled
                        ? (t.threadAuthor = !0)
                        : (t.threadAuthor = !1);
                }),
                t.$on("login", function () {
                    t.checkIsAuthor();
                }),
                t.checkIsAuthor();
        },
    ]),
    angular.module("anonkun.story").controller("storyThreads", [
        "$scope",
        "$rootScope",
        "$state",
        "feed",
        "$stateParams",
        function (t, e, n, i, r) {
            var o = function () {
                return e.story.r && e.story.r[0] ? e.story.r[0] : "stories";
            };
            (t.getBoard = o), t.setCurrentChatID(e.story._id), t.setCurrentThreadHref("/" + o() + "/" + r.storyTitle + "/" + r.storyID + "/threads"), analytics.track("Threads open", { sid: e.story._id, storyTitle: e.story.t });
        },
    ]),
    ty.chat.directive("autoScroll", function () {
        return function (t, e, n) {
            t.$watch(
                "chatLog",
                function (n) {
                    var i = e[0].scrollHeight - e[0].scrollTop - e[0].clientHeight;
                    600 > i && ((e[0].scrollTop = e[0].scrollHeight), t.$emit("chatAutoScroll"));
                },
                !0
            ),
                t.$on("chat-jumpToEnd", function () {
                    setTimeout(function () {
                        (e[0].scrollTop = e[0].scrollHeight), t.$emit("chatAutoScroll");
                    }, 300);
                });
        };
    }),
    ty.chat.directive("chatAutoScrollForChild", function () {
        return function (t, e, n) {
            $(e).bind("mousewheel DOMMouseScroll", function (t) {
                var e = null;
                "mousewheel" == t.type ? (e = -1 * t.originalEvent.wheelDelta) : "DOMMouseScroll" == t.type && (e = 40 * t.originalEvent.detail), e && (t.preventDefault(), $(this).scrollTop(e + $(this).scrollTop()));
            }),
                t.$on(
                    "chatAutoScroll",
                    function (t) {
                        e[0].scrollTop = e[0].scrollHeight;
                    },
                    !0
                );
        };
    }),
    ty.chat.factory("chatItemDetail", [
        "$modal",
        "$rootScope",
        "$timeout",
        function (t, e, n) {
            return function (i, r) {
                var o = r.templateUrl || "/tmpl/chat/chatItemDetail";
                if (ty.responsive.isPhone()) {
                    o = r.templateUrl || "/tmpl/chat/chatItemDetailPhone";
                    var a = document.body.scrollTop;
                    $("body").css("position", "fixed");
                }
                var s = i._id,
                    l = t.open({
                        backdrop: !1,
                        keyboard: !0,
                        closeOnLocationChange: !1,
                        windowClass: "modal chatModal chatItemDetail-window-" + s,
                        backdropClick: !1,
                        templateUrl: o,
                        controller: [
                            "$scope",
                            "$modalInstance",
                            function (t, n) {
                                (t.nid = s),
                                    (t.banUser = function (n) {
                                        var r = i.r[0],
                                            o = e.story;
                                        return (
                                            o && (r = o._id),
                                            n
                                                ? void ty.del("anonkun/ban", { blockFor: s, blockFrom: r }, function (e) {
                                                      (t.banned = void 0), t.$digest();
                                                  })
                                                : void ty.post("anonkun/ban", { blockFor: s, blockFrom: r }, function (e) {
                                                      (t.banned = !0), t.$digest();
                                                  })
                                        );
                                    }),
                                    (t.deleteNode = function (e) {
                                        var n = i.r[0];
                                        return e
                                            ? void ty.post("anonkun/undelete", { deleteFrom: n, nid: s }, function (e) {
                                                  (t.deleted = !1), t.$digest();
                                              })
                                            : void ty.del("anonkun/node", { deleteFrom: n, nid: s }, function (e) {
                                                  (t.deleted = !0), t.$digest();
                                              });
                                    }),
                                    (t.beforePost = function (t) {
                                        return r.beforePost ? r.beforePost(t) : t;
                                    }),
                                    (t.chatMsg = i),
                                    t.$on("chatPost", function (t, e) {
                                        "function" == typeof r.onPost && r.onPost(e);
                                    }),
                                    analytics.track("Chat window", { chatID: s }),
                                    (t.close = function () {
                                        ty.responsive.isPhone() && ($("body").css("position", "static"), (document.body.scrollTop = a)), n.close(), "function" == typeof r.onClose && r.onClose();
                                    }),
                                    (t.linkToParent = function (t, e) {
                                        var n = r.parentChatScope;
                                        n &&
                                            ty.get("node/" + e, function (e) {
                                                n.openChatDetail(t, e);
                                            });
                                    });
                            },
                        ],
                    });
                return (
                    l.opened.then(function () {
                        ty.responsive.isPhone() ||
                            (r.position &&
                                n(function () {
                                    var t = $(".chatItemDetail-window-" + s);
                                    t.position({ collision: "fit", my: r.position.my, at: r.position.at, of: r.position.of }), t.find(".chatInput").focus();
                                }));
                    }),
                    l
                );
            };
        },
    ]),
    ty.chat.factory("chatWindow", [
        "$modal",
        "$rootScope",
        "$timeout",
        "feed",
        function (t, e, n, i) {
            return function (n, r, o, a) {
                ty.post("anonkun/privateChat/" + n, { name: r }, function (a) {
                    t.open({
                        backdrop: !1,
                        keyboard: !1,
                        closeOnLocationChange: !1,
                        windowClass: "modal chatModal draggable",
                        backdropClick: !1,
                        templateUrl: "/tmpl/anonkun/profile/privateChat",
                        controller: [
                            "$scope",
                            "$modalInstance",
                            function (t, s) {
                                t.$on("chatPost", function (t, r) {
                                    t.targetScope && t.targetScope.actives < 2 && i({ path: e.currentUser._id, type: "pm", user: n, value: "PM: " + r });
                                }),
                                    analytics.track("Chat window", { user: r, avatar: o, chatID: a }),
                                    (e.currentUser.profile = e.currentUser.profile || {}),
                                    (t.pmUser = r),
                                    (t.pmAvatar = o),
                                    (t.pmChatID = a),
                                    (t.close = function () {
                                        if (o) {
                                            var t,
                                                i = e.currentUser.profile.chatWindow || [];
                                            _.find(i, function (e, i) {
                                                return e._id == n && (t = i), e._id == n;
                                            }),
                                                void 0 != t && i.splice(t, 1),
                                                i.unshift({ n: r, _id: n, image: o }),
                                                (e.currentUser.profile.chatWindow = i),
                                                s.close();
                                        } else s.close();
                                        analytics.track("Chat window close", { user: r, avatar: o, chatID: a });
                                    });
                            },
                        ],
                    }),
                        e.$apply();
                });
            };
        },
    ]),
    (ty.notification = {}),
    (ty.notification.send = function () {}),
    window.webkitNotifications &&
        ((ty.notification = window.webkitNotifications),
        (ty.notification.send = function (t, e, n) {
            var i = ty.settings.modules.desktopNotification.img;
            if (document.hidden && 0 == window.webkitNotifications.checkPermission()) {
                var r = webkitNotifications.createNotification(i, e, n);
                r.show(),
                    (r.ondisplay = function () {
                        setTimeout(function () {
                            r.cancel();
                        }, 5e3);
                    });
            }
        }));
var Kicksend = {
    mailcheck: {
        threshold: 3,
        defaultDomains: [
            "yahoo.com",
            "google.com",
            "hotmail.com",
            "gmail.com",
            "me.com",
            "aol.com",
            "mac.com",
            "live.com",
            "comcast.net",
            "googlemail.com",
            "msn.com",
            "hotmail.co.uk",
            "yahoo.co.uk",
            "facebook.com",
            "verizon.net",
            "sbcglobal.net",
            "att.net",
            "gmx.com",
            "mail.com",
        ],
        defaultTopLevelDomains: ["co.uk", "com", "net", "org", "info", "edu", "gov", "mil"],
        run: function (t) {
            (t.domains = t.domains || Kicksend.mailcheck.defaultDomains), (t.topLevelDomains = t.topLevelDomains || Kicksend.mailcheck.defaultTopLevelDomains), (t.distanceFunction = t.distanceFunction || Kicksend.sift3Distance);
            var e = Kicksend.mailcheck.suggest(encodeURI(t.email), t.domains, t.topLevelDomains, t.distanceFunction);
            e ? t.suggested && t.suggested(e) : t.empty && t.empty();
        },
        suggest: function (t, e, n, i) {
            t = t.toLowerCase();
            var r = this.splitEmail(t),
                o = this.findClosestDomain(r.domain, e, i);
            if (o) {
                if (o != r.domain) return { address: r.address, domain: o, full: r.address + "@" + o };
            } else {
                var a = this.findClosestDomain(r.topLevelDomain, n);
                if (r.domain && a && a != r.topLevelDomain) {
                    var s = r.domain;
                    return (o = s.substring(0, s.lastIndexOf(r.topLevelDomain)) + a), { address: r.address, domain: o, full: r.address + "@" + o };
                }
            }
            return !1;
        },
        findClosestDomain: function (t, e, n) {
            var i,
                r = 99,
                o = null;
            if (!t || !e) return !1;
            n || (n = this.sift3Distance);
            for (var a = 0; a < e.length; a++) {
                if (t === e[a]) return t;
                (i = n(t, e[a])), r > i && ((r = i), (o = e[a]));
            }
            return r <= this.threshold && null !== o ? o : !1;
        },
        sift3Distance: function (t, e) {
            if (null == t || 0 === t.length) return null == e || 0 === e.length ? 0 : e.length;
            if (null == e || 0 === e.length) return t.length;
            for (var n = 0, i = 0, r = 0, o = 0, a = 5; n + i < t.length && n + r < e.length; ) {
                if (t.charAt(n + i) == e.charAt(n + r)) o++;
                else {
                    (i = 0), (r = 0);
                    for (var s = 0; a > s; s++) {
                        if (n + s < t.length && t.charAt(n + s) == e.charAt(n)) {
                            i = s;
                            break;
                        }
                        if (n + s < e.length && t.charAt(n) == e.charAt(n + s)) {
                            r = s;
                            break;
                        }
                    }
                }
                n++;
            }
            return (t.length + e.length) / 2 - o;
        },
        splitEmail: function (t) {
            var e = t.split("@");
            if (e.length < 2) return !1;
            for (var n = 0; n < e.length; n++) if ("" === e[n]) return !1;
            var i = e.pop(),
                r = i.split("."),
                o = "";
            if (0 == r.length) return !1;
            if (1 == r.length) o = r[0];
            else {
                for (var n = 1; n < r.length; n++) o += r[n] + ".";
                r.length >= 2 && (o = o.substring(0, o.length - 1));
            }
            return { topLevelDomain: o, domain: i, address: e.join("@") };
        },
    },
};
window.jQuery &&
    !(function (t) {
        t.fn.mailcheck = function (t) {
            var e = this;
            if (t.suggested) {
                var n = t.suggested;
                t.suggested = function (t) {
                    n(e, t);
                };
            }
            if (t.empty) {
                var i = t.empty;
                t.empty = function () {
                    i.call(null, e);
                };
            }
            (t.email = this.val()), Kicksend.mailcheck.run(t);
        };
    })(jQuery),
    angular.module("ui.directives").directive("uiAnimate", [
        "ui.config",
        "$timeout",
        function (t, e) {
            var n = {};
            return (
                angular.isString(t.animate) ? (n["class"] = t.animate) : t.animate && (n = t.animate),
                {
                    restrict: "A",
                    link: function (t, i, r) {
                        var o = {};
                        r.uiAnimate && ((o = t.$eval(r.uiAnimate)), angular.isString(o) && (o = { class: o })),
                            (o = angular.extend({ class: "ui-animate" }, n, o)),
                            i.addClass(o["class"]),
                            e(
                                function () {
                                    i.removeClass(o["class"]);
                                },
                                20,
                                !1
                            );
                    },
                }
            );
        },
    ]),
    angular.module("ui.filters").filter("format", function () {
        return function (t, e) {
            if (!t) return t;
            var n,
                i = t.toString();
            return void 0 === e
                ? i
                : angular.isArray(e) || angular.isObject(e)
                ? ((n = (angular.isArray(e) && "$") || ":"),
                  angular.forEach(e, function (t, e) {
                      i = i.split(n + e).join(t);
                  }),
                  i)
                : i.split("$0").join(e);
        };
    }),
    angular.module("ui.filters").filter("highlight", function () {
        return function (t, e, n) {
            return e || angular.isNumber(e) ? ((t = t.toString()), (e = e.toString()), n ? t.split(e).join('<span class="ui-match">' + e + "</span>") : t.replace(new RegExp(e, "gi"), '<span class="ui-match">$&</span>')) : t;
        };
    }),
    angular.module("ui.filters").filter("inflector", function () {
        function t(t) {
            return t.replace(/^([a-z])|\s+([a-z])/g, function (t) {
                return t.toUpperCase();
            });
        }
        function e(t, e) {
            return t.replace(/[A-Z]/g, function (t) {
                return e + t;
            });
        }
        var n = {
            humanize: function (n) {
                return t(e(n, " ").split("_").join(" "));
            },
            underscore: function (t) {
                return t.substr(0, 1).toLowerCase() + e(t.substr(1), "_").toLowerCase().split(" ").join("_");
            },
            variable: function (e) {
                return (e = e.substr(0, 1).toLowerCase() + t(e.split("_").join(" ")).substr(1).split(" ").join(""));
            },
        };
        return function (t, e, i) {
            return e !== !1 && angular.isString(t) ? ((e = e || "humanize"), n[e](t)) : t;
        };
    }),
    angular.module("ui.directives").directive("uiRoute", [
        "$location",
        "$parse",
        function (t, e) {
            return {
                restrict: "AC",
                compile: function (n, i) {
                    var r;
                    if (i.uiRoute) r = "uiRoute";
                    else if (i.ngHref) r = "ngHref";
                    else {
                        if (!i.href) throw new Error("uiRoute missing a route or href property on " + n[0]);
                        r = "href";
                    }
                    return function (n, i, o) {
                        function a(e) {
                            (hash = e.indexOf("#")) > -1 && (e = e.substr(hash + 1)),
                                (c = function () {
                                    l(n, t.path().indexOf(e) > -1);
                                })();
                        }
                        function s(e) {
                            (hash = e.indexOf("#")) > -1 && (e = e.substr(hash + 1)),
                                (c = function () {
                                    var i = new RegExp("^" + e + "$", ["i"]);
                                    l(n, i.test(t.path()));
                                })();
                        }
                        var l = e(o.ngModel || o.routeModel || "$uiRoute").assign,
                            c = angular.noop;
                        switch (r) {
                            case "uiRoute":
                                o.uiRoute ? s(o.uiRoute) : o.$observe("uiRoute", s);
                                break;
                            case "ngHref":
                                o.ngHref ? a(o.ngHref) : o.$observe("ngHref", a);
                                break;
                            case "href":
                                a(o.href);
                        }
                        n.$on("$routeChangeSuccess", function () {
                            c();
                        });
                    };
                },
            };
        },
    ]),
    angular.module("ui.directives").directive("uiScrollfix", [
        "$window",
        function (t) {
            "use strict";
            return {
                link: function (e, n, i) {
                    var r = n.offset().top;
                    i.uiScrollfix ? ("-" === i.uiScrollfix.charAt(0) ? (i.uiScrollfix = r - i.uiScrollfix.substr(1)) : "+" === i.uiScrollfix.charAt(0) && (i.uiScrollfix = r + parseFloat(i.uiScrollfix.substr(1)))) : (i.uiScrollfix = r),
                        angular.element(t).on("scroll.ui-scrollfix", function () {
                            var e;
                            if (angular.isDefined(t.pageYOffset)) e = t.pageYOffset;
                            else {
                                var r = document.compatMode && "BackCompat" !== document.compatMode ? document.documentElement : document.body;
                                e = r.scrollTop;
                            }
                            !n.hasClass("ui-scrollfix") && e > i.uiScrollfix ? n.addClass("ui-scrollfix") : n.hasClass("ui-scrollfix") && e < i.uiScrollfix && n.removeClass("ui-scrollfix");
                        });
                },
            };
        },
    ]),
    angular
        .module("ui.directives")
        .directive("uiShow", [
            function () {
                return function (t, e, n) {
                    t.$watch(n.uiShow, function (t, n) {
                        t ? e.addClass("ui-show") : e.removeClass("ui-show");
                    });
                };
            },
        ])
        .directive("uiHide", [
            function () {
                return function (t, e, n) {
                    t.$watch(n.uiHide, function (t, n) {
                        t ? e.addClass("ui-hide") : e.removeClass("ui-hide");
                    });
                };
            },
        ])
        .directive("uiToggle", [
            function () {
                return function (t, e, n) {
                    t.$watch(n.uiToggle, function (t, n) {
                        t ? e.removeClass("ui-hide").addClass("ui-show") : e.removeClass("ui-show").addClass("ui-hide");
                    });
                };
            },
        ]),
    angular.module("ui.filters").filter("unique", function () {
        return function (t, e) {
            if (e === !1) return t;
            if ((e || angular.isUndefined(e)) && angular.isArray(t)) {
                var n = [],
                    i = function (t) {
                        return angular.isObject(t) && angular.isString(e) ? t[e] : t;
                    };
                angular.forEach(t, function (t) {
                    for (var e = !1, r = 0; r < n.length; r++)
                        if (angular.equals(i(n[r]), i(t))) {
                            e = !0;
                            break;
                        }
                    e || n.push(t);
                }),
                    (t = n);
            }
            return t;
        };
    }),
    angular.module("ui.directives").directive("uiValidate", function () {
        return {
            restrict: "A",
            require: "ngModel",
            link: function (t, e, n, i) {
                var r,
                    o,
                    a = {},
                    s = t.$eval(n.uiValidate);
                s &&
                    (angular.isString(s) && (s = { validator: s }),
                    angular.forEach(s, function (e, n) {
                        (r = function (r) {
                            return t.$eval(e, { $value: r }) ? (i.$setValidity(n, !0), r) : void i.$setValidity(n, !1);
                        }),
                            (a[n] = r),
                            i.$formatters.push(r),
                            i.$parsers.push(r);
                    }),
                    n.uiValidateWatch &&
                        ((o = t.$eval(n.uiValidateWatch)),
                        angular.isString(o)
                            ? t.$watch(o, function () {
                                  angular.forEach(a, function (t, e) {
                                      t(i.$modelValue);
                                  });
                              })
                            : angular.forEach(o, function (e, n) {
                                  t.$watch(e, function () {
                                      a[n](i.$modelValue);
                                  });
                              })));
            },
        };
    }),
    angular.module("anonkun.stories").directive("tagsFilter", function () {
        return {
            replace: !0,
            templateUrl: "/tmpl/anonkun/tagsFilter",
            controller: [
                "$scope",
                "$rootScope",
                function (t, e) {
                    t.$watch("tags", function () {
                        var n = t.tags;
                        n.forEach(function (t) {
                            t = _.trim(t);
                        });
                        var i = _.map(n, function (t) {
                                return "-" != t.substring(0, 1) ? ("+" == t.charAt(0) && (t = t.substr(1)), _.trim(t).toLowerCase()) : void 0;
                            }),
                            r = _.map(n, function (t) {
                                return "-" == t.substring(0, 1) ? _.trim(t.substr(1)).toLowerCase() : void 0;
                            }),
                            o = { ta: {} };
                        (i = _.compact(i)), (r = _.compact(r)), i.length > 0 && (o.ta.all = i), r.length > 0 && (o.ta.nin = r), 0 == r.length && 0 == i.length && (o = {}), (e.storiesFilterCriteria = o);
                    });
                },
            ],
            link: function (t, e, n) {
                (t.tags = []),
                    e
                        .find(".fieldTags:not(.tagit-processed)")
                        .tagit(function (e) {
                            t.tags = e;
                        })
                        .addClass("tagit-processed"),
                    (t.onSelect = function () {
                        var t = jQuery.Event("keypress");
                        (t.which = 13), e.find(".tagit-input").trigger(t);
                    });
            },
        };
    }),
    angular.module("anonkun.story").controller("achievements", [
        "$scope",
        "$rootScope",
        "$state",
        "feed",
        "story",
        function (t, e, n, i, r) {
            var o = r.data;
            (t.story = o),
                t.setCurrentChatID(r.data._id),
                e.story || (e.story = t.story),
                window.scrollTo(0, 0),
                analytics.track("Achievements open", { sid: r.data._id, storyTitle: r.data.t }),
                (e.story.achievements = e.story.achievements || {}),
                (e.story.achievements.achievements = e.story.achievements.achievements || {});
            var a = function () {
                return r.data.r && r.data.r[0] ? r.data.r[0] : "stories";
            };
            (t.getBoard = a),
                (t.setImage = function (t) {
                    analytics.track("achievement image select"),
                        ty.upload("images", function (t) {
                            $(".addAchievement .image").val(t), analytics.track("Story image uploaded", { image: t });
                        });
                }),
                (t.deleteAchievement = function (n) {
                    delete e.story.achievements.achievements[n],
                        ty.put("node", e.story, function (e) {
                            t.$digest();
                        });
                }),
                (t.post = function (t) {
                    var n = $(t.currentTarget),
                        i = n.closest(".addAchievement"),
                        r = _.trim(i.find(".title").val()),
                        o = _.trim(i.find(".description").val()),
                        a = _.trim(i.find(".image").val()),
                        s = i.find(".id").val();
                    if (((s = _.slugify(s)), r && o && s && !n.hasClass("disabled"))) {
                        e.story.achievements.achievements[s] = { _id: s, t: r, i: [a], d: o };
                        ({ _id: e.story._id, achievements: e.story.achievements });
                        ty.put("node", e.story, function (t) {
                            i.find(".id").val(""), i.find(".description").val(""), i.find(".title").val(""), i.find(".image").val(""), n.removeClass("disabled"), analytics.track("Add achievement", { sid: e.story._id, id: s });
                        });
                    }
                }),
                (t.achievements = e.story.achievements.achievements),
                e.currentUser
                    ? ty.get("achievement/" + e.currentUser._id + "_" + o._id, function (n) {
                          (t.myAchievements = n.achievements), (t.achievements = { myAchievements: n.achievements, achievements: e.story.achievements.achievements }), t.$digest();
                      })
                    : (t.achievements = { achievements: e.story.achievements.achievements }),
                t.$on("moderatorEnabled", function () {
                    t.checkIsAuthor();
                }),
                (t.checkIsAuthor = function () {
                    e.currentUser && e.story && e.story.u && -1 != _.pluck(e.story.u, "_id").indexOf(e.currentUser._id)
                        ? ((e.isAuthor = !0), r.unbind(e, "story"))
                        : e.currentUser && e.story && e.story.u2 && -1 != _.pluck(e.story.u2, "_id").indexOf(e.currentUser._id)
                        ? ((e.isAuthor = !0), r.unbind(e, "story"))
                        : e.moderatorEnabled
                        ? ((e.isAuthor = !0), r.unbind(e, "story"))
                        : ((e.isAuthor = !1), r.bind(e, "story"));
                }),
                t.$on("login", function () {
                    t.checkIsAuthor();
                }),
                t.checkIsAuthor();
        },
    ]),
    angular
        .module("anonkun.story")
        .controller("chapterTab", [
            "$scope",
            "$rootScope",
            "$timeout",
            "$stateParams",
            function (t, e, n, i) {
                (t.chapterTabCache = localStorage.writenow_cache),
                    (t.post = function (n) {
                        var r = $(n.currentTarget),
                            o = r.parent(),
                            a = o.find(".fieldEditor");
                        $("#addImageContentEditableButton").remove(),
                            a.find("div").replaceWith(function () {
                                return $("<p />").append($(this).contents());
                            });
                        var s = _.trim(o.find(".fieldEditor").html());
                        (s = s.replace(/\n/g, "")), r.addClass("disabled");
                        var l = $('[ui-view="storyInner"]').scope();
                        if (!l || l.isThread)
                            return void ty.chat.post({ r: t.chatID, nt: "chat", b: s }, function () {
                                a.empty(), r.removeClass("disabled");
                            });
                        var c = (e.story.t, { sid: t.storyID, nt: "chapter", b: s }),
                            u = i.routeID;
                        u && (c.route = u),
                            ty.post("anonkun/chapter", c, function () {
                                ty.chat.post({ r: t.storyID, nt: "chat", pac: !0, b: "posts an update" }), (localStorage.writenow_cache = ""), a.empty(), r.removeClass("disabled"), analytics.track("Post chapter", { nt: "chapter", b: s });
                            });
                    });
            },
        ])
        .controller("choicesTab", [
            "$scope",
            "$rootScope",
            "$timeout",
            "$stateParams",
            function (t, e, n, i) {
                (t.localStorage = localStorage),
                    (t.editChoices = function () {
                        "" != $("#choices-tab .choiceItem:last").val() && $("#choices-tab .choiceItem:last").parent().after($("#choices-tab .choiceItem:last").clone());
                    }),
                    (t.post = function (e) {
                        var n = $("#choices-tab").find("input.choiceItem"),
                            r = [];
                        n.each(function (t, e) {
                            "" != _.trim($(e).val()) && r.push(_.trim($(e).val()));
                        }),
                            (r = _.uniq(r));
                        var o = $("#choices-tab .checkbox input.custom").is(":checked"),
                            a = $("#choices-tab .checkbox input.multiple").is(":checked"),
                            s = $("#choices-tab .checkbox input.disallowVote").is(":checked");
                        o ? localStorage.removeItem("writenow_customChoiceUnchecked") : (localStorage.writenow_customChoiceUnchecked = !0),
                            a ? localStorage.removeItem("writenow_multipleSelectionsUnchecked") : (localStorage.writenow_multipleSelectionsUnchecked = !0),
                            s ? localStorage.removeItem("writenow_disallowVoteChecked") : (localStorage.writenow_disallowVoteChecked = !0);
                        var l = $('[ui-view="storyInner"]').scope();
                        if (!l || l.isThread)
                            return void ty.chat.post({ r: t.chatID, choices: r, nt: "choice", o: r.length, custom: o, multiple: a }, function () {
                                $("#choices-tab").find(".input-prepend:not(:last)").remove();
                            });
                        if (s)
                            return void ty.post("anonkun/chapter", { sid: t.storyID, nt: "readerPost" }, function () {
                                analytics.track("Post chapter readerPost");
                            });
                        var c = { sid: t.storyID, choices: r, nt: "choice", o: r.length, custom: o, multiple: a },
                            u = i.routeID;
                        u && (c.route = u),
                            ty.post("anonkun/chapter", c, function () {
                                ty.chat.post({ r: t.storyID, nt: "chat", pac: !0, b: "posts an update" }),
                                    $("#choices-tab").find(".input-prepend:not(:last)").remove(),
                                    analytics.track("Post chapter", { nt: "choice", choices: r, o: r.length, custom: o, multiple: a });
                            });
                    });
            },
        ])
        .run(function () {
            $(document).on("input", "#chapter-tab .fieldEditor", function (t) {
                var e = $(this).clone();
                e.find("#addImageContentEditableButton").remove(),
                    e.find("div").replaceWith(function () {
                        return $("<p />").append($(this).contents());
                    });
                var n = _.trim(e.html());
                localStorage.writenow_cache = n;
            });
        }),
    angular.module("anonkun.story").controller("bans", [
        "$scope",
        "$rootScope",
        "bans",
        "$state",
        "feed",
        "story",
        function (t, e, n, i, r, o) {
            var a = o.data;
            if (((t.story = a), n)) {
                var s = [];
                n.anon.forEach(function (t) {
                    var e = _.find(n.user, function (e) {
                        return e.post == t;
                    });
                    e ? s.push({ name: e.name, time: e.time, post: e.post, a: e.a }) : s.push({ name: "anon", time: n.time[t], post: t });
                }),
                    (t.bans = s);
            }
            t.setCurrentChatID(o.data._id), e.story || (e.story = t.story), (t.url = _.take(window.location.pathname.split("/"), 4).join("/")), window.scrollTo(0, 0), analytics.track("Bans open", { sid: o.data._id, storyTitle: o.data.t });
            var l = function () {
                return o.data.r && o.data.r[0] ? o.data.r[0] : "stories";
            };
            (t.getBoard = l),
                (t.unban = function (e) {
                    ty.del("anonkun/ban", { blockFor: e, blockFrom: o.data._id }, function (n) {
                        $('.bansList li[data-post="' + e + '"]').notify("User is unbanned from this story.");
                        var i = _.findIndex(t.bans, function (t) {
                            return t.post == e;
                        });
                        t.bans.splice(i, 1), t.$digest();
                    });
                }),
                t.$on("moderatorEnabled", function () {
                    t.checkIsAuthor();
                }),
                (t.checkIsAuthor = function () {
                    e.currentUser && e.story && e.story.u && -1 != _.pluck(e.story.u, "_id").indexOf(e.currentUser._id)
                        ? ((e.isAuthor = !0), o.unbind(e, "story"))
                        : e.currentUser && t.thread && t.thread.u2 && -1 != _.pluck(t.thread.u2, "_id").indexOf(e.currentUser._id)
                        ? ((e.isAuthor = !0), o.unbind(e, "story"))
                        : e.moderatorEnabled
                        ? ((e.isAuthor = !0), o.unbind(e, "story"))
                        : ((e.isAuthor = !1), o.bind(e, "story"));
                }),
                t.$on("login", function () {
                    t.checkIsAuthor();
                }),
                t.checkIsAuthor();
        },
    ]),
    angular
        .module("anonkun.story")
        .controller("chapter", [
            "$scope",
            "$sanitize",
            "$rootScope",
            "$modal",
            "$element",
            "$stateParams",
            function (t, e, n, i, r, o) {
                t.chapter || t.chatMsg;
                t.saved = "Save Progress";
            },
        ])
        .run([
            "$rootScope",
            "$modal",
            "$stateParams",
            "chatItemDetail",
            "$timeout",
            "$compile",
            function (t, e, n, i, r, o) {
                var a = function (t, e, n) {
                        ty.post("anonkun/editChapter", { _id: t, update: e }, function (t) {
                            n && n();
                        });
                    },
                    s = function (e, n) {
                        var i = e._id,
                            r = n,
                            o = t.story,
                            a = o.bm;
                        a || (a = []);
                        var s,
                            l = _.find(a, function (t, e) {
                                return t.id == i ? ((s = e), !0) : void 0;
                            }),
                            c = { id: i, title: r, ct: e.ct },
                            u = angular.element("#content>.story").scope(),
                            d = u.chapters,
                            p = u.isChapter;
                        if (!p) {
                            var h = d[0];
                            if (h._id == i) _.startsWith(r, "#special") ? ((c.isFirst = !1), l && (l.isFirst = !1), (c.firstMarkSpecial = !0), l && (l.firstMarkSpecial = !0)) : ((c.isFirst = !0), l && (l.isFirst = !0));
                            else if (a[0] && a[0].firstMarkSpecial) {
                                var f = _.find(a, function (t) {
                                    return t.isFirst;
                                });
                                f || _.startsWith(r, "#special") || ((c.isFirst = !0), l && (l.isFirst = !0));
                            }
                        }
                        if (l && "" == r) a.splice(s, 1);
                        else if (l && !r) a.splice(s, 1);
                        else if (l) l.title = r;
                        else {
                            if ("" == r || !r) return;
                            a.push(c);
                        }
                        (a = _.sortBy(a, function (t) {
                            var e = "";
                            return _.startsWith(t.t, "#special") || (e = "1"), e + t.ct;
                        })),
                            a.length > 0 ? (t.story.bm = a) : (t.story.bm = null),
                            t.$broadcast("bookmarkEdit");
                    },
                    l = function (e) {
                        var n = angular.element(e.currentTarget),
                            i = n.scope(),
                            r = n.closest(".chapter").attr("data-id"),
                            o = _.find(i.chapters, function (t) {
                                return t._id == r;
                            }),
                            a = n.closest(".chapter");
                        (i.chapter = o),
                            ty.t("anonkun/story/editChapterInline", { chapter: o, rootScope: t, scope: i }, function (t) {
                                a.find(".chapterContent, footer.chapter-footer").hide(), a.find(".editContainer").html(t), ty.fields.editor(a.find(".editContainer .fieldBody"));
                            });
                    },
                    c = function (t) {
                        t.find(".chapterContent, footer.chapter-footer").show(), t.find(".editContainer").empty();
                    },
                    u = function (t) {
                        var e = angular.element(t.currentTarget),
                            n = e.closest(".chapter"),
                            i = e.scope(),
                            r = e.closest(".chapter").attr("data-id"),
                            o = _.find(i.chapters, function (t) {
                                return t._id == r;
                            }),
                            l = $(t.currentTarget).closest(".editChapter"),
                            u = l.find(".fieldEditor");
                        $("#addImageContentEditableButton").remove();
                        var d = _.trim(u.html());
                        d = d.replace(/\n/g, "");
                        var p = l.find('[name="chapterTitle"]').val();
                        a(o._id, { $set: { b: d, t: p } }), o.t != p && s(o, p), c(n);
                    },
                    d = function (e) {
                        var n = angular.element(e.currentTarget),
                            i = n.closest(".chapter"),
                            r = n.closest(".chapter").attr("data-id");
                        _.find(t.story.bm, function (e, n) {
                            return e.id == r ? (t.story.bm.splice(n, 1), !0) : void 0;
                        }),
                            t.$broadcast("bookmarkEdit"),
                            ty.post("anonkun/deleteChapter", { _id: r }),
                            c(i);
                    },
                    p = function (t) {
                        var e = angular.element(t.currentTarget),
                            n = e.closest(".chapter");
                        c(n);
                    },
                    h = function (t) {
                        var e = angular.element(t.currentTarget),
                            n = e.scope(),
                            r = e.closest(".chapter").attr("data-id"),
                            o = _.find(n.chapters, function (t) {
                                return t._id == r;
                            }),
                            a = i(o, {
                                position: { of: $(document), at: "center top", my: "center top" },
                                onClose: function () {
                                    a = !1;
                                },
                                beforePost: function (t) {
                                    var e = o.b;
                                    return (e = e ? e.substring(0, 50) : "chapter " + t.r), (t.ra = { _id: t.r, b: e }), _.isArray(t.r) || (t.r = [t.r]), t.r.push(o.sid), t;
                                },
                            });
                    },
                    f = function () {
                        var e = $(this);
                        if (!e.hasClass("active")) {
                            if (!t.currentUser) return void t.openRegister();
                            var i = e.closest(".chapter").attr("data-id"),
                                r = t.story._id,
                                o = n.routeID,
                                a = { sid: r, route: o, chapter: i, d: $("#routeDescription").text(), vars: ty.currentStory.storyVars };
                            e.find("span").text("Saving..."),
                                ty.put("anonkun/route/save", a, function () {
                                    e.find("span").text("Saved"), e.addClass("active"), t.$broadcast("anonkun_getSaves");
                                });
                        }
                    },
                    m = function (e) {
                        var n = angular.element(e.currentTarget).closest(".chatMsg"),
                            i = n.attr("data-id");
                        ty.get("anonkun/chapter/child/hide/" + t.story._id + "/" + i, function () {});
                    },
                    v = function (e) {
                        var n = angular.element(e.currentTarget).closest(".chatMsg"),
                            i = n.attr("data-id");
                        return n.hasClass("lastReply") || n.is(":last-child")
                            ? void ty.get("anonkun/chapter/child/delete/lr/" + t.story._id + "/" + i, function () {
                                  n.remove();
                              })
                            : void ty.get("anonkun/chapter/child/delete/" + t.story._id + "/" + i, function () {
                                  n.remove();
                              });
                    },
                    g = function (e) {
                        var n = angular.element(e.currentTarget),
                            i = n.closest(".chatMsg").attr("data-id"),
                            r = t.story;
                        if (r) {
                            var o = r._id;
                            return "unban" == n.text
                                ? void ty.del("anonkun/ban", { blockFor: i, blockFrom: o }, function (t) {
                                      $(n).notify("User is unbanned from this story."), n.text("ban");
                                  })
                                : void ty.post("anonkun/ban", { blockFor: i, blockFrom: o }, function (t) {
                                      $(n).notify("User is banned from this story."), n.text("unban");
                                  });
                        }
                    },
                    y = function (t) {
                        var e = $(t.currentTarget),
                            n = e.attr("value");
                        e.is("input") && (n = e.val());
                        var i = e.attr("name");
                        (ty.currentStory.storyVars[i] = n),
                            $('anonkunreplace[name="' + i + '"]').text(n),
                            n ? $('tr[routerequirement="' + i + '"]').attr("meetsRouteRequirements", "true") : $('tr[routerequirement="' + i + '"]').attr("meetsRouteRequirements", "failed"),
                            "all" === i && (ty.currentStory.storyVars = {}),
                            ty.keepTrackOfCurrentPosition();
                    },
                    b = function (t) {
                        var e = $(t.currentTarget);
                        e.inputAutogrow();
                    };
                $(document)
                    .on("click", ".openChapterChatDetail", h)
                    .on("click", ".editChapter.btn", l)
                    .on("click", ".saveProgress.btn", f)
                    .on("click", ".editChapter .delete.btn", d)
                    .on("click", ".editChapter .cancel.btn", p)
                    .on("click", ".editChapter .save.btn", u)
                    .on("click", ".footer-links .hide.btn", m)
                    .on("click", ".footer-links .delete.btn", v)
                    .on("click", ".footer-links .ban.btn", g)
                    .on("change", ".inStoryInput", y)
                    .on("click", ".inStoryButton", y)
                    .on("keyup change", ".inStoryInput", b);
            },
        ]);
var runTimes = 0;
angular
    .module("anonkun.story")
    .controller("choice", [
        "$scope",
        "$rootScope",
        "$modal",
        "chatItemDetail",
        "$state",
        "$timeout",
        function (t, e, n, i, r, o) {
            var a = t.chapter || t.chatMsg;
            t.$watch("chapter", function (e, n) {
                (a = t.chapter || t.chatMsg), t.sortVotes(a);
            }),
                t.$watch("chatMsg", function (e, n) {
                    (a = t.chapter || t.chatMsg), t.sortVotes(a);
                });
        },
    ])
    .run([
        "$rootScope",
        "$modal",
        "chatItemDetail",
        "$state",
        "$timeout",
        function (t, e, n, i, r) {
            var o = function (e) {
                    var i = angular.element(e.currentTarget),
                        r = (i.scope(), i.attr("data-index")),
                        o = i.attr("data-name"),
                        a = i.closest(".inner").attr("data-id");
                    i.hasClass("active") ||
                        (i.addClass("active"),
                        n(
                            { _id: a + "_choice_" + r, b: o },
                            {
                                templateUrl: "/tmpl/anonkun/story/choiceReply",
                                onClose: function () {
                                    i.removeClass("active");
                                },
                                parentReplies: function () {},
                                position: { of: i, at: "left center", my: "right center" },
                                onPost: function () {
                                    ty.post("anonkun/replyToChoiceItem", { _id: a, index: r }, function (t) {
                                        analytics.track("Reply to choice", { chapter: a, choice: r, text: o });
                                    });
                                },
                                beforePost: function (e) {
                                    return (e.ra = { _id: e.r, type: "choiceReply", index: r, b: o }), _.isArray(e.r) || (e.r = [e.r]), e.r.push(t.story._id), e.r.push(a), e;
                                },
                            }
                        ));
                },
                a = function (t, e, n) {
                    ty.post("anonkun/editChapter", { _id: t, update: e }, function (t) {
                        n && n();
                    });
                },
                s = function (t) {
                    var e = angular.element(t.currentTarget),
                        n = e.closest(".inner").attr("data-id");
                    a(n, { $set: { closed: "closed" } }, function () {
                        analytics.track("Close poll", { chapter: n });
                    });
                },
                l = function (t) {
                    var e = angular.element(t.currentTarget),
                        n = e.closest(".inner").attr("data-id");
                    a(n, { $unset: { closed: 1 } }, function () {
                        analytics.track("Open poll", { chapter: n });
                    });
                };
            t.currentTypeRoute = function (t) {
                return i.includes("standard.story.chapter") || i.includes("standard.story.home") || i.includes("standard.story.route") ? "sibling" : "child";
            };
            var c,
                u,
                d = function (e) {
                    var n = angular.element(e.currentTarget),
                        i = $(e.currentTarget).val(),
                        r = n.closest(".inner").attr("data-id"),
                        o = n.scope(),
                        s = _.find(o.chatLog || o.chapters, function (t) {
                            return t._id == r;
                        }),
                        l = $(e.currentTarget).closest(".choiceItem"),
                        c = l.attr("data-index"),
                        u = r,
                        d = s.choices[parseInt(c)];
                    s.choice = d;
                    var p = { routes: {} };
                    p["routes." + c] = i;
                    var h = { $set: p };
                    i || ((p["routes." + c] = 1), (h = { $unset: p })),
                        a(u, h, function () {
                            (t.story.multiRoute = !0), (t.story.routes = t.story.routes || {}), (t.story.routes[routeId] = { t: d }), o.$emit("editChanged"), analytics.track("Route link edited", { chapter: s._id, route: i });
                        });
                },
                p = function (e) {
                    var n = angular.element(e.currentTarget),
                        i = $(e.currentTarget).val(),
                        r = n.closest(".inner").attr("data-id"),
                        o = n.scope(),
                        s = _.find(o.chatLog || o.chapters, function (t) {
                            return t._id == r;
                        }),
                        l = $(e.currentTarget).closest(".choiceItem"),
                        c = l.attr("data-index"),
                        u = r,
                        d = s.choices[parseInt(c)];
                    s.choice = d;
                    var p = { routeRequirements: {} };
                    p["routeRequirements." + c] = i;
                    var h = { $set: p };
                    i || ((p["routeRequirements." + c] = 1), (h = { $unset: p })),
                        a(u, h, function () {
                            (t.story.multiRoute = !0), o.$emit("editChanged"), analytics.track("Route requirements edited", { chapter: s._id, requirements: t.story.routeRequirements });
                        });
                },
                h = function (e) {
                    var n = angular.element(e.currentTarget),
                        r = n.closest(".inner").attr("data-id"),
                        o = n.scope(),
                        s = _.find(o.chatLog || o.chapters, function (t) {
                            return t._id == r;
                        }),
                        l = $(e.currentTarget).closest(".choiceItem"),
                        c = l.attr("data-index"),
                        u = r;
                    if (s.routes) {
                        var d = (t.story, s.routes[c]);
                        if (d) return void (i.includes("standard.story.chapter") || i.includes("standard.story.home") ? i.go("^.route", { routeID: d }) : i.go(".route", { routeID: d }));
                    }
                    var p = s.choices[parseInt(c)];
                    (s.choice = p),
                        ty.post("anonkun/segment", s, function (e) {
                            var n = e._id,
                                i = { routes: {} };
                            (i["routes." + c] = e._id),
                                a(u, { $set: i }, function () {
                                    (t.story.multiRoute = !0), (t.story.routes = t.story.routes || {}), (t.story.routes[n] = { t: p }), o.$emit("editChanged"), analytics.track("Create route", { chapter: s._id, route: e });
                                });
                        });
                },
                f = function (t) {
                    var e = $(t.currentTarget).closest(".choiceItem"),
                        n = angular.element(t.currentTarget),
                        i = n.closest(".inner").attr("data-id"),
                        r = n.scope(),
                        o = e.attr("data-index"),
                        s =
                            (e.closest(".inner").attr("data-id"),
                            _.find(r.chatLog || r.chapters, function (t) {
                                return t._id == i;
                            }),
                            {});
                    (s["choices." + o] = "permanentlyRemoved"),
                        a(i, { $set: s }, function () {
                            analytics.track("Permanently Remove", { chapter: i, index: o });
                        });
                },
                m = function (n) {
                    c = n;
                    var i = $(n.currentTarget).closest(".choiceItem"),
                        r = angular.element(n.currentTarget),
                        o = r.closest(".inner").attr("data-id"),
                        s = r.scope(),
                        l = i.attr("data-index"),
                        d = i.closest(".inner").attr("data-id"),
                        p = _.find(s.chatLog || s.chapters, function (t) {
                            return t._id == o;
                        });
                    (t.editOptionForm = {
                        backdrop: !0,
                        keyboard: !0,
                        scope: t,
                        windowClass: "modal editOptionForm",
                        backdropClick: !0,
                        templateUrl: "/tmpl/anonkun/story/editOptionForm",
                        controller: [
                            "$scope",
                            "$modalInstance",
                            function (t, e) {
                                (u = e),
                                    (t.choice = p.choices[l]),
                                    (t.submitNewOption = function (t, n) {
                                        var i = $(t.currentTarget).closest(".editOptionForm").find(".fieldText").val(),
                                            r = {};
                                        (r["choices." + l] = i),
                                            a(d, { $set: r }, function () {
                                                analytics.track("Edit Option", { chapter: d, optionText: i });
                                            }),
                                            e.close();
                                    }),
                                    (t.close = function (t) {
                                        e.close();
                                    });
                            },
                        ],
                    }),
                        e.open(t.editOptionForm);
                },
                v = function () {
                    u.close();
                    var n = c,
                        i = $(n.currentTarget).closest(".choiceItem"),
                        r = angular.element(n.currentTarget),
                        o = r.closest(".inner").attr("data-id"),
                        s = r.scope(),
                        l = i.attr("data-index"),
                        d = i.closest(".inner").attr("data-id"),
                        p = _.find(s.chatLog || s.chapters, function (t) {
                            return t._id == o;
                        });
                    (t.xOutForm = {
                        backdrop: !0,
                        keyboard: !0,
                        scope: t,
                        windowClass: "modal xOutForm",
                        backdropClick: !0,
                        templateUrl: "/tmpl/anonkun/story/xOutForm",
                        controller: [
                            "$scope",
                            "$modalInstance",
                            function (t, e) {
                                (t.choice = p.choices[l]),
                                    (t.submitReason = function (t, n) {
                                        var i;
                                        i = n ? $(t.currentTarget).closest(".xOutForm").find(".fieldText").val() : $(t.currentTarget).text();
                                        var r = { xOutReasons: {} };
                                        (r["xOutReasons." + l] = i),
                                            a(d, { $set: r }, function () {
                                                analytics.track("Submit Reason", { chapter: d, reason: i });
                                            }),
                                            e.close();
                                    }),
                                    (t.close = function (t) {
                                        e.close();
                                    });
                            },
                        ],
                    }),
                        e.open(t.xOutForm),
                        a(o, { $addToSet: { xOut: l } }, function () {
                            analytics.track("Cross out", { chapter: o, index: l });
                        });
                },
                g = function (t) {
                    var e = $(t.currentTarget).closest(".choiceItem"),
                        n = e.attr("data-index"),
                        i = e.closest(".inner").attr("data-id");
                    a(i, { $pull: { xOut: n } }, function () {
                        analytics.track("Cross out return", { chapter: i, index: n });
                    });
                },
                y = function (e) {
                    if (!ty.anonkun.disAllowSubmitCustom) {
                        var n = $(e.currentTarget),
                            i = _.trim(n.parent().find("textarea").val()),
                            r = n.closest(".inner").attr("data-id");
                        "" != i &&
                            (ty.post("anonkun/customChoice", { _id: r, value: i, r: [t.story._id] }, function (e) {
                                ty.chat.post({ r: [t.story._id, r], nt: "chat", b: "New custom choice: " + i }),
                                    (ty.anonkun.disAllowSubmitCustom = void 0),
                                    n.parent().find("input").val(""),
                                    analytics.track("Submit custom choice", { choice: i, chapter: r });
                            }),
                            (ty.anonkun.disAllowSubmitCustom = 1));
                    }
                },
                b = function (e) {
                    var n = $(e.currentTarget);
                    if (!n.hasClass("active")) {
                        var i = (n.scope(), n.closest(".inner").attr("data-id")),
                            r = _.trim(n.closest(".readerPost").find("textarea").val());
                        "" != r &&
                            (ty.post("anonkun/readerPost", { value: r, _id: i, r: [t.story._id] }, function () {
                                n.removeClass("active"), n.parent().find("input").val("");
                            }),
                            n.addClass("active"),
                            analytics.track("Submit readerPost", { value: r, chapter: i }));
                    }
                },
                w = function (n) {
                    var i,
                        o = angular.element(n.currentTarget),
                        a = o.scope(),
                        s = o.parent().attr("data-index"),
                        l = o.find("td.text").text(),
                        c = o.closest(".inner").attr("data-id"),
                        u = o.hasClass("isThread");
                    if (
                        ((i = u
                            ? _.find(a.chatLog, function (t) {
                                  return t._id == c;
                              })
                            : _.find(a.chapters, function (t) {
                                  return t._id == c;
                              })),
                        "closed" != i.closed)
                    ) {
                        var d = $(n.currentTarget).parent(),
                            p = c,
                            h = function (o) {
                                if ((t.openedvoteChapterForm && t.openedvoteChapterForm.close(), u)) return void o();
                                if (t.story.voteNagOff) return void o();
                                if (t.story.mcOff) return void o();
                                t.voteChapterForm = {
                                    backdrop: !0,
                                    keyboard: !0,
                                    scope: t,
                                    windowClass: "modal voteChapterForm voteChapterForm-" + s,
                                    backdropClick: !0,
                                    templateUrl: "/tmpl/anonkun/story/voteChapterForm",
                                    controller: [
                                        "$scope",
                                        "$modalInstance",
                                        function (e, n) {
                                            (e.choice = i.choices[s]),
                                                (e.submitReason = function (e, r) {
                                                    var a = $(e.currentTarget).closest(".voteChapterForm").find(".fieldText").val();
                                                    (a = _.clean(a)),
                                                        (a.length || t.story.mcOff) &&
                                                            (o(a),
                                                            ty.chat.post({ r: [i.sid, p, p + "_choice_" + s], nt: "chat", b: a, ra: { _id: p, type: "choiceReply", index: s, b: l } }),
                                                            ty.post("anonkun/replyToChoiceItem", { _id: p, index: s }, function (t) {}),
                                                            n.close());
                                                }),
                                                (e.close = function (t) {
                                                    n.close();
                                                });
                                        },
                                    ],
                                };
                                var a = e.open(t.voteChapterForm);
                                (t.openedvoteChapterForm = a),
                                    a.opened.then(function () {
                                        r(function () {
                                            var t = $(".voteChapterForm-" + s);
                                            t.position({ collision: "fit", of: $(n.currentTarget), at: "right center", my: "left center" }), t.find(".fieldText").focus();
                                        });
                                    });
                            };
                        d.hasClass("active")
                            ? ty.del("anonkun/voteChapter", { _id: p, vote: s }, function (e) {
                                  e.user && ((t.UserIdenticon = e.user), (localStorage.UserIdenticon = e.user));
                                  d.find(".choiceMain .text").text();
                                  analytics.track("Vote remove chapter", { choice: $(n.currentTarget).text(), index: s, chapter: p, resUser: e });
                              })
                            : h(function (e) {
                                  ty.post("anonkun/voteChapter", { _id: p, voteComment: e, vote: s }, function (e) {
                                      e.user && ((t.UserIdenticon = e.user), (localStorage.UserIdenticon = e.user));
                                      d.find(".choiceMain .text").text();
                                      analytics.track("Vote on Chapter", { choice: $(n.currentTarget).text(), index: s, chapter: p, resUser: e });
                                  });
                              });
                    }
                };
            (t.votersCount = function (t) {
                var e = t.votes;
                return e
                    ? _.size(
                          _.filter(e, function (t) {
                              return _.isArray(t) ? t.length > 0 : !0;
                          })
                      )
                    : 0;
            }),
                (t.isActive = function (e, n) {
                    var i;
                    if ((t.UserIdenticon ? (i = t.UserIdenticon) : localStorage.UserIdenticon && ((t.UserIdenticon = localStorage.UserIdenticon), (i = localStorage.UserIdenticon)), !i)) return !1;
                    var r = n.votes;
                    if (r && void 0 != r[i] && null != r[i])
                        if (_.isArray(r[i])) {
                            var o = r[i];
                            if (-1 != o.indexOf(e)) return !0;
                        } else {
                            if (e == r[i]) return !0;
                            if ("readerPost" === n.nt) return !0;
                        }
                }),
                (t.sortVotes = function (e) {
                    if ("choice" == e.nt) {
                        var n, i, r, o, a;
                        (o = e.votes || {}), (userVotes = e.userVotes || {}), (a = {}), (userVotesobj = {}), (r = []), (n = e.choices);
                        var s = e.routes || [];
                        return (
                            (i = function (t) {
                                return e.xOut ? -1 !== e.xOut.indexOf(t + "") : void 0;
                            }),
                            _.each(o, function (t) {
                                var e;
                                return _.isArray(t)
                                    ? ((e = t),
                                      e.forEach(function (t) {
                                          return i(t) ? void 0 : (a[n[t]] = a[n[t]] + 1 || 1);
                                      }))
                                    : i(t)
                                    ? void 0
                                    : (a[n[t]] = a[n[t]] + 1 || 1);
                            }),
                            _.each(userVotes, function (t) {
                                var e;
                                return _.isArray(t)
                                    ? ((e = t),
                                      e.forEach(function (t) {
                                          return i(t) ? void 0 : (userVotesobj[n[t]] = userVotesobj[n[t]] + 1 || 1);
                                      }))
                                    : i(t)
                                    ? void 0
                                    : (userVotesobj[n[t]] = userVotesobj[n[t]] + 1 || 1);
                            }),
                            _.each(a, function (t, e) {
                                var i = n.indexOf(e);
                                return r.push({ name: e, route: s[i], index: i, votes: t, userVotes: userVotesobj[e] });
                            }),
                            r.sort(function (t, e) {
                                return parseFloat(e.votes) - parseFloat(t.votes);
                            }),
                            _.each(n, function (t, e) {
                                i(e) || a[t] || 0 === a[t] || r.push({ route: s[e], name: t, index: e + "", votes: 0 });
                            }),
                            t.story && t.story.hideVote && (r = _.shuffle(r)),
                            (e.sortedVotes = r),
                            e
                        );
                    }
                }),
                $(document)
                    .on("click", ".voteChapter", w)
                    .on("click", ".xOutReturn", g)
                    .on("click", ".xOut", v)
                    .on("click", ".editOption.icon", m)
                    .on("click", ".permanentlyRemove.icon", f)
                    .on("click", ".addCustomChoice", y)
                    .on("click", ".open-poll", l)
                    .on("click", ".close-poll", s)
                    .on("click", ".discussChoice", o)
                    .on("click", ".addReaderPost", b)
                    .on("click", ".createRoute", h)
                    .on("change", ".editRouteID", d)
                    .on("change", ".editRouteRequirements", p);
        },
    ]),
    angular
        .module("anonkun.story")
        .config([
            "$stateProvider",
            function (t) {
                t.state("standard.story", {
                    url: "/:board/:storyTitle/:storyID",
                    resolve: {
                        story: [
                            "$stateParams",
                            "tySubscribe",
                            function (t, e) {
                                var n = t.storyID;
                                return e.node(n);
                            },
                        ],
                        following: [
                            "$http",
                            "story",
                            function (t, e) {
                                var n = e.data,
                                    i = n.u[0]._id;
                                return t.get("/api/anonkun/isFollowing/" + i).then(function (t) {
                                    return t.data;
                                });
                            },
                        ],
                    },
                    controller: "storySharedController",
                    views: { content: { templateUrl: "/tmpl/anonkun/story", controller: "story" } },
                })
                    .state("standard.story.home", { url: "/home", views: { "content@standard": { templateUrl: "/tmpl/anonkun/story", controller: "story" } } })
                    .state("standard.story.route", { url: "/routes/:routeID?routeChapter?save", views: { "content@standard": { templateUrl: "/tmpl/anonkun/story", controller: "story" } } })
                    .state("standard.story.reviews", {
                        url: "/reviews",
                        resolve: {
                            reviews: [
                                "$http",
                                "story",
                                function (t, e) {
                                    return t.get("/api/anonkun/review/" + e.data._id).then(function (t) {
                                        return t.data;
                                    });
                                },
                            ],
                        },
                        views: { storyInner: { templateUrl: "/tmpl/anonkun/story/review", controller: "storyReview" } },
                    })
                    .state("standard.story.achievements", { url: "/achievements", views: { storyInner: { templateUrl: "/tmpl/anonkun/story/achievements", controller: "achievements" } } })
                    .state("standard.story.bans", {
                        url: "/bans",
                        resolve: {
                            bans: [
                                "$http",
                                "story",
                                function (t, e) {
                                    return t.get("/api/anonkun/story/bans/" + e.data._id).then(
                                        function (t) {
                                            return t.data;
                                        },
                                        function (t) {}
                                    );
                                },
                            ],
                        },
                        views: { storyInner: { templateUrl: "/tmpl/anonkun/story/bans", controller: "bans" } },
                    })
                    .state("standard.story.threads", { url: "/threads", views: { storyInner: { templateUrl: "/tmpl/anonkun/story/threads", controller: "storyThreads" } }, data: { threads: !0 } })
                    .state("standard.story.threadItem", {
                        url: "/threads/:threadTitle/:threadId",
                        resolve: {
                            thread: [
                                "$stateParams",
                                "tySubscribe",
                                function (t, e) {
                                    var n = t.threadId;
                                    return e.node(n);
                                },
                            ],
                        },
                        views: { storyInner: { templateUrl: "/tmpl/anonkun/story/threadItem", controller: "storyThreadItem" } },
                        data: { threads: !0 },
                    })
                    .state("standard.story.chapter", { url: "/:chapterTitle/:chapterID", views: { "content@standard": { templateUrl: "/tmpl/anonkun/story", controller: "story" } } })
                    .state("standard.story.routes", { url: "/routes", views: { storyInner: { templateUrl: "/tmpl/anonkun/story/routes", controller: "routes" } } })
                    .state("standard.story.routesList", { url: "/routesList", views: { storyInner: { templateUrl: "/tmpl/anonkun/story/routes", controller: "routesList" } } });
            },
        ])
        .run([
            "$rootScope",
            function (t) {
                $(document).hoverIntent({
                    over: function () {
                        $(this).addClass("open");
                    },
                    out: function () {
                        $(this).removeClass("open");
                    },
                    selector: "#threads .threadList",
                }),
                    t.$on("$stateChangeStart", function (e, n, i, r, o) {
                        r.name.includes("standard.story") && !n.name.includes("standard.story") && (t.story = void 0);
                    });
            },
        ]),
    angular
        .module("anonkun.story")
        .controller("route", [
            "$scope",
            "$rootScope",
            "$stateParams",
            "$state",
            "tySubscribe",
            "route",
            "story",
            function (t, e, n, i, r, o, a) {
                t.route = o;
                var s = function () {
                    return e.story.r && e.story.r[0] ? e.story.r[0] : "stories";
                };
                (t.getBoard = s),
                    t.$on("moderatorEnabled", function () {
                        t.checkIsAuthor();
                    }),
                    (t.checkIsAuthor = function () {
                        e.currentUser && e.story && e.story.u && -1 != _.pluck(e.story.u, "_id").indexOf(e.currentUser._id)
                            ? (e.isAuthor = !0)
                            : e.currentUser && e.story && e.story.u2 && -1 != _.pluck(e.story.u2, "_id").indexOf(e.currentUser._id)
                            ? (e.isAuthor = !0)
                            : e.moderatorEnabled
                            ? (e.isAuthor = !0)
                            : (e.isAuthor = !1);
                    }),
                    t.$on("login", function () {
                        t.checkIsAuthor();
                    });
                var l = n.storyID,
                    c = n.storyTitle,
                    u = n.routeID,
                    d =
                        (n.save,
                        function () {
                            r.list({ path: "anonkun/route/" + u + "/chapters", property: "chapters", scope: t });
                        });
                if (u) {
                    var p = function (t, e, n) {
                        ty.put("anonkun/segment", e, function (t) {
                            n && n();
                        });
                    };
                    return (
                        t.$on("editChanged", function () {
                            p(o._id, o);
                        }),
                        t.setCurrentChatID(l),
                        t.setCurrentThreadHref("/" + s() + "/" + c + "/" + l + "/threads"),
                        void d()
                    );
                }
            },
        ])
        .controller("routes", [
            "$scope",
            "$stateParams",
            "$rootScope",
            "$state",
            function (t, e, n, i) {
                var r = function () {
                    return n.story.r && n.story.r[0] ? n.story.r[0] : "stories";
                };
                t.getBoard = r;
                var o = e.storyID;
                $(".routesChart").html("Route chart is loading..."),
                    $(".listLink").show(),
                    $(".mapLink").hide(),
                    ty.post("anonkun/routes/" + o, { url: "/" + r() + "/" + e.storyTitle + "/" + e.storyID + "/routes/" }, function (t) {
                        $.getScript("https://unpkg.com/panzoom@8.7.3/dist/panzoom.min.js", function () {
                            $.getScript("https://unpkg.com/mermaid@8.4.8/dist/mermaidAPI.js", function () {
                                mermaid.initialize({ noteMargin: 50, theme: "default", messageMargin: 50, flowchart: { useMaxWidth: !1, htmlLabels: !1, curve: "linear", nodeSpacing: 50, rankSpacing: 50 } });
                                const e = function (t) {
                                    $(".routesChart").html(t), $(".routesChart a").attr("target", "_blank");
                                    var e = document.querySelector(".routesChart svg > g");
                                    panzoom(e, { maxZoom: 7, minZoom: 0.3 });
                                };
                                mermaid.render("routesChartSVG", t, e);
                            });
                        });
                    }),
                    t.setCurrentThreadHref("/" + r() + "/" + e.storyTitle + "/" + e.storyID + "/threads"),
                    t.setCurrentChatID(o);
            },
        ])
        .controller("routesList", [
            "$scope",
            "$stateParams",
            "$rootScope",
            "$state",
            function (t, e, n, i) {
                var r = function () {
                    return n.story.r && n.story.r[0] ? n.story.r[0] : "stories";
                };
                (t.getBoard = r), (t.routes = []);
                var o = e.storyID,
                    a = "/" + r() + "/" + e.storyTitle + "/" + e.storyID + "/routes/";
                $(".listLink").hide(),
                    $(".mapLink").show(),
                    ty.get("anonkun/routes/" + o, function (t) {
                        ty.t("anonkun/story/routesList", { routes: t, url: a }, function (t) {
                            $("#routesChart").html(t);
                        });
                    });
            },
        ]),
    (ty.sameTags = {
        data: {
            monstergirls: { to: "monstergirl" },
            sciencefiction: { to: "scifi" },
            boymc: { to: "maleprotagonist" },
            malemc: { to: "maleprotagonist" },
            femc: { to: "femaleprotagonist" },
            femalemc: { to: "femaleprotagonist" },
            political: { to: "politics" },
            magicalgirls: { to: "magicalgirl" },
        },
        process: function (t) {
            return ty.sameTags.data[t] ? ty.sameTags.data[t].to : t;
        },
    }),
    (ty.moderators = [
        "a430aa89-5cfe-4861-8a9a-f77428158ca9",
        "8ZaNSPiBoAzAtpYQ3",
        "9cb6d2f6-1079-4d2b-8624-c8ab78af433c",
        "-IyrokINEswL62qsypwi",
        "-JCC49fXOn7eOMB-Wbet",
        "-J3Zg2fI87a1MsRfeVNC",
        "-JPKWcy4pnMcQiQBEU00",
        "ms323dKY5ijWLpjEX",
        "14bdfb40-3708-46ee-8164-7ee1d029a507",
    ]),
    (ty.currentStory = { storyVars: {} }),
    angular
        .module("anonkun.story")
        .filter("storiesNotSelf", [
            "$rootScope",
            function (t) {
                return function (e) {
                    return (
                        t.story &&
                            "nsfw" != t.story.contentRating &&
                            (e = e.filter(function (t) {
                                return "nsfw" != t.contentRating;
                            })),
                        _.filter(e, function (e) {
                            return t.story && e._id == t.story._id ? !1 : !0;
                        })
                    );
                };
            },
        ])
        .controller("story", [
            "$scope",
            "$sanitize",
            "$rootScope",
            "$stateParams",
            "$state",
            "tySubscribe",
            "story",
            "chatItemDetail",
            "following",
            "feed",
            "$modal",
            "$interval",
            "$compile",
            "$location",
            "$timeout",
            function (t, e, n, i, r, o, a, s, l, c, u, d, p, h, f) {
                function m() {
                    function e(e) {
                        var i = _.filter(e, function (t) {
                                return _.startsWith(t.title, "#special");
                            }),
                            r = [];
                        i.length > 0 &&
                            ((r = _.pluck(i, "id")),
                            (n.specialBookmarks = r),
                            (n.filterSpecial = function (t) {
                                return -1 != r.indexOf(t.id);
                            })),
                            e && e[0] && (e[0].isFirst ? (t.homeTitle = e[0].title) : (t.homeTitle = "Home")),
                            (t.filterNotSpecial = function (t) {
                                return t.trash ? !1 : currentlyViewingSpecial ? !0 : -1 == r.indexOf(t._id);
                            }),
                            (t.filterNotSpecialBookmark = function (t, e) {
                                return -1 == r.indexOf(t.id) && !t.isFirst;
                            });
                    }
                    var a = n.story;
                    if (((n.pageTitle = a.t), "post" != a.nt)) {
                        n.defaultNick = a.dn || "anon";
                        var s,
                            l,
                            c = a.bm;
                        if (c && c.length > 0) {
                            var s = c[0].id,
                                u = 9999999999999998,
                                d = 0;
                            if (((t.currentlyViewingSpecial = !1), i.chapterID)) {
                                s = i.chapterID;
                                var p = _.find(c, function (t) {
                                    return t.id == s;
                                });
                                if (!p) return void r.go("^");
                                if (((t.chapterTitle = p.title), p && p.title && !_.startsWith(p.title, "#special"))) {
                                    var h = c.indexOf(p);
                                    (d = p.ct),
                                        (l = _.find(c, function (t, e) {
                                            return !_.startsWith(t.title, "#special") && e > h;
                                        })),
                                        l && (u = l.ct - 1);
                                } else p && p.title && _.startsWith(p.title, "#special") && ((u = p.ct + 1), (d = p.ct), (t.currentlyViewingSpecial = !0));
                            } else {
                                if (c[0].isFirst)
                                    c[1] && c[1].title && !_.startsWith(c[1].title, "#special")
                                        ? (u = c[1].ct - 1)
                                        : ((l = _.find(c, function (t, e) {
                                              return !_.startsWith(t.title, "#special") && e > 1;
                                          })),
                                          l && (u = l.ct - 1));
                                else if (c[0].title && !_.startsWith(c[0].title, "#special")) u = c[0].ct - 1;
                                else if (
                                    (l = _.find(c, function (t, e) {
                                        return !_.startsWith(t.title, "#special") && e > 0;
                                    }))
                                ) {
                                    var f = _.find(c, function (t, e) {
                                        return !_.startsWith(t.title, "#special") && e > 0 && t.id != l.id;
                                    });
                                    f ? (u = f.ct) : l.isFirst || (u = l.ct), (d = l.ct);
                                } else d = c[0].ct + 1;
                                d = 0;
                            }
                            e(c), (d = parseInt(d, 10)), (u = parseInt(u, 10));
                            var m = { path: "anonkun/chapters/" + n.story._id + "/" + d + "/" + u, channel: "anonkun/chapters/" + n.story._id, property: "chapters", scope: t };
                            (m.callback = function (t) {
                                A();
                            }),
                                9999999999999998 != u && (m.childChangedAdd = "no new"),
                                o.list(m);
                            var v = w,
                                g = function () {
                                    if (i.chapterID) {
                                        var e;
                                        if (
                                            (_.find(c, function (t, n) {
                                                return t.id == s ? void (e = n) : void 0;
                                            }),
                                            _.startsWith(c[e].title, "#special"))
                                        )
                                            return void (t.nextChapter = { href: "/" + y() + "/" + ty.url(a.t || "invalid title") + "/" + v + "/home", title: "Back to main story" });
                                        var n = _.find(c, function (t, n) {
                                            return !_.startsWith(t.title, "#special") && n > e;
                                        });
                                        if (!n || _.startsWith(n.title, "#special")) return;
                                        t.nextChapter = { href: "/" + y() + "/" + ty.url(a.t || "invalid title") + "/" + v + "/" + ty.url(n.title) + "/" + n.id, title: n.title };
                                    } else {
                                        var r = c[0];
                                        if (r.isFirst || _.startsWith(r.title, "#special")) {
                                            var o = _.find(c, function (t, e) {
                                                return !_.startsWith(t.title, "#special") && e > 0;
                                            });
                                            r = o;
                                            var l = _.find(c, function (t, e) {
                                                return !_.startsWith(t.title, "#special") && e > 0 && t.id != o.id;
                                            });
                                            l && _.startsWith(c[0].title, "#special") && (r = l);
                                        }
                                        if (!r) return;
                                        t.nextChapter = { href: "/" + y() + "/" + ty.url(a.t || "invalid title") + "/" + v + "/" + ty.url(r.title) + "/" + r.id, title: r.title };
                                    }
                                };
                            g();
                        } else o.list({ path: "anonkun/chapters/" + n.story._id, property: "chapters", scope: t, callback: A });
                        (t.likeChapter = function (t) {
                            var e = $(t.currentTarget);
                            0 == e.find(".unlike").length && ty.chat.post({ r: w, nt: "chat", b: "likes an update" });
                        }),
                            t.$on("bookmarkEdit", function (i, r) {
                                e(), b(), t.$apply(), ty.get("anonkun/rebuildToC/" + n.story._id);
                            });
                    }
                }
                n.mobileController = "story";
                var v = i.routeID;
                a.data.init && $("#main").addClass("focused"),
                    (n.story = a.data),
                    (n.threads = !1),
                    (ty.currentStory.storyVars = {}),
                    (t.story.b = ty.replaceChapterDynamicInputs(t.story.b, !0)),
                    t.$on("$destroy", function () {
                        a.unbind(),
                            (n.beforePost = function (t) {
                                return t;
                            }),
                            (n.newTopics = void 0),
                            (n.defaultNick = "anon"),
                            $(window).unbind("scroll"),
                            $("#main").removeClass("minimizeChat"),
                            $("#main").removeClass("focused");
                    });
                var g = n.story._id;
                (t.userStyles = function () {
                    var t = {};
                    return localStorage.allowWide && (t.allowWide = !0), localStorage.pureReading && (t.pureReading = !0), localStorage.fontSize && (t["fontSize-" + localStorage.fontSize] = !0), t;
                }),
                    localStorage.minimizeTopics && $("#main").addClass("minimizeTopics"),
                    (t.minimizeTopics = function () {
                        $("#main").toggleClass("minimizeTopics"), localStorage.minimizeTopics ? delete localStorage.minimizeTopics : (localStorage.minimizeTopics = 1);
                    }),
                    (t.minimizeChat = function () {
                        $("#main").toggleClass("minimizeChat");
                    }),
                    (t.changeRightVisibility = function () {
                        $("#main").toggleClass("focused");
                    }),
                    (t.changeLeftVisibility = function () {
                        $("body").toggleClass("allowLeftSidebar");
                        var t = n.currentUser;
                        return t
                            ? ((n.currentUser.profile = n.currentUser.profile || {}),
                              (n.currentUser.profile.settings = n.currentUser.profile.settings || {}),
                              n.currentUser.profile.settings.disallowLeftSideBar ? (n.currentUser.profile.settings.disallowLeftSideBar = !1) : (n.currentUser.profile.settings.disallowLeftSideBar = !0),
                              void ty.put("user", n.currentUser.profile, function () {}))
                            : void 0;
                    }),
                    (t.changeTheme = function () {
                        var t = n.currentUser;
                        return t
                            ? ((n.currentUser.profile = n.currentUser.profile || {}),
                              (n.currentUser.profile.settings = n.currentUser.profile.settings || {}),
                              (n.currentUser.profile.settings.theme = n.currentUser.profile.settings.theme || {}),
                              n.currentUser.profile.settings.theme.dark ? (n.currentUser.profile.settings.theme.dark = !1) : (n.currentUser.profile.settings.theme.dark = !0),
                              void ty.put("user", n.currentUser.profile, function () {
                                  location.reload();
                              }))
                            : ("dark" == $.cookie("themeColor") ? $.cookie("themeColor", "default", { path: "/" }) : $.cookie("themeColor", "dark", { path: "/" }), void location.reload());
                    }),
                    (t.changeAllowWidth = function () {
                        localStorage.allowWide ? (delete localStorage.allowWide, $("#content .nodeDetail").removeClass("allowWide")) : ((localStorage.allowWide = !0), $("#content .nodeDetail").addClass("allowWide"));
                    }),
                    (t.changePureReading = function () {
                        localStorage.pureReading ? (delete localStorage.pureReading, $("#content .nodeDetail").removeClass("pureReading")) : ((localStorage.pureReading = !0), $("#content .nodeDetail").addClass("pureReading"));
                    }),
                    (t.incFontSize = function () {
                        "14" == localStorage.fontSize
                            ? (localStorage.fontSize = "16")
                            : "16" == localStorage.fontSize
                            ? (localStorage.fontSize = "18")
                            : "18" == localStorage.fontSize
                            ? (localStorage.fontSize = "20")
                            : "20" == localStorage.fontSize
                            ? (localStorage.fontSize = "22")
                            : "22" == localStorage.fontSize
                            ? (localStorage.fontSize = "24")
                            : (localStorage.fontSize = "24"),
                            $("#content .nodeDetail").removeClass("fontSize-14"),
                            $("#content .nodeDetail").removeClass("fontSize-16"),
                            $("#content .nodeDetail").removeClass("fontSize-18"),
                            $("#content .nodeDetail").removeClass("fontSize-20"),
                            $("#content .nodeDetail").removeClass("fontSize-22"),
                            $("#content .nodeDetail").removeClass("fontSize-24"),
                            $("#content .nodeDetail").addClass("fontSize-" + localStorage.fontSize);
                    }),
                    (t.decFontSize = function () {
                        "16" == localStorage.fontSize
                            ? (localStorage.fontSize = "14")
                            : "18" == localStorage.fontSize
                            ? (localStorage.fontSize = "16")
                            : "20" == localStorage.fontSize
                            ? (localStorage.fontSize = "18")
                            : "22" == localStorage.fontSize
                            ? (localStorage.fontSize = "20")
                            : "24" == localStorage.fontSize
                            ? (localStorage.fontSize = "22")
                            : (localStorage.fontSize = "14"),
                            $("#content .nodeDetail").removeClass("fontSize-14"),
                            $("#content .nodeDetail").removeClass("fontSize-16"),
                            $("#content .nodeDetail").removeClass("fontSize-18"),
                            $("#content .nodeDetail").removeClass("fontSize-20"),
                            $("#content .nodeDetail").removeClass("fontSize-22"),
                            $("#content .nodeDetail").removeClass("fontSize-24"),
                            $("#content .nodeDetail").addClass("fontSize-" + localStorage.fontSize);
                    }),
                    (t.fontSize = function () {
                        return localStorage.fontSize ? "fontSize-" + localStorage.fontSize : void 0;
                    });
                var y = function () {
                    return n.story.r && n.story.r[0] ? n.story.r[0] : "stories";
                };
                (t.getBoard = y), t.setCurrentThreadHref("/" + y() + "/" + i.storyTitle + "/" + i.storyID + "/threads");
                var b = function (t, e, i) {
                    (n.story.ta = n.story.ta || []),
                        (n.story.spoilerTags = n.story.spoilerTags || []),
                        n.story.spoilerTags.length > 0 &&
                            (n.story.spoilerTags = _.compact(
                                _.map(n.story.spoilerTags, function (t) {
                                    return (t = _.camelCase(t)), (t = ty.sameTags.process(t)), t.toLowerCase();
                                })
                            ));
                    var r = n.story.ta.concat(n.story.spoilerTags);
                    (r = _.map(r, function (t) {
                        return (t = _.camelCase(t)), (t = ty.sameTags.process(t)), t.toLowerCase();
                    })),
                        (r = _.compact(r)),
                        (r = _.uniq(r)),
                        (n.story.ta = r);
                    var o = r[0];
                    o && (o = "stories"),
                        (n.story.r = n.story.r || []),
                        (n.story.r[0] = o),
                        ty.put("node", n.story, function (t) {
                            i && i();
                        });
                };
                t.$on("editChanged", function () {
                    b();
                }),
                    (t.publish = function () {
                        (n.story.init = !1),
                            (n.story.trash = !1),
                            b(),
                            $("#main").removeClass("focused"),
                            (t.justPublished = !0),
                            ty.post("anonkun/board/item", { r: [n.story._id], t: "Casual Chat", ta: ["autoTopic"], storyThread: !0 }, function () {
                                ty.post("anonkun/board/item", { r: [n.story._id], t: "Characters Discussion", ta: ["autoTopic"], storyThread: !0, b: "Talk about your favorite characters here" }, function () {
                                    ty.post("anonkun/board/item", { r: [n.story._id], ta: ["autoTopic"], t: "Writer Feedback", storyThread: !0 });
                                });
                            });
                    }),
                    (t.dismissJustPublished = function () {
                        t.justPublished = !1;
                    }),
                    (t.readingTime = function () {
                        if (!a.data.w) return "";
                        var t = a.data.w / 200,
                            e = 0,
                            n = 0;
                        return t > 60 && (e = t / 60), e > 24 && (n = e / 24), n ? Math.ceil(n) + " day read" : e ? Math.ceil(e) + " hour read" : t ? Math.ceil(t) + " minute read" : void 0;
                    }),
                    (t.spoilersTagsVisible = !1),
                    (t.showSpoilersTags = function () {
                        (t.spoilersTagsVisible = !0), analytics.track("Tags show spoilers", { story: n.story._id });
                    }),
                    "object" == typeof n.story.ta ? (t.keyTags = n.story.ta.slice(0, 3)) : (t.keyTags = []),
                    (t.tags = function () {
                        var e = n.story.ta;
                        return (e = _.xor(e, n.story.spoilerTags)), (e = _.difference(e, t.keyTags));
                    });
                var w = i.storyID;
                t.storyID = w;
                var x = n.readHistory[w];
                ty.get("anonkun/refLatest/" + w, function (e) {
                    parseInt(x) < e.ut && ((n.newTopics = !0), t.$apply());
                });
                var k = Math.round(new Date().getTime());
                if (((n.readHistory[w] = k), (localStorage.readHistory = JSON.stringify(n.readHistory)), n.currentUser))
                    if (n.currentUser.profile && n.currentUser.profile.readLocation) {
                        var S = n.currentUser.profile.readLocation;
                        S[g] ? (ty.saveFile = S[g]) : (ty.saveFile = JSON.parse(localStorage["sF_" + g] || "{}"));
                    } else ty.saveFile = JSON.parse(localStorage["sF_" + g] || "{}");
                else ty.saveFile = JSON.parse(localStorage["sF_" + g] || "{}");
                ty.saveFile.vars
                    ? _.each(ty.saveFile.vars, function (t, e) {
                          ty.currentStory.storyVars[e] = t;
                      })
                    : (ty.currentStory.storyVars = ty.currentStory.storyVars || {}),
                    (t.chapterRender = function () {
                        if ((A(), i.routeChapter)) {
                            var t = $('#storyPosts>.jadeRepeat>.chapter[data-id="' + i.routeChapter + '"] .chapter-footer');
                            return void window.scrollTo(0, t.offset().top);
                        }
                        if (($(".inStoryInput").inputAutogrow(), C.vc)) {
                            var e = $('#storyPosts>.jadeRepeat>.chapter[data-id="' + C.vc + '"]');
                            return e.length < 1
                                ? void ($("#storyProperties").length > 1 ? window.scrollTo(0, $("#storyProperties").offset().top) : window.scrollTo(0, 0))
                                : void ty.handler(
                                      "chapterThreads:postRender",
                                      function () {
                                          var t = e.find(".chapterContent").height(),
                                              n = e.offset().top,
                                              i = C.cp,
                                              r = i * t,
                                              o = n + r;
                                          console.log("saveFile load:", C), console.log("scrollPos, scrollHeight:", r, o), window.scrollTo(0, o);
                                      },
                                      null,
                                      "one"
                                  );
                        }
                    });
                var C = ty.saveFile;
                if (i.chapterID && !v) (C._id = i.chapterID), (C.t = i.chapterTitle), (localStorage["sF_" + g] = JSON.stringify(C)), (t.isChapter = !0);
                else if ("standard.story.home" == r.current.name);
                else if (C._id && !v) {
                    var T = n.story.bm;
                    if (T) {
                        var E = _.find(T, function (t) {
                            return C._id == t.id;
                        });
                        E && "standard.story" == r.current.name && r.go(".chapter", { chapterTitle: C.t, chapterID: C._id }, { location: "replace" });
                    }
                }
                (n.mobileActive = void 0),
                    (n.beforePost = function (e) {
                        if (!t.chapters) return e;
                        var n = _.sortBy(t.chapters, function (t) {
                                return -t.ct;
                            }),
                            i = _.find(n, function (t, e) {
                                return !_.startsWith(t.t, "#special");
                            }),
                            r = i;
                        if (!r) return e;
                        var o = r.b;
                        return (o = o ? o.substring(0, 50) : "chapter " + r._id), (e.ra = { hide: !0, _id: r._id, b: o }), _.isArray(e.r) || (e.r = [e.r]), e.r.push(r._id), e;
                    }),
                    (t.specialBookmarkTitle = function (t) {
                        return _.trim(t.replace(/#special/gi, ""));
                    }),
                    t.$on("moderatorEnabled", function () {
                        t.checkIsAuthor();
                    }),
                    (t.checkIsAuthor = function () {
                        n.currentUser && n.story && n.story.u && -1 != _.pluck(n.story.u, "_id").indexOf(n.currentUser._id)
                            ? ((n.isAuthor = !0), a.unbind(n, "story"))
                            : n.currentUser && n.story && n.story.u2 && -1 != _.pluck(n.story.u2, "_id").indexOf(n.currentUser._id)
                            ? ((n.isAuthor = !0), a.unbind(n, "story"))
                            : n.moderatorEnabled
                            ? ((n.isAuthor = !0), a.unbind(n, "story"))
                            : ((n.isAuthor = !1), a.bind(n, "story"));
                    }),
                    t.$on("login", function () {
                        t.checkIsAuthor();
                    }),
                    (n.setImage = function (e) {
                        analytics.track("Story image select"),
                            ty.upload("images", function (e) {
                                (n.story.i = [e]),
                                    ty.put("node", n.story, function () {
                                        t.$digest();
                                    }),
                                    analytics.track("Story image uploaded", { image: e });
                            });
                    }),
                    t.setCurrentChatID(w),
                    analytics.track("Story read", { _id: w, title: i.storyTitle }),
                    (t.followUser = function (e) {
                        if (!n.currentUser) return void n.openRegister();
                        var i = n.story.u[0]._id;
                        if (e)
                            ty.post("anonkun/unfollow/" + i, {}, function () {
                                (t.following = ""), t.$digest();
                            });
                        else {
                            ty.post("anonkun/follow/" + i, {}, function () {
                                (t.following = !0), t.$digest();
                            });
                            var r = n.currentUser._id;
                            c({ type: "follow", path: r, user: i, value: "Is now a new follower of yours." });
                        }
                    }),
                    (t.following = l),
                    (t.chapterClass = function () {}),
                    (t.transformChapter = function (t) {
                        return (t = ty.centerImage(t)), (t = ty.replaceChapterDynamicInputs(t));
                    });
                var A = function () {
                    var e = function (e, n) {
                        ty.t("threads/threadExpandedListItem", { data: e, scope: t }, function (t) {
                            var i = $(".chapter[data-id=" + n + "] .topicsTab");
                            i.children(".threadList").length ? i.children(".threadList").replaceWith(t) : i.append(t), e && $(".chapter[data-id=" + n + "] .closeDiscussions.bottom").show();
                        });
                    };
                    t.updatePostWatcher && t.updatePostWatcher(),
                        (t.updatePostWatcher = t.$on("updatePost", function (n, i) {
                            if (i.hidden || i.deleted || i.trash) return void $(".chat[data-id=" + i._id + "]").remove();
                            var r = i.r[1],
                                o = _.find(t.chapters, function (t) {
                                    return t._id == r;
                                });
                            if (o) {
                                var a = _.find(o.threads, function (t, e) {
                                    return t._id == i._id ? !0 : void 0;
                                });
                                if (a) {
                                    var s = !1;
                                    if ((a.p < i.p && (s = !0), (a.p = i.p), (a.ut = i.ut), (a.t = i.t || a.t), (a.lr = i.lr || a.lr), (a.i = i.i || a.i), (o.threads = _.sortByAll(o.threads, "ut")), !i.lr))
                                        return void $(".chapter[data-id=" + r + "] .topicsTab .chatMsg[data-id=" + i._id + "] .lastReply").remove();
                                    _.each(i.lr.r, function (t) {
                                        var e = $(".chapter[data-id=" + r + "] .topicsTab .chatMsg[data-id=" + t + "]"),
                                            n = e.children("footer.footer-links").children(".expandThread"),
                                            i = parseInt(n.attr("replies")) || 0,
                                            o = i + 1;
                                        if ((n.removeClass("hidden"), n.attr("replies", o), 1 == o ? n.text("show " + o + " reply") : n.text("show " + o + " replies"), s)) {
                                            if (!e.find(".replies").hasClass("hasMore") && o > e.find(".replies .logItem").length) {
                                                var a = $('<div class="btn loadMore dim-font-color small">Load More replies</div>');
                                                e.find(".replies").addClass("hasMore").append(a),
                                                    a.click(function () {
                                                        e.find(">.footer-links .expandThread").hasClass("active")
                                                            ? (e.addClass("refreshThreadReplies"), e.find(".replies").removeClass("hasMore"), e.find(">.footer-links .expandThread").trigger("click"))
                                                            : e.closest(".threadListItem").find(">.footer-links .expandThread").trigger("click");
                                                    });
                                            }
                                        } else;
                                    });
                                } else
                                    ty.post("anonkun/chapterThreads", { chapters: [r] }, function (t) {
                                        (o.threads = t), e(o.threads, r);
                                    });
                            }
                        })),
                        t.updateChatWatcher && t.updateChatWatcher(),
                        (t.updateChatWatcher = t.$on("updateChat", function (e, i) {
                            _.each(i.r, function (e) {
                                var r = $('#storyPosts [data-id="' + e + '"] .chapterComments');
                                if (r.length) {
                                    var o = r.scope(),
                                        a = o.chatLog,
                                        s = r.find("[data-id=" + i._id + "]");
                                    if (s.length && !i.updateProperties)
                                        ty.t("chat/chatItem", { rootScope: n, scope: t, chatMsg: i, chatID: e }, function (t) {
                                            s.closest(".logItem").replaceWith(t);
                                        });
                                    else {
                                        if (s.length) return void s.find(".replies").removeClass("hidden").find("span").text(i.p);
                                        a &&
                                            (a.push(i),
                                            ty.t("chat/chatItem", { rootScope: n, scope: t, chatMsg: i, chatID: e }, function (t) {
                                                r.find(".jadeRepeat").append(t);
                                            }));
                                    }
                                }
                            });
                        }));
                    var i = _.pluck(t.chapters, "_id");
                    i &&
                        i.length &&
                        ty.post("anonkun/chapterThreads", { chapters: i }, function (n) {
                            var r = {};
                            _.each(n, function (t) {
                                var e = t.r[1];
                                (r[e] = r[e] || []), r[e].push(t);
                            }),
                                _.each(i, function (n, o) {
                                    if (r[n]) {
                                        var a = r[n],
                                            s = _.find(t.chapters, function (t) {
                                                return t._id == n;
                                            });
                                        (s.threads = a), e(s.threads, n);
                                    } else o != i.length - 1 && $(".chapter[data-id=" + n + "] .chapter-footer").addClass("closedDiscussion");
                                }),
                                $.event.trigger("chapterThreads:postRender");
                        });
                };
                n.story.achievements && n.currentUser
                    ? ty.get("achievement/" + n.currentUser._id + "_" + g, function (e) {
                          (t.myAchievements = e.achievements), (t.userAchievements = { my: _.size(e.achievements), total: _.size(n.story.achievements.achievements) }), t.$digest();
                      })
                    : n.story.achievements && (t.userAchievements = { my: 0, total: _.size(n.story.achievements.achievements) }),
                    (t.filterNotSpecialBookmark = function (t, e) {
                        return !_.startsWith(t.title, "#special") && !t.isFirst;
                    }),
                    (t.specialBookmarkTitle = function (t) {
                        return _.trim(t.replace(/#special/gi, ""));
                    }),
                    (t.contentStyle = function () {
                        var t =
                            window.innerHeight -
                            $("#header").outerHeight(!0) -
                            $("#nav-otherLive").outerHeight(!0) -
                            $("#mainLinks").outerHeight(!0) -
                            $("#nav-nextLive").outerHeight(!0) -
                            $("#nav-options").outerHeight(!0) -
                            $("#nav-board").outerHeight(!0) -
                            $("#nav-live").outerHeight(!0) -
                            20;
                        return t > 120 ? { "max-height": t + "px", "overflow-y": "auto" } : void $("#left").css("overflow-y", "auto");
                    }),
                    (t.goLive = function () {
                        (n.story.isLive = !0),
                            (n.story.nextLive = !1),
                            ty.get("anonkun/goLive/" + n.story._id, function (e) {
                                (t.goingLive = e.length),
                                    f(function () {
                                        t.goingLive = !1;
                                    }, 6e3),
                                    t.$digest();
                            });
                    }),
                    (t.getRouteRequirements = function (t, e) {
                        return e.routeRequirements ? e.routeRequirements[t] : void 0;
                    }),
                    (t.meetsRouteRequirements = function (e, n) {
                        if (!n.routeRequirements) return !0;
                        if (!n.routeRequirements[e]) return !0;
                        var i = n.routeRequirements[e];
                        return i.startsWith("!")
                            ? ((i = i.substr(1)), ty.currentStory.storyVars[i] && 0 != ty.currentStory.storyVars[i] ? (t.isAuthor ? "failed-isAuthor" : "failed") : !0)
                            : ty.currentStory.storyVars[i] && 0 != ty.currentStory.storyVars[i]
                            ? !0
                            : t.isAuthor
                            ? "failed-isAuthor"
                            : "failed";
                    }),
                    (t.goOffline = function () {
                        (n.story.isLive = !1), (n.story.nextLive = void 0), ty.get("anonkun/goOffline/" + n.story._id);
                    }),
                    (t.storySettings = {
                        backdrop: !0,
                        keyboard: !0,
                        backdropClick: !0,
                        windowClass: "modal fullHeight",
                        templateUrl: "/tmpl/anonkun/story/edit",
                        controller: [
                            "$scope",
                            "$modalInstance",
                            function (t, e) {
                                (t.unpublish = function () {
                                    var t = n.story,
                                        e = t._id;
                                    t.trash ? analytics.track("Story trash", e) : analytics.track("Story publish", e);
                                }),
                                    (t.defaultNick = function (t) {
                                        var t = n.story.dn;
                                        analytics.track("Story default nick", t), (n.defaultNick = t);
                                    }),
                                    (t.setU2UserID = function (e, i) {
                                        n.story;
                                        return "" == e
                                            ? void delete n.story.u2[i]._id
                                            : void ty.post("user/idByName", { name: e }, function (e) {
                                                  (n.story.u2[i]._id = e._id), t.$apply();
                                              });
                                    }),
                                    (t.setMODUserID = function (e, i) {
                                        n.story;
                                        return "" == e
                                            ? void delete n.story.mod[i]._id
                                            : void ty.post("user/idByName", { name: e }, function (e) {
                                                  (n.story.mod[i]._id = e._id), t.$apply();
                                              });
                                    }),
                                    (t.close = function (t) {
                                        ty.put("node", n.story), e.close(t);
                                    });
                            },
                        ],
                    }),
                    (t.editStory = function () {
                        u.open(t.storySettings);
                    }),
                    (t.storyFilters = {
                        backdrop: !0,
                        keyboard: !0,
                        backdropClick: !0,
                        windowClass: "modal fullHeight",
                        templateUrl: "/tmpl/anonkun/story/authorInformation",
                        controller: [
                            "$scope",
                            "$modalInstance",
                            function (t, e) {
                                t.close = function (t) {
                                    b(), e.close(t);
                                };
                            },
                        ],
                    }),
                    (t.editStoryFilters = function () {
                        u.open(t.storyFilters);
                    }),
                    (t.chapterSettings = {
                        backdrop: !0,
                        keyboard: !0,
                        backdropClick: !0,
                        windowClass: "manageChapterslol",
                        templateUrl: "/tmpl/anonkun/story/manageChapters",
                        controller: [
                            "$scope",
                            "$modalInstance",
                            function (t, e) {
                                t.close = function (t) {
                                    e.close(t);
                                };
                            },
                        ],
                    }),
                    (t.manageChapters = function () {
                        u.open(t.chapterSettings);
                    }),
                    (t.nextLiveSeconds = function () {
                        return n.story && n.story.nextLive ? (n.story.nextLive - Date.now() < 0 ? !1 : !0) : !1;
                    }),
                    (t.nextLive = function () {
                        u.open({
                            backdrop: !1,
                            keyboard: !1,
                            windowClass: "modal",
                            backdropClick: !1,
                            templateUrl: "/tmpl/anonkun/story/nextLive",
                            controller: [
                                "$scope",
                                "$rootScope",
                                "$modalInstance",
                                function (t, e, n) {
                                    (t.close = function (t) {
                                        n.close(t);
                                    }),
                                        (t.minTime = function () {
                                            return new Date().getHours();
                                        }),
                                        (t.clear = function (t) {
                                            e.story.nextLive = null;
                                        }),
                                        (t.setTimes = {}),
                                        (t.save = function (i) {
                                            var r = $(i.currentTarget),
                                                o = r.closest(".modal"),
                                                a = o.find(".timepicker").timepicker("getTime");
                                            if (!r.hasClass("disabled")) {
                                                var s = a.getTime();
                                                if ((s < Date.now() && (s += 864e5), t.setTimes && t.setTimes.days)) {
                                                    var l = parseInt(t.setTimes.days, 10);
                                                    s += 864e5 * l;
                                                }
                                                (e.story.nextLive = s), ty.put("node", e.story), n.close();
                                            }
                                        }),
                                        (t.clear = function (t) {
                                            (e.story.nextLive = null), ty.put("node", e.story), n.close();
                                        });
                                },
                            ],
                        });
                    }),
                    (t.currentChapter = function () {
                        var e = n.story;
                        if (e.bm) {
                            var i = r.params,
                                o = i.chapterID,
                                a = e.bm.filter(function (t) {
                                    return !_.startsWith(t.title, "#special");
                                }),
                                s = a.length,
                                l = (1 / s) * 100;
                            if (!o) return (t.currentChapterPercent = l), e.bm[0] && e.bm[0].isFirst ? e.bm[0].title : "Table of Contents";
                            var c = _.find(n.story.bm, function (t, e) {
                                return t.id == o ? (_.startsWith(t.title, "#special") && (l = 100), !0) : t.id == o;
                            });
                            if (!_.startsWith(c.title, "#special")) {
                                var u = _.findIndex(a, function (t, e) {
                                    return t.id == o;
                                });
                                l = ((u + 1) / s) * 100;
                            }
                            t.currentChapterPercent = l;
                            var d = t.specialBookmarkTitle(c.title);
                            return d.length > 24 && (d = d.substring(0, 23) + "..."), d;
                        }
                    });
                var I = function () {
                    ty.get("anonkun/saves/" + a.data._id, function (e) {
                        e.saves &&
                            _.size(e.saves) > 0 &&
                            ((t.saves = _.map(e.saves, function (t) {
                                return t;
                            })),
                            t.$digest());
                    });
                };
                t.$on("anonkun_getSaves", I),
                    I(),
                    (t.expandTOC = function (t) {
                        var e = $(t.currentTarget),
                            n = e.find(".current"),
                            i = e.find(".contentsInner");
                        i.hasClass("active") ? (i.removeClass("active"), n.removeClass("active")) : (i.addClass("active"), n.addClass("active"));
                    }),
                    t.$on("like", function () {
                        if (!n.currentUser) return void n.openRegister();
                        ty.chat.post({ r: n.story._id, nt: "chat", b: "likes this story" });
                        var t = Math.random().toString(36).substring(7);
                        localStorage.UserIdenticon && (t = localStorage.UserIdenticon), n.currentUser && (t = n.currentUser._id);
                        var e = n.story.u[0]._id;
                        c({ type: "like", path: t + "_" + n.story._id, user: e, value: 'Likes "' + n.story.t + '"', sid: n.story._id });
                    }),
                    (t.followUser = function (e) {
                        var i = n.story.u[0]._id;
                        if (e)
                            ty.post("anonkun/unfollow/" + i, {}, function () {
                                (t.following = ""), t.$digest();
                            });
                        else {
                            ty.post("anonkun/follow/" + i, {}, function () {
                                (t.following = !0), t.$digest();
                            });
                            var r = n.currentUser._id;
                            c({ type: "follow", path: r, user: i, value: "Is now a new follower of yours." });
                        }
                    }),
                    (t.following = l),
                    (t.getBoard = function () {
                        return n.story.r && n.story.r[0] ? n.story.r[0] : "stories";
                    }),
                    (t.openCollections = function () {
                        if (!n.currentUser) return void n.openRegister();
                        var t = { backdrop: !0, keyboard: !0, windowClass: "modal fullHeight", backdropClick: !0, templateUrl: "/tmpl/anonkun/story/collection" };
                        ty.get("anonkun/collections/" + w, function (e) {
                            e = e || [];
                            for (var i = ["finished", "favorites", "watching"], r = i.length - 1; r >= 0; r--) {
                                var o = _.find(e, function (t) {
                                    return i[r] == t.t;
                                });
                                o || e.push({ t: i[r], collection: [], colcomment: {} });
                            }
                            (t.controller = [
                                "$scope",
                                "$modalInstance",
                                function (t, i) {
                                    (t.isInCollection = function (t) {
                                        return -1 != t.collection.indexOf(n.story._id);
                                    }),
                                        (t.newList = function (e) {
                                            var n = $(e.currentTarget).find(".newCollection"),
                                                i = _.slugify(n.val());
                                            t.addToCollection(i), n.val("");
                                        }),
                                        (t.addToCollection = function (e, n) {
                                            return e
                                                ? n
                                                    ? void ty.del("anonkun/collections/" + w, { collection: e }, function (e) {
                                                          var n = _.findIndex(t.collections, function (t) {
                                                              return t._id == e._id;
                                                          });
                                                          return -1 != n ? ((t.collections[n] = e), void t.$digest()) : (t.collections.push(e), void t.$digest());
                                                      })
                                                    : void ty.post("anonkun/collections/" + w, { collection: e }, function (e) {
                                                          var n = _.findIndex(t.collections, function (t) {
                                                              return t.t == e.t;
                                                          });
                                                          return -1 != n ? ((t.collections[n] = e), void t.$digest()) : (t.collections.push(e), void t.$digest());
                                                      })
                                                : void 0;
                                        }),
                                        (t.close = function (t) {
                                            i.close(t);
                                        }),
                                        (t.collections = e);
                                },
                            ]),
                                u.open(t);
                        });
                    });
                var R = function () {
                    o.list({ path: "anonkun/route/" + v + "/chapters", property: "chapters", scope: t });
                };
                $(".story.nodeDetail").on("click", ".closeDiscussions", function (t) {
                    var e = $(t.currentTarget),
                        n = e.closest(".chapter");
                    n.find(".chapter-footer").addClass("closedDiscussion");
                }),
                    $(".story.nodeDetail")
                        .on("click", ".expandComments", function (e) {
                            var i = $(e.currentTarget);
                            if (!i.hasClass("click")) {
                                var r = function () {
                                        ty.post("chat/light/page", { page: 1, r: a }, function (e) {
                                            i.removeClass("clicked"),
                                                (t.chatLog = e),
                                                (t.chatID = a),
                                                e.length > 5 && i.closest(".chapter-footer").find(".closeDiscussions.bottom").show(),
                                                ty.t("chat/lightChatList", { rootScope: n, scope: t, data: e, chatID: a }, function (e) {
                                                    var n = p(e);
                                                    (e = n(t)), o.find(".chapterComments").html(e);
                                                });
                                        });
                                    },
                                    o = i.closest(".chapter");
                                o.find(".chapter-footer").removeClass("closedDiscussion");
                                var a = o.attr("data-id");
                                i.is(".active") ? (i.removeClass("active"), o.find(".chapterComments").empty(), $(i).get(0).scrollIntoView()) : (i.addClass("clicking"), r());
                            }
                        })
                        .on("click", ".commentsClose", function (t) {
                            var e = $(t.currentTarget),
                                n = e.closest(".chapter");
                            n.find(".expandComments").removeClass("active"), n.find(".chapterComments").empty();
                        })
                        .on("click", ".newTopic", function (e) {
                            var i = $(e.currentTarget),
                                r = i.closest(".chapter"),
                                o = r.attr("data-id");
                            if (!n.currentUser) return void n.openRegister();
                            var a = function (e) {
                                var i = function (e) {
                                    var i = t.currentThreadListHref;
                                    t.createThreadForm = {
                                        backdrop: !0,
                                        keyboard: !0,
                                        scope: t,
                                        windowClass: "modal largeModal createThreadForm postThreadChapter",
                                        backdropClick: !0,
                                        templateUrl: "/tmpl/threads/createThreadForm",
                                        controller: [
                                            "$scope",
                                            "$modalInstance",
                                            function (t, e) {
                                                (t.submit = function (t, r) {
                                                    var a = $(t.currentTarget).find(".title").val(),
                                                        s = $(t.currentTarget).find(".body").val();
                                                    if (((a = _.clean(a)), a.length)) {
                                                        var l = { r: [n.story._id, o], t: a, storyThread: !0, b: s };
                                                        ty.post("anonkun/board/item", l, function (t) {
                                                            h.path(i + "/" + ty.url(t.t) + "/" + t._id), n.$apply();
                                                        }),
                                                            e.close();
                                                    }
                                                }),
                                                    (t.close = function (t) {
                                                        e.close();
                                                    });
                                            },
                                        ],
                                    };
                                    var r = u.open(t.createThreadForm);
                                    r.opened.then(function () {
                                        setTimeout(function () {
                                            var t = $(".createThreadForm");
                                            t.find(".title").focus();
                                        });
                                    });
                                };
                                i();
                            };
                            a(e);
                        })
                        .on("click", ".chatLight .chatInputContainer .image", function () {
                            var t = $(this);
                            analytics.track("Chat post image select"),
                                ty.upload("images", function (e) {
                                    ty.chat.post({ r: [n.story._id, t.attr("data-ID")], nt: "chat", i: e }), analytics.track("Chat post image uploaded", { image: e });
                                });
                        })
                        .on("keypress", ".chatLight .chatInputContainer .chatInput", function (e) {
                            if (13 == e.keyCode && !e.shiftKey) {
                                e.preventDefault();
                                var i = angular.element(e.currentTarget),
                                    r = i.attr("data-id"),
                                    o = angular.element(e.currentTarget).parent().find(".chatInput"),
                                    a = _.trim(o.val());
                                if ("" != a && ty.chat.allowed && a.length > 1) {
                                    t.$emit("chatPost", a);
                                    var s = /^\//g;
                                    if (s.test(a)) {
                                        var l = _.trim(a);
                                        t.$emit("chatCommand", l);
                                    }
                                    var c = ([n.story._id, r], { r: [n.story._id, r], nt: "chat", b: a });
                                    ty.chat.post(c), o.val(""), o.focus();
                                }
                                n.$broadcast("elastic:adjust");
                            }
                        }),
                    (t.getOtherLive = function (e, n) {
                        ty.get("anonkun/board/live", function (e) {
                            (t.liveStories = e.stories), (t.listLoaded = !0), t.$apply();
                        });
                    });
                var P = d(function () {
                    t.getOtherLive();
                }, 24e4);
                if (
                    (t.$on("$destroy", function () {
                        d.cancel(P);
                    }),
                    t.getOtherLive(),
                    t.$on("childAdded", function (e, i) {
                        if ("chapter" == i.nt || "readerPost" == i.nt || "choice" == i.nt) {
                            var r;
                            "anon" != i.u &&
                                "Anon" != i.u &&
                                (_.each(n.story.u, function (t) {
                                    _.each(i.u, function (e) {
                                        t._id == e._id && (r = !0);
                                    });
                                }),
                                r &&
                                    ty.t("anonkun/story/chapterListItem", { chapter: i, rootScope: n, scope: t }, function (e) {
                                        var r = p(e);
                                        e = r(t);
                                        var o = $("#page-body").find(".jadeRepeat>article.chapter:last-child").attr("data-ct") || 0;
                                        i.ct > parseInt(o) && $("#storyPosts").find(">.jadeRepeat").append(e),
                                            t.isAuthor ||
                                                (n.currentUser || localStorage["profile.notifications.noAudio"]
                                                    ? (n.currentUser && n.currentUser.profile && n.currentUser.profile.notifications && n.currentUser.profile.notifications.noAudio) ||
                                                      ty.media.playnow({ volume: 0.3, wav: "https://d2t4fc8ff77neh.cloudfront.net/cardSrcMedia/17caqcfo7_80921__justinbw__buttonchime02up.wav" })
                                                    : ty.media.playnow({ volume: 0.3, wav: "https://d2t4fc8ff77neh.cloudfront.net/cardSrcMedia/17caqcfo7_80921__justinbw__buttonchime02up.wav" }));
                                    }));
                        }
                    }),
                    t.$on("childChanged", function (e, i) {
                        var r = $("#main").find('.jadeRepeat .chapter[data-id="' + i._id + '"]');
                        if ((i.trash && r.remove(), i.updateProperties)) return void (i.p > 1 ? r.find(".expandComments span").text(i.p + " comments") : r.find(".expandComments span").text(i.p + " comment"));
                        var o = "anonkun/story/chapterListItem";
                        ty.t(o, { chapter: i, rootScope: n, scope: t }, function (e) {
                            var o = p(e);
                            e = o(t);
                            var a = e.find(".chapter-footer");
                            if ((r.find(".chapter-footer").html(a.html()), "choice" == i.nt)) {
                                var s = $(e).find("table.poll"),
                                    l = r.find("table.poll");
                                n.story && n.story.hideVote
                                    ? s.find("tr.choiceItem").each(function () {
                                          var t = $(this).attr("data-index"),
                                              e = l.find("tr.choiceItem[data-index=" + t + "]");
                                          e.length ? e.replaceWith($(this)) : l.append($(this));
                                      })
                                    : r.find("table.poll").replaceWith(s);
                                var a = $(e).find("footer.poll-control");
                                r.find("footer.poll-control").replaceWith(a);
                                var c = $(e).find("h4.poll-head");
                                return r.find("h4.poll-head").replaceWith(c), void (i.closed ? r.find(".inner").addClass(i.closed) : r.find(".inner").removeClass("closed"));
                            }
                            if ("readerPost" == i.nt) {
                                var u = $(e).find(".readerPosts.fieldBody");
                                r.find(".readerPosts.fieldBody").replaceWith(u);
                                var a = $(e).find("footer.poll-control");
                                r.find("footer.poll-control").replaceWith(a);
                                var c = $(e).find("h4.poll-head");
                                return r.find("h4.poll-head").replaceWith(c), void (i.closed ? r.find(".inner").addClass(i.closed) : r.find(".inner").removeClass("closed"));
                            }
                            (e = $(e).find(".fieldBody")), r.find(".fieldBody").html(e.html());
                        });
                    }),
                    v)
                ) {
                    var j = function (t, e, n) {
                        ty.put("anonkun/segment", e, function (t) {
                            n && n();
                        });
                    };
                    return (
                        (t.isRoute = !0),
                        (t.isChapter = !0),
                        ty.get("anonkun/route/" + v, function (e) {
                            (t.route = e), t.$digest(), R();
                        }),
                        void t.$on("editChanged", function () {
                            j(v, t.route);
                        })
                    );
                }
                if (!t.isChapter) {
                    var g = n.story._id;
                    ty.get("anonkun/review/" + g + "/preview", function (e) {
                        (t.review = e.review), (t.reviewsCount = e.count), t.$digest();
                    });
                }
                m();
            },
        ])
        .run(function () {
            $(window).scroll(ty.keepTrackOfCurrentPosition);
        }),
    (ty.keepTrackOfCurrentPosition = _.debounce(function () {
        if (ty.rootScope.story) {
            var t = ty.saveFile,
                e = ty.rootScope.story._id,
                n = $("#storyPosts .chapter:in-viewport").first();
            if (!(n.length < 1 && ((n = $("#storyPosts .chapter").last()), n.length < 1))) {
                var i = n.attr("data-id"),
                    r = n.offset().top,
                    o = $(window).scrollTop() - r,
                    a = n.find(".chapterContent").height(),
                    s = o / a;
                (t.vc = i), (t.vars = ty.currentStory.storyVars), (t.cp = s.toFixed(2)), (localStorage["sF_" + e] = JSON.stringify(t)), ty.saveFileToProfileDebounced(e, t);
            }
        }
    }, 500)),
    (ty.saveFileToProfile = function (t, e) {
        var n = ty.rootScope;
        if (n.currentUser) {
            n.currentUser.profile || (n.currentUser.profile = { readLocations: {} });
            var i = n.currentUser.profile.readLocations || {};
            (i[t] = e), ty.user.updateProfile("readLocations", i);
        }
    }),
    (ty.saveFileToProfileDebounced = _.debounce(ty.saveFileToProfile, 1e4, { leading: !1, trailing: !0 })),
    (function (t) {
        var e = {
            init: function (e, n) {
                return this.each(function () {
                    var i = t(this);
                    if (i.is("textarea") && !i.data("nodePostBox")) {
                        var r = i.closest(".postBox");
                        i.data("nodePostBox", !0),
                            r.find(".submit").click(function () {
                                if (!r.data("submitting")) {
                                    var t = r.find(".fieldText");
                                    t.trigger("submit");
                                    var e = t.val(),
                                        n = e,
                                        o = r.data("fieldReference");
                                    o || (o = i.attr("data-fieldReference")),
                                        n && "" != n
                                            ? ((n = _.str.truncate(n, 45)),
                                              r.data("submitting", !0),
                                              ty.node.create({ fieldBody: e, fieldReference: o, title: n }, function () {
                                                  r.data("submitting", !1), r.find(".fieldText").val("").trigger("blur"), mpq.track("Post", { user: user, module: "node" });
                                              }))
                                            : i.notify("Please type something before submitting.");
                                }
                            });
                    } else
                        i.data("nodePostBox")
                            ? (i.children(".postBox").data("fieldReference", e), n && n(i))
                            : ty.load("node/postForm", function () {
                                  var r = ty.t("node/postBox");
                                  i.data("nodePostBox", !0).append(r),
                                      ty.user.current.get(function (e) {
                                          t(".authorPane", r).replaceWith(ty.t("postUserBox", e));
                                      }),
                                      r.data("fieldReference", e),
                                      n && n(i);
                              });
                    return i;
                });
            },
            close: function () {},
            render: function () {},
        };
        t.fn.postBox = function (t) {
            return e[t] ? e[t].apply(this, Array.prototype.slice.call(arguments, 1)) : e.init.apply(this, arguments);
        };
    })(jQuery),
    (ty.page = { render: function (t) {} }),
    (ty.path = {}),
    angular.module("anonkun.userProfile", []),
    angular.module("anonkun.userProfile").config([
        "$stateProvider",
        function (t) {
            t.state("user", {
                url: "/user/:username",
                resolve: {
                    currentProfile: [
                        "$http",
                        "$rootScope",
                        "$stateParams",
                        function (t, e, n) {
                            var i = n.username;
                            return (
                                (i = i.toLowerCase()),
                                t.get("/api/user/" + i).then(function (t) {
                                    return (e.currentProfile = t.data), (e.mobileController = "profile"), t.data;
                                })
                            );
                        },
                    ],
                },
                views: {
                    main: {
                        resolve: {
                            popularUserStories: [
                                "$http",
                                "currentProfile",
                                function (t, e) {
                                    var n = e._id;
                                    return t.get("/api/anonkun/popularUserStories/" + n).then(function (t) {
                                        return t.data;
                                    });
                                },
                            ],
                        },
                        templateUrl: "/tmpl/anonkun/profile/main",
                        controller: "userProfile",
                    },
                },
            }),
                t.state("user.followers", {
                    url: "/followers",
                    views: {
                        content: {
                            resolve: {
                                followers: [
                                    "$http",
                                    "currentProfile",
                                    function (t, e) {
                                        return t.get("/api/anonkun/followers/" + e._id).then(function (t) {
                                            return t.data;
                                        });
                                    },
                                ],
                            },
                            templateUrl: "/tmpl/anonkun/profile/followers",
                            controller: "userProfile.followers",
                        },
                    },
                }),
                t.state("user.following", {
                    url: "/following",
                    views: {
                        content: {
                            resolve: {
                                following: [
                                    "$http",
                                    "currentProfile",
                                    function (t, e) {
                                        return t.get("/api/anonkun/following/" + e._id).then(function (t) {
                                            return t.data;
                                        });
                                    },
                                ],
                            },
                            templateUrl: "/tmpl/anonkun/profile/following",
                            controller: "userProfile.following",
                        },
                    },
                }),
                t.state("user.collections", {
                    url: "/collections",
                    views: {
                        profileContent: {
                            resolve: {
                                collections: [
                                    "$http",
                                    "currentProfile",
                                    function (t, e) {
                                        return t.get("/api/anonkun/userCollections/" + e._id).then(function (t) {
                                            return t.data;
                                        });
                                    },
                                ],
                            },
                            templateUrl: "/tmpl/anonkun/profile/collections",
                            controller: "userProfileCollections",
                        },
                    },
                }),
                t.state("user.collection", {
                    url: "/collections/:collectionTitle",
                    resolve: {
                        collection: [
                            "$stateParams",
                            "$http",
                            function (t, e) {
                                var n = t.collectionTitle,
                                    i = t.username.toLowerCase();
                                return e.get("/api/anonkun/collections/byTitle/" + n + "/" + i).then(function (t) {
                                    return t.data;
                                });
                            },
                        ],
                    },
                    views: { profileContent: { templateUrl: "/tmpl/anonkun/collection/detail", controller: "collectionDetail" } },
                }),
                t.state("user.stories", {
                    url: "/stories",
                    views: {
                        profileContent: {
                            resolve: {
                                stories: [
                                    "$http",
                                    "currentProfile",
                                    function (t, e) {
                                        return t.get("/api/anonkun/userStories/" + e._id).then(function (t) {
                                            return t.data;
                                        });
                                    },
                                ],
                                unpublishedStories: [
                                    "$http",
                                    "currentProfile",
                                    "$rootScope",
                                    function (t, e, n) {
                                        return n.currentUser && n.currentUser._id === e._id
                                            ? t.get("/api/anonkun/unpublishedUserStories").then(function (t) {
                                                  return t.data;
                                              })
                                            : void 0;
                                    },
                                ],
                            },
                            templateUrl: "/tmpl/anonkun/profile/stories",
                            controller: "userProfileStories",
                        },
                    },
                });
        },
    ]),
    angular.module("anonkun.userProfile").controller("userProfile.followers", [
        "$scope",
        "followers",
        function (t, e) {
            t.followers = e;
        },
    ]),
    angular.module("anonkun.userProfile").controller("userProfile.following", [
        "$scope",
        "following",
        function (t, e) {
            t.following = e;
        },
    ]),
    angular.module("anonkun.userProfile").controller("userProfile.sideMenu", [
        "$scope",
        "$rootScope",
        "$modal",
        "$stateParams",
        "chatWindow",
        function (t, e, n, i, r) {
            i.username.toLowerCase();
        },
    ]),
    angular
        .module("anonkun.userProfile")
        .controller("userProfile", [
            "$scope",
            "tySubscribe",
            "$stateParams",
            "$rootScope",
            "popularUserStories",
            "currentProfile",
            "$modal",
            "chatWindow",
            "$timeout",
            function (t, e, n, i, r, o, a, s, l) {
                t.stories = r;
                n.username.toLowerCase(), e.list({ scope: t, path: "anonkun/newsFeed/" + o._id, property: "newsFeed", public: !0 });
                (t.listViewCompact = !0),
                    (t.currentProfile = o),
                    (i.pageTitle = o.username),
                    analytics.track("Profile view", { profileName: o.username, profile_id: o._id }),
                    (t.isProfileUser = function () {
                        return i.currentUser && i.currentUser._id == o._id ? !0 : !1;
                    }),
                    (t.isProfileUserUNVerified = function () {
                        return i.currentUser ? (i.currentUser._id != o._id || i.currentUser.emails[0].verified ? !1 : !0) : !1;
                    }),
                    (t.replaceImage = function () {
                        t.isProfileUser() &&
                            (analytics.track("Profile image select"),
                            ty.upload("images", function (e) {
                                t.$apply(function () {
                                    i.currentProfile._id == i.currentUser._id && (i.currentProfile.profile = i.currentUser.profile), (i.currentUser.profile = i.currentUser.profile || {}), (i.currentUser.profile.image = e);
                                }),
                                    ty.put("user", i.currentUser.profile),
                                    analytics.track("Profile image uploaded", { image: e });
                            }));
                    }),
                    (t.profileSettings = {
                        backdrop: !0,
                        keyboard: !0,
                        backdropClick: !0,
                        templateUrl: "/tmpl/anonkun/profile/edit",
                        controller: [
                            "$scope",
                            "$modalInstance",
                            function (t, e) {
                                (t.plan = i.currentUser.plan),
                                    (t.cancelSubscription = function () {
                                        document.querySelector("#cancelSuper").classList.add("loading"),
                                            (document.querySelector("#cancelSuper").disabled = !0),
                                            ty.get("anonkun/cancel-subscription", function () {
                                                $("#cancelSuper").text("Cancel complete"), $("#cancelSuper").removeClass("loading");
                                            });
                                    }),
                                    (t.genders = ["Male", "Female", "Other", "Private"]),
                                    (t.submit = function () {}),
                                    (t.setUserID = function (e, n) {
                                        i.story;
                                        return "" == e
                                            ? void delete i.story.u[n]._id
                                            : void ty.post("user/idByName", { name: e }, function (e) {
                                                  (i.story.u[n]._id = e._id), t.$apply();
                                              });
                                    }),
                                    (t.close = function (t) {
                                        ty.put("user", i.currentUser.profile), e.close(t);
                                    });
                            },
                        ],
                    }),
                    (t.editProfile = function () {
                        a.open(t.profileSettings);
                    }),
                    (t.listViewCompact = !0),
                    (t.privateChat = function () {
                        if (!i.currentUser) return void i.openRegister();
                        var t,
                            e = i.currentProfile._id,
                            n = i.currentProfile.username;
                        i.currentProfile.profile && (t = i.currentProfile.profile.image), s(e, n, t);
                    });
            },
        ])
        .controller("newsFeedPost", [
            "$scope",
            function (t) {
                t.post = function (e) {
                    var n = $(e.currentTarget),
                        i = (n.find("textarea"), _.trim(t.chatMessage));
                    ty.post("anonkun/board/item", { nt: "post", r: ["social"], b: i }, function (t) {
                        console.log("story:", t), ty.post("microblog", t);
                    }),
                        (t.chatMessage = "");
                };
            },
        ])
        .controller("newsFeedItem", [
            "$scope",
            function (t) {
                t.item.t;
            },
        ]),
    angular.module("anonkun.userProfile").controller("userProfileStories", [
        "$scope",
        "$http",
        "$stateParams",
        "$rootScope",
        "stories",
        "unpublishedStories",
        function (t, e, n, i, r, o) {
            (t.publishedStories = r), (t.unpublishedStories = o), (t.listViewCompact = !1);
            var a = n.username.toLowerCase();
            (t.isProfileUser = function () {
                return i.currentUser && i.currentUser.username == a ? !0 : !1;
            }),
                t.$on("login", function (n) {
                    t.isProfileUser() &&
                        e.get("/api/anonkun/unpublishedUserStories").success(function (e) {
                            analytics.track("Profile view own"), e.length > 0 && (t.unpublishedStories = e);
                        });
                }),
                analytics.track("Profile stories view", { profileName: a });
        },
    ]),
    angular.module("anonkun.userProfile").controller("userProfileCollections", [
        "$scope",
        "$http",
        "$stateParams",
        "$rootScope",
        "collections",
        function (t, e, n, i, r) {
            t.collections = r;
            var o = n.username.toLowerCase();
            (t.isProfileUser = function () {
                return i.currentUser && i.currentUser.username == o ? !0 : !1;
            }),
                analytics.track("Profile collections view", { profileName: o });
        },
    ]),
    angular.module("anonkun.userProfile").controller("collectionDetail", [
        "$scope",
        "$rootScope",
        "collection",
        function (t, e, n) {
            (t.listViewCompact = !1),
                t.$on("editChanged", function (e, i) {
                    if (i && i.closest("div").length && i.closest("div").attr("data-id")) {
                        var r = i.closest("div").attr("data-id");
                        ty.put("anonkun/collections/colcomment", { colcomment: i.html(), story: r, collection: n.collectionDetail._id }, function (t) {});
                    } else ty.put("node", t.collectionDetail, function (t) {});
                }),
                (t.editChanged = function () {
                    t.$emit("editChanged");
                }),
                (t.collectionDetail = n.collectionDetail),
                (t.collectionDetail.colcomment = t.collectionDetail.colcomment || []),
                _.each(t.collectionDetail.colcomment, function (t, e) {
                    var i = _.findIndex(n.collectionList, function (t) {
                        return t._id == e;
                    });
                    -1 != i && (n.collectionList[i].colcomment = t);
                }),
                (t.collectionList = n.collectionList),
                analytics.track("Collection Detail View", { collection: n.collectionDetail._id });
        },
    ]),
    (ty.dulst = {}),
    (ty.achievementTest = function () {
        var t = {
            _id: "cultivation-5-elements",
            t: "Wu Xing",
            i: ["https://ddx5i92cqts4o.cloudfront.net/images/1dgs1ppjm_images.png"],
            d: "Having made pacts with spirits who - collectively - are attuned to all five Earthly Elements, you have gained a deeper understanding of the Wu Xing - the cycle of the elements. Gain 1 free spell from each element.",
            coin: 1e3,
            point: 100,
        };
        return ty.achievement.obtained(t), "play achievement animation";
    }),
    (ty.achievement = {
        queue: [],
        obtained: function (t) {
            ty.achievement.queue.push(t), ty.achievement.queue[0].playing || ty.achievement.play();
        },
        play: function () {
            var t = ty.achievement.queue[0];
            t &&
                ((ty.achievement.queue[0].playing = !0),
                ty.t("achievement/achievementsObtained", t, function (t) {
                    function e() {
                        n.find(".mask").addClass("leave"),
                            n.find(".inner").addClass("leave"),
                            setTimeout(function () {
                                n.remove(), ty.achievement.queue.shift(), ty.achievement.play();
                            }, 400),
                            $("body").removeClass("achievement");
                    }
                    var n = $(t);
                    ty.media.playnow({ mp3: "https://d2t4fc8ff77neh.cloudfront.net/cardSrcMedia/16tn8tsn0_achievements.mp3", ogg: "https://d2t4fc8ff77neh.cloudfront.net/cardSrcMedia/16tn90f6k_achievements.ogg" }),
                        n.appendTo("body"),
                        n.show(),
                        $("body").addClass("achievement"),
                        $(document).one("click", function (t) {
                            e(), t.preventDefault();
                        });
                }));
        },
    }),
    $(function () {
        $(document).on("click", ".tydai-achievement", function () {
            var t = $(this);
            if (t.data("active")) return void t.notify("You already have this");
            var e = t.attr("data-id");
            e = _.slugify(e);
            var n = $("body").scope(),
                i = n.story.achievements.achievements[e];
            return i
                ? n.currentUser
                    ? void ty.post("achievement", { userId: n.currentUser._id, id: e, storyId: n.story._id }, function (r) {
                          t.data("active", !0);
                          var o = $(".story.nodeDetail").scope();
                          return "already exists" == r.status
                              ? void t.notify("You already have this")
                              : (o.userAchievements && o.userAchievements.my ? ((o.userAchievements.my = o.userAchievements.my + 1), o.$digest()) : n.currentUser && ((o.userAchievements.my = 1), o.$digest()),
                                ty.achievement.obtained(i),
                                void analytics.track("achievement obtained", { sid: n.story._id, id: e }));
                      })
                    : (ty.achievement.obtained(i),
                      void setTimeout(function () {
                          n.openRegister();
                      }, 4500))
                : void t.notify("Achievement not found. Ask the story author to check if the achievement exists. Try reloading the page.");
        });
    });
var app = angular
    .module("anonkun", [
        "tydai",
        "tydai.ui",
        "monospaced.elastic",
        "metaTags",
        "simpleAngularSocialLinks",
        "ngPluralizeFilter",
        "localStorage",
        "anonkun.frontpage",
        "anonkun.userProfile",
        "anonkun.story",
        "anonkun.stories",
        "anonkun.reviews",
        "anonkun.collections",
        "anonkun.board",
        "anonkun.boardsList",
        "like",
        "timer",
        "timepicker",
        "angular-medium-editor",
        "editor",
        "chat",
        "threads",
    ])
    .run([
        "$rootScope",
        "$location",
        "$timeout",
        "$modal",
        "$stateParams",
        function (t, e, n, i, r) {
            $('link[rel="canonical"]')[0]
                ? $('link[rel="canonical"]').attr("href", "https://fiction.live" + window.location.pathname)
                : $("<link rel='canonical' href='https://fiction.live" + window.location.pathname + "'></link>").appendTo("head"),
                (t.fixedSideStyle = { height: window.innerHeight + "px" }),
                (ty.rootScope = t);
            var o = window.devicePixelRatio > 1;
            o && (t.retina = !0),
                (t.listView = "large"),
                window.innerWidth > 1024 && (t.desktopWidth = !0),
                (t.filterNotTrash = function (t) {
                    return t.trash ? !1 : !0;
                }),
                (t.isAnon = function () {
                    return "anon" == ty.currentUser ? !0 : !1;
                }),
                (t.mobileDrawer = function () {
                    var e = $("#mobileNav, #mobile-controller, #main");
                    e.hasClass("menuPane") ? (e.removeClass("menuPane"), t.mobileViewChange("default")) : e.addClass("menuPane");
                }),
                (t.mobileScrollLocations = { default: 0 }),
                (t.mobileViewChange = function (e) {
                    (t.mobileActive && "default" != t.mobileActive) || (t.mobileScrollLocations["default"] = $(window).scrollTop()),
                        (t.mobileActive = e),
                        "default" == e &&
                            n(function () {
                                $(window).scrollTop(t.mobileScrollLocations["default"]);
                            });
                }),
                t.$on("chatCommand", function (t, e) {
                    "/a recount" === e && ty.get("anonkun/recount/" + location.pathname.split("/")[3]),
                        "/a rebuild toc" === e &&
                            ty.get("anonkun/rebuildToC/" + location.pathname.split("/")[3], function () {
                                location.reload();
                            });
                }),
                t.$on("chatCommand", function (e, n) {
                    t.currentUser || ("/a theme:dark" === n ? ($.cookie("themeColor", "dark", { path: "/" }), location.reload()) : "/a theme:default" === n && ($.cookie("themeColor", "default", { path: "/" }), location.reload()));
                });
            var a = function () {
                    l(), s();
                },
                s = function () {
                    t.currentUser && t.currentUser.plan ? $("body").addClass("super") : $("body").removeClass("super");
                },
                l = function () {
                    t.currentUser && t.currentUser.profile && t.currentUser.profile.settings && t.currentUser.profile.settings.theme && t.currentUser.profile.settings.theme.dark && "dark" != $.cookie("themeColor")
                        ? ($.cookie("themeColor", "dark", { path: "/" }), location.reload())
                        : "dark" != $.cookie("themeColor") ||
                          (t.currentUser && t.currentUser.profile && t.currentUser.profile.settings && t.currentUser.profile.settings.theme && t.currentUser.profile.settings.theme.dark) ||
                          ($.removeCookie("themeColor", {
                              path: "/",
                          }),
                          location.reload());
                };
            t.currentUser && a(),
                t.$on("login", a),
                (t.threads = !0),
                (t.beforePost = function (t) {
                    return t;
                }),
                (t.readHistory = JSON.parse(localStorage.readHistory || "{}")),
                (t.siteName = "Fiction.live"),
                (t.checkReadHistory = function (e, n) {
                    return n ? (parseInt(t.readHistory[e._id]) >= e.ut ? !0 : !1) : e.cht ? (parseInt(t.readHistory[e._id]) >= e.cht ? !0 : !1) : parseInt(t.readHistory[e._id]) >= e.ct ? !0 : !1;
                });
            var c = function () {
                    u(function (e) {
                        d(function (n) {
                            p(function (i) {
                                t.browseContent = { boards: i, following: e, collections: n };
                            });
                        });
                    });
                },
                u = function (e) {
                    t.currentUser &&
                        ty.get("anonkun/following/" + t.currentUser._id, function (t) {
                            e && e(t);
                        });
                },
                d = function (e) {
                    t.currentUser &&
                        ty.get("anonkun/userCollections/" + t.currentUser._id, function (t) {
                            e && e(t);
                        });
                },
                p = function (e) {
                    if (t.currentUser && t.currentUser.profile && t.currentUser.profile.boards) {
                        var n = t.currentUser.profile.boards;
                        e(n);
                    } else
                        ty.get("anonkun/boards/5", function (t) {
                            e(_.map(t, "t"));
                        });
                };
            t.$watch("currentUser", function () {
                c();
            }),
                c(),
                (t.postStory = function (o) {
                    if (!t.currentUser) return void t.openRegister();
                    t.recommendedBoards = ["scifi", "romance", "fantasy", "adventure", "comedy", "anime", "smut", "mecha", "kpop", "mystery", "yuri", "writing"];
                    var a = r.board,
                        s = function (r) {
                            var s = {
                                    backdrop: !0,
                                    keyboard: !0,
                                    scope: t,
                                    windowClass: "modal createStoryForm",
                                    backdropClick: !0,
                                    templateUrl: "/tmpl/anonkun/story/createStoryForm",
                                    controller: [
                                        "$scope",
                                        "$modalInstance",
                                        function (n, i) {
                                            var r = "stories";
                                            r = "stories" == a || "live" == a ? "stories" : a;
                                            var o = [];
                                            "stories" != r && (o = [a]),
                                                (n.submit = function (a, s) {
                                                    var l = $(a.currentTarget).find(".title").val();
                                                    return (
                                                        (l = _.clean(l)),
                                                        l.length
                                                            ? ((n.requiredTitle = !1),
                                                              ty.post("anonkun/board/item", { nt: "story", storyStatus: "active", contentRating: "teen", ta: o, t: l, mcOff: !0, trash: !0, init: !0 }, function (n) {
                                                                  e.path("/" + r + "/" + ty.url(n.t) + "/" + n._id), t.$apply();
                                                              }),
                                                              void i.close())
                                                            : void (n.requiredTitle = !0)
                                                    );
                                                }),
                                                (n.close = function (t) {
                                                    i.close();
                                                });
                                        },
                                    ],
                                },
                                l = i.open(s);
                            l.opened.then(function () {
                                n(function () {
                                    var t = $(".createStoryForm");
                                    t.position({ collision: "fit", of: $(o.currentTarget), at: "center bottom", my: "center top" }), t.find(".title").focus();
                                });
                            });
                        };
                    s();
                });
        },
    ])
    .config([
        "$urlRouterProvider",
        function (t) {
            t.otherwise("/");
        },
    ])
    .directive("resizer", [
        "$document",
        function (t) {
            return function (e, n, i) {
                function r(t) {
                    if ("vertical" == i.resizer) {
                        var e = t.pageX,
                            n = window.innerWidth - e;
                        if (i.resizerMin && n < i.resizerMin)
                            return (
                                $(i.resizerLeft).css({ "padding-right": "" }),
                                $(i.resizerRight).css({ width: "" }),
                                delete localStorage.resizeResult,
                                void ($('.notification-message .main-message:contains("Resetting to default")').length || $(i.resizerRight).notify("Resetting to default"))
                            );
                        if (i.resizerMax && e < i.resizerMax) return $(i.resizerLeft).css({ "padding-right": "" }), $(i.resizerRight).css({ width: "" }), void delete localStorage.resizeResult;
                        var r = { leftResult: { "padding-right": "calc(100vw - " + e + "px)" }, rightResult: { width: "calc(100vw - " + e + "px)" } };
                        $(i.resizerLeft).css(r.leftResult), $(i.resizerRight).css(r.rightResult), (localStorage.resizeResult = JSON.stringify(r));
                    }
                }
                function o() {
                    t.unbind("mousemove", r), t.unbind("mouseup", o);
                }
                if (
                    (n.on("mousedown", function (e) {
                        e.preventDefault(), t.on("mousemove", r), t.on("mouseup", o);
                    }),
                    localStorage.resizeResult)
                ) {
                    var a = JSON.parse(localStorage.resizeResult);
                    $(i.resizerLeft).css(a.leftResult), $(i.resizerRight).css(a.rightResult);
                }
            };
        },
    ])
    .directive("modalResizer", [
        "$document",
        function (t) {
            return function (e, n, i) {
                function r(t) {
                    if ("vertical" == i.resizer) {
                        var e = t.pageX;
                        $(i.resizerLeft).css({ "padding-right": "calc(100vw - " + e + "px)" }), $(i.resizerRight).css({ width: "calc(100vw - " + e + "px)" });
                    }
                }
                function o() {
                    t.unbind("mousemove", r), t.unbind("mouseup", o);
                }
                n.on("mousedown", function (e) {
                    e.preventDefault(), t.on("mousemove", r), t.on("mouseup", o);
                });
            };
        },
    ]);
(ty.greenText = function (t) {
    return _.startsWith(t, ">") ? "greentext" : void 0;
}),
    (ty.imageLightBox = function (t) {
        var e = $(t)
            .attr("src")
            .replace(/h(\d+)-w(\d+)/g, "h1200-w1200")
            .replace(/h=(\d+)&w=(\d+)/g, "h=1200&w=1200");
        ty.scripts.get("magnific-popup", function () {
            $.magnificPopup.open({
                items: { src: e, type: "image" },
                closeOnContentClick: !0,
                mainClass: "mfp-with-zoom",
                showCloseBtn: !1,
                zoom: {
                    enabled: !0,
                    duration: 200,
                    easing: "ease-in-out",
                    opener: function (e) {
                        return $(t);
                    },
                },
            });
        });
    }),
    $(function () {
        $(document).on("mousedown", ".chatContainer img", function (t) {
            ty.imageLightBox(this), t.stopPropagation();
        }),
            $(document).on("mousedown", ".chapter img", function () {
                window.innerWidth > 768 && ty.imageLightBox(this);
            }),
            $(document).on("click", "#mainMenu .branding", function () {
                $("#mainMenu .branding").removeClass("open"), $("#mainMenu .explore .btn").removeClass("active");
            }),
            $(document).on("click", "#mainMenu .explore", function () {
                $("#mainMenu .branding").toggleClass("open"), $("#mainMenu .explore .btn").toggleClass("active");
            }),
            $(document).on("mouseenter", "#mainMenu .explore, #mainMenu .branding", function () {
                $("#mainMenu .branding").removeClass("leftHover"), $("#mainMenu .branding").addClass("open"), $("#mainMenu .explore .btn").addClass("active");
            }),
            $(document).on("mouseleave", "#mainMenu>.nav", function () {
                $("#mainMenu .branding").addClass("leftHover"),
                    setTimeout(function () {
                        $("#mainMenu .branding").hasClass("leftHover") && ($("#mainMenu .branding").removeClass("open"), $("#mainMenu .explore .btn").removeClass("active"));
                    }, 100);
            }),
            $(".mobile-controller .contents").on("mousedown", function (t) {
                $("#left-bar").removeClass("offhide-phone"), $("#center").addClass("offhide-phone"), $("#right-bar").addClass("offhide-phone"), $("#mobile-controller li").removeClass("active"), $(t.currentTarget).addClass("active");
            }),
            $(".mobile-controller .story").on("mousedown", function (t) {
                $("#left-bar").addClass("offhide-phone"), $("#center").removeClass("offhide-phone"), $("#right-bar").addClass("offhide-phone"), $("#mobile-controller li").removeClass("active"), $(t.currentTarget).addClass("active");
            }),
            $(".mobile-controller .chat").on("mousedown", function (t) {
                $("#left-bar").addClass("offhide-phone"), $("#center").addClass("offhide-phone"), $("#right-bar").removeClass("offhide-phone"), $("#mobile-controller li").removeClass("active"), $(t.currentTarget).addClass("active");
            });
    }),
    (function (t) {
        var e = {
            init: function (e) {
                return this.each(function () {
                    var n = t(this);
                    n.addClass("field fieldComment").attr("id", "comment-" + e),
                        ty.realtime.join(e, "comment", { profile: ["avatar", "dulst." + ty.dulst.gameID] }),
                        (ty.comment = {
                            newNode: function (e) {
                                t("#comment-" + e.channel).comment("render", e.message);
                            },
                            update: function (e) {
                                t("#comment-" + e.channel).comment("render", e.message);
                            },
                            postComment: function (e) {
                                t("#comment-" + e.channel).comment("render", e);
                            },
                            joinChannel: function (e) {
                                (e.fieldBody = e.message + " joins the topic"), (e.commentType = "notification"), t("#comment-" + e.channel).comment("render", e);
                            },
                            leaveChannel: function (e) {
                                (e.commentType = "notification"), (e.fieldBody = e.message + " has left"), t("#comment-" + e.channel).comment("render", e);
                            },
                            disconnect: function (e) {
                                (e.fieldBody = e.message + " has left"), (e.commentType = "notification"), t("#comment-" + e.channel).comment("render", e);
                            },
                            prior: function (e) {
                                t.each(e.messages, function (n, i) {
                                    console.log(i), t("#comment-" + e.channel).comment("render", i);
                                });
                            },
                        });
                });
            },
            close: function (e) {
                ty.realtime.leave(e, "comment"), t(this).find(".comment").remove();
            },
            render: function (e) {
                var n = t(this);
                "notification" == e.commentType
                    ? t("<div class='msg'>" + e.fieldBody + "</div>").appendTo(n)
                    : ty.node.render(e, { template: "nodePostTemplate", pageTemplate: "commentNodeTemplate" }, function (i) {
                          t("#node-" + e.nid).length > 0
                              ? t("#node-" + e.nid)
                                    .closest(".comment")
                                    .replaceWith(i)
                              : (n.find(".postBox").length > 0 ? n.find(".postBox").before(i) : i.appendTo(n), n.scrollTop(n.scrollHeight)),
                              n.trigger("renderMessage", [e]);
                      });
            },
        };
        t.fn.comment = function (t) {
            return e[t] ? e[t].apply(this, Array.prototype.slice.call(arguments, 1)) : e.init.apply(this, arguments);
        };
    })(jQuery),
    (ty.fields.comments = function (t, e, n) {
        var i = t.find(".fieldComment");
        i.comment(e).postBox([e], function () {
            n && n();
        });
    }),
    angular.module("angular-medium-editor", []).directive("mediumEditor", function () {
        return {
            require: "ngModel",
            restrict: "AE",
            scope: { bindOptions: "=", editorEvents: "@editorEvents" },
            link: function (t, e, n, i) {
                angular.element(e).addClass("angular-medium-editor");
                var r = {},
                    o = "",
                    a = function () {
                        n.options && (r = t.$eval(n.options));
                        var e = {};
                        void 0 !== t.bindOptions && (e = t.bindOptions), (r = angular.extend(r, e));
                    };
                (o = r.placeholder),
                    t.$watch("bindOptions", function () {
                        i.editor && i.editor.deactivate(),
                            i.$isEmpty(i.$viewValue) || (r.placeholder = ""),
                            a(),
                            ty.fields.editor(e, r, function (t) {
                                i.editor = t;
                            });
                    });
                var s = function () {
                    t.$apply(function () {
                        if ("<p><br></p>" === e.html() || "" === e.html()) {
                            r.placeholder = o;
                            var n;
                            a(),
                                ty.fields.editor(e, r, function (t) {
                                    n = t;
                                });
                        }
                        i.$viewValue != e.html() && (i.$setViewValue(e.html()), "false" != t.editorEvents && t.$emit("editChanged", e));
                    });
                };
                e.on("input", _.debounce(s, 1e3)),
                    (i.$render = function () {
                        if (!this.editor) {
                            i.$isEmpty(i.$viewValue) || (r.placeholder = "");
                            var t = this;
                            a(),
                                ty.fields.editor(e, r, function (e) {
                                    t.editor = e;
                                });
                        }
                        e.html(i.$isEmpty(i.$viewValue) ? "" : i.$viewValue), i.$isEmpty(i.$viewValue) || angular.element(e).removeClass("medium-editor-placeholder");
                    });
            },
        };
    }),
    angular.module("editor", []).directive("fieldEditor", function () {
        return {
            template: "<textarea>{{text}}</textarea>",
            scope: { existingtext: "@existingtext" },
            replace: !1,
            controller: ["$scope", "$rootScope", function (t, e) {}],
            link: function (t, e, n, i, r) {
                (t.text = t.existingtext), ty.scripts.get("editor", function () {});
            },
        };
    }),
    (ty.editor = {}),
    (ty.editor.imageOff = function () {
        $("#addImageContentEditableButton").remove(), $("#addImageContentEditableTarget").removeAttr("id");
    }),
    (ty.editor.imageInsertButton = function (t) {
        if (($("#addImageContentEditableTarget").removeAttr("id"), "" != $.trim($(t[0].outerHTML).text()))) return void $("#addImageContentEditableButton").hide();
        t.attr("id", "addImageContentEditableTarget"),
            0 == t.find("#addImageContentEditableButton").length && ($("#addImageContentEditableButton").remove(), t.closest(".fieldEditor").prepend('<button id="addImageContentEditableButton" class="fa fa-photo"></button>'));
        var e = t.position();
        $("#addImageContentEditableButton").css("top", e.top).show();
    }),
    (ty.fields.editor = function (t, e, n) {
        function i() {
            (this.button = document.createElement("button")),
                (this.button.className = "medium-editor-action fa fa-eye"),
                (this.button.innerText = " "),
                this.button.setAttribute("title", "Spoiler: Turn the selected text into a hidden spoiler."),
                this.button.setAttribute("tooltip-position", "top"),
                this.button.setAttribute("tooltip-content", "Spoiler: Turn the selected text into a hidden spoiler."),
                (this.button.onclick = this.onClick.bind(this));
        }
        function r() {
            (this.button = document.createElement("button")),
                (this.button.className = "medium-editor-action fa fa-bolt"),
                (this.button.innerText = " "),
                this.button.setAttribute("title", "Achievement: Turn the selected text into a link to unlock an achievement."),
                this.button.setAttribute("tooltip-position", "top"),
                this.button.setAttribute("tooltip-content", "Achievement: Turn the selected text into a link to unlock an achievement."),
                (this.button.onclick = this.onClick.bind(this));
        }
        function o() {
            (this.button = document.createElement("button")),
                (this.button.className = "medium-editor-action fa-music fa"),
                (this.button.innerText = " "),
                this.button.setAttribute("title", "Audio"),
                this.button.setAttribute("tooltip-position", "top"),
                this.button.setAttribute("tooltip-content", "Audio: Turn the selected text into a playable audio link. Upload a mp3 or ogg."),
                (this.button.onclick = this.onClick.bind(this));
        }
        (i.prototype.onClick = function () {
            var t = this.classApplier;
            (t = rangy.createCssClassApplier("tydai-spoiler", { normalize: !0, ignoreWhiteSpace: !0, elementTagName: "a" })), t.toggleSelection();
        }),
            (i.prototype.getButton = function () {
                return this.button;
            }),
            (i.prototype.checkState = function (t) {
                t.classList.contains("tydai-spoiler") && this.button.classList.add("medium-editor-button-active");
            }),
            (r.prototype.onClick = function () {
                var t = this.classApplier,
                    e = prompt("Enter the achievement ID (You need to create the achievement on your achievements page.)", "");
                e && ((t = rangy.createCssClassApplier("tydai-achievement", { normalize: !0, ignoreWhiteSpace: !0, elementTagName: "a", elementAttributes: { "data-id": e } })), t.applyToSelection());
            }),
            (r.prototype.getButton = function () {
                return this.button;
            }),
            (r.prototype.checkState = function (t) {
                t.classList.contains("tydai-achievement") && this.button.classList.add("medium-editor-button-active");
            }),
            (o.prototype.onClick = function () {
                var t = this.classApplier;
                ty.upload("audio", function (e) {
                    (t = rangy.createCssClassApplier("tydai-inlineLinkAudio", { normalize: !0, ignoreWhiteSpace: !0, elementTagName: "a", elementAttributes: { "data-url": e } })), t.toggleSelection();
                }),
                    analytics.track("Audio select");
            }),
            (o.prototype.getButton = function () {
                return this.button;
            }),
            (o.prototype.checkState = function (t) {
                t.classList.contains("tydai-inlineLinkAudio") && this.button.classList.add("medium-editor-button-active");
            }),
            ty.scripts.get("editor", function () {
                rangy.init();
                var a = {
                    buttons: ["bold", "italic", "underline", "strikethrough", "header1", "header2", "header3", "header4", "quote", "unorderedlist", "inlineLinkAudio", "spoiler", "achievement"],
                    extensions: { inlineLinkAudio: new o(), spoiler: new i(), achievement: new r() },
                    firstHeader: "h1",
                    secondHeader: "h2",
                };
                e = $.extend(e, a);
                var s = new MediumEditor(t, e);
                t.on("keyup", function (t) {
                    if (13 != t.keyCode) return void ty.editor.imageOff();
                    var e;
                    window.getSelection ? (e = window.getSelection()) : document.selection && "Control" != document.selection.type && (e = document.selection);
                    var n = e.anchorNode;
                    n.previousSibling, n.nextSibling;
                    ty.editor.imageInsertButton($(n)),
                        $(this)
                            .find("span")
                            .replaceWith(function () {
                                return $(this).contents();
                            }),
                        $(this)
                            .find("div")
                            .replaceWith(function () {
                                return $("<p />").append($(this).contents());
                            }),
                        $(this)
                            .find("p")
                            .each(function () {
                                $(this).parent().is("p") &&
                                    $(this).replaceWith(function () {
                                        return $(this).contents();
                                    });
                            });
                }),
                    t.on("click", "*", function (t) {
                        var e = $(this);
                        e.is("p") ? ty.editor.imageInsertButton(e) : $("#addImageContentEditableButton").hide();
                    }),
                    n && n(s);
            });
    }),
    $(function () {
        $(document).on("mousedown", "#addImageContentEditableButton", function (t) {
            ty.upload("images", function (t) {
                analytics.track("Story post image"), $("#addImageContentEditableTarget").html('<img src="' + t + '" />'), ty.editor.imageOff();
            }),
                t.preventDefault();
        });
    }),
    (ty.fields.multiple = function (t) {
        t.find(".content-add-another:not(.ui-multiple)")
            .addClass("ui-multiple")
            .bind("click", function () {
                var t = $(this).parent().children(".fieldMultiple:last").addClass("multiple").clone(),
                    e = $("<div />");
                e.append(t), ty.fieldsRun(e), e.children().insertAfter($(this).parent().children(".fieldMultiple:last"));
            });
    }),
    (function (t) {
        t.fn.userReference = function (e, n) {
            return this.each(function () {
                function e(e) {
                    var n = "";
                    (n = '<li data-value="' + e + '" class="tagit-choice">\n'),
                        (n += e + "\n"),
                        (n += '<a class="close">x</a>\n'),
                        (n += '<input type="hidden" style="display:none;" value="' + e + '" name="item[tags][]">\n'),
                        (n += "</li>\n");
                    var i = this.tag_input.parent();
                    t(n).insertBefore(i), this.tag_input.val("");
                }
                t(this).autocomplete({
                    source: function (e, n) {
                        ty.get("field_userReference/user/" + e.term, function (e) {
                            n(
                                t.map(e, function (t) {
                                    return { label: t, value: t };
                                })
                            );
                        });
                    },
                    select: function (t, n) {
                        e(n.item.name);
                    },
                    change: function (t, n) {
                        e(n.item.name);
                    },
                }),
                    n && n();
            });
        };
    })(jQuery),
    (ty.fields.userReference = function (t) {
        t.find(".form-userReference").userReference();
    }),
    (ty.inlineLinkAudio = {
        sounds: {},
        preload: function () {
            new Audio().canPlayType("audio/mpeg") &&
                $(".tydai-inlineLinkAudio").each(function () {
                    var t = $(this),
                        e = t.attr("data-url");
                    ty.inlineLinkAudio.sounds[e] = new Audio(e);
                });
        },
        stopAll: function () {
            _.each(ty.inlineLinkAudio.sounds, function (t) {
                t.pause();
            });
        },
    }),
    $(function () {
        $(document).on("click", ".tydai-inlineLinkAudio", function () {
            var t = $(this),
                e = t.attr("data-url"),
                n = ty.inlineLinkAudio.sounds;
            if (n[e]) {
                if (!n[e].paused) return void n[e].pause();
            } else new Audio().canPlayType("audio/mpeg") && (n[e] = new Audio(e));
            (n[e].volume = 0.5),
                _.each(n, function (t) {
                    t.pause();
                }),
                n[e].play();
        });
    }),
    (ty.setPaging = function (t, e, n, i) {
        localStorage.ty_paging_lastUse = JSON.stringify({ pageId: t, pageNumber: e, lastTime: n, direction: i });
    }),
    (ty.getPaging = function () {
        return localStorage.ty_paging_lastUse ? JSON.parse(localStorage.ty_paging_lastUse) : void 0;
    }),
    angular
        .module("timepicker", [])
        .directive("timepicker", function () {
            return {
                controller: ["$scope", "$rootScope", function (t, e) {}],
                link: function (t, e, n, i, r) {
                    var o = function () {
                            var t = new Date().getHours(),
                                e = new Date().getMinutes(),
                                n = "AM";
                            return t > 12 && ((t -= 12), (n = "PM")), t + ":" + e + n;
                        },
                        a = { scrollDefaultNow: !0, showDuration: !0, minTime: o(), forceRoundTime: !1 };
                    e.timepicker(a);
                },
            };
        })
        .directive("timepickerDate", function () {
            return {
                template: '<input class="timepicker" type="text" name="test" />',
                scope: { existingtext: "@existingtext" },
                replace: !0,
                controller: ["$scope", "$rootScope", function (t, e) {}],
                link: function (t, e, n, i, r) {
                    e.timepicker({ scrollDefaultNow: !0, showDuration: !0, forceRoundTime: !1 });
                },
            };
        }),
    angular.module("tydai.ui").directive("mobileScrollbar", function () {
        return {
            restrict: "AE",
            link: function (t, e, n) {
                for (var i = 50, r = $(window).height(), o = 100 / i, a = '<div style="height: ' + o + '%;"></div>', s = "", l = parseInt(n.paddingTop), c = i; c >= 0; c--) s += a;
                var u = 50,
                    d = r - l - 2 * u;
                e.css({ height: d, top: u + l }), e.append("<div></div>");
                var p = l + u,
                    h = 40,
                    f = p + d - h,
                    m = "translate3d(0, -" + f + "px, 0)",
                    v = _.debounce(function () {
                        e.removeClass("active"), e.removeClass("usable"), e.css("transform", m);
                    }, 2e3);
                v(),
                    e.bind("touchstart touchend", function (t) {
                        var n = t.originalEvent.touches[0] || t.originalEvent.changedTouches[0];
                        if ((t.preventDefault(), !e.hasClass("active")))
                            return (
                                e.addClass("active"),
                                setTimeout(function () {
                                    e.addClass("usable");
                                }, 1e3),
                                t.preventDefault(),
                                void t.stopPropagation()
                            );
                        if (e.hasClass("usable")) {
                            var i = n.clientY - p,
                                r = i / d,
                                o = $(document).height() * r;
                            $("body")[0];
                            o && i > 0 && 1 > r && ($("html, body").stop(!0), $("html, body").animate({ scrollTop: o }, 200)), v();
                        }
                    });
            },
        };
    }),
    angular
        .module("monospaced.elastic", [])
        .constant("msdElasticConfig", { append: "" })
        .directive("msdElastic", [
            "$timeout",
            "$window",
            "msdElasticConfig",
            function (t, e, n) {
                "use strict";
                return {
                    restrict: "A, C",
                    link: function (i, r, o) {
                        function a() {
                            (p = c),
                                (w = getComputedStyle(c)),
                                angular.forEach(T, function (t) {
                                    g += t + ":" + w.getPropertyValue(t) + ";";
                                }),
                                b.setAttribute("style", g);
                        }
                        function s() {
                            var e, n, r, o;
                            p !== c && a(),
                                h ||
                                    ((h = !0),
                                    (b.value = c.value + m),
                                    (b.style.overflowY = c.style.overflowY),
                                    (e = "" === c.style.height ? "auto" : parseInt(c.style.height, 10)),
                                    (r = parseInt(getComputedStyle(c).getPropertyValue("width"), 10) - x.width),
                                    (b.style.width = r + "px"),
                                    (n = b.scrollHeight),
                                    n > _ ? ((n = _), (o = "scroll")) : C > n && (n = C),
                                    (n += x.height),
                                    (c.style.overflowY = o || "hidden"),
                                    e !== n && ((c.style.height = n + "px"), i.$emit("elastic:resize", u)),
                                    t(function () {
                                        h = !1;
                                    }, 1));
                        }
                        function l() {
                            (h = !1), s();
                        }
                        var c = r[0],
                            u = r;
                        if ("TEXTAREA" === c.nodeName && e.getComputedStyle) {
                            u.css({ overflow: "hidden", "overflow-y": "hidden", "word-wrap": "break-word" });
                            var d = c.value;
                            (c.value = ""), (c.value = d);
                            var p,
                                h,
                                f = o.msdElastic || n.append,
                                m = "\\n" === f ? "\n" : f,
                                v = angular.element(e),
                                g =
                                    "position: absolute; top: -999px; right: auto; bottom: auto; left: 0 ;overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",
                                y = angular.element('<textarea tabindex="-1" style="' + g + '"/>').data("elastic", !0),
                                b = y[0],
                                w = getComputedStyle(c),
                                $ = (w.getPropertyValue("resize"), "border-box" === w.getPropertyValue("box-sizing") || "border-box" === w.getPropertyValue("-moz-box-sizing") || "border-box" === w.getPropertyValue("-webkit-box-sizing")),
                                x = $
                                    ? {
                                          width:
                                              parseInt(w.getPropertyValue("border-right-width"), 10) +
                                              parseInt(w.getPropertyValue("padding-right"), 10) +
                                              parseInt(w.getPropertyValue("padding-left"), 10) +
                                              parseInt(w.getPropertyValue("border-left-width"), 10),
                                          height:
                                              parseInt(w.getPropertyValue("border-top-width"), 10) +
                                              parseInt(w.getPropertyValue("padding-top"), 10) +
                                              parseInt(w.getPropertyValue("padding-bottom"), 10) +
                                              parseInt(w.getPropertyValue("border-bottom-width"), 10),
                                      }
                                    : { width: 0, height: 0 },
                                k = parseInt(w.getPropertyValue("min-height"), 10),
                                S = parseInt(w.getPropertyValue("height"), 10),
                                C = Math.max(k, S) - x.height,
                                _ = parseInt(w.getPropertyValue("max-height"), 10),
                                T = ["font-family", "font-size", "font-weight", "font-style", "letter-spacing", "line-height", "text-transform", "word-spacing", "text-indent"];
                            u.data("elastic") ||
                                ((_ = _ && _ > 0 ? _ : 9e4),
                                b.parentNode !== document.body && angular.element(document.body).append(b),
                                u.data("elastic", !0),
                                "onpropertychange" in c && "oninput" in c ? (c.oninput = c.onkeyup = s) : (c.oninput = s),
                                v.bind("resize", l),
                                i.$on("elastic:adjust", function () {
                                    l();
                                }),
                                t(s),
                                i.$on("$destroy", function () {
                                    y.remove(), v.unbind("resize", l);
                                }));
                        }
                    },
                };
            },
        ]),
    angular
        .module("tydai.ui")
        .run([
            "$templateCache",
            function (t) {
                t.put(
                    "template/popover/popover.html",
                    '<div class="popover" tooltip-animation-class="fade" tooltip-classes ng-class="{in: isOpen()}"> <div class="arrow"></div><div class="popover-inner"> <h3 class="popover-title" ng-bind="title" ng-if="title"></h3> <div class="popover-content" ng-bind="content"></div></div></div>'
                ),
                    t.put(
                        "template/popover/popover-html.html",
                        '<div class="popover" tooltip-animation-class="fade" tooltip-classes ng-class="{in: isOpen()}"> <div class="arrow"></div><div class="popover-inner"> <h3 class="popover-title" ng-bind="title" ng-if="title"></h3> <div class="popover-content" ng-bind-html="contentExp()"></div></div></div>'
                    ),
                    t.put(
                        "template/popover/popover-html-unsafe-popup.html",
                        '<div class="popover" tooltip-animation-class="fade" tooltip-classes ng-class="{in: isOpen()}"> <div class="arrow"></div><div class="popover-inner"> <h3 class="popover-title" ng-bind="title" ng-if="title"></h3> <div class="popover-content" bind-html-unsafe="content"></div></div></div>'
                    ),
                    t.put(
                        "template/popover/popover-template.html",
                        '<div class="popover" tooltip-animation-class="fade" tooltip-classes ng-class="{in: isOpen()}"> <div class="arrow"></div><div class="popover-inner"> <h3 class="popover-title" ng-bind="title" ng-if="title"></h3> <div class="popover-content" tooltip-template-transclude="contentExp()" tooltip-template-transclude-scope="originScope()"></div></div></div>'
                    ),
                    t.put(
                        "template/pagination/pagination.html",
                        '<div class="pagination"><ul>\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a set-text="page.text" set-href="getHref(page.number)"  ng-click="selectPage(page.number)"></a></li>\n  </ul>\n</div>\n'
                    ),
                    t.put(
                        "template/pagination/pager.html",
                        '<div class="pager">\n  <ul>\n    <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n'
                    );
            },
        ])
        .controller("PaginationController", [
            "$scope",
            "$attrs",
            "$parse",
            "$interpolate",
            function (t, e, n, i) {
                var r = this;
                (this.init = function (i) {
                    e.itemsPerPage
                        ? t.$parent.$watch(n(e.itemsPerPage), function (e) {
                              (r.itemsPerPage = parseInt(e, 10)), (t.totalPages = r.calculateTotalPages());
                          })
                        : (this.itemsPerPage = i);
                }),
                    (this.noPrevious = function () {
                        return 1 === this.page;
                    }),
                    (this.noNext = function () {
                        return this.page === t.totalPages;
                    }),
                    (this.isActive = function (t) {
                        return this.page === t;
                    }),
                    (this.calculateTotalPages = function () {
                        return this.itemsPerPage < 1 ? 1 : Math.ceil(t.totalItems / this.itemsPerPage);
                    }),
                    (this.getAttributeValue = function (e, n, r) {
                        return angular.isDefined(e) ? (r ? i(e)(t.$parent) : t.$parent.$eval(e)) : n;
                    }),
                    (this.render = function () {
                        (this.page = parseInt(t.page, 10) || 1), (t.pages = this.getPages(this.page, t.totalPages));
                    }),
                    (t.selectPage = function (e) {
                        !r.isActive(e) && e > 0 && e <= t.totalPages && ((t.page = e), t.onSelectPage({ page: e }));
                    }),
                    (t.getHref = function (e) {
                        return t.$parent.getHref ? t.$parent.getHref(e) : void 0;
                    }),
                    t.$watch("totalItems", function () {
                        t.totalPages = r.calculateTotalPages();
                    }),
                    t.$watch("totalPages", function (n) {
                        e.numPages && (t.numPages = n), r.page > n ? t.selectPage(n) : r.render();
                    }),
                    t.$watch("page", function () {
                        r.render();
                    });
            },
        ])
        .constant("paginationConfig", { itemsPerPage: 10, boundaryLinks: !1, directionLinks: !0, firstText: "First", previousText: "Prev", nextText: "Next", lastText: "Last", rotate: !0 })
        .directive("pagination", [
            "$parse",
            "paginationConfig",
            function (t, e) {
                return {
                    restrict: "EA",
                    scope: { page: "=", totalItems: "=", onSelectPage: " &", numPages: "=" },
                    controller: "PaginationController",
                    templateUrl: "template/pagination/pagination.html",
                    replace: !0,
                    link: function (n, i, r, o) {
                        function a(t, e, n, i) {
                            return { number: t, text: e, active: n, disabled: i };
                        }
                        var s,
                            l = o.getAttributeValue(r.boundaryLinks, e.boundaryLinks),
                            c = o.getAttributeValue(r.directionLinks, e.directionLinks),
                            u = o.getAttributeValue(r.firstText, e.firstText, !0),
                            d = o.getAttributeValue(r.previousText, e.previousText, !0),
                            p = o.getAttributeValue(r.nextText, e.nextText, !0),
                            h = o.getAttributeValue(r.lastText, e.lastText, !0),
                            f = o.getAttributeValue(r.rotate, e.rotate);
                        o.init(e.itemsPerPage),
                            r.maxSize &&
                                n.$parent.$watch(t(r.maxSize), function (t) {
                                    (s = parseInt(t, 10)), o.render();
                                }),
                            (o.getPages = function (t, e) {
                                var n = [],
                                    i = 1,
                                    r = e,
                                    m = angular.isDefined(s) && e > s;
                                m && (f ? ((i = Math.max(t - Math.floor(s / 2), 1)), (r = i + s - 1), r > e && ((r = e), (i = r - s + 1))) : ((i = (Math.ceil(t / s) - 1) * s + 1), (r = Math.min(i + s - 1, e))));
                                for (var v = i; r >= v; v++) {
                                    var g = a(v, v, o.isActive(v), !1);
                                    n.push(g);
                                }
                                if (m && !f) {
                                    if (i > 1) {
                                        var y = a(i - 1, "...", !1, !1);
                                        n.unshift(y);
                                    }
                                    if (e > r) {
                                        var b = a(r + 1, "...", !1, !1);
                                        n.push(b);
                                    }
                                }
                                if (c) {
                                    var w = a(t - 1, d, !1, o.noPrevious());
                                    n.unshift(w);
                                    var $ = a(t + 1, p, !1, o.noNext());
                                    n.push($);
                                }
                                if (l) {
                                    var x = a(1, u, !1, o.noPrevious());
                                    n.unshift(x);
                                    var k = a(e, h, !1, o.noNext());
                                    n.push(k);
                                }
                                return n;
                            });
                    },
                };
            },
        ])
        .constant("pagerConfig", { itemsPerPage: 10, previousText: "« Previous", nextText: "Next »", align: !0 })
        .directive("pager", [
            "pagerConfig",
            function (t) {
                return {
                    restrict: "EA",
                    scope: { page: "=", totalItems: "=", onSelectPage: " &", numPages: "=" },
                    controller: "PaginationController",
                    templateUrl: "template/pagination/pager.html",
                    replace: !0,
                    link: function (e, n, i, r) {
                        function o(t, e, n, i, r) {
                            return { number: t, text: e, disabled: n, previous: l && i, next: l && r };
                        }
                        var a = r.getAttributeValue(i.previousText, t.previousText, !0),
                            s = r.getAttributeValue(i.nextText, t.nextText, !0),
                            l = r.getAttributeValue(i.align, t.align);
                        r.init(t.itemsPerPage),
                            (r.getPages = function (t) {
                                return [o(t - 1, a, r.noPrevious(), !0, !1), o(t + 1, s, r.noNext(), !1, !0)];
                            });
                    },
                };
            },
        ])
        .directive("popoverTemplatePopup", function () {
            return { restrict: "EA", replace: !0, scope: { title: "@", contentExp: "&", placement: "@", popupClass: "@", animation: "&", isOpen: "&", originScope: "&" }, templateUrl: "template/popover/popover-template.html" };
        })
        .directive("popoverTemplate", [
            "$tooltip",
            function (t) {
                return t("popoverTemplate", "popover", "click", { useContentExp: !0 });
            },
        ])
        .directive("popoverHtmlPopup", function () {
            return { restrict: "EA", replace: !0, scope: { contentExp: "&", title: "@", placement: "@", popupClass: "@", animation: "&", isOpen: "&" }, templateUrl: "template/popover/popover-html.html" };
        })
        .directive("popoverHtml", [
            "$tooltip",
            function (t) {
                return t("popoverHtml", "popover", "click", { useContentExp: !0 });
            },
        ])
        .directive("popoverPopup", function () {
            return { restrict: "EA", replace: !0, scope: { title: "@", content: "@", placement: "@", popupClass: "@", animation: "&", isOpen: "&" }, templateUrl: "template/popover/popover.html" };
        })
        .directive("popoverHtmlUnsafePopup", function () {
            return { restrict: "EA", replace: !0, scope: { title: "@", content: "@", placement: "@", animation: "&", isOpen: "&" }, templateUrl: "template/popover/popover-html-unsafe-popup.html" };
        })
        .directive("popoverHtmlUnsafe", [
            "$tooltip",
            function (t) {
                return t("popoverHtmlUnsafe", "popover", "click");
            },
        ])
        .directive("popover", [
            "$tooltip",
            function (t) {
                return t("popover", "popover", "click");
            },
        ]),
    angular.module("tydai.ui").directive("position", function () {
        return {
            restrict: "AE",
            link: function (t, e, n) {
                var i = e[0];
                "parent" == n.draggableContent && (i = e.parent()[0]);
                new Draggabilly(i, { handle: n.draggableHandle });
                $(i).css({ position: "fixed", margin: "0" });
            },
        };
    }),
    angular.module("tydai.ui").directive("viewportHeight", function () {
        return {
            restrict: "A",
            link: function (t, e, n) {
                var i = n.viewportHeight,
                    r = $(window).height();
                (r = (r / 100) * parseFloat(i)), n.viewportMaxHeight ? e.css("max-height", r) : e.css("height", r);
            },
        };
    }),
    (ty.fields.upload = function (t) {
        t.find("input.form-file").each(function () {
            var t = $(this);
            t.hasClass("field-file") && t.next("form").remove(), t.addClass("field-file"), t.uploadToInput(t.attr("data-uploadDestination"));
        });
    }),
    (ty.upload = function (t, e) {
        var n = Math.floor(999999999 * Math.random()),
            i = $(
                '<form style="display:none;" id="upload-' +
                    t +
                    n +
                    '" action="https://upload.fiction.live/api/upload/' +
                    t +
                    '" enctype="multipart/form-data" method="post" class="ty-upload"><input type="file" class="upload noUpdate file" multiple="multiple" id="upload-' +
                    n +
                    '" name="upload"><input name="socketId" value="' +
                    ty.realtime.socketId +
                    '"></input><input type="submit" value="Upload" class="upload noUpdate" style="display:none;"></form>'
            ),
            r = $('<iframe style="display:none;" id="upload_target-' + t + n + '" name="upload_target-' + t + n + '" style="width:0;height:0;border:0px solid #fff;"></iframe>');
        $("body").append(i),
            i.bind("submit", function () {
                document.getElementById("upload-" + t + n).target = "upload_target-" + t + n;
            });
        var o = function () {
            i.append(r);
        };
        i.find("input.file").change(function () {
            "" != $(this).val() && (0 == $("#upload_target-" + t + n).length && o(), $("#upload-" + t + n).submit());
        });
        var a = function (t) {
            "uploadSuccess" == t.event && (ty.realtime.socketChannel.unwatch(a), i.remove(), e && e(t.message));
        };
        ty.realtime.socketChannel.watch(a), i.find("input.file").click();
    }),
    angular.module("tydai").run([
        "$templateCache",
        function (t) {
            t.put(
                "/tmpl/like/likeButton",
                '<div ng-class="likeClasses()" class="likeButton"><a ng-click="like()" class="like"><i ng-hide="noIcon" ng-class="{\'fa-thumbs-o-up\': !liked, \'fa-thumbs-up\': liked }" class="fa"></i><span>{{likesText}}</span></a><a ng-click="dislike()" class="dislike"><i ng-hide="noIcon" ng-class="{\'fa-thumbs-down\': disliked, \'fa-thumbs-o-down\': !disliked }" class="fa"></i></a></div>'
            ),
                t.put(
                    "/tmpl/user/forgotPassword",
                    '<div id="loginOrRegister" class="container"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3>Forgot your password? Recover your account</h3></div><div class="modal-body"><form id="recoverPassword" ng-submit="recoverPassword(user)"><div class="formItem"><label for="user[email]">Email that you signed up with:</label><input type="email" name="user[email]" required="required" value="" ng-model="user.email"/></div><div ng-show="error" class="formItem">{{error}}</div><input type="submit" value="Get an account recovery email." class="btn btn-primary"/></form></div></div>'
                ),
                t.put(
                    "/tmpl/user/loginMenu",
                    '<li dropdown="dropdown"><div set-if="!currentUser" class="menuItem"><a id="login-link" ng-click="openRegister()" class="btn red"><span>Sign up/log in</span></a></div><div ng-if="currentUser.profile.chatWindow" class="menuItem chatWindow"><div class="container"><a ng-repeat="chat in recentChats()" ng-click="openWindow(chat, $index)" ng-class="classByUserId(chat)" data-hint="Chat with {{:: chat.n}}" class="window user hint--bottom"><img set-if="chat.image" ng-src=" {{:: chat.image | imageURLParser: 24:24}}" class="avatar"/></a></div></div><a dropdown-toggle="dropdown-toggle" set-if="currentUser" data-toggle="dropdown" class="dropdown-toggle user menuItem"> <img set-if="currentUser.profile.image" set-src="currentUser.profile.image | imageURLParser: 30:30" class="avatar"/><div ng-if="!currentUser.profile.image" class="avatar placeholder"></div><span ng-show="feedCount()" class="feedCount"> <i class="fa fa-envelope"></i><span>{{feedCount()}}</span></span></a><div set-if="currentUser" dropdown="dropdown" class="dropdown-menu"><ul class="feedItem bottom"><li><a ng-href="/user/{{:: currentUser.username  | encodeURIComponent}}" class="profile">My Profile</a><a ng-click="enableModerator()" ng-if="isModerator() &amp;&amp; !moderatorEnabled" class="isAuthor">Admin</a><a ng-click="disableModerator()" ng-if="moderatorEnabled" class="isAuthor">Admin off</a><a ng-if="feedCount()" ng-click="clearFeed()" class="clear-all">Clear All</a><a tabindex="-1" ng-click="logout()" class="logout-link">Logout</a></li></ul><div ng-if="feedCount()" class="inner feed"><ul ng-repeat="type in currentUser.feed" class="feedType"><li ng-repeat="item in type" class="feedItem"><a ng-click="openFeedItem(item)" class="feedItemInner"><div class="top"><span class="length">({{item.length}}) </span><span set-text="item.value.from.n" class="user"></span></div><div set-text="item.value.value" class="value"></div></a><a ng-click="dismissFeedItem(item)" class="dismiss">X</a></li></ul></div></div></li>'
                ),
                t.put(
                    "/tmpl/user/registerForm",
                    '<div id="loginOrRegister" class="container"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"></div><div class="modal-body"><form id="register" ng-submit="register(user)"><h4>Create a new account</h4><div class="formItem"><label for="user[username]">Username:</label><input type="text" name="user[username]" required="required" value="" ng-model="user.username"/></div><div class="formItem"><label for="user[email]">Email:</label><input type="email" name="user[email]" required="required" value="" ng-model="user.email"/></div><div class="formItem"><label for="user[password]">Password:</label><input name="user[password]" type="password" value="" required="required" ng-model="user.password"/></div><div ng-show="error" class="formItem">{{error}}</div><div vc-recaptcha="vc-recaptcha" theme="\'light\'" key="model.key" on-create="setWidgetId(widgetId)" on-success="setResponse(response)" on-expire="cbExpiration()" class="captcha"></div><input type="submit" value="Create a new account" class="btn btn-primary"/></form><form id="loginBox" ng-submit="login(loginUser)"><h4>Log in</h4><div class="formItem"><label for="loginUser[usernameOrEmail]">Name or Email:</label><input type="text" name="loginUser[usernameOrEmail]" required="required" value="" ng-model="loginUser.user"/></div><div class="formItem"><label for="loginUser[password]">Password:</label><input name="loginUser[password]" type="password" value="" required="required" ng-model="loginUser.password"/></div><div ng-show="loginError" class="formItem">{{loginError}}</div><input type="submit" value="Log in" class="btn btn-primary"/><a ng-click="forgotPasswordOpen()" class="forgotPasswordOpen">I forgot my password</a></form><div class="help-text"><p>By creating an account, you agree to our <a href="/about/terms" target="_blank">Terms of Service</a> and  <a href="/about/privacy" target="_blank">Privacy Policy.</a></p></div></div></div>'
                ),
                t.put(
                    "/tmpl/user/resetPassword",
                    '<div style="width: 400px; margin: 0 auto;" class="container"><form ng-submit="submit(user)" class="block"><h2>Reset your password here</h2><div class="formItem"></div><div class="formItem"><label for="user[password]">Password:</label><input name="user[password]" type="password" value="" required="required" ng-model="user.password" class="fieldText"/></div><div class="formItem"><label for="user[password2]">Enter your password again:</label><input name="user[password2]" type="password" value="" required="required" ng-model="user.password2" class="fieldText"/></div><div ng-show="error" class="formItem">{{error}}</div><input type="submit" value="Save new password and login" class="btn btn-primary"/></form></div>'
                ),
                t.put(
                    "/tmpl/user/unsubscribed",
                    '<div style="width: 400px; margin: 0 auto;" class="container"><form ng-submit="submit(user)" class="block"><h2>Reset your password here</h2><div class="formItem"></div><div class="formItem"><label for="user[password]">Password:</label><input name="user[password]" type="password" value="" required="required" ng-model="user.password" class="fieldText"/></div><div class="formItem"><label for="user[password2]">Enter your password again:</label><input name="user[password2]" type="password" value="" required="required" ng-model="user.password2" class="fieldText"/></div><div ng-show="error" class="formItem">{{error}}</div><input type="submit" value="Save new password and login" class="btn btn-primary"/></form></div>'
                ),
                t.put(
                    "/tmpl/chat/chatActives",
                    '<header class="chatHeader"><div class="header"><div class="pagination-dropdown"><div ng-click="users()" class="actives btn dim-font-color hover-font-color"><span class="actives"><i class="fa fa-user"></i><span class="count">{{actives}}</span></span></div><div ng-show="pageText &amp;&amp; currentPage &lt; pagesCount" ng-click="nextPage($event)" class="sort btn dim-font-color hover-font-color"><span>&raquo;</span></div><div ng-click="openPager()" class="sort btn dim-font-color hover-font-color"><span ng-bind="(pageText | default: \'Latest\') + \'  ▾\'" class="text"></span></div><div ng-show="pageText &amp;&amp; currentPage &gt; 1" ng-click="prevPage($event)" class="sort btn dim-font-color hover-font-color"><span>&laquo;</span></div><a target="_blank" set-href="\'/stories/threads/chat/\'+chatID" class="settings btn dim-font-color hover-font-color"><i class="fa fa-external-link"></i></a></div><div ng-show="pager &amp;&amp; totalItems &gt; itemsPerPage" class="chat-control"><pagination rotate="true" total-items="totalItems" page="currentPage" on-select-page="selectPage(page)" max-size="maxSize" items-per-page="itemsPerPage" boundary-links="true" direction-links="false"></pagination></div></div></header>'
                ),
                t.put(
                    "/tmpl/chat/chat",
                    '<article class="field field-chatroom chat chatContainer"><header class="chatHeader"><div class="header"><div class="pagination-dropdown"><div ng-click="users()" class="actives btn dim-font-color hover-font-color"><span class="actives"><i class="fa fa-user"></i><span class="count">{{actives}}</span></span></div><div ng-show="pageText &amp;&amp; currentPage &lt; pagesCount" ng-click="nextPage($event)" class="sort btn dim-font-color hover-font-color"><span>&raquo;</span></div><div ng-click="openPager()" class="sort btn dim-font-color hover-font-color"><span ng-bind="(pageText | default: \'Latest\') + \'  ▾\'" class="text"></span></div><div ng-show="pageText &amp;&amp; currentPage &gt; 1" ng-click="prevPage($event)" class="sort btn dim-font-color hover-font-color"><span>&laquo;</span></div><a target="_blank" set-href="\'/stories/threads/chat/\'+chatID" class="settings btn dim-font-color hover-font-color"><i class="fa fa-external-link"></i></a></div><div ng-show="pager &amp;&amp; totalItems &gt; itemsPerPage" class="chat-control"><pagination rotate="true" total-items="totalItems" page="currentPage" on-select-page="selectPage(page)" max-size="maxSize" items-per-page="itemsPerPage" boundary-links="true" direction-links="false"></pagination></div></div></header><article auto-scroll="chatLog" class="chatLog"><div ng-if="!listLoaded" class="loading-indicator"><i class="fa fa-spinner fa-spin"></i></div><div set-if="!threading" jade-repeat="chat/chatList" jade-repeat-data="chatLog"></div><div set-if="threading" jade-repeat="chat/chatListThreading" jade-repeat-data="chatLog"></div></article><form set-if="!threading" ng-submit="post($event)" class="chatInputContainer final"><textarea msd-elastic="msd-elastic" rows="1" ng-keypress="checkEnter($event)" placeholder="Message" class="span2 chatInput"></textarea><div title="Post image" class="image fa fa-photo file"></div><input type="submit" value="Send" class="submit"/></form><div set-if="fromBeginning" class="chat-control-bottom"><div ng-show="pager &amp;&amp; totalItems &gt; itemsPerPage" class="chat-control"><pagination rotate="true" total-items="totalItems" page="currentPage" on-select-page="selectPage(page)" max-size="maxSize" items-per-page="itemsPerPage" boundary-links="true" direction-links="false"></pagination></div></div></article>'
                ),
                t.put(
                    "/tmpl/chat/chatItemDetailPhone",
                    '<div draggable-handle=".modal-header" draggable-content="parent" set-data-id="nid" class="chatItemDetail chatItemDetailPhone"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3>Replies</h3></div><div chat-auto-scroll-for-child="chat-auto-scroll-for-child" class="modal-body"><div chat="{{nid}}" before-post="beforePost" title="Replies " resize-target="margin-bottom" class="chat"> </div></div></div>'
                ),
                t.put(
                    "/tmpl/chat/chatItemDetail",
                    '<div draggable-handle=".modal-header" draggable-content="parent" set-data-id="nid" class="chatItemDetail"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3>Replies</h3></div><div chat-auto-scroll-for-child="chat-auto-scroll-for-child" viewport-height="85" viewport-max-height="viewport-max-height" class="modal-body"><div class="mainPost"><div class="user"><div set-if="chatMsg.u[0].a" class="avatar"><a><img style="height: 30px;width: 30px;" set-src="(chatMsg.u[0].a | imageURLParser: 30:30)"/></a></div><div class="content"><a set-if="chatMsg.u[0].n" set-text="chatMsg.u[0].n" set-href="\'/user/\' + (chatMsg.u[0].n | encodeURIComponent)"></a><span set-if="!chatMsg.u[0].n" set-text="defaultNick"></span><span set-text="chatMsg.ct | formatTime" class="dim time"></span></div></div><div class="postContent"><div class="postBody"><div set-if="chatMsg.ra" set-data-id="chatMsg.ra._id" ng-click="linkToParent($event, chatMsg.ra._id)" class="replyAt"><label>Replied to: <span set-text="chatMsg.ra.u.n || defaultNick" class="name"></span></label><blockquote><div set-text="chatMsg.ra.b" class="text"></div></blockquote></div><div set-class="greenText(chatMsg.b)" class="fieldText"><img set-if="chatMsg.i" set-src="(chatMsg.i | imageURLParser: 800:600)"/><div set-if="!chatMsg.i &amp;&amp; chatMsg.nt != \'join\'" set-text="chatMsg.b" class="fieldBody"></div><div set-if="chatMsg.nt == \'join\'" set-html="&quot;joins the room&quot;" class="fieldBody"></div></div></div><footer class="content-controls"><div like-button="chatMsg" class="like"></div></footer><footer class="content-controls"><a ng-if="isAuthor &amp;&amp; !banned" ng-click="banUser()" class="btn small banUser">ban this user</a><a ng-if="isAuthor &amp;&amp; banned" ng-click="banUser(true)" class="btn small banUser">unban this user</a><p ng-show="banned" class="help-text">This user is banned from this room.</p><a ng-if="isAuthor &amp;&amp; !deleted" ng-click="deleteNode()" class="btn small delete">delete</a><a ng-if="isAuthor &amp;&amp; deleted" ng-click="deleteNode(true)" class="btn small banUser">undelete this post</a><p ng-show="deleted" class="help-text">This post has been deleted.</p></footer></div></div><div class="replies"><div chat="{{nid}}" before-post="beforePost" title="Replies " resize-target="margin-bottom" class="chat"></div></div></div></div>'
                ),
                t.put(
                    "/tmpl/chat/choice",
                    '<div set-data-id="chatMsg._id" ng-class="chatMsg.closed" ng-controller="choice" class="inner"><h4><span ng-if="chatMsg.closed">Choices - <small>Closed </small></span><span ng-if="!chatMsg.closed"><span ng-if="!currentUser.username &amp;&amp; votePermission">Login to vote </span><span ng-if="!(!currentUser.username &amp;&amp; votePermission)">Your Choice <span ng-if="chatMsg.multiple">(select more than 1) </span></span></span>- <small>{{countCache = votersCount()}} <ng-pluralize count="countCache" when="{0: &quot;be the first to vote.&quot;, 1: &quot;voter&quot;, 2: &quot;voters&quot;, other: &quot;voters&quot;}"></ng-pluralize></small></h4><table class="nav nav-pills nav-stacked poll"><tr set-data-index="choice.index" ng-class="{active: isActiveCache = isActive(choice.index)}" ng-repeat="choice in chatMsg.sortedVotes" class="choiceItem"><td ng-if="isAuthor" ng-click="xOut($event)" title="Cross out this choice" class="icon remove"><i class="icon fa-times fa"></i></td><td ng-click="voteChapter($event, chapter, choice.index, choice.name, \'isThread\')" class="choiceMain"><table><td ng-if="isActiveCache" class="add-on">[✓]</td><td ng-if="!isActiveCache" class="add-on">[  ] </td><td set-text="choice.name" class="text"></td></table></td><td ng-if="!story.hideVote || chatMsg.closed" set-text="choice.votes + \' votes\'" class="result"></td><td ng-if="story.hideVote &amp;&amp; !chatMsg.closed" set-text="\'votes hidden\'" class="result"></td><td title="Comment" ng-click="discussChoice($event, chatMsg, choice.index, choice.name)" class="icon comment"><span ng-if="choiceReplies = chatMsg.choiceReplies[choice.index].count" class="label label-info value">{{choiceReplies}}</span><i class="icon fa-comments-o fa"></i></td></tr><tr set-data-index="index" ng-repeat="index in chatMsg.xOut" class="choiceItem xOut"><td title="Return this choice to the poll" ng-click="xOutReturn($event)" ng-if="isAuthor" class="icon"><i class="icon fa-plus fa"></i></td><td class="choiceMain"><table><td class="add-on">[  ]</td><td class="text"><div set-text="chatMsg.choices[index]" class="value"></div><div ng-bind="chatMsg.xOutReasons[index]" class="reason"></div></td></table></td><td class="result"></td><td title="Comment" ng-click="discussChoice($event, chatMsg, index, chatMsg.choices[index])" class="icon comment"><span ng-if="choiceReplies = chatMsg.choiceReplies[index].count" class="label label-info value">{{choiceReplies}}</span><i class="icon fa-comments-o fa"></i></td></tr></table><div ng-if="chatMsg.custom" class="custom-choice"><textarea type="text" placeholder="Custom choice"></textarea><button type="button" ng-click="addCustomChoice($event)" class="btn">Submit a new custom choice</button></div><div class="results"></div><footer ng-if="isAuthor" class="poll-control"><div ng-show="chatMsg.closed" type="button" ng-click="openPoll()" class="btn open-poll tooltip-target">Open Poll</div><div ng-hide="chatMsg.closed" title="Close the poll to finalize these results." type="button" data-placement="right" ng-click="closePoll()" class="btn close-poll tooltip-target">Close Poll</div></footer></div>'
                ),
                t.put(
                    "/tmpl/chat/chatLogBody",
                    '<article auto-scroll="chatLog" class="chatLog"><div ng-if="!listLoaded" class="loading-indicator"><i class="fa fa-spinner fa-spin"></i></div><div set-if="!threading" jade-repeat="chat/chatList" jade-repeat-data="chatLog"></div><div set-if="threading" jade-repeat="chat/chatListThreading" jade-repeat-data="chatLog"></div></article><form set-if="!threading" ng-submit="post($event)" class="chatInputContainer final"><textarea msd-elastic="msd-elastic" rows="1" ng-keypress="checkEnter($event)" placeholder="Message" class="span2 chatInput"></textarea><div title="Post image" class="image fa fa-photo file"></div><input type="submit" value="Send" class="submit"/></form>'
                ),
                t.put(
                    "/tmpl/chat/postForms",
                    '<div class="tabbable"><ul class="nav btn-set"><li class="active"><a data-target="#chat-tab" data-toggle="tab">Chat</a></li><li><a data-target="#chapter-tab" data-toggle="tab">Advanced Post</a></li><li><a data-target="#choices-tab" data-toggle="tab">Add Poll</a></li></ul><div class="tab-content"><form id="chat-tab" ng-submit="post()" class="tab-pane active chatInputContainer"><textarea msd-elastic="msd-elastic" rows="1" ng-model="chatMessage" ng-keypress="checkEnter($event)" placeholder="Message" class="span2 chatInput"></textarea><label title="Post image" class="image fa fa-photo"></label><input type="submit" value="Submit"/></form><div id="chapter-tab" ng-controller="chapterTab" class="postType tab-pane"><article><div medium-editor="medium-editor" editor-events="false" ng-model="advancedPost" options="{&quot;placeholder&quot;: &quot;Your post&quot;}" class="fieldBody fieldEditor"></div></article><button ng-click="post($event)" class="btn pull-right post-chapter primary">Post</button></div><div id="choices-tab" ng-controller="choicesTab" class="tab-pane"><div class="choicesInterface"><div form-multiple-simple="form-multiple-simple" class="form-multiple"><div class="form-multiple-item input-prepend"><input type="text" placeholder="Type in a choice" class="span4 choiceItem"/></div></div><label ng-hide="poll.noVote" class="checkbox"><input ng-model="poll.custom" type="checkbox" checked="checked" class="custom"/>Allow custom choice</label><label ng-hide="poll.noVote" class="checkbox"><input ng-model="poll.multiple" type="checkbox" checked="checked" class="multiple"/>Allow multiple selections</label><button ng-show="poll.noVote" ng-click="post($event)" class="btn pull-right post-readerPost">Add Reader response</button><button ng-hide="poll.noVote" ng-click="post($event)" class="btn pull-right post-choices primary">Add Poll</button></div></div></div></div>'
                ),
                t.put(
                    "/tmpl/chat/pager",
                    '<div ng-show="pager &amp;&amp; totalItems &gt; itemsPerPage" class="chat-control"><pagination rotate="true" total-items="totalItems" page="currentPage" on-select-page="selectPage(page)" max-size="maxSize" items-per-page="itemsPerPage" boundary-links="true" direction-links="false"></pagination></div>'
                ),
                t.put(
                    "/tmpl/chat/users",
                    '<div class="users"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3>Users</h3></div><div class="modal-body"><ul class="listView-tiny"><li ng-repeat="user in users"><div class="title header"><span set-if="user == \'anon\'" class="author"><span set-if="extraAnons &gt; 1" class="author"><span set-text=" \'+\' + extraAnons + \' \'+ (defaultNick | pluralize) "> </span></span><span set-if="extraAnons == 1 || extraAnons &lt; 1" class="author"><span set-text="defaultNick"></span></span></span><a set-if="user != \'anon\'" target="_blank" set-href="\'/user/\' + (user | encodeURIComponent)" class="author"><span set-text="user"></span></a></div></li></ul></div></div>'
                ),
                t.put(
                    "/tmpl/threads/createThreadForm",
                    '<form ng-submit="submit($event)" class="createThreadForm"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3>Create New Topic</h3></div><div class="modal-body"><div class="formItem"><label class="required">Topic Title</label><input type="text" class="title fieldText"/></div><div class="formItem"><label>Topic Body</label><textarea class="body fieldText"></textarea></div><div class="formItem board"><label class="required">Board</label><input type="text" placeholder="Board name" typeahead="board for board in recommendedBoards | filter:$viewValue | limitTo: 8" ng-model="board" class="board choiceItem"/></div></div><div class="modal-footer"><input type="submit" value="Post New Topic" class="btn customInput"/></div></form>'
                ),
                t.put(
                    "/tmpl/threads/threadEdit",
                    '<div class="editStory"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3>Settings</h3></div><div class="modal-body"><div ng-if="!noBoard" class="control-group formItem"><div class="help-block">This post will link back to this board (but it may appear in other boards as well).</div><label>Story\'s main board<input type="text" placeholder="Board name" ng-model="thread.r[0]" ng-init="thread.r = thread.r || {}" class="choiceItem"/></label></div><label class="checkbox"><input type="checkbox" ng-model="thread.trash" ng-change="unpublish()"/>Unpublish this</label></div><div class="modal-footer"><input type="submit" value="Save and close" ng-click="close()" class="btn btn-primary"/></div></div>'
                ),
                t.put(
                    "/tmpl/threads/threadItem",
                    '<div itemscope="itemscope" itemtype="http://schema.org/CreativeWork" class="threads story nodeDetail"><meta-tags title="thread.t"></meta-tags><div class="storyImgContainer"><img ng-if="!threadAuthor &amp;&amp; thread.i" itemprop="image" ng-src="{{thread.i[0] | imageURLParser}}" set-alt="thread.t" class="storyImg"/><img ng-if="threadAuthor &amp;&amp; thread.i" itemprop="image" ng-src="{{thread.i[0]}}" ng-click="setImage()" alt="Click to replace thread image" class="storyImg isAuthor"/><div ng-click="setImage()" ng-if="threadAuthor &amp;&amp; thread.i" style="background-image:url({{thread.i[0] | imageURLParser}})" alt="Click to replace thread image" class="imgWithBackground isAuthor"></div><div ng-if="!threadAuthor &amp;&amp; thread.i" style="background-image:url({{thread.i[0] | imageURLParser}})" class="imgWithBackground"></div></div><article class="page-head-body"><nav id="storyProperties"><span ng-init="user = thread.u[0]" class="author"><a set-href="\'/user/\' + (user.n | encodeURIComponent)" class="inner"><span ng-if="user.a" class="avatar"><img set-src="(user.a | imageURLParser: 30:30)" class="avatar"/></span><span set-text="user.n" class="name"></span></a></span><span class="tags"><a set-href="\'/\'+getBoard()" set-text="getBoard()" class="tag"></a></span><div ng-if="threadAuthor" ng-click="editNode()" class="editStory btn"><i class="fa-gear fa"></i><span>Edit</span></div></nav><header class="page-title"><div ng-if="!thread.i&amp;&amp;threadAuthor" ng-click="setImage()" class="btn setImage"><i class="fa fa-image"></i><span>Set the cover image</span></div><h1 ng-if="threadAuthor" ng-model="thread.t" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;(Optional) Enter a title&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: true, &quot;disableReturn&quot;: true}"></h1><h1 itemprop="name headline" ng-if="!threadAuthor" set-html="thread.t"></h1></header><div id="page-body" set-data-nt="thread.nt" class="page-body post-not-story"><article><div ng-if="threadAuthor" ng-model="thread.b" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Your post here&quot;}" class="fieldBody"></div><div ng-if="!threadAuthor" ng-bind-html="thread.b" class="fieldBody"></div></article><div chat="{{threadId}}" threading="threading" from-beginning="from-beginning" class="chat"></div></div><footer set-if="currentUser" chat-post="{{threadId}}" class="post"></footer></article></div>'
                ),
                t.put(
                    "/tmpl/threads/threadItemDetail",
                    '<div draggable-handle=".modal-header" draggable-content="parent" set-data-id="nid" class="threadItemDetail"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3 set-text="chatMsg.t"></h3></div><div chat-auto-scroll-for-child="chat-auto-scroll-for-child" viewport-height="85" viewport-max-height="viewport-max-height" class="modal-body"><div class="mainPost"><div class="user"><div set-if="chatMsg.u[0].a" class="avatar"><a><img style="height: 30px;width: 30px;" set-src="(chatMsg.u[0].a | imageURLParser: 30:30)"/></a></div><div class="content"><a set-if="chatMsg.u[0].n" set-text="chatMsg.u[0].n" set-href="\'/user/\' + (chatMsg.u[0].n | encodeURIComponent)"></a><span set-if="!chatMsg.u[0].n" set-text="defaultNick"></span><span set-text="chatMsg.ct | formatTime" class="dim time"></span><div like-button="chatMsg" no-icon="no-icon" class="like"></div></div></div><div class="postContent"><div class="postBody"><div set-if="chatMsg.ra" set-data-id="chatMsg.ra._id" ng-click="openChatDetail($event, chatMsg.ra)" class="replyAt"><label>Replied to: <span set-text="chatMsg.ra.u.n || defaultNick" class="name"></span></label><blockquote><div set-text="chatMsg.ra.b" class="text"></div></blockquote></div><div set-class="greenText(chatMsg.b)"><img set-if="chatMsg.i" set-src="(chatMsg.i | imageURLParser: 400:400:&quot;nocfill&quot;)"/><div set-if="!chatMsg.i &amp;&amp; chatMsg.nt != \'join\'" set-html="chatMsg.b" class="fieldBody"></div><div set-if="chatMsg.nt == \'join\'" set-html="&quot;joins the room&quot;" class="fieldBody"></div></div></div></div></div><div class="replies"><div chat="{{nid}}" before-post="beforePost" title="Replies " resize-target="margin-bottom" class="chat"></div></div></div></div>'
                ),
                t.put(
                    "/tmpl/threads/threadList",
                    '<article class="listView-small threadList"><div ng-if="!listLoaded" class="loading-indicator"><i class="fa fa-spinner fa-spin"></i></div><div jade-repeat="threads/threadListItem" jade-repeat-data="threadList"></div></article>'
                ),
                t.put(
                    "/tmpl/threads/threads",
                    '<article class="field threads"><div class="page-controls"><div class="left-menu header-menu"><a ng-href="{{currentThreadListHref}}" active-link="active-link" class="allTopics btn dim-font-color hover-link-color"><i class="fa fa-arrow-circle-o-left"></i><span>All Topics</span></a><div ng-click="postThread($event)" class="btn startDiscussion dim-font-color hover-green"><i class="fa fa-plus"></i><span>New Topic</span></div></div></div><article class="listView-small threadList"><div ng-if="!listLoaded" class="loading-indicator"><i class="fa fa-spinner fa-spin"></i></div><div jade-repeat="threads/threadListItem" jade-repeat-data="threadList"></div></article><pagination ng-if="!noPager" rotate="true" total-items="totalItems" page="currentPage" on-select-page="selectPage(page)" max-size="maxSize" items-per-page="itemsPerPage" boundary-links="true" direction-links="false"></pagination></article>'
                ),
                t.put(
                    "/tmpl/anonkun/buypremium",
                    '<div id="premium"><section class="row-fluid"><h1>Buy Super</h1><div class="content fieldBody"><div ng-if="plan()" class="div callToAction"></div><form><div class="sr-payment-form payment-view"><div class="sr-form-row"><label for="card-element">Payment details</label><div class="sr-combo-inputs"><div class="sr-combo-inputs-row"><div id="card-element" class="sr-input sr-card-element"></div></div></div><div id="card-errors" role="alert" class="sr-field-error"></div></div><button id="submit"><div id="spinner" class="hidden"></div><span id="button-text">Subscribe</span></button><div class="sr-legal-text">Your card will be immediately charged<span class="order-total">$9.99</span>.</div></div></form><div class="sr-payment-summary hidden completed-view"><h1>Your subscription is <span class="order-status"></span></h1><h4><a>View subscription response:</a></h4></div><footer><h3>Questions or comments</h3><p><a href="/about/termsOfSale">Terms of Sale</a></p><p>If you have questions or comments about Super, please contact us by email at supersupport@fiction.live.</p></footer></div></section></div>'
                ),
                t.put(
                    "/tmpl/anonkun/about",
                    '<div id="terms"><section class="row-fluid"><h1>Fiction.live for writers.</h1><div class="content fieldBody"><div class="benefits"><div class="span6 half"><h4>Awesome polls</h4><p>Use the world\'s best polling system. See people\'s votes roll-in in real time. There are options for many different polling styles.</p><h4>Get Hype</h4><p>Set a countdown timer to get free marketing on our live page. Get your readers savoring in anticipation.</p></div><div class="span6 half"><h4>Get a great community</h4><p>All writers love feedback - feedback from a loyal and engaged community. Get that community from Fiction.live.</p><h4>Keep people coming back</h4><p>Your readers get realtime audio, direct message, and email notifications. More options coming soon.</p></div></div></div></section><section class="row-fluid callToAction"><a href="/stories" class="btn blue huge active">Stories</a><a ng-if="!currentUser" ng-click="openRegister()" class="btn red huge active">Sign Up</a></section><section class="row-fluid learnMore"><div><h3>Fiction.live is a new movement in storytelling. It\'s more personable, it\'s more interactive, and it\'s more fun. This is the best time you\'ll have writing a story.</h3><a href="/forwriters" class="btn green big active">See the things we do for writers</a></div></section></div>'
                ),
                t.put(
                    "/tmpl/anonkun/collections",
                    '<div id="board" class="container max-height no-overflow"><div ng-cloak="ng-cloak" class="storiesList listView-large"><header class="page-header"><h1>Collections</h1></header><li ng-repeat="collection in collections" class="collection"><header class="user"><div set-if="collection.u[0].a" class="avatar"><a set-if="collection.u[0].n" set-href="\'/user/\' + (collection.u[0].n | encodeURIComponent)" class="authorPane"> <img set-src="(collection.u[0].a  | imageURLParser: 60:60)"/></a></div><div set-if="!collection.u[0].a" class="avatar"><a set-if="collection.u[0].n" set-href="\'/user/\' + (collection.u[0].n | encodeURIComponent)" class="authorPane"> <img src="//d2t4fc8ff77neh.cloudfront.net/cardSrcImage/1ali1vhj6_1683sur0j_photo_1.jpg"/></a></div></header><div class="content"><a set-href="\'/user/\' + (collection.u[0].n | encodeURIComponent)+\'/collections/\'+ (collection.t | encodeURIComponent)" class="title header"><h2><span set-text="\'(\' + (collection.collection.length | default:\'0\') + \' stories) \' "></span><span set-text="collection.t"></span></h2></a><div set-html="collection.b" class="body"></div></div></li><pagination rotate="true" total-items="\'99999999999999\'" page="currentPage" on-select-page="selectPage(page)" items-per-page="itemsPerPage" max-size="maxSize" boundary-links="false" class="stories-pagination"></pagination></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/frontpage",
                    '<div id="frontpage"><div ui-view="frontpageContent" class="max-height no-overflow"><header class="splashContainer"><div class="splash"><h1>Control live & interactive stories</h1><p class="lead">Livestreams for fiction - suggest your idea and vote for what\'s written next.</p><div class="row-fluid callToAction"><a ng-if="!currentUser" ng-click="openRegister()" class="btn hover-green big dim-font-color">Sign Up</a><a href="/live" class="btn hover-green big">Live stories</a></div></div></header><div id="board" class="storiesListContainer"><div class="board-main"><div class="storiesList listView-large"><header><h2>Featured Stories</h2></header><li ng-repeat="story in stories"><div set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" set-class="{readHistory: checkReadHistory(story), nsfwCover: story.nsfwCover}" ng-controller="storyListItem" class="storyListItem listItemInner"><div ng-if="!listViewCompact" class="inner"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="column imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 320:180)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/g/320/180" alt=""/></a><div class="column information"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="content"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div><div set-text="story.d" class="description"></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div class="coverStatsContainer"><div ng-class="{users: actives}" set-data-hint="actives + \' current active viewers\'" class="stat hint--bottom"><i class="fa fa-user"></i><span>{{actives}}</span></div><a set-href="\'/user/\' + (story.u[0].n | encodeURIComponent)" set-if="story.u[0].n != \'Anon\'" set-data-hint="\'created by\'" class="stat user hint--bottom"><div class="authorPane"><img set-if="story.u[0].a" set-src="(story.u[0].a | imageURLParser: 16:16)"/><div set-text="story.u[0].n" class="name"></div></div></a><div set-if="story.p" set-data-hint="story.p + \' comments\'" class="stat hint--bottom"><i class="fa-comments-o fa"></i><span set-text="story.p | formatNumber"></span></div><div ng-if="story.likeCount" set-data-hint="story.likeCount + \' likes\'" class="stat hint--bottom"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div set-data-hint="story.w+ \' words\'" class="stat hint--bottom"><span set-text="readingTime()"></span></div></div></div></div></div><div ng-if="listViewCompact" class="inner listViewCompact"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 336:252)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/336/252" alt=""/></a><div class="user"><div class="authorPane"><div set-text="story.u[0].n" class="name"></div></div></div><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" ng-if="listViewCompact" class="information"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div ng-class="{users: actives}" class="stat"><i class="fa fa-user"></i><span>{{actives}}</span></div><div ng-if="story.p" class="stat"><i class="fa-comments-o fa"></i><span>{{:: story.p}}</span></div><div class="stat"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div class="stat"><i class="fa fa-font"></i><span set-text="readingTime()" data-hint="{{::story.w}} words"></span></div></div></div></div></li></div></div><div class="row-fluid callToAction"><a ng-if="!currentUser" ng-click="openRegister()" class="btn hover-green big dim-font-color">Sign Up</a><a href="/live" class="btn hover-green big">See all Live</a></div></div><section class="row-fluid learnMore"><div></div><div class="forwriters"><h2>For Writers</h2><p class="lead">A next generation storytelling platform for digital native stories.</p><section class="row-fluid"><p class="lead">Interactive & realtime</p><div class="content fieldBody"><div class="benefits"><div class="span6 half"><h4>Get instant feedback</h4><p>Know what readers think right away. See the chatter, the reactions, and the feelings that your readers are having with the built in realtime chat.</p></div><div class="span6 half"><h4>Your community decide what happens next</h4><p>Your readers can vote on the plan of attack, the best love interest, or the next bit of witty dialogue. When readers have influence, readers have more fun.</p></div></div></div></section><section class="row-fluid"><p class="lead">As interactive as you want it to be</p><div class="content fieldBody"><div class="benefits"><div class="span6 half"><h4>Keep control of your story</h4><p>Embrace reader suggestions or troll them like a genie. You can always cross out and remove suggestions. Never write something you don\'t want to.</p></div><div class="span6 half"><h4>Create multiple endings</h4><p>Have many ideas for the story? Split them off into different paths. The story can end in happily or in a tragedy. You can make all your fans happy.</p></div></div></div></section><section class="row-fluid"><p class="lead">Your readers, your community</p><div class="content fieldBody"><div class="benefits"><div class="span6 half"><h4>Sophisticated community building</h4><p>Every story has chat, forums, notifications, and more. Here are the tools you need to build your permanent fanbase.</p></div><div class="span6 half"><h4>Moderation controls</h4><p>Keep your community safe. Filter out or ban the people who just don\'t get you. Tell the story you want without interference.</p>\n</div></div></div></section></div></section>\n\n\n</div><footer><div class="row-fluid callToAction"><a ng-if="!currentUser" ng-click="openRegister()" class="btn hover-green big dim-font-color">Sign Up</a></div><menu><li><a href="/about/terms">Terms</a></li><li><a href="/about/privacy">Privacy</a></li><li><a href="/about/super">Super Premium</a></li><li><!--email_off-->  <a href="mailto:admin@fiction.live">Contact</a><!--/email_off-->  </li></menu></footer></div>'
                ),
                t.put(
                    "/tmpl/anonkun/forwriters",
                    '<div id="terms" class="forwriters"><section class="row-fluid"><p class="lead">Fiction.live is a next generation storytelling platform built for a digital native stories. </p></section><section class="row-fluid"><p class="lead">Interactive & realtime</p><div class="content fieldBody"><div class="benefits"><div class="span6 half"><h4>Get instant feedback</h4><p>See what readers think right away. Witness the chatter, the reactions, and the feelings that your readers are having with the built in realtime chat.</p></div><div class="span6 half"><h4>Your community decide what happens next</h4><p>Your readers vote on the plan of attack, their preferred love interest, or the next bit of snarky dialogue. When readers feel like they can control the story, they have more fun.</p>\n</div></div></div></section><section class="row-fluid"><p class="lead">As interactive as you want it to be</p><div class="content fieldBody"><div class="benefits"><div class="span6 half"><h4>Keep control of your story</h4><p>Embrace reader suggestions or troll them like a genie. You can always cross out and remove suggestions. Never write something you don\'t want to.</p></div><div class="span6 half"><h4>Create multiple endings</h4><p>The story\'s not going the way you want? Split them off into different branches and different paths. The story can end in happily... or in a tragedy. Make all your fans happy.</p></div></div></div></section><section class="row-fluid"><p class="lead">Your home for the long term</p><div class="content fieldBody"><div class="benefits"><div class="span6 half"><h4>This is your permanent fanbase</h4><p>It\'s all about your community. We help you keep them happy. High retention and repeat fans drives loyalty.</p><h4>Make writing your career</h4><p>Accept money from your fans. We offer a full suite of creative monetization options that perfectly fits our format. Participate in the Fiction.live Partner today.</p></div><div class="span6 half"><h4>Get a great community</h4><p>All writers love feedback - feedback from a loyal and engaged community. Get that community from Fiction.live.</p><h4>Keep people coming back</h4><p>Your readers get realtime audio, direct message, and email notifications. More options coming.</p>\n</div></div></div></section><section class="row-fluid callToAction"><a href="/stories" class="btn blue huge active">Stories</a><a ng-if="!currentUser" ng-click="openRegister()" class="btn red huge active">Sign Up</a></section></div>'
                ),
                t.put(
                    "/tmpl/anonkun/premium",
                    '<div id="premium"><section class="row-fluid"><h1>Fiction.live Super Account</h1><div class="content fieldBody"><div ng-if="!plan()" class="div callToAction"><div ng-click="subscribe()" class="btn huge">GET SUPER NOW</div></div><div ng-if="plan()" class="div info">You have a Super Account. Thanks for being part of Fiction.live.</div><p class="tagline">Subscribe to Fiction.live Super starting at just $9.99 a month.</p><h3>Planned Benefits (Coming Soon)</h3><div class="benefits"><div class="benefit"><h2>Sweet Cosmetics</h2><p>Decorate your presence with flair. Make yourself cool and notable. Enhanced <span data-hint="Special flairs for the chapters, stories, and suggestions that you like." data-placement="bottom" class="hint--bottom">"Super-Like"</span>, <span data-hint="Special flair for suggestions and reader-posts that you make." data-placement="bottom" class="hint--bottom">"Super-Suggestion"</span>, and<span data-hint="Your chat will be notably super." data-placement="bottom" class="hint--bottom">"Super-Chat"</span></p></div><div class="benefit"><h2>Support your favorites</h2><p>Support your favorite writers by joining their fanclubs.</p></div><div class="benefit"><h2>Access Draft Stories</h2><p>Get early access to draft content that writers want input on.</p></div></div><div ng-if="!plan()" class="div callToAction"><div ng-click="subscribe()" class="btn huge">GET SUPER NOW</div></div><footer><h3>Questions or comments</h3><p><a href="/about/termsOfSale">Terms of Sale</a></p><p>If you have questions or comments about Super, please contact us by email at supersupport@fiction.live.</p></footer></div></section></div>'
                ),
                t.put(
                    "/tmpl/anonkun/help",
                    '<div id="help" class="nodeDetail"><h1>Help</h1><section class="row-fluid page-body"><aside><ul class="help nav nav-pills nav-stacked"><li ng-repeat="item in helpPages"><a active-link="active-link" set-href="\'/help/\'+item.path" set-html="item.title">Frequently Asked Questions</a></li></ul></aside><div class="content"><h2 ng-bind-html="title" class="header"></h2><div class="fieldBody"><div ng-bind-html="content"></div></div></div><section class="row-fluid callToAction"><a ng-if="!currentUser" ng-click="openRegister()" class="btn">Sign Up</a></section></section></div>'
                ),
                t.put(
                    "/tmpl/anonkun/privacy",
                    '<div id="terms"><section class="row-fluid"><h1>Privacy</h1><div class="content fieldBody"><p>Fiction.live collects personal information from you, such as name and email address, when you sign up for our service or contact us by email. We also track many of the actions you take on our site in order to improve the service.</p><h2>Data privacy</h2><p>We reserve the right to publish or share any data that help promote Fiction.live or help Fiction.live provide better service.</p><h2>Our Policy Toward Children</h2><p>Our Services are not directed to persons under 13. We do not knowingly collect personally identifiable information from children under 13. If a parent or guardian becomes aware that his or her child has provided us with Personal Information without their consent, he or she should contact us at support@fiction.live. If we become aware that a child under 13 has provided us with Personal Information, we will take steps to delete such information from our files.</p><h2>Cookies</h2><p>A cookie is a small amount of data that is sent to your browser from our servers and stored on your computer\'s hard drive. We use cookies to access information when you sign in, store your preferences, to keep you logged in, and to store a limited amount of behavioral data. You can configure your browser to accept or reject these cookies.</p><h2>Changes to this privacy policy</h2><p>This Privacy Policy may change from time to time. If we make a change to this privacy policy that we believe materially reduces your rights, we will provide you with notice (for example, by email). And we may provide notice of changes in other circumstances as well. By continuing to use the Service after those changes become effective, you agree to be bound by the revised Privacy Policy.</p><h2>Questions or comments</h2><p>If you have questions or comments about this privacy policy, please contact us by email at support@fiction.live.</p></div></section></div>'
                ),
                t.put(
                    "/tmpl/anonkun/premiumTerms",
                    '<div id="terms"><section class="row-fluid"><h1>Fiction.live Super Premium Terms of Sale </h1><div class="content fieldBody"><p>Welcome to Fiction.live! Fiction.live ("Fiction.live", "our", "us" or "we") provides Fiction.live, an online service that allows users to create, read and share stories (the "Services") through our website, accessible at fiction.live (the "Site"), and our application for mobile devices (the "Application").</p><p>Fiction.live allows you to access certain premium features or content in exchange for a one-time or recurring fee, as applicable to the relevant features or content (collectively, each a “Paid Service” and collectively the "Paid Services"). </p><p>YOU ACKNOWLEDGE AND AGREE THAT, BY USING A PAID SERVICE, YOU ARE INDICATING THAT YOU HAVE READ, UNDERSTAND AND AGREE TO BE BOUND BY THESE TERMS. IF YOU DO NOT AGREE TO THESE TERMS, THEN YOU HAVE NO RIGHT TO ACCESS OR USE ANY PAID SERVICE. If you accept or agree to these Terms on behalf of a company or other legal entity, you represent and warrant that you have the authority to bind that company or other legal entity to these Terms and, in such event, "you" and "your" will refer and apply to that company or other legal entity.</p><p>Each time you place an order for a Paid Service (including when you order individual subscriptions or items of content), you enter into a separate contract for services on these Terms. When you complete a purchase, you signify that you wish to enter into a binding contract for the provision of the applicable Paid Services.</p><p>To make a purchase on a Paid Service, you must be a registered Fiction.live user and comply with these Terms of Sale (including the Terms of Service). You acknowledge that you are responsible for maintaining the security of, and restricting access to, your account and password, and you agree to accept responsibility for all purchases and other activities that occur under your account. Fiction.live sells its Paid Services only to those users who can legally make purchases with a credit card. If you are between the ages of 13 and 18 (or the legal age of majority in your state of residence), you may make purchases on the Fiction.live Paid Service only with the permission of a parent or guardian. Fiction.live reserves the right to refuse or cancel orders or terminate accounts, at any time in its sole discretion.</p><h2>Subscription Service - Automatic Payments</h2><p>Fiction.live may offer certain Paid Services on a subscription basis with recurring payments (“Subscription Services”). Subscription Services may renew automatically, with payment due prior to each renewal. You agree to pay your subscription fee in advance of receiving any such Subscription Service. Fiction.live reserves the right to discontinue or modify any subscription fee payment option. If we discontinue or modify a subscription payment option, we will provide notice of such discontinuance or modification. If you are signing up under any promotional subscription fee, some additional restrictions may apply. These restrictions, if any, will be provided to you before you sign up for the applicable Subscription Service that is subject to the promotion.</p><p>You are responsible for all charges incurred under your account. Fiction.live reserves the right to deactivate Subscription Services to your account if payment is past due, regardless of the dollar amount.</p><p>If you choose a Subscription Service (including any pre-paid subscription option, gift subscriptions, or other subscriptions that revert to a monthly payment plan at the expiration of the pre-paid period), you hereby grant Fiction.live permission to automatically charge the subscription fee to your chosen payment method at the beginning of each applicable payment period until you cancel the Subscription Service. Your access, or the gift recipient\'s access, to the Subscription Services will not be established until Fiction.live has verified that the credit card or other payment information you provide Fiction.live for payment is accurate and that your payment method account is in good standing.</p><p>You further agree that Fiction.live may charge any other applicable fees for the Fiction.live Paid Services, if disclosed to you in connection with your purchase, to your payment method, including any early termination fee.</p><p>You are required to keep your billing information current, complete, and accurate (for example, if you move, be sure to update your billing address, if you get a new credit/debit card, make sure you update the card number and/or expiration date) and notify Fiction.live if your selected payment method is cancelled (e.g., for loss or theft).</p><p>Fiction.live reserves the right to suspend or terminate your access to any Subscription Service that is a part of the Paid Service without notice upon rejection of any charges or if your payment method (or its agent or affiliate) seeks return of payments previously made to Fiction.live when Fiction.live believes you are liable for the charges.</p><h2>Cancellation of Subscription Services</h2><p>You may cancel your Subscription Service at any time by selecting the "Cancel Super Subscription” option under your profile settings in your profile page.</p><p>Your cancellation is effective at the end of the current payment period.</p><h2>Modification</h2><p>Fiction.live reserves the right, at its sole discretion, to modify, discontinue or terminate the Site, Application or Services or to modify these Terms, at any time and without prior notice. By continuing to access or use the Site, Application or Services after we have posted a modification on the Site or via the Application or have provided you with notice of a modification, you are indicating that you agree to be bound by the modified Terms. If the modified Terms are not acceptable to you, your only recourse is to cease using the Site, Application and the Services.</p><h2>Subscription Cancellations</h2><p>If you purchase a subscription to a Paid Service that automatically renews, you may cancel the subscription any time before the end of the current billing period and the cancellation will take effect on the next billing period. You will retain access to the Paid Service from the time you cancel until the start of the next billing period, and will not receive a refund or credit for any remaining days in your current billing period.</p><h2>Taxes</h2><p>If Fiction.live is required to collect or pay any taxes in connection with your purchase of a Paid Service, such taxes will be charged to you at the time of each purchase transaction. Additionally, if required by law, you are responsible for reporting and paying certain taxes in connection with your purchase and use of a Paid Service. Such taxes may include duties, customs fees, or other taxes (other than income tax), along with any related penalties or interest, as applicable to your purchase or country of purchase.</p><h2>Termination</h2><p>Fiction.live MAY SUSPEND, TERMINATE, MODIFY, OR DELETE ANY ACCOUNT AT ANY TIME FOR ANY REASON OR FOR NO REASON, WITH OR WITHOUT NOTICE TO YOU.</p><h2>Refund Policy</h2><p>When you make or receive the gift of a purchase on the Fiction.live Super you have immediate access to, and use of, the Services you have purchased. Accordingly, except as detailed in these Terms of Sale, you lose your right to cancel once you have made your purchase, and we do not offer any refunds or credits, including, without limitation, fees for Super. Fiction.live reserves the right to modify this refund policy as set forth below at any time.</p><p>Unless otherwise specified in these Terms of Sale or required under the applicable law in your jurisdiction, points, website cosmetics, items, and other digital goods are not returnable after purchase.</p><h2>Notices</h2><p>Any notices or other communications permitted or required hereunder, including those regarding modifications to these Terms, will be in writing and given by Fiction.live (i) via email (in each case to the address that you provide) or (ii) by posting to the Site or via the Application. For notices made by e-mail, the date of receipt will be deemed the date on which such notice is transmitted.</p><h2>Payment</h2><p>We accept major credit cards, certain debit cards, PayPal, and/or such other payment methods we may make available to you from time-to-time through our site, as forms of payment. You are subject to all terms and conditions of the payment method you choose. By submitting an order through the Fiction.live, you authorize Fiction.live, or its designated payment processor, to charge the account you specify for the purchase amount. All payments are to be made in United States Dollars, except where other currencies are offered via the payment methods made available by Fiction.live.</p><p>PLEASE NOTE: Our payment processing partners may request that you provide certain personal data (e.g., a valid government issued ID, your legal name, address, and date of birth) for the purpose of making payment through its financial institutions and complying with applicable international, national, federal, state, and local laws and regulations. They may also communicate directly with you regarding any issues with a payment.</p><p>If a purchase has been declined online due to issues with your payment method, please ensure all data is correct and resubmit. If the transaction is not accepted online, please contact customer support via the email address made available to you in connection with the purchase.</p><p>Fiction.live may impose an additional transaction fee based on transactions associated with the Fiction.live Super, including a transaction fee applied to purchases from third parties. Such transaction fee will be disclosed to you prior to your consummation of the relevant transaction.</p><h2>Contacting Fiction.live</h2><p>If you have any questions about these Terms or any questions, complaints or claims with respect to the Application, please contact us at supersupport@fiction.live</p></div></section></div>'
                ),
                t.put(
                    "/tmpl/anonkun/reviews",
                    '<div id="board" class="container max-height no-overflow"><div ng-cloak="ng-cloak" class="listView-large storiesList"><header class="page-header"><h1>Reviews</h1></header><li ng-repeat="review in stories | orderBy:&quot;-ut&quot; " set-class="{nsfwCover: review.story.nsfwCover}" class="review storyListItem"><div class="content"><a set-href="\'/\'+ (review.story.r[0] | default: \'stories\') + \'/\' + (review.story.t | url) + \'/\' + review.story._id" class="storyImage"><div class="imgContainer"><img set-if="review.story.i[0]" set-src="(review.story.i[0]  | imageURLParser: 320:180)"/></div></a><div class="reviewContent"><header class="title"><a set-href="\'/\'+ (review.story.r[0] | default: \'stories\') + \'/\' + (review.story.t | url) + \'/\' + review.story._id"><h2 set-text="review.story.t"></h2></a></header><header class="reviewer"><div set-if="review.u[0].a" class="avatar"><a set-if="review.u[0].n" set-href="\'/user/\' + (review.u[0].n | encodeURIComponent)" class="authorPane"> <img set-src="(review.u[0].a  | imageURLParser: 60:60)"/></a></div><div set-if="!review.u[0].a" class="avatar"><a set-if="review.u[0].n" set-href="\'/user/\' + (review.u[0].n | encodeURIComponent)" class="authorPane"> <img src="//d2t4fc8ff77neh.cloudfront.net/cardSrcImage/1ali1vhj6_1683sur0j_photo_1.jpg"/></a></div><div class="details"><div class="rating"><rating value="review.score" max="5" readonly="true"></rating></div><div class="writtenBy"><span>Reviewed by </span><a set-if="review.u[0].n" set-href="\'/user/\' + (review.u[0].n | encodeURIComponent)" set-text="review.u[0].n" class="name"></a><span set-if="!review.u[0].n" class="name">Anon</span><span set-text="(review.ct | timeago)" class="created"></span></div></div></header><div><div class="spoilerFree"><div set-html="review.b" class="fieldBody"></div></div><div set-if="review.spoiler" class="spoilers"><a ng-click="spoilers = true" ng-hide="spoilers">Show spoilers</a><div ng-if="spoilers" set-html="review.spoiler" class="fieldBody"></div></div><footer><span class="likeLink"><span like-button="review"></span></span></footer></div></div>\n</div></li><pagination rotate="true" total-items="\'99999999999999\'" page="currentPage" on-select-page="selectPage(page)" items-per-page="itemsPerPage" max-size="maxSize" boundary-links="false" class="stories-pagination"></pagination></div><div id="right" ng-class="mobileActive" class="fixedSide container max-height no-overflow"><div id="threads"><h3 class="header">Topics</h3><div threads="{{currentChatID}}" current-thread-list-href="{{currentThreadListHref}}" no-pager="no-pager" class="threads"></div><a ng-href="{{currentThreadListHref}}" class="fullListFooter"><div class="btn big">More topics</div></a></div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/reviewItem",
                    '<div class="review"><table><tr><td set-if="review.u[0].a" class="avatar"><a set-if="review.u[0].n" set-href="\'/user/\' + (review.u[0].n | url)" class="authorPane"> <img set-if="review.u[0].a" set-src="(review.u[0].a | imageURLParser: 60:60)"/></a></td><td class="ratingTD"><div class="rating"><rating value="review.score" max="5" readonly="true"></rating></div><div class="writtenBy"><span>by </span><a ng-if="review.u[0].n" ng-href="/user/{{:: review.u[0].n | url}}" set-text="review.u[0].n" class="name"></a><span ng-if="!review.u[0].n" class="name">Anon</span><span class="created">{{:: review.ct | timeago}}</span></div></td></tr><tr><td colspan="2"><div class="spoilerFree"><div ng-bind-html="review.b" class="fieldBody"></div></div><div ng-if="review.spoiler" class="spoilers"><a ng-click="spoilers = true" ng-hide="spoilers">Show spoilers</a><div ng-if="spoilers" ng-bind-html="review.spoiler" class="fieldBody"></div></div><footer><span class="likeLink"><span like-button="review"></span></span></footer></td></tr></table></div>'
                ),
                t.put("/tmpl/anonkun/standard", '<div id="content" ui-view="content" class="content container max-height no-overflow"><!-- , ng-style="contentStyle"--></div>'),
                t.put(
                    "/tmpl/anonkun/story",
                    '<div itemscope="itemscope" itemtype="http://schema.org/CreativeWork" ng-init="checkIsAuthor();" bindonce="story" set-class="userStyles()" class="story nodeDetail"><meta-tags title="story.t" image="story.i[0]" description="story.d" type="\'article\'" twitter-publisher-handle="\'@AnonQuest\'" section="story.r[0]"></meta-tags><mobile-scrollbar id="mobileScrollbar" padding-top="56"></mobile-scrollbar><article ng-if="story.nt == \'post\'" class="page-head-body"><header class="page-title"><h1 ng-if="isAuthor" ng-model="story.t" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;(Optional) Enter a title&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: true, &quot;disableReturn&quot;: true}"></h1><h1 itemprop="name headline" ng-if="!isAuthor" set-html="story.t"></h1></header><div id="page-body" set-data-nt="story.nt" class="page-body post-not-story"><article><div ng-if="isAuthor" ng-model="story.b" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Your post here&quot;}" class="fieldBody"></div><div ng-if="!isAuthor" ng-bind-html="story.b" class="fieldBody"></div></article><div chat="{{currentChatID}}" from-beginning="from-beginning" class="chat"></div></div><footer chat-post="{{currentChatID}}" class="post"></footer></article><article ui-view="storyInner" ng-if="story.nt != \'post\'" ng-class="mobileActive" class="page-head-body"><div id="publishButtonWrapper" ng-if="(isAuthor &amp;&amp; story.init) || (isAuthor &amp;&amp; justPublished)"><div id="publishButton"><article ng-if="story.init" class="chapter"><div class="fieldBody"><p>Your story is currently not published. Start your story with the text box below. When you\'re ready, click the publish button.</p></div></article><article ng-if="story.init" class="chapter"><div ng-click="publish()" class="btn green huge">Publish</div></article><article ng-if="!story.init" class="chapter"><div class="fieldBody"><p> <span class="publishedIcon"><i class="fa fa-check"></i></span></p><h3>Welcome to Fiction.live! Your story is published!</h3><p><b>Now that your story is up and running, here are some things you should consider doing:</b></p><ul><li>Chat with your readers and form a community with the right sidebar.</li><li>Help readers find your story by setting the tags and filters.</li><li>Go Live with your story. That\'s the green button at the top menu.</li><li>Write a description for your story.</li><li>Share the story on your social networks.</li></ul><p><div simple-angular-social-links="simple-angular-social-links" share-links="Twitter, Facebook, Tumblr" share-title="{{story.t}}" share-description="{{story.d}}"></div></p><p></p><p><div ng-click="dismissJustPublished()" class="btn dismiss">I got it. Dismiss this.</div></p></div></article></div></div><div class="page-head-only"><header class="page-title"><h1 ng-if="isAuthor" ng-model="story.t" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Enter a title&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: true, &quot;disableReturn&quot;: true}" class="isAuthor"></h1><h1 itemprop="name headline" ng-if="!isAuthor" set-html="story.t"></h1><h2 ng-if="isAuthor &amp;&amp; isRoute" data-hint="This is the route title, visible only to the author." class="isAuthor"><br/><span ng-model="route.t" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Route name&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: true, &quot;disableReturn&quot;: true}"></span></h2></header><header class="page-tags"><span ng-if="story.nt == \'story\' &amp;&amp; keyTags.length &gt; 0" itemprop="keywords genre" class="tags"><a ng-repeat="tag in keyTags track by $index" set-text="tag" set-href="\'/\'+(tag | url)" class="tag"></a></span></header><header class="page-author"><span ng-repeat="user in story.u" class="author"><a set-href="\'/user/\' + (user.n | encodeURIComponent)" class="inner"><span set-if="user.a" class="avatar"><img set-src="(user.a  | imageURLParser: 30:30)" class="avatar"/></span><span set-text="user.n" class="name"></span></a></span><span ng-repeat="user in story.u2" class="co-author"><a set-href="\'/user/\' + (user.n | encodeURIComponent)" class="inner"><span set-if="user.a" class="avatar"><img set-src="(user.a  | imageURLParser: 30:30)" class="avatar"/></span><span set-text="user.n" class="name"></span></a></span></header><header ng-if="nextLiveSeconds() &amp;&amp; !story.isLive" class="next-live"><a set-data-hint="\'The creator will be present and posting at: \' + (story.nextLive | formatTime)"><label>Live in:&nbsp; </label><endtimer endtime="story.nextLive" interval="1000"></endtimer></a></header><header ng-if="isAuthor &amp;&amp; isRoute" class="page-title"><a set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+ story._id+ \'/home\'" class="btn menu-item">Back to story home</a></header><div ng-class="mobileActive" class="storyImgContainer"><div ng-if="!story.i&amp;&amp;isAuthor" ng-click="setImage()" class="btn setImage"><i class="fa fa-image"></i><span>Set the cover image</span></div><img ng-if="!isAuthor &amp;&amp; story.i" itemprop="image" ng-src="{{story.i[0] | imageURLParser: 800:600:\'nocfill\'}}" set-alt="story.t" class="storyImg"/><img ng-if="isAuthor &amp;&amp; story.i" itemprop="image" ng-src="{{story.i[0] | imageURLParser: 800:600:\'nocfill\'}}" ng-click="setImage()" alt="Click to replace story image" class="storyImg isAuthor"/></div></div><nav id="storyProperties"><span data-hint="Story status" class="status hint--bottom"><span ng-if="story.storyStatus == \'hiatus\'">On hiatus</span><span ng-if="story.storyStatus &amp;&amp; story.storyStatus != \'hiatus\'" set-text="story.storyStatus" ng-class="{active: story.storyStatus == \'active\'}"></span><span ng-if="!story.storyStatus" class="active">Active</span></span><span data-hint="Story age rating" class="rating hint--bottom"><span ng-if="story.contentRating == \'nsfw\'">NSFW</span><span ng-if="story.contentRating == \'mature\'">Mature</span><span ng-if="story.contentRating == \'teen\' || !story.contentRating">Teen</span></span><span class="rating"><span ng-if="story.rInput == \'none\'" data-hint="Readers cannot influence what is written. Traditional books, movies, or visual novels fall in this category." class="hint--bottom">No reader input</span><span ng-if="story.rInput == \'light\'" data-hint="Readers occasionally influence the story in limited ways. Readers can control only a couple of elements, for example, the actions of a main character, who can move about in a setting and storyline determined by the writer." class="hint--bottom">Light reader input</span><span ng-if="story.rInput == \'medium\'" data-hint="Readers control multiple elements of a story. They can control multiple characters, the backstories of characters, elements of the setting, and occasionally add new characters." class="hint--bottom">Medium reader input</span><span ng-if="story.rInput == \'heavy\'" data-hint="Readers have heavy influence on the story. Readers frequently contribute elements of characters, plot, events, setting, etc. Heavy use of write-ins. Not recommended." class="hint--bottom">Heavy reader input</span></span><span set-text="readingTime()" data-hint="{{::story.w}} words" class="rating hint--bottom"></span><span ng-if="story.nt == \'story\' &amp;&amp; tags().length &gt; 0" itemprop="keywords genre" class="tags"><a ng-repeat="tag in tags() track by $index" set-text="tag + \' \'" set-href="\'/\'+(tag | url)" class="tag"></a><a ng-if="story.spoilerTags &amp;&amp; story.spoilerTags.length &gt; 0" ng-click="showSpoilersTags()" ng-show="!spoilersTagsVisible" class="tag more">show spoiler tags</a><a ng-show="spoilersTagsVisible" ng-repeat="tag in story.spoilerTags track by $index" set-text="tag + \' \'" set-href="\'/\'+(tag | url)" class="tag"></a></span></nav><article ng-if="!isChapter" class="chapter"><p itemprop="description" ng-if="!isAuthor" bind-html-unsafe="story.d" class="lead"></p><p ng-if="isAuthor" ng-model="story.d" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Write a short, 1 sentence subheading.&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: true, &quot;disableReturn&quot;: true}" class="lead isAuthor"></p><article ng-if="isAuthor &amp;&amp; !story.init" ng-model="story.b" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Write a longer blurb to sell the story to readers. What makes this story interesting or unique? Consider mentioning: accolades, inspirations, exciting moments, interesting characters, or your target audience. (2 paragraphs)&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: false, &quot;disableReturn&quot;: false}" class="marketing isAuthor"></article><hr ng-if="isAuthor"/></article><div id="page-body" class="page-body"><div ng-if="isRoute" id="routeDescription"><p ng-if="isAuthor" ng-model="route.d" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Optional route description. This appears on save files and route charts.&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: true, &quot;disableReturn&quot;: true}" class="lead"></p><p ng-if="!isAuthor" class="lead notAuthor">{{route.d}}</p></div><aside ng-if="!isAuthor&amp;&amp;!isChapter" class="information metaDetails"><div ng-if="story.b" class="row storyb"><div bind-html-unsafe="story.b" class="fieldBody"></div></div><div ng-if="review" class="row reviewsContainer"><div class="reviewsList"><h3><a set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+story._id+\'/reviews\'" ng-if="story.nt == \'story\'">Reviews</a></h3><div><div class="review"><table><tr><td set-if="review.u[0].a" class="avatar"><a set-if="review.u[0].n" set-href="\'/user/\' + (review.u[0].n | url)" class="authorPane"> <img set-if="review.u[0].a" set-src="(review.u[0].a | imageURLParser: 60:60)"/></a></td><td class="ratingTD"><div class="rating"><rating value="review.score" max="5" readonly="true"></rating></div><div class="writtenBy"><span>by </span><a ng-if="review.u[0].n" ng-href="/user/{{:: review.u[0].n | url}}" set-text="review.u[0].n" class="name"></a><span ng-if="!review.u[0].n" class="name">Anon</span><span class="created">{{:: review.ct | timeago}}</span></div></td></tr><tr><td colspan="2"><div class="spoilerFree"><div ng-bind-html="review.b" class="fieldBody"></div></div><div ng-if="review.spoiler" class="spoilers"><a ng-click="spoilers = true" ng-hide="spoilers">Show spoilers</a><div ng-if="spoilers" ng-bind-html="review.spoiler" class="fieldBody"></div></div><footer><span class="likeLink"><span like-button="review"></span></span></footer></td></tr></table></div></div></div></div></aside><article ng-if="chapterTitle" class="chapter chapterTitle"><h2 set-text="specialBookmarkTitle(chapterTitle)"></h2></article><div ng-if="!listLoaded" class="loading-indicator"><i class="fa fa-spinner fa-spin"></i></div><div id="storyPosts" jade-repeat="anonkun/story/chapterList" jade-repeat-data="chapters" jade-repeat-item="chat/chapterListItem" jade-login-reload="jade-login-reload" jade-compile="jade-compile" post-render="chapterRender"></div><a ng-if="nextChapter" href="{{nextChapter.href}}" class="nextChapter">Next: {{nextChapter.title}} →</a><a ng-if="isRoute" ui-sref="^" class="nextChapter">Back to home</a><footer ng-if="isAuthor" class="post"><div class="tabbable"><ul class="nav btn-set"><li class="active"><a data-target="#chapter-tab" data-toggle="tab">Add Chapter</a></li><li><a data-target="#choices-tab" data-toggle="tab">Add Reader Choice</a></li></ul><div class="tab-content"><div id="chapter-tab" ng-controller="chapterTab" class="postType tab-pane active"><article><div medium-editor="medium-editor" ng-model="chapterTabCache" options="{&quot;placeholder&quot;: &quot;Tell your story&quot;}" set-html="cached" editor-events="false" class="fieldBody fieldEditor"></div></article><button ng-click="post($event)" class="btn pull-right post-chapter huge">Post Chapter</button></div><div id="choices-tab" ng-controller="choicesTab" class="tab-pane"><p class="help-block">Here you can add a poll to let your readers vote on the direction of the story. You can include preset options or let readers post their own ideas.</p><div class="choicesInterface"><div ng-hide="poll.disallowVote" form-multiple-simple="form-multiple-simple" class="form-multiple"><div class="form-multiple-item input-prepend"><input type="text" placeholder="Type in a choice" class="span4 choiceItem"/></div></div><label ng-hide="poll.disallowVote" class="checkbox"><input ng-model="poll.custom" type="checkbox" checked="checked" class="custom"/>Allow custom write-ins</label><label ng-hide="poll.disallowVote" class="checkbox"><input ng-model="poll.multiple" type="checkbox" checked="checked" class="multiple"/>Allow multiple selections</label><label class="checkbox"><input ng-model="poll.disallowVote" type="checkbox" checked="checked" class="disallowVote"/>No voting. Make your readers to submit new write-ins directly into the story.</label><button ng-show="poll.disallowVote" ng-click="post($event)" class="btn pull-right post-readerPost">Add Reader response</button><button ng-hide="poll.disallowVote" ng-click="post($event)" class="btn pull-right post-choices huge">Add Poll</button></div></div></div></div></footer></div><aside class="recommendations"></aside><footer id="storyEnd" ng-if="!isAuthor"><div class="column authorInformation"><header ng-if="nextLiveSeconds() &amp;&amp; !story.isLive" class="next-live"><a set-data-hint="\'The creator will be present and posting at: \' + (story.nextLive | formatTime)"><label>Live in:&nbsp; </label><endtimer endtime="story.nextLive" interval="1000"></endtimer></a></header><header class="page-author"><span ng-repeat="user in story.u" class="author"><a set-href="\'/user/\' + (user.n | encodeURIComponent)" class="inner"><span set-if="user.a" class="avatar"><img set-src="(user.a  | imageURLParser: 30:30)" class="avatar"/></span><span set-text="user.n" class="name"></span></a></span><span ng-repeat="user in story.u2" class="co-author"><a set-href="\'/user/\' + (user.n | encodeURIComponent)" class="inner"><span set-if="user.a" class="avatar"><img set-src="(user.a  | imageURLParser: 30:30)" class="avatar"/></span><span set-text="user.n" class="name"></span></a></span></header><article class="buttons"><div like-button="story" read-only="isAuthor" class="like"></div><a ng-if="!following" ng-click="followUser()" class="btn notifications red"><i class="fa-star-o fa"></i><span>Follow</span></a><a ng-click="followUser(\'unfollow\')" ng-if="following" class="btn notifications active"><i class="fa-star fa"></i><span>Following</span></a><a ng-click="openCollections()" class="btn addToCollection"><i class="fa fa-heart-o"></i><span>Add to Collection</span></a><a id="reviewLink" active-link="active-link" set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+story._id+\'/reviews\'" class="btn"> <span><i class="fa-pencil fa"></i><span>Write a Review</span></span></a></article></div><div ng-if="liveStories &amp;&amp; liveStories.length &gt; 0" class="column liveStories storiesList"><header><h3>Live Stories</h3></header><article><a ng-repeat="story in liveStories | storiesNotSelf | orderBy: &quot;-ut&quot;" set-href="\'/\'+(story.r[0] | default: \'stories\')+\'/\'+(story.t | url)+\'/\'+story._id" set-class="{nsfwCover: story.nsfwCover}" class="storyItem storyListItem"><div class="imgContainer"><img set-src="story.i[0] | imageURLParser: 320:180 | default: &quot;//placekitten.com/g/320/180&quot;" set-alt="story.t"/></div><aside><div class="container"><div set-html="story.t" class="title"></div><div set-html="story.d" class="description"></div></div></aside></a></article></div></footer></article><div id="right" ng-class="mobileActive" class="fixedSide container max-height no-overflow"><div id="sidebar-resizer" resizer="vertical" resizer-width="6" resizer-left="#content" resizer-right="#right" resizer-max="200" resizer-min="200"></div><div id="threads"><h3 class="header">Topics</h3><div threads="{{currentChatID}}" current-thread-list-href="{{currentThreadListHref}}" no-pager="no-pager" thread-max="20" class="threads"></div></div><div id="mainChat"><h3 class="header">Chat</h3><div chat="{{currentChatID}}" scroll-lock="scroll-lock" before-post="beforePost" class="chat"></div></div></div><nav id="mainMenuReplacement" ng-class="mobileActive" class="navbar navbar-default navbar-fixed-top"><ul class="nav navbar-nav"><li class="storyMenu dropdown-main"><a><div class="btn"><span>Menu </span><i class="fa fa-sort-desc icon"></i></div></a><div class="dropdown-menu"><ul class="inner"><li ng-if="nextLiveSeconds() &amp;&amp; !story.isLive" class="next-live"><a set-data-hint="\'The creator will be present and posting at: \' + (story.nextLive | formatTime)"><label>Live in:&nbsp; </label><endtimer endtime="story.nextLive" interval="1000"></endtimer></a></li><li><a like-button="story" read-only="isAuthor" class="like"></a></li><li><a ng-click="nextLive()" ng-if="story.nt == \'story\' &amp;&amp; isAuthor" class="nextLive"> <i class="fa-clock-o fa"></i><span>Schedule next live</span></a></li><li><a id="reviewLink" active-link="active-link" set-href="\'/{{getBoard()}}/\' + (story.t | url) + \'/\' +story._id + \'/reviews\' "> <i class="fa-pencil-square-o fa"></i><span>Reviews</span></a></li><li ng-if="story.multiRoute"><a set-href="\'/{{getBoard()}}/\' + (story.t | url) + \'/\' +story._id + \'/routes\' "><i class="fa-code-fork fa"></i><span>Routes</span></a></li><li><a ng-click="openCollections()" class="addToCollection"><i class="fa fa-heart-o"></i><span>Add to Collection</span></a></li><li ng-if="!isAuthor &amp;&amp; following" class="unfollow"><a ng-click="followUser(\'unfollow\')" ng-if="following" data-hint="Unfollow this writer." class="hint--bottom">               <i class="fa-star fa"></i><span>Following</span></a></li><li set-if="story.achievements.achievements || isAuthor"><a set-href="\'/{{getBoard()}}/\' + (story.t | url) + \'/\' +story._id + \'/achievements\' "><i class="fa-bolt fa"></i><span>Achievements</span></a></li><li set-if="isAuthor"><a set-href="\'/{{getBoard()}}/\' + (story.t | url) + \'/\' +story._id + \'/bans\' "><i class="fa fa-ban"></i><span>Bans</span></a></li><li ng-click="editStory()" set-if="isAuthor"><a class="editStory"><i class="fa-gear fa"></i><span>Story Settings</span></a></li><li ng-click="editStoryFilters()" set-if="isAuthor"><a class="editStory">             <i class="fa-tags fa"></i><span>Edit Tags</span></a></li><li class="section header sizingControlsHeader"><label>Reading Settings</label></li><li class="section row sizingControls"><a ng-click="changePureReading()" data-hint="Hide all buttons and controls in the story. &#10; Show only the content of the story. &#10;Click for a pure reading experience." class="item"><i class="fa fa-eye"><span></span></i></a><a ng-click="changeAllowWidth()" data-hint="Change text width" class="item hint--bottom"><i class="fa fa-text-width"><span></span></i></a><a ng-click="decFontSize()" data-hint="Decrease font size" class="item hint--bottom"><i class="fa fa-font"><span>-</span></i></a><a ng-click="incFontSize()" data-hint="Increase font size" class="item hint--bottom"><i class="fa fa-font"><span>+</span></i></a></li><li class="section header themeControlsHeader"><label>Theme & Layout</label></li><li class="section row themeControls"><a ng-click="changeTheme()" data-hint="Use Dark or Light theme" class="item hint--bottom"><i class="fa fa-lightbulb-o"><span></span></i></a><a ng-click="minimizeTopics()" data-hint="Minimize topics" class="item hint--bottom"><i class="fa fa-comments"><span></span></i></a><a ng-click="changeLeftVisibility()" data-hint="Hide the left sidebar" class="item hint--bottom"><i class="fa fa-angle-left"><span></span></i></a><a ng-click="changeRightVisibility()" data-hint="Hide the right sidebar" class="item hint--bottom"><i class="fa fa-angle-right"><span></span></i></a></li><li class="section header mobileControlsHeader"><label>Theme & Layout</label></li><li class="section row mobileControls"><a ng-click="changePureReading()" data-hint="Hide all buttons and controls in the story. &#10; Show only the content of the story. &#10;Click for a pure reading experience." class="item pureReading"><i class="fa fa-eye"><span></span></i></a><a ng-click="changeTheme()" data-hint="Use Dark or Light theme" class="item hint--bottom"><i class="fa fa-lightbulb-o"><span></span></i></a></li></ul></div></li><li ng-if="isAuthor &amp;&amp; !story.init &amp;&amp; !story.isLive"><a id="nav-live"><div data-hint="Send this story to the Live page. Notify all your followers that you are posting. If you do not intend to stay a while and interact with your readers, click go offline right away after." class="goLive hint--bottom"><div ng-click="goLive()" class="btn green"><i class="fa fa-bullhorn"></i><span>Go Live</span></div></div><div class="popup"><div ng-show="goingLive" class="liveNotification"><div class="text"><div class="help-text">Notifications are going out to your followers</div><h3 class="sendingTo"><span>Sending to {{goingLive}} followers ...</span></h3></div><div class="progressBar"><div class="bar"></div></div></div></div></a></li><li ng-if="isAuthor &amp;&amp; story.isLive"><a><div ng-click="goOffline()" data-hint="Turn off Live. Let your readers know that you\'re not writing presently." class="btn red active live hint--bottom">Turn off live</div></a></li><li ng-if="!isAuthor &amp;&amp; story.isLive"><a><div data-hint="This story is live! The creator is present and posting." class="btn red active live hint--bottom noClick">Live</div></a></li><li ng-if="!isAuthor &amp;&amp; !following &amp;&amp; !isAnon()" class="follow"><a><span ng-click="followUser()" ng-if="!following" data-hint="Follow this writer. Get this writer\'s stories in your subscriptions box." class="btn notifications red hint--bottom"><i class="fa-star-o fa"></i><span>Follow</span></span></a></li><li id="nav-saves" ng-if="story.multiRoute &amp;&amp; saves" ng-click="expandTOC($event)"><a data-hint="You can load your save files to get back to where you were previously." class="current hint--bottom">Load Saves</a><ul class="contentsInner"><h5 class="nav-header">Your Save Files</h5><li ng-repeat="save in saves | orderBy: &quot;-ct&quot;"><a href="/{{getBoard()}}/{{story.t | url}}/{{story._id}}/routes/{{save.route}}?routeChapter={{save.chapter}}&amp;save={{save.ct}}"><div set-text="save.d" class="description"></div><div set-text="save.ct | formatTime" class="time"></div></a></li></ul></li><li id="nav-tableOfContents" ng-if="story.bm || story.multiRoute" ng-click="expandTOC($event)" ng-init="currentChapter()"><a class="current"><span>{{currentChapter() || "Table of Contents"}} </span><i class="fa fa-sort-desc icon"></i></a><progressbar value="currentChapterPercent"></progressbar><div class="contentsInner"><h5 class="nav-header">Table of Contents</h5><a ng-if="story.bm &amp;&amp; story.bm[0] &amp;&amp; story.bm[0].isFirst" active-link="active-link" href="/{{getBoard()}}/{{story.t | url}}/{{story._id}}/home">{{story.bm[0].title}}</a><a ng-hide="story.bm &amp;&amp; story.bm[0] &amp;&amp; story.bm[0].isFirst" active-link="active-link" href="/{{getBoard()}}/{{story.t | url}}/{{story._id}}/home">Home</a><a ng-if="story.bm" ng-repeat="bookmark in story.bm | filter:filterNotSpecialBookmark" active-link="active-link" href="/{{getBoard()}}/{{story.t | url}}/{{story._id}}/{{bookmark.title | url}}/{{bookmark.id}}">{{bookmark.title}}</a><div ng-if="specialBookmarks &amp;&amp; story.bm"><div class="divider"></div><h5 class="nav-header">Appendix</h5><a ng-repeat="bookmark in story.bm | filter:filterSpecial" active-link="active-link" href="/{{getBoard()}}/{{story.t | url}}/{{story._id}}/{{specialBookmarkTitle(bookmark.title) | url}}/{{bookmark.id}}" set-text="bookmark.title.replace(\'#special\', \'\').trim()"></a></div><div ng-if="story.multiRoute"><div class="divider"></div><h5 class="nav-header">MultiRoutes</h5><a active-link="active-link" href="/{{getBoard()}}/{{story.t | url}}/{{story._id}}/routesList">Routes List</a><a active-link="active-link" href="/{{getBoard()}}/{{story.t | url}}/{{story._id}}/routes">Routes Map</a></div></div></li><li set-if="story.achievements.achievements" class="achievements"><a set-href="\'/{{getBoard()}}/\' + (story.t | url) + \'/\' +story._id + \'/achievements\' " data-hint="You have unlocked {{userAchievements.my}} out of {{userAchievements.total}} achievements" class="hint--bottom"><i class="fa fa-bolt"></i><span>{{userAchievements.my}} / {{userAchievements.total}}</span></a></li><li simple-angular-social-links="simple-angular-social-links" share-links="Twitter, Facebook, Tumblr" share-title="{{story.t}}" share-description="{{story.d}}" class="share"></li></ul></nav></div>'
                ),
                t.put(
                    "/tmpl/anonkun/simpleTags",
                    '<div class="tags"><span class="help-block">Set the tags that describe this story. Type in your tag, then press enter on your keyboard.</span><input type="text" ng-model="selected" placeholder="Type tags and enter" class="fieldTags"/></div>'
                ),
                t.put(
                    "/tmpl/anonkun/tagsFilter",
                    '<div id="filterSettings"><span class="help-block">Populate your board by setting the tags that you want to include on your board.</span><input type="text" ng-model="selected" typeahead="tag for tag in suggestedTags | filter:$viewValue" typeahead-on-select="onSelect()" placeholder="Type tags and enter" class="fieldTags filter"/></div>'
                ),
                t.put(
                    "/tmpl/anonkun/terms",
                    '<div id="terms"><section class="row-fluid"><h1>Terms of Service</h1><div class="content fieldBody"><p>Welcome to Fiction.live! Fiction.live ("Fiction.live", "our", "us" or "we") provides Fiction.live, an online service that allows users to create, read and share stories (the "Services") through our website, accessible at fiction.live (the "Site"), and our application for mobile devices (the "Application").</p><p>Please read carefully the following terms and conditions ("Terms") and our Privacy Policy, which may be found at http://fiction.live/about/privacy. These Terms govern your access to and use of the Site, Application and Services and all Site Content (defined below), and constitute a binding legal agreement between you and Fiction.live.</p><h2>Key Terms related to Content</h2><p>"Content" means text, graphics, images, music, software, audio, video, information or other materials.</p><p>"Fiction.live Content" means all Content that Fiction.live makes available through the Site, Application or Service, including any Content licensed from a third party, but excluding Member Content.</p><p>"Member" means a person that completes Fiction.live’s account registration process, as described under "Account Registration" below.</p><p>"Member Content" means all Content that a Member posts, uploads, publishes, submits or transmits to be made available through the Site, Application or Services.</p><p>"Site Content" means Member Content and Fiction.live Content.</p><p>Certain areas of the Site and Application (and your access to or use of certain Services or Site Content) may have different terms and conditions posted or may require you to agree with and accept additional terms and conditions. If there is a conflict between these Terms and terms and conditions posted for a specific area of the Site, Application, Services, Site Content, the latter terms and conditions will take precedence with respect to your use of or access to that area of the Site, Application, Services or Site Content.</p><p>YOU ACKNOWLEDGE AND AGREE THAT, BY ACCESSING OR USING THE SITE, APPLICATION OR SERVICES OR BY POSTING ANY MEMBER CONTENT ON THE SITE, APPLICATION OR THROUGH THE SERVICES, YOU ARE INDICATING THAT YOU HAVE READ, UNDERSTAND AND AGREE TO BE BOUND BY THESE TERMS, WHETHER OR NOT YOU HAVE REGISTERED WITH THE SITE AND APPLICATION. IF YOU DO NOT AGREE TO THESE TERMS, THEN YOU HAVE NO RIGHT TO ACCESS OR USE THE SITE, APPLICATION, SERVICES OR SITE CONTENT. If you accept or agree to these Terms on behalf of a company or other legal entity, you represent and warrant that you have the authority to bind that company or other legal entity to these Terms and, in such event, "you" and "your" will refer and apply to that company or other legal entity.</p><h2>Modification</h2><p>Fiction.live reserves the right, at its sole discretion, to modify, discontinue or terminate the Site, Application or Services or to modify these Terms, at any time and without prior notice. By continuing to access or use the Site, Application or Services after we have posted a modification on the Site or via the Application or have provided you with notice of a modification, you are indicating that you agree to be bound by the modified Terms. If the modified Terms are not acceptable to you, your only recourse is to cease using the Site, Application and the Services.</p><h2>Eligibility</h2><p>The Site, Application and Services are intended solely for persons who are 13 or older. Any access to or use of the Site, Application or Services by anyone under 13 is expressly prohibited. By accessing or using the Site, Application or Services you represent and warrant that you are 13 or older.</p><h2>Account Registration</h2><p>In order to access certain features of the Site, Application and Services and to post any Member Content on the Site, Application or through the Services, you must register to create an account ("Account"). You agree to provide accurate, current and complete information during the registration process and to update such information to keep it accurate, current and complete. Fiction.live reserves the right to suspend or terminate your Account if any information provided during the registration process or thereafter proves to be inaccurate, not current or incomplete. You are responsible for safeguarding your password. You agree not to disclose your password to any third party and to take sole responsibility for any activities or actions under your Account, whether or not you have authorized such activities or actions. You will immediately notify Fiction.live of any unauthorized use of your Account.</p><h2>Privacy</h2><p>See our Privacy Policy at http://fiction.live/about/privacy for information and notices concerning Fiction.live’s collection and use of your personal information.</p><h2>Ownership</h2><p>The Site, Application, Services and Site Content are protected by copyright, trademark, and other laws of the United States and foreign countries. Except as expressly provided in these Terms, Fiction.live and its licensors exclusively own all right, title and interest in and to the Site, Application, Services and Site Content, including all associated intellectual property rights. You will not remove, alter or obscure any copyright, trademark, service mark or other proprietary rights notices incorporated in or accompanying the Site, Application, Services or Site Content.</p><h2>No Ownership Rights in Account.</h2><p>NOTWITHSTANDING ANYTHING TO THE CONTRARY HEREIN, YOU ACKNOWLEDGE AND AGREE THAT YOU SHALL HAVE NO OWNERSHIP OR OTHER PROPERTY INTEREST IN ANY ACCOUNT STORED OR HOSTED ON A Fiction.live SYSTEM AND YOU FURTHER ACKNOWLEDGE AND AGREE THAT ALL RIGHTS IN AND TO SUCH ACCOUNTS ARE AND SHALL FOREVER BE OWNED BY AND INURE TO THE BENEFIT OF Fiction.live.</p><h2>Application License</h2><p>If you decide to use the Application, subject to your compliance with the terms and conditions of these Terms, Fiction.live grants you a limited non-exclusive, non-transferable, revocable license, without the right to sublicense, for you to install, access and use such Application on a mobile device that you own or control, solely for your personal and non-commercial purposes. Fiction.live reserves all rights in the Application not expressly granted to you by these Terms.</p><h2>Fiction.live Content and Member Content License</h2><p>Subject to your compliance with the terms and conditions of these Terms, Fiction.live grants you a limited, non-exclusive, non-transferable license, without the right to sublicense, to access, view, download and print any Fiction.live Content solely for your personal and non-commercial purposes. Subject to your compliance with the terms and conditions of these Terms, Fiction.live grants you a limited, non-exclusive, non-transferable license, without the right to sublicense, to access and view any Member Content solely for your personal and internal business purposes. You will not use, copy, adapt, modify, prepare derivative works based upon, distribute, license, sell, transfer, publicly display, publicly perform, transmit, stream, broadcast or otherwise exploit the Site, Application, Services, or Site Content except as expressly permitted in these Terms. No licenses or rights are granted to you by implication or otherwise under any intellectual property rights owned or controlled by Fiction.live or its licensors, except for the licenses and rights expressly granted in these Terms.</p><h2>Member Content</h2><p>We may, in our sole discretion, permit Members to post, upload, publish, submit or transmit Member Content. By making available any Member Content through the Site, Application or Services, you hereby grant to Fiction.live a worldwide, irrevocable, perpetual, non-exclusive, transferable, royalty-free license, with the right to sublicense, to use, copy, adapt, modify, distribute, license, sell, transfer, publicly display, publicly perform, transmit, stream, broadcast, access, view, and otherwise exploit such Member Content only on, through or by means of the Site, Application or Services. Fiction.live does not claim any ownership rights in any such Member Content and nothing in these Terms will be deemed to restrict any rights that you may have to use and exploit any such Member Content.</p><p>You acknowledge and agree that you are solely responsible for all Member Content that you make available through the Site, Application and Services. Accordingly, you represent and warrant that: (i) you either are the sole and exclusive owner of all Member Content that you make available through the Site, Application and Services or you have all rights, licenses, consents and releases that are necessary to grant to Fiction.live the rights in such Member Content, as contemplated under these Terms; and (ii) neither the Member Content nor your posting, uploading, publication, submission or transmittal of the Member Content or Fiction.live’ use of the Member Content (or any portion thereof) on, through or by means of the Site, Application and the Services will infringe, misappropriate or violate a third party’s patent, copyright, trademark, trade secret, moral rights or other proprietary or intellectual property rights, or rights of publicity or privacy, or result in the violation of any applicable law or regulation.</p><h2>General Prohibitions</h2><p>You agree not to do any of the following:</p><ul><li>Post, upload, publish, submit, provide access to or transmit any Content that: (i) infringes, misappropriates or violates a third party’s patent, copyright, trademark, trade secret, moral rights or other intellectual property rights, or rights of publicity or privacy; (ii) violates, or encourages any conduct that would violate, any applicable law or regulation or would give rise to civil liability; (iii) is fraudulent, false, misleading or deceptive; (iv) promotes discrimination, bigotry, racism, hatred, harassment or harm against any individual or group; (v) is violent or threatening or promotes violence or actions that are threatening to any other person; or (vi) promotes illegal or harmful activities or substances.</li><li>Access, tamper with, or use non-public areas of the Site or Application, our computer systems, or the technical delivery systems of our providers;</li><li>Attempt to probe, scan, or test the vulnerability of any Fiction.live system or network or breach any security or authentication measures;</li><li>Avoid, bypass, remove, deactivate, impair, descramble or otherwise circumvent any technological measure implemented by Fiction.live or any of our providers or any other third party (including another user) to protect the Site, Application or Site Content;</li><li>Send any unsolicited or unauthorized advertising, promotional materials, email, junk mail, spam, chain letters or other form of solicitation;</li><li>Use any meta tags or other hidden text or metadata utilizing a Fiction.live or Fiction.live trademark, logo URL or product name without Fiction.live’ express written consent;</li><li>Attempt to decipher, decompile, disassemble or reverse engineer any of the software used to provide the Site, Application or Site Content.</li><li>Interfere with, or attempt to interfere with, the access of any user, host or network, including, without limitation, sending a virus, overloading, flooding, spamming, or mail-bombing the Site or Application;</li><li>Collect or store any personally identifiable information from the Site or Application from other users of the Site or Application without their express permission;</li><li>Impersonate or misrepresent your affiliation with any person or entity;</li><li>Violate any applicable law or regulation; or</li><li>Encourage or enable any other individual to do any of the foregoing.</li><li>Fiction.live will have the right to investigate and prosecute violations of any of the above to the fullest extent of the law. Fiction.live may involve and cooperate with law enforcement authorities in prosecuting users who violate these Terms. You acknowledge that Fiction.live has no obligation to monitor your access to or use of the Site, Application, Services or Site Content or to review or edit any Site Content, but has the right to do so for the purpose of operating the Site, Application and Services, to ensure your compliance with these Terms, or to comply with applicable law or the order or requirement of a court, administrative agency or other governmental body. Fiction.live reserves the right, at any time and without prior notice, to remove or disable access to any Site Content that Fiction.live, at its sole discretion, considers to be objectionable for any reason, in violation of these Terms or otherwise harmful to the Site, Application or Services.</li></ul><h2>Copyright Policy</h2><p>Fiction.live copyright law and expects its users to do the same. Fiction.live has adopted and implemented a policy that provides for the termination in appropriate circumstances of registered users or other account holders who repeatedly infringe or are believed to be repeatedly infringing the rights of copyright holders. Please see Fiction.live’s Copyright Policy at http://fiction.live/about/copyright, for further information.</p><h2>Links</h2><p>The Site and Application may contain links to third-party websites or resources. You acknowledge and agree that Fiction.live is not responsible or liable for: (i) the availability or accuracy of such websites or resources; or (ii) the content, products, or services on or available from such websites or resources. Links to such websites or resources do not imply any endorsement by Fiction.live of such websites or resources or the content, products, or services available from such websites or resources. You acknowledge sole responsibility for and assume all risk arising from your use of any such websites or resources.</p><h2>Termination</h2><p>Fiction.live MAY SUSPEND, TERMINATE, MODIFY, OR DELETE ANY ACCOUNT AT ANY TIME FOR ANY REASON OR FOR NO REASON, WITH OR WITHOUT NOTICE TO YOU.</p><h2>Disclaimers</h2><p>THE SITE, APPLICATION, SERVICES AND SITE CONTENT ARE PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED. WITHOUT LIMITING THE FOREGOING, Fiction.live EXPLICITLY DISCLAIMS ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT, AND ANY WARRANTIES ARISING OUT OF COURSE OF DEALING OR USAGE OF TRADE. Fiction.live MAKES NO WARRANTY THAT THE SITE, APPLICATION, SERVICES OR SITE CONTENT WILL MEET YOUR REQUIREMENTS OR BE AVAILABLE ON AN UNINTERRUPTED, SECURE, OR ERROR-FREE BASIS. Fiction.live MAKES NO WARRANTY REGARDING THE QUALITY OF ANY PRODUCTS, SERVICE OR SITE CONTENT OBTAINED THROUGH THE SITE, APPLICATION OR SERVICES OR THE ACCURACY, TIMELINESS, TRUTHFULNESS, COMPLETENESS OR RELIABILITY OF ANY SITE CONTENT OBTAINED THROUGH THE SITE, APPLICATION OR SERVICES.</p><p>ADVICE OR INFORMATION, WHETHER ORAL OR WRITTEN, OBTAINED FROM Fiction.live OR THROUGH THE SITE, SERVICES, CONTENT OR MEMBER CONTENT, WILL CREATE ANY WARRANTY NOT EXPRESSLY MADE HEREIN.</p><p>YOU ARE SOLELY RESPONSIBLE FOR ALL OF YOUR COMMUNICATIONS AND INTERACTIONS WITH OTHER USERS OF THE SITE, APPLICATION OR SERVICES AND WITH OTHER PERSONS WITH WHOM YOU COMMUNICATE OR INTERACT AS A RESULT OF YOUR USE OF THE SITE, APPLICATION OR SERVICES. YOU UNDERSTAND THAT Fiction.live DOES NOT SCREEN OR INQUIRE INTO THE BACKGROUND OF ANY USERS OF THE SITE, APPLICATION OR SERVICES, NOR DOES Fiction.live MAKE ANY ATTEMPT TO VERIFY THE STATEMENTS OF USERS OF THE SITE, APPLICATION OR SERVICES. Fiction.live MAKES NO REPRESENTATIONS OR WARRANTIES AS TO THE CONDUCT OF USERS OF THE SITE, APPLICATION, OR SERVICES OR THEIR COMPATIBILITY WITH ANY CURRENT OR FUTURE USERS OF THE SITE, APPLICATION OR SERVICES. YOU AGREE TO TAKE REASONABLE PRECAUTIONS IN ALL COMMUNICATIONS AND INTERACTIONS WITH OTHER USERS OF THE SITE, APPLICATION OR SERVICES AND WITH OTHER PERSONS WITH WHOM YOU COMMUNICATE OR INTERACT AS A RESULT OF YOUR USE OF THE SITE, APPLICATION OR SERVICES, PARTICULARLY IF YOU DECIDE TO MEET OFFLINE OR IN PERSON.</p><h2>Indemnity</h2><p>You agree to defend, indemnify, and hold Fiction.live, its officers, directors, employees and agents, harmless from and against any claims, liabilities, damages, losses, and expenses, including, without limitation, reasonable legal and accounting fees, arising out of or in any way connected with (i) your access to or use of the Site, Application, Services or Site Content, (ii) your Member Content, or (iii) your violation of these Terms.</p><h2>Limitation of Liability</h2><p>YOU ACKNOWLEDGE AND AGREE THAT, TO THE MAXIMUM EXTENT PERMITTED BY LAW, THE ENTIRE RISK ARISING OUT OF YOUR ACCESS TO AND USE OF THE SITE, APPLICATION, SERVICES AND SITE CONTENT REMAINS WITH YOU. NEITHER Fiction.live NOR ANY OTHER PARTY INVOLVED IN CREATING, PRODUCING, OR DELIVERING THE SITE, APPLICATION, SERVICES OR CONTENT WILL BE LIABLE FOR ANY INCIDENTAL, SPECIAL, EXEMPLARY OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS, LOSS OF DATA OR LOSS OF GOODWILL, SERVICE INTERRUPTION, COMPUTER DAMAGE OR SYSTEM FAILURE OR THE COST OF SUBSTITUTE PRODUCTS OR SERVICES, OR FOR ANY DAMAGES FOR PERSONAL OR BODILY INJURY OR EMOTIONAL DISTRESS ARISING OUT OF OR IN CONNECTION WITH THESE TERMS OR FROM THE USE OF OR INABILITY TO USE THE SITE, APPLICATION, SERVICES, SITE CONTENT , OR FROM ANY COMMUNICATIONS, INTERACTIONS OR MEETINGS WITH OTHER USERS OF THE SITE, APPLICATION OR SERVICES OR OTHER PERSONS WITH WHOM YOU COMMUNICATE OR INTERACT AS A RESULT OF YOUR USE OF THE SITE, APPLICATION OR SERVICES, WHETHER BASED ON WARRANTY, CONTRACT, TORT (INCLUDING NEGLIGENCE), PRODUCT LIABILITY OR ANY OTHER LEGAL THEORY, AND WHETHER OR NOT Fiction.live HAS BEEN INFORMED OF THE POSSIBILITY OF SUCH DAMAGE, EVEN IF A LIMITED REMEDY SET FORTH HEREIN IS FOUND TO HAVE FAILED OF ITS ESSENTIAL PURPOSE.</p><p>IN NO EVENT WILL Fiction.live\'S AGGREGATE LIABILITY ARISING OUT OF OR IN CONNECTION WITH THESE TERMS OR FROM THE USE OF OR INABILITY TO USE THE SITE, APPLICATION, SERVICES OR SITE CONTENT EXCEED ONE HUNDRED DOLLARS ($100). THE LIMITATIONS OF DAMAGES SET FORTH ABOVE ARE FUNDAMENTAL ELEMENTS OF THE BASIS OF THE BARGAIN BETWEEN Fiction.live AND YOU. SOME JURISDICTIONS DO NOT ALLOW THE EXCLUSION OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES, SO THE ABOVE LIMITATION MAY NOT APPLY TO YOU.</p><h2>Proprietary Rights Notices</h2><p>All trademarks, service marks, logos, trade names and any other proprietary designations of Fiction.live used herein are trademarks or registered trademarks of Fiction.live. Any other trademarks, service marks, logos, trade names and any other proprietary designations are the trademarks or registered trademarks of their respective parties.</p><h2>Entire Agreement</h2><p>These Terms constitute the entire and exclusive understanding and agreement between Fiction.live and you regarding the Site, Application, Services, Site Content, and Member Content and these Terms supersede and replace any and all prior oral or written understandings or agreements between Fiction.live and you regarding the Site, Application, Services and Content.</p><h2>Assignment</h2><p>You may not assign or transfer these Terms, by operation of law or otherwise, without Fiction.live’ prior written consent. Any attempt by you to assign or transfer these Terms, without such consent, will be null and of no effect. Fiction.live may assign or transfer these Terms, at its sole discretion, without restriction. Subject to the foregoing, these Terms will bind and inure to the benefit of the parties, their successors and permitted assigns.</p><h2>Notices</h2><p>Any notices or other communications permitted or required hereunder, including those regarding modifications to these Terms, will be in writing and given by Fiction.live (i) via email (in each case to the address that you provide) or (ii) by posting to the Site or via the Application. For notices made by e-mail, the date of receipt will be deemed the date on which such notice is transmitted.</p><h2>General</h2><p>The failure of Fiction.live to enforce any right or provision of these Terms will not constitute a waiver of future enforcement of that right or provision. The waiver of any such right or provision will be effective only if in writing and signed by a duly authorized representative of Fiction.live. Except as expressly set forth in these Terms, the exercise by either party of any of its remedies under these Terms will be without prejudice to its other remedies under these Terms or otherwise. If for any reason a court of competent jurisdiction finds any provision of these Terms invalid or unenforceable, that provision will be enforced to the maximum extent permissible and the other provisions of these Terms will remain in full force and effect.</p><h2>Contacting Fiction.live</h2><p>If you have any questions about these Terms or any questions, complaints or claims with respect to the Application, please contact us at fiction.live@fiction.live</p></div></section></div>'
                ),
                t.put(
                    "/tmpl/anonkun/subscription",
                    '<div draggable-handle=".modal-header" draggable-content="parent" class="subscription"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3>Upgrade to Super Credit Card Details</h3></div><div class="modal-body"><form><div class="sr-payment-form payment-view"><div class="sr-form-row"><div class="sr-combo-inputs"><div class="sr-combo-inputs-row"><div id="card-element" class="sr-input sr-card-element"></div></div></div><div id="card-errors" role="alert" class="sr-field-error"></div></div><div class="sr-payment-summary hidden completed-view">Your subscription is <span class="order-status"></span></div><div class="modal-footer"><img src="https://cdn.fiction.live/h1200-w1200/images/1dv2oh0ho_powered_by_stripe.png"/><button id="submit" class="btn"><span id="button-text">Subscribe $4.99</span></button></div>\n\n\n</div></form>\n</div></div>'
                ),
                t.put("/tmpl/anonkun/users", ""),
                t.put(
                    "/tmpl/anonkun/collection/detail",
                    '<div page-title="collectionDetail.t+\' - Collection\'" class="collection nodeDetail"><meta-tags title="collectionDetail.t" image="collectionDetail.i[0]" description="collectionDetail.b" type="\'article\'" twitter-publisher-handle="\'@AnonQuest\'" section="collectionDetail.r[0]"></meta-tags><article class="page-head-body"><header class="title page-title"><h1 ng-if="isProfileUser()" ng-model="collectionDetail.t" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Enter a title&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: true, &quot;disableReturn&quot;: true}"></h1><h1 ng-if="!isProfileUser()" set-text="collectionDetail.t"></h1></header><div class="page-body"><article><div ng-if="isProfileUser()" ng-model="collectionDetail.b" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Enter your thoughts on this collection.&quot;, &quot;buttons&quot;: [&quot;bold&quot;, &quot;italic&quot;, &quot;underline&quot;, &quot;anchor&quot;, &quot;header1&quot;, &quot;header2&quot;, &quot;quote&quot;, &quot;unorderedlist&quot;]}" class="fieldBody"></div><div ng-if="!isProfileUser()" set-html="collectionDetail.b" class="fieldBody"></div></article><div ng-cloak="ng-cloak" class="storiesList listView-large"><div ng-repeat="story in collectionList" set-data-id="story._id"><li><div set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" set-class="{readHistory: checkReadHistory(story), nsfwCover: story.nsfwCover}" ng-controller="storyListItem" class="storyListItem listItemInner"><div ng-if="!listViewCompact" class="inner"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="column imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 320:180)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/g/320/180" alt=""/></a><div class="column information"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="content"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div><div set-text="story.d" class="description"></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div class="coverStatsContainer"><div ng-class="{users: actives}" set-data-hint="actives + \' current active viewers\'" class="stat hint--bottom"><i class="fa fa-user"></i><span>{{actives}}</span></div><a set-href="\'/user/\' + (story.u[0].n | encodeURIComponent)" set-if="story.u[0].n != \'Anon\'" set-data-hint="\'created by\'" class="stat user hint--bottom"><div class="authorPane"><img set-if="story.u[0].a" set-src="(story.u[0].a | imageURLParser: 16:16)"/><div set-text="story.u[0].n" class="name"></div></div></a><div set-if="story.p" set-data-hint="story.p + \' comments\'" class="stat hint--bottom"><i class="fa-comments-o fa"></i><span set-text="story.p | formatNumber"></span></div><div ng-if="story.likeCount" set-data-hint="story.likeCount + \' likes\'" class="stat hint--bottom"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div set-data-hint="story.w+ \' words\'" class="stat hint--bottom"><span set-text="readingTime()"></span></div></div></div></div></div><div ng-if="listViewCompact" class="inner listViewCompact"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 336:252)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/336/252" alt=""/></a><div class="user"><div class="authorPane"><div set-text="story.u[0].n" class="name"></div></div></div><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" ng-if="listViewCompact" class="information"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div ng-class="{users: actives}" class="stat"><i class="fa fa-user"></i><span>{{actives}}</span></div><div ng-if="story.p" class="stat"><i class="fa-comments-o fa"></i><span>{{:: story.p}}</span></div><div class="stat"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div class="stat"><i class="fa fa-font"></i><span set-text="readingTime()" data-hint="{{::story.w}} words"></span></div></div></div></div></li><p ng-if="isProfileUser()" ng-model="story.colcomment" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Enter your thoughts on the story&quot;, &quot;disableToolbar&quot;: true}"></p><p ng-if="!isProfileUser()" set-html="story.colcomment"></p></div></div></div><footer ng-if="isProfileUser()" class="post"><label class="checkbox"><input type="checkbox" ng-model="collectionDetail.promote" ng-change="editChanged()"/>Promote this collection on the collections page</label><label class="checkbox"><input type="checkbox" ng-model="collectionDetail.private" ng-change="editChanged()"/>Only you can see this collection</label></footer><footer ng-if="!isProfileUser()" class="post notAuthor"><span like-button="collectionDetail" class="like"></span></footer></article></div>'
                ),
                t.put("/tmpl/anonkun/board/all", '<div class="allBoards"><div class="page-header"><h1>All boards</h1></div><div jade-repeat="anonkun/board/boardListItem" jade-repeat-data="boards"></div></div>'),
                t.put(
                    "/tmpl/anonkun/board/board",
                    '<div id="board" class="storiesListContainer"><div ng-hide="expandedAbout" ng-class="mobileActive" class="board-main"><div ng-if="!threads" ng-cloak="ng-cloak" ng-class="{\'listView-large\': !listViewCompact, \'listView-grid\':listViewCompact }" class="storiesList"><header class="page-header"><h1 set-text="title"></h1><div class="right-menu header-menu"><form class="menu-item searchStories searchBox"><i class="fa-search fa icon"></i><input name="searchTerms" value="" ng-model="search.searchTerms" type="text" placeholder="Search" class="fieldText"/></form><div ng-click="openFilter()" ng-class="{\'active\': expandedFilter}" data-hint="Filter stories" class="btn menu-item filterButton hint--bottom"><i class="fa fa-filter"></i><span>Filter</span></div></div></header><div ng-if="expandedFilter" class="filtersBox"><div class="formItem"><label>Story Length</label><div class="btn-group"><label ng-model="boardFilter.length" btn-radio="\'Any\'" class="btn hint--bottom">Any</label><label ng-model="boardFilter.length" btn-radio="\'Short\'" data-hint="Less than 5000 words" class="btn hint--bottom">Short</label><label ng-model="boardFilter.length" btn-radio="\'Medium\'" data-hint="More than 5000 words" class="btn hint--bottom">Medium</label><label ng-model="boardFilter.length" btn-radio="\'Long\'" data-hint="More than 30000 words" class="btn hint--bottom">Long</label><label ng-model="boardFilter.length" btn-radio="\'Epic\'" data-hint="More than 100000+ words" class="btn hint--bottom">Epic</label></div></div><div class="formItem"><label>Status</label><div class="btn-group"><label ng-model="boardFilter.storyStatus.active" btn-checkbox="\'active\'" title="Active" uncheckable="uncheckable" class="btn">Active</label><label ng-model="boardFilter.storyStatus.finished" btn-checkbox="\'finished\'" title="finished" uncheckable="uncheckable" class="btn">Finished</label><label ng-model="boardFilter.storyStatus.hiatus" btn-checkbox="\'hiatus\'" title="Hiatus" uncheckable="uncheckable" class="btn">Hiatus</label></div></div><div class="formItem"><label>Content Rating</label><div class="btn-group"><label ng-model="boardFilter.contentRating.teen" btn-checkbox="\'teen\'" uncheckable="uncheckable" class="btn">Teen</label><label ng-model="boardFilter.contentRating.mature" btn-checkbox="\'mature\'" uncheckable="uncheckable" class="btn">Mature</label><label ng-model="boardFilter.contentRating.nsfw" btn-checkbox="\'nsfw\'" uncheckable="uncheckable" class="btn">NSFW</label></div></div><div class="formItem"><label>Sort</label><label class="btn-group"><a set-href="\'/\'+boardID" data-hint="Sort by the latest activity in the story, including chat posts" class="btn hint--bottom">Active</a><a set-href="\'/\'+boardID+\'/updated\'" ng-model="boardFilter.sort" btn-radio="\'Updated\'" data-hint="Sort by the latest posted chapter" class="btn hint--bottom">Updated Chapter</a><a set-href="\'/\'+boardID+\'/top\'" data-hint="Sort by the most commented stories" class="btn hint--bottom">Top Replies</a><a set-href="\'/\'+boardID+\'/like\'" data-hint="Sort by the most liked stories" class="btn hint--bottom">Top Likes</a><a set-href="\'/\'+boardID+\'/new\'" data-hint="Show the newest stories" class="btn hint--bottom">New</a></label></div><div set-if="!currentUser" class="formItem"><label>Sensitivity</label><div class="btn-group"><label ng-model="boardFilter.allContent" btn-checkbox="\'all\'" data-hint="Show all the content on anonkun, including the sensitive content that is filtered out by default." class="btn">All content</label></div></div></div><div ng-if="!listLoaded" class="loading-indicator"><i class="fa fa-spinner fa-spin"></i></div><li bindonce="story" ng-repeat="story in stories track by story._id"><div set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" set-class="{readHistory: checkReadHistory(story), nsfwCover: story.nsfwCover}" ng-controller="storyListItem" class="storyListItem listItemInner"><div ng-if="!listViewCompact" class="inner"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="column imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 320:180)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/g/320/180" alt=""/></a><div class="column information"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="content"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div><div set-text="story.d" class="description"></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div class="coverStatsContainer"><div ng-class="{users: actives}" set-data-hint="actives + \' current active viewers\'" class="stat hint--bottom"><i class="fa fa-user"></i><span>{{actives}}</span></div><a set-href="\'/user/\' + (story.u[0].n | encodeURIComponent)" set-if="story.u[0].n != \'Anon\'" set-data-hint="\'created by\'" class="stat user hint--bottom"><div class="authorPane"><img set-if="story.u[0].a" set-src="(story.u[0].a | imageURLParser: 16:16)"/><div set-text="story.u[0].n" class="name"></div></div></a><div set-if="story.p" set-data-hint="story.p + \' comments\'" class="stat hint--bottom"><i class="fa-comments-o fa"></i><span set-text="story.p | formatNumber"></span></div><div ng-if="story.likeCount" set-data-hint="story.likeCount + \' likes\'" class="stat hint--bottom"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div set-data-hint="story.w+ \' words\'" class="stat hint--bottom"><span set-text="readingTime()"></span></div></div></div></div></div><div ng-if="listViewCompact" class="inner listViewCompact"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 336:252)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/336/252" alt=""/></a><div class="user"><div class="authorPane"><div set-text="story.u[0].n" class="name"></div></div></div><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" ng-if="listViewCompact" class="information"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div ng-class="{users: actives}" class="stat"><i class="fa fa-user"></i><span>{{actives}}</span></div><div ng-if="story.p" class="stat"><i class="fa-comments-o fa"></i><span>{{:: story.p}}</span></div><div class="stat"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div class="stat"><i class="fa fa-font"></i><span set-text="readingTime()" data-hint="{{::story.w}} words"></span></div></div></div></div></li></div><div ng-if="title==\'live\'" ng-cloak="ng-cloak" ng-class="{\'listView-large\': !listViewCompact, \'listView-grid\':listViewCompact }" class="live upcomingStories storiesList"><div class="page-header"><h1>Upcoming Stories</h1></div><div ng-cloak="ng-cloak" ng-class="{\'listView-large\': !listViewCompact, \'listView-grid\':listViewCompact }" class="storiesList"><li ng-repeat="story in upcoming | orderBy: &quot;nextLive&quot;"><div set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" set-class="{readHistory: checkReadHistory(story), nsfwCover: story.nsfwCover}" ng-controller="storyListItem" class="storyListItem listItemInner"><div ng-if="!listViewCompact" class="inner"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="column imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 320:180)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/g/320/180" alt=""/></a><div class="column information"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="content"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div><div set-text="story.d" class="description"></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div class="coverStatsContainer"><div ng-class="{users: actives}" set-data-hint="actives + \' current active viewers\'" class="stat hint--bottom"><i class="fa fa-user"></i><span>{{actives}}</span></div><a set-href="\'/user/\' + (story.u[0].n | encodeURIComponent)" set-if="story.u[0].n != \'Anon\'" set-data-hint="\'created by\'" class="stat user hint--bottom"><div class="authorPane"><img set-if="story.u[0].a" set-src="(story.u[0].a | imageURLParser: 16:16)"/><div set-text="story.u[0].n" class="name"></div></div></a><div set-if="story.p" set-data-hint="story.p + \' comments\'" class="stat hint--bottom"><i class="fa-comments-o fa"></i><span set-text="story.p | formatNumber"></span></div><div ng-if="story.likeCount" set-data-hint="story.likeCount + \' likes\'" class="stat hint--bottom"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div set-data-hint="story.w+ \' words\'" class="stat hint--bottom"><span set-text="readingTime()"></span></div></div></div></div></div><div ng-if="listViewCompact" class="inner listViewCompact"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 336:252)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/336/252" alt=""/></a><div class="user"><div class="authorPane"><div set-text="story.u[0].n" class="name"></div></div></div><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" ng-if="listViewCompact" class="information"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div ng-class="{users: actives}" class="stat"><i class="fa fa-user"></i><span>{{actives}}</span></div><div ng-if="story.p" class="stat"><i class="fa-comments-o fa"></i><span>{{:: story.p}}</span></div><div class="stat"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div class="stat"><i class="fa fa-font"></i><span set-text="readingTime()" data-hint="{{::story.w}} words"></span></div></div></div></div></li></div></div></div><footer ng-if="title != \'live\' &amp;&amp; !expandedAbout &amp;&amp; !showSearchResults &amp;&amp; !threads" ng-class="mobileActive"><pagination rotate="true" total-items="numStories" page="currentPage" on-select-page="selectPage(page)" items-per-page="itemsPerPage" max-size="maxSize" boundary-links="false" class="stories-pagination"></pagination></footer><footer ng-if="showSearchResults &amp;&amp; stories.length == 0"><h1>Nothing found</h1></footer><div id="right" ng-class="mobileActive" class="fixedSide container max-height no-overflow"><div id="threads"><h3 class="header">Topics</h3><div threads="{{currentChatID}}" current-thread-list-href="{{currentThreadListHref}}" no-pager="no-pager" class="threads"></div><a ng-href="{{currentThreadListHref}}" class="fullListFooter"><div class="btn big">More topics</div></a></div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/board/create",
                    '<div class="createBoard"><header class="page-header"><h1>Create your own board</h1></header><form ng-submit="submit()" class="block light"><div class="formItem"><label for="name">Board name:</label><input name="t" required="required" value="" ng-model="board.t" type="text"/></div><div class="formItem"><label>Tags:</label><div tags-filter="tags-filter" class="tagsFilter"></div></div><div ng-show="error" class="formItem">{{error}}</div><div class="formFooter"><input type="submit" value="Create Board" class="primary btn"/></div></form><div class="preview"><header class="page-header"><h2>Preview <small>this is what your board would look like based on the tags you chose</small></h2></header><div ng-cloak="ng-cloak" class="storiesList listView-large"><li ng-repeat="story in stories"><div set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" set-class="{readHistory: checkReadHistory(story), nsfwCover: story.nsfwCover}" ng-controller="storyListItem" class="storyListItem listItemInner"><div ng-if="!listViewCompact" class="inner"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="column imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 320:180)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/g/320/180" alt=""/></a><div class="column information"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="content"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div><div set-text="story.d" class="description"></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div class="coverStatsContainer"><div ng-class="{users: actives}" set-data-hint="actives + \' current active viewers\'" class="stat hint--bottom"><i class="fa fa-user"></i><span>{{actives}}</span></div><a set-href="\'/user/\' + (story.u[0].n | encodeURIComponent)" set-if="story.u[0].n != \'Anon\'" set-data-hint="\'created by\'" class="stat user hint--bottom"><div class="authorPane"><img set-if="story.u[0].a" set-src="(story.u[0].a | imageURLParser: 16:16)"/><div set-text="story.u[0].n" class="name"></div></div></a><div set-if="story.p" set-data-hint="story.p + \' comments\'" class="stat hint--bottom"><i class="fa-comments-o fa"></i><span set-text="story.p | formatNumber"></span></div><div ng-if="story.likeCount" set-data-hint="story.likeCount + \' likes\'" class="stat hint--bottom"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div set-data-hint="story.w+ \' words\'" class="stat hint--bottom"><span set-text="readingTime()"></span></div></div></div></div></div><div ng-if="listViewCompact" class="inner listViewCompact"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 336:252)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/336/252" alt=""/></a><div class="user"><div class="authorPane"><div set-text="story.u[0].n" class="name"></div></div></div><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" ng-if="listViewCompact" class="information"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div ng-class="{users: actives}" class="stat"><i class="fa fa-user"></i><span>{{actives}}</span></div><div ng-if="story.p" class="stat"><i class="fa-comments-o fa"></i><span>{{:: story.p}}</span></div><div class="stat"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div class="stat"><i class="fa fa-font"></i><span set-text="readingTime()" data-hint="{{::story.w}} words"></span></div></div></div></div></li></div></div></div>'
                ),
                t.put("/tmpl/anonkun/board/boardItem", '<div set-text="board" class="topDetails"></div><!-- .bottomDetails(set-text="board.t")  {{board.t}}--><div class="status"></div>'),
                t.put(
                    "/tmpl/anonkun/board/list",
                    '<div><nav class="column"><li class="header"><a href="/">Home</a></li><li><a href="/about">What is Fiction.live</a></li><li><a href="/stories">All Stories</a></li><li><a href="/live">Live Stories</a></li><li><a href="/reviews" active-link="active-link">Reviews</a></li><li><a href="/collections" active-link="active-link">Collections</a></li><li><a href="/about/super">Super Premium Account</a></li><li><a href="/help">Help</a></li><li><!--email_off-->  <a href="mailto:admin@fiction.live">Contact</a><!--/email_off-->  </li></nav><nav jade-repeat="anonkun/board/sideList" jade-repeat-data="sideContent.boards" class="column"></nav><nav ng-if="sideContent.collections" jade-repeat="anonkun/board/collections" jade-repeat-data="sideContent.collections" class="column"></nav><nav ng-if="sideContent.following" jade-repeat="anonkun/board/following" jade-repeat-data="sideContent.following" class="column"></nav></div>'
                ),
                t.put("/tmpl/anonkun/board/left", '<div boards-list="boards-list" class="boardsList"></div>'),
                t.put(
                    "/tmpl/anonkun/board/threads",
                    '<div class="nodeDetail"><div class="page-body"><article><header class="page-title"><h1 set-text="title"></h1></header></article><div threads="{{currentChatID}}" current-thread-list-href="{{currentThreadListHref}}" scroll-lock="scroll-lock" class="threads"></div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/profile/collections",
                    '<div id="userProfile"><div class="container"><h1>Collections</h1><div ng-cloak="ng-cloak" class="listView-small"><li ng-repeat="collection in collections"><a ng-href="/user/{{currentProfile.username | encodeURIComponent}}/collections/{{collection.t | encodeURIComponent}}"><div class="title header"><h2><span>{{collection.t}} - {{collection.collection.length | default:"0"}} stories</span></h2></div></a></li></div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/includes/tagItem",
                    '<li data-value="{{tag}}"><a title="Show only stories with the {{tag}} tag" data-placement="left" class="value tooltip-target">{{tag}}<div class="removeContainer"><i title="Do NOT show stories with the {{tag}} tag" data-placement="left" class="icon-remove tooltip-target"></i></div></a></li>'
                ),
                t.put(
                    "/tmpl/anonkun/profile/edit",
                    '<div draggable-handle=".modal-header" draggable-content="parent" class="editProfile"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3>Edit Profile</h3></div><div class="modal-body"><h3>About yourself</h3><div class="formItem"><label for="gender">Gender</label><select name="gender" ng-model="currentUser.profile.gender" ng-options="gender for gender in genders"></select></div><div class="formItem"><label for="givenname">Given Name</label><input type="text" name="givenname" ng-model="currentUser.profile.givenname"/></div><div class="formItem"><label for="givenname">Family Name</label><input type="text" name="familyname" ng-model="currentUser.profile.familyname"/></div><div class="formItem"><label for="location">Location</label><input type="text" name="location" ng-model="currentUser.profile.location"/></div><div class="formItem"><label for="about">About yourself</label><textarea name="about" ng-model="currentUser.profile.about"></textarea></div><h3>Settings</h3><div class="formItem"></div><div class="formItem"><label class="checkbox"><input type="checkbox" ng-model="currentUser.profile.settings.notifications.email.noLive"/> Disable email notifications. You won\'t get emails when your followed writers go live.</label><label class="checkbox"><input type="checkbox" ng-model="currentUser.profile.settings.theme.dark"/> Use the dark theme. Refresh your browser after saving.</label><label class="checkbox"><input type="checkbox" ng-model="currentUser.profile.asAnon"/>Post as Anon. Hide your username when posting in chat.</label></div><div class="formItem"><label ng-if="plan" class="checkbox"><input type="checkbox" ng-model="currentUser.profile.disableChatCosmetics"/> Disable chat cosmetics</label></div><div class="formItem"><div id="cancelSuper" ng-if="plan" ng-click="cancelSubscription()" class="btn">Cancel Super Subscription</div></div></div><div class="modal-footer"><input ng-click="close()" type="submit" value="Save and Close" class="btn btn-primary"/></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/profile/followers",
                    '<div class="followers"><div class="container max-height no-overflow"><h2>Followers</h2><div ng-cloak="ng-cloak" class="listView-large"><li ng-repeat="user in followers"><a set-href="\'/user/\'+(user.username | encodeURIComponent)" class="authorPane"> <img ng-if="user.profile.image" set-src="(user.profile.image | imageURLParser: 60:60)"/><div set-text="user.username" class="name"></div></a></li></div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/profile/left",
                    '<div id="profileControls"><img ng-if="!currentProfile.profile.image" src="//placekitten.com/g/195/195" ng-click="replaceImage()" class="profilePic"/><img ng-if="currentProfile.profile.image" ng-src="{{currentProfile.profile.image | imageURLParser: 195:195}}" ng-click="replaceImage()" class="profilePic"/><nav ng-if="!isProfileUser()"><h5 class="nav-header">Options</h5><a data-placement="right" ng-click="privateChat()" class="tooltip-target">Direct Chat</a><a rel="popover" class="notifications">Subscribe</a></nav><nav ng-if="isProfileUser()"><a rel="popover" ng-click="editProfile()">Edit Profile</a></nav></div>'
                ),
                t.put(
                    "/tmpl/anonkun/profile/following",
                    '<div class="following"><div class="container max-height no-overflow"><h2>Following</h2><div ng-cloak="ng-cloak" class="listView-large"><li ng-repeat="user in following"><a set-href="\'/user/\'+(user.username | encodeURIComponent)" class="authorPane"> <img ng-if="user.profile.image" set-src="(user.profile.image | imageURLParser: 60:60)"/><div set-text="user.username" class="name"></div></a></li></div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/profile/privateChat",
                    '<div draggable-handle=".modal-header" draggable-content="parent" class="privateChat"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3 class="user"><img ng-if="pmAvatar" set-src="(pmAvatar | imageURLParser: 24:24)" style="margin-top:-3px;" class="avatar"/><span set-text="pmUser"></span></h3></div><div chat-auto-scroll-for-child="chat-auto-scroll-for-child" viewport-height="85" viewport-max-height="viewport-max-height" class="modal-body"><div chat="{{pmChatID}}" resize-target="margin-bottom" class="chat"></div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/profile/main",
                    '<div class="profile"><header class="page-header"><h1><a set-text="currentProfile.username" set-href="\'/user/\'+(currentProfile.username | encodeURIComponent)"></a></h1><div class="right-menu header-menu"><div ng-if="!isProfileUser() &amp;&amp; currentUser" ng-click="privateChat()" class="btn">Direct Chat</div><div ng-if="isProfileUser()" ng-click="editProfile()" class="btn">Edit Profile</div><div ng-if="isProfileUserUNVerified()" ng-click="resendVerificationEmail()" class="btn">Resend Activation Email</div></div></header><div class="page-tabs"><div class="tabbable"><ul class="nav btn-set"><li active-link="active-link"><a set-href="\'/user/\'+(currentProfile.username | encodeURIComponent)">Profile</a></li><li active-link="active-link"><a set-href="\'/user/\'+(currentProfile.username | encodeURIComponent)+\'/stories\'">Stories</a></li><li active-link="active-link"><a set-href="\'/user/\'+(currentProfile.username | encodeURIComponent)+\'/collections\'">Collections</a></li></ul></div></div><div id="userProfile" ui-view="profileContent" class="max-height no-overflow"><div ui-view="content" class="newsFeed"><form ng-submit="post($event)" ng-controller="newsFeedPost" class="postForm"><div class="formItem"><textarea msd-elastic="msd-elastic" rows="1" ng-model="chatMessage" placeholder="New post" ng-focus="postActive = true" class="span2 chatInput"></textarea><div ng-if="postActive" class="right-align"><input type="submit" value="Submit Post" class="btn blue"/></div></div></form><div ng-cloak="ng-cloak" ng-if="newsFeed" class="listView-large"><li ng-repeat="item in newsFeed | orderBy: &quot;-ct&quot; track by item._id" ng-controller="newsFeedItem"><a set-href="&quot;/&quot;+(item.r[0] | default: &quot;social&quot;)+&quot;/&quot;+(item.t | url) + &quot;/&quot; + item._id"><div class="inner"><div ng-if="item.i[0]" class="imgContainer"><img ng-src="{{item.i[0] | imageURLParser: 280:280}}" alt=""/></div><div class="user"><div class="authorPane"><img set-if="item.u[0].a" set-src="(item.u[0].a | imageURLParser: 16:16)"/><div set-text="item.u[0].n" class="name"></div></div><div class="time">{{item.ct | timeago}}</div></div><div set-if="item.t" class="title"><h3 set-html="item.t"></h3></div><div set-html="item.b" class="content"></div><div class="coverStats"><div ng-if="item.p" class="stat"><i class="icon-comment icon"></i><span>{{item.p}}</span></div><div ng-if="item.like.length" class="stat"><i class="icon icon-thumbs-up"></i><span set-text="item.like.length"></span></div></div></div></a></li></div></div><aside class="about first-column"><div ng-if="stories" class="authorOf category"><div class="storiesList popularStories listView-grid"><li ng-repeat="story in stories"><div set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" set-class="{readHistory: checkReadHistory(story), nsfwCover: story.nsfwCover}" ng-controller="storyListItem" class="storyListItem listItemInner"><div ng-if="!listViewCompact" class="inner"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="column imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 320:180)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/g/320/180" alt=""/></a><div class="column information"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="content"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div><div set-text="story.d" class="description"></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div class="coverStatsContainer"><div ng-class="{users: actives}" set-data-hint="actives + \' current active viewers\'" class="stat hint--bottom"><i class="fa fa-user"></i><span>{{actives}}</span></div><a set-href="\'/user/\' + (story.u[0].n | encodeURIComponent)" set-if="story.u[0].n != \'Anon\'" set-data-hint="\'created by\'" class="stat user hint--bottom"><div class="authorPane"><img set-if="story.u[0].a" set-src="(story.u[0].a | imageURLParser: 16:16)"/><div set-text="story.u[0].n" class="name"></div></div></a><div set-if="story.p" set-data-hint="story.p + \' comments\'" class="stat hint--bottom"><i class="fa-comments-o fa"></i><span set-text="story.p | formatNumber"></span></div><div ng-if="story.likeCount" set-data-hint="story.likeCount + \' likes\'" class="stat hint--bottom"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div set-data-hint="story.w+ \' words\'" class="stat hint--bottom"><span set-text="readingTime()"></span></div></div></div></div></div><div ng-if="listViewCompact" class="inner listViewCompact"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 336:252)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/336/252" alt=""/></a><div class="user"><div class="authorPane"><div set-text="story.u[0].n" class="name"></div></div></div><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" ng-if="listViewCompact" class="information"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div ng-class="{users: actives}" class="stat"><i class="fa fa-user"></i><span>{{actives}}</span></div><div ng-if="story.p" class="stat"><i class="fa-comments-o fa"></i><span>{{:: story.p}}</span></div><div class="stat"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div class="stat"><i class="fa fa-font"></i><span set-text="readingTime()" data-hint="{{::story.w}} words"></span></div></div></div></div></li></div></div><div class="category selfReports"><div ng-click="replaceImage()" class="avatar"><div ng-if="!currentProfile.profile.image" ng-click="replaceImage()" class="btn huge">Set your avatar</div><img ng-if="currentProfile.profile.image" ng-src="{{currentProfile.profile.image | imageURLParser: 335:335}}" class="profilePic"/></div><div ng-if="currentProfile.profile.about" class="description"><label>About</label><p class="text">{{currentProfile.profile.about}}</p></div><div ng-if="currentProfile.profile.gender" class="gender"><label>Gender</label><p>{{currentProfile.profile.gender}}</p></div><div ng-if="currentProfile.profile.location" class="location"><label>Location</label><p>{{currentProfile.profile.location}}</p></div></div><div class="stats category"><div ng-if="currentProfile.stat.follow" class="stat-container"><label>Followers</label><a set-href="\'/user/\'+(currentProfile.username | encodeURIComponent)+\'/followers\'" class="stat followers"><div class="value">{{currentProfile.stat.follow}}</div></a></div><div ng-if="currentProfile.stat.following" class="stat-container"><label>Following</label><a set-href="\'/user/\'+(currentProfile.username | encodeURIComponent)+\'/following\'" class="stat followers"><div class="value">{{currentProfile.stat.following}}</div></a></div><div ng-if="currentProfile.stat.like" class="stat-container"><label>Likes</label><div class="stat likes"><div class="value">{{currentProfile.stat.like}}</div></div></div><div ng-if="currentProfile.stat.w" class="stat-container"><label>Words</label><div class="stat words"><div class="value">{{currentProfile.stat.w}}</div></div></div></div></aside></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/profile/stories",
                    '<div id="userProfile"><div class="container max-height no-overflow"><div ng-cloak="ng-cloak" class="storiesList listView-large"><li ng-repeat="story in publishedStories"><div set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" set-class="{readHistory: checkReadHistory(story), nsfwCover: story.nsfwCover}" ng-controller="storyListItem" class="storyListItem listItemInner"><div ng-if="!listViewCompact" class="inner"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="column imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 320:180)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/g/320/180" alt=""/></a><div class="column information"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="content"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div><div set-text="story.d" class="description"></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div class="coverStatsContainer"><div ng-class="{users: actives}" set-data-hint="actives + \' current active viewers\'" class="stat hint--bottom"><i class="fa fa-user"></i><span>{{actives}}</span></div><a set-href="\'/user/\' + (story.u[0].n | encodeURIComponent)" set-if="story.u[0].n != \'Anon\'" set-data-hint="\'created by\'" class="stat user hint--bottom"><div class="authorPane"><img set-if="story.u[0].a" set-src="(story.u[0].a | imageURLParser: 16:16)"/><div set-text="story.u[0].n" class="name"></div></div></a><div set-if="story.p" set-data-hint="story.p + \' comments\'" class="stat hint--bottom"><i class="fa-comments-o fa"></i><span set-text="story.p | formatNumber"></span></div><div ng-if="story.likeCount" set-data-hint="story.likeCount + \' likes\'" class="stat hint--bottom"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div set-data-hint="story.w+ \' words\'" class="stat hint--bottom"><span set-text="readingTime()"></span></div></div></div></div></div><div ng-if="listViewCompact" class="inner listViewCompact"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 336:252)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/336/252" alt=""/></a><div class="user"><div class="authorPane"><div set-text="story.u[0].n" class="name"></div></div></div><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" ng-if="listViewCompact" class="information"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div ng-class="{users: actives}" class="stat"><i class="fa fa-user"></i><span>{{actives}}</span></div><div ng-if="story.p" class="stat"><i class="fa-comments-o fa"></i><span>{{:: story.p}}</span></div><div class="stat"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div class="stat"><i class="fa fa-font"></i><span set-text="readingTime()" data-hint="{{::story.w}} words"></span></div></div></div></div></li></div></div><div ng-if="unpublishedStories" class="container unpublishedStories"><h1>Your unpublished stories</h1><div ng-cloak="ng-cloak" class="storiesList stories listView-large"><li ng-repeat="story in unpublishedStories"><div set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" set-class="{readHistory: checkReadHistory(story), nsfwCover: story.nsfwCover}" ng-controller="storyListItem" class="storyListItem listItemInner"><div ng-if="!listViewCompact" class="inner"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="column imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 320:180)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/g/320/180" alt=""/></a><div class="column information"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="content"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div><div set-text="story.d" class="description"></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div class="coverStatsContainer"><div ng-class="{users: actives}" set-data-hint="actives + \' current active viewers\'" class="stat hint--bottom"><i class="fa fa-user"></i><span>{{actives}}</span></div><a set-href="\'/user/\' + (story.u[0].n | encodeURIComponent)" set-if="story.u[0].n != \'Anon\'" set-data-hint="\'created by\'" class="stat user hint--bottom"><div class="authorPane"><img set-if="story.u[0].a" set-src="(story.u[0].a | imageURLParser: 16:16)"/><div set-text="story.u[0].n" class="name"></div></div></a><div set-if="story.p" set-data-hint="story.p + \' comments\'" class="stat hint--bottom"><i class="fa-comments-o fa"></i><span set-text="story.p | formatNumber"></span></div><div ng-if="story.likeCount" set-data-hint="story.likeCount + \' likes\'" class="stat hint--bottom"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div set-data-hint="story.w+ \' words\'" class="stat hint--bottom"><span set-text="readingTime()"></span></div></div></div></div></div><div ng-if="listViewCompact" class="inner listViewCompact"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 336:252)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/336/252" alt=""/></a><div class="user"><div class="authorPane"><div set-text="story.u[0].n" class="name"></div></div></div><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" ng-if="listViewCompact" class="information"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div ng-class="{users: actives}" class="stat"><i class="fa fa-user"></i><span>{{actives}}</span></div><div ng-if="story.p" class="stat"><i class="fa-comments-o fa"></i><span>{{:: story.p}}</span></div><div class="stat"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div class="stat"><i class="fa fa-font"></i><span set-text="readingTime()" data-hint="{{::story.w}} words"></span></div></div></div></div></li></div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/authorFooter",
                    '<footer ng-if="isAuthor" class="post"><div class="tabbable"><ul class="nav btn-set"><li class="active"><a data-target="#chapter-tab" data-toggle="tab">Add Chapter</a></li><li><a data-target="#choices-tab" data-toggle="tab">Add Reader Choice</a></li></ul><div class="tab-content"><div id="chapter-tab" ng-controller="chapterTab" class="postType tab-pane active"><article><div medium-editor="medium-editor" ng-model="chapterTabCache" options="{&quot;placeholder&quot;: &quot;Tell your story&quot;}" set-html="cached" editor-events="false" class="fieldBody fieldEditor"></div></article><button ng-click="post($event)" class="btn pull-right post-chapter huge">Post Chapter</button></div><div id="choices-tab" ng-controller="choicesTab" class="tab-pane"><p class="help-block">Here you can add a poll to let your readers vote on the direction of the story. You can include preset options or let readers post their own ideas.</p><div class="choicesInterface"><div ng-hide="poll.disallowVote" form-multiple-simple="form-multiple-simple" class="form-multiple"><div class="form-multiple-item input-prepend"><input type="text" placeholder="Type in a choice" class="span4 choiceItem"/></div></div><label ng-hide="poll.disallowVote" class="checkbox"><input ng-model="poll.custom" type="checkbox" checked="checked" class="custom"/>Allow custom write-ins</label><label ng-hide="poll.disallowVote" class="checkbox"><input ng-model="poll.multiple" type="checkbox" checked="checked" class="multiple"/>Allow multiple selections</label><label class="checkbox"><input ng-model="poll.disallowVote" type="checkbox" checked="checked" class="disallowVote"/>No voting. Make your readers to submit new write-ins directly into the story.</label><button ng-show="poll.disallowVote" ng-click="post($event)" class="btn pull-right post-readerPost">Add Reader response</button><button ng-hide="poll.disallowVote" ng-click="post($event)" class="btn pull-right post-choices huge">Add Poll</button></div></div></div></div></footer>'
                ),
                t.put(
                    "/tmpl/anonkun/story/achievements",
                    '<div class="achievements-page achievements"><header class="page-header page-title"><a set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+story._id" class="btn backToStory">Back to story</a></header><header class="page-header page-title"><h1 itemprop="name headline">Achievements</h1></header><div id="page-body" class="page-body"><article ng-if="isAuthor" class="description"><div class="help-text fieldBody"><p> <a href="http://en.wikipedia.org/wiki/Achievement_(video_gaming)" target="_blank">Achievements</a> are a way to keep track of the reader\'s progress through your story. Getting achievements while reading your story can give readers a sense of progress. Inspired by video games, collecting achievements can be very fun.</p><p>To implement achievements in your story you need to first add a bunch of achievements using the form below. The achievements are arranged in alphabetical order by ID. Try to give them sensible IDs that make sense within your story. For example C5-FoundItem, C5-DefeatedBaddie, with C5 standing for Chapter 5.</p><p>Once you have your achievements head over to your story. Edit your story and highlight some text in it. Then click the achievement button (it\'s the lightning bolt at the end). Type in your achievement ID into the prompt that appears. Now if a reader clicks on that link the achievement will unlock.</p></div></article><article ng-if="isAuthor" class="addAchievement"><div class="block"><div class="formItem"><label>ID</label><input type="text" placeholder="Achievement ID" class="span4 choiceItem id"/><div class="help-text">This id will be used to referred back to the achievement when you\'re setting the achievement triggers.</div></div><div class="formItem"><label>Name</label><input type="text" placeholder="Achievement Title" class="span4 choiceItem title"/><div class="help-text">The name of your achievement.</div></div><div class="formItem"><label>Description</label><input type="text" placeholder="Achievement Description" class="span4 choiceItem description"/><div class="help-text">A fun description of this achievement, or give a clue for how to obtain this achievement.</div></div><div class="formItem"><label>Image</label><input type="text" placeholder="Achievement Image" ng-click="setImage()" class="span4 choiceItem image"/><div class="help-text">Achievement image.</div></div><div class="formFooter"><input ng-click="post($event)" type="submit" value="Add Achievement" class="btn btn-primary"/></div></div></article><article class="listView-large achievementsList"><li ng-repeat="(id, achievement) in achievements.achievements | orderBy: \'achievement.t\'"><div set-if="isAuthor" set-text="&quot;ID: &quot;+achievement._id" class="_id"></div><div ng-class="{active: myAchievements[achievement._id]}" set-data-id="achievement._id" class="achievement"><div set-if="achievement.i &amp;&amp; achievement.i[0]" class="image"><img set-src="achievement.i[0] | imageURLParser: 60:60"/></div><div class="content"><h3 set-text="achievement.t" class="title"> </h3><div set-text="achievement.d" class="description"></div></div><footer set-if="isAuthor"><div ng-click="deleteAchievement(id)" class="delete btn deleteLink red">Delete</div></footer></div></li></article></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/bans",
                    '<div class="bansPage bans"><header class="page-header page-title"><a set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+story._id" class="btn backToStory">Back to story</a></header><header class="page-header page-title"><h1 itemprop="name headline">Bans</h1></header><div id="page-body" class="page-body"><article ng-if="isAuthor" class="description"><div class="help-text fieldBody"><p>Banned users cannot post or comment on the story. Use this page to manage them.</p></div></article><article class="listView-large bansList"><div class="listView-large"><li ng-repeat="user in bans | orderBy:&quot;time&quot;" data-post="user.post"><a set-href="\'/user/\'+(user.name | encodeURIComponent)" set-text="user.name"></a><span> was banned for </span><a set-href="url+\'/threads/banned-for/\'+user.post" target="_blank">this post</a><span set-if="user.time" set-text="\' on \' + (user.time | formatTime)" target="_blank"></span><footer><div ng-click="unban(user.post)" class="btn unban">unban user</div></footer></li></div></article></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/authorInformation",
                    '<div id="storyTagsAndFilters"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3>Edit the Tags and Filters for your story</h3></div><div class="modal-body"><div class="block"><h3 class="header">Basic</h3><div class="status formItem"><label>Story Status:</label><div class="btn-group"><div ng-model="story.storyStatus" btn-radio="\'active\'" class="btn">Active</div><div ng-model="story.storyStatus" btn-radio="\'finished\'" class="btn">Finished</div><div ng-model="story.storyStatus" btn-radio="\'hiatus\'" class="btn">Hiatus</div><div ng-model="story.storyStatus" btn-radio="\'discontinued\'" class="btn">Discontinued</div></div></div><div class="contentRating formItem"><label>Content Rating:</label><div class="btn-group"><div ng-model="story.contentRating" btn-radio="\'teen\'" class="btn">Teen</div><div ng-model="story.contentRating" btn-radio="\'mature\'" class="btn">Mature</div><div ng-model="story.contentRating" btn-radio="\'nsfw\'" class="btn">NSFW</div></div></div></div><div class="block"><h3 class="header">Target Demographic</h3><div class="help-block">People in your target demographic will get increased advertisement of your story.</div><div class="targetGender formItem"><label>Target Gender</label><div class="btn-group"><div ng-model="story.tGender" btn-radio="\'male\'" class="btn">Male</div><div ng-model="story.tGender" btn-radio="\'female\'" class="btn">Female</div><div ng-model="story.tGender" btn-radio="\'other\'" class="btn">Other</div></div></div><div class="targetGender formItem"><label>Target Age Group</label><div class="btn-group"><div ng-model="story.tAge" btn-radio="\'children\'" class="btn">Children</div><div ng-model="story.tAge" btn-radio="\'ya\'" class="btn">Young Adult</div><div ng-model="story.tAge" btn-radio="\'adult\'" class="btn">Adult</div></div></div></div><div class="block"><h3 class="header">Interactivity</h3><div class="help-block">Set the amount of control readers have when the story is being written and the level of interactivity the story has after it\'s been finished.</div><div class="formItem"><label>Level of Reader Control</label><div class="btn-group influence"><div ng-model="story.rInput" btn-radio="\'none\'" data-hint="Readers cannot influence what is written. Traditional books, movies, or visual novels fall in this category." class="btn hint--bottom">None</div><div ng-model="story.rInput" btn-radio="\'light\'" data-hint="Readers occasionally influence the story in limited ways. Readers can control only a couple of elements, for example, the actions of a main character, who can move about in a setting and storyline determined by the writer." class="btn hint--bottom">Light</div><div ng-model="story.rInput" btn-radio="\'medium\'" data-hint="Readers control multiple elements of a story. They can control multiple characters, the backstories of characters, elements of the setting, and occasionally add new characters." class="btn hint--bottom">Medium</div><div ng-model="story.rInput" btn-radio="\'heavy\'" data-hint="Readers have heavy influence on the story. Readers frequently contribute elements of characters, plot, events, setting, etc. Heavy use of write-ins. Not recommended." class="btn hint--bottom">Heavy</div></div></div><div class="formItem"><label>Story Interactivity</label><div class="btn-group"><div ng-model="story.rInteract" btn-radio="\'none\'" data-hint="The story is linear with no branching routes and no options." class="btn hint--bottom">None</div><div ng-model="story.rInteract" btn-radio="\'light\'" data-hint="There are small alternative routes but only the main story is considered important." class="btn hint--bottom">Light</div><div ng-model="story.rInteract" btn-radio="\'medium\'" data-hint="There are multiple important routes and multiple endings." class="btn hint--bottom">Medium</div><div ng-model="story.rInteract" btn-radio="\'heavy\'" data-hint="There are diverse endings and many options. This story involves a lot of programming and is very game-like." class="btn hint--bottom">Heavy</div></div></div></div><div class="block"><h3 class="header">Tags</h3><div class="help-block">Tag the story with its genres and elements. Your first tag will be the most important! For more details <a href="/help/tagging-guide" target="_blank">read the tagging guide.</a></div><div class="tags formItem"><label>Main Tags:</label><div simple-tags="simple-tags" class="simpleTags"></div></div><div class="tags formItem"><label>Spoiler Tags:</label><div simple-tags-spoilers="simple-tags-spoilers" class="simpleTags"></div></div></div></div><div class="modal-footer"><input type="submit" value="Save and close" ng-click="close()" class="btn btn-primary"/></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/choiceReply",
                    '<div draggable-handle=".modal-header" draggable-content="parent" class="choiceReply"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3>Replies</h3></div><div chat-auto-scroll-for-child="chat-auto-scroll-for-child" viewport-height="85" viewport-max-height="viewport-max-height" class="modal-body"><div class="mainPost"><div class="user"><label><span>Replying to choice </span></label></div><div class="postContent"><div class="postBody"><div set-class="greenText(chatMsg.b)"><div set-text="chatMsg.b" class="fieldBody"></div></div></div></div></div><div class="replies"><div chat="{{nid}}" before-post="beforePost" title="Replies " resize-target="margin-bottom" class="chat"></div></div></div></div>'
                ),
                t.put("/tmpl/anonkun/story/chapter", '<div class="fieldBody"></div>'),
                t.put(
                    "/tmpl/anonkun/story/collection",
                    '<div class="collectionForm"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3>Add this story to your collections</h3></div><div class="modal-body"><div class="help-block">You can add this story to a collection here. It\'s an easy way to save the story in your account for quick reference later on. Share a collection of your favorite stories.</div><div class="formItem"><label><h3>Collections:</h3></label><ul class="listView-large"><li ng-repeat="collection in collections" ng-init="inCollection = isInCollection(collection)"><div ng-click="addToCollection(collection.t, inCollection)" ng-class="{active: inCollection}" class="btn"><span ng-if="!inCollection" class="text">Add to your {{collection.t}} collection</span><span ng-if="inCollection" class="text">In your {{collection.t}} collection</span></div><a ng-href="/user/{{currentUser.username | encodeURIComponent}}/collections/{{collection.t | encodeURIComponent}}" target="_blank"><i class="fa fa-external-link"></i></a></li></ul></div><div class="formItem"><label> <h3>Create a new collection:</h3></label><form ng-submit="newList($event)"><input type="text" ng-model="newCollectionName" class="newCollection"/><input type="submit" value="Create Collection" class="btn"/></form></div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/createStoryForm",
                    '<div class="createStoryForm"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3>Create New Story</h3></div><div class="modal-body"><form ng-submit="submit($event)"><div class="formItem"><label class="required">Title:</label><input type="text" class="title fieldText"/><div ng-if="requiredTitle" class="help-text alert alert-danger">Title required</div></div><input type="submit" value="Create your new story" class="btn customInput"/></form></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/description",
                    '<article ng-if="!isChapter" class="chapter"><p itemprop="description" ng-if="!isAuthor" bind-html-unsafe="story.d" class="lead"></p><p ng-if="isAuthor" ng-model="story.d" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Write a short, 1 sentence subheading.&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: true, &quot;disableReturn&quot;: true}" class="lead isAuthor"></p><article ng-if="isAuthor &amp;&amp; !story.init" ng-model="story.b" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Write a longer blurb to sell the story to readers. What makes this story interesting or unique? Consider mentioning: accolades, inspirations, exciting moments, interesting characters, or your target audience. (2 paragraphs)&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: false, &quot;disableReturn&quot;: false}" class="marketing isAuthor"></article><hr ng-if="isAuthor"/></article>'
                ),
                t.put(
                    "/tmpl/anonkun/story/customChoiceForm",
                    '<div class="readerPostCustom"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3>Submit a Custom Choice</h3></div><div class="modal-body"><textarea rows="4" class="fieldEditor"></textarea><div type="button" data-placement="right" ng-click="saveCustomChoice($event)" class="btn save-readerPost pull-right tooltip-target">Submit</div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/editChapter",
                    '<div draggable-handle=".modal-header" draggable-content="parent" class="editChapter"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3>Edit</h3></div><div class="modal-body"><div class="control-group formItem"><div field-editor="field-editor" existingText="{{chapter.b}}" class="fieldEditor"></div></div><div ng-if="!isRoute" class="control-group"><label for="chapterTitle">Table of Contents Entry:<input name="chapterTitle" ng-model="chapter.t" type="text" placeholder="Optional Entry for the Table of Contents" class="input-xlarge chapterTitle"/><span class="help-block">Setting a name here will add this chapter to the Table of Contents on the top header as an entry.</span><span class="help-block">You can also set an appendix entry instead of a normal entry. Input an entry name starting with "#special " For example: "#special Characters" without the quotes</span></label></div></div><div class="modal-footer"><div ng-click="delete()" class="btn btn-important red pull-left">Delete</div><div ng-click="save($event)" class="btn btn-primary">Save and close</div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/edit",
                    '<div class="editStory"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3>Settings</h3></div><div set-if="story.nt == \'post\'" class="modal-body"><label class="checkbox"><input type="checkbox" ng-model="story.trash" ng-change="unpublish()"/>Unpublish this story</label></div><div set-if="story.nt == \'story\'" class="modal-body"><div class="choicesInterface control-group formItem"><div class="help-block">Set additional authors for this story.</div><div ng-model="story.u2" form-multiple="form-multiple" ng-init="formMultipleDefault = {n:&quot;&quot;}" class="form-multiple"><div ng-repeat="user in story.u2" class="form-multiple-item"><input type="text" placeholder="Author username" ng-model="user.n" ng-change="setU2UserID(user.n, $index)" class="choiceItem"/></div></div></div><div class="choicesInterface control-group formItem"><div class="help-block">Set moderators for this story. Moderators can ban/delete chat and topics but cannot change the story itself.</div><div ng-model="story.mod" form-multiple="form-multiple" ng-init="formMultipleDefault = {n:&quot;&quot;}" class="form-multiple"><div ng-repeat="user in story.mod" class="form-multiple-item"><input type="text" placeholder="Moderator username" ng-model="user.n" ng-change="setMODUserID(user.n, $index)" class="choiceItem"/></div></div></div><div class="control-group formItem"></div><div class="control-group formItem"><label for="defaultNick">Default Anon Nick:</label><span class="help-block">By default anonymous users will be represented as "anon" in the chat. You can change this for flavor.</span><input name="defaultNick" type="text" placeholder="Anon" ng-model="story.dn" ng-change="defaultNick()" class="input-xlarge defaultNick"/></div>\n<div class="control-group formItem"><label>Participation:</label><label class="checkbox"><input type="checkbox" ng-model="story.verifiedOnly" class="usersOnly"/>Allow only verified users to participate.</label>\n</div>\n<label class="checkbox"><input type="checkbox" ng-model="story.multiRoute"/>Enable multiple routes. </label><div class="help-block">This will allow you to make poll options into buttons that the reader can click on to branch the story, giving the story multiple endings. The reader will also get video game-like save and loading menus so they can keep track of their progress across routes. Enable this option if you\'re sure you\'re going to create multiple routes.</div><div class="help-block"><a href="http://fiction.live/anonkun/Multi-route-Tutorial/PP5vQo2yyPNczrSbz">Click here for more help on multiple routes feature.</a></div><label class="checkbox"><input type="checkbox" ng-model="story.mcOff"/>Allow silent voting.</label><div class="help-block">Allow voters to vote without saying anything. Turn this on if you have too much chat.</div><div class="control-group formItem"></div><label class="checkbox"><input type="checkbox" ng-model="story.nsfwCover"/>Mark the cover as inappropriate . </label><div class="help-block">This fades the cover from users that haven\'t explictly chosen to view these covers. PORNOGRAPHIC COVERS ARE NOT ALLOWED EVER. This option is for covers that are not pornographic yet still inappropriate due to gore, fetishism, or excessive lewdness.</div><div class="control-group formItem"></div><label class="checkbox"><input type="checkbox" ng-model="story.hideVote"/>Hide current vote counts on open polls. </label><div class="help-block">This prevents people from being biased to the winning options (bandwagoning).</div><div class="control-group formItem"></div><label class="checkbox"><input type="checkbox" ng-model="story.trash" ng-change="unpublish()"/>Unpublish this story</label><div class="help-block">The story will not appear in the lists but you will still be able to find it in your profile.</div></div><div class="modal-footer"><input type="submit" value="Save and close" ng-click="close()" class="btn btn-primary"/></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/information",
                    '<aside ng-if="!isAuthor&amp;&amp;!isChapter" class="information metaDetails"><div ng-if="story.b" class="row storyb"><div bind-html-unsafe="story.b" class="fieldBody"></div></div><div ng-if="review" class="row reviewsContainer"><div class="reviewsList"><h3><a set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+story._id+\'/reviews\'" ng-if="story.nt == \'story\'">Reviews</a></h3><div><div class="review"><table><tr><td set-if="review.u[0].a" class="avatar"><a set-if="review.u[0].n" set-href="\'/user/\' + (review.u[0].n | url)" class="authorPane"> <img set-if="review.u[0].a" set-src="(review.u[0].a | imageURLParser: 60:60)"/></a></td><td class="ratingTD"><div class="rating"><rating value="review.score" max="5" readonly="true"></rating></div><div class="writtenBy"><span>by </span><a ng-if="review.u[0].n" ng-href="/user/{{:: review.u[0].n | url}}" set-text="review.u[0].n" class="name"></a><span ng-if="!review.u[0].n" class="name">Anon</span><span class="created">{{:: review.ct | timeago}}</span></div></td></tr><tr><td colspan="2"><div class="spoilerFree"><div ng-bind-html="review.b" class="fieldBody"></div></div><div ng-if="review.spoiler" class="spoilers"><a ng-click="spoilers = true" ng-hide="spoilers">Show spoilers</a><div ng-if="spoilers" ng-bind-html="review.spoiler" class="fieldBody"></div></div><footer><span class="likeLink"><span like-button="review"></span></span></footer></td></tr></table></div></div></div></div></aside>'
                ),
                t.put(
                    "/tmpl/anonkun/story/editOptionForm",
                    '<div draggable-handle=".modal-header" draggable-content="parent" class="editOptionForm"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3>Edit This Choice Option</h3></div><div class="modal-body"><form ng-submit="submitNewOption($event, \'customInput\')"><br/><div class="formItem control-group"><label>Edit this option.</label><textarea type="text" set-text="choice" class="fieldText form-control"></textarea><input type="submit" value="Submit" class="btn customInput"/></div></form><div class="btn xOut"><i class="icon fa-times fa"> </i><span>Cross Out This Option.</span></div><div class="btn commend"><i ng-class="{\'fa-thumbs-o-up\': !liked, \'fa-thumbs-up\': liked }" class="fa"></i><span>Commend this option.</span></div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/nextLive",
                    '<div class="nextLive"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3>When is your next scheduled live?</h3></div><div class="modal-body"><div class="control-group formItem"><label>Live time</label><input type="text" timepicker="" class="timepicker"/></div><div class="control-group formItem"><label>Days until live</label><div class="help-block">How many days until you are going live? 1 for tomorrow, 2 for day after tomorrow...</div><input type="number" ng-model="setTimes.days" placeholder="days until live"/></div></div><div class="modal-footer"><div ng-click="clear($event)" class="btn">Clear</div><input ng-click="save($event)" type="submit" value="Set Next Live Time" class="btn btn-primary"/></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/manageChapters",
                    '<div class="manageChapters"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3>Manage Chapters</h3></div><div class="modal-body"><div class="pull-right"><div ng-click="createVNChapter()" class="btn btn-primary">Create Chapter</div></div><h1 set-text="title"></h1><ul class="chapters"><li ng-repeat="chapter in VNchapters"></li></ul><div class="pull-right"><div ng-click="createVNChapter()" class="btn btn-primary">Create Chapter</div></div></div><div class="modal-footer"><input type="submit" value="Save and close" ng-click="close()" class="btn btn-primary"/></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/postReview",
                    '<div class="postReview"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3>Review</h3></div><div class="modal-body"><div ng-hide="writeReview" class="reviewButtonContainer"><div ng-click="writeReview = true" class="btn btn-primary blue">Write a Review</div></div><div ng-if="writeReview" class="block dark"><div class="control-group formItem"><label>Rate</label><rating value="yourreview.score" max="5"></rating></div><div class="control-group formItem"><label>Spoiler-free Review</label><div field-editor="field-editor" existingText="{{yourreview.b}}" class="fieldEditor spoilerFree"></div></div><div class="control-group formItem"><label>Spoiler Review</label><div field-editor="field-editor" existingText="{{yourreview.spoiler}}" class="fieldEditor spoiler"></div></div><div class="formFooter"><input ng-hide="hasReview" ng-click="post($event)" type="submit" value="Post Review" class="btn btn-primary"/><input ng-show="hasReview" ng-click="post($event)" type="submit" value="Save Review" class="btn btn-primary"/></div></div><div class="reviewsList"><div ng-repeat="review in reviews" class="review"><table><tr><td rowspan="2" set-if="review.u[0].n" class="avatar"><a set-if="review.u[0].n" set-href="/user/{{:: review.u[0].n | encodeURIComponent}}" class="authorPane pull-left"> <img set-if="review.u[0].a" set-src="review.u[0].a | imageURLParser: 60:60"/></a></td><td class="ratingTD"><rating value="review.score" max="5" readonly="readonly"></rating></td></tr><tr><td><a href="/{{:: review.story.r[0] | default: &quot;stories&quot;}}/{{:: review.story.t | url}}/{{:: review.story._id}}">{{:: review.story.t}}</a></td></tr><tr><td colspan="2"><div class="spoilerFree"><div ng-bind-html="review.b" class="fieldBody"></div></div><div ng-if="review.spoiler" class="spoilers"><a ng-click="spoilers = true" ng-hide="spoilers">Show spoilers</a><div ng-if="spoilers" ng-bind-html="review.spoiler" class="fieldBody"></div></div><div class="writtenBy"><span>by </span><a set-if="review.u[0].n" ng-href="/user/{{:: review.u[0].n | encodeURIComponent}}" set-text="review.u[0].n" class="name"></a><span set-if="!review.u[0].n" class="name">Anon</span><span class="created">{{:: review.ct | timeago}}</span></div><footer><span class="likeLink"><span like-button="review"></span></span></footer></td></tr></table></div></div></div><div class="modal-footer"><div ng-click="close()" class="btn">Close</div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/post-page-head-body",
                    '<header class="page-title"><h1 ng-if="isAuthor" ng-model="story.t" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;(Optional) Enter a title&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: true, &quot;disableReturn&quot;: true}"></h1><h1 itemprop="name headline" ng-if="!isAuthor" set-html="story.t"></h1></header><div id="page-body" set-data-nt="story.nt" class="page-body post-not-story"><article><div ng-if="isAuthor" ng-model="story.b" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Your post here&quot;}" class="fieldBody"></div><div ng-if="!isAuthor" ng-bind-html="story.b" class="fieldBody"></div></article><div chat="{{currentChatID}}" from-beginning="from-beginning" class="chat"></div></div><footer chat-post="{{currentChatID}}" class="post"></footer>'
                ),
                t.put(
                    "/tmpl/anonkun/story/readerPostForm",
                    '<div draggable-handle=".modal-header" draggable-content="parent" class="readerPostCustom"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3>Write Post</h3></div><div class="modal-body"><div field-editor="field-editor" existingText="" class="fieldEditor"></div><div type="button" data-placement="right" ng-click="saveReaderPost($event)" class="btn save-readerPost pull-right tooltip-target">Save</div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/readerPost",
                    '<div set-data-id="chapter._id" ng-class="chapter.closed" ng-controller="choice" class="inner"><h4>Reader Posts - <small ng-if="chapter.closed">Closed - </small><span ng-if="!chapter.closed &amp;&amp; !currentUser.username &amp;&amp; votePermission">Login to post</span><small>{{countCache = votersCount()}} <ng-pluralize count="countCache" when="{0: &quot;Be the first to post.&quot;, 1: &quot;post&quot;, other: &quot;posts&quot;}"></ng-pluralize></small></h4><div class="readerPosts fieldBody"><div ng-repeat="(key, vote) in chapter.votes track by key" class="post choiceItem"><div ng-if="chapter.dice[key]" ng-bind-html="chapter.dice[key]" class="dice"></div><div bind-html-unsafe="vote" class="value"></div></div><div ng-repeat="(key, vote) in chapter.dice track by key" ng-if="!chapter.votes[key]" class="post choiceItem"><div ng-if="chapter.dice[key]" ng-bind-html="chapter.dice[key]" class="dice"></div></div></div><div ng-if="!chapter.closed" class="custom-choice"><div field-editor="field-editor" existingText="" class="fieldEditor"></div><div type="button" data-placement="right" ng-click="addReaderPost($event)" class="btn save-readerPost pull-right tooltip-target">Submit your own post</div></div><footer ng-if="isAuthor" class="poll-control"><div ng-show="chapter.closed" type="button" ng-click="openPoll()" class="btn open-poll tooltip-target">Open Responses</div><div ng-hide="chapter.closed" title="Close the poll to finalize these results." type="button" data-placement="right" ng-click="closePoll()" class="btn close-poll tooltip-target">Close Responses</div></footer></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/review",
                    '<div itemscope="itemscope" itemtype="http://schema.org/CreativeWork" bindonce="story" class="reviews story-reviews"><header class="page-header page-title"><a set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+story._id" class="btn">Back to story</a></header><header class="page-header page-title"><h1 itemprop="name headline">Reviews</h1></header><div id="page-body" class="page-body"><article class="postReview"><div class="block"><div class="control-group formItem"><label>Rate</label><rating value="yourreview.score" max="5"></rating></div><div class="control-group formItem"><label>Spoiler-free Review</label><div field-editor="field-editor" existingText="{{yourreview.b}}" class="fieldEditor spoilerFree"></div></div><div class="control-group formItem"><label>Spoiler Review</label><div field-editor="field-editor" existingText="{{yourreview.spoiler}}" class="fieldEditor spoiler"></div></div><div class="formFooter"><input ng-hide="hasReview" ng-click="post($event)" type="submit" value="Post Review" class="btn btn-primary"/><input ng-show="hasReview" ng-click="post($event)" type="submit" value="Save Review" class="btn btn-primary"/></div></div></article><div ng-if="reviews.length" class="reviewsList listView-large"><li ng-repeat="review in reviews | orderBy: \'-review.like.length\'" class="review"><div class="review"><table><tr><td set-if="review.u[0].a" class="avatar"><a set-if="review.u[0].n" set-href="\'/user/\' + (review.u[0].n | url)" class="authorPane"> <img set-if="review.u[0].a" set-src="(review.u[0].a | imageURLParser: 60:60)"/></a></td><td class="ratingTD"><div class="rating"><rating value="review.score" max="5" readonly="true"></rating></div><div class="writtenBy"><span>by </span><a ng-if="review.u[0].n" ng-href="/user/{{:: review.u[0].n | url}}" set-text="review.u[0].n" class="name"></a><span ng-if="!review.u[0].n" class="name">Anon</span><span class="created">{{:: review.ct | timeago}}</span></div></td></tr><tr><td colspan="2"><div class="spoilerFree"><div ng-bind-html="review.b" class="fieldBody"></div></div><div ng-if="review.spoiler" class="spoilers"><a ng-click="spoilers = true" ng-hide="spoilers">Show spoilers</a><div ng-if="spoilers" ng-bind-html="review.spoiler" class="fieldBody"></div></div><footer><span class="likeLink"><span like-button="review"></span></span></footer></td></tr></table></div></li></div><div ng-if="!reviews.length" class="reviewsList listView-large"><li><p>No reviews yet</p></li></div></div></div>'
                ),
                t.put("/tmpl/anonkun/story/recommendations", '<aside class="recommendations"></aside>'),
                t.put(
                    "/tmpl/anonkun/story/storyItem",
                    '<div set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" set-class="{readHistory: checkReadHistory(story), nsfwCover: story.nsfwCover}" ng-controller="storyListItem" class="storyListItem listItemInner"><div ng-if="!listViewCompact" class="inner"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="column imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 320:180)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/g/320/180" alt=""/></a><div class="column information"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="content"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div><div set-text="story.d" class="description"></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div class="coverStatsContainer"><div ng-class="{users: actives}" set-data-hint="actives + \' current active viewers\'" class="stat hint--bottom"><i class="fa fa-user"></i><span>{{actives}}</span></div><a set-href="\'/user/\' + (story.u[0].n | encodeURIComponent)" set-if="story.u[0].n != \'Anon\'" set-data-hint="\'created by\'" class="stat user hint--bottom"><div class="authorPane"><img set-if="story.u[0].a" set-src="(story.u[0].a | imageURLParser: 16:16)"/><div set-text="story.u[0].n" class="name"></div></div></a><div set-if="story.p" set-data-hint="story.p + \' comments\'" class="stat hint--bottom"><i class="fa-comments-o fa"></i><span set-text="story.p | formatNumber"></span></div><div ng-if="story.likeCount" set-data-hint="story.likeCount + \' likes\'" class="stat hint--bottom"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div set-data-hint="story.w+ \' words\'" class="stat hint--bottom"><span set-text="readingTime()"></span></div></div></div></div></div><div ng-if="listViewCompact" class="inner listViewCompact"><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" class="imgContainer"><div ng-if="story.isLive" class="live-icon label-important label">Live</div><div ng-if="showNextLive" class="live-icon label-important label">Live in {{story.nextLive | timeago}}</div><div class="readHistory-icon label">Read</div><img set-if="story.i[0]" set-src="(story.i[0] | imageURLParser: 336:252)" alt=""/><img set-if="!story.i[0]" src="//placekitten.com/336/252" alt=""/></a><div class="user"><div class="authorPane"><div set-text="story.u[0].n" class="name"></div></div></div><a set-href="&quot;/&quot;+(story.r[0] | default: &quot;stories&quot;)+&quot;/&quot;+(story.t | url) + &quot;/&quot; + story._id" ng-if="listViewCompact" class="information"><div class="title header"><h2><span set-text="story.t || story.b"></span></h2></div></a><div class="tags"><a bindonce="bindonce" set-href="&quot;/&quot;+(tag | url)" ng-repeat="tag in story.ta track by $index" set-text="tag" class="stat"></a></div><div class="coverStats"><div ng-class="{users: actives}" class="stat"><i class="fa fa-user"></i><span>{{actives}}</span></div><div ng-if="story.p" class="stat"><i class="fa-comments-o fa"></i><span>{{:: story.p}}</span></div><div class="stat"><i class="fa fa-thumbs-up"></i><span set-text="story.likeCount"></span></div><div class="stat"><i class="fa fa-font"></i><span set-text="readingTime()" data-hint="{{::story.w}} words"></span></div></div></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/routes",
                    '<div class="routes"><article class="page-head-body"><header class="page-title"><a set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+story._id" class="btn">Back to story</a></header><header class="page-title"><h2 itemprop="name headline">Routes for {{:: story.t}}</h2><a set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+story._id + \'/routesList\'" class="btn listLink">Switch to Routes List</a><a set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+story._id + \'/routes\'" class="btn mapLink">Switch to Routes Map</a></header><div id="page-body" class="page-body"><div id="routesChart" class="routesChart"></div></div></article></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/threads",
                    '<div itemscope="itemscope" itemtype="http://schema.org/CreativeWork" bindonce="story" class="threads threads-page"><header class="page-header page-title"><a set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+story._id" class="btn">Back to story</a><h2 itemprop="name headline">Discussion Topics</h2></header><div id="page-body" class="page-body"><article threads="{{currentChatID}}" current-thread-list-href="{{currentThreadListHref}}" scroll-lock="scroll-lock" class="threads"></article></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/threadItem",
                    '<div itemscope="itemscope" itemtype="http://schema.org/CreativeWork" class="threads story nodeDetail"><div class="storyImgContainer"><img ng-if="!threadAuthor &amp;&amp; thread.i" itemprop="image" ng-src="{{thread.i[0] | imageURLParser}}" set-alt="thread.t" class="storyImg"/><img ng-if="threadAuthor &amp;&amp; thread.i" itemprop="image" ng-src="{{thread.i[0]}}" ng-click="setImage()" alt="Click to replace thread image" class="storyImg isAuthor"/><div ng-click="setImage()" ng-if="threadAuthor &amp;&amp; thread.i" style="background-image:url({{thread.i[0] | imageURLParser}})" alt="Click to replace thread image" class="imgWithBackground isAuthor"></div><div ng-if="!threadAuthor &amp;&amp; thread.i" style="background-image:url({{thread.i[0] | imageURLParser}})" class="imgWithBackground"></div></div><article class="page-head-body"><nav id="storyProperties"><div class="firstRow"><a set-href="\'/\'+getBoard()+\'/\'+(story.t | url)+\'/\'+story._id" class="btn">Back to story</a><div ng-if="threadAuthor" ng-click="editNode()" class="editStory btn"><i class="fa-gear fa"></i><span>Edit</span></div></div><span ng-init="user = thread.u[0]" class="author"><a set-href="\'/user/\' + (user.n | encodeURIComponent)" class="inner"><span ng-if="user.a" class="avatar"><img set-src="(user.a  | imageURLParser: 30:30)" class="avatar"/></span><span set-text="user.n" class="name"></span></a></span><span class="tags"><a set-href="\'/\'+getBoard()" set-text="getBoard()" class="tag"></a></span></nav><header class="page-title"><div ng-if="!thread.i&amp;&amp;threadAuthor" ng-click="setImage()" class="btn setImage"><i class="fa fa-image"></i><span>Set the cover image</span></div><h1 ng-if="threadAuthor" ng-model="thread.t" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;(Optional) Enter a title&quot;, &quot;disableToolbar&quot;: true, &quot;forcePlainText&quot;: true, &quot;disableReturn&quot;: true}"></h1><h1 itemprop="name headline" ng-if="!threadAuthor" set-html="thread.t"></h1></header><div id="page-body" set-data-nt="thread.nt" class="page-body post-not-story"><article><div ng-if="threadAuthor" ng-model="thread.b" medium-editor="medium-editor" options="{&quot;placeholder&quot;: &quot;Your post here&quot;}" class="fieldBody"></div><div ng-if="!threadAuthor" ng-bind-html="thread.b" class="fieldBody"></div></article><div chat="{{threadId}}" threading="threading" from-beginning="from-beginning" class="chat"></div></div><footer chat-post="{{threadId}}" class="post"></footer></article></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/xOutForm",
                    '<div draggable-handle=".modal-header" draggable-content="parent" class="xOutForm"><div class="modal-header"><button ng-click="close()" type="button" class="close">×</button><h3>Reason for crossing out</h3></div><div class="modal-body"><label>You\'re crossing out the option:</label><blockquote set-text="choice"></blockquote><ul><li ng-click="submitReason($event)"><p><div class="btn">This choice is inconsistent with the story so far.</div></p></li><li ng-click="submitReason($event)"><p><div class="btn">This choice is not where I want to take the story.</div></p></li><li ng-click="submitReason($event)"><p><div class="btn">This choice is troll/spam/against the ToS.</div></p></li></ul><form ng-submit="submitReason($event, \'customInput\')"><br/><div class="formItem control-group"><label>Custom cross out reason</label><input type="text" class="fieldText form-control"/><input type="submit" value="Submit" class="btn customInput"/></div></form></div></div>'
                ),
                t.put(
                    "/tmpl/anonkun/story/voteChapterForm",
                    '<div draggable-handle=".modal-header" draggable-content="parent" class="voteChapterForm"><button ng-click="close()" type="button" class="close">×</button><div class="modal-header"><h3>Comments</h3></div><div class="modal-body"><blockquote set-text="choice"></blockquote><form ng-submit="submitReason($event, \'customInput\')" class="formItem"><br/><label ng-if="!story.mandatoryComment">Comment on your choice or the story:</label><label ng-if="story.mandatoryComment" class="required">Comment on your choice or the story (required):</label><input type="text" class="fieldText form-control"/><input type="submit" ng-if="!story.mandatoryComment" value="Post" class="btn customInput"/><input type="submit" ng-if="story.mandatoryComment" value="Post and Vote" class="btn customInput"/></form></div></div>'
                );
        },
    ]),
    (ty.templates["/tmpl/chat/jade/chatItem"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o, a) {
                    n.push('<div class="logItem">');
                    var s = t.rootScope.isAuthor,
                        l = 0;
                    if (!c) var c = t.chatMsg;
                    if ((c.u && c.u[0] && c.u[0].n && "Anon" != c.u[0].n && (l = c.u[0].p), c.i || "choice" != c.nt))
                        n.push("<div" + jade.attr("data-id", c._id, !0, !1) + jade.attr("plan", l, !0, !1) + jade.cls(["chatMsg", "join" == c.nt ? "join" : a], [null, !0]) + '><div class="user">'),
                            c.u && c.u[0] && c.u[0].n && "Anon" != c.u[0].n
                                ? (n.push("<a" + jade.attr("href", "/user/" + i(c.u[0].n), !0, !1) + ">"),
                                  c.u[0] && c.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(c.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                  n.push('<span class="name">' + jade.escape(null == (e = c.u[0].n) ? "" : e) + "</span></a>"))
                                : n.push("<span>" + jade.escape(null == (e = t.rootScope.defaultNick || "Anon") ? "" : e) + "</span>"),
                            n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(c.ct)) ? "" : e) + "</small></div><div" + jade.cls(["message", o.greenText(c.b)], [null, !0]) + ">"),
                            c.ra &&
                                c.ra._id != t.scope.chatID &&
                                c.ra._id != t.chatID &&
                                !c.ra.hide &&
                                n.push("<div" + jade.attr("data-id", c.ra._id, !0, !1) + ' class="replyAt"><div class="text">> ' + jade.escape(null == (e = c.ra.b) ? "" : e) + "</div></div>"),
                            c.i
                                ? n.push("<img" + jade.attr("src", o.imageURLParser(c.i, 400, 400, "nocfill"), !0, !1) + "/>")
                                : "join" != c.nt
                                ? n.push('<div class="fieldBody">' + (null == (e = o.contentTransforms(c.b)) ? "" : e) + "</div>")
                                : "join" == c.nt
                                ? n.push('<div class="fieldBody">joins the room</div>')
                                : "choice" == c.nt && n.push('<div class="fieldBody">posts a poll</div>'),
                            n.push('</div><footer class="footer-links">'),
                            c.p
                                ? n.push('<div class="label replies"> <span class="value">' + jade.escape(null == (e = c.p) ? "" : e) + "</span> replies</div>")
                                : n.push('<div class="label replies hidden"> <span class="value">' + jade.escape(null == (e = c.p) ? "" : e) + "</span> replies</div>"),
                            n.push("</footer></div>");
                    else {
                        n.push('<div class="choice"><div' + jade.attr("data-id", c._id, !0, !1) + jade.cls(["inner", c.closed], [null, !0]) + '><h4 class="poll-head">'),
                            c.closed
                                ? n.push("<span>Choices - <small>Closed </small></span>")
                                : (n.push("<span>"),
                                  !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                                  (r.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), c.multiple && n.push("<span>(select more than 1) </span>")),
                                  n.push("</span>")),
                            n.push("- ");
                        var u = t.rootScope.votersCount(c);
                        n.push("<small>"),
                            0 == u ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = u) ? "" : e) + " "), 1 == u ? n.push("voter") : n.push("voters")),
                            n.push('</small></h4><table class="poll">'),
                            (c = t.rootScope.sortVotes(c)),
                            function () {
                                var i = c.sortedVotes;
                                if ("number" == typeof i.length)
                                    for (var r = 0, o = i.length; o > r; r++) {
                                        var l = i[r],
                                            u = t.rootScope.isActive(l.index, c);
                                        n.push("<tr" + jade.attr("data-index", l.index, !0, !1) + jade.cls(["choiceItem", u ? "active" : a], [null, !0]) + ">"),
                                            s && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                            u ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                            n.push('<td class="text">' + jade.escape(null == (e = l.name) ? "" : e) + "</td></table></td>"),
                                            (t.rootScope.story && t.rootScope.story.hideVote && !c.closed) || n.push('<td class="result">' + jade.escape(null == (e = l.votes + " votes") ? "" : e) + "</td>"),
                                            t.rootScope.story && t.rootScope.story.hideVote && !c.closed && n.push('<td class="result">votes hidden</td>'),
                                            n.push("</tr>");
                                    }
                                else {
                                    var o = 0;
                                    for (var r in i) {
                                        o++;
                                        var l = i[r],
                                            u = t.rootScope.isActive(l.index, c);
                                        n.push("<tr" + jade.attr("data-index", l.index, !0, !1) + jade.cls(["choiceItem", u ? "active" : a], [null, !0]) + ">"),
                                            s && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                            u ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                            n.push('<td class="text">' + jade.escape(null == (e = l.name) ? "" : e) + "</td></table></td>"),
                                            (t.rootScope.story && t.rootScope.story.hideVote && !c.closed) || n.push('<td class="result">' + jade.escape(null == (e = l.votes + " votes") ? "" : e) + "</td>"),
                                            t.rootScope.story && t.rootScope.story.hideVote && !c.closed && n.push('<td class="result">votes hidden</td>'),
                                            n.push("</tr>");
                                    }
                                }
                            }.call(this),
                            n.push('</table><div class="custom-choice">'),
                            c.custom && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                            n.push("</div></div></div>");
                    }
                    n.push("</div>");
                }.call(
                    this,
                    "encodeURIComponent" in i ? i.encodeURIComponent : "undefined" != typeof encodeURIComponent ? encodeURIComponent : void 0,
                    "rootScope" in i ? i.rootScope : "undefined" != typeof rootScope ? rootScope : void 0,
                    "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in i ? i.undefined : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/chat/jade/chatList"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o, a) {
                    n.push('<div class="jadeRepeat">'),
                        function () {
                            var s = t.data;
                            if ("number" == typeof s.length)
                                for (var l = 0, c = s.length; c > l; l++) {
                                    var u = s[l];
                                    n.push('<div class="logItem">');
                                    var d = t.rootScope.isAuthor,
                                        p = 0;
                                    if (!u) var u = t.chatMsg;
                                    if ((u.u && u.u[0] && u.u[0].n && "Anon" != u.u[0].n && (p = u.u[0].p), u.i || "choice" != u.nt))
                                        n.push("<div" + jade.attr("data-id", u._id, !0, !1) + jade.attr("plan", p, !0, !1) + jade.cls(["chatMsg", "join" == u.nt ? "join" : a], [null, !0]) + '><div class="user">'),
                                            u.u && u.u[0] && u.u[0].n && "Anon" != u.u[0].n
                                                ? (n.push("<a" + jade.attr("href", "/user/" + i(u.u[0].n), !0, !1) + ">"),
                                                  u.u[0] && u.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(u.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                                  n.push('<span class="name">' + jade.escape(null == (e = u.u[0].n) ? "" : e) + "</span></a>"))
                                                : n.push("<span>" + jade.escape(null == (e = t.rootScope.defaultNick || "Anon") ? "" : e) + "</span>"),
                                            n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(u.ct)) ? "" : e) + "</small></div><div" + jade.cls(["message", o.greenText(u.b)], [null, !0]) + ">"),
                                            u.ra &&
                                                u.ra._id != t.scope.chatID &&
                                                u.ra._id != t.chatID &&
                                                !u.ra.hide &&
                                                n.push("<div" + jade.attr("data-id", u.ra._id, !0, !1) + ' class="replyAt"><div class="text">> ' + jade.escape(null == (e = u.ra.b) ? "" : e) + "</div></div>"),
                                            u.i
                                                ? n.push("<img" + jade.attr("src", o.imageURLParser(u.i, 400, 400, "nocfill"), !0, !1) + "/>")
                                                : "join" != u.nt
                                                ? n.push('<div class="fieldBody">' + (null == (e = o.contentTransforms(u.b)) ? "" : e) + "</div>")
                                                : "join" == u.nt
                                                ? n.push('<div class="fieldBody">joins the room</div>')
                                                : "choice" == u.nt && n.push('<div class="fieldBody">posts a poll</div>'),
                                            n.push('</div><footer class="footer-links">'),
                                            u.p
                                                ? n.push('<div class="label replies"> <span class="value">' + jade.escape(null == (e = u.p) ? "" : e) + "</span> replies</div>")
                                                : n.push('<div class="label replies hidden"> <span class="value">' + jade.escape(null == (e = u.p) ? "" : e) + "</span> replies</div>"),
                                            n.push("</footer></div>");
                                    else {
                                        n.push('<div class="choice"><div' + jade.attr("data-id", u._id, !0, !1) + jade.cls(["inner", u.closed], [null, !0]) + '><h4 class="poll-head">'),
                                            u.closed
                                                ? n.push("<span>Choices - <small>Closed </small></span>")
                                                : (n.push("<span>"),
                                                  !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                                                  (r.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), u.multiple && n.push("<span>(select more than 1) </span>")),
                                                  n.push("</span>")),
                                            n.push("- ");
                                        var h = t.rootScope.votersCount(u);
                                        n.push("<small>"),
                                            0 == h ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = h) ? "" : e) + " "), 1 == h ? n.push("voter") : n.push("voters")),
                                            n.push('</small></h4><table class="poll">'),
                                            (u = t.rootScope.sortVotes(u)),
                                            function () {
                                                var i = u.sortedVotes;
                                                if ("number" == typeof i.length)
                                                    for (var r = 0, o = i.length; o > r; r++) {
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, u);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            d && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !u.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !u.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                else {
                                                    var o = 0;
                                                    for (var r in i) {
                                                        o++;
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, u);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            d && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !u.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !u.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                }
                                            }.call(this),
                                            n.push('</table><div class="custom-choice">'),
                                            u.custom && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                                            n.push("</div></div></div>");
                                    }
                                    n.push("</div>");
                                }
                            else {
                                var c = 0;
                                for (var l in s) {
                                    c++;
                                    var u = s[l];
                                    n.push('<div class="logItem">');
                                    var d = t.rootScope.isAuthor,
                                        p = 0;
                                    if (!u) var u = t.chatMsg;
                                    if ((u.u && u.u[0] && u.u[0].n && "Anon" != u.u[0].n && (p = u.u[0].p), u.i || "choice" != u.nt))
                                        n.push("<div" + jade.attr("data-id", u._id, !0, !1) + jade.attr("plan", p, !0, !1) + jade.cls(["chatMsg", "join" == u.nt ? "join" : a], [null, !0]) + '><div class="user">'),
                                            u.u && u.u[0] && u.u[0].n && "Anon" != u.u[0].n
                                                ? (n.push("<a" + jade.attr("href", "/user/" + i(u.u[0].n), !0, !1) + ">"),
                                                  u.u[0] && u.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(u.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                                  n.push('<span class="name">' + jade.escape(null == (e = u.u[0].n) ? "" : e) + "</span></a>"))
                                                : n.push("<span>" + jade.escape(null == (e = t.rootScope.defaultNick || "Anon") ? "" : e) + "</span>"),
                                            n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(u.ct)) ? "" : e) + "</small></div><div" + jade.cls(["message", o.greenText(u.b)], [null, !0]) + ">"),
                                            u.ra &&
                                                u.ra._id != t.scope.chatID &&
                                                u.ra._id != t.chatID &&
                                                !u.ra.hide &&
                                                n.push("<div" + jade.attr("data-id", u.ra._id, !0, !1) + ' class="replyAt"><div class="text">> ' + jade.escape(null == (e = u.ra.b) ? "" : e) + "</div></div>"),
                                            u.i
                                                ? n.push("<img" + jade.attr("src", o.imageURLParser(u.i, 400, 400, "nocfill"), !0, !1) + "/>")
                                                : "join" != u.nt
                                                ? n.push('<div class="fieldBody">' + (null == (e = o.contentTransforms(u.b)) ? "" : e) + "</div>")
                                                : "join" == u.nt
                                                ? n.push('<div class="fieldBody">joins the room</div>')
                                                : "choice" == u.nt && n.push('<div class="fieldBody">posts a poll</div>'),
                                            n.push('</div><footer class="footer-links">'),
                                            u.p
                                                ? n.push('<div class="label replies"> <span class="value">' + jade.escape(null == (e = u.p) ? "" : e) + "</span> replies</div>")
                                                : n.push('<div class="label replies hidden"> <span class="value">' + jade.escape(null == (e = u.p) ? "" : e) + "</span> replies</div>"),
                                            n.push("</footer></div>");
                                    else {
                                        n.push('<div class="choice"><div' + jade.attr("data-id", u._id, !0, !1) + jade.cls(["inner", u.closed], [null, !0]) + '><h4 class="poll-head">'),
                                            u.closed
                                                ? n.push("<span>Choices - <small>Closed </small></span>")
                                                : (n.push("<span>"),
                                                  !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                                                  (r.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), u.multiple && n.push("<span>(select more than 1) </span>")),
                                                  n.push("</span>")),
                                            n.push("- ");
                                        var h = t.rootScope.votersCount(u);
                                        n.push("<small>"),
                                            0 == h ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = h) ? "" : e) + " "), 1 == h ? n.push("voter") : n.push("voters")),
                                            n.push('</small></h4><table class="poll">'),
                                            (u = t.rootScope.sortVotes(u)),
                                            function () {
                                                var i = u.sortedVotes;
                                                if ("number" == typeof i.length)
                                                    for (var r = 0, o = i.length; o > r; r++) {
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, u);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            d && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !u.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !u.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                else {
                                                    var o = 0;
                                                    for (var r in i) {
                                                        o++;
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, u);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            d && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !u.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !u.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                }
                                            }.call(this),
                                            n.push('</table><div class="custom-choice">'),
                                            u.custom && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                                            n.push("</div></div></div>");
                                    }
                                    n.push("</div>");
                                }
                            }
                        }.call(this),
                        n.push("</div>");
                }.call(
                    this,
                    "encodeURIComponent" in i ? i.encodeURIComponent : "undefined" != typeof encodeURIComponent ? encodeURIComponent : void 0,
                    "rootScope" in i ? i.rootScope : "undefined" != typeof rootScope ? rootScope : void 0,
                    "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in i ? i.undefined : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/chat/jade/chatItemThreading"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o, a, s) {
                    n.push('<div class="logItem">');
                    var l = t.rootScope.isAuthor,
                        c = 0;
                    if (!u) var u = t.chatMsg;
                    if ((u.u && u.u[0] && u.u[0].n && "Anon" != u.u[0].n && (c = u.u[0].p), u.i || "choice" != u.nt)) {
                        if (
                            (n.push("<div" + jade.attr("data-id", u._id, !0, !1) + jade.attr("plan", c, !0, !1) + jade.cls(["chatMsg", "threading", "join" == u.nt ? "join" : a], [null, null, !0]) + '><div class="user">'),
                            u.u && u.u[0] && u.u[0].n && "Anon" != u.u[0].n
                                ? (n.push("<a" + jade.attr("href", "/user/" + i(u.u[0].n), !0, !1) + ">"),
                                  u.u[0] && u.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(u.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                  n.push('<span class="name">' + jade.escape(null == (e = u.u[0].n) ? "" : e) + "</span></a>"))
                                : n.push("<span>" + jade.escape(null == (e = t.rootScope.defaultNick || "Anon") ? "" : e) + "</span>"),
                            n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(u.ct)) ? "" : e) + "</small></div><div" + jade.cls(["message", o.greenText(u.b)], [null, !0]) + ">"),
                            u.ra &&
                                u.ra._id != t.scope.chatID &&
                                u.ra._id != t.chatID &&
                                !u.ra.hide &&
                                n.push("<div" + jade.attr("data-id", u.ra._id, !0, !1) + ' class="replyAt"><div class="text">> ' + jade.escape(null == (e = u.ra.b) ? "" : e) + "</div></div>"),
                            u.i
                                ? n.push("<img" + jade.attr("src", o.imageURLParser(u.i, 400, 400, "nocfill"), !0, !1) + "/>")
                                : "join" != u.nt
                                ? n.push('<div class="fieldBody">' + (null == (e = o.contentTransforms(u.b, !0)) ? "" : e) + "</div>")
                                : "join" == u.nt
                                ? n.push('<div class="fieldBody">joins the room</div>')
                                : "choice" == u.nt && n.push('<div class="fieldBody">posts a poll</div>'),
                            n.push("</div>"),
                            "join" != u.nt)
                        ) {
                            n.push('<footer class="footer-links"><a' + jade.cls(["dim-font-color", "expandThread", "btn", "small", u.p ? "" : "hidden"], [null, null, null, null, !0]) + ">show  "),
                                1 == u.p ? n.push("" + jade.escape(null == (e = u.p) ? "" : e) + " reply") : n.push("" + jade.escape(null == (e = u.p) ? "" : e) + " replies"),
                                n.push('</a><a class="dim-font-color openReply btn small">reply</a>');
                            var d = s.location.pathname.split("/");
                            d[d.length - 1] = u._id;
                            var p = u.b || "new-thread";
                            (p += ""), (d[d.length - 2] = o.url(p.substring(0, 30)));
                            var h = d.join("/");
                            n.push(
                                "<a" +
                                    jade.attr("data-id", u._id, !0, !1) +
                                    jade.attr("href", h, !0, !1) +
                                    ' target="_blank" class="dim-font-color btn small"><i class="fa fa-external-link"></i><span>new thread</span></a><a' +
                                    jade.attr("data-id", u._id, !0, !1) +
                                    ' class="dim-font-color openDetail btn small"><i class="fa fa-external-link"></i></a>'
                            ),
                                o.rootScope.isAuthor && n.push('<a class="dim-font-color delete btn small">delete</a><a class="dim-font-color ban btn small">ban</a>'),
                                n.push("</footer>");
                        }
                        n.push("</div>");
                    } else {
                        n.push('<div class="choice"><div' + jade.attr("data-id", u._id, !0, !1) + jade.cls(["inner", u.closed], [null, !0]) + '><h4 class="poll-head">'),
                            u.closed
                                ? n.push("<span>Choices - <small>Closed </small></span>")
                                : (n.push("<span>"),
                                  !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                                  (r.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), u.multiple && n.push("<span>(select more than 1) </span>")),
                                  n.push("</span>")),
                            n.push("- ");
                        var f = t.rootScope.votersCount(u);
                        n.push("<small>"),
                            0 == f ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = f) ? "" : e) + " "), 1 == f ? n.push("voter") : n.push("voters")),
                            n.push('</small></h4><table class="poll">'),
                            (u = t.rootScope.sortVotes(u)),
                            function () {
                                var i = u.sortedVotes;
                                if ("number" == typeof i.length)
                                    for (var r = 0, o = i.length; o > r; r++) {
                                        var s = i[r],
                                            c = t.rootScope.isActive(s.index, u);
                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", c ? "active" : a], [null, !0]) + ">"),
                                            l && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                            c ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                            (t.rootScope.story && t.rootScope.story.hideVote && !u.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                            t.rootScope.story && t.rootScope.story.hideVote && !u.closed && n.push('<td class="result">votes hidden</td>'),
                                            n.push("</tr>");
                                    }
                                else {
                                    var o = 0;
                                    for (var r in i) {
                                        o++;
                                        var s = i[r],
                                            c = t.rootScope.isActive(s.index, u);
                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", c ? "active" : a], [null, !0]) + ">"),
                                            l && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                            c ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                            (t.rootScope.story && t.rootScope.story.hideVote && !u.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                            t.rootScope.story && t.rootScope.story.hideVote && !u.closed && n.push('<td class="result">votes hidden</td>'),
                                            n.push("</tr>");
                                    }
                                }
                            }.call(this),
                            n.push('</table><div class="custom-choice">'),
                            u.custom && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                            n.push("</div></div></div>");
                    }
                    n.push("</div>");
                }.call(
                    this,
                    "encodeURIComponent" in i ? i.encodeURIComponent : "undefined" != typeof encodeURIComponent ? encodeURIComponent : void 0,
                    "rootScope" in i ? i.rootScope : "undefined" != typeof rootScope ? rootScope : void 0,
                    "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in i ? i.undefined : void 0,
                    "window" in i ? i.window : "undefined" != typeof window ? window : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/chat/jade/chatListThreading"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o, a, s) {
                    n.push('<div class="jadeRepeat">'),
                        function () {
                            var l = t.data;
                            if ("number" == typeof l.length)
                                for (var c = 0, u = l.length; u > c; c++) {
                                    var d = l[c];
                                    n.push('<div class="logItem">');
                                    var p = t.rootScope.isAuthor,
                                        h = 0;
                                    if (!d) var d = t.chatMsg;
                                    if ((d.u && d.u[0] && d.u[0].n && "Anon" != d.u[0].n && (h = d.u[0].p), d.i || "choice" != d.nt)) {
                                        if (
                                            (n.push("<div" + jade.attr("data-id", d._id, !0, !1) + jade.attr("plan", h, !0, !1) + jade.cls(["chatMsg", "threading", "join" == d.nt ? "join" : a], [null, null, !0]) + '><div class="user">'),
                                            d.u && d.u[0] && d.u[0].n && "Anon" != d.u[0].n
                                                ? (n.push("<a" + jade.attr("href", "/user/" + i(d.u[0].n), !0, !1) + ">"),
                                                  d.u[0] && d.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(d.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                                  n.push('<span class="name">' + jade.escape(null == (e = d.u[0].n) ? "" : e) + "</span></a>"))
                                                : n.push("<span>" + jade.escape(null == (e = t.rootScope.defaultNick || "Anon") ? "" : e) + "</span>"),
                                            n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(d.ct)) ? "" : e) + "</small></div><div" + jade.cls(["message", o.greenText(d.b)], [null, !0]) + ">"),
                                            d.ra &&
                                                d.ra._id != t.scope.chatID &&
                                                d.ra._id != t.chatID &&
                                                !d.ra.hide &&
                                                n.push("<div" + jade.attr("data-id", d.ra._id, !0, !1) + ' class="replyAt"><div class="text">> ' + jade.escape(null == (e = d.ra.b) ? "" : e) + "</div></div>"),
                                            d.i
                                                ? n.push("<img" + jade.attr("src", o.imageURLParser(d.i, 400, 400, "nocfill"), !0, !1) + "/>")
                                                : "join" != d.nt
                                                ? n.push('<div class="fieldBody">' + (null == (e = o.contentTransforms(d.b, !0)) ? "" : e) + "</div>")
                                                : "join" == d.nt
                                                ? n.push('<div class="fieldBody">joins the room</div>')
                                                : "choice" == d.nt && n.push('<div class="fieldBody">posts a poll</div>'),
                                            n.push("</div>"),
                                            "join" != d.nt)
                                        ) {
                                            n.push('<footer class="footer-links"><a' + jade.cls(["dim-font-color", "expandThread", "btn", "small", d.p ? "" : "hidden"], [null, null, null, null, !0]) + ">show  "),
                                                1 == d.p ? n.push("" + jade.escape(null == (e = d.p) ? "" : e) + " reply") : n.push("" + jade.escape(null == (e = d.p) ? "" : e) + " replies"),
                                                n.push('</a><a class="dim-font-color openReply btn small">reply</a>');
                                            var f = s.location.pathname.split("/");
                                            f[f.length - 1] = d._id;
                                            var m = d.b || "new-thread";
                                            (m += ""), (f[f.length - 2] = o.url(m.substring(0, 30)));
                                            var v = f.join("/");
                                            n.push(
                                                "<a" +
                                                    jade.attr("data-id", d._id, !0, !1) +
                                                    jade.attr("href", v, !0, !1) +
                                                    ' target="_blank" class="dim-font-color btn small"><i class="fa fa-external-link"></i><span>new thread</span></a><a' +
                                                    jade.attr("data-id", d._id, !0, !1) +
                                                    ' class="dim-font-color openDetail btn small"><i class="fa fa-external-link"></i></a>'
                                            ),
                                                o.rootScope.isAuthor && n.push('<a class="dim-font-color delete btn small">delete</a><a class="dim-font-color ban btn small">ban</a>'),
                                                n.push("</footer>");
                                        }
                                        n.push("</div>");
                                    } else {
                                        n.push('<div class="choice"><div' + jade.attr("data-id", d._id, !0, !1) + jade.cls(["inner", d.closed], [null, !0]) + '><h4 class="poll-head">'),
                                            d.closed
                                                ? n.push("<span>Choices - <small>Closed </small></span>")
                                                : (n.push("<span>"),
                                                  !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                                                  (r.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), d.multiple && n.push("<span>(select more than 1) </span>")),
                                                  n.push("</span>")),
                                            n.push("- ");
                                        var g = t.rootScope.votersCount(d);
                                        n.push("<small>"),
                                            0 == g ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = g) ? "" : e) + " "), 1 == g ? n.push("voter") : n.push("voters")),
                                            n.push('</small></h4><table class="poll">'),
                                            (d = t.rootScope.sortVotes(d)),
                                            function () {
                                                var i = d.sortedVotes;
                                                if ("number" == typeof i.length)
                                                    for (var r = 0, o = i.length; o > r; r++) {
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, d);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            p && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !d.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !d.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                else {
                                                    var o = 0;
                                                    for (var r in i) {
                                                        o++;
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, d);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            p && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !d.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !d.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                }
                                            }.call(this),
                                            n.push('</table><div class="custom-choice">'),
                                            d.custom && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                                            n.push("</div></div></div>");
                                    }
                                    n.push("</div>");
                                }
                            else {
                                var u = 0;
                                for (var c in l) {
                                    u++;
                                    var d = l[c];
                                    n.push('<div class="logItem">');
                                    var p = t.rootScope.isAuthor,
                                        h = 0;
                                    if (!d) var d = t.chatMsg;
                                    if ((d.u && d.u[0] && d.u[0].n && "Anon" != d.u[0].n && (h = d.u[0].p), d.i || "choice" != d.nt)) {
                                        if (
                                            (n.push("<div" + jade.attr("data-id", d._id, !0, !1) + jade.attr("plan", h, !0, !1) + jade.cls(["chatMsg", "threading", "join" == d.nt ? "join" : a], [null, null, !0]) + '><div class="user">'),
                                            d.u && d.u[0] && d.u[0].n && "Anon" != d.u[0].n
                                                ? (n.push("<a" + jade.attr("href", "/user/" + i(d.u[0].n), !0, !1) + ">"),
                                                  d.u[0] && d.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(d.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                                  n.push('<span class="name">' + jade.escape(null == (e = d.u[0].n) ? "" : e) + "</span></a>"))
                                                : n.push("<span>" + jade.escape(null == (e = t.rootScope.defaultNick || "Anon") ? "" : e) + "</span>"),
                                            n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(d.ct)) ? "" : e) + "</small></div><div" + jade.cls(["message", o.greenText(d.b)], [null, !0]) + ">"),
                                            d.ra &&
                                                d.ra._id != t.scope.chatID &&
                                                d.ra._id != t.chatID &&
                                                !d.ra.hide &&
                                                n.push("<div" + jade.attr("data-id", d.ra._id, !0, !1) + ' class="replyAt"><div class="text">> ' + jade.escape(null == (e = d.ra.b) ? "" : e) + "</div></div>"),
                                            d.i
                                                ? n.push("<img" + jade.attr("src", o.imageURLParser(d.i, 400, 400, "nocfill"), !0, !1) + "/>")
                                                : "join" != d.nt
                                                ? n.push('<div class="fieldBody">' + (null == (e = o.contentTransforms(d.b, !0)) ? "" : e) + "</div>")
                                                : "join" == d.nt
                                                ? n.push('<div class="fieldBody">joins the room</div>')
                                                : "choice" == d.nt && n.push('<div class="fieldBody">posts a poll</div>'),
                                            n.push("</div>"),
                                            "join" != d.nt)
                                        ) {
                                            n.push('<footer class="footer-links"><a' + jade.cls(["dim-font-color", "expandThread", "btn", "small", d.p ? "" : "hidden"], [null, null, null, null, !0]) + ">show  "),
                                                1 == d.p ? n.push("" + jade.escape(null == (e = d.p) ? "" : e) + " reply") : n.push("" + jade.escape(null == (e = d.p) ? "" : e) + " replies"),
                                                n.push('</a><a class="dim-font-color openReply btn small">reply</a>');
                                            var f = s.location.pathname.split("/");
                                            f[f.length - 1] = d._id;
                                            var m = d.b || "new-thread";
                                            (m += ""), (f[f.length - 2] = o.url(m.substring(0, 30)));
                                            var v = f.join("/");
                                            n.push(
                                                "<a" +
                                                    jade.attr("data-id", d._id, !0, !1) +
                                                    jade.attr("href", v, !0, !1) +
                                                    ' target="_blank" class="dim-font-color btn small"><i class="fa fa-external-link"></i><span>new thread</span></a><a' +
                                                    jade.attr("data-id", d._id, !0, !1) +
                                                    ' class="dim-font-color openDetail btn small"><i class="fa fa-external-link"></i></a>'
                                            ),
                                                o.rootScope.isAuthor && n.push('<a class="dim-font-color delete btn small">delete</a><a class="dim-font-color ban btn small">ban</a>'),
                                                n.push("</footer>");
                                        }
                                        n.push("</div>");
                                    } else {
                                        n.push('<div class="choice"><div' + jade.attr("data-id", d._id, !0, !1) + jade.cls(["inner", d.closed], [null, !0]) + '><h4 class="poll-head">'),
                                            d.closed
                                                ? n.push("<span>Choices - <small>Closed </small></span>")
                                                : (n.push("<span>"),
                                                  !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                                                  (r.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), d.multiple && n.push("<span>(select more than 1) </span>")),
                                                  n.push("</span>")),
                                            n.push("- ");
                                        var g = t.rootScope.votersCount(d);
                                        n.push("<small>"),
                                            0 == g ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = g) ? "" : e) + " "), 1 == g ? n.push("voter") : n.push("voters")),
                                            n.push('</small></h4><table class="poll">'),
                                            (d = t.rootScope.sortVotes(d)),
                                            function () {
                                                var i = d.sortedVotes;
                                                if ("number" == typeof i.length)
                                                    for (var r = 0, o = i.length; o > r; r++) {
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, d);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            p && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !d.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !d.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                else {
                                                    var o = 0;
                                                    for (var r in i) {
                                                        o++;
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, d);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            p && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !d.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !d.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                }
                                            }.call(this),
                                            n.push('</table><div class="custom-choice">'),
                                            d.custom && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                                            n.push("</div></div></div>");
                                    }
                                    n.push("</div>");
                                }
                            }
                        }.call(this),
                        n.push("</div>");
                }.call(
                    this,
                    "encodeURIComponent" in i ? i.encodeURIComponent : "undefined" != typeof encodeURIComponent ? encodeURIComponent : void 0,
                    "rootScope" in i ? i.rootScope : "undefined" != typeof rootScope ? rootScope : void 0,
                    "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in i ? i.undefined : void 0,
                    "window" in i ? i.window : "undefined" != typeof window ? window : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/chat/jade/choice"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o, a) {
                    n.push("<div" + jade.attr("data-id", i._id, !0, !1) + jade.cls(["inner", i.closed], [null, !0]) + '><h4 class="poll-head">'),
                        i.closed
                            ? n.push("<span>Choices - <small>Closed </small></span>")
                            : (n.push("<span>"),
                              !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                              (o.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), i.multiple && n.push("<span>(select more than 1) </span>")),
                              n.push("</span>")),
                        n.push("- ");
                    var s = t.rootScope.votersCount(i);
                    n.push("<small>"),
                        0 == s ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = s) ? "" : e) + " "), 1 == s ? n.push("voter") : n.push("voters")),
                        n.push('</small></h4><table class="poll">'),
                        (i = t.rootScope.sortVotes(i)),
                        function () {
                            var o = i.sortedVotes;
                            if ("number" == typeof o.length)
                                for (var s = 0, l = o.length; l > s; s++) {
                                    var c = o[s],
                                        u = t.rootScope.isActive(c.index, i);
                                    n.push("<tr" + jade.attr("data-index", c.index, !0, !1) + jade.cls(["choiceItem", u ? "active" : a], [null, !0]) + ">"),
                                        r && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                        n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                        u ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                        n.push('<td class="text">' + jade.escape(null == (e = c.name) ? "" : e) + "</td></table></td>"),
                                        (t.rootScope.story && t.rootScope.story.hideVote && !i.closed) || n.push('<td class="result">' + jade.escape(null == (e = c.votes + " votes") ? "" : e) + "</td>"),
                                        t.rootScope.story && t.rootScope.story.hideVote && !i.closed && n.push('<td class="result">votes hidden</td>'),
                                        n.push("</tr>");
                                }
                            else {
                                var l = 0;
                                for (var s in o) {
                                    l++;
                                    var c = o[s],
                                        u = t.rootScope.isActive(c.index, i);
                                    n.push("<tr" + jade.attr("data-index", c.index, !0, !1) + jade.cls(["choiceItem", u ? "active" : a], [null, !0]) + ">"),
                                        r && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                        n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                        u ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                        n.push('<td class="text">' + jade.escape(null == (e = c.name) ? "" : e) + "</td></table></td>"),
                                        (t.rootScope.story && t.rootScope.story.hideVote && !i.closed) || n.push('<td class="result">' + jade.escape(null == (e = c.votes + " votes") ? "" : e) + "</td>"),
                                        t.rootScope.story && t.rootScope.story.hideVote && !i.closed && n.push('<td class="result">votes hidden</td>'),
                                        n.push("</tr>");
                                }
                            }
                        }.call(this),
                        n.push('</table><div class="custom-choice">'),
                        i.custom && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                        n.push("</div></div>");
                }.call(
                    this,
                    "chatMsg" in i ? i.chatMsg : "undefined" != typeof chatMsg ? chatMsg : void 0,
                    "isAuthor" in i ? i.isAuthor : "undefined" != typeof isAuthor ? isAuthor : void 0,
                    "rootScope" in i ? i.rootScope : "undefined" != typeof rootScope ? rootScope : void 0,
                    "undefined" in i ? i.undefined : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/chat/jade/footerInput"] = function (t) {
        function e(t) {
            var e = [];
            return (
                e.push(
                    '<footer class="input"><div class="chatInputContainer"><form><textarea msd-elastic="msd-elastic" rows="1" placeholder="Message" class="span2 chatInput reply"></textarea><label title="Post image" class="image fa fa-photo"></label><input type="submit" value="Send" class="submit"/></form></div></footer>'
                ),
                e.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/chat/jade/footerReplies"] = function (t) {
        function e(t) {
            var e = [];
            return e.push('<footer class="replies"></footer>'), e.join("");
        }
        return e(t);
    }),
    (ty.templates["/tmpl/chat/jade/lightChatList"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o, a) {
                    n.push('<div class="chatLight"><div class="jadeRepeat"><header><button class="commentsClose">×</button><h3>Comments</h3></header>'),
                        function () {
                            var s = t.data;
                            if ("number" == typeof s.length)
                                for (var l = 0, c = s.length; c > l; l++) {
                                    var u = s[l];
                                    n.push('<div class="logItem">');
                                    var d = t.rootScope.isAuthor,
                                        p = 0;
                                    if (!u) var u = t.chatMsg;
                                    if ((u.u && u.u[0] && u.u[0].n && "Anon" != u.u[0].n && (p = u.u[0].p), u.i || "choice" != u.nt))
                                        n.push("<div" + jade.attr("data-id", u._id, !0, !1) + jade.attr("plan", p, !0, !1) + jade.cls(["chatMsg", "join" == u.nt ? "join" : a], [null, !0]) + '><div class="user">'),
                                            u.u && u.u[0] && u.u[0].n && "Anon" != u.u[0].n
                                                ? (n.push("<a" + jade.attr("href", "/user/" + i(u.u[0].n), !0, !1) + ">"),
                                                  u.u[0] && u.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(u.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                                  n.push('<span class="name">' + jade.escape(null == (e = u.u[0].n) ? "" : e) + "</span></a>"))
                                                : n.push("<span>" + jade.escape(null == (e = t.rootScope.defaultNick || "Anon") ? "" : e) + "</span>"),
                                            n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(u.ct)) ? "" : e) + "</small></div><div" + jade.cls(["message", o.greenText(u.b)], [null, !0]) + ">"),
                                            u.ra &&
                                                u.ra._id != t.scope.chatID &&
                                                u.ra._id != t.chatID &&
                                                !u.ra.hide &&
                                                n.push("<div" + jade.attr("data-id", u.ra._id, !0, !1) + ' class="replyAt"><div class="text">> ' + jade.escape(null == (e = u.ra.b) ? "" : e) + "</div></div>"),
                                            u.i
                                                ? n.push("<img" + jade.attr("src", o.imageURLParser(u.i, 400, 400, "nocfill"), !0, !1) + "/>")
                                                : "join" != u.nt
                                                ? n.push('<div class="fieldBody">' + (null == (e = o.contentTransforms(u.b)) ? "" : e) + "</div>")
                                                : "join" == u.nt
                                                ? n.push('<div class="fieldBody">joins the room</div>')
                                                : "choice" == u.nt && n.push('<div class="fieldBody">posts a poll</div>'),
                                            n.push('</div><footer class="footer-links">'),
                                            u.p
                                                ? n.push('<div class="label replies"> <span class="value">' + jade.escape(null == (e = u.p) ? "" : e) + "</span> replies</div>")
                                                : n.push('<div class="label replies hidden"> <span class="value">' + jade.escape(null == (e = u.p) ? "" : e) + "</span> replies</div>"),
                                            n.push("</footer></div>");
                                    else {
                                        n.push('<div class="choice"><div' + jade.attr("data-id", u._id, !0, !1) + jade.cls(["inner", u.closed], [null, !0]) + '><h4 class="poll-head">'),
                                            u.closed
                                                ? n.push("<span>Choices - <small>Closed </small></span>")
                                                : (n.push("<span>"),
                                                  !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                                                  (r.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), u.multiple && n.push("<span>(select more than 1) </span>")),
                                                  n.push("</span>")),
                                            n.push("- ");
                                        var h = t.rootScope.votersCount(u);
                                        n.push("<small>"),
                                            0 == h ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = h) ? "" : e) + " "), 1 == h ? n.push("voter") : n.push("voters")),
                                            n.push('</small></h4><table class="poll">'),
                                            (u = t.rootScope.sortVotes(u)),
                                            function () {
                                                var i = u.sortedVotes;
                                                if ("number" == typeof i.length)
                                                    for (var r = 0, o = i.length; o > r; r++) {
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, u);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            d && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !u.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !u.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                else {
                                                    var o = 0;
                                                    for (var r in i) {
                                                        o++;
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, u);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            d && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !u.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !u.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                }
                                            }.call(this),
                                            n.push('</table><div class="custom-choice">'),
                                            u.custom && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                                            n.push("</div></div></div>");
                                    }
                                    n.push("</div>");
                                }
                            else {
                                var c = 0;
                                for (var l in s) {
                                    c++;
                                    var u = s[l];
                                    n.push('<div class="logItem">');
                                    var d = t.rootScope.isAuthor,
                                        p = 0;
                                    if (!u) var u = t.chatMsg;
                                    if ((u.u && u.u[0] && u.u[0].n && "Anon" != u.u[0].n && (p = u.u[0].p), u.i || "choice" != u.nt))
                                        n.push("<div" + jade.attr("data-id", u._id, !0, !1) + jade.attr("plan", p, !0, !1) + jade.cls(["chatMsg", "join" == u.nt ? "join" : a], [null, !0]) + '><div class="user">'),
                                            u.u && u.u[0] && u.u[0].n && "Anon" != u.u[0].n
                                                ? (n.push("<a" + jade.attr("href", "/user/" + i(u.u[0].n), !0, !1) + ">"),
                                                  u.u[0] && u.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(u.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                                  n.push('<span class="name">' + jade.escape(null == (e = u.u[0].n) ? "" : e) + "</span></a>"))
                                                : n.push("<span>" + jade.escape(null == (e = t.rootScope.defaultNick || "Anon") ? "" : e) + "</span>"),
                                            n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(u.ct)) ? "" : e) + "</small></div><div" + jade.cls(["message", o.greenText(u.b)], [null, !0]) + ">"),
                                            u.ra &&
                                                u.ra._id != t.scope.chatID &&
                                                u.ra._id != t.chatID &&
                                                !u.ra.hide &&
                                                n.push("<div" + jade.attr("data-id", u.ra._id, !0, !1) + ' class="replyAt"><div class="text">> ' + jade.escape(null == (e = u.ra.b) ? "" : e) + "</div></div>"),
                                            u.i
                                                ? n.push("<img" + jade.attr("src", o.imageURLParser(u.i, 400, 400, "nocfill"), !0, !1) + "/>")
                                                : "join" != u.nt
                                                ? n.push('<div class="fieldBody">' + (null == (e = o.contentTransforms(u.b)) ? "" : e) + "</div>")
                                                : "join" == u.nt
                                                ? n.push('<div class="fieldBody">joins the room</div>')
                                                : "choice" == u.nt && n.push('<div class="fieldBody">posts a poll</div>'),
                                            n.push('</div><footer class="footer-links">'),
                                            u.p
                                                ? n.push('<div class="label replies"> <span class="value">' + jade.escape(null == (e = u.p) ? "" : e) + "</span> replies</div>")
                                                : n.push('<div class="label replies hidden"> <span class="value">' + jade.escape(null == (e = u.p) ? "" : e) + "</span> replies</div>"),
                                            n.push("</footer></div>");
                                    else {
                                        n.push('<div class="choice"><div' + jade.attr("data-id", u._id, !0, !1) + jade.cls(["inner", u.closed], [null, !0]) + '><h4 class="poll-head">'),
                                            u.closed
                                                ? n.push("<span>Choices - <small>Closed </small></span>")
                                                : (n.push("<span>"),
                                                  !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                                                  (r.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), u.multiple && n.push("<span>(select more than 1) </span>")),
                                                  n.push("</span>")),
                                            n.push("- ");
                                        var h = t.rootScope.votersCount(u);
                                        n.push("<small>"),
                                            0 == h ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = h) ? "" : e) + " "), 1 == h ? n.push("voter") : n.push("voters")),
                                            n.push('</small></h4><table class="poll">'),
                                            (u = t.rootScope.sortVotes(u)),
                                            function () {
                                                var i = u.sortedVotes;
                                                if ("number" == typeof i.length)
                                                    for (var r = 0, o = i.length; o > r; r++) {
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, u);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            d && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !u.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !u.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                else {
                                                    var o = 0;
                                                    for (var r in i) {
                                                        o++;
                                                        var s = i[r],
                                                            l = t.rootScope.isActive(s.index, u);
                                                        n.push("<tr" + jade.attr("data-index", s.index, !0, !1) + jade.cls(["choiceItem", l ? "active" : a], [null, !0]) + ">"),
                                                            d && n.push('<td title="Cross out this choice" class="icon remove xOut"><i class="icon fa-times fa"></i></td>'),
                                                            n.push('<td class="choiceMain voteChapter isThread"><table>'),
                                                            l ? n.push('<td class="add-on">[✓]</td>') : n.push('<td class="add-on">[  ]</td>'),
                                                            n.push('<td class="text">' + jade.escape(null == (e = s.name) ? "" : e) + "</td></table></td>"),
                                                            (t.rootScope.story && t.rootScope.story.hideVote && !u.closed) || n.push('<td class="result">' + jade.escape(null == (e = s.votes + " votes") ? "" : e) + "</td>"),
                                                            t.rootScope.story && t.rootScope.story.hideVote && !u.closed && n.push('<td class="result">votes hidden</td>'),
                                                            n.push("</tr>");
                                                    }
                                                }
                                            }.call(this),
                                            n.push('</table><div class="custom-choice">'),
                                            u.custom && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                                            n.push("</div></div></div>");
                                    }
                                    n.push("</div>");
                                }
                            }
                        }.call(this),
                        n.push(
                            '</div><footer class="input"><form class="chatInputContainer"><textarea msd-elastic="msd-elastic" rows="1" placeholder="Message"' +
                                jade.attr("data-id", t.scope.chatID, !0, !1) +
                                ' class="span2 chatInput"></textarea><label title="Post image"' +
                                jade.attr("data-id", t.scope.chatID, !0, !1) +
                                ' class="image fa fa-photo"></label><input type="submit" value="Send" class="submit"/></form></footer></div>'
                        );
                }.call(
                    this,
                    "encodeURIComponent" in i ? i.encodeURIComponent : "undefined" != typeof encodeURIComponent ? encodeURIComponent : void 0,
                    "rootScope" in i ? i.rootScope : "undefined" != typeof rootScope ? rootScope : void 0,
                    "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in i ? i.undefined : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/threads/jade/threadExpandedListItem"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o, a) {
                    n.push('<div class="threadList listView-small">');
                    var s = t.data;
                    i && i.threads && (s = i.threads),
                        function () {
                            var i = s;
                            if ("number" == typeof i.length)
                                for (var a = 0, l = i.length; l > a; a++) {
                                    var c = i[a];
                                    n.push("<div" + jade.attr("data-id", c._id, !0, !1) + ' threading="threading" class="chat">');
                                    var u = t.scope.currentThreadListHref + "/" + o.url(c.t) + "/" + c._id;
                                    n.push("<li" + jade.attr("data-id", c._id, !0, !1) + ' class="threadListItem logItem postItem listItemInner chatMsg threading"><div class="user">'),
                                        c.u &&
                                            c.u[0] &&
                                            c.u[0].n &&
                                            "Anon" != c.u[0].n &&
                                            (n.push("<a" + jade.attr("href", "/user/" + r(c.u[0].n), !0, !1) + ' class="userLink">'),
                                            c.u[0] && c.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(c.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                            n.push('<span class="name">' + jade.escape(null == (e = c.u[0].n) ? "" : e) + "</span></a>")),
                                        n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(c.ct)) ? "" : e) + "</small></div>"),
                                        c.t &&
                                            (n.push('<a target="_blank"' + jade.attr("href", u, !0, !1) + ' class="row title header">'),
                                            c.i && n.push("<img" + jade.attr("src", o.imageURLParser(c.i, 100, 45), !0, !1) + "/>"),
                                            n.push("<h3>" + jade.escape(null == (e = c.t) ? "" : e) + "</h3></a>")),
                                        n.push(
                                            '<div class="message"><div class="fieldBody">' +
                                                (null == (e = o.sanitize(c.b)) ? "" : e) +
                                                '</div></div><footer class="footer-links"><a' +
                                                jade.attr("replies", c.p, !0, !1) +
                                                jade.cls(["dim-font-color", "expandThread", "btn", "small", c.p ? "" : "hidden"], [null, null, null, null, !0]) +
                                                ">show  "
                                        ),
                                        1 == c.p ? n.push('<span class="count">' + jade.escape(null == (e = c.p) ? "" : e) + " </span> reply") : n.push('<span class="count">' + jade.escape(null == (e = c.p) ? "" : e) + " </span> replies"),
                                        n.push('</a><a class="dim-font-color openReply btn small">reply</a>'),
                                        o.rootScope.isAuthor &&
                                            n.push(
                                                '<a class="dim-font-color delete btn small">delete</a><a class="dim-font-color ban btn small">ban</a><a data-hint="Hide from main story." class="dim-font-color hide btn small hint--bottom">hide</a>'
                                            ),
                                        n.push("</footer>"),
                                        c && c.lr
                                            ? ((c = c.lr),
                                              n.push("<div" + jade.attr("data-id", c._id, !0, !1) + ' class="postItem listItemInner lastReply chatMsg replies threading"><div class="user">'),
                                              c.u &&
                                                  c.u[0] &&
                                                  c.u[0].n &&
                                                  "Anon" != c.u[0].n &&
                                                  (n.push("<a" + jade.attr("href", "/user/" + r(c.u[0].n), !0, !1) + ' class="userLink">'),
                                                  c.u[0] && c.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(c.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                                  n.push('<span class="name">' + jade.escape(null == (e = c.u[0].n) ? "" : e) + "</span></a>")),
                                              n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(c.ct)) ? "" : e) + "</small></div>"),
                                              c.i
                                                  ? n.push('<div class="message"><img' + jade.attr("src", o.imageURLParser(c.i, 100, 45), !0, !1) + "/></div>")
                                                  : n.push('<div class="message"><div class="fieldBody">' + (null == (e = o.sanitize(c.b)) ? "" : e) + "</div></div>"),
                                              n.push(
                                                  '<footer class="footer-links"><a' +
                                                      jade.attr("replies", c.p, !0, !1) +
                                                      jade.cls(["dim-font-color", "expandThread", "btn", "small", c.p ? "" : "hidden"], [null, null, null, null, !0]) +
                                                      ">show  "
                                              ),
                                              1 == c.p ? n.push("" + jade.escape(null == (e = c.p) ? "" : e) + " reply") : n.push("" + jade.escape(null == (e = c.p) ? "" : e) + " replies"),
                                              n.push('</a><a class="dim-font-color openReply btn small">reply</a>'),
                                              o.rootScope.isAuthor && n.push('<a class="dim-font-color delete btn small">delete</a><a class="dim-font-color ban btn small">ban</a>'),
                                              n.push("</footer></div>"))
                                            : n.push('<div class="postItem listItemInner lastReply replies"></div>'),
                                        n.push("</li></div>");
                                }
                            else {
                                var l = 0;
                                for (var a in i) {
                                    l++;
                                    var c = i[a];
                                    n.push("<div" + jade.attr("data-id", c._id, !0, !1) + ' threading="threading" class="chat">');
                                    var u = t.scope.currentThreadListHref + "/" + o.url(c.t) + "/" + c._id;
                                    n.push("<li" + jade.attr("data-id", c._id, !0, !1) + ' class="threadListItem logItem postItem listItemInner chatMsg threading"><div class="user">'),
                                        c.u &&
                                            c.u[0] &&
                                            c.u[0].n &&
                                            "Anon" != c.u[0].n &&
                                            (n.push("<a" + jade.attr("href", "/user/" + r(c.u[0].n), !0, !1) + ' class="userLink">'),
                                            c.u[0] && c.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(c.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                            n.push('<span class="name">' + jade.escape(null == (e = c.u[0].n) ? "" : e) + "</span></a>")),
                                        n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(c.ct)) ? "" : e) + "</small></div>"),
                                        c.t &&
                                            (n.push('<a target="_blank"' + jade.attr("href", u, !0, !1) + ' class="row title header">'),
                                            c.i && n.push("<img" + jade.attr("src", o.imageURLParser(c.i, 100, 45), !0, !1) + "/>"),
                                            n.push("<h3>" + jade.escape(null == (e = c.t) ? "" : e) + "</h3></a>")),
                                        n.push(
                                            '<div class="message"><div class="fieldBody">' +
                                                (null == (e = o.sanitize(c.b)) ? "" : e) +
                                                '</div></div><footer class="footer-links"><a' +
                                                jade.attr("replies", c.p, !0, !1) +
                                                jade.cls(["dim-font-color", "expandThread", "btn", "small", c.p ? "" : "hidden"], [null, null, null, null, !0]) +
                                                ">show  "
                                        ),
                                        1 == c.p ? n.push('<span class="count">' + jade.escape(null == (e = c.p) ? "" : e) + " </span> reply") : n.push('<span class="count">' + jade.escape(null == (e = c.p) ? "" : e) + " </span> replies"),
                                        n.push('</a><a class="dim-font-color openReply btn small">reply</a>'),
                                        o.rootScope.isAuthor &&
                                            n.push(
                                                '<a class="dim-font-color delete btn small">delete</a><a class="dim-font-color ban btn small">ban</a><a data-hint="Hide from main story." class="dim-font-color hide btn small hint--bottom">hide</a>'
                                            ),
                                        n.push("</footer>"),
                                        c && c.lr
                                            ? ((c = c.lr),
                                              n.push("<div" + jade.attr("data-id", c._id, !0, !1) + ' class="postItem listItemInner lastReply chatMsg replies threading"><div class="user">'),
                                              c.u &&
                                                  c.u[0] &&
                                                  c.u[0].n &&
                                                  "Anon" != c.u[0].n &&
                                                  (n.push("<a" + jade.attr("href", "/user/" + r(c.u[0].n), !0, !1) + ' class="userLink">'),
                                                  c.u[0] && c.u[0].a && n.push("<img" + jade.attr("src", o.imageURLParser(c.u[0].a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                                  n.push('<span class="name">' + jade.escape(null == (e = c.u[0].n) ? "" : e) + "</span></a>")),
                                              n.push('<small class="time">' + jade.escape(null == (e = o.formatTime(c.ct)) ? "" : e) + "</small></div>"),
                                              c.i
                                                  ? n.push('<div class="message"><img' + jade.attr("src", o.imageURLParser(c.i, 100, 45), !0, !1) + "/></div>")
                                                  : n.push('<div class="message"><div class="fieldBody">' + (null == (e = o.sanitize(c.b)) ? "" : e) + "</div></div>"),
                                              n.push(
                                                  '<footer class="footer-links"><a' +
                                                      jade.attr("replies", c.p, !0, !1) +
                                                      jade.cls(["dim-font-color", "expandThread", "btn", "small", c.p ? "" : "hidden"], [null, null, null, null, !0]) +
                                                      ">show  "
                                              ),
                                              1 == c.p ? n.push("" + jade.escape(null == (e = c.p) ? "" : e) + " reply") : n.push("" + jade.escape(null == (e = c.p) ? "" : e) + " replies"),
                                              n.push('</a><a class="dim-font-color openReply btn small">reply</a>'),
                                              o.rootScope.isAuthor && n.push('<a class="dim-font-color delete btn small">delete</a><a class="dim-font-color ban btn small">ban</a>'),
                                              n.push("</footer></div>"))
                                            : n.push('<div class="postItem listItemInner lastReply replies"></div>'),
                                        n.push("</li></div>");
                                }
                            }
                        }.call(this),
                        n.push("</div>");
                }.call(
                    this,
                    "chapter" in i ? i.chapter : "undefined" != typeof chapter ? chapter : void 0,
                    "encodeURIComponent" in i ? i.encodeURIComponent : "undefined" != typeof encodeURIComponent ? encodeURIComponent : void 0,
                    "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in i ? i.undefined : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/threads/jade/threadListItem"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o, a) {
                    n.push('<div class="threadList listView-small">');
                    var s = t.data;
                    r && r.threads && (s = r.threads),
                        function () {
                            var r = s;
                            if ("number" == typeof r.length)
                                for (var a = 0, l = r.length; l > a; a++) {
                                    var c = r[a];
                                    n.push("<li" + jade.attr("data-id", c._id, !0, !1) + ' class="threadListItem">');
                                    var u = t.scope.currentThreadListHref + "/" + o.url(c.t) + "/" + c._id;
                                    n.push("<a" + jade.attr("href", u, !0, !1) + ' class="postItem listItemInner"><table class="inner"><tr>'),
                                        c.i && n.push("<td><img" + jade.attr("src", o.imageURLParser(c.i, 100, 45), !0, !1) + "/></td>"),
                                        n.push('<td><div class="row title header">'),
                                        c.t ? n.push("<h4>" + jade.escape(null == (e = c.t) ? "" : e) + "</h4>") : n.push("<h4>" + jade.escape(null == (e = c.b) ? "" : e) + "</h4>"),
                                        n.push('</div><div class="row"><div class="coverStats">');
                                    var d = c.u[0];
                                    n.push('<span class="user stat">'),
                                        d.a && n.push("<img" + jade.attr("src", o.imageURLParser(d.a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                        d.n ? n.push("<span>" + jade.escape(null == (e = d.n) ? "" : e) + "</span>") : n.push("<span>Anon</span>"),
                                        n.push("</span>"),
                                        c.p && n.push('<div class="stat comments"><i class="fa-comments-o fa"></i><span>' + jade.escape(null == (e = c.p) ? "" : e) + "</span></div>"),
                                        n.push('<div class="stat">');
                                    var p = i.timeago(c.ut);
                                    n.push("<span>" + jade.escape(null == (e = p) ? "" : e) + '</span></div></div></div></td></tr></table></a><a class="popout openThreadDetail"><i class="fa fa-external-link-square"></i></a></li>');
                                }
                            else {
                                var l = 0;
                                for (var a in r) {
                                    l++;
                                    var c = r[a];
                                    n.push("<li" + jade.attr("data-id", c._id, !0, !1) + ' class="threadListItem">');
                                    var u = t.scope.currentThreadListHref + "/" + o.url(c.t) + "/" + c._id;
                                    n.push("<a" + jade.attr("href", u, !0, !1) + ' class="postItem listItemInner"><table class="inner"><tr>'),
                                        c.i && n.push("<td><img" + jade.attr("src", o.imageURLParser(c.i, 100, 45), !0, !1) + "/></td>"),
                                        n.push('<td><div class="row title header">'),
                                        c.t ? n.push("<h4>" + jade.escape(null == (e = c.t) ? "" : e) + "</h4>") : n.push("<h4>" + jade.escape(null == (e = c.b) ? "" : e) + "</h4>"),
                                        n.push('</div><div class="row"><div class="coverStats">');
                                    var d = c.u[0];
                                    n.push('<span class="user stat">'),
                                        d.a && n.push("<img" + jade.attr("src", o.imageURLParser(d.a, 16, 16), !0, !1) + ' class="avatar"/>'),
                                        d.n ? n.push("<span>" + jade.escape(null == (e = d.n) ? "" : e) + "</span>") : n.push("<span>Anon</span>"),
                                        n.push("</span>"),
                                        c.p && n.push('<div class="stat comments"><i class="fa-comments-o fa"></i><span>' + jade.escape(null == (e = c.p) ? "" : e) + "</span></div>"),
                                        n.push('<div class="stat">');
                                    var p = i.timeago(c.ut);
                                    n.push("<span>" + jade.escape(null == (e = p) ? "" : e) + '</span></div></div></div></td></tr></table></a><a class="popout openThreadDetail"><i class="fa fa-external-link-square"></i></a></li>');
                                }
                            }
                        }.call(this),
                        n.push("</div>");
                }.call(
                    this,
                    "$" in i ? i.$ : "undefined" != typeof $ ? $ : void 0,
                    "chapter" in i ? i.chapter : "undefined" != typeof chapter ? chapter : void 0,
                    "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in i ? i.undefined : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/board/jade/sideList"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r) {
                    n.push(
                        '<nav class="boards"><li class="header"><a href="/stories">From all boards</a></li><li><a href="/stories"' +
                            jade.cls(["boardItem", t.rootScope.activeLink("/stories")], [null, !0]) +
                            '><div class="topDetails">all</div></a></li>'
                    ),
                        function () {
                            var r = t.data;
                            if ("number" == typeof r.length)
                                for (var o = 0, a = r.length; a > o; o++) {
                                    var s = r[o];
                                    n.push("<li>");
                                    var l = "/" + i.url(s);
                                    n.push("<a" + jade.attr("href", l, !0, !1) + jade.cls(["boardItem", t.rootScope.activeLink(l)], [null, !0]) + '><div class="topDetails">' + jade.escape(null == (e = s) ? "" : e) + "</div></a></li>");
                                }
                            else {
                                var a = 0;
                                for (var o in r) {
                                    a++;
                                    var s = r[o];
                                    n.push("<li>");
                                    var l = "/" + i.url(s);
                                    n.push("<a" + jade.attr("href", l, !0, !1) + jade.cls(["boardItem", t.rootScope.activeLink(l)], [null, !0]) + '><div class="topDetails">' + jade.escape(null == (e = s) ? "" : e) + "</div></a></li>");
                                }
                            }
                        }.call(this),
                        n.push("</nav>");
                }.call(this, "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0, "undefined" in i ? i.undefined : void 0),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/board/jade/boardListItem"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r) {
                    n.push('<div class="boards storiesList listView-grid">'),
                        function () {
                            var r = t.data;
                            if ("number" == typeof r.length)
                                for (var o = 0, a = r.length; a > o; o++) {
                                    var s = r[o];
                                    n.push('<li class="boardItem">');
                                    var l = "/" + i.url(s.t);
                                    n.push("<a" + jade.attr("data-id", s._id, !0, !1) + jade.attr("href", l, !0, !1) + ' class="listItemInner"><div class="inner"><div class="imgContainer">'),
                                        function () {
                                            var t = s.i;
                                            if ("number" == typeof t.length)
                                                for (var e = 0, r = t.length; r > e; e++) {
                                                    var o = t[e],
                                                        a = i.imageURLParser(o, 110, 83);
                                                    n.push("<img" + jade.attr("src", a, !0, !1) + "/>");
                                                }
                                            else {
                                                var r = 0;
                                                for (var e in t) {
                                                    r++;
                                                    var o = t[e],
                                                        a = i.imageURLParser(o, 110, 83);
                                                    n.push("<img" + jade.attr("src", a, !0, !1) + "/>");
                                                }
                                            }
                                        }.call(this),
                                        n.push('</div><div class="information"><div class="title"><h2>' + jade.escape(null == (e = s.t) ? "" : e) + '</h2></div><div class="coverStats">'),
                                        s.sub && n.push('<div class="stat"><i class="fa fa-star"></i><span>' + jade.escape(null == (e = s.sub + " followers") ? "" : e) + "</span></div>"),
                                        n.push("</div></div></div></a></li>");
                                }
                            else {
                                var a = 0;
                                for (var o in r) {
                                    a++;
                                    var s = r[o];
                                    n.push('<li class="boardItem">');
                                    var l = "/" + i.url(s.t);
                                    n.push("<a" + jade.attr("data-id", s._id, !0, !1) + jade.attr("href", l, !0, !1) + ' class="listItemInner"><div class="inner"><div class="imgContainer">'),
                                        function () {
                                            var t = s.i;
                                            if ("number" == typeof t.length)
                                                for (var e = 0, r = t.length; r > e; e++) {
                                                    var o = t[e],
                                                        a = i.imageURLParser(o, 110, 83);
                                                    n.push("<img" + jade.attr("src", a, !0, !1) + "/>");
                                                }
                                            else {
                                                var r = 0;
                                                for (var e in t) {
                                                    r++;
                                                    var o = t[e],
                                                        a = i.imageURLParser(o, 110, 83);
                                                    n.push("<img" + jade.attr("src", a, !0, !1) + "/>");
                                                }
                                            }
                                        }.call(this),
                                        n.push('</div><div class="information"><div class="title"><h2>' + jade.escape(null == (e = s.t) ? "" : e) + '</h2></div><div class="coverStats">'),
                                        s.sub && n.push('<div class="stat"><i class="fa fa-star"></i><span>' + jade.escape(null == (e = s.sub + " followers") ? "" : e) + "</span></div>"),
                                        n.push("</div></div></div></a></li>");
                                }
                            }
                        }.call(this),
                        n.push("</div>");
                }.call(this, "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0, "undefined" in i ? i.undefined : void 0),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/board/jade/watching"] = function (t) {
        function e(t) {
            var e = [],
                n = t || {};
            return (
                function (n, i, r) {
                    e.push('<nav class="following"><li class="header"><a' + jade.attr("href", "/user/" + n(t.rootScope.currentUser.username) + "/collections/watching/", !0, !1) + ">Watching</a></li>"),
                        function () {
                            var n = t.data.collectionList;
                            if ("number" == typeof n.length)
                                for (var o = 0, a = n.length; a > o; o++) {
                                    var s = n[o],
                                        l = s.r;
                                    l && (l = s.r[0]);
                                    var c = "/" + (l || "stories") + "/" + i.url(s.t) + "/" + s._id;
                                    e.push(
                                        "<a" +
                                            jade.attr("href", c, !0, !1) +
                                            jade.attr("data-hint", s.t, !0, !1) +
                                            jade.cls(["storyListItem", "listItemInner", "hint--right", t.rootScope.checkReadHistory(s) ? "readHistory" : r], [null, null, null, !0]) +
                                            '><div class="column imgContainer">'
                                    ),
                                        s.isLive && e.push('<div class="live-icon label-important label">Live</div>'),
                                        e.push('<div class="image">'),
                                        s.i && s.i[0] ? e.push("<img" + jade.attr("src", i.imageURLParser(s.i[0], 80, 80), !0, !1) + jade.attr("alt", s.t, !0, !1) + "/>") : e.push('<img src="//placekitten.com/g/80/80"/>'),
                                        e.push("</div></div></a>");
                                }
                            else {
                                var a = 0;
                                for (var o in n) {
                                    a++;
                                    var s = n[o],
                                        l = s.r;
                                    l && (l = s.r[0]);
                                    var c = "/" + (l || "stories") + "/" + i.url(s.t) + "/" + s._id;
                                    e.push(
                                        "<a" +
                                            jade.attr("href", c, !0, !1) +
                                            jade.attr("data-hint", s.t, !0, !1) +
                                            jade.cls(["storyListItem", "listItemInner", "hint--right", t.rootScope.checkReadHistory(s) ? "readHistory" : r], [null, null, null, !0]) +
                                            '><div class="column imgContainer">'
                                    ),
                                        s.isLive && e.push('<div class="live-icon label-important label">Live</div>'),
                                        e.push('<div class="image">'),
                                        s.i && s.i[0] ? e.push("<img" + jade.attr("src", i.imageURLParser(s.i[0], 80, 80), !0, !1) + jade.attr("alt", s.t, !0, !1) + "/>") : e.push('<img src="//placekitten.com/g/80/80"/>'),
                                        e.push("</div></div></a>");
                                }
                            }
                        }.call(this),
                        e.push("</nav>");
                }.call(
                    this,
                    "encodeURIComponent" in n ? n.encodeURIComponent : "undefined" != typeof encodeURIComponent ? encodeURIComponent : void 0,
                    "ty" in n ? n.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in n ? n.undefined : void 0
                ),
                e.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/board/jade/following"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o) {
                    n.push('<nav class="following"><li class="header"><a' + jade.attr("href", "/user/" + i(t.rootScope.currentUser.username) + "/following", !0, !1) + ">Following</a></li>"),
                        function () {
                            var o = t.data;
                            if ("number" == typeof o.length)
                                for (var a = 0, s = o.length; s > a; a++) {
                                    var l = o[a];
                                    n.push("<li>");
                                    var c = "/user/" + i(l.username);
                                    n.push("<a" + jade.attr("href", c, !0, !1) + jade.cls(["boardItem", t.rootScope.activeLink(c)], [null, !0]) + ">"),
                                        l.profile && l.profile.image && n.push("<img" + jade.attr("src", r.imageURLParser(l.profile.image, 16, 16), !0, !1) + ' class="avatar"/>'),
                                        n.push('<span class="name">' + jade.escape(null == (e = l.username) ? "" : e) + "</span></a></li>");
                                }
                            else {
                                var s = 0;
                                for (var a in o) {
                                    s++;
                                    var l = o[a];
                                    n.push("<li>");
                                    var c = "/user/" + i(l.username);
                                    n.push("<a" + jade.attr("href", c, !0, !1) + jade.cls(["boardItem", t.rootScope.activeLink(c)], [null, !0]) + ">"),
                                        l.profile && l.profile.image && n.push("<img" + jade.attr("src", r.imageURLParser(l.profile.image, 16, 16), !0, !1) + ' class="avatar"/>'),
                                        n.push('<span class="name">' + jade.escape(null == (e = l.username) ? "" : e) + "</span></a></li>");
                                }
                            }
                        }.call(this),
                        n.push("</nav>");
                }.call(
                    this,
                    "encodeURIComponent" in i ? i.encodeURIComponent : "undefined" != typeof encodeURIComponent ? encodeURIComponent : void 0,
                    "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in i ? i.undefined : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/board/jade/collections"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o) {
                    n.push('<nav><li class="header"><a' + jade.attr("href", "/user/" + i(t.rootScope.currentUser.username) + "/collections", !0, !1) + ">Collections</a></li>"),
                        function () {
                            var o = t.data;
                            if ("number" == typeof o.length)
                                for (var a = 0, s = o.length; s > a; a++) {
                                    var l = o[a],
                                        c = "/user/" + i(t.rootScope.currentUser.username) + "/collections/" + r.url(l.t);
                                    n.push("<a" + jade.attr("href", c, !0, !1) + jade.cls(["boardItem", t.rootScope.activeLink(c)], [null, !0]) + '><span class="name">' + jade.escape(null == (e = l.t) ? "" : e) + "</span></a>");
                                }
                            else {
                                var s = 0;
                                for (var a in o) {
                                    s++;
                                    var l = o[a],
                                        c = "/user/" + i(t.rootScope.currentUser.username) + "/collections/" + r.url(l.t);
                                    n.push("<a" + jade.attr("href", c, !0, !1) + jade.cls(["boardItem", t.rootScope.activeLink(c)], [null, !0]) + '><span class="name">' + jade.escape(null == (e = l.t) ? "" : e) + "</span></a>");
                                }
                            }
                        }.call(this),
                        n.push("</nav>");
                }.call(
                    this,
                    "encodeURIComponent" in i ? i.encodeURIComponent : "undefined" != typeof encodeURIComponent ? encodeURIComponent : void 0,
                    "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in i ? i.undefined : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/board/jade/watchingExternal"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r) {
                    n.push("<nav>"),
                        function () {
                            var o = t.data;
                            if ("number" == typeof o.length)
                                for (var a = 0, s = o.length; s > a; a++) {
                                    var l = o[a],
                                        c = l.r;
                                    c && (c = l.r[0]);
                                    var u = "/" + (c || "stories") + "/" + i.url(l.t) + "/" + l._id;
                                    n.push(
                                        "<a" +
                                            jade.attr("href", u, !0, !1) +
                                            jade.attr("tooltip-content", l.t, !0, !1) +
                                            jade.attr("data-title", l.t, !0, !1) +
                                            jade.attr("data-id", l._id, !0, !1) +
                                            jade.cls(["storyListItem", "listItemInner", t.rootScope.story && t.rootScope.story._id === l._id ? "active" : r], [null, null, !0]) +
                                            '><div class="column imgContainer"><div' +
                                            jade.cls(["live-icon", "label-important", "label", l.isLive ? "" : "hidden"], [null, null, null, !0]) +
                                            ">Live</div><div" +
                                            jade.attr("data-nextLive", l.nextLive, !0, !1) +
                                            ' class="nextLive label"></div><div' +
                                            jade.cls(["newPosts", "label", l.pDiff ? "" : "hidden"], [null, null, !0]) +
                                            "> <span" +
                                            jade.cls(["newChapter", l.noNewChapter ? "hidden" : ""], [null, !0]) +
                                            '>n</span><span class="value">' +
                                            jade.escape(null == (e = l.pDiff) ? "" : e) +
                                            '</span></div><div class="image">'
                                    ),
                                        l.i && l.i[0] ? n.push("<img" + jade.attr("src", i.imageURLParser(l.i[0], 60, 60), !0, !1) + jade.attr("alt", l.t, !0, !1) + "/>") : n.push('<img src="//placekitten.com/g/60/60"/>'),
                                        n.push("</div></div></a>");
                                }
                            else {
                                var s = 0;
                                for (var a in o) {
                                    s++;
                                    var l = o[a],
                                        c = l.r;
                                    c && (c = l.r[0]);
                                    var u = "/" + (c || "stories") + "/" + i.url(l.t) + "/" + l._id;
                                    n.push(
                                        "<a" +
                                            jade.attr("href", u, !0, !1) +
                                            jade.attr("tooltip-content", l.t, !0, !1) +
                                            jade.attr("data-title", l.t, !0, !1) +
                                            jade.attr("data-id", l._id, !0, !1) +
                                            jade.cls(["storyListItem", "listItemInner", t.rootScope.story && t.rootScope.story._id === l._id ? "active" : r], [null, null, !0]) +
                                            '><div class="column imgContainer"><div' +
                                            jade.cls(["live-icon", "label-important", "label", l.isLive ? "" : "hidden"], [null, null, null, !0]) +
                                            ">Live</div><div" +
                                            jade.attr("data-nextLive", l.nextLive, !0, !1) +
                                            ' class="nextLive label"></div><div' +
                                            jade.cls(["newPosts", "label", l.pDiff ? "" : "hidden"], [null, null, !0]) +
                                            "> <span" +
                                            jade.cls(["newChapter", l.noNewChapter ? "hidden" : ""], [null, !0]) +
                                            '>n</span><span class="value">' +
                                            jade.escape(null == (e = l.pDiff) ? "" : e) +
                                            '</span></div><div class="image">'
                                    ),
                                        l.i && l.i[0] ? n.push("<img" + jade.attr("src", i.imageURLParser(l.i[0], 60, 60), !0, !1) + jade.attr("alt", l.t, !0, !1) + "/>") : n.push('<img src="//placekitten.com/g/60/60"/>'),
                                        n.push("</div></div></a>");
                                }
                            }
                        }.call(this),
                        n.push(
                            '<a tooltip-content="Add this story to your watching list." class="storyListItem addStoryToWatching"><div class="column imgContainer"><div class="image"><span>+</span></div></div></a><a class="storyListItem hideLeftSideBar"><div class="column imgContainer"><div class="image"><span>< Hide</span></div></div></a></nav>'
                        );
                }.call(this, "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0, "undefined" in i ? i.undefined : void 0),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/story/jade/chapterList"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o, a) {
                    if ((n.push('<div class="jadeRepeat">'), t.scope.currentlyViewingSpecial)) var s = t.data;
                    else
                        var s = i.filter(t.data, function (t) {
                            var e = t.t;
                            return i.startsWith(e, "#special") ? !1 : !0;
                        });
                    (function () {
                        var i = s;
                        if ("number" == typeof i.length)
                            for (var l = 0, c = i.length; c > l; l++) {
                                var u = i[l];
                                if (!u) var u = t.chapter;
                                var d = function () {
                                    return "choice" == u.nt ? "choice" : "readerPost" == u.nt ? "readerPost" : void 0;
                                };
                                if ((n.push("<article" + jade.attr("data-id", u._id, !0, !1) + jade.attr("data-ct", u.ct, !0, !1) + jade.cls(["chapter", d()], [null, !0]) + '><div class="chapterContent">'), "choice" == u.nt)) {
                                    var p = t.rootScope.isAuthor,
                                        h = t.chapter || u,
                                        f = t.rootScope.story;
                                    n.push("<div" + jade.attr("data-id", h._id, !0, !1) + ' isAuthor="isAuthor"' + jade.cls(["inner", "fieldBody", h.closed], [null, null, !0]) + '><h4 class="poll-head">'),
                                        h.closed
                                            ? n.push("<span>Choices -<small>Voting closed </small></span>")
                                            : (n.push("<span>"),
                                              !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                                              (r.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), h.multiple && n.push("<span>(select more than 1) </span>")),
                                              n.push("</span>")),
                                        n.push("-");
                                    var m = t.rootScope.votersCount(h);
                                    n.push("<small>"),
                                        0 == m ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = m) ? "" : e) + " "), 1 == m ? n.push("voter") : n.push("voters")),
                                        n.push('</small></h4><table class="poll"><tr>'),
                                        p && n.push("<th> </th>"),
                                        n.push("<th> </th>"),
                                        p && u.closed && f.multiRoute && n.push("<th> </th>"),
                                        n.push("<th>Votes</th></tr>"),
                                        (h = t.rootScope.sortVotes(h)),
                                        function () {
                                            var i = h.sortedVotes;
                                            if ("number" == typeof i.length)
                                                for (var r = 0, o = i.length; o > r; r++) {
                                                    var s = i[r],
                                                        l = t.rootScope.isActive(s.index, h),
                                                        c = t.scope.meetsRouteRequirements(s.index, h),
                                                        d = t.scope.getRouteRequirements(s.index, h);
                                                    if (
                                                        (n.push(
                                                            "<tr" +
                                                                jade.attr("data-index", s.index, !0, !1) +
                                                                jade.attr("routeRequirement", d, !0, !1) +
                                                                jade.attr("meetsRouteRequirements", c, !0, !1) +
                                                                jade.cls(["choiceItem", l ? "active" : a], [null, !0]) +
                                                                ">"
                                                        ),
                                                        p &&
                                                            (n.push('<td title="Edit or Cross out this choice" class="icon remove editOption"><i class="icon fa-edit fa"></i></td>'),
                                                            u.closed &&
                                                                f.multiRoute &&
                                                                (n.push(
                                                                    '<td popover-title="Route Controller" popover-append-to-body="true" dropdown="dropdown"><div data-toggle="dropdown" dropdown-toggle="dropdown-toggle" data-hint="Edit routes" class="icon route dropdown-toggle hint--right"><i class="icon fa-code-fork fa"></i></div><div dropdown="dropdown" class="dropdown-menu popover"><div data-hint="A route is a different branch in the story." class="formItem hint--right"><div class="btn icon route popover-toggle createRoute"><i class="icon fa-code-fork fa"></i><span>Create a new route</span></div></div><div data-hint="You can get the ID of the route from the end of the url." class="formItem hint--right"><label>Set Route ID</label>'
                                                                ),
                                                                u.routes ? n.push('<input type="text"' + jade.attr("value", u.routes[s.index], !0, !1) + ' class="editRouteID"/>') : n.push('<input type="text" class="editRouteID"/>'),
                                                                n.push('</div><div data-hint="Only allow the user to access this option if certain variables are exist." class="formItem hint--right"><label>Require Variable Flag</label>'),
                                                                u.routeRequirements
                                                                    ? n.push('<input type="text"' + jade.attr("value", u.routeRequirements[s.index], !0, !1) + ' class="editRouteRequirements"/>')
                                                                    : n.push('<input type="text" class="editRouteRequirements"/>'),
                                                                n.push("</div></div></td>"))),
                                                        n.push('<td class="choiceMain voteChapter"><table>'),
                                                        s.route
                                                            ? (n.push('<td class="text">'),
                                                              "sibling" == t.rootScope.currentTypeRoute() &&
                                                                  n.push("<a" + jade.attr("ui-sref", "^.route({ routeID:'" + s.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = s.name) ? "" : e) + "</a>"),
                                                              "child" == t.rootScope.currentTypeRoute() &&
                                                                  n.push("<a" + jade.attr("ui-sref", ".route({ routeID:'" + s.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = s.name) ? "" : e) + "</a>"),
                                                              n.push("</td>"))
                                                            : n.push('<td class="text"><span>' + jade.escape(null == (e = s.name) ? "" : e) + "</span></td>"),
                                                        n.push("</table></td>"),
                                                        (t.rootScope.story && t.rootScope.story.hideVote && !h.closed) ||
                                                            (n.push('<td class="result">'),
                                                            s.userVotes &&
                                                                n.push(
                                                                    '<span data-hint="Verified Votes" class="userVote hint--top"><i class="icon fa fa-star"></i><span>' +
                                                                        jade.escape(null == (e = s.userVotes + "/") ? "" : e) +
                                                                        "</span></span>"
                                                                ),
                                                            n.push('<span data-hint="Total Votes" class="hint--top">' + jade.escape(null == (e = s.votes) ? "" : e) + "</span></td>")),
                                                        t.rootScope.story && t.rootScope.story.hideVote && !h.closed && n.push('<td class="result">votes hidden</td>'),
                                                        n.push('<td title="Comment"' + jade.attr("data-index", s.index, !0, !1) + jade.attr("data-name", s.name, !0, !1) + ' class="icon discussChoice comment">'),
                                                        h.choiceReplies && h.choiceReplies[s.index])
                                                    ) {
                                                        var m = h.choiceReplies[s.index].count;
                                                        m && n.push('<span class="label label-info value">' + jade.escape(null == (e = m) ? "" : e) + "</span>");
                                                    }
                                                    n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                                }
                                            else {
                                                var o = 0;
                                                for (var r in i) {
                                                    o++;
                                                    var s = i[r],
                                                        l = t.rootScope.isActive(s.index, h),
                                                        c = t.scope.meetsRouteRequirements(s.index, h),
                                                        d = t.scope.getRouteRequirements(s.index, h);
                                                    if (
                                                        (n.push(
                                                            "<tr" +
                                                                jade.attr("data-index", s.index, !0, !1) +
                                                                jade.attr("routeRequirement", d, !0, !1) +
                                                                jade.attr("meetsRouteRequirements", c, !0, !1) +
                                                                jade.cls(["choiceItem", l ? "active" : a], [null, !0]) +
                                                                ">"
                                                        ),
                                                        p &&
                                                            (n.push('<td title="Edit or Cross out this choice" class="icon remove editOption"><i class="icon fa-edit fa"></i></td>'),
                                                            u.closed &&
                                                                f.multiRoute &&
                                                                (n.push(
                                                                    '<td popover-title="Route Controller" popover-append-to-body="true" dropdown="dropdown"><div data-toggle="dropdown" dropdown-toggle="dropdown-toggle" data-hint="Edit routes" class="icon route dropdown-toggle hint--right"><i class="icon fa-code-fork fa"></i></div><div dropdown="dropdown" class="dropdown-menu popover"><div data-hint="A route is a different branch in the story." class="formItem hint--right"><div class="btn icon route popover-toggle createRoute"><i class="icon fa-code-fork fa"></i><span>Create a new route</span></div></div><div data-hint="You can get the ID of the route from the end of the url." class="formItem hint--right"><label>Set Route ID</label>'
                                                                ),
                                                                u.routes ? n.push('<input type="text"' + jade.attr("value", u.routes[s.index], !0, !1) + ' class="editRouteID"/>') : n.push('<input type="text" class="editRouteID"/>'),
                                                                n.push('</div><div data-hint="Only allow the user to access this option if certain variables are exist." class="formItem hint--right"><label>Require Variable Flag</label>'),
                                                                u.routeRequirements
                                                                    ? n.push('<input type="text"' + jade.attr("value", u.routeRequirements[s.index], !0, !1) + ' class="editRouteRequirements"/>')
                                                                    : n.push('<input type="text" class="editRouteRequirements"/>'),
                                                                n.push("</div></div></td>"))),
                                                        n.push('<td class="choiceMain voteChapter"><table>'),
                                                        s.route
                                                            ? (n.push('<td class="text">'),
                                                              "sibling" == t.rootScope.currentTypeRoute() &&
                                                                  n.push("<a" + jade.attr("ui-sref", "^.route({ routeID:'" + s.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = s.name) ? "" : e) + "</a>"),
                                                              "child" == t.rootScope.currentTypeRoute() &&
                                                                  n.push("<a" + jade.attr("ui-sref", ".route({ routeID:'" + s.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = s.name) ? "" : e) + "</a>"),
                                                              n.push("</td>"))
                                                            : n.push('<td class="text"><span>' + jade.escape(null == (e = s.name) ? "" : e) + "</span></td>"),
                                                        n.push("</table></td>"),
                                                        (t.rootScope.story && t.rootScope.story.hideVote && !h.closed) ||
                                                            (n.push('<td class="result">'),
                                                            s.userVotes &&
                                                                n.push(
                                                                    '<span data-hint="Verified Votes" class="userVote hint--top"><i class="icon fa fa-star"></i><span>' +
                                                                        jade.escape(null == (e = s.userVotes + "/") ? "" : e) +
                                                                        "</span></span>"
                                                                ),
                                                            n.push('<span data-hint="Total Votes" class="hint--top">' + jade.escape(null == (e = s.votes) ? "" : e) + "</span></td>")),
                                                        t.rootScope.story && t.rootScope.story.hideVote && !h.closed && n.push('<td class="result">votes hidden</td>'),
                                                        n.push('<td title="Comment"' + jade.attr("data-index", s.index, !0, !1) + jade.attr("data-name", s.name, !0, !1) + ' class="icon discussChoice comment">'),
                                                        h.choiceReplies && h.choiceReplies[s.index])
                                                    ) {
                                                        var m = h.choiceReplies[s.index].count;
                                                        m && n.push('<span class="label label-info value">' + jade.escape(null == (e = m) ? "" : e) + "</span>");
                                                    }
                                                    n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                                }
                                            }
                                        }.call(this),
                                        h.xOut &&
                                            function () {
                                                var t = h.xOut;
                                                if ("number" == typeof t.length)
                                                    for (var i = 0, r = t.length; r > i; i++) {
                                                        var o = t[i];
                                                        if ("permanentlyRemoved" != h.choices[o]) {
                                                            if (
                                                                (n.push("<tr" + jade.attr("data-index", o, !0, !1) + ' class="choiceItem xOut">'),
                                                                p && (n.push('<td title="Return this choice to the poll" class="icon xOutReturn"><i class="icon fa-plus fa"></i></td>'), u.closed && f.multiRoute && n.push("<td></td>")),
                                                                n.push('<td class="choiceMain"><table><td class="text"><div class="value">' + jade.escape(null == (e = h.choices[o]) ? "" : e) + "</div>"),
                                                                h.xOutReasons && n.push('<div class="reason">' + jade.escape(null == (e = h.xOutReasons[o]) ? "" : e) + "</div>"),
                                                                n.push("</td></table></td>"),
                                                                p ? n.push('<td data-hint="Permanently remove this choice" class="remove permanentlyRemove icon"><i class="icon fa-times fa"></i></td>') : n.push("<td></td>"),
                                                                n.push('<td title="Comment"' + jade.attr("data-index", o, !0, !1) + jade.attr("data-name", h.choices[o], !0, !1) + ' class="icon discussChoice comment">'),
                                                                h.choiceReplies && h.choiceReplies[o])
                                                            ) {
                                                                var a = h.choiceReplies[o].count;
                                                                a && n.push('<span class="label label-info value">' + jade.escape(null == (e = a) ? "" : e) + "</span>");
                                                            }
                                                            n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                                        }
                                                    }
                                                else {
                                                    var r = 0;
                                                    for (var i in t) {
                                                        r++;
                                                        var o = t[i];
                                                        if ("permanentlyRemoved" != h.choices[o]) {
                                                            if (
                                                                (n.push("<tr" + jade.attr("data-index", o, !0, !1) + ' class="choiceItem xOut">'),
                                                                p && (n.push('<td title="Return this choice to the poll" class="icon xOutReturn"><i class="icon fa-plus fa"></i></td>'), u.closed && f.multiRoute && n.push("<td></td>")),
                                                                n.push('<td class="choiceMain"><table><td class="text"><div class="value">' + jade.escape(null == (e = h.choices[o]) ? "" : e) + "</div>"),
                                                                h.xOutReasons && n.push('<div class="reason">' + jade.escape(null == (e = h.xOutReasons[o]) ? "" : e) + "</div>"),
                                                                n.push("</td></table></td>"),
                                                                p ? n.push('<td data-hint="Permanently remove this choice" class="remove permanentlyRemove icon"><i class="icon fa-times fa"></i></td>') : n.push("<td></td>"),
                                                                n.push('<td title="Comment"' + jade.attr("data-index", o, !0, !1) + jade.attr("data-name", h.choices[o], !0, !1) + ' class="icon discussChoice comment">'),
                                                                h.choiceReplies && h.choiceReplies[o])
                                                            ) {
                                                                var a = h.choiceReplies[o].count;
                                                                a && n.push('<span class="label label-info value">' + jade.escape(null == (e = a) ? "" : e) + "</span>");
                                                            }
                                                            n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                                        }
                                                    }
                                                }
                                            }.call(this),
                                        n.push('</table><div class="custom-choice">'),
                                        (h.custom || p) && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                                        n.push("</div>"),
                                        p &&
                                            (n.push('<footer class="poll-control">'),
                                            u.closed ? n.push('<div class="btn open-poll tooltip-target">Open Poll</div>') : n.push('<div class="btn close-poll">Close Poll</div>'),
                                            n.push("</footer>")),
                                        n.push("</div>");
                                } else if ("readerPost" == u.nt) {
                                    var p = t.rootScope.isAuthor;
                                    if (!u) var u = t.chapter;
                                    n.push("<div" + jade.attr("data-id", u._id, !0, !1) + jade.cls(["inner", u.closed], [null, !0]) + '><h4 class="poll-head">Reader Posts - '),
                                        u.closed && n.push("<small>Closed - </small>"),
                                        u.closed || t.rootScope.currentUser || !t.scope.votePermission || n.push("<span>Login to post</span>");
                                    var m = t.rootScope.votersCount(u);
                                    n.push("<small>"),
                                        0 == m ? n.push("be the first to post.") : (n.push("" + jade.escape(null == (e = m) ? "" : e) + " "), 1 == m ? n.push("post") : n.push("posts")),
                                        n.push('</small></h4><div class="readerPosts fieldBody">'),
                                        u.votes &&
                                            function () {
                                                var t = u.votes;
                                                if ("number" == typeof t.length)
                                                    for (var i = 0, r = t.length; r > i; i++) {
                                                        var o = t[i];
                                                        n.push('<div class="post choiceItem">'),
                                                            u.dice && u.dice[i] && n.push('<div class="dice">' + (null == (e = u.dice[i]) ? "" : e) + "</div>"),
                                                            n.push('<div class="value">' + (null == (e = o) ? "" : e) + "</div></div>");
                                                    }
                                                else {
                                                    var r = 0;
                                                    for (var i in t) {
                                                        r++;
                                                        var o = t[i];
                                                        n.push('<div class="post choiceItem">'),
                                                            u.dice && u.dice[i] && n.push('<div class="dice">' + (null == (e = u.dice[i]) ? "" : e) + "</div>"),
                                                            n.push('<div class="value">' + (null == (e = o) ? "" : e) + "</div></div>");
                                                    }
                                                }
                                            }.call(this),
                                        u.dice &&
                                            function () {
                                                var t = u.dice;
                                                if ("number" == typeof t.length)
                                                    for (var i = 0, r = t.length; r > i; i++) {
                                                        t[i];
                                                        (u.votes && u.votes[i]) || (n.push('<div class="post choiceItem">'), u.dice[i] && n.push('<div class="dice">' + (null == (e = u.dice[i]) ? "" : e) + "</div>"), n.push("</div>"));
                                                    }
                                                else {
                                                    var r = 0;
                                                    for (var i in t) {
                                                        r++;
                                                        t[i];
                                                        (u.votes && u.votes[i]) || (n.push('<div class="post choiceItem">'), u.dice[i] && n.push('<div class="dice">' + (null == (e = u.dice[i]) ? "" : e) + "</div>"), n.push("</div>"));
                                                    }
                                                }
                                            }.call(this),
                                        n.push('</div><div class="custom-choice"><textarea class="fieldEditor"></textarea><div class="btn save-readerPost addReaderPost pull-right">Submit your own post</div></div>'),
                                        p && (n.push('<footer class="poll-control">'), u.closed ? n.push('<div class="btn open-poll">Open Responses</div>') : n.push('<div class="btn close-poll">Close Responses</div>'), n.push("</footer>")),
                                        n.push("</div>");
                                } else {
                                    if (!u) var u = t.chapter;
                                    n.push('<div ng-non-bindable="ng-non-bindable" class="fieldBody">' + (null == (e = t.scope.transformChapter(u.b)) ? "" : e) + "</div>");
                                }
                                n.push('</div><div class="editContainer"></div><footer class="chapter-footer"><div class="secondRow"><span class="ut">' + jade.escape(null == (e = o.formatTime(u.ct)) ? "" : e) + "</span>"),
                                    t.scope.isRoute &&
                                        n.push(
                                            '<div ng-show="isRoute" data-hint="Create a save file for this story. You can always load the save file to get back to exactly this location." class="save btn btn-group saveProgress very-dim-font-color hover-link-color"><i class="fa-save fa"></i><span>Save Progress</span></div>'
                                        ),
                                    n.push('<div class="btn-group">'),
                                    t.rootScope.isAuthor && n.push('<div class="edit editChapter btn very-dim-font-color hover-font-color"><i class="fa-edit fa"></i><span>Edit</span></div>'),
                                    n.push('<a class="btn newTopic very-dim-font-color hover-green showWhenDiscussionClosed"><i class="fa fa-plus"></i><span>New Topic</span></a>'),
                                    u.p &&
                                        (n.push('<a class="btn expandComments very-dim-font-color hover-font-color showWhenDiscussionClosed"><i class="fa fa-comments"></i>'),
                                        u.p > 1 ? n.push("<span>" + jade.escape(null == (e = u.p) ? "" : e) + " comments</span>") : n.push("<span>" + jade.escape(null == (e = u.p) ? "" : e) + " comment</span>"),
                                        n.push("</a>")),
                                    n.push('<a class="btn comments openChapterChatDetail very-dim-font-color hover-link-color"><i class="fa fa-external-link-square"></i>'),
                                    u.p || n.push("<span>comment</span>"),
                                    n.push(
                                        '</a></div></div><div class="discussions"><div class="tabbable"><button class="close closeDiscussions bottom">x</button><button class="close closeDiscussions">x</button><ul class="nav btn-set"><li class="active"><a' +
                                            jade.attr("data-target", "[data-id=" + u._id + "] .topicsTab", !0, !1) +
                                            ' data-toggle="tab" class="commentsClose">Discussion Topics</a></li><li><a' +
                                            jade.attr("data-target", "[data-id=" + u._id + "] .chatTab", !0, !1) +
                                            ' data-toggle="tab" class="expandComments">Chat (' +
                                            jade.escape(null == (e = u.p) ? "" : e) +
                                            ')</a></li></ul><div class="tab-content"><div class="topicsTab tab-pane active"><div class="newTopicContainer"><a class="btn newTopic very-dim-font-color hover-green"><i class="fa fa-plus"></i><span>New Topic</span></a></div></div><div class="chatTab tab-pane"><div class="chat"><div class="chatLog chapterComments"></div></div></div></div></div></div></footer></article>'
                                    );
                            }
                        else {
                            var c = 0;
                            for (var l in i) {
                                c++;
                                var u = i[l];
                                if (!u) var u = t.chapter;
                                var d = function () {
                                    return "choice" == u.nt ? "choice" : "readerPost" == u.nt ? "readerPost" : void 0;
                                };
                                if ((n.push("<article" + jade.attr("data-id", u._id, !0, !1) + jade.attr("data-ct", u.ct, !0, !1) + jade.cls(["chapter", d()], [null, !0]) + '><div class="chapterContent">'), "choice" == u.nt)) {
                                    var p = t.rootScope.isAuthor,
                                        h = t.chapter || u,
                                        f = t.rootScope.story;
                                    n.push("<div" + jade.attr("data-id", h._id, !0, !1) + ' isAuthor="isAuthor"' + jade.cls(["inner", "fieldBody", h.closed], [null, null, !0]) + '><h4 class="poll-head">'),
                                        h.closed
                                            ? n.push("<span>Choices -<small>Voting closed </small></span>")
                                            : (n.push("<span>"),
                                              !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                                              (r.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), h.multiple && n.push("<span>(select more than 1) </span>")),
                                              n.push("</span>")),
                                        n.push("-");
                                    var m = t.rootScope.votersCount(h);
                                    n.push("<small>"),
                                        0 == m ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = m) ? "" : e) + " "), 1 == m ? n.push("voter") : n.push("voters")),
                                        n.push('</small></h4><table class="poll"><tr>'),
                                        p && n.push("<th> </th>"),
                                        n.push("<th> </th>"),
                                        p && u.closed && f.multiRoute && n.push("<th> </th>"),
                                        n.push("<th>Votes</th></tr>"),
                                        (h = t.rootScope.sortVotes(h)),
                                        function () {
                                            var i = h.sortedVotes;
                                            if ("number" == typeof i.length)
                                                for (var r = 0, o = i.length; o > r; r++) {
                                                    var s = i[r],
                                                        l = t.rootScope.isActive(s.index, h),
                                                        c = t.scope.meetsRouteRequirements(s.index, h),
                                                        d = t.scope.getRouteRequirements(s.index, h);
                                                    if (
                                                        (n.push(
                                                            "<tr" +
                                                                jade.attr("data-index", s.index, !0, !1) +
                                                                jade.attr("routeRequirement", d, !0, !1) +
                                                                jade.attr("meetsRouteRequirements", c, !0, !1) +
                                                                jade.cls(["choiceItem", l ? "active" : a], [null, !0]) +
                                                                ">"
                                                        ),
                                                        p &&
                                                            (n.push('<td title="Edit or Cross out this choice" class="icon remove editOption"><i class="icon fa-edit fa"></i></td>'),
                                                            u.closed &&
                                                                f.multiRoute &&
                                                                (n.push(
                                                                    '<td popover-title="Route Controller" popover-append-to-body="true" dropdown="dropdown"><div data-toggle="dropdown" dropdown-toggle="dropdown-toggle" data-hint="Edit routes" class="icon route dropdown-toggle hint--right"><i class="icon fa-code-fork fa"></i></div><div dropdown="dropdown" class="dropdown-menu popover"><div data-hint="A route is a different branch in the story." class="formItem hint--right"><div class="btn icon route popover-toggle createRoute"><i class="icon fa-code-fork fa"></i><span>Create a new route</span></div></div><div data-hint="You can get the ID of the route from the end of the url." class="formItem hint--right"><label>Set Route ID</label>'
                                                                ),
                                                                u.routes ? n.push('<input type="text"' + jade.attr("value", u.routes[s.index], !0, !1) + ' class="editRouteID"/>') : n.push('<input type="text" class="editRouteID"/>'),
                                                                n.push('</div><div data-hint="Only allow the user to access this option if certain variables are exist." class="formItem hint--right"><label>Require Variable Flag</label>'),
                                                                u.routeRequirements
                                                                    ? n.push('<input type="text"' + jade.attr("value", u.routeRequirements[s.index], !0, !1) + ' class="editRouteRequirements"/>')
                                                                    : n.push('<input type="text" class="editRouteRequirements"/>'),
                                                                n.push("</div></div></td>"))),
                                                        n.push('<td class="choiceMain voteChapter"><table>'),
                                                        s.route
                                                            ? (n.push('<td class="text">'),
                                                              "sibling" == t.rootScope.currentTypeRoute() &&
                                                                  n.push("<a" + jade.attr("ui-sref", "^.route({ routeID:'" + s.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = s.name) ? "" : e) + "</a>"),
                                                              "child" == t.rootScope.currentTypeRoute() &&
                                                                  n.push("<a" + jade.attr("ui-sref", ".route({ routeID:'" + s.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = s.name) ? "" : e) + "</a>"),
                                                              n.push("</td>"))
                                                            : n.push('<td class="text"><span>' + jade.escape(null == (e = s.name) ? "" : e) + "</span></td>"),
                                                        n.push("</table></td>"),
                                                        (t.rootScope.story && t.rootScope.story.hideVote && !h.closed) ||
                                                            (n.push('<td class="result">'),
                                                            s.userVotes &&
                                                                n.push(
                                                                    '<span data-hint="Verified Votes" class="userVote hint--top"><i class="icon fa fa-star"></i><span>' +
                                                                        jade.escape(null == (e = s.userVotes + "/") ? "" : e) +
                                                                        "</span></span>"
                                                                ),
                                                            n.push('<span data-hint="Total Votes" class="hint--top">' + jade.escape(null == (e = s.votes) ? "" : e) + "</span></td>")),
                                                        t.rootScope.story && t.rootScope.story.hideVote && !h.closed && n.push('<td class="result">votes hidden</td>'),
                                                        n.push('<td title="Comment"' + jade.attr("data-index", s.index, !0, !1) + jade.attr("data-name", s.name, !0, !1) + ' class="icon discussChoice comment">'),
                                                        h.choiceReplies && h.choiceReplies[s.index])
                                                    ) {
                                                        var m = h.choiceReplies[s.index].count;
                                                        m && n.push('<span class="label label-info value">' + jade.escape(null == (e = m) ? "" : e) + "</span>");
                                                    }
                                                    n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                                }
                                            else {
                                                var o = 0;
                                                for (var r in i) {
                                                    o++;
                                                    var s = i[r],
                                                        l = t.rootScope.isActive(s.index, h),
                                                        c = t.scope.meetsRouteRequirements(s.index, h),
                                                        d = t.scope.getRouteRequirements(s.index, h);
                                                    if (
                                                        (n.push(
                                                            "<tr" +
                                                                jade.attr("data-index", s.index, !0, !1) +
                                                                jade.attr("routeRequirement", d, !0, !1) +
                                                                jade.attr("meetsRouteRequirements", c, !0, !1) +
                                                                jade.cls(["choiceItem", l ? "active" : a], [null, !0]) +
                                                                ">"
                                                        ),
                                                        p &&
                                                            (n.push('<td title="Edit or Cross out this choice" class="icon remove editOption"><i class="icon fa-edit fa"></i></td>'),
                                                            u.closed &&
                                                                f.multiRoute &&
                                                                (n.push(
                                                                    '<td popover-title="Route Controller" popover-append-to-body="true" dropdown="dropdown"><div data-toggle="dropdown" dropdown-toggle="dropdown-toggle" data-hint="Edit routes" class="icon route dropdown-toggle hint--right"><i class="icon fa-code-fork fa"></i></div><div dropdown="dropdown" class="dropdown-menu popover"><div data-hint="A route is a different branch in the story." class="formItem hint--right"><div class="btn icon route popover-toggle createRoute"><i class="icon fa-code-fork fa"></i><span>Create a new route</span></div></div><div data-hint="You can get the ID of the route from the end of the url." class="formItem hint--right"><label>Set Route ID</label>'
                                                                ),
                                                                u.routes ? n.push('<input type="text"' + jade.attr("value", u.routes[s.index], !0, !1) + ' class="editRouteID"/>') : n.push('<input type="text" class="editRouteID"/>'),
                                                                n.push('</div><div data-hint="Only allow the user to access this option if certain variables are exist." class="formItem hint--right"><label>Require Variable Flag</label>'),
                                                                u.routeRequirements
                                                                    ? n.push('<input type="text"' + jade.attr("value", u.routeRequirements[s.index], !0, !1) + ' class="editRouteRequirements"/>')
                                                                    : n.push('<input type="text" class="editRouteRequirements"/>'),
                                                                n.push("</div></div></td>"))),
                                                        n.push('<td class="choiceMain voteChapter"><table>'),
                                                        s.route
                                                            ? (n.push('<td class="text">'),
                                                              "sibling" == t.rootScope.currentTypeRoute() &&
                                                                  n.push("<a" + jade.attr("ui-sref", "^.route({ routeID:'" + s.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = s.name) ? "" : e) + "</a>"),
                                                              "child" == t.rootScope.currentTypeRoute() &&
                                                                  n.push("<a" + jade.attr("ui-sref", ".route({ routeID:'" + s.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = s.name) ? "" : e) + "</a>"),
                                                              n.push("</td>"))
                                                            : n.push('<td class="text"><span>' + jade.escape(null == (e = s.name) ? "" : e) + "</span></td>"),
                                                        n.push("</table></td>"),
                                                        (t.rootScope.story && t.rootScope.story.hideVote && !h.closed) ||
                                                            (n.push('<td class="result">'),
                                                            s.userVotes &&
                                                                n.push(
                                                                    '<span data-hint="Verified Votes" class="userVote hint--top"><i class="icon fa fa-star"></i><span>' +
                                                                        jade.escape(null == (e = s.userVotes + "/") ? "" : e) +
                                                                        "</span></span>"
                                                                ),
                                                            n.push('<span data-hint="Total Votes" class="hint--top">' + jade.escape(null == (e = s.votes) ? "" : e) + "</span></td>")),
                                                        t.rootScope.story && t.rootScope.story.hideVote && !h.closed && n.push('<td class="result">votes hidden</td>'),
                                                        n.push('<td title="Comment"' + jade.attr("data-index", s.index, !0, !1) + jade.attr("data-name", s.name, !0, !1) + ' class="icon discussChoice comment">'),
                                                        h.choiceReplies && h.choiceReplies[s.index])
                                                    ) {
                                                        var m = h.choiceReplies[s.index].count;
                                                        m && n.push('<span class="label label-info value">' + jade.escape(null == (e = m) ? "" : e) + "</span>");
                                                    }
                                                    n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                                }
                                            }
                                        }.call(this),
                                        h.xOut &&
                                            function () {
                                                var t = h.xOut;
                                                if ("number" == typeof t.length)
                                                    for (var i = 0, r = t.length; r > i; i++) {
                                                        var o = t[i];
                                                        if ("permanentlyRemoved" != h.choices[o]) {
                                                            if (
                                                                (n.push("<tr" + jade.attr("data-index", o, !0, !1) + ' class="choiceItem xOut">'),
                                                                p && (n.push('<td title="Return this choice to the poll" class="icon xOutReturn"><i class="icon fa-plus fa"></i></td>'), u.closed && f.multiRoute && n.push("<td></td>")),
                                                                n.push('<td class="choiceMain"><table><td class="text"><div class="value">' + jade.escape(null == (e = h.choices[o]) ? "" : e) + "</div>"),
                                                                h.xOutReasons && n.push('<div class="reason">' + jade.escape(null == (e = h.xOutReasons[o]) ? "" : e) + "</div>"),
                                                                n.push("</td></table></td>"),
                                                                p ? n.push('<td data-hint="Permanently remove this choice" class="remove permanentlyRemove icon"><i class="icon fa-times fa"></i></td>') : n.push("<td></td>"),
                                                                n.push('<td title="Comment"' + jade.attr("data-index", o, !0, !1) + jade.attr("data-name", h.choices[o], !0, !1) + ' class="icon discussChoice comment">'),
                                                                h.choiceReplies && h.choiceReplies[o])
                                                            ) {
                                                                var a = h.choiceReplies[o].count;
                                                                a && n.push('<span class="label label-info value">' + jade.escape(null == (e = a) ? "" : e) + "</span>");
                                                            }
                                                            n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                                        }
                                                    }
                                                else {
                                                    var r = 0;
                                                    for (var i in t) {
                                                        r++;
                                                        var o = t[i];
                                                        if ("permanentlyRemoved" != h.choices[o]) {
                                                            if (
                                                                (n.push("<tr" + jade.attr("data-index", o, !0, !1) + ' class="choiceItem xOut">'),
                                                                p && (n.push('<td title="Return this choice to the poll" class="icon xOutReturn"><i class="icon fa-plus fa"></i></td>'), u.closed && f.multiRoute && n.push("<td></td>")),
                                                                n.push('<td class="choiceMain"><table><td class="text"><div class="value">' + jade.escape(null == (e = h.choices[o]) ? "" : e) + "</div>"),
                                                                h.xOutReasons && n.push('<div class="reason">' + jade.escape(null == (e = h.xOutReasons[o]) ? "" : e) + "</div>"),
                                                                n.push("</td></table></td>"),
                                                                p ? n.push('<td data-hint="Permanently remove this choice" class="remove permanentlyRemove icon"><i class="icon fa-times fa"></i></td>') : n.push("<td></td>"),
                                                                n.push('<td title="Comment"' + jade.attr("data-index", o, !0, !1) + jade.attr("data-name", h.choices[o], !0, !1) + ' class="icon discussChoice comment">'),
                                                                h.choiceReplies && h.choiceReplies[o])
                                                            ) {
                                                                var a = h.choiceReplies[o].count;
                                                                a && n.push('<span class="label label-info value">' + jade.escape(null == (e = a) ? "" : e) + "</span>");
                                                            }
                                                            n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                                        }
                                                    }
                                                }
                                            }.call(this),
                                        n.push('</table><div class="custom-choice">'),
                                        (h.custom || p) && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                                        n.push("</div>"),
                                        p &&
                                            (n.push('<footer class="poll-control">'),
                                            u.closed ? n.push('<div class="btn open-poll tooltip-target">Open Poll</div>') : n.push('<div class="btn close-poll">Close Poll</div>'),
                                            n.push("</footer>")),
                                        n.push("</div>");
                                } else if ("readerPost" == u.nt) {
                                    var p = t.rootScope.isAuthor;
                                    if (!u) var u = t.chapter;
                                    n.push("<div" + jade.attr("data-id", u._id, !0, !1) + jade.cls(["inner", u.closed], [null, !0]) + '><h4 class="poll-head">Reader Posts - '),
                                        u.closed && n.push("<small>Closed - </small>"),
                                        u.closed || t.rootScope.currentUser || !t.scope.votePermission || n.push("<span>Login to post</span>");
                                    var m = t.rootScope.votersCount(u);
                                    n.push("<small>"),
                                        0 == m ? n.push("be the first to post.") : (n.push("" + jade.escape(null == (e = m) ? "" : e) + " "), 1 == m ? n.push("post") : n.push("posts")),
                                        n.push('</small></h4><div class="readerPosts fieldBody">'),
                                        u.votes &&
                                            function () {
                                                var t = u.votes;
                                                if ("number" == typeof t.length)
                                                    for (var i = 0, r = t.length; r > i; i++) {
                                                        var o = t[i];
                                                        n.push('<div class="post choiceItem">'),
                                                            u.dice && u.dice[i] && n.push('<div class="dice">' + (null == (e = u.dice[i]) ? "" : e) + "</div>"),
                                                            n.push('<div class="value">' + (null == (e = o) ? "" : e) + "</div></div>");
                                                    }
                                                else {
                                                    var r = 0;
                                                    for (var i in t) {
                                                        r++;
                                                        var o = t[i];
                                                        n.push('<div class="post choiceItem">'),
                                                            u.dice && u.dice[i] && n.push('<div class="dice">' + (null == (e = u.dice[i]) ? "" : e) + "</div>"),
                                                            n.push('<div class="value">' + (null == (e = o) ? "" : e) + "</div></div>");
                                                    }
                                                }
                                            }.call(this),
                                        u.dice &&
                                            function () {
                                                var t = u.dice;
                                                if ("number" == typeof t.length)
                                                    for (var i = 0, r = t.length; r > i; i++) {
                                                        t[i];
                                                        (u.votes && u.votes[i]) || (n.push('<div class="post choiceItem">'), u.dice[i] && n.push('<div class="dice">' + (null == (e = u.dice[i]) ? "" : e) + "</div>"), n.push("</div>"));
                                                    }
                                                else {
                                                    var r = 0;
                                                    for (var i in t) {
                                                        r++;
                                                        t[i];
                                                        (u.votes && u.votes[i]) || (n.push('<div class="post choiceItem">'), u.dice[i] && n.push('<div class="dice">' + (null == (e = u.dice[i]) ? "" : e) + "</div>"), n.push("</div>"));
                                                    }
                                                }
                                            }.call(this),
                                        n.push('</div><div class="custom-choice"><textarea class="fieldEditor"></textarea><div class="btn save-readerPost addReaderPost pull-right">Submit your own post</div></div>'),
                                        p && (n.push('<footer class="poll-control">'), u.closed ? n.push('<div class="btn open-poll">Open Responses</div>') : n.push('<div class="btn close-poll">Close Responses</div>'), n.push("</footer>")),
                                        n.push("</div>");
                                } else {
                                    if (!u) var u = t.chapter;
                                    n.push('<div ng-non-bindable="ng-non-bindable" class="fieldBody">' + (null == (e = t.scope.transformChapter(u.b)) ? "" : e) + "</div>");
                                }
                                n.push('</div><div class="editContainer"></div><footer class="chapter-footer"><div class="secondRow"><span class="ut">' + jade.escape(null == (e = o.formatTime(u.ct)) ? "" : e) + "</span>"),
                                    t.scope.isRoute &&
                                        n.push(
                                            '<div ng-show="isRoute" data-hint="Create a save file for this story. You can always load the save file to get back to exactly this location." class="save btn btn-group saveProgress very-dim-font-color hover-link-color"><i class="fa-save fa"></i><span>Save Progress</span></div>'
                                        ),
                                    n.push('<div class="btn-group">'),
                                    t.rootScope.isAuthor && n.push('<div class="edit editChapter btn very-dim-font-color hover-font-color"><i class="fa-edit fa"></i><span>Edit</span></div>'),
                                    n.push('<a class="btn newTopic very-dim-font-color hover-green showWhenDiscussionClosed"><i class="fa fa-plus"></i><span>New Topic</span></a>'),
                                    u.p &&
                                        (n.push('<a class="btn expandComments very-dim-font-color hover-font-color showWhenDiscussionClosed"><i class="fa fa-comments"></i>'),
                                        u.p > 1 ? n.push("<span>" + jade.escape(null == (e = u.p) ? "" : e) + " comments</span>") : n.push("<span>" + jade.escape(null == (e = u.p) ? "" : e) + " comment</span>"),
                                        n.push("</a>")),
                                    n.push('<a class="btn comments openChapterChatDetail very-dim-font-color hover-link-color"><i class="fa fa-external-link-square"></i>'),
                                    u.p || n.push("<span>comment</span>"),
                                    n.push(
                                        '</a></div></div><div class="discussions"><div class="tabbable"><button class="close closeDiscussions bottom">x</button><button class="close closeDiscussions">x</button><ul class="nav btn-set"><li class="active"><a' +
                                            jade.attr("data-target", "[data-id=" + u._id + "] .topicsTab", !0, !1) +
                                            ' data-toggle="tab" class="commentsClose">Discussion Topics</a></li><li><a' +
                                            jade.attr("data-target", "[data-id=" + u._id + "] .chatTab", !0, !1) +
                                            ' data-toggle="tab" class="expandComments">Chat (' +
                                            jade.escape(null == (e = u.p) ? "" : e) +
                                            ')</a></li></ul><div class="tab-content"><div class="topicsTab tab-pane active"><div class="newTopicContainer"><a class="btn newTopic very-dim-font-color hover-green"><i class="fa fa-plus"></i><span>New Topic</span></a></div></div><div class="chatTab tab-pane"><div class="chat"><div class="chatLog chapterComments"></div></div></div></div></div></div></footer></article>'
                                    );
                            }
                        }
                    }.call(this),
                        n.push("</div>"));
                }.call(
                    this,
                    "_" in i ? i._ : "undefined" != typeof _ ? _ : void 0,
                    "rootScope" in i ? i.rootScope : "undefined" != typeof rootScope ? rootScope : void 0,
                    "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in i ? i.undefined : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/story/jade/chapterItem"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i) {
                    n.push('<div class="jadeRepeat">'),
                        function () {
                            var i = t.data;
                            if ("number" == typeof i.length)
                                for (var r = 0, o = i.length; o > r; r++) {
                                    var a = i[r];
                                    n.push('<article set-data-id="chapter._id"' + jade.cls(["chapter", t.scope.chapterClass(a)], [null, !0]) + ">"),
                                        "choice" != a.nt && "readerPost" != a.nt && n.push('<div ng-non-bindable="ng-non-bindable" class="fieldBody">' + (null == (e = t.scope.transformChapter(a.b)) ? "" : e) + "</div>"),
                                        n.push("</article>");
                                }
                            else {
                                var o = 0;
                                for (var r in i) {
                                    o++;
                                    var a = i[r];
                                    n.push('<article set-data-id="chapter._id"' + jade.cls(["chapter", t.scope.chapterClass(a)], [null, !0]) + ">"),
                                        "choice" != a.nt && "readerPost" != a.nt && n.push('<div ng-non-bindable="ng-non-bindable" class="fieldBody">' + (null == (e = t.scope.transformChapter(a.b)) ? "" : e) + "</div>"),
                                        n.push("</article>");
                                }
                            }
                        }.call(this),
                        n.push("</div>");
                }.call(this, "undefined" in i ? i.undefined : void 0),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/story/jade/choice"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o) {
                    var a = t.rootScope.isAuthor,
                        s = t.chapter || i,
                        l = t.rootScope.story;
                    n.push("<div" + jade.attr("data-id", s._id, !0, !1) + ' isAuthor="isAuthor"' + jade.cls(["inner", "fieldBody", s.closed], [null, null, !0]) + '><h4 class="poll-head">'),
                        s.closed
                            ? n.push("<span>Choices -<small>Voting closed </small></span>")
                            : (n.push("<span>"),
                              !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                              (r.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), s.multiple && n.push("<span>(select more than 1) </span>")),
                              n.push("</span>")),
                        n.push("-");
                    var c = t.rootScope.votersCount(s);
                    n.push("<small>"),
                        0 == c ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = c) ? "" : e) + " "), 1 == c ? n.push("voter") : n.push("voters")),
                        n.push('</small></h4><table class="poll"><tr>'),
                        a && n.push("<th> </th>"),
                        n.push("<th> </th>"),
                        a && i.closed && l.multiRoute && n.push("<th> </th>"),
                        n.push("<th>Votes</th></tr>"),
                        (s = t.rootScope.sortVotes(s)),
                        function () {
                            var r = s.sortedVotes;
                            if ("number" == typeof r.length)
                                for (var c = 0, u = r.length; u > c; c++) {
                                    var d = r[c],
                                        p = t.rootScope.isActive(d.index, s),
                                        h = t.scope.meetsRouteRequirements(d.index, s),
                                        f = t.scope.getRouteRequirements(d.index, s);
                                    if (
                                        (n.push(
                                            "<tr" +
                                                jade.attr("data-index", d.index, !0, !1) +
                                                jade.attr("routeRequirement", f, !0, !1) +
                                                jade.attr("meetsRouteRequirements", h, !0, !1) +
                                                jade.cls(["choiceItem", p ? "active" : o], [null, !0]) +
                                                ">"
                                        ),
                                        a &&
                                            (n.push('<td title="Edit or Cross out this choice" class="icon remove editOption"><i class="icon fa-edit fa"></i></td>'),
                                            i.closed &&
                                                l.multiRoute &&
                                                (n.push(
                                                    '<td popover-title="Route Controller" popover-append-to-body="true" dropdown="dropdown"><div data-toggle="dropdown" dropdown-toggle="dropdown-toggle" data-hint="Edit routes" class="icon route dropdown-toggle hint--right"><i class="icon fa-code-fork fa"></i></div><div dropdown="dropdown" class="dropdown-menu popover"><div data-hint="A route is a different branch in the story." class="formItem hint--right"><div class="btn icon route popover-toggle createRoute"><i class="icon fa-code-fork fa"></i><span>Create a new route</span></div></div><div data-hint="You can get the ID of the route from the end of the url." class="formItem hint--right"><label>Set Route ID</label>'
                                                ),
                                                i.routes ? n.push('<input type="text"' + jade.attr("value", i.routes[d.index], !0, !1) + ' class="editRouteID"/>') : n.push('<input type="text" class="editRouteID"/>'),
                                                n.push('</div><div data-hint="Only allow the user to access this option if certain variables are exist." class="formItem hint--right"><label>Require Variable Flag</label>'),
                                                i.routeRequirements
                                                    ? n.push('<input type="text"' + jade.attr("value", i.routeRequirements[d.index], !0, !1) + ' class="editRouteRequirements"/>')
                                                    : n.push('<input type="text" class="editRouteRequirements"/>'),
                                                n.push("</div></div></td>"))),
                                        n.push('<td class="choiceMain voteChapter"><table>'),
                                        d.route
                                            ? (n.push('<td class="text">'),
                                              "sibling" == t.rootScope.currentTypeRoute() &&
                                                  n.push("<a" + jade.attr("ui-sref", "^.route({ routeID:'" + d.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = d.name) ? "" : e) + "</a>"),
                                              "child" == t.rootScope.currentTypeRoute() &&
                                                  n.push("<a" + jade.attr("ui-sref", ".route({ routeID:'" + d.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = d.name) ? "" : e) + "</a>"),
                                              n.push("</td>"))
                                            : n.push('<td class="text"><span>' + jade.escape(null == (e = d.name) ? "" : e) + "</span></td>"),
                                        n.push("</table></td>"),
                                        (t.rootScope.story && t.rootScope.story.hideVote && !s.closed) ||
                                            (n.push('<td class="result">'),
                                            d.userVotes &&
                                                n.push('<span data-hint="Verified Votes" class="userVote hint--top"><i class="icon fa fa-star"></i><span>' + jade.escape(null == (e = d.userVotes + "/") ? "" : e) + "</span></span>"),
                                            n.push('<span data-hint="Total Votes" class="hint--top">' + jade.escape(null == (e = d.votes) ? "" : e) + "</span></td>")),
                                        t.rootScope.story && t.rootScope.story.hideVote && !s.closed && n.push('<td class="result">votes hidden</td>'),
                                        n.push('<td title="Comment"' + jade.attr("data-index", d.index, !0, !1) + jade.attr("data-name", d.name, !0, !1) + ' class="icon discussChoice comment">'),
                                        s.choiceReplies && s.choiceReplies[d.index])
                                    ) {
                                        var m = s.choiceReplies[d.index].count;
                                        m && n.push('<span class="label label-info value">' + jade.escape(null == (e = m) ? "" : e) + "</span>");
                                    }
                                    n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                }
                            else {
                                var u = 0;
                                for (var c in r) {
                                    u++;
                                    var d = r[c],
                                        p = t.rootScope.isActive(d.index, s),
                                        h = t.scope.meetsRouteRequirements(d.index, s),
                                        f = t.scope.getRouteRequirements(d.index, s);
                                    if (
                                        (n.push(
                                            "<tr" +
                                                jade.attr("data-index", d.index, !0, !1) +
                                                jade.attr("routeRequirement", f, !0, !1) +
                                                jade.attr("meetsRouteRequirements", h, !0, !1) +
                                                jade.cls(["choiceItem", p ? "active" : o], [null, !0]) +
                                                ">"
                                        ),
                                        a &&
                                            (n.push('<td title="Edit or Cross out this choice" class="icon remove editOption"><i class="icon fa-edit fa"></i></td>'),
                                            i.closed &&
                                                l.multiRoute &&
                                                (n.push(
                                                    '<td popover-title="Route Controller" popover-append-to-body="true" dropdown="dropdown"><div data-toggle="dropdown" dropdown-toggle="dropdown-toggle" data-hint="Edit routes" class="icon route dropdown-toggle hint--right"><i class="icon fa-code-fork fa"></i></div><div dropdown="dropdown" class="dropdown-menu popover"><div data-hint="A route is a different branch in the story." class="formItem hint--right"><div class="btn icon route popover-toggle createRoute"><i class="icon fa-code-fork fa"></i><span>Create a new route</span></div></div><div data-hint="You can get the ID of the route from the end of the url." class="formItem hint--right"><label>Set Route ID</label>'
                                                ),
                                                i.routes ? n.push('<input type="text"' + jade.attr("value", i.routes[d.index], !0, !1) + ' class="editRouteID"/>') : n.push('<input type="text" class="editRouteID"/>'),
                                                n.push('</div><div data-hint="Only allow the user to access this option if certain variables are exist." class="formItem hint--right"><label>Require Variable Flag</label>'),
                                                i.routeRequirements
                                                    ? n.push('<input type="text"' + jade.attr("value", i.routeRequirements[d.index], !0, !1) + ' class="editRouteRequirements"/>')
                                                    : n.push('<input type="text" class="editRouteRequirements"/>'),
                                                n.push("</div></div></td>"))),
                                        n.push('<td class="choiceMain voteChapter"><table>'),
                                        d.route
                                            ? (n.push('<td class="text">'),
                                              "sibling" == t.rootScope.currentTypeRoute() &&
                                                  n.push("<a" + jade.attr("ui-sref", "^.route({ routeID:'" + d.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = d.name) ? "" : e) + "</a>"),
                                              "child" == t.rootScope.currentTypeRoute() &&
                                                  n.push("<a" + jade.attr("ui-sref", ".route({ routeID:'" + d.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = d.name) ? "" : e) + "</a>"),
                                              n.push("</td>"))
                                            : n.push('<td class="text"><span>' + jade.escape(null == (e = d.name) ? "" : e) + "</span></td>"),
                                        n.push("</table></td>"),
                                        (t.rootScope.story && t.rootScope.story.hideVote && !s.closed) ||
                                            (n.push('<td class="result">'),
                                            d.userVotes &&
                                                n.push('<span data-hint="Verified Votes" class="userVote hint--top"><i class="icon fa fa-star"></i><span>' + jade.escape(null == (e = d.userVotes + "/") ? "" : e) + "</span></span>"),
                                            n.push('<span data-hint="Total Votes" class="hint--top">' + jade.escape(null == (e = d.votes) ? "" : e) + "</span></td>")),
                                        t.rootScope.story && t.rootScope.story.hideVote && !s.closed && n.push('<td class="result">votes hidden</td>'),
                                        n.push('<td title="Comment"' + jade.attr("data-index", d.index, !0, !1) + jade.attr("data-name", d.name, !0, !1) + ' class="icon discussChoice comment">'),
                                        s.choiceReplies && s.choiceReplies[d.index])
                                    ) {
                                        var m = s.choiceReplies[d.index].count;
                                        m && n.push('<span class="label label-info value">' + jade.escape(null == (e = m) ? "" : e) + "</span>");
                                    }
                                    n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                }
                            }
                        }.call(this),
                        s.xOut &&
                            function () {
                                var t = s.xOut;
                                if ("number" == typeof t.length)
                                    for (var r = 0, o = t.length; o > r; r++) {
                                        var c = t[r];
                                        if ("permanentlyRemoved" != s.choices[c]) {
                                            if (
                                                (n.push("<tr" + jade.attr("data-index", c, !0, !1) + ' class="choiceItem xOut">'),
                                                a && (n.push('<td title="Return this choice to the poll" class="icon xOutReturn"><i class="icon fa-plus fa"></i></td>'), i.closed && l.multiRoute && n.push("<td></td>")),
                                                n.push('<td class="choiceMain"><table><td class="text"><div class="value">' + jade.escape(null == (e = s.choices[c]) ? "" : e) + "</div>"),
                                                s.xOutReasons && n.push('<div class="reason">' + jade.escape(null == (e = s.xOutReasons[c]) ? "" : e) + "</div>"),
                                                n.push("</td></table></td>"),
                                                a ? n.push('<td data-hint="Permanently remove this choice" class="remove permanentlyRemove icon"><i class="icon fa-times fa"></i></td>') : n.push("<td></td>"),
                                                n.push('<td title="Comment"' + jade.attr("data-index", c, !0, !1) + jade.attr("data-name", s.choices[c], !0, !1) + ' class="icon discussChoice comment">'),
                                                s.choiceReplies && s.choiceReplies[c])
                                            ) {
                                                var u = s.choiceReplies[c].count;
                                                u && n.push('<span class="label label-info value">' + jade.escape(null == (e = u) ? "" : e) + "</span>");
                                            }
                                            n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                        }
                                    }
                                else {
                                    var o = 0;
                                    for (var r in t) {
                                        o++;
                                        var c = t[r];
                                        if ("permanentlyRemoved" != s.choices[c]) {
                                            if (
                                                (n.push("<tr" + jade.attr("data-index", c, !0, !1) + ' class="choiceItem xOut">'),
                                                a && (n.push('<td title="Return this choice to the poll" class="icon xOutReturn"><i class="icon fa-plus fa"></i></td>'), i.closed && l.multiRoute && n.push("<td></td>")),
                                                n.push('<td class="choiceMain"><table><td class="text"><div class="value">' + jade.escape(null == (e = s.choices[c]) ? "" : e) + "</div>"),
                                                s.xOutReasons && n.push('<div class="reason">' + jade.escape(null == (e = s.xOutReasons[c]) ? "" : e) + "</div>"),
                                                n.push("</td></table></td>"),
                                                a ? n.push('<td data-hint="Permanently remove this choice" class="remove permanentlyRemove icon"><i class="icon fa-times fa"></i></td>') : n.push("<td></td>"),
                                                n.push('<td title="Comment"' + jade.attr("data-index", c, !0, !1) + jade.attr("data-name", s.choices[c], !0, !1) + ' class="icon discussChoice comment">'),
                                                s.choiceReplies && s.choiceReplies[c])
                                            ) {
                                                var u = s.choiceReplies[c].count;
                                                u && n.push('<span class="label label-info value">' + jade.escape(null == (e = u) ? "" : e) + "</span>");
                                            }
                                            n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                        }
                                    }
                                }
                            }.call(this),
                        n.push('</table><div class="custom-choice">'),
                        (s.custom || a) && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                        n.push("</div>"),
                        a && (n.push('<footer class="poll-control">'), i.closed ? n.push('<div class="btn open-poll tooltip-target">Open Poll</div>') : n.push('<div class="btn close-poll">Close Poll</div>'), n.push("</footer>")),
                        n.push("</div>");
                }.call(this, "chapter" in i ? i.chapter : "undefined" != typeof chapter ? chapter : void 0, "rootScope" in i ? i.rootScope : "undefined" != typeof rootScope ? rootScope : void 0, "undefined" in i ? i.undefined : void 0),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/story/jade/chapterListItem"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o) {
                    if (!a) var a = t.chapter;
                    var s = function () {
                        return "choice" == a.nt ? "choice" : "readerPost" == a.nt ? "readerPost" : void 0;
                    };
                    if ((n.push("<article" + jade.attr("data-id", a._id, !0, !1) + jade.attr("data-ct", a.ct, !0, !1) + jade.cls(["chapter", s()], [null, !0]) + '><div class="chapterContent">'), "choice" == a.nt)) {
                        var l = t.rootScope.isAuthor,
                            c = t.chapter || a,
                            u = t.rootScope.story;
                        n.push("<div" + jade.attr("data-id", c._id, !0, !1) + ' isAuthor="isAuthor"' + jade.cls(["inner", "fieldBody", c.closed], [null, null, !0]) + '><h4 class="poll-head">'),
                            c.closed
                                ? n.push("<span>Choices -<small>Voting closed </small></span>")
                                : (n.push("<span>"),
                                  !t.rootScope.currentUser && t.scope.votePermission && n.push("<span>Login to vote </span>"),
                                  (i.currentUser || !t.scope.votePermission) && (n.push("<span>Your Choice </span>"), c.multiple && n.push("<span>(select more than 1) </span>")),
                                  n.push("</span>")),
                            n.push("-");
                        var d = t.rootScope.votersCount(c);
                        n.push("<small>"),
                            0 == d ? n.push("be the first to vote.") : (n.push("" + jade.escape(null == (e = d) ? "" : e) + " "), 1 == d ? n.push("voter") : n.push("voters")),
                            n.push('</small></h4><table class="poll"><tr>'),
                            l && n.push("<th> </th>"),
                            n.push("<th> </th>"),
                            l && a.closed && u.multiRoute && n.push("<th> </th>"),
                            n.push("<th>Votes</th></tr>"),
                            (c = t.rootScope.sortVotes(c)),
                            function () {
                                var i = c.sortedVotes;
                                if ("number" == typeof i.length)
                                    for (var r = 0, s = i.length; s > r; r++) {
                                        var d = i[r],
                                            p = t.rootScope.isActive(d.index, c),
                                            h = t.scope.meetsRouteRequirements(d.index, c),
                                            f = t.scope.getRouteRequirements(d.index, c);
                                        if (
                                            (n.push(
                                                "<tr" +
                                                    jade.attr("data-index", d.index, !0, !1) +
                                                    jade.attr("routeRequirement", f, !0, !1) +
                                                    jade.attr("meetsRouteRequirements", h, !0, !1) +
                                                    jade.cls(["choiceItem", p ? "active" : o], [null, !0]) +
                                                    ">"
                                            ),
                                            l &&
                                                (n.push('<td title="Edit or Cross out this choice" class="icon remove editOption"><i class="icon fa-edit fa"></i></td>'),
                                                a.closed &&
                                                    u.multiRoute &&
                                                    (n.push(
                                                        '<td popover-title="Route Controller" popover-append-to-body="true" dropdown="dropdown"><div data-toggle="dropdown" dropdown-toggle="dropdown-toggle" data-hint="Edit routes" class="icon route dropdown-toggle hint--right"><i class="icon fa-code-fork fa"></i></div><div dropdown="dropdown" class="dropdown-menu popover"><div data-hint="A route is a different branch in the story." class="formItem hint--right"><div class="btn icon route popover-toggle createRoute"><i class="icon fa-code-fork fa"></i><span>Create a new route</span></div></div><div data-hint="You can get the ID of the route from the end of the url." class="formItem hint--right"><label>Set Route ID</label>'
                                                    ),
                                                    a.routes ? n.push('<input type="text"' + jade.attr("value", a.routes[d.index], !0, !1) + ' class="editRouteID"/>') : n.push('<input type="text" class="editRouteID"/>'),
                                                    n.push('</div><div data-hint="Only allow the user to access this option if certain variables are exist." class="formItem hint--right"><label>Require Variable Flag</label>'),
                                                    a.routeRequirements
                                                        ? n.push('<input type="text"' + jade.attr("value", a.routeRequirements[d.index], !0, !1) + ' class="editRouteRequirements"/>')
                                                        : n.push('<input type="text" class="editRouteRequirements"/>'),
                                                    n.push("</div></div></td>"))),
                                            n.push('<td class="choiceMain voteChapter"><table>'),
                                            d.route
                                                ? (n.push('<td class="text">'),
                                                  "sibling" == t.rootScope.currentTypeRoute() &&
                                                      n.push("<a" + jade.attr("ui-sref", "^.route({ routeID:'" + d.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = d.name) ? "" : e) + "</a>"),
                                                  "child" == t.rootScope.currentTypeRoute() &&
                                                      n.push("<a" + jade.attr("ui-sref", ".route({ routeID:'" + d.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = d.name) ? "" : e) + "</a>"),
                                                  n.push("</td>"))
                                                : n.push('<td class="text"><span>' + jade.escape(null == (e = d.name) ? "" : e) + "</span></td>"),
                                            n.push("</table></td>"),
                                            (t.rootScope.story && t.rootScope.story.hideVote && !c.closed) ||
                                                (n.push('<td class="result">'),
                                                d.userVotes &&
                                                    n.push('<span data-hint="Verified Votes" class="userVote hint--top"><i class="icon fa fa-star"></i><span>' + jade.escape(null == (e = d.userVotes + "/") ? "" : e) + "</span></span>"),
                                                n.push('<span data-hint="Total Votes" class="hint--top">' + jade.escape(null == (e = d.votes) ? "" : e) + "</span></td>")),
                                            t.rootScope.story && t.rootScope.story.hideVote && !c.closed && n.push('<td class="result">votes hidden</td>'),
                                            n.push('<td title="Comment"' + jade.attr("data-index", d.index, !0, !1) + jade.attr("data-name", d.name, !0, !1) + ' class="icon discussChoice comment">'),
                                            c.choiceReplies && c.choiceReplies[d.index])
                                        ) {
                                            var m = c.choiceReplies[d.index].count;
                                            m && n.push('<span class="label label-info value">' + jade.escape(null == (e = m) ? "" : e) + "</span>");
                                        }
                                        n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                    }
                                else {
                                    var s = 0;
                                    for (var r in i) {
                                        s++;
                                        var d = i[r],
                                            p = t.rootScope.isActive(d.index, c),
                                            h = t.scope.meetsRouteRequirements(d.index, c),
                                            f = t.scope.getRouteRequirements(d.index, c);
                                        if (
                                            (n.push(
                                                "<tr" +
                                                    jade.attr("data-index", d.index, !0, !1) +
                                                    jade.attr("routeRequirement", f, !0, !1) +
                                                    jade.attr("meetsRouteRequirements", h, !0, !1) +
                                                    jade.cls(["choiceItem", p ? "active" : o], [null, !0]) +
                                                    ">"
                                            ),
                                            l &&
                                                (n.push('<td title="Edit or Cross out this choice" class="icon remove editOption"><i class="icon fa-edit fa"></i></td>'),
                                                a.closed &&
                                                    u.multiRoute &&
                                                    (n.push(
                                                        '<td popover-title="Route Controller" popover-append-to-body="true" dropdown="dropdown"><div data-toggle="dropdown" dropdown-toggle="dropdown-toggle" data-hint="Edit routes" class="icon route dropdown-toggle hint--right"><i class="icon fa-code-fork fa"></i></div><div dropdown="dropdown" class="dropdown-menu popover"><div data-hint="A route is a different branch in the story." class="formItem hint--right"><div class="btn icon route popover-toggle createRoute"><i class="icon fa-code-fork fa"></i><span>Create a new route</span></div></div><div data-hint="You can get the ID of the route from the end of the url." class="formItem hint--right"><label>Set Route ID</label>'
                                                    ),
                                                    a.routes ? n.push('<input type="text"' + jade.attr("value", a.routes[d.index], !0, !1) + ' class="editRouteID"/>') : n.push('<input type="text" class="editRouteID"/>'),
                                                    n.push('</div><div data-hint="Only allow the user to access this option if certain variables are exist." class="formItem hint--right"><label>Require Variable Flag</label>'),
                                                    a.routeRequirements
                                                        ? n.push('<input type="text"' + jade.attr("value", a.routeRequirements[d.index], !0, !1) + ' class="editRouteRequirements"/>')
                                                        : n.push('<input type="text" class="editRouteRequirements"/>'),
                                                    n.push("</div></div></td>"))),
                                            n.push('<td class="choiceMain voteChapter"><table>'),
                                            d.route
                                                ? (n.push('<td class="text">'),
                                                  "sibling" == t.rootScope.currentTypeRoute() &&
                                                      n.push("<a" + jade.attr("ui-sref", "^.route({ routeID:'" + d.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = d.name) ? "" : e) + "</a>"),
                                                  "child" == t.rootScope.currentTypeRoute() &&
                                                      n.push("<a" + jade.attr("ui-sref", ".route({ routeID:'" + d.route + "' })", !0, !1) + ' class="btn">' + jade.escape(null == (e = d.name) ? "" : e) + "</a>"),
                                                  n.push("</td>"))
                                                : n.push('<td class="text"><span>' + jade.escape(null == (e = d.name) ? "" : e) + "</span></td>"),
                                            n.push("</table></td>"),
                                            (t.rootScope.story && t.rootScope.story.hideVote && !c.closed) ||
                                                (n.push('<td class="result">'),
                                                d.userVotes &&
                                                    n.push('<span data-hint="Verified Votes" class="userVote hint--top"><i class="icon fa fa-star"></i><span>' + jade.escape(null == (e = d.userVotes + "/") ? "" : e) + "</span></span>"),
                                                n.push('<span data-hint="Total Votes" class="hint--top">' + jade.escape(null == (e = d.votes) ? "" : e) + "</span></td>")),
                                            t.rootScope.story && t.rootScope.story.hideVote && !c.closed && n.push('<td class="result">votes hidden</td>'),
                                            n.push('<td title="Comment"' + jade.attr("data-index", d.index, !0, !1) + jade.attr("data-name", d.name, !0, !1) + ' class="icon discussChoice comment">'),
                                            c.choiceReplies && c.choiceReplies[d.index])
                                        ) {
                                            var m = c.choiceReplies[d.index].count;
                                            m && n.push('<span class="label label-info value">' + jade.escape(null == (e = m) ? "" : e) + "</span>");
                                        }
                                        n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                    }
                                }
                            }.call(this),
                            c.xOut &&
                                function () {
                                    var t = c.xOut;
                                    if ("number" == typeof t.length)
                                        for (var i = 0, r = t.length; r > i; i++) {
                                            var o = t[i];
                                            if ("permanentlyRemoved" != c.choices[o]) {
                                                if (
                                                    (n.push("<tr" + jade.attr("data-index", o, !0, !1) + ' class="choiceItem xOut">'),
                                                    l && (n.push('<td title="Return this choice to the poll" class="icon xOutReturn"><i class="icon fa-plus fa"></i></td>'), a.closed && u.multiRoute && n.push("<td></td>")),
                                                    n.push('<td class="choiceMain"><table><td class="text"><div class="value">' + jade.escape(null == (e = c.choices[o]) ? "" : e) + "</div>"),
                                                    c.xOutReasons && n.push('<div class="reason">' + jade.escape(null == (e = c.xOutReasons[o]) ? "" : e) + "</div>"),
                                                    n.push("</td></table></td>"),
                                                    l ? n.push('<td data-hint="Permanently remove this choice" class="remove permanentlyRemove icon"><i class="icon fa-times fa"></i></td>') : n.push("<td></td>"),
                                                    n.push('<td title="Comment"' + jade.attr("data-index", o, !0, !1) + jade.attr("data-name", c.choices[o], !0, !1) + ' class="icon discussChoice comment">'),
                                                    c.choiceReplies && c.choiceReplies[o])
                                                ) {
                                                    var s = c.choiceReplies[o].count;
                                                    s && n.push('<span class="label label-info value">' + jade.escape(null == (e = s) ? "" : e) + "</span>");
                                                }
                                                n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                            }
                                        }
                                    else {
                                        var r = 0;
                                        for (var i in t) {
                                            r++;
                                            var o = t[i];
                                            if ("permanentlyRemoved" != c.choices[o]) {
                                                if (
                                                    (n.push("<tr" + jade.attr("data-index", o, !0, !1) + ' class="choiceItem xOut">'),
                                                    l && (n.push('<td title="Return this choice to the poll" class="icon xOutReturn"><i class="icon fa-plus fa"></i></td>'), a.closed && u.multiRoute && n.push("<td></td>")),
                                                    n.push('<td class="choiceMain"><table><td class="text"><div class="value">' + jade.escape(null == (e = c.choices[o]) ? "" : e) + "</div>"),
                                                    c.xOutReasons && n.push('<div class="reason">' + jade.escape(null == (e = c.xOutReasons[o]) ? "" : e) + "</div>"),
                                                    n.push("</td></table></td>"),
                                                    l ? n.push('<td data-hint="Permanently remove this choice" class="remove permanentlyRemove icon"><i class="icon fa-times fa"></i></td>') : n.push("<td></td>"),
                                                    n.push('<td title="Comment"' + jade.attr("data-index", o, !0, !1) + jade.attr("data-name", c.choices[o], !0, !1) + ' class="icon discussChoice comment">'),
                                                    c.choiceReplies && c.choiceReplies[o])
                                                ) {
                                                    var s = c.choiceReplies[o].count;
                                                    s && n.push('<span class="label label-info value">' + jade.escape(null == (e = s) ? "" : e) + "</span>");
                                                }
                                                n.push('<i class="icon fa-comments-o fa"></i></td></tr>');
                                            }
                                        }
                                    }
                                }.call(this),
                            n.push('</table><div class="custom-choice">'),
                            (c.custom || l) && n.push('<textarea type="text" placeholder="Custom choice"></textarea><button type="button" class="addCustomChoice btn">Submit a new custom choice</button>'),
                            n.push("</div>"),
                            l && (n.push('<footer class="poll-control">'), a.closed ? n.push('<div class="btn open-poll tooltip-target">Open Poll</div>') : n.push('<div class="btn close-poll">Close Poll</div>'), n.push("</footer>")),
                            n.push("</div>");
                    } else if ("readerPost" == a.nt) {
                        var l = t.rootScope.isAuthor;
                        if (!a) var a = t.chapter;
                        n.push("<div" + jade.attr("data-id", a._id, !0, !1) + jade.cls(["inner", a.closed], [null, !0]) + '><h4 class="poll-head">Reader Posts - '),
                            a.closed && n.push("<small>Closed - </small>"),
                            a.closed || t.rootScope.currentUser || !t.scope.votePermission || n.push("<span>Login to post</span>");
                        var d = t.rootScope.votersCount(a);
                        n.push("<small>"),
                            0 == d ? n.push("be the first to post.") : (n.push("" + jade.escape(null == (e = d) ? "" : e) + " "), 1 == d ? n.push("post") : n.push("posts")),
                            n.push('</small></h4><div class="readerPosts fieldBody">'),
                            a.votes &&
                                function () {
                                    var t = a.votes;
                                    if ("number" == typeof t.length)
                                        for (var i = 0, r = t.length; r > i; i++) {
                                            var o = t[i];
                                            n.push('<div class="post choiceItem">'),
                                                a.dice && a.dice[i] && n.push('<div class="dice">' + (null == (e = a.dice[i]) ? "" : e) + "</div>"),
                                                n.push('<div class="value">' + (null == (e = o) ? "" : e) + "</div></div>");
                                        }
                                    else {
                                        var r = 0;
                                        for (var i in t) {
                                            r++;
                                            var o = t[i];
                                            n.push('<div class="post choiceItem">'),
                                                a.dice && a.dice[i] && n.push('<div class="dice">' + (null == (e = a.dice[i]) ? "" : e) + "</div>"),
                                                n.push('<div class="value">' + (null == (e = o) ? "" : e) + "</div></div>");
                                        }
                                    }
                                }.call(this),
                            a.dice &&
                                function () {
                                    var t = a.dice;
                                    if ("number" == typeof t.length)
                                        for (var i = 0, r = t.length; r > i; i++) {
                                            t[i];
                                            (a.votes && a.votes[i]) || (n.push('<div class="post choiceItem">'), a.dice[i] && n.push('<div class="dice">' + (null == (e = a.dice[i]) ? "" : e) + "</div>"), n.push("</div>"));
                                        }
                                    else {
                                        var r = 0;
                                        for (var i in t) {
                                            r++;
                                            t[i];
                                            (a.votes && a.votes[i]) || (n.push('<div class="post choiceItem">'), a.dice[i] && n.push('<div class="dice">' + (null == (e = a.dice[i]) ? "" : e) + "</div>"), n.push("</div>"));
                                        }
                                    }
                                }.call(this),
                            n.push('</div><div class="custom-choice"><textarea class="fieldEditor"></textarea><div class="btn save-readerPost addReaderPost pull-right">Submit your own post</div></div>'),
                            l && (n.push('<footer class="poll-control">'), a.closed ? n.push('<div class="btn open-poll">Open Responses</div>') : n.push('<div class="btn close-poll">Close Responses</div>'), n.push("</footer>")),
                            n.push("</div>");
                    } else {
                        if (!a) var a = t.chapter;
                        n.push('<div ng-non-bindable="ng-non-bindable" class="fieldBody">' + (null == (e = t.scope.transformChapter(a.b)) ? "" : e) + "</div>");
                    }
                    n.push('</div><div class="editContainer"></div><footer class="chapter-footer"><div class="secondRow"><span class="ut">' + jade.escape(null == (e = r.formatTime(a.ct)) ? "" : e) + "</span>"),
                        t.scope.isRoute &&
                            n.push(
                                '<div ng-show="isRoute" data-hint="Create a save file for this story. You can always load the save file to get back to exactly this location." class="save btn btn-group saveProgress very-dim-font-color hover-link-color"><i class="fa-save fa"></i><span>Save Progress</span></div>'
                            ),
                        n.push('<div class="btn-group">'),
                        t.rootScope.isAuthor && n.push('<div class="edit editChapter btn very-dim-font-color hover-font-color"><i class="fa-edit fa"></i><span>Edit</span></div>'),
                        n.push('<a class="btn newTopic very-dim-font-color hover-green showWhenDiscussionClosed"><i class="fa fa-plus"></i><span>New Topic</span></a>'),
                        a.p &&
                            (n.push('<a class="btn expandComments very-dim-font-color hover-font-color showWhenDiscussionClosed"><i class="fa fa-comments"></i>'),
                            a.p > 1 ? n.push("<span>" + jade.escape(null == (e = a.p) ? "" : e) + " comments</span>") : n.push("<span>" + jade.escape(null == (e = a.p) ? "" : e) + " comment</span>"),
                            n.push("</a>")),
                        n.push('<a class="btn comments openChapterChatDetail very-dim-font-color hover-link-color"><i class="fa fa-external-link-square"></i>'),
                        a.p || n.push("<span>comment</span>"),
                        n.push(
                            '</a></div></div><div class="discussions"><div class="tabbable"><button class="close closeDiscussions bottom">x</button><button class="close closeDiscussions">x</button><ul class="nav btn-set"><li class="active"><a' +
                                jade.attr("data-target", "[data-id=" + a._id + "] .topicsTab", !0, !1) +
                                ' data-toggle="tab" class="commentsClose">Discussion Topics</a></li><li><a' +
                                jade.attr("data-target", "[data-id=" + a._id + "] .chatTab", !0, !1) +
                                ' data-toggle="tab" class="expandComments">Chat (' +
                                jade.escape(null == (e = a.p) ? "" : e) +
                                ')</a></li></ul><div class="tab-content"><div class="topicsTab tab-pane active"><div class="newTopicContainer"><a class="btn newTopic very-dim-font-color hover-green"><i class="fa fa-plus"></i><span>New Topic</span></a></div></div><div class="chatTab tab-pane"><div class="chat"><div class="chatLog chapterComments"></div></div></div></div></div></div></footer></article>'
                        );
                }.call(this, "rootScope" in i ? i.rootScope : "undefined" != typeof rootScope ? rootScope : void 0, "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0, "undefined" in i ? i.undefined : void 0),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/story/jade/storyItem"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r, o, a, s) {
                    n.push('<div class="jadeRepeat">'),
                        function () {
                            var l = t.data;
                            if ("number" == typeof l.length)
                                for (var c = 0, u = l.length; u > c; c++) {
                                    var d = l[c];
                                    n.push("<li>");
                                    var p = d.r;
                                    p && (p = d.r[0]);
                                    var h = "/" + (p || "stories") + "/" + a.url(d.t) + "/" + d._id;
                                    if (
                                        (n.push(
                                            "<a" +
                                                jade.attr("href", h, !0, !1) +
                                                jade.cls(["storyListItem", "listItemInner", t.rootScope.checkReadHistory(d) ? "readHistory" : s], [null, null, !0]) +
                                                '><div set-if="!listViewCompact" class="inner"><div class="column imgContainer">'
                                        ),
                                        d.isLive)
                                    )
                                        n.push('<div class="live-icon label-important label">Live</div>');
                                    else if (d.nextLive && d.nextLive > o.round(new r().getTime())) {
                                        var f = i.timeago(d.nextLive);
                                        n.push('<div class="live-icon label-important label">Live in ' + jade.escape(null == (e = f) ? "" : e) + "</div>");
                                    }
                                    n.push('<div class="readHistory-icon label">Read</div><div class="image">'),
                                        d.i && d.i[0] ? n.push("<img" + jade.attr("src", a.imageURLParser(d.i[0], 224, 168), !0, !1) + jade.attr("alt", d.t, !0, !1) + "/>") : n.push('<img src="//placekitten.com/g/224/168"/>'),
                                        n.push('</div></div><div class="column information"><div class="user"><div class="authorPane">');
                                    var m = d.u;
                                    m && ((m = d.u[0]), n.push('<div class="name">' + jade.escape(null == (e = d.u[0].n) ? "" : e) + "</div>")),
                                        n.push(
                                            '</div></div><div class="content"><div class="title header"><h2><span>' +
                                                jade.escape(null == (e = d.t) ? "" : e) +
                                                '</span></h2></div><div class="description">' +
                                                jade.escape(null == (e = d.d) ? "" : e) +
                                                '</div></div><div set-if="story.nt == \'story\'" class="coverStats"><div class="coverStatsContainer">'
                                        ),
                                        d.p && n.push('<div class="stat"><i class="fa-comments-o fa"></i><span>' + jade.escape(null == (e = d.p) ? "" : e) + "</span></div>"),
                                        d.likeCount && n.push('<div class="stat"><i class="fa fa-thumbs-up"></i><span>' + jade.escape(null == (e = d.likeCount) ? "" : e) + "</span></div>"),
                                        d.w && n.push('<div class="stat"><i class="fa fa-font"></i><span>' + jade.escape(null == (e = d.w) ? "" : e) + "</span></div>"),
                                        n.push('<div class="tags">'),
                                        d.ta &&
                                            function () {
                                                var t = d.ta;
                                                if ("number" == typeof t.length)
                                                    for (var i = 0, r = t.length; r > i; i++) {
                                                        var o = t[i];
                                                        o && n.push('<div class="stat">' + jade.escape(null == (e = o) ? "" : e) + "</div>");
                                                    }
                                                else {
                                                    var r = 0;
                                                    for (var i in t) {
                                                        r++;
                                                        var o = t[i];
                                                        o && n.push('<div class="stat">' + jade.escape(null == (e = o) ? "" : e) + "</div>");
                                                    }
                                                }
                                            }.call(this),
                                        n.push("</div></div></div></div></div></a></li>");
                                }
                            else {
                                var u = 0;
                                for (var c in l) {
                                    u++;
                                    var d = l[c];
                                    n.push("<li>");
                                    var p = d.r;
                                    p && (p = d.r[0]);
                                    var h = "/" + (p || "stories") + "/" + a.url(d.t) + "/" + d._id;
                                    if (
                                        (n.push(
                                            "<a" +
                                                jade.attr("href", h, !0, !1) +
                                                jade.cls(["storyListItem", "listItemInner", t.rootScope.checkReadHistory(d) ? "readHistory" : s], [null, null, !0]) +
                                                '><div set-if="!listViewCompact" class="inner"><div class="column imgContainer">'
                                        ),
                                        d.isLive)
                                    )
                                        n.push('<div class="live-icon label-important label">Live</div>');
                                    else if (d.nextLive && d.nextLive > o.round(new r().getTime())) {
                                        var f = i.timeago(d.nextLive);
                                        n.push('<div class="live-icon label-important label">Live in ' + jade.escape(null == (e = f) ? "" : e) + "</div>");
                                    }
                                    n.push('<div class="readHistory-icon label">Read</div><div class="image">'),
                                        d.i && d.i[0] ? n.push("<img" + jade.attr("src", a.imageURLParser(d.i[0], 224, 168), !0, !1) + jade.attr("alt", d.t, !0, !1) + "/>") : n.push('<img src="//placekitten.com/g/224/168"/>'),
                                        n.push('</div></div><div class="column information"><div class="user"><div class="authorPane">');
                                    var m = d.u;
                                    m && ((m = d.u[0]), n.push('<div class="name">' + jade.escape(null == (e = d.u[0].n) ? "" : e) + "</div>")),
                                        n.push(
                                            '</div></div><div class="content"><div class="title header"><h2><span>' +
                                                jade.escape(null == (e = d.t) ? "" : e) +
                                                '</span></h2></div><div class="description">' +
                                                jade.escape(null == (e = d.d) ? "" : e) +
                                                '</div></div><div set-if="story.nt == \'story\'" class="coverStats"><div class="coverStatsContainer">'
                                        ),
                                        d.p && n.push('<div class="stat"><i class="fa-comments-o fa"></i><span>' + jade.escape(null == (e = d.p) ? "" : e) + "</span></div>"),
                                        d.likeCount && n.push('<div class="stat"><i class="fa fa-thumbs-up"></i><span>' + jade.escape(null == (e = d.likeCount) ? "" : e) + "</span></div>"),
                                        d.w && n.push('<div class="stat"><i class="fa fa-font"></i><span>' + jade.escape(null == (e = d.w) ? "" : e) + "</span></div>"),
                                        n.push('<div class="tags">'),
                                        d.ta &&
                                            function () {
                                                var t = d.ta;
                                                if ("number" == typeof t.length)
                                                    for (var i = 0, r = t.length; r > i; i++) {
                                                        var o = t[i];
                                                        o && n.push('<div class="stat">' + jade.escape(null == (e = o) ? "" : e) + "</div>");
                                                    }
                                                else {
                                                    var r = 0;
                                                    for (var i in t) {
                                                        r++;
                                                        var o = t[i];
                                                        o && n.push('<div class="stat">' + jade.escape(null == (e = o) ? "" : e) + "</div>");
                                                    }
                                                }
                                            }.call(this),
                                        n.push("</div></div></div></div></div></a></li>");
                                }
                            }
                        }.call(this),
                        n.push("</div>");
                }.call(
                    this,
                    "$" in i ? i.$ : "undefined" != typeof $ ? $ : void 0,
                    "Date" in i ? i.Date : "undefined" != typeof Date ? Date : void 0,
                    "Math" in i ? i.Math : "undefined" != typeof Math ? Math : void 0,
                    "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0,
                    "undefined" in i ? i.undefined : void 0
                ),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/story/jade/routesList"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r) {
                    n.push('<article class="listView-small">'),
                        function () {
                            var r = i;
                            if ("number" == typeof r.length)
                                for (var o = 0, a = r.length; a > o; o++) {
                                    var s = r[o];
                                    n.push(
                                        '<li class="route"><a' + jade.attr("href", t.url + s._id, !0, !1) + "><div><b>" + jade.escape(null == (e = s.t) ? "" : e) + "</b><br/>" + jade.escape(null == (e = s.d) ? "" : e) + "</div></a></li>"
                                    );
                                }
                            else {
                                var a = 0;
                                for (var o in r) {
                                    a++;
                                    var s = r[o];
                                    n.push(
                                        '<li class="route"><a' + jade.attr("href", t.url + s._id, !0, !1) + "><div><b>" + jade.escape(null == (e = s.t) ? "" : e) + "</b><br/>" + jade.escape(null == (e = s.d) ? "" : e) + "</div></a></li>"
                                    );
                                }
                            }
                        }.call(this),
                        n.push("</article>");
                }.call(this, "routes" in i ? i.routes : "undefined" != typeof routes ? routes : void 0, "undefined" in i ? i.undefined : void 0),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/story/jade/readerPost"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i) {
                    var r = t.rootScope.isAuthor;
                    if (!o) var o = t.chapter;
                    n.push("<div" + jade.attr("data-id", o._id, !0, !1) + jade.cls(["inner", o.closed], [null, !0]) + '><h4 class="poll-head">Reader Posts - '),
                        o.closed && n.push("<small>Closed - </small>"),
                        o.closed || t.rootScope.currentUser || !t.scope.votePermission || n.push("<span>Login to post</span>");
                    var a = t.rootScope.votersCount(o);
                    n.push("<small>"),
                        0 == a ? n.push("be the first to post.") : (n.push("" + jade.escape(null == (e = a) ? "" : e) + " "), 1 == a ? n.push("post") : n.push("posts")),
                        n.push('</small></h4><div class="readerPosts fieldBody">'),
                        o.votes &&
                            function () {
                                var t = o.votes;
                                if ("number" == typeof t.length)
                                    for (var i = 0, r = t.length; r > i; i++) {
                                        var a = t[i];
                                        n.push('<div class="post choiceItem">'),
                                            o.dice && o.dice[i] && n.push('<div class="dice">' + (null == (e = o.dice[i]) ? "" : e) + "</div>"),
                                            n.push('<div class="value">' + (null == (e = a) ? "" : e) + "</div></div>");
                                    }
                                else {
                                    var r = 0;
                                    for (var i in t) {
                                        r++;
                                        var a = t[i];
                                        n.push('<div class="post choiceItem">'),
                                            o.dice && o.dice[i] && n.push('<div class="dice">' + (null == (e = o.dice[i]) ? "" : e) + "</div>"),
                                            n.push('<div class="value">' + (null == (e = a) ? "" : e) + "</div></div>");
                                    }
                                }
                            }.call(this),
                        o.dice &&
                            function () {
                                var t = o.dice;
                                if ("number" == typeof t.length)
                                    for (var i = 0, r = t.length; r > i; i++) {
                                        t[i];
                                        (o.votes && o.votes[i]) || (n.push('<div class="post choiceItem">'), o.dice[i] && n.push('<div class="dice">' + (null == (e = o.dice[i]) ? "" : e) + "</div>"), n.push("</div>"));
                                    }
                                else {
                                    var r = 0;
                                    for (var i in t) {
                                        r++;
                                        t[i];
                                        (o.votes && o.votes[i]) || (n.push('<div class="post choiceItem">'), o.dice[i] && n.push('<div class="dice">' + (null == (e = o.dice[i]) ? "" : e) + "</div>"), n.push("</div>"));
                                    }
                                }
                            }.call(this),
                        n.push('</div><div class="custom-choice"><textarea class="fieldEditor"></textarea><div class="btn save-readerPost addReaderPost pull-right">Submit your own post</div></div>'),
                        r && (n.push('<footer class="poll-control">'), o.closed ? n.push('<div class="btn open-poll">Open Responses</div>') : n.push('<div class="btn close-poll">Close Responses</div>'), n.push("</footer>")),
                        n.push("</div>");
                }.call(this, "undefined" in i ? i.undefined : void 0),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/story/jade/editChapterInline"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i, r) {
                    n.push('<div class="editChapter">'),
                        "chapter" == t.chapter.nt && n.push('<div class="editorContainer"><div class="fieldBody fieldEditor">' + (null == (e = r.sanitize(t.chapter.b)) ? "" : e) + "</div></div>"),
                        n.push(
                            '<label for="chapterTitle">Table of Contents:<input name="chapterTitle"' +
                                jade.attr("value", i.t, !0, !1) +
                                ' type="text" placeholder="Optional name for the Table of Contents" class="input-xlarge"/><span class="help-block">Setting a name here will add this chapter to the Table of Contents as a navigation bookmark.</span></label><footer><div class="btn btn-important red delete">Delete</div><div class="btn-group pull-right"><div class="btn transparent cancel">Cancel</div><div class="btn btn-primary save">Save and close</div></div></footer></div>'
                        );
                }.call(this, "chapter" in i ? i.chapter : "undefined" != typeof chapter ? chapter : void 0, "ty" in i ? i.ty : "undefined" != typeof ty ? ty : void 0),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/story/jade/tagItem"] = function (t) {
        function e(t) {
            var e,
                n = [],
                i = t || {};
            return (
                function (i) {
                    n.push('<div class="jadeRepeat">'),
                        function () {
                            var i = t.data;
                            if ("number" == typeof i.length)
                                for (var r = 0, o = i.length; o > r; r++) {
                                    var a = i[r];
                                    a && n.push('<div class="tag">' + jade.escape(null == (e = a) ? "" : e) + "</div>");
                                }
                            else {
                                var o = 0;
                                for (var r in i) {
                                    o++;
                                    var a = i[r];
                                    a && n.push('<div class="tag">' + jade.escape(null == (e = a) ? "" : e) + "</div>");
                                }
                            }
                        }.call(this),
                        n.push("</div>");
                }.call(this, "undefined" in i ? i.undefined : void 0),
                n.join("")
            );
        }
        return e(t);
    }),
    (ty.templates["/tmpl/anonkun/story/jade/textChapter"] = function (t) {
        function e(t) {
            var e,
                n = [];
            if (!i) var i = t.chapter;
            return n.push('<div ng-non-bindable="ng-non-bindable" class="fieldBody">' + (null == (e = t.scope.transformChapter(i.b)) ? "" : e) + "</div>"), n.join("");
        }
        return e(t);
    });
